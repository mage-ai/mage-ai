"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6299],{43032:function(e,n,t){t.d(n,{Cl:function(){return u},Nk:function(){return c},ZG:function(){return l}});var o=t(38626),r=t(23831),i=t(49125),l=1.5*i.iI,u=1*l+i.iI/2,c=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||r.Z.interactive).hoverBackground,";\n    ")}))},46299:function(e,n,t){t.d(n,{Z:function(){return ie}});var o=t(82394),r=t(75582),i=t(26304),l=t(82684),u=t(38626),c=t(83455),a=t(86422),s=t(62084),d=t(16634),f=t(73828),p=t(93461),v=t(19711),h=t(22341),m=t(43032),b=t(49125),g=t(60701),j=t(91427),y=t(44162),C=t(32821),k=t(24224),x=t(90211),w=t(28598);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z="default_repo";var F=function e(n){var t=n.allowEmptyFolders,o=n.allowSelectingFolders,r=n.containerRef,i=n.disableContextMenu,u=n.file,c=n.isFileDisabled,s=n.level,O=n.onClickFile,F=n.onClickFolder,P=n.onSelectBlockFile,E=n.onlyShowChildren,_=n.openFile,I=n.openPipeline,S=n.openSidekickView,R=n.pipelineBlockUuids,T=n.renderAfterContent,N=n.selectFile,M=n.setContextItem,L=n.setCoordinates,A=n.setDraggingFile,B=n.setSelectedFile,U=n.theme,z=n.timeout,q=n.uncollapsed,W=n.useRootFolder,Y=u.children,G=u.disabled,$=u.name,H=u.parent;$||t||(u.name=Z);var X,Q=W?(0,C.a9)(u):(0,C.jN)(u),V=(null===H||void 0===H?void 0:H.name)===f.oy,J=(0,l.useMemo)((function(){return Y?(0,k.YC)(Y,(function(e){return e.children?0:1})):Y}),[Y]),K=c?c(Q,J):G||"__init__.py"===$||!(null===$||void 0===$||!$.match(/^\./))||!$.match(f.d2)&&!Y,ee=c?c(Q,J):G||"__init__.py"===$||!(null===$||void 0===$||!$.match(/^\./))&&!J||!$.match(f.d2)&&!Y,ne="".concat(s,"/").concat($),te=(R.includes((0,C.dq)(u)),(0,l.useState)("undefined"===typeof q?(0,j.U2)(ne,!1):!q)),oe=te[0],re=te[1],ie=h.iU;1===s&&$===f.oy?ie=h.B_:$===f.PF?ie=h.er:J?ie=h.gt:!$&&t&&(ie=h.mH),J&&a.$W.includes((0,x.C5)($))&&(0,x.C5)($)!==a.tf.CHART&&(X=(0,y.qn)((0,x.C5)($),{theme:U}).accent);var le=(0,l.useMemo)((function(){return null===J||void 0===J?void 0:J.map((function(n){return(0,w.jsx)(e,{allowEmptyFolders:t,allowSelectingFolders:o,containerRef:r,disableContextMenu:i,file:D(D({},n),{},{parent:u}),isFileDisabled:c,level:E?s:s+1,onClickFile:O,onClickFolder:F,onSelectBlockFile:P,openFile:_,openPipeline:I,openSidekickView:S,pipelineBlockUuids:R,renderAfterContent:T,selectFile:N,setContextItem:M,setCoordinates:L,setDraggingFile:A,setSelectedFile:B,theme:U,timeout:z,uncollapsed:q,useRootFolder:W},"".concat(ne,"/").concat((null===n||void 0===n?void 0:n.name)||Z))}))}),[t,o,J,r,i,u,c,s,O,F,P,E,_,I,S,R,T,N,M,L,A,B,U,z,q,W,ne]),ue=(0,l.useMemo)((function(){var e=[];return(0,k.w6)(s).forEach((function(n,t){var o,r=m.Cl-1;e.push((0,w.jsx)("div",{style:{borderLeft:"1px solid ".concat(null===U||void 0===U||null===(o=U.content)||void 0===o?void 0:o.disabled),height:22,marginLeft:r/2-2,paddingLeft:r/2+2}},"line-".concat(ne,"-").concat(t)))})),e}),[s,U,ne]);return(0,w.jsxs)(w.Fragment,{children:[!E&&(0,w.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!ee){if((null===H||void 0===H?void 0:H.name)===f.PF){null===S||void 0===S||S(g.cH.CHARTS);var n=(0,C.lr)(u);n&&(null===P||void 0===P||P(n.uuid,n.type,(0,C.jN)(u)))}var t=(0,C.V3)(u);if(J)o?N(Q):re((function(e){return(0,j.t8)(ne,!e),!e})),null===F||void 0===F||F(Q);else if(O)O(Q);else if(t)null===P||void 0===P||P(t.uuid,t.type,(0,C.jN)(u));else if($.match(f.xF))null===_||void 0===_||_(Q);else{var r=(0,C.lr)(u);r&&(null===P||void 0===P||P(r.uuid,r.type,(0,C.jN)(u)))}}},onContextMenu:function(e){var n;clearTimeout(z.current),null!==r&&void 0!==r&&null!==(n=r.current)&&void 0!==n&&n.contains(e.target)&&!i&&(e.preventDefault(),L({x:e.pageX,y:e.pageY}),A(null),B(u))},onMouseDown:function(e){var n,t=u?(0,C.lr)(u):null;null===r||void 0===r||null===(n=r.current)||void 0===n||!n.contains(e.target)||!t||(null===J||void 0===J?void 0:J.length)>=1||i||ee||V||(e.preventDefault(),clearTimeout(z.current),z.current=setTimeout((function(){L({x:e.pageX,y:e.pageY}),A(u),B(null)}),300))},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:s*m.Cl+u.name.length*b.Fo+2*b.iI,paddingRight:b.iI/4},children:[(0,w.jsxs)(p.Z,{alignItems:"center",flex:1,children:[ue,J&&!oe&&(0,w.jsx)(h._M,{muted:!0,size:m.ZG}),J&&oe&&(0,w.jsx)(h._Q,{muted:!0,size:m.ZG}),!J&&(0,w.jsx)("div",{style:{width:m.ZG}}),(0,w.jsxs)("div",{style:{marginLeft:b.iI/2,marginRight:b.iI/2},children:[!X&&(0,w.jsx)(ie,{disabled:K,size:m.ZG}),X&&(0,w.jsx)(d.Z,{color:X,size:m.ZG,square:!0})]}),(0,w.jsx)(v.ZP,{color:X,default:!X&&!ee,disabled:ee,monospace:!0,small:!0,children:$})]}),T&&T(u)]}),(0,w.jsx)("div",{style:{display:oe?"none":"block"},children:le})]})},P=t(60328),E=t(67971),_=t(11135),I=t(29237),S=t(86673),R=t(82944),T=t(82531),N=t(7715),M=t(96510);var L=function(e){var n=e.fetchFileTree,t=e.file,o=e.moveFile,i=e.onCancel,u=e.onCreateFile,a=e.selectedFolder,s=e.setErrors,d=(0,l.useRef)(null),f=(0,N.Qr)(t)?null:t,p=(0,l.useState)(f?(0,C.jN)(f,null,!0):""),v=p[0],h=p[1],m=(0,l.useState)(f?null===f||void 0===f?void 0:f.name:""),b=m[0],g=m[1];(0,l.useEffect)((function(){var e;null===d||void 0===d||null===(e=d.current)||void 0===e||e.focus()}),[]),(0,l.useEffect)((function(){a&&h((0,C.jN)(a))}),[a]);var j=(0,c.Db)(T.ZP.files.useCreate(),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(e){var t=e.file;null===n||void 0===n||n(),i(),null===u||void 0===u||u(t)},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),y=(0,r.Z)(j,1)[0],k=(0,c.Db)(T.ZP.files.useUpdate(f&&encodeURIComponent((0,C.jN)(f))),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){null===n||void 0===n||n(),i()},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),x=(0,r.Z)(k,1)[0];return(0,w.jsxs)(I.Z,{footer:(0,w.jsxs)(E.Z,{children:[(0,w.jsxs)(_.ZP,{bold:!0,disabled:!b,inline:!0,onClick:function(){return f?x({file:{dir_path:v,name:b},file_json_only:!0}):y({file:{dir_path:v,name:b,overwrite:!1},file_json_only:!0})},primary:!0,tabIndex:0,uuid:"NewFile/create_file",children:[f?o?"Move":"Rename":"Create"," file"]}),(0,w.jsx)(S.Z,{ml:1,children:(0,w.jsx)(P.Z,{onClick:function(){return i()},tabIndex:0,children:"Cancel"})})]}),headerTitle:f?o?"Move file":"Rename file":"New file",children:[(0,w.jsx)(R.Z,{disabled:!!f&&!o,label:"Directory",monospace:!0,onChange:function(e){return h(e.target.value)},setContentOnMount:!0,value:v}),(0,w.jsx)(S.Z,{mt:2,children:(0,w.jsx)(R.Z,{disabled:!!o,label:"Filename",monospace:!0,onChange:function(e){return g(e.target.value)},ref:d,required:!0,value:b})})]})};var A=function(e){var n=e.fetchFileTree,t=e.file,o=e.moveFile,i=e.onCancel,u=e.onCreateFile,a=e.selectedFolder,s=e.setErrors,d=(0,l.useRef)(null),f=(0,N.Qr)(t)?null:t,p=(0,l.useState)(f?(0,C.jN)(f,null,!0):""),v=p[0],h=p[1],m=(0,l.useState)(f?null===f||void 0===f?void 0:f.name:""),b=m[0],g=m[1];(0,l.useEffect)((function(){var e;null===d||void 0===d||null===(e=d.current)||void 0===e||e.focus()}),[]),(0,l.useEffect)((function(){a&&h((0,C.jN)(a,null,!0))}),[a]);var j=(0,c.Db)(T.ZP.folders.useCreate(),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(e){var t=e.file;null===n||void 0===n||n(),i(),null===u||void 0===u||u(t)},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),y=(0,r.Z)(j,1)[0],k=(0,c.Db)(T.ZP.folders.useUpdate(f&&encodeURIComponent((0,C.jN)(f))),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){null===n||void 0===n||n(),i()},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),x=(0,r.Z)(k,1)[0];return(0,w.jsxs)(I.Z,{footer:(0,w.jsxs)(E.Z,{children:[(0,w.jsxs)(_.ZP,{bold:!0,disabled:!b,inline:!0,onClick:function(){return f?x({folder:{name:b,path:v}}):y({folder:{name:b,overwrite:!1,path:v}})},primary:!0,tabIndex:0,uuid:"NewFolder/create_folder",children:[f?o?"Move":"Rename":"Create"," folder"]}),(0,w.jsx)(S.Z,{ml:1,children:(0,w.jsx)(P.Z,{onClick:function(){return i()},tabIndex:0,children:"Cancel"})})]}),headerTitle:f?o?"Move folder":"Rename folder":"New folder",children:[(0,w.jsx)(R.Z,{disabled:!!f&&!o,label:"Directory",monospace:!0,onChange:function(e){return h(e.target.value)},setContentOnMount:!0,value:v}),(0,w.jsx)(S.Z,{mt:2,children:(0,w.jsx)(R.Z,{disabled:!!o,label:"Folder name",monospace:!0,onChange:function(e){return g(e.target.value)},ref:d,required:!0,value:b})})]})},B=t(98781),U=t(62609),z=t(55106),q=t(66176),W=t(87815),Y=t(23831),G=t(73942),$=(b.iI,u.default.div.withConfig({displayName:"indexstyle__DropZoneStyle",componentId:"sc-1g3zz7z-0"})(["border-radius:","px;padding:","px;max-width:","px;min-width:","px;",""],G.n_,8*b.iI,100*b.iI,55*b.iI,(function(e){return"\n    border: 1px dashed ".concat((e.theme.borders||Y.Z.borders).contrast,";\n  ")}))),H=u.default.div.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1g3zz7z-1"})(["max-width:","px;min-width:","px;"],100*b.iI,55*b.iI);var X=function(e){var n=e.fetchFileTree,t=e.onCancel,o=e.selectedFolder,i=(0,l.useState)(!1),u=i[0],c=i[1],a=(0,l.useState)({}),s=a[0],d=a[1],f=(0,l.useState)({}),p=f[0],h=f[1],m=!(0,N.Qr)(s),b=(0,l.useMemo)((function(){var e=[];return(0,k.YC)(Object.entries(s),(function(e){var n=(0,r.Z)(e,2),t=n[0];n[1];return t})).forEach((function(n){var t=(0,r.Z)(n,2),o=t[0],i=t[1],l=p[o],u=null===l||void 0===l?void 0:l.message;e.push([(0,w.jsxs)("div",{children:[(0,w.jsx)(v.ZP,{overflowWrap:!0,preWrap:!0,children:o}),u&&(0,w.jsx)(S.Z,{mt:1,children:(0,w.jsx)(v.ZP,{danger:!0,small:!0,children:u})})]},"name-".concat(o)),(0,w.jsx)(q.Z,{danger:!!u,progress:100*i},"progress-".concat(o))])})),(0,w.jsx)(W.Z,{columnFlex:[1,4],columns:[{uuid:"Filename"},{uuid:"Upload progress"}],rows:e,uuid:"block-runs"})}),[s,p]);return(0,w.jsxs)(I.Z,{footer:(0,w.jsxs)(E.Z,{fullWidth:!0,children:[(0,w.jsx)(P.Z,{onClick:function(){return t()},children:"Close"}),m&&(0,w.jsx)(S.Z,{ml:1,children:(0,w.jsx)(P.Z,{onClick:function(){d({}),h({})},children:"Clear files and retry"})})]}),headerTitle:"Upload files",children:[m&&(0,w.jsx)(H,{children:b}),!m&&(0,w.jsx)(z.Z,{directoryPath:o?(0,C.jN)(o):"",onDragActiveChange:c,setFileUploadProgress:d,setUploadedFiles:function(e){h(e),null===n||void 0===n||n()},children:(0,w.jsx)($,{children:(0,w.jsxs)(v.ZP,{center:!0,children:[u&&"Drop to upload",!u&&"Click or drop files and folders to upload"]})})})]})},Q=t(86585),V=t(55512),J=t(99497),K=["addNewBlock","blocks","deleteWidget","fetchAutocompleteItems","fetchFileTree","fetchPipeline","files","onCreateFile","pipeline","setErrors","setSelectedBlock","widgets"];function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te,oe=20*b.iI;function re(e,n){var t=e.addNewBlock,o=e.blocks,d=void 0===o?[]:o,p=e.deleteWidget,h=e.fetchAutocompleteItems,g=e.fetchFileTree,j=e.fetchPipeline,y=e.files,x=e.onCreateFile,O=e.pipeline,D=e.setErrors,Z=e.setSelectedBlock,P=e.widgets,E=void 0===P?[]:P,_=(0,i.Z)(e,K),I=(0,l.useRef)(null),S=(0,l.useContext)(u.ThemeContext),R=(0,l.useState)(null),N=R[0],z=R[1],q=(0,l.useState)(null),W=q[0],Y=q[1],G=(0,l.useState)(null),$=G[0],H=G[1],ee=T.ZP.statuses.list().data,te=(0,l.useMemo)((function(){var e,n;return null===ee||void 0===ee||null===(e=ee.statuses)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.repo_path}),[ee]),re=(0,c.Db)((function(e){return T.ZP.files.useDelete(e)()}),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){null===g||void 0===g||g()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),ie=(0,r.Z)(re,1)[0],le=(0,c.Db)((function(e){return T.ZP.folders.useDelete(e)()}),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){null===g||void 0===g||g()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),ue=(0,r.Z)(le,1)[0],ce=(0,J.dd)((function(e){var n=e.block;return(0,w.jsx)(U.Z,{centerOnScreen:!0,danger:!0,onCancel:de,onClick:function(){return pe({block:n,force:!0}).then((function(){return de()}))},subtitle:"Deleting this block file is dangerous. This block may have dependencies in active pipelines. Press confirm to delete this block anyway and remove it as a dependency from downstream blocks.",title:"Delete ".concat(n.uuid," anyway?"),width:34*b.iI})})),ae=(0,r.Z)(ce,2),se=ae[0],de=ae[1],fe=(0,c.Db)((function(e){var n=e.block,t=n.language,o=n.type,r=n.uuid,i=e.force,l=void 0!==i&&i,u="".concat(o,"/").concat(r);return t&&f.JD[t]&&(u="".concat(u,".").concat(f.JD[t].toLowerCase())),T.ZP.blocks.useDelete(encodeURIComponent(u),{force:l})()}),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){h(),j(),g()},onErrorCallback:function(e){var n=e.error,t=n.exception;n.message.includes("raise HasDownstreamDependencies")&&se({block:ye,exception:t})}})}}),pe=(0,r.Z)(fe,1)[0],ve=(0,k.sE)(null===O||void 0===O?void 0:O.blocks,(function(e){var n=e.type;return a.tf.DATA_EXPORTER===n})),he=(0,c.Db)(T.ZP.blocks.pipelines.useUpdate(null===O||void 0===O?void 0:O.uuid,null===ve||void 0===ve?void 0:ve.uuid),{onSuccess:function(e){return(0,M.wD)(e,{callback:function(){null===j||void 0===j||j()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),me=(0,r.Z)(he,1)[0],be=(0,l.useCallback)((function(){return H(null)}),[H]);(0,l.useEffect)((function(){var e,o,r,i=function(e){if(clearTimeout(I.current),Y(null),W&&O&&t){var o,r,i=(null===n||void 0===n||null===(o=n.current)||void 0===o||null===(r=o.getBoundingClientRect)||void 0===r?void 0:r.call(o))||{},l=i.width,u=i.x;if(e.pageX>u+l){var c=(null===O||void 0===O?void 0:O.type)===B.qL.INTEGRATION,a=(0,V.TU)(ne(ne({},W),{},{path:(0,C.jN)(W)}),te,O);null===t||void 0===t||t(a,(function(e){c&&ve&&me({block:ne(ne({},ve),{},{upstream_blocks:[e.uuid]})}),null===Z||void 0===Z||Z(e)}))}}},l=function(e){W&&z({x:e.pageX,y:e.pageY})};return null===(e=document)||void 0===e||e.addEventListener("click",be),null===(o=document)||void 0===o||o.addEventListener("mousemove",l),null===(r=document)||void 0===r||r.addEventListener("mouseup",i),function(){var e,n,t;null===(e=document)||void 0===e||e.removeEventListener("click",be),null===(n=document)||void 0===n||n.removeEventListener("mousemove",l),null===(t=document)||void 0===t||t.removeEventListener("mouseup",i)}}),[t,ve,W,be,O,n,te,Z,I,me]);var ge=(0,l.useMemo)((function(){return d.concat(E).map((function(e){return e.uuid}))}),[d,E]),je=(0,l.useMemo)((function(){return null===y||void 0===y?void 0:y.map((function(e){return(0,l.createElement)(F,ne(ne({},_),{},{containerRef:n,file:e,key:e.name,level:0,pipelineBlockUuids:ge,setCoordinates:z,setDraggingFile:Y,setSelectedFile:H,theme:S,timeout:I}))}))}),[y,ge,_,n,S,I]),ye=(0,l.useMemo)((function(){return $&&(0,C.lr)($)}),[$]),Ce=(0,l.useMemo)((function(){return W&&(0,C.lr)(W)}),[W]),ke=(0,l.useMemo)((function(){return $&&"undefined"!==typeof(null===$||void 0===$?void 0:$.children)&&$}),[$]),xe=(0,J.dd)((function(){return(0,w.jsx)(X,{fetchFileTree:g,onCancel:De,selectedFolder:ke})}),{},[g,ke],{background:!0,uuid:"upload_files"}),we=(0,r.Z)(xe,2),Oe=we[0],De=we[1],Ze=(0,J.dd)((function(e){return(0,w.jsx)(L,{fetchFileTree:g,file:null===e||void 0===e?void 0:e.file,moveFile:null===e||void 0===e?void 0:e.moveFile,onCancel:Ee,onCreateFile:x,selectedFolder:ke,setErrors:D})}),{},[g,x,ke,D],{background:!0,disableClickOutside:!0,uuid:"new_file"}),Fe=(0,r.Z)(Ze,2),Pe=Fe[0],Ee=Fe[1],_e=(0,J.dd)((function(e){return(0,w.jsx)(A,{fetchFileTree:g,file:null===e||void 0===e?void 0:e.file,moveFile:null===e||void 0===e?void 0:e.moveFile,onCancel:Re,selectedFolder:ke,setErrors:D})}),{},[g,ke,D],{background:!0,disableClickOutside:!0,uuid:"new_folder"}),Ie=(0,r.Z)(_e,2),Se=Ie[0],Re=Ie[1],Te=(0,l.useMemo)((function(){var e;if(!ye&&!$&&!ke)return(0,w.jsx)("div",{});var t=(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect())||{},o=t.x,r=t.width,i=N||{},l=i.x,u=void 0===l?0:l,c=i.y,d=void 0===c?0:c,f=u;u+oe>=o+r&&(f=o+r-(oe+b.iI)),f<0&&(f=0);var v=[];return ke?v.push.apply(v,[{label:function(){return"New folder"},onClick:function(){Se()},uuid:"new_folder"},{label:function(){return"Rename folder"},onClick:function(){Se({file:ke})},uuid:"rename_folder"},{label:function(){return"Move folder"},onClick:function(){Se({file:ke,moveFile:!0})},uuid:"Move_folder"},{label:function(){return"Delete folder"},onClick:function(){var e=(0,C.jN)(ke);window.confirm("Are you sure you want to delete folder ".concat(e," and all its subfolders and files?"))&&ue(encodeURIComponent(e))},uuid:"Delete_folder"},{label:function(){return"New file"},onClick:function(){Pe({file:{}})},uuid:"new_file"},{label:function(){return"Upload files"},onClick:function(){Oe()},uuid:"upload_files"}]):$&&(v.push.apply(v,[{label:function(){return"Rename file"},onClick:function(){Pe({file:$})},uuid:"rename_file"},{label:function(){return"Move file"},onClick:function(){Pe({file:$,moveFile:!0})},uuid:"move_file"}]),ye?v.push({label:function(){return"Delete block file"},onClick:function(){ye.type===a.tf.CHART?window.confirm("Are you sure you want to delete widget ".concat(ye.uuid,"?"))&&p(ye):window.confirm("Are you sure you want to delete block ".concat(ye.uuid,"?"))&&pe({block:ye})},uuid:"delete_block_file"}):v.push({label:function(){return"Delete file"},onClick:function(){var e=(0,C.jN)($);window.confirm("Are you sure you want to delete file ".concat(e,"?"))&&ie(encodeURIComponent(e))},uuid:"delete_file"})),(0,w.jsx)("div",{style:{left:f,position:"fixed",top:d+b.iI/2,zIndex:Q.bf+100},children:(0,w.jsx)(s.Z,{items:v,open:!0,parentRef:void 0,uuid:"FileBrowser/ContextMenu",width:oe})})}),[N,pe,ie,ue,p,n,Oe,Pe,Se,ye,$,ke]);return(0,w.jsxs)(m.Nk,{ref:n,children:[je,(ye||$||ke)&&Te,Ce&&(0,w.jsx)("div",{style:{left:(null===N||void 0===N?void 0:N.x)-b.iI,position:"fixed",top:(null===N||void 0===N?void 0:N.y)-b.iI,zIndex:Q.bf+100},children:(0,w.jsx)(v.ZP,{cursor:"grabbing",monospace:!0,children:null===Ce||void 0===Ce?void 0:Ce.uuid})})]})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(te||(te={}));var ie=l.forwardRef(re)},32821:function(e,n,t){t.d(n,{IO:function(){return p},V3:function(){return d},a9:function(){return u},dq:function(){return f},jN:function(){return a},lr:function(){return s}});var o=t(17717),r=t(86422),i=t(73828),l=t(90211);function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n||(t?null:null===e||void 0===e?void 0:e.name);if(null!==e&&void 0!==e&&e.parent){var i=[e.parent.name];return(null===r||void 0===r?void 0:r.length)>=1&&i.push(r),u(e.parent,i.join(o.sep))}return r}function c(e){return null===e||void 0===e?void 0:e.split(o.sep).slice(1).join(o.sep)}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=u(e,n,t);return c(o)}function s(e){var n,t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=u(e,c).split(o.sep);if(!a)return null;if(1===a.length)(a=null===e||void 0===e||null===(t=e.path)||void 0===t?void 0:t.split(o.sep))&&(n=a[0]===r.tf.CUSTOM?a[0]:(0,l.C5)(a[0]||""));else if(a[1]===r.tf.CUSTOM)n=a[1];else{var s=a[1];n=r.tf.DBT===s?s:(0,l.C5)(s||"")}if(!a||r.tf.DBT===n)return null;var d="";d=a.length>=3?a.slice(2,a.length).join(o.sep):a[a.length-1];var f=["\\.".concat(i.Lu.PY),"\\.".concat(i.Lu.R),"\\.".concat(i.Lu.SQL),"\\.".concat(i.Lu.YAML),"\\.".concat(i.Lu.YML)].join("|"),p=new RegExp("".concat(f,"$"));if(r.$W.concat(r.tf.DBT).includes(n)&&d.match(p)){var v=d.lastIndexOf("."),h=d.slice(v+1);return{language:i.nB[h],type:n,uuid:d.slice(0,v)}}}function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=u(e,n).split(o.sep);if(t[1]){var c=(0,l.C5)(t[n?0:1]);t[1]===r.tf.DBT&&(c=r.tf.DBT);var a=t[t.length-1],s=new RegExp(".".concat(i.Lu.YAML,"$")),d=new RegExp(".".concat(i.Lu.R,"$")),f=new RegExp(".".concat(i.Lu.SQL,"$")),p=new RegExp(".".concat(i.Lu.MD,"$"));if(a.match(s)&&r.VZ.includes(c))return{type:c,uuid:a.replace(s,"")};if(a.match(d)&&r.J8.includes(c))return{type:c,uuid:a.replace(d,"")};if(a.match(f)&&r.HX.includes(c)){var v=a.replace(/[.]/g,"_"),h=c===r.tf.DBT?t.slice(2,-1).join("_").concat("_".concat(v)):a.replace(f,"");return{type:c,uuid:h}}return a.match(p)&&c===r.tf.MARKDOWN?{type:c,uuid:a.replace(p,"")}:void 0}}function f(e){var n=e.name.split("."),t=n[n.length-1];return i.n6.includes(t)&&n.pop(),n.join("")}function p(e,n){var t=e.split("."),r=t[t.length-1];i.n6.includes(r)&&t.pop();var l=t.join("").split(o.sep),u=l.slice(1,l.length).join("");return n.find((function(e){return e.uuid===u}))}},55512:function(e,n,t){t.d(n,{TU:function(){return f},ck:function(){return s},lU:function(){return d}});var o=t(21831),r=t(17717),i=t(86422),l=t(98781),u=t(73828),c=t(24224),a=t(90211),s=function(e){var n=e[0];return n===i.tf.DBT||n===i.tf.CUSTOM?n:e[0].slice(0,-1)};function d(){return new RegExp(Object.keys(u.nB).map((function(e){return".(".concat(e,")$")})).join("|"))}function f(e,n,t){var f,p,v=null===e||void 0===e||null===(f=e.path.match(d())[0])||void 0===f?void 0:f.split(".")[1],h=t.type===l.qL.INTEGRATION,m=(0,c.sE)(null===t||void 0===t?void 0:t.blocks,(function(e){var n=e.type;return i.tf.DATA_EXPORTER===n})),b=e.path.replace(n,"").split(r.sep),g=e.path.split(r.sep)[0]===i.tf.DBT,j=(p=b)[0]===i.tf.DBT?p.slice(1).join(r.sep):function(e){return e.at(-1)}(p).split(".")[0];if(b.length>=3&&!g){var y=b.slice(1,b.length-1).join(r.sep);j="".concat(y,"/").concat(j)}var C=s(e.path.split(r.sep)),k={configuration:{file_path:g?j:null},language:u.nB[v],name:(0,a.wE)(j),type:C};if(C===i.tf.CUSTOM&&(k.color=i.Lq.TEAL),h){var x=(0,c.sE)(t.blocks,(function(e){var n=e.type;return i.tf.DATA_LOADER===n})),w=(0,c.sE)(t.blocks,(function(e){var n=e.type;return i.tf.TRANSFORMER===n})),O=[];w?O.push(w.uuid):null!==m&&void 0!==m&&m.upstream_blocks?O.push.apply(O,(0,o.Z)(m.upstream_blocks)):x&&O.push(x.uuid),k.upstream_blocks=O}return k}},55106:function(e,n,t){t.d(n,{Z:function(){return g}});var o=t(82394),r=t(75582),i=t(17717),l=t(82684),u=t(83455),c=t(38626),a=t(77011),s=t(28598);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=c.default.div.withConfig({displayName:"MultiFileInput__DropzoneStyle",componentId:"sc-1l6yd2y-0"})(["&:hover{cursor:pointer;}"]);var v=function(e){var n=e.children,t=e.inputOnChange,o=e.inputProps,r=e.onDragActiveChange,i=e.setFiles,u=(0,l.useCallback)((function(e){i(e)}),[i]),c=(0,a.uI)({onDrop:u}),d=c.getInputProps,v=c.getRootProps,h=c.isDragActive,m=d(),b=m.accept,g=m.autoComplete,j=m.multiple,y=m.onChange,C=m.onClick,k=m.ref,x=m.style,w=m.tabIndex,O=m.type,D=f(f({},o),{},{accept:b,autoComplete:g,multiple:j,onChange:function(e){null===t||void 0===t||t(e),null===o||void 0===o||o.onChange(e),y(e)},onClick:C,ref:k,style:x,tabIndex:w,type:O});return(0,l.useEffect)((function(){null===r||void 0===r||r(h)}),[h,r]),(0,s.jsxs)(p,f(f({},v()),{},{children:[(0,s.jsx)("input",f(f({},D),{},{directory:"",webkitdirectory:""})),n]}))},h=t(82531);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=function(e){var n=e.children,t=e.directoryPath,c=e.onDragActiveChange,a=e.setFileUploadProgress,d=e.setUploadedFiles,f=(0,u.Db)(h.ZP.files.useCreate({onUploadProgress:function(e,n){var t,r=n.body,l=[null===r||void 0===r?void 0:r.dir_path,null===r||void 0===r||null===(t=r.file)||void 0===t?void 0:t.name].filter((function(e){return(null===e||void 0===e?void 0:e.length)>=1})).join(i.sep);null===a||void 0===a||a((function(n){return b(b({},n),{},(0,o.Z)({},l,e.loaded/e.total))}))}})),p=(0,r.Z)(f,1)[0],m=(0,l.useCallback)((function(e){e.forEach((function(e){var n=e.name,r=e.path,l=[t],u=r.split(i.sep).filter((function(e){return e&&e!==n})).join(i.sep);u&&l.push(u);var c=[],s=l.join(i.sep);(null===s||void 0===s?void 0:s.length)>=1&&l.push(s),c.push(n);var f=c.join(i.sep);p({dir_path:s,file:e,overwrite:!1}).then((function(e){var n=e.data,t=n.error,r=n.file;d((function(e){return b(b({},e),{},(0,o.Z)({},f,r||t))}))})),a((function(e){return b(b({},e),{},(0,o.Z)({},f,0))}))}))}),[p,t,a,d]);return(0,s.jsx)(v,{onDragActiveChange:c,setFiles:m,children:n})}}}]);