"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8952],{35438:function(n,e,o){o.d(e,{Ai:function(){return l},Jo:function(){return r},bJ:function(){return c},rl:function(){return t}});var t,i=o(86422),r=(o(49125).iI,1e4),l={compact:!0},c={height:10,width:10};i.tf.DATA_EXPORTER,i.tf.SENSOR,i.Lq.GREY,i.Lq.PINK,i.Lq.TEAL,i.Lq.YELLOW;!function(n){n.NORTH="NORTH",n.SOUTH="SOUTH"}(t||(t={}))},48952:function(n,e,o){o.d(e,{Z:function(){return yn}});var t=o(75582),i=o(21831),r=o(82394),l=o(26304),c=o(77837),u=o(38860),d=o.n(u),a=o(51774),s=o.n(a),v=o(38626),f=o(4804),p=o(82684),h=o(83455),b=o(18283),m=o(86422),k=o(16634),g=o(93461),x=o(67971),y=o(86673),O=o(54283),C=o(19711),j=o(23831),E=o(22341),I=o(73942),T=o(49125),Z=3*T.iI,w=v.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-kc7274-0"})(["border-radius:","px;border:1px solid transparent;min-width:fit-content;overflow:hidden;"," "," "," "," "," "," "," ",""],I.n_,(function(n){return"\n    background-color: ".concat((n.theme.background||j.Z.background).codeTextarea,";\n  ")}),(function(n){return n.borderColor&&"\n    border-color: ".concat(n.borderColor,";\n  ")}),(function(n){return n.selected&&"\n    border-color: ".concat((n.theme.content||j.Z.content).active,";\n  ")}),(function(n){return(n.isCancelled||n.disabled)&&"\n    // opacity doesn\u2019t work on Safari\n    border-color: ".concat((n.theme.content||j.Z.content).muted,";\n    border-style: dotted;\n    cursor: not-allowed;\n    opacity: 0.5;\n  ")}),(function(n){return n.isConditionFailed&&"\n    background-color: ".concat((n.theme.content||j.Z.content).disabled,";\n    cursor: not-allowed;\n  ")}),(function(n){return n.isConditionFailed&&"\n    background-color: ".concat((n.theme.content||j.Z.content).disabled,";\n    cursor: not-allowed;\n  ")}),(function(n){return n.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),_=v.default.div.withConfig({displayName:"indexstyle__StatusStyle",componentId:"sc-kc7274-1"})(["height:","px;width:","px;"],2*T.iI,2*T.iI),A=v.default.div.withConfig({displayName:"indexstyle__IconStyle",componentId:"sc-kc7274-2"})(["align-items:center;border-radius:","px;border:2px solid transparent;display:flex;height:","px;justify-content:center;width:","px;"," ",""],I.BG,5*T.iI,5*T.iI,(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n    border-color: ").concat(n.backgroundColor,";\n  ")}),(function(n){return n.borderColor&&"\n    border-color: ".concat(n.borderColor,";\n  ")})),D=v.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-kc7274-3"})(["padding:","px;",""],1*T.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||j.Z.background).dashboard,";\n  ")})),S=v.default.div.withConfig({displayName:"indexstyle__BodyStyle",componentId:"sc-kc7274-4"})(["padding-left:","px;padding-right:","px;"],1*T.iI,1*T.iI),R=(v.default.div.withConfig({displayName:"indexstyle__RuntimeStyle",componentId:"sc-kc7274-5"})(["margin-right:","px;padding:12px 4px;height:100%;width:50px;background:rgba(0,0,0,0.2);background-blend-mode:soft-light;"],2*T.iI),o(98781)),P=o(75968),N=o(25958),B=T.cd,L=T.cd*T.iI,M=2*T.iI,F=7.43,H=2*T.iI+5*T.iI,U=2*T.iI+5*T.iI+L+L+M,G=30*T.iI;function V(n){var e=(0,P.MS)(n);if((null===e||void 0===e?void 0:e.length)>=1)return(null===e||void 0===e?void 0:e.map((function(n){return n.title})).join(", "))||"";if(m.tf.GLOBAL_DATA_PRODUCT===(null===n||void 0===n?void 0:n.type)){var o,t=null===n||void 0===n||null===(o=n.configuration)||void 0===o?void 0:o.global_data_product;if(null!==t&&void 0!==t&&t.uuid)return null===t||void 0===t?void 0:t.uuid}return m.dO[null===n||void 0===n?void 0:n.language]||""}function q(n,e){var o,t=n.type,i=(null===m.V4||void 0===m.V4?void 0:m.V4[t])||t;if(R.qL.INTEGRATION===(null===e||void 0===e?void 0:e.type)&&m.tf.TRANSFORMER!==n.type){var r,l={};if(m.t6.YAML===n.language&&(l=(0,f.Qc)(n.content)),m.tf.DATA_LOADER===n.type)o="".concat(n.uuid,": ").concat(null===(r=l)||void 0===r?void 0:r.source);else if(m.tf.DATA_EXPORTER===n.type){var c;o="".concat(n.uuid,": ").concat(null===(c=l)||void 0===c?void 0:c.destination)}}else if(m.tf.DBT===n.type&&m.t6.SQL===n.language){var u=(0,N.IU)(n),d=u.name,a=u.project;o=d,i="".concat(i,"/").concat(a)}return null!==n&&void 0!==n&&n.replicated_block&&(o=null===n||void 0===n?void 0:n.replicated_block,i=null===n||void 0===n?void 0:n.uuid),o||(o=n.uuid),{displayText:o,subtitle:i}}function J(n,e){return q(n,e).displayText||""}function X(n,e){return q(n,e).subtitle||""}function z(n){var e=0;return null===n||void 0===n||n.forEach((function(n,o){var t=n.uuid;e+=4+t.length*F,o>=1&&(e+=4)})),e}function Q(n,e,o){var t,i=0,r=2+H,l=W(n,e,o)-(2+2*T.iI),c=V(n),u=(null===c||void 0===c?void 0:c.length)*F;if(u>=1){var d=1;u>l&&(d=Math.ceil(u/l)),i+=1,r+=18*d}var a=o||{},s=a.blockStatus;return[a.callbackBlocks,a.conditionalBlocks,a.extensionBlocks].forEach((function(n){if((null===n||void 0===n?void 0:n.length)>=1){var e=z(n),o=1;e>l&&(o=Math.ceil(e/l)),i+=1,r+=18.5*o+4*(o-1)}})),"undefined"!==typeof(null===s||void 0===s||null===(t=s[n.uuid])||void 0===t?void 0:t.runtime)&&(r+=18,i+=1),r+=(i+=1)*(1*T.iI)}function W(n,e,o){var t,r,l=Math.max(8.62*(null===(t=J(n,e))||void 0===t?void 0:t.length),(null===(r=X(n,e))||void 0===r?void 0:r.length)*F),c=V(n),u=(null===c||void 0===c?void 0:c.length)*F,d=o||{},a=d.callbackBlocks,s=d.conditionalBlocks,v=d.extensionBlocks,f=Math.max.apply(Math,(0,i.Z)([a,s,v].map((function(n){return z(n)})).concat(u)));return f>l&&(l=Math.min(G,f)),2+U+l}var K,Y=o(44162),$=o(35438),nn=o(90211),en=function(n){var e=n/1e3,o=4-Math.floor(e).toString().length,t=(0,nn.QV)(e,o>=0?o:0),i="s";return t>1e3&&(t=(0,nn.QV)(t/60,0),i="m"),"".concat(t).concat(i)},on=function(n,e){var o=n||{},t=o.id,i=o.side,r=null===e||void 0===e?void 0:e.id;return i===$.rl.NORTH?null===t||void 0===t?void 0:t.endsWith("".concat(r,"-to")):i===$.rl.SOUTH&&(null===t||void 0===t?void 0:t.startsWith(r))},tn=o(28598),rn=(K={},(0,r.Z)(K,m.tf.DATA_EXPORTER,E.zS),(0,r.Z)(K,m.tf.DATA_LOADER,E.rH),(0,r.Z)(K,m.tf.DBT,E.xE),(0,r.Z)(K,m.tf.GLOBAL_DATA_PRODUCT,E.ie),(0,r.Z)(K,m.tf.SENSOR,E.LM),(0,r.Z)(K,m.tf.TRANSFORMER,E.Sv),K);var ln=function(n){var e=n.block,o=n.callbackBlocks,t=n.conditionalBlocks,i=n.disabled,r=n.extensionBlocks,l=n.height,c=n.hideStatus,u=n.pipeline,d=n.selected,a=n.hasFailed,s=n.isCancelled,f=n.isConditionFailed,h=n.isInProgress,I=n.isQueued,T=n.isSuccessful,R=n.runtime,P=(0,p.useContext)(v.ThemeContext),N=!(h||I||a||T||s||f),L=a&&!(h||I),F=!L&&T&&!(h||I),H="";N?H="No status":F?H="Successful execution":L?H="Failed execution":h?H="Currently executiing":s&&(H="Cancelled execution");var U=e.color,G=e.type,q=(0,Y.qn)(G,{blockColor:U,theme:P}).accent,z=(0,p.useMemo)((function(){return V(e)}),[e]),Q=(0,p.useMemo)((function(){var n,e,o=rn[G]||E.EJ,t=!1;return[m.tf.CALLBACK,m.tf.CHART,m.tf.CONDITIONAL,m.tf.CUSTOM,m.tf.DATA_EXPORTER,m.tf.DATA_LOADER,m.tf.EXTENSION,m.tf.SCRATCHPAD,m.tf.SENSOR,m.tf.MARKDOWN,m.tf.TRANSFORMER].includes(G)?n=q:[m.tf.DBT].includes(G)&&(e=q),[m.tf.DATA_EXPORTER].includes(G)&&(t=!0),(0,tn.jsx)(A,{backgroundColor:n,borderColor:e,children:(0,tn.jsx)("div",{style:{height:Z,width:Z},children:(0,tn.jsx)(o,{inverted:t,size:Z})})})}),[q,G]);return(0,tn.jsxs)(w,{borderColor:q,disabled:i,height:l,isCancelled:s,isConditionFailed:f,selected:d,children:[(0,tn.jsx)(D,{children:(0,tn.jsxs)(x.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,tn.jsxs)(g.Z,{flex:1,children:[Q,(0,tn.jsx)(y.Z,{mr:B}),(0,tn.jsxs)(g.Z,{flexDirection:"column",children:[(0,tn.jsx)(C.ZP,{bold:!0,monospace:!0,children:J(e,u)}),(0,tn.jsx)(C.ZP,{default:!0,monospace:!0,small:!0,children:X(e,u)})]})]}),(0,tn.jsx)(y.Z,{mr:"15px"}),(0,tn.jsx)(_,{title:H,children:!c&&(0,tn.jsxs)(tn.Fragment,{children:[h&&(0,tn.jsx)(O.Z,{color:(P||j.Z).content.active,small:!0}),F&&(0,tn.jsx)(E.Jr,{size:M,success:!0}),L&&(0,tn.jsx)(E.x8,{danger:!0,size:M}),N&&(0,tn.jsx)(k.Z,{borderSize:1,muted:!0,size:M})]})})]})}),(0,tn.jsxs)(S,{children:[(null===z||void 0===z?void 0:z.length)>=1&&(0,tn.jsx)(y.Z,{mt:1,children:(0,tn.jsx)(C.ZP,{default:!0,monospace:!0,small:!0,children:z})}),[t,o,r].map((function(n,e){if((null===n||void 0===n?void 0:n.length)>=1)return(0,tn.jsx)("div",{style:{marginTop:4},children:(0,tn.jsx)(x.ZP,{alignItems:"center",flexWrap:"wrap",children:n.reduce((function(n,e,o){return o>=1&&n.push((0,tn.jsx)("div",{style:{width:4}},"space-".concat(e.uuid))),n.push((0,tn.jsx)("div",{style:{marginTop:4},children:(0,tn.jsx)(b.Z,{color:(0,Y.qn)(e.type,{blockColor:e.color,theme:P}).accentLight,monospace:!0,small:!0,children:e.uuid})},"badge-".concat(e.uuid))),n}),[])})},"badge-blocks-".concat(e))})),R&&(0,tn.jsx)(y.Z,{mt:1,children:(0,tn.jsx)(C.ZP,{monospace:!0,muted:!0,small:!0,children:en(R)})})]})]})},cn=o(11135),un=o(82531),dn=o(37391),an=v.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div{","}",""],dn.w5,(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),sn=(v.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border-radius:","px;border:1px solid transparent;min-width:fit-content;"," "," "," "," "," ",""],I.BG,(function(n){return n.selected&&"\n    border-color: ".concat((n.theme.content||j.Z.content).active,";\n  ")}),(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n  ")}),(function(n){return(n.isCancelled||n.disabled)&&"\n    // opacity doesn\u2019t work on Safari\n    border-color: ".concat((n.theme.content||j.Z.content).active,";\n    border-style: dashed;\n    cursor: not-allowed;\n  ")}),(function(n){return n.isConditionFailed&&"\n    background-color: ".concat((n.theme.content||j.Z.content).disabled,";\n    cursor: not-allowed;\n  ")}),(function(n){return n.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),v.default.div.withConfig({displayName:"indexstyle__RuntimeStyle",componentId:"sc-bc2ei5-2"})(["margin-right:","px;padding:12px 4px;height:100%;width:50px;background:rgba(0,0,0,0.2);background-blend-mode:soft-light;"],2*T.iI),o(66050)),vn=o(24224);var fn=o(96510),pn=["forwardedRef"];function hn(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.push.apply(o,t)}return o}function bn(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?hn(Object(o),!0).forEach((function(e){(0,r.Z)(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):hn(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}var mn=s()((0,c.Z)(d().mark((function n(){var e,t;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([o.e(4434),o.e(5987),o.e(2920)]).then(o.t.bind(o,74529,23));case 2:return e=n.sent,t=e.Canvas,n.abrupt("return",(function(n){var e=n.forwardedRef,o=(0,l.Z)(n,pn);return(0,tn.jsx)(t,bn({ref:e},o))}));case 5:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),kn=s()((0,c.Z)(d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([o.e(4434),o.e(5987),o.e(2920)]).then(o.t.bind(o,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Node);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),gn=s()((0,c.Z)(d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([o.e(4434),o.e(5987),o.e(2920)]).then(o.t.bind(o,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Edge);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),xn=s()((0,c.Z)(d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([o.e(4434),o.e(5987),o.e(2920)]).then(o.t.bind(o,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Port);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});var yn=function(n){var e=n.blockRefs,o=n.blockStatus,r=n.blocks,l=n.disabled,c=n.editingBlock,u=n.enablePorts,d=void 0!==u&&u,a=n.fetchPipeline,s=n.height,b=n.heightOffset,k=void 0===b?10*T.iI:b,g=n.messages,O=n.noStatus,j=n.onClickNode,E=n.pannable,I=void 0===E||E,Z=n.pipeline,w=n.runningBlocks,_=void 0===w?[]:w,A=n.selectedBlock,D=n.setEditingBlock,S=n.setErrors,B=n.setSelectedBlock,L=n.setZoom,M=n.showDynamicBlocks,F=void 0!==M&&M,H=n.treeRef,U=n.zoomable,G=void 0===U||U,V=(0,p.useContext)(v.ThemeContext),q=(0,p.useRef)(null),J=H||q,X=(0,p.useState)([]),z=X[0],K=X[1],nn=(0,p.useState)(!1),en=nn[0],rn=nn[1],dn=(0,p.useState)(null),pn=dn[0],hn=dn[1],yn=d&&en,On=(null===c||void 0===c?void 0:c.upstreamBlocks)||{},Cn=On.block,jn=On.values,En=void 0===jn?[]:jn,In=(0,p.useMemo)((function(){return En.length}),[En]),Tn=(0,p.useMemo)((function(){var n;return(null===Z||void 0===Z||null===(n=Z.blocks)||void 0===n?void 0:n.filter((function(n){var e=n.type;return!m.iZ.includes(e)})))||[]}),[null===Z||void 0===Z?void 0:Z.blocks]),Zn=(0,p.useMemo)((function(){return Tn}),[Tn,F]),wn=(0,p.useMemo)((function(){if(r)return r;if(Z){var n={},e=[];return e.push.apply(e,(0,i.Z)(null===Z||void 0===Z?void 0:Z.blocks)),e.push.apply(e,(0,i.Z)(null===Z||void 0===Z?void 0:Z.callbacks)),e.push.apply(e,(0,i.Z)(null===Z||void 0===Z?void 0:Z.conditionals)),Object.values(null===Z||void 0===Z?void 0:Z.extensions).forEach((function(n){var o=n.blocks;e.push.apply(e,(0,i.Z)(o))})),e.reduce((function(e,o){return n[o.uuid]||e.push(o),e}),[])}return[]}),[r,Z]),_n=(0,p.useMemo)((function(){return(0,vn.HK)(wn||[],(function(n){return n.uuid}))}),[wn]),An=(0,p.useMemo)((function(){var n={};return null===Zn||void 0===Zn||Zn.map((function(e){var o;n[e.uuid]=null===e||void 0===e||null===(o=e.callback_blocks)||void 0===o?void 0:o.reduce((function(n,e){var o=null===_n||void 0===_n?void 0:_n[e];return o?n.concat(o):n}),[])})),n}),[Zn,_n]),Dn=(0,p.useMemo)((function(){var n={};return null===Zn||void 0===Zn||Zn.map((function(e){var o;n[e.uuid]=null===e||void 0===e||null===(o=e.conditional_blocks)||void 0===o?void 0:o.reduce((function(n,e){var o=null===_n||void 0===_n?void 0:_n[e];return o?n.concat(o):n}),[])})),n}),[Zn,_n]),Sn=(0,p.useMemo)((function(){var n={};return null===Zn||void 0===Zn||Zn.map((function(e){var o,i=[];null===(o=Object.entries((null===Z||void 0===Z?void 0:Z.extensions)||{}))||void 0===o||o.forEach((function(n){var o=(0,t.Z)(n,2),r=o[0],l=o[1].blocks;null===l||void 0===l||l.forEach((function(n){var o=n.upstream_blocks,t=n.uuid;if(null!==o&&void 0!==o&&o.includes(null===e||void 0===e?void 0:e.uuid)){var l=null===_n||void 0===_n?void 0:_n[t];l&&i.push(bn(bn({},l),{},{extension_uuid:r}))}}))})),n[e.uuid]=i})),n}),[Zn,_n,Z]),Rn=(0,p.useMemo)((function(){return(0,vn.HK)(_,(function(n){return n.uuid}))}),[_]),Pn=(0,h.Db)(un.ZP.blocks.pipelines.useUpdate(null===Z||void 0===Z?void 0:Z.uuid,encodeURIComponent(null===Cn||void 0===Cn?void 0:Cn.uuid)),{onSuccess:function(n){return(0,fn.wD)(n,{callback:function(){D({upstreamBlocks:null}),null===a||void 0===a||a()},onErrorCallback:function(n,e){return null===S||void 0===S?void 0:S({errors:e,response:n})}})}}),Nn=(0,t.Z)(Pn,2),Bn=Nn[0],Ln=Nn[1].isLoading,Mn=(0,h.Db)((function(n){var e=n.fromBlock,o=n.portSide,t=n.toBlock,i=n.removeDependency,r=t,l=t.upstream_blocks.concat(e.uuid);return i||o!==$.rl.NORTH||(r=e,l=e.upstream_blocks.concat(t.uuid)),un.ZP.blocks.pipelines.useUpdate(null===Z||void 0===Z?void 0:Z.uuid,encodeURIComponent(r.uuid))({block:bn(bn({},r),{},{upstream_blocks:i?t.upstream_blocks.filter((function(n){return n!==e.uuid})):l})})}),{onSuccess:function(n){return(0,fn.wD)(n,{callback:function(){null===a||void 0===a||a()},onErrorCallback:function(n,e){return null===S||void 0===S?void 0:S({errors:e,response:n})}})}}),Fn=(0,t.Z)(Mn,1)[0],Hn=(0,p.useCallback)((function(n){var o=n.type,t=n.uuid;if(null===B||void 0===B||B(n),K([]),null!==e&&void 0!==e&&e.current){var i,r=e.current["".concat(o,"s/").concat(t,".py")];null===r||void 0===r||null===(i=r.current)||void 0===i||i.scrollIntoView()}}),[e,B]),Un=(0,p.useCallback)((function(n){K([]),D((function(e){var o=e.upstreamBlocks.values||[],t=o.findIndex((function(e){var o=e.uuid;return n.uuid===o}));return bn(bn({},e),{},{upstreamBlocks:bn(bn({},e.upstreamBlocks),{},{values:t>=0?(0,vn.oM)(o,t):o.concat(n)})})}))}),[D]),Gn=(0,p.useMemo)((function(){var n={};return Zn.forEach((function(e){e.upstream_blocks.forEach((function(o){n[o]||(n[o]=[]),n[o].push(e)}))})),n}),[Zn]),Vn=(0,p.useCallback)((function(n){var e,o;if(R.qL.INTEGRATION===(null===Z||void 0===Z?void 0:Z.type)&&m.tf.TRANSFORMER!==n.type){var t,i={};if(m.t6.YAML===n.language&&(i=(0,f.Qc)(n.content)),m.tf.DATA_LOADER===n.type)e="".concat(n.uuid,": ").concat(null===(t=i)||void 0===t?void 0:t.source);else if(m.tf.DATA_EXPORTER===n.type){var r;e="".concat(n.uuid,": ").concat(null===(r=i)||void 0===r?void 0:r.destination)}}else if(m.tf.DBT===n.type&&m.t6.SQL===n.language){var l=(0,N.IU)(n);e=l.name,o=l.project}return null!==n&&void 0!==n&&n.replicated_block&&(e=null===n||void 0===n?void 0:n.replicated_block,o=null===n||void 0===n?void 0:n.uuid),e||(e=n.uuid),{displayText:e,kicker:o,subtitle:undefined}}),[Z]),qn=(0,p.useMemo)((function(){var n=[],e=[];return Zn.forEach((function(t){var r=Vn(t),l=r.displayText,c=r.kicker,u=r.subtitle,d=t.tags,a=void 0===d?[]:d,s=t.upstream_blocks,v=void 0===s?[]:s,f=t.uuid,p=Gn[f],h=[];p?h.push.apply(h,(0,i.Z)(p.map((function(n){return bn(bn({},$.bJ),{},{id:"".concat(f,"-").concat(n.uuid,"-from"),side:$.rl.SOUTH})})))):h.push(bn(bn({},$.bJ),{},{id:"".concat(f,"-from"),side:$.rl.SOUTH})),0===v.length&&h.push(bn(bn({},$.bJ),{},{id:"".concat(f,"-to"),side:$.rl.NORTH})),null===v||void 0===v||v.forEach((function(n){h.push(bn(bn({},$.bJ),{},{id:"".concat(n,"-").concat(f,"-to"),side:$.rl.NORTH})),e.push({from:n,fromPort:"".concat(n,"-").concat(f,"-from"),id:"".concat(n,"-").concat(f),to:f,toPort:"".concat(n,"-").concat(f,"-to")})}));(null===a||void 0===a?void 0:a.length)>=1&&T.iI,c&&T.iI,u&&T.iI;var b=l;[c,u].forEach((function(n){n&&n.length>b.length&&(b=n)}));var m=null===An||void 0===An?void 0:An[null===t||void 0===t?void 0:t.uuid],k=null===Dn||void 0===Dn?void 0:Dn[null===t||void 0===t?void 0:t.uuid],g=null===Sn||void 0===Sn?void 0:Sn[null===t||void 0===t?void 0:t.uuid];n.push({data:{block:t},height:Q(t,Z,{blockStatus:o,callbackBlocks:m,conditionalBlocks:k,extensionBlocks:g}),id:f,ports:h,width:W(t,Z,{blockStatus:o,callbackBlocks:m,conditionalBlocks:k,extensionBlocks:g})})})),{edges:e,nodes:n}}),[o,Zn,An,Dn,Vn,Gn,Sn,Z]),Jn=qn.edges,Xn=qn.nodes,zn=(0,p.useCallback)((function(n){if(O)return{};if(o){var e=o[function(n){var e=n.uuid,o=n.replicated_block;return o?"".concat(e,":").concat(o):e}(n)]||{},t=e.status,i=e.runtime;return{hasFailed:sn.V.FAILED===t,isCancelled:sn.V.CANCELLED===t,isConditionFailed:sn.V.CONDITION_FAILED===t,isInProgress:sn.V.RUNNING===t,isQueued:sn.V.INITIAL===t,isSuccessful:sn.V.COMPLETED===t,runtime:i}}var r,l=(0,P.h5)((null===g||void 0===g?void 0:g[n.uuid])||[]),c=(0,P.oI)(l),u=c.hasError,d=c.hasOutput,a=Rn[n.uuid];return{hasFailed:!a&&(u||m.DA.FAILED===n.status),isInProgress:a,isQueued:a&&(null===(r=_[0])||void 0===r?void 0:r.uuid)!==n.uuid,isSuccessful:!a&&(!u&&d||m.DA.EXECUTED===n.status)}}),[o,g,O,_,Rn]),Qn=(0,p.useMemo)((function(){var n=0;return s&&(n+=s),k&&(n-=k),Math.max(0,n)}),[s,k]);return(0,tn.jsxs)(tn.Fragment,{children:[Cn&&(0,tn.jsxs)(y.Z,{my:3,px:T.cd,children:[(0,tn.jsxs)(y.Z,{mb:T.cd,children:[(0,tn.jsxs)(C.ZP,{children:["Select parent block(s) for ",(0,tn.jsx)(C.ZP,{color:(0,Y.qn)(Cn.type,{blockColor:Cn.color,theme:V}).accent,inline:!0,monospace:!0,children:Cn.uuid}),":"]}),(0,tn.jsx)(y.Z,{mt:1,children:En.map((function(n,e){var o,t,i=n.uuid;return(0,tn.jsxs)(C.ZP,{color:(0,Y.qn)(null===(o=_n[i])||void 0===o?void 0:o.type,{blockColor:null===(t=_n[i])||void 0===t?void 0:t.type,theme:V}).accent,inline:!0,monospace:!0,children:[i,In>=2&&e<=In-2?(0,tn.jsx)(C.ZP,{inline:!0,children:",\xa0"}):null]},i)}))})]}),(0,tn.jsxs)(x.ZP,{alignItems:"center",children:[(0,tn.jsx)(cn.ZP,{compact:!0,inline:!0,loading:Ln,onClick:function(){return Bn({block:bn(bn({},Cn),{},{upstream_blocks:En.map((function(n){return n.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,tn.jsx)(y.Z,{ml:1}),(0,tn.jsx)(cn.ZP,{compact:!0,inline:!0,noBackground:!0,onClick:function(){K([]),D({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,tn.jsx)(an,{height:Qn,onDoubleClick:function(){var n,e;return null===J||void 0===J||null===(n=J.current)||void 0===n||null===(e=n.fitCanvas)||void 0===e?void 0:e.call(n)},children:(0,tn.jsx)(mn,{arrow:null,disabled:l,edge:function(n){var e,o=_n[n.source];return(0,tn.jsx)(gn,bn(bn({},n),{},{onClick:function(n,e){hn(null),K([e.id])},onRemove:function(n,e){var o=_n[e.from],t=_n[e.to];Fn({fromBlock:o,removeDependency:!0,toBlock:t}),K([])},removable:d&&!(null!==c&&void 0!==c&&c.upstreamBlocks),style:{stroke:null===(e=(0,Y.qn)(null===o||void 0===o?void 0:o.type,{blockColor:null===o||void 0===o?void 0:o.color,theme:V}))||void 0===e?void 0:e.accent}}))},edges:Jn,fit:!0,forwardedRef:J,maxHeight:$.Jo,maxWidth:$.Jo,maxZoom:1,minZoom:-.7,node:function(n){var e,o,t,i,r,u;return(0,tn.jsx)(kn,bn(bn({},n),{},{dragType:"port",linkable:!0,onClick:function(n,e){var o=e.data.block;hn(null),(null===Cn||void 0===Cn?void 0:Cn.uuid)===o.uuid||(Cn?Un(o):(null===j||void 0===j||j({block:o}),setTimeout((function(){Hn(o)}),1)))},onEnter:function(){null!==c&&void 0!==c&&c.upstreamBlocks||rn(!0)},onLeave:function(){return rn(!1)},port:yn&&(null===pn||on(pn,n))?(0,tn.jsx)(xn,{onDrag:function(){return rn(!0)},onDragEnd:function(){rn(!1),hn(null)},onDragStart:function(n,e,o){var t=null===o||void 0===o?void 0:o.side;hn({id:null===o||void 0===o?void 0:o.id,side:t})},onEnter:function(){return rn(!0)},rx:10,ry:10,style:{fill:(0,Y.qn)(null===n||void 0===n||null===(e=n.properties)||void 0===e||null===(o=e.data)||void 0===o||null===(t=o.block)||void 0===t?void 0:t.type,{blockColor:null===n||void 0===n||null===(i=n.properties)||void 0===i||null===(r=i.data)||void 0===r||null===(u=r.block)||void 0===u?void 0:u.color,theme:V}).accent,stroke:"white",strokeWidth:"1px"}}):null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(n){var e=n.height,o=n.node.data.block,t=zn(o),i=Vn(o);i.displayText,i.kicker,i.subtitle;return(0,tn.jsx)("foreignObject",{height:e,style:{pointerEvents:"none"},width:n.width,x:0,y:0,children:(0,tn.jsx)(ln,bn({block:o,callbackBlocks:null===An||void 0===An?void 0:An[null===o||void 0===o?void 0:o.uuid],conditionalBlocks:null===Dn||void 0===Dn?void 0:Dn[null===o||void 0===o?void 0:o.uuid],disabled:(null===Cn||void 0===Cn?void 0:Cn.uuid)===o.uuid,extensionBlocks:null===Sn||void 0===Sn?void 0:Sn[null===o||void 0===o?void 0:o.uuid],height:e,hideStatus:l||O,pipeline:Z,selected:Cn?!!(0,vn.sE)(En,(function(n){return n.uuid===o.uuid})):(null===A||void 0===A?void 0:A.uuid)===o.uuid},t),o.uuid)})}}))},nodes:Xn,onNodeLink:function(n,e,o,t){var i,r=_n[e.id],l=_n[o.id],c=(null===Z||void 0===Z?void 0:Z.type)===R.qL.INTEGRATION&&((null===r||void 0===r?void 0:r.type)===m.tf.DATA_EXPORTER||(null===r||void 0===r?void 0:r.type)===m.tf.DATA_LOADER&&(null===l||void 0===l?void 0:l.type)===m.tf.DATA_EXPORTER);if(!(null!==r&&void 0!==r&&null!==(i=r.upstream_blocks)&&void 0!==i&&i.includes(l.uuid)||e.id===o.id||c)){var u=null===t||void 0===t?void 0:t.side;Fn({fromBlock:r,portSide:u||$.rl.SOUTH,toBlock:l})}},onNodeLinkCheck:function(n,e,o){return!Jn.some((function(n){return n.from===e.id&&n.to===o.id}))},onZoomChange:function(n){return null===L||void 0===L?void 0:L(n)},pannable:I,selections:z,zoomable:G})})]})}},66050:function(n,e,o){var t;o.d(e,{V:function(){return t}}),function(n){n.CANCELLED="cancelled",n.COMPLETED="completed",n.FAILED="failed",n.INITIAL="initial",n.RUNNING="running",n.UPSTREAM_FAILED="upstream_failed",n.CONDITION_FAILED="condition_failed"}(t||(t={}))},18283:function(n,e,o){var t=o(82394),i=o(26304),r=(o(82684),o(38626)),l=o(23831),c=o(73942),u=o(2005),d=o(49125),a=o(31012),s=o(28598),v=["children"];function f(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.push.apply(o,t)}return o}function p(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach((function(e){(0,t.Z)(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}var h=r.default.p.withConfig({displayName:"Badge__BadgeStyle",componentId:"sc-tfqsp0-0"})(["border-radius:","px;display:inline;font-family:",";margin:0;white-space:nowrap;",";"," "," ",";",";"," "," "," "," "," "," "," ",""],c.BG,u.ry,a.iD,(function(n){return n.small&&"\n    ".concat(a.HC,";\n  ")}),(function(n){return n.xxsmall&&"\n    font-size: ".concat(a.VK,"px;\n    line-height: ").concat(a.VK,"px;\n  ")}),(function(n){return!n.regular&&"\n    padding: 2px 4px;\n  "}),(function(n){return n.regular&&"\n    padding: ".concat(1*d.iI,"px ").concat(1.25*d.iI,"px;\n  ")}),(function(n){return n.noVerticalPadding&&"\n    padding-bottom: 0;\n    padding-top: 0;\n  "}),(function(n){return!n.disabled&&!n.inverted&&"\n    background-color: ".concat((n.theme||l.Z).background.row,";\n    color: ").concat((n.theme||l.Z).content.default,";\n  ")}),(function(n){return!n.disabled&&n.inverted&&"\n    background-color: ".concat((n.theme||l.Z).background.dark,";\n    color: ").concat((n.theme||l.Z).content.inverted,";\n  ")}),(function(n){return n.cyan&&"\n    background-color: ".concat((n.theme||l.Z).accent.cyan,";\n    color: ").concat((n.theme||l.Z).monotone.black,";\n  ")}),(function(n){return n.disabled&&"\n    background-color: ".concat((n.theme||l.Z).feature.disabled,";\n    color: ").concat((n.theme||l.Z).content.disabled,";\n  ")}),(function(n){return n.color&&"\n    background-color: ".concat(n.color," !important;\n    color: ").concat((n.theme||l.Z).content.active,";\n  ")}),(function(n){return n.quantifier&&"\n    border-radius: 34px;\n    line-height: 10px;\n    padding: 4px 6px;\n  "}),(function(n){return n.monospace&&"\n    font-family: ".concat(u.Vp,";\n    word-break: break-all;\n  ")}));e.Z=function(n){var e=n.children,o=(0,i.Z)(n,v);return(0,s.jsx)(h,p(p({},o),{},{children:e}))}},25958:function(n,e,o){o.d(e,{$1:function(){return r},Dy:function(){return i},IU:function(){return l}});var t=o(17717),i="--full-refresh";function r(n,e){var o,i=null===e||void 0===e?void 0:e.fullPath,r=null===n||void 0===n||null===(o=n.configuration)||void 0===o?void 0:o.file_path;if(i)return null===n||void 0===n?void 0:n.uuid;if(r){var l=r.split(t.sep),c=l[l.length-1].split(".");return c.pop(),c.join(".")}}function l(n){var e,o=null===n||void 0===n||null===(e=n.configuration)||void 0===e?void 0:e.file_path;if(o){var i=o.split(t.sep),r=i[0],l=i[i.length-1].split(".");return l.pop(),{directory:i.slice(1,i.length-1).join(t.sep),filePath:o,name:l.join("."),project:r}}return{filePath:o}}}}]);