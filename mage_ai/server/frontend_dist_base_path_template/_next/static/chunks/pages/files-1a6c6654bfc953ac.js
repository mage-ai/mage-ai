(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7869],{65557:function(e,n,t){"use strict";var i=t(21831),r=t(75582),o=t(82684),u=t(80329);n.Z=function(e){var n=e.children,t=e.uuid,l=e.uuids,c=void 0===l?[]:l,a=(0,u.j)("apiReloads"),s=(0,r.Z)(a,1)[0],d=(0,i.Z)(c);t&&d.push(t);var f=d.map((function(e){return String(s[e])||"-"})).join("_");return o.cloneElement(n,{key:f})}},94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var i=t(82394),r=t(21831),o=t(82684),u=t(50724),l=t(82555),c=t(97618),a=t(70613),s=t(59696),d=t(68899),f=t(28598);function h(e,n){var t=e.children,i=e.noPadding;return(0,f.jsx)(d.HS,{noPadding:i,ref:n,children:t})}var p=o.forwardRef(h),v=t(62547),b=t(82571),g=t(35686),m=t(98464),O=t(46684),y=t(70515),x=t(53808),j=t(19183);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Z(e,n){var t,i=e.addProjectBreadcrumbToCustomBreadcrumbs,h=e.after,P=e.afterHidden,Z=e.afterWidth,C=e.afterWidthOverride,w=e.before,k=e.beforeWidth,T=e.breadcrumbs,E=e.children,I=e.errors,_=e.headerMenuItems,A=e.headerOffset,N=e.mainContainerHeader,R=e.navigationItems,M=e.setErrors,D=e.subheaderChildren,L=e.subheaderNoPadding,H=e.title,F=e.uuid,B=(0,j.i)().width,V="dashboard_after_width_".concat(F),Y="dashboard_before_width_".concat(F),U=(0,o.useRef)(null),W=(0,o.useState)(C?Z:(0,x.U2)(V,Z)),G=W[0],K=W[1],X=(0,o.useState)(!1),z=X[0],Q=X[1],J=(0,o.useState)(w?Math.max((0,x.U2)(Y,k),13*y.iI):null),q=J[0],$=J[1],ee=(0,o.useState)(!1),ne=ee[0],te=ee[1],ie=(0,o.useState)(null)[1],re=g.ZP.projects.list({},{revalidateOnFocus:!1}).data,oe=null===re||void 0===re?void 0:re.projects,ue={label:function(){var e;return null===oe||void 0===oe||null===(e=oe[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},le=[];T?(i&&le.push(ue),le.push.apply(le,(0,r.Z)(T))):(null===oe||void 0===oe?void 0:oe.length)>=1&&le.push.apply(le,[ue,{bold:!0,label:function(){return H}}]),(0,o.useEffect)((function(){null===U||void 0===U||!U.current||z||ne||null===ie||void 0===ie||ie(U.current.getBoundingClientRect().width)}),[z,G,ne,q,U,ie,B]),(0,o.useEffect)((function(){z||(0,x.t8)(V,G)}),[P,z,G,V]),(0,o.useEffect)((function(){ne||(0,x.t8)(Y,q)}),[ne,q,Y]);var ce=(0,m.Z)(Z);return(0,o.useEffect)((function(){C&&ce!==Z&&K(Z)}),[C,Z,ce]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:H}),(0,f.jsx)(s.Z,{breadcrumbs:le,menuItems:_,project:null===oe||void 0===oe?void 0:oe[0],version:null===oe||void 0===oe||null===(t=oe[0])||void 0===t?void 0:t.version}),(0,f.jsxs)(d.Nk,{ref:n,children:[0!==(null===R||void 0===R?void 0:R.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(b.Z,{navigationItems:R,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(v.Z,{after:h,afterHeightOffset:O.Mz,afterHidden:P,afterMousedownActive:z,afterWidth:G,before:w,beforeHeightOffset:O.Mz,beforeMousedownActive:ne,beforeWidth:d.k1+(w?q:0),headerOffset:A,hideAfterCompletely:!0,leftOffset:w?d.k1:null,mainContainerHeader:N,mainContainerRef:U,setAfterMousedownActive:Q,setAfterWidth:K,setBeforeMousedownActive:te,setBeforeWidth:$,children:[D&&(0,f.jsx)(p,{noPadding:L,children:D}),E]})})]}),I&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===M||void 0===M?void 0:M(null)},children:(0,f.jsx)(l.Z,S(S({},I),{},{onClose:function(){return null===M||void 0===M?void 0:M(null)}}))})]})}var C=o.forwardRef(Z)},29618:function(e,n,t){"use strict";t.d(n,{Z:function(){return D}});var i=t(82394),r=t(75582),o=t(17717),u=t(82684),l=t(80329),c=t(69864),a=t(40761),s=t(44425),d=t(71180),f=t(38626),h=t(97618),p=t(55485),v=t(28598),b=f.default.div.withConfig({displayName:"ButtonGroup__ButtonGroupStyle",componentId:"sc-15vbmc8-0"})([""]),g=f.default.div.withConfig({displayName:"ButtonGroup__VerticalDivider",componentId:"sc-15vbmc8-1"})(["width:1px;"]),m=function(e){var n=e.children,t=e.divider,i=u.Children.toArray(n).length;return(0,v.jsx)(b,{children:(0,v.jsx)(p.ZP,{children:u.Children.map(n,(function(e,n){return e&&(0,v.jsxs)(h.Z,{children:[n>=1&&t&&(0,v.jsx)(g,{}),u.cloneElement(e,{borderRadiusLeft:i>=2&&0===n,borderRadiusRight:i>=2&&n===i-1,halfPaddingLeft:i>=2&&0!==n,halfPaddingRight:i>=2&&n!==i-1,noBorder:i>=2&&n>0&&n<i-1,noBorderRight:i>=2&&n!==i-1})]},"button-group-child-".concat(n))}))})})},O=t(75810),y=t(15135),x=t(93369),j=t(57653),P=t(38276),S=t(35686),Z=t(39643),C=t(11498),w=t(85385),k=t(68669),T=t(86735),E=t(53005),I=t(81728),_=t(72619),A=t(42041),N=t(44688);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var D=function(e){var n=e.active,t=e.addNewBlock,f=e.disableRefreshWarning,h=e.fetchPipeline,b=e.fetchVariables,g=e.filePath,R=e.hideHeaderButtons,D=e.onContentChange,L=e.onUpdateFileSuccess,H=e.openSidekickView,F=e.pipeline,B=e.saveFile,V=e.selectedFilePath,Y=e.sendTerminalMessage,U=e.setDisableShortcuts,W=e.setErrors,G=e.setFilesTouched,K=e.setSelectedBlock,X=(0,l.j)("apiReloads"),z=(0,r.Z)(X,2)[1],Q=(0,u.useState)(null),J=Q[0],q=Q[1],$=(0,u.useState)(!1),ee=$[0],ne=($[1],(0,u.useRef)(null)),te=(0,u.useMemo)((function(){return new a.Z}),[]),ie=(0,u.useMemo)((function(){return{api_key:C.l,token:te.decodedToken.token}}),[te]),re=S.ZP.statuses.list().data,oe=(0,u.useMemo)((function(){var e,n;return null===re||void 0===re||null===(e=re.statuses)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.repo_path}),[re]),ue=S.ZP.file_contents.detail(g).data;(0,u.useEffect)((function(){null!==ue&&void 0!==ue&&ue.file_content?q(ue.file_content):null!==ue&&void 0!==ue&&ue.error&&(0,_.h$)(ue,{onErrorCallback:function(e,n){return W({errors:n,response:e})}})}),[ue,W]);var le=(0,u.useState)(null===J||void 0===J?void 0:J.content),ce=le[0],ae=le[1],se=(0,u.useCallback)((function(e){ae(e),D&&(null===D||void 0===D||D(e))}),[D]),de=(0,u.useState)(!1),fe=de[0],he=de[1];(0,u.useEffect)((function(){n&&U&&(null===U||void 0===U||U(!0))}),[n,U]),(0,u.useEffect)((function(){var e;V&&(null===ne||void 0===ne||null===(e=ne.current)||void 0===e||e.scrollIntoView())}),[V]);var pe=(0,c.Db)(S.ZP.file_contents.useUpdate((null===J||void 0===J?void 0:J.path)&&encodeURIComponent(null===J||void 0===J?void 0:J.path)),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(e){var n=e.file_content;z((function(e){return M(M({},e),{},(0,i.Z)({},"FileVersions/".concat(null===J||void 0===J?void 0:J.path),Number(new Date)))})),L&&(null===L||void 0===L||L(n))},onErrorCallback:function(e,n){return null===W||void 0===W?void 0:W({errors:n,response:e})}})}}),ve=(0,r.Z)(pe,1)[0],be=(0,u.useCallback)((function(e,n){if(B)return B(e,n);ve({file_content:M(M({},n),{},{content:e})}).then((function(){decodeURIComponent(g).split(o.sep).pop()===y.dT.METADATA_YAML&&b&&(null===b||void 0===b||b())})),G((function(e){return M(M({},e),{},(0,i.Z)({},null===n||void 0===n?void 0:n.path,!1))})),he(!1)}),[b,g,B,G,ve]),ge=(0,u.useMemo)((function(){return(0,k.lU)()}),[]),me=(0,u.useMemo)((function(){var e,n,t,i;return null===(null===J||void 0===J||null===(e=J.path)||void 0===e?void 0:e.match(ge))?y.Lu.TXT:null===J||void 0===J||null===(n=J.path)||void 0===n||null===(t=n.match(ge))||void 0===t||null===(i=t[0])||void 0===i?void 0:i.split(".")[1]}),[ge,J]),Oe=(0,u.useMemo)((function(){if(null!==J&&void 0!==J&&J.path)return(0,v.jsx)(O.Z,{autoHeight:!0,language:y.nB[me],onChange:function(e){se(e),G((function(e){return M(M({},e),{},(0,i.Z)({},null===J||void 0===J?void 0:J.path,!0))})),he(!0)},onSave:function(e){be(e,J)},selected:!0,textareaFocused:!0,value:(0,I.Pb)(null===J||void 0===J?void 0:J.content)?JSON.stringify(JSON.parse(null===J||void 0===J?void 0:J.content),null,2):null===J||void 0===J?void 0:J.content,width:"100%"})}),[J,me,be,se,G]),ye=null!==F&&void 0!==F&&F.blocks?(0,T.sE)(null===F||void 0===F?void 0:F.blocks,(function(e){var n=e.type;return s.tf.DATA_EXPORTER===n})):null,xe=(0,c.Db)(S.ZP.blocks.pipelines.useUpdate(null===F||void 0===F?void 0:F.uuid,null===ye||void 0===ye?void 0:ye.uuid),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(){null===h||void 0===h||h()}})}}),je=(0,r.Z)(xe,1)[0],Pe=t&&F&&(me===y.Lu.PY||me===y.Lu.SQL||(me===y.Lu.YAML||me===y.Lu.R)&&(0,E.V3)(J,null===J||void 0===J?void 0:J.path))&&(0,k.ck)(J.path.split(o.sep))!==s.tf.SCRATCHPAD&&(0,E.lr)(J)&&(0,v.jsx)(d.Z,{onClick:function(){var e=(null===F||void 0===F?void 0:F.type)===j.qL.INTEGRATION,n=(0,k.TU)(J,oe,F);t(n,(function(n){e&&ye&&je({block:M(M({},ye),{},{upstream_blocks:[n.uuid]})}),null===K||void 0===K||K(n)}))},primary:!0,children:"Add to current pipeline"}),Se=Y&&(0,v.jsx)(P.Z,{m:2,children:(0,v.jsx)(x.ZP,{disabled:!oe,inline:!0,loading:ee,onClick:function(){null===H||void 0===H||H(w.cH.TERMINAL),null===Y||void 0===Y||Y(JSON.stringify(M(M({},ie),{},{command:["stdin","pip install -r ".concat(oe,"/requirements.txt\r")]})))},title:oe?"Pip install packages from your saved requirements.txt file (\u2318+S to save).":"Please use right panel terminal to install packages.",uuid:"FileEditor/InstallPackages",children:"Install packages"})}),Ze="FileEditor/".concat(null===J||void 0===J?void 0:J.path),Ce=(0,N.y)(),we=Ce.registerOnKeyDown,ke=Ce.unregisterOnKeyDown;return(0,u.useEffect)((function(){return function(){ke(Ze)}}),[ke,Ze]),we(Ze,(function(e,t){if(n&&!f)if((0,A.y)([Z.zX,Z.Um],t)||(0,A.y)([Z.PQ,Z.Um],t))e.preventDefault(),be(ce,J);else if(fe&&(0,A.y)([Z.zX,Z.hS],t)){e.preventDefault();var i="".concat(J.path," has changes that are unsaved. ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(i)&&location.reload()}}),[n,ce,f,J,be,fe]),(0,v.jsxs)("div",{ref:ne,children:[!R&&(0,v.jsx)(P.Z,{p:2,children:(0,v.jsxs)(p.ZP,{justifyContent:"space-between",children:[(0,v.jsxs)(m,{children:[Pe,(0,v.jsx)(d.Z,{disabled:!ce,onClick:function(e){e.preventDefault(),be(ce,J)},title:ce?null:"No changes have been made to this file.",children:"Save file content"})]}),H&&(0,v.jsx)(m,{children:(0,v.jsx)(d.Z,{compact:!0,onClick:function(){H(w.cH.FILE_VERSIONS)},small:!0,title:"View previous changes to this file.",children:"Show versions"})})]})}),Oe,g===y.dT.REQS_TXT&&Se]})}},28385:function(e,n,t){"use strict";var i=t(82394),r=t(75582),o=t(17717),u=t(80329),l=t(82684),c=t(69864),a=t(71180),s=t(75810),d=t(15135),f=t(97618),h=t(55485),p=t(85854),v=t(38276),b=t(4190),g=t(75499),m=t(30160),O=t(35686),y=t(70515),x=t(68669),j=t(3917),P=t(81728),S=t(72619),Z=t(3314),C=t(86735),w=t(28598);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.onActionCallback,t=e.selectedBlock,k=e.selectedFilePath,E=e.setErrors,I=e.width,_=(0,u.j)("apiReloads"),A=(0,r.Z)(_,2)[1],N=O.ZP.file_versions.files.list(k&&encodeURIComponent(k)),R=N.data,M=N.mutate,D=(0,l.useMemo)((function(){return(null===R||void 0===R?void 0:R.file_versions)||[]}),[R]),L=(0,l.useState)(null),H=L[0],F=L[1],B=(0,l.useMemo)((function(){return null===D||void 0===D?void 0:D[H]}),[H,D]),V=O.ZP.file_contents.detail(B?encodeURIComponent(B.path):null).data,Y=(0,l.useMemo)((function(){return null===V||void 0===V?void 0:V.file_content}),[V]),U=(0,l.useMemo)((function(){return(0,x.lU)()}),[]),W=(0,l.useMemo)((function(){var e,n,t;return null===k||void 0===k||null===(e=k.match(U))||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.split("."))||void 0===t?void 0:t[1]}),[k,U]),G=(0,c.Db)(O.ZP.file_contents.useUpdate(k&&encodeURIComponent(k)),{onSuccess:function(e){return(0,S.wD)(e,{callback:function(e){var t;k&&M();var r=null===e||void 0===e||null===(t=e.file_content)||void 0===t?void 0:t.path,u="FileEditor/".concat(r);if(r){var l=r.split(o.sep);if("pipelines"===l[0]){var c=l.slice(1,l.length-1).join(o.sep);u="PipelineDetail/".concat(c)}}A((function(e){return T(T({},e),{},(0,i.Z)({},u,Number(new Date)))})),F((function(e){return e+1})),null===n||void 0===n||n(null===e||void 0===e?void 0:e.file_content)},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),K=(0,r.Z)(G,2),X=K[0],z=K[1].isLoading,Q=(0,l.useMemo)((function(){var e=D.map((function(e){var n=e.name,t=e.path;return[(0,w.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,w.jsxs)(f.Z,{flex:1,children:[(0,w.jsx)(m.ZP,{default:!0,monospace:!0,children:(0,j.JX)(n,{withSeconds:!0})}),(0,w.jsx)(v.Z,{px:2*y.cd,children:(0,w.jsx)(m.ZP,{monospace:!0,children:n})})]}),B&&(null===B||void 0===B?void 0:B.path)===t&&(0,w.jsx)(a.Z,{compact:!0,loading:z,onClick:function(e){(0,Z.j)(e),X({file_content:{version:n}})},small:!0,children:"Replace with this version"})]},n)]}));if(B){var n=(0,w.jsx)(v.Z,{p:y.cd,children:(0,w.jsx)(b.Z,{},"spinner")});if(Y&&(null===Y||void 0===Y?void 0:Y.path)===(null===B||void 0===B?void 0:B.path)){var t=Y.content,i=void 0===t?"":t;n=(0,w.jsx)(s.Z,{autoHeight:!0,language:d.nB[W],padding:!0,readOnly:!0,value:(0,P.Pb)(i)?JSON.stringify(JSON.parse(i),null,2):i,width:I})}e=(0,C.Hk)([n],H+1,e)}return e}),[Y,W,D,z,B,H,X,I]);return(0,w.jsxs)("div",{style:{width:I},children:[(0,w.jsxs)(v.Z,{p:y.cd,children:[(0,w.jsx)(p.Z,{level:5,children:"File versions"}),(0,w.jsx)(m.ZP,{inline:!0,monospace:!0,children:k?decodeURIComponent(k):null===t||void 0===t?void 0:t.uuid})]}),(0,w.jsx)(g.Z,{buildRowProps:function(e){if(B&&H+1===e)return{renderCell:function(e){return e},renderRow:function(e){return e}}},columnFlex:[1],columns:[{uuid:"Version"}],isSelectedRow:function(e){var n;return(null===(n=D[e])||void 0===n?void 0:n.name)===(null===B||void 0===B?void 0:B.name)},onClickRow:function(e){B?e===H?F(null):e<H?F(e):e>H+1&&F(e-1):F(e)},rows:Q})]})}},90758:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var i=t(82394),r=t(26304),o=t(82684),u=t(38626),l=t(39867),c=t(55485),a=t(48670),s=t(38276),d=t(30160),f=t(12468),h=t(44897),p=t(72473),v=t(97133),b=t(70515),g=t(15610),m=t(3314),O=t(28598);var y=function(e){var n=e.filePath,t=e.filesTouched,i=void 0===t?{}:t,r=e.isLast,u=e.onClickTab,y=e.onClickTabClose,x=e.renderTabTitle,j=e.savePipelineContent,P=e.selected,S=e.themeContext,Z=(0,o.useState)(!1),C=Z[0],w=Z[1];return(0,O.jsx)(c.ZP,{flexDirection:"column",fullHeight:!0,onClick:function(e){e.preventDefault(),P||(u?u(n):(null===j||void 0===j||j(),(0,g.u7)({file_path:encodeURIComponent(n)})))},onMouseEnter:function(){return w(!0)},onMouseLeave:function(){return w(!1)},children:(0,O.jsx)(v.Gb,{last:r,selected:P,children:(0,O.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,children:[(0,O.jsx)(f.Z,{appearAbove:!0,appearBefore:!0,label:n,size:null,widthFitContent:!0,children:(0,O.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,children:[!i[n]&&(0,O.jsx)(p.iU,{muted:!P,size:1.5*b.iI}),i[n]&&(0,O.jsx)(f.Z,{label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,O.jsx)("div",{style:{padding:1},children:(0,O.jsx)(l.Z,{borderColor:(S||h.Z).borders.danger,size:1.25*b.iI})})}),(0,O.jsx)(s.Z,{mr:1}),(0,O.jsx)(d.ZP,{muted:!P,children:x?x(n):n})]})}),(0,O.jsx)(s.Z,{mr:2}),(0,O.jsx)(f.Z,{label:"Close",size:null,widthFitContent:!0,children:(0,O.jsxs)(a.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(e){(0,m.j)(e),null===y||void 0===y||y(n)},preventDefault:!0,children:[(C||P)&&(0,O.jsx)(p.x8,{muted:!P,size:1.25*b.iI}),!C&&!P&&(0,O.jsx)("div",{style:{width:1.25*b.iI}})]})})]})})})},x=t(86735),j=["filePaths","isSelectedFilePath","onClickTabClose","selectedFilePath"];function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n=e.filePaths,t=e.isSelectedFilePath,i=e.onClickTabClose,l=e.selectedFilePath,a=(0,r.Z)(e,j),s=(0,o.useContext)(u.ThemeContext),d=(0,o.useMemo)((function(){return n.map((function(e){return decodeURIComponent(e)}))}),[n]),f=(0,o.useMemo)((function(){return null===d||void 0===d?void 0:d.length}),[d]);return(0,O.jsx)(c.ZP,{alignItems:"center",justifyContent:"flex-start",children:null===d||void 0===d?void 0:d.map((function(e,n){var r=t?t(e,l):l===encodeURIComponent(e);return(0,o.createElement)(y,S(S({},a),{},{filePath:e,isLast:n===f-1,key:e,onClickTabClose:function(e){if(i)i(e);else{var n=(0,x.Od)(d,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,g.u7)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})}},selected:r,themeContext:s}))}))})}},97133:function(e,n,t){"use strict";t.d(n,{Gb:function(){return f},fm:function(){return s},lO:function(){return a},rK:function(){return d},zn:function(){return c}});var i=t(38626),r=t(44897),o=t(2842),u=t(70515),l=t(47041),c=300,a=i.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],c,c),s=i.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).codeArea,";\n  ")})),d=i.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:","px;width:100%;z-index:5;"," "," "," ",""],o.Wi,o.Wi,(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||r.Z.borders).medium,";\n  ")}),(function(e){return e.relativePosition&&"\n    position: relative;\n  "}),(function(e){return e.secondary&&"\n    height: ".concat(37,"px;\n    top: ").concat(o.Wi,"px;\n    overflow-x: auto;\n    z-index: 3;\n  ")}),(0,l.y$)()),f=i.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-right:1px solid transparent;height:100%;padding:","px ","px;"," "," ",""],u.iI,u.cd*u.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||r.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||r.Z.interactive).hoverBackground,";\n  ")}),(function(e){return!e.selected&&!e.last&&"\n    border-color: ".concat((e.theme.borders||r.Z.borders).light," !important;\n  ")}))},85385:function(e,n,t){"use strict";t.d(n,{Qq:function(){return h},Z7:function(){return p},cH:function(){return r},du:function(){return d},fp:function(){return s},j5:function(){return f},uM:function(){return a}});var i,r,o=t(82394),u=t(82359),l=t(72473),c=t(86735),a="sideview",s=90;!function(e){e.ADDON_BLOCKS="addon_blocks",e.BLOCK_SETTINGS="block_settings",e.CALLBACKS="callbacks",e.CHARTS="charts",e.DATA="data",e.EXTENSIONS="power_ups",e.FILE_VERSIONS="file_versions",e.GRAPHS="graphs",e.INTERACTIONS="interactions",e.REPORTS="reports",e.SECRETS="secrets",e.SETTINGS="settings",e.TERMINAL="terminal",e.TREE="tree",e.VARIABLES="variables"}(r||(r={}));r.BLOCK_SETTINGS,r.CALLBACKS,r.CHARTS,r.DATA,r.EXTENSIONS,r.TREE;var d=[r.DATA];function f(e){var n,t,i=[{key:r.TREE,label:"Tree"},{buildLabel:function(e){var n=(e.pipeline||{}).widgets,t=void 0===n?[]:n;return(null===t||void 0===t?void 0:t.length)>=1?"Charts (".concat(t.length,")"):"Charts"},key:r.CHARTS},{buildLabel:function(e){var n=e.variables;return(null===n||void 0===n?void 0:n.length)>=1?"Variables (".concat(n.length,")"):"Variables"},key:r.VARIABLES},{buildLabel:function(e){var n=e.secrets;return(null===n||void 0===n?void 0:n.length)>=1?"Secrets (".concat(n.length,")"):"Secrets"},key:r.SECRETS},{buildLabel:function(e){e.pipeline;return"Add-on blocks"},key:r.ADDON_BLOCKS},{buildLabel:function(e){var n=(e.pipeline||{}).extensions,t=void 0===n?{}:n,i=0;return Object.values(t).forEach((function(e){var n=e.blocks;i+=(null===n||void 0===n?void 0:n.length)||0})),i>=1?"Power ups (".concat(i,")"):"Power ups"},key:r.EXTENSIONS},{key:r.DATA,label:"Data"},{key:r.TERMINAL,label:"Terminal"},{key:r.BLOCK_SETTINGS,label:"Block settings"}];return null!==e&&void 0!==e&&null!==(n=e.project)&&void 0!==n&&null!==(t=n.features)&&void 0!==t&&t[u.d.INTERACTIONS]&&i.push({key:r.INTERACTIONS,label:"Interactions"}),i}function h(e){return(0,c.HK)(f(e),(function(e){return e.key}))}var p=(i={},(0,o.Z)(i,r.ADDON_BLOCKS,l.EJ),(0,o.Z)(i,r.BLOCK_SETTINGS,l.JG),(0,o.Z)(i,r.CALLBACKS,l.AQ),(0,o.Z)(i,r.CHARTS,l.GQ),(0,o.Z)(i,r.DATA,l.iA),(0,o.Z)(i,r.EXTENSIONS,l.Bf),(0,o.Z)(i,r.INTERACTIONS,l.yd),(0,o.Z)(i,r.SECRETS,l.Yo),(0,o.Z)(i,r.SETTINGS,l.Zr),(0,o.Z)(i,r.TERMINAL,l.oI),(0,o.Z)(i,r.TREE,l.mp),(0,o.Z)(i,r.VARIABLES,l.LO),i)},15135:function(e,n,t){"use strict";t.d(n,{JD:function(){return v},Lu:function(){return o},PF:function(){return f},dT:function(){return u},n6:function(){return a},nB:function(){return p},oy:function(){return h},xF:function(){return d}});var i,r,o,u,l=t(82394),c=t(44425);!function(e){e.CSV="csv",e.JSON="json",e.MD="md",e.PY="py",e.R="r",e.SQL="sql",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(o||(o={})),function(e){e.INIT_PY="__init__.py",e.METADATA_YAML="metadata.yaml",e.REQS_TXT="requirements.txt"}(u||(u={}));var a=[o.PY,o.SQL],s=[o.JSON,o.MD,o.PY,o.R,o.SQL,o.TXT,o.YAML,o.YML],d=new RegExp(s.map((function(e){return".".concat(e,"$")})).join("|")),f=(new RegExp(s.map((function(e){return".".concat(e,"$")})).join("|")),"charts"),h="pipelines",p=(i={},(0,l.Z)(i,o.MD,c.t6.MARKDOWN),(0,l.Z)(i,o.JSON,o.JSON),(0,l.Z)(i,o.PY,c.t6.PYTHON),(0,l.Z)(i,o.R,c.t6.R),(0,l.Z)(i,o.SQL,c.t6.SQL),(0,l.Z)(i,o.TXT,"text"),(0,l.Z)(i,o.YAML,c.t6.YAML),(0,l.Z)(i,o.YML,c.t6.YAML),i),v=(r={},(0,l.Z)(r,c.t6.MARKDOWN,o.MD),(0,l.Z)(r,c.t6.PYTHON,o.PY),(0,l.Z)(r,c.t6.R,o.R),(0,l.Z)(r,c.t6.SQL,o.SQL),(0,l.Z)(r,c.t6.YAML,o.YAML),(0,l.Z)(r,"text",o.TXT),r)},57653:function(e,n,t){"use strict";t.d(n,{$1:function(){return s},G7:function(){return f},LM:function(){return h},Mj:function(){return p},QK:function(){return a},a_:function(){return b},kA:function(){return v},qL:function(){return u},r0:function(){return d}});var i,r,o,u,l=t(82394),c=t(72473);!function(e){e.INTEGRATION="integration",e.PYTHON="python",e.PYSPARK="pyspark",e.STREAMING="streaming"}(u||(u={}));var a,s,d,f=(i={},(0,l.Z)(i,u.INTEGRATION,"Integration"),(0,l.Z)(i,u.PYTHON,"Standard"),(0,l.Z)(i,u.PYSPARK,"PySpark"),(0,l.Z)(i,u.STREAMING,"Streaming"),i),h="all",p=(u.PYTHON,u.INTEGRATION,u.STREAMING,r={},(0,l.Z)(r,h,c.ie),(0,l.Z)(r,u.INTEGRATION,c.YC),(0,l.Z)(r,u.PYTHON,c.El),(0,l.Z)(r,u.STREAMING,c.dB),r);!function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.NO_SCHEDULES="no_schedules",e.RETRY="retry",e.RETRY_INCOMPLETE_BLOCK_RUNS="retry_incomplete_block_runs"}(a||(a={})),function(e){e.GROUP="group_by",e.HISTORY_DAYS="from_history_days",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(s||(s={})),function(e){e.STATUS="status",e.TAG="tag",e.TYPE="type"}(d||(d={}));var v=[a.ACTIVE,a.INACTIVE,a.NO_SCHEDULES],b=(o={},(0,l.Z)(o,u.PYTHON,"python3"),(0,l.Z)(o,u.PYSPARK,"pysparkkernel"),o)},82359:function(e,n,t){"use strict";var i,r;t.d(n,{d:function(){return i},k:function(){return r}}),function(e){e.ADD_NEW_BLOCK_V2="add_new_block_v2",e.DATA_INTEGRATION_IN_BATCH_PIPELINE="data_integration_in_batch_pipeline",e.INTERACTIONS="interactions",e.LOCAL_TIMEZONE="display_local_timezone",e.OPERATION_HISTORY="operation_history"}(i||(i={})),function(e){e.MAIN="main",e.STANDALONE="standalone",e.SUB="sub"}(r||(r={}))},65956:function(e,n,t){"use strict";var i=t(38626),r=t(55485),o=t(38276),u=t(30160),l=t(44897),c=t(42631),a=t(47041),s=t(70515),d=t(28598),f=(0,i.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*s.iI,1.5*s.iI,1.5*s.iI),h=i.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],c.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||l.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||l.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||l.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||l.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||l.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),p=i.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],c.n_,c.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||l.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||l.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),f,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),v=i.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*s.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*s.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),b=i.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],c.M8,c.YF,1.75*s.iI);n.Z=function(e){var n=e.borderless,t=e.children,i=e.containerRef,l=e.contentContainerRef,c=e.dark,a=e.footer,s=e.fullHeight,f=void 0===s||s,g=e.fullWidth,m=void 0===g||g,O=e.header,y=e.headerHeight,x=e.headerIcon,j=e.headerPaddingVertical,P=e.headerTitle,S=e.maxHeight,Z=e.maxWidth,C=e.minWidth,w=e.noPadding,k=e.overflowVisible,T=e.subtitle,E=e.success;return(0,d.jsxs)(h,{borderless:n,dark:c,fullHeight:f,fullWidth:m,maxHeight:S,maxWidth:Z,minWidth:C,overflowVisible:k,ref:i,success:E,children:[(O||P)&&(0,d.jsxs)(p,{headerPaddingVertical:j,height:y,children:[O&&O,P&&(0,d.jsx)(r.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,d.jsxs)(r.ZP,{alignItems:"center",children:[x&&x,(0,d.jsx)(o.Z,{ml:x?1:0,children:(0,d.jsx)(u.ZP,{bold:!0,default:!0,children:P})})]})})]}),(0,d.jsxs)(v,{maxHeight:S,noPadding:w,overflowVisible:k,ref:l,children:[T&&(0,d.jsx)(o.Z,{mb:2,children:(0,d.jsx)(u.ZP,{default:!0,children:T})}),t]}),a&&(0,d.jsx)(b,{children:a})]})}},35185:function(e,n,t){"use strict";var i=t(82394),r=t(91835),o=(t(82684),t(38626)),u=t(44897),l=t(42631),c=t(70515),a=t(28598);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=o.default.div.withConfig({displayName:"ProgressBar__ProgressBarContainerStyle",componentId:"sc-10x9ojc-0"})(["border-radius:","px;height:","px;overflow:hidden;position:relative;width:100%;",""],l.BG,.75*c.iI,(function(e){return"\n    background-color: ".concat((e.theme.monotone||u.Z.monotone).grey200,";\n  ")})),h=o.default.div.withConfig({displayName:"ProgressBar__ProgressBarStyle",componentId:"sc-10x9ojc-1"})(["height:inherit;position:absolute;"," "," "," ",""],(function(e){return!e.danger&&"\n    background-color: ".concat((e.theme.progress||u.Z.progress).positive,";\n  ")}),(function(e){return e.progress&&"\n    width: ".concat(e.progress,"%;\n  ")}),(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.progress||u.Z.progress).negative,";\n  ")}),(function(e){return e.animateProgress&&"\n    animation: animate-progress ".concat(e.animateProgress.duration,"ms linear forwards;\n\n    @keyframes animate-progress {\n      0% {\n        width: ").concat(e.animateProgress.start,"%;\n      }\n\n      100% {\n        width: ").concat(e.animateProgress.end,"%;\n      }\n    }\n  ")}));n.Z=function(e){var n=(0,r.Z)({},e);return(0,a.jsx)(f,d(d({},n),{},{children:(0,a.jsx)(h,d({},n))}))}},43173:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return J}});var i=t(77837),r=t(38860),o=t.n(r),u=t(82394),l=t(75582),c=t(17717),a=t(82684),s=t(80329),d=t(69864),f=t(65557),h=t(94629),p=t(10553),v=t(29618),b=t(50724),g=t(55485),m=t(70374),O=t(30160),y=t(39643),x=t(87848),j=t(58325),P=t(44688),S=t(28598);var Z=function(e){var n=e.children,t=e.fileVersionsVisible,i=e.onSave,r=e.setFilesVersionsVisible,o=(0,a.useState)(null),u=o[0],l=o[1],c=(0,a.useRef)(null),s=(0,a.useRef)(null),d=(0,a.useMemo)((function(){return[{disabled:!i,keyTextGroups:[[(0,j.V5)()?y.RJ:y.hE,y.SS]],label:function(){return"Save"},onClick:function(){return i?i():null},uuid:"save"}]}),[i]),f=(0,a.useMemo)((function(){return[{label:function(){return t?"Hide versions":"Show versions"},onClick:function(){return r(!t)},uuid:"versions"}]}),[t,r]),h="FileHeaderMenu/index",p=(0,P.y)(),v=p.registerOnKeyDown,Z=p.unregisterOnKeyDown;return(0,a.useEffect)((function(){return function(){Z(h)}}),[Z,h]),v(h,(function(e,n){null!==u&&(n[y.QK]?l((function(e){return 0===e?2:e-1})):n[y.DY]&&l((function(e){return 2===e?0:e+1})))}),[u,l]),(0,S.jsx)(b.Z,{onClickOutside:function(){return l(null)},open:!0,style:{position:"relative"},children:(0,S.jsxs)(g.ZP,{children:[(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)(x.u,{highlighted:0===u,onClick:function(){return l((function(e){return 0===e?null:0}))},onMouseEnter:function(){return l((function(e){return null!==e?0:null}))},ref:c,children:(0,S.jsx)(O.ZP,{children:"File"})}),(0,S.jsx)(m.Z,{items:d,onClickCallback:function(){return l(null)},open:0===u,parentRef:c,uuid:"FileHeaderMenu/file"})]}),(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)(x.u,{highlighted:1===u,onClick:function(){return l((function(e){return 1===e?null:1}))},onMouseEnter:function(){return l((function(e){return null!==e?1:null}))},ref:s,children:(0,S.jsx)(O.ZP,{children:"Edit"})}),(0,S.jsx)(m.Z,{items:f,onClickCallback:function(){return l(null)},open:1===u,parentRef:s,uuid:"FileHeaderMenu/edit"})]}),n]})})},C=t(90758),w=t(28385),k=t(35686),T=t(38626),E=t(44897),I=t(2842),_=t(46684),A=t(47041),N=72-I.uX+_.Mz,R=T.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-11pty4f-0"})(["height:","px;top:","px;z-index:3;",""],72,_.Mz,(function(e){return"\n    background-color: ".concat((e.theme.background||E.Z.background).codeArea,";\n  ")})),M=T.default.div.withConfig({displayName:"indexstyle__MenuStyle",componentId:"sc-11pty4f-1"})(["height:","px;position:relative;z-index:1;",""],36,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||E.Z.borders).medium,";\n  ")})),D=T.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-11pty4f-2"})([""," height:","px;overflow-x:auto;position:sticky;width:100%;z-index:0;"],(0,A.y$)(),36),L=t(53808),H=t(86735),F="open_files";function B(e){(0,L.t8)(F,e)}var V=t(72619),Y=t(42041),U=t(23780);function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function K(e){var n=e.split(c.sep);return n[n.length-1]}var X=function(){var e=(0,s.j)("apiReloads"),n=(0,l.Z)(e,2)[1],t=(0,a.useRef)(null),i=(0,a.useRef)(null),r=(0,a.useCallback)((function(e){i.current||(i.current={}),i.current=G(G({},i.current),e)}),[i]),o=(0,a.useState)([]),c=o[0],b=o[1],g=(0,a.useState)(null),m=g[0],O=g[1],x=(0,a.useState)({}),j=x[0],T=x[1],E=(0,a.useState)(!1),I=E[0],_=E[1],A=(0,a.useMemo)((function(){return c.reduce((function(e,n){var t=K(n);return e[t]||(e[t]=[]),e[t].push(n),e}),{})}),[c]),W=(0,a.useCallback)((function(e){B(e),b(e)}),[]),X=(0,a.useCallback)((function(e){W(function(e){var n=(0,L.U2)(F,[]);return n.includes(e)||n.push(e),B(n),n}(e))}),[W]),z=(0,a.useCallback)((function(e){r((0,u.Z)({},e,null)),T((function(n){return G(G({},n),{},(0,u.Z)({},e,!1))}));var n=function(e){var n=(0,L.U2)(F,[]),t=(0,H.Od)(n,(function(n){return n===e}));return B(t),t}(e);W(n),m===e&&(null===n||void 0===n?void 0:n.length)>=1&&O(n[n.length-1]),0===(null===n||void 0===n?void 0:n.length)&&O(null)}),[m,r,W]),Q=(0,a.useCallback)((function(e,n){n||(X(e),O(e))}),[X]);(0,a.useEffect)((function(){var e=(0,L.U2)(F,[]);W(e),O((function(n){return!n&&(null===e||void 0===e?void 0:e.length)>=1?e[0]:n}))}),[W]);var J=k.ZP.files.list(),q=J.data,$=J.mutate,ee=(0,a.useMemo)((function(){return(null===q||void 0===q?void 0:q.files)||[]}),[q]),ne=(0,U.VI)(null,{},[],{uuid:"FilesPage"}),te=(0,l.Z)(ne,1)[0],ie="Files/index",re=(0,P.y)(),oe=(re.disableGlobalKeyboardShortcuts,re.registerOnKeyDown),ue=re.unregisterOnKeyDown;(0,a.useEffect)((function(){return function(){ue(ie)}}),[ue,ie]),oe(ie,(function(e,n){var t=Object.entries(j).reduce((function(e,n){var t=(0,l.Z)(n,2),i=t[0];return t[1]?e.concat(i):e}),[]);if((0,Y.y)([y.zX,y.hS],n)&&(null===t||void 0===t?void 0:t.length)>=1){e.preventDefault();var i="You have changes that are unsaved: ".concat(t.join(", "),". ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(i)&&location.reload()}}),[j]);var le=(0,a.useMemo)((function(){return(0,S.jsx)(C.Z,{filePaths:c,filesTouched:j,isSelectedFilePath:function(e,n){return e===n},onClickTab:function(e){return O(e)},onClickTabClose:function(e){return z(e)},renderTabTitle:function(e){var n=K(e),t=A[n];return t&&(null===t||void 0===t?void 0:t.length)>=2?e:n},selectedFilePath:m})}),[j,c,A,z,m]),ce=(0,a.useMemo)((function(){return(0,S.jsx)(p.Z,{fetchFileTree:$,files:ee,onClickFile:function(e){return Q(e)},onClickFolder:function(e){return Q(e,!0)},onCreateFile:function(e){var n=e.path;return Q(n)},ref:t,setErrors:te})}),[$,t,ee,Q,te]),ae=(0,d.Db)((function(e){return k.ZP.file_contents.useUpdate((null===e||void 0===e?void 0:e.path)&&encodeURIComponent(null===e||void 0===e?void 0:e.path))({file_content:e})}),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(e){var t=e.file_content;n((function(e){return G(G({},e),{},(0,u.Z)({},"FileVersions/".concat(null===t||void 0===t?void 0:t.path),Number(new Date)))})),r((0,u.Z)({},null===t||void 0===t?void 0:t.path,null))},onErrorCallback:function(e,n){return te({errors:n,response:e})}})}}),se=(0,l.Z)(ae,1)[0],de=(0,a.useCallback)((function(e,n){se(G(G({},n),{},{content:e})),T((function(e){return G(G({},e),{},(0,u.Z)({},null===n||void 0===n?void 0:n.path,!1))}))}),[T,se]),fe=(0,a.useMemo)((function(){return null===c||void 0===c?void 0:c.map((function(e){return(0,S.jsx)("div",{style:{display:m===e?null:"none"},children:(0,S.jsx)(f.Z,{uuid:"FileEditor/".concat(decodeURIComponent(e)),children:(0,S.jsx)(v.Z,{active:m===e,disableRefreshWarning:!0,filePath:e?encodeURIComponent(e):null,hideHeaderButtons:!0,onContentChange:function(n){return r((0,u.Z)({},e,n))},saveFile:de,selectedFilePath:m,setErrors:te,setFilesTouched:T})})},e)}))}),[c,de,m,r,te]),he=(0,a.useMemo)((function(){return(0,S.jsx)(Z,{fileVersionsVisible:I,onSave:function(){var e,n;(null===i||void 0===i||null===(e=i.current)||void 0===e||null===(n=e[m])||void 0===n?void 0:n.length)>=1&&de(i.current[m],{path:m})},setFilesVersionsVisible:_})}),[i,I,de,m,_]);return(0,S.jsx)(h.Z,{after:(0,S.jsx)(f.Z,{uuid:"FileVersions/".concat(m?decodeURIComponent(m):""),children:(0,S.jsx)(w.Z,{selectedFilePath:m,setErrors:te})}),afterHidden:!(I&&m),before:ce,headerOffset:N,mainContainerHeader:(null===c||void 0===c?void 0:c.length)>=1&&(0,S.jsxs)(R,{children:[(0,S.jsx)(M,{children:he}),(0,S.jsx)(D,{children:le})]}),title:"Files",uuid:"Files/index",children:fe})},z=t(93808);function Q(){return(0,S.jsx)(X,{})}Q.getInitialProps=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var J=(0,z.Z)(Q)},80329:function(e,n,t){"use strict";t.d(n,{j:function(){return i}});var i=(0,t(44152).r)({apiReloads:{}}).useGlobalState},58325:function(e,n,t){"use strict";var i;t.d(n,{V5:function(){return o}}),function(e){e.ANDROID="Android",e.CHROME_OS="ChromeOS",e.IOS="iOS",e.LINUX="Linux",e.MAC="macOS",e.WINDOWS="Windows"}(i||(i={}));var r=i;function o(){return function(){var e,n,t,i,o,u,l,c=r.MAC,a=null===(e=window)||void 0===e||null===(n=e.navigator)||void 0===n?void 0:n.userAgent,s=(null===(t=window)||void 0===t||null===(i=t.navigator)||void 0===i||null===(o=i.userAgentData)||void 0===o?void 0:o.platform)||(null===(u=window)||void 0===u||null===(l=u.navigator)||void 0===l?void 0:l.platform);return s?["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].includes(s)?c=r.MAC:["Win32","Win64","Windows","WinCE"].includes(s)?c=r.WINDOWS:["iPhone","iPad","iPod"].includes(s)&&(c=r.IOS):a&&(a.includes("Macintosh")?c=r.MAC:a.includes("Windows")?c=r.WINDOWS:a.includes("Linux")&&a.includes("X11")?c=r.LINUX:/(iPhone|iPad)/.test(a)?c=r.IOS:a.includes("Android")&&a.includes("Mobi")?c=r.ANDROID:a.includes("CrOS")&&(c=r.CHROME_OS)),c}()===r.MAC}},99017:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/files",function(){return t(43173)}])}},function(e){e.O(0,[844,2083,8789,7011,6750,8013,600,9696,8264,4666,5499,4839,5810,553,9774,2888,179],(function(){return n=99017,e(e.s=n);var n}));var n=e.O();_N_E=n}]);