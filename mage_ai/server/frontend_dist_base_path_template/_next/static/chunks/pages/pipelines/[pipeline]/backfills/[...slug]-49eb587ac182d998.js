(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6780],{74395:function(e,n,t){"use strict";t.d(n,{M:function(){return c},W:function(){return l}});var r=t(38626),i=t(46684),l=34*t(70515).iI,c=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},8955:function(e,n,t){"use strict";t.d(n,{G7:function(){return P},ZP:function(){return y},u$:function(){return x}});var r=t(75582),i=t(82394),l=t(26304),c=t(90299),s=t(9134),a=t(17586),o=t(38276),u=t(30160),d=t(75499),p=t(70515),f=t(16488),b=t(42122),h=t(28598),v=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=76,g={uuid:"Run details"},Z={uuid:"Dependency tree"},P=[Z,g];function y(e){var n=e.height,t=e.heightOffset,i=e.pipeline,m=e.selectedRun,y=e.selectedTab,k=e.setSelectedTab,O=j({},(0,l.Z)(e,v));m?O.blockStatus=(0,f.IJ)(null===m||void 0===m?void 0:m.block_runs):O.noStatus=!0;var _=(0,b.Kn)(null===m||void 0===m?void 0:m.variables)?j({},null===m||void 0===m?void 0:m.variables):(null===m||void 0===m?void 0:m.variables)||{},I=null===m||void 0===m?void 0:m.event_variables;if(I&&(0,b.Kn)(I)&&!(0,b.Qr)(I))if((0,b.Kn)(_)&&_.hasOwnProperty("event")){var w=(0,b.Kn)(_.event)?_.event:{};_.event=j(j({},w),I)}else _.event=j({},I);var D=[];_&&JSON.stringify(_,null,2).split("\n").forEach((function(e){D.push("    ".concat(e))}));var S=m&&[["Run ID",null===m||void 0===m?void 0:m.id],["Variables",(0,h.jsx)(s.Z,{language:"json",small:!0,source:D.join("\n")},"variable_value")]],E=m&&(0,h.jsx)(o.Z,{pb:p.cd,px:p.cd,children:(0,h.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:S.map((function(e,n){var t=(0,r.Z)(e,2),i=t[0],l=t[1];return[(0,h.jsx)(u.ZP,{monospace:!0,muted:!0,children:i},"key_".concat(n)),(0,h.jsx)(u.ZP,{monospace:!0,textOverflow:!0,children:l},"val_".concat(n))]})),uuid:"LogDetail"})}),C=y&&k;return(0,h.jsxs)(h.Fragment,{children:[C&&(0,h.jsx)(o.Z,{py:p.cd,children:(0,h.jsx)(c.Z,{onClickTab:k,selectedTabUUID:null===y||void 0===y?void 0:y.uuid,tabs:P})}),(!C||Z.uuid===(null===y||void 0===y?void 0:y.uuid))&&(0,h.jsx)(a.Z,j(j({},O),{},{height:n,heightOffset:(t||0)+(C?x:0),pipeline:i})),g.uuid===(null===y||void 0===y?void 0:y.uuid)&&E]})}},8916:function(e,n,t){"use strict";t.d(n,{FS:function(){return a},JZ:function(){return u},e7:function(){return d},wx:function(){return o}});var r=t(75582),i=t(82394),l=t(30229);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e){return"string"===typeof e?e:JSON.stringify(e)}function o(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return s(s({},e),{},{value:a(n)})}))}function u(e,n){return n===l.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===l.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function d(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,r.Z)(n,2),l=t[0],c=t[1],a=c;try{a=JSON.parse(c)}catch(o){}return s(s({},e),{},(0,i.Z)({},l,a))}),{}):e}},88785:function(e,n,t){"use strict";t.d(n,{J:function(){return a},U:function(){return s}});var r=t(38626),i=t(44897),l=t(42631),c=t(70515),s=r.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-m7tlau-0"})(["border-radius:","px;border-style:solid;border-width:2px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],l.TR,14*c.iI,c.cd*c.iI,c.cd*c.iI,40*c.iI,(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.interactive||i.Z.interactive).linkPrimary,";\n  ")})),a=r.default.div.withConfig({displayName:"indexstyle__DateSelectionContainer",componentId:"sc-m7tlau-1"})(["border-radius:","px;padding:","px;"," "," ",""],l.n_,c.tr,(function(e){return"\n    background-color: ".concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.absolute&&"\n    position: absolute;\n    z-index: 2;\n    right: 0;\n    top: ".concat(2.5*c.iI,"px;\n  ")}),(function(e){return e.topPosition&&"\n    top: -".concat(42*c.iI,"px;\n  ")}))},55072:function(e,n,t){"use strict";t.d(n,{Et:function(){return p},Q:function(){return d}});t(82684);var r=t(71180),i=t(55485),l=t(38276),c=t(31748),s=t(72473),a=t(79633),o=t(70515),u=t(28598),d=30,p=9;n.ZP=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,p=e.totalPages,f=[],b=t;if(b>p)f=Array.from({length:p},(function(e,n){return n}));else{var h=Math.floor(b/2),v=n-h;n+h>=p?(v=p-b+2,b-=2):n-h<=0?(v=0,b-=2):(b-=4,v=n-Math.floor(b/2)),f=Array.from({length:b},(function(e,n){return n+v}))}return(0,u.jsx)(u.Fragment,{children:p>0&&(0,u.jsxs)(i.ZP,{alignItems:"center",children:[(0,u.jsx)(r.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,u.jsx)(s.Hd,{size:1.5*o.iI,stroke:c.Av})}),!f.includes(0)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.Z,{ml:1,children:(0,u.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!f.includes(1)&&(0,u.jsx)(l.Z,{ml:1,children:(0,u.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),f.map((function(e){return(0,u.jsx)(l.Z,{ml:1,children:(0,u.jsx)(r.Z,{backgroundColor:e===n&&a.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!f.includes(p-1)&&(0,u.jsxs)(u.Fragment,{children:[!f.includes(p-2)&&(0,u.jsx)(l.Z,{ml:1,children:(0,u.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,u.jsx)(l.Z,{ml:1,children:(0,u.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(p-1)},children:p})},p-1)]}),(0,u.jsx)(l.Z,{ml:1}),(0,u.jsx)(r.Z,{disabled:n===p-1,onClick:function(){return d(n+1)},children:(0,u.jsx)(s.Kw,{size:1.5*o.iI,stroke:c.Av})})]})})}},83641:function(e,n,t){"use strict";t.d(n,{I7:function(){return r},IB:function(){return a},VV:function(){return l},_7:function(){return c},rn:function(){return s}});var r,i=t(41143),l="datetime",c="code",s=i.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(r||(r={}));var a=[r.MINUTE,r.HOUR,r.DAY,r.WEEK,r.MONTH,r.YEAR,r.CUSTOM]},83784:function(e,n,t){"use strict";t.d(n,{C:function(){return r}});var r="global"},14805:function(e,n,t){"use strict";var r=t(82394),i=t(44495),l=t(55485),c=t(44085),s=t(38276),a=t(30160),o=t(88785),u=t(70515),d=t(86735),p=t(28598);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.localTime,t=e.selectedDate,r=e.selectedTime,f=e.setSelectedDate,h=e.setSelectedTime,v=e.topPosition;return(0,p.jsxs)(o.J,{absolute:!0,topPosition:v,children:[(0,p.jsx)(i.ZP,{onChange:f,value:t}),(0,p.jsx)(s.Z,{mb:2}),(0,p.jsxs)(l.ZP,{alignItems:"center",children:[(0,p.jsxs)(a.ZP,{default:!0,large:!0,children:["Time (",n?"Local":"UTC","):"]}),(0,p.jsx)(s.Z,{pr:2}),(0,p.jsx)(c.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),h((function(n){return b(b({},n),{},{hour:e.target.value})}))},paddingRight:5*u.iI,placeholder:"HH",value:null===r||void 0===r?void 0:r.hour,children:(0,d.m5)(24,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"hour_".concat(e))}))}),(0,p.jsx)(s.Z,{px:1,children:(0,p.jsx)(a.ZP,{bold:!0,large:!0,children:":"})}),(0,p.jsx)(c.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),h((function(n){return b(b({},n),{},{minute:e.target.value})}))},paddingRight:5*u.iI,placeholder:"MM",value:null===r||void 0===r?void 0:r.minute,children:(0,d.m5)(60,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"minute_".concat(e))}))})]})]})}},79500:function(e,n,t){"use strict";t.d(n,{a:function(){return l}});var r=t(16488),i=t(3917);function l(e,n){var t,l;if(null!==n&&void 0!==n&&n.localTimezone)t=(0,i.n$)(e),l={hour:(0,i.lJ)(String(t.getHours())),minute:(0,i.lJ)(String(t.getMinutes()))};else{var c=e.split(" ")[1];t=(0,r.eI)(e),l={hour:c.substring(0,2),minute:c.substring(3,5)}}return{date:t,time:l}}},9134:function(e,n,t){"use strict";var r=t(82684),i=t(21124),l=t(68432),c=t(38626),s=t(65292),a=t(44897),o=t(95363),u=t(70515),d=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,p=e.showLineNumbers,f=e.small,b=e.source,h=e.wrapLines,v=(0,r.useContext)(c.ThemeContext);function m(e){var r=e.value;return(0,d.jsx)(l.Z,{customStyle:{backgroundColor:(v.background||a.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:o.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,maxWidth:t,paddingBottom:2*u.iI,paddingTop:2*u.iI},language:n,lineNumberStyle:{color:(v.content||a.Z.content).muted},showLineNumbers:p,style:s._4,useInlineStyles:!0,wrapLines:h,children:r})}return(0,d.jsx)(i.D,{components:{code:function(e){var n=e.children;return(0,d.jsx)(m,{value:n})}},children:b})}},51532:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return se}});var r=t(75582),i=t(77837),l=t(82394),c=t(38860),s=t.n(c),a=t(82684),o=t(69864),u=t(34376),d=t(83641),p=t(71180),f=t(15338),b=t(55485),h=t(85854),v=t(55072),m=t(75457),j=t(53943),x=t(44265),g=t(83784),Z=t(44085),P=t(38276),y=t(4190),k=t(75499),O=t(30160),_=t(35686),I=t(8955),w=t(72473),D=t(74395),S=t(70515),E=t(28795),C=t(81728),T=t(3917),M=t(8916),N=t(16488),L=t(15610),A=t(42122),F=t(50178),U=t(72619),R=t(3314),B=t(69419),z=t(70320),H=t(28598);function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var K=function(e){var n=e.backfill,t=e.errors,i=e.fetchBackfill,l=e.pipeline,c=e.setErrors,s=e.variables,V=(0,F.Ct)(),K=(0,z.q)(),J=(0,u.useRouter)(),X=n||{},W=X.block_uuid,G=X.end_datetime,q=X.id,Q=X.interval_type,$=X.interval_units,ee=X.name,ne=X.pipeline_run_dates,te=X.start_datetime,re=X.status,ie=X.total_run_count,le=X.variables,ce=void 0===le?{}:le,se=l.uuid,ae=(0,B.iV)(),oe={_limit:40,_offset:40*(null!==ae&&void 0!==ae&&ae.page?ae.page:0)};null!==ae&&void 0!==ae&&ae.status&&(oe.status=ae.status);var ue=_.ZP.pipeline_runs.list(Y(Y({},oe),{},{backfill_id:q}),{refreshInterval:3e3,revalidateOnFocus:!0},{pauseFetch:!q}),de=ue.data,pe=ue.mutate,fe=!(te&&G&&Q&&$),be=!re,he=(0,a.useMemo)((function(){return(be?ne:null===de||void 0===de?void 0:de.pipeline_runs)||[]}),[de,ne,be]),ve=(0,a.useMemo)((function(){var e;return(null===de||void 0===de||null===(e=de.metadata)||void 0===e?void 0:e.count)||[]}),[de]),me=(0,a.useState)(null),je=me[0],xe=me[1],ge=(0,a.useMemo)((function(){var e=null!==ae&&void 0!==ae&&ae.page?ae.page:0;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(j.Z,{disableRowSelect:be,emptyMessage:null!==ae&&void 0!==ae&&ae.status?"No runs available":'No runs available. Please complete backfill configuration by clicking "Edit backfill" above.',fetchPipelineRuns:pe,onClickRow:function(e){return xe((function(n){var t=he[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:he,selectedRun:je,setErrors:c}),(0,H.jsx)(P.Z,{p:2,children:(0,H.jsx)(v.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),t=Y(Y({},ae),{},{page:n>=0?n:0});J.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(se,"/backfills/").concat(q,"?").concat((0,B.uM)(t)))},page:Number(e),totalPages:Math.ceil(ve/40)})})]})}),[pe,q,he,se,ae,J,je,c,be,ve]),Ze=(0,a.useState)(I.G7[0]),Pe=Ze[0],ye=Ze[1],ke=(0,o.Db)(_.ZP.backfills.useUpdate(q),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(){i(),pe()},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),Oe=(0,r.Z)(ke,2),_e=Oe[0],Ie=Oe[1].isLoading,we=(0,a.useMemo)((function(){return!!re&&(d.rn.CANCELLED!==re&&d.rn.FAILED!==re)}),[re]),De=(0,a.useMemo)((function(){return re&&d.rn.CANCELLED!==re&&d.rn.FAILED!==re&&d.rn.INITIAL!==re&&d.rn.RUNNING!==re}),[re]),Se=(0,a.useMemo)((function(){var e={default:!0,size:1.5*S.iI},n=[[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.VW,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Backfill type"})]},"backfill_type_label"),(0,H.jsx)(O.ZP,{monospace:!0,children:W?d._7:d.VV},"backfill_type")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.rs,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Status"})]},"backfill_status_label"),(0,H.jsx)(O.ZP,{danger:d.rn.CANCELLED===re||d.rn.FAILED==re,default:d.rn.INITIAL===re,monospace:!0,muted:!re,success:d.rn.RUNNING===re||d.rn.COMPLETED===re,children:re||"inactive"},"backfill_status")]];return W||n.push.apply(n,[[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.aw,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Start date and time"})]},"backfill_start_date_label"),(0,H.jsx)(O.ZP,{monospace:!0,small:!0,children:K?(0,T.XG)(te,K):(0,N.Vx)(te)},"backfill_start_date")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.aw,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"End date and time"})]},"backfill_end_date_label"),(0,H.jsx)(O.ZP,{monospace:!0,small:!0,children:K?(0,T.XG)(G,K):(0,N.Vx)(G)},"backfill_end_date")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.Pf,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Interval type"})]},"interval_type_label"),(0,H.jsx)(O.ZP,{monospace:!0,children:Q&&(0,C.kC)(Q)},"interval_type")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.Pf,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Interval units"})]},"interval_units_label"),(0,H.jsx)(O.ZP,{monospace:!0,children:$},"interval_units")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.qZ,Y({},e)),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Total runs"})]},"total_runs_label"),(0,H.jsx)(O.ZP,{monospace:!0,children:ie},"total_runs")]]),(0,H.jsx)(k.Z,{columnFlex:[null,1],rows:n})}),[W,K,G,Q,$,te,re,ie]),Ee=(0,a.useMemo)((function(){return ce||{}}),[ce]),Ce=(0,a.useMemo)((function(){var e,n=[];return(0,A.Qr)(Ee)?n=(0,M.wx)(s,(function(e){return e.uuid===g.C})):Object.entries(Ee).forEach((function(e){var t=(0,r.Z)(e,2),i=t[0],l=t[1];n.push({uuid:i,value:(0,M.FS)(l)})})),"undefined"!==typeof n&&null!==(e=n)&&void 0!==e&&e.length?(0,H.jsx)(k.Z,{columnFlex:[null,1],rows:n.map((function(e){var n=e.uuid,t=e.value;return[(0,H.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:n},"settings_variable_label_".concat(n)),(0,H.jsx)(O.ZP,{monospace:!0,small:!0,children:t},"settings_variable_".concat(n))]}))}):null}),[Ee,s]);return(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(m.Z,{afterHidden:!je,before:(0,H.jsxs)(D.M,{children:[(0,H.jsxs)(P.Z,{mb:S.HN,pt:S.cd,px:S.cd,children:[(0,H.jsx)(P.Z,{mb:S.cd,children:(0,H.jsx)(w.yg,{size:5*S.iI})}),(0,H.jsx)(h.Z,{children:ee})]}),(0,H.jsx)(P.Z,{px:S.cd,children:(0,H.jsx)(h.Z,{level:5,children:"Settings"})}),(0,H.jsx)(f.Z,{light:!0,mt:1,short:!0}),Se,Ce&&(0,H.jsxs)(P.Z,{my:S.HN,children:[(0,H.jsx)(P.Z,{px:S.cd,children:(0,H.jsx)(h.Z,{level:5,children:"Runtime variables"})}),(0,H.jsx)(f.Z,{light:!0,mt:1,short:!0}),Ce]})]}),beforeWidth:34*S.iI,breadcrumbs:[{label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(se,"/backfills"),href:"/pipelines/[pipeline]/backfills"}},{label:function(){return ee},linkProps:{as:"/pipelines/".concat(se,"/backfills/").concat(q),href:"/pipelines/[pipeline]/backfills/[...slug]"}}],buildSidekick:function(e){return(0,I.ZP)(Y(Y({},e),{},{selectedRun:je,selectedTab:Pe,setSelectedTab:ye}))},errors:t,pageName:E.M.BACKFILLS,pipeline:l,setErrors:c,subheader:(0,H.jsxs)(b.ZP,{alignItems:"center",children:[!De&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(p.Z,{beforeIcon:we?(0,H.jsx)(w.dz,{size:2*S.iI}):(0,H.jsx)(w.Py,{inverted:!(d.rn.CANCELLED===re||d.rn.FAILED===re),size:2*S.iI}),danger:we,disabled:fe,loading:Ie,onClick:function(e){(0,R.j)(e),_e({backfill:{status:we?d.rn.CANCELLED:d.rn.INITIAL}})},outline:!0,success:!we&&!(d.rn.CANCELLED===re||d.rn.FAILED===re)&&!fe,children:we?"Cancel backfill":d.rn.CANCELLED===re||d.rn.FAILED===re?"Retry backfill":"Start backfill"}),(0,H.jsx)(P.Z,{mr:S.cd})]}),!V&&(0,H.jsxs)(H.Fragment,{children:[re===x.VO.COMPLETED?(0,H.jsx)(O.ZP,{bold:!0,default:!0,large:!0,children:"Filter runs by status:"}):(0,H.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat(se,"/backfills/").concat(q,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Edit backfill"}),(0,H.jsx)(P.Z,{mr:S.cd})]}),!be&&(0,H.jsxs)(Z.Z,{compact:!0,defaultColor:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?J.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(se,"/backfills/").concat(q)):(0,L.u7)({page:0,status:e.target.value})},paddingRight:4*S.iI,placeholder:"Select run status",value:(null===ae||void 0===ae?void 0:ae.status)||"all",children:[(0,H.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),x.IK.map((function(e){return(0,H.jsx)("option",{value:e,children:x.Do[e]},e)}))]})]}),title:function(){return ee},uuid:"backfill/detail",children:[(0,H.jsx)(P.Z,{mt:S.cd,px:S.cd,children:(0,H.jsx)(h.Z,{level:5,children:"Runs for this backfill"})}),(0,H.jsx)(f.Z,{light:!0,mt:S.cd,short:!0}),de?ge:(0,H.jsx)(P.Z,{m:2,children:(0,H.jsx)(y.Z,{inverted:!0})})]})})},J=t(14805),X=t(50724),W=t(97618),G=t(17488),q=[{label:function(){return"Date and time window"},description:function(){return"Backfill between a date and time range."},uuid:d.VV}],Q=t(88785),$=t(79500);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te=function(e){var n=e.backfill,t=e.errors,i=e.fetchBackfill,l=e.pipeline,c=e.setErrors,s=(e.variables,(0,u.useRouter)()),v=(0,z.q)(),j=(0,a.useState)(),x=j[0],g=j[1],y=x||{},I=y.block_uuid,D=y.id,T=y.interval_type,L=y.interval_units,F=y.name,R=l.uuid,B=(0,a.useState)({}),V=B[0],Y=(B[1],(0,a.useState)(I?d._7:d.VV)),K=Y[0],ee=Y[1],te=(0,a.useState)(!1),re=te[0],ie=te[1],le=(0,a.useState)(!1),ce=le[0],se=le[1],ae=(0,a.useState)(null),oe=ae[0],ue=ae[1],de=(0,a.useState)(null),pe=de[0],fe=de[1],be=(0,a.useState)({hour:"00",minute:"00"}),he=be[0],ve=be[1],me=(0,a.useState)({hour:"00",minute:"00"}),je=me[0],xe=me[1];(0,a.useEffect)((function(){if(n){g(n);var e=n.start_datetime;if(e){var t=(0,$.a)(e,{localTimezone:v});fe(null===t||void 0===t?void 0:t.date),xe(t.time)}var r=n.end_datetime;if(r){var i=(0,$.a)(r,{localTimezone:v});ue(null===i||void 0===i?void 0:i.date),ve(null===i||void 0===i?void 0:i.time)}}}),[v,n]);var ge=(0,a.useMemo)((function(){var e=[[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.KJ,{default:!0,size:1.5*S.iI}),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Backfill name"})]},"model_name_detail"),(0,H.jsx)(G.Z,{monospace:!0,onChange:function(e){e.preventDefault(),g((function(n){return ne(ne({},n),{},{name:e.target.value})}))},placeholder:"Name this backfill",value:F},"model_name_input_detail")]];return d.VV===K&&e.push.apply(e,[[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.aw,{default:!0,size:1.5*S.iI}),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Start date and time"})]},"start_time"),(0,H.jsxs)("div",{style:{minHeight:"".concat(5.75*S.iI,"px")},children:[!re&&(0,H.jsx)(G.Z,{monospace:!0,onClick:function(){return ie((function(e){return!e}))},onFocus:function(){return ie(!0)},placeholder:"YYYY-MM-DD HH:MM",value:pe?(0,N.XM)(pe,je,{localTimezone:v}):""}),(0,H.jsx)("div",{style:{width:"400px"},children:(0,H.jsx)(X.Z,{disableEscape:!0,onClickOutside:function(){return ie(!1)},open:re,style:{position:"relative"},children:(0,H.jsx)(J.Z,{localTime:v,selectedDate:pe,selectedTime:je,setSelectedDate:fe,setSelectedTime:xe,topPosition:!0})})})]},"start_time_input")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.aw,{default:!0,size:1.5*S.iI}),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"End date and time"})]},"end_time"),(0,H.jsxs)("div",{style:{minHeight:"".concat(5.75*S.iI,"px")},children:[!ce&&(0,H.jsx)(G.Z,{monospace:!0,onClick:function(){return se((function(e){return!e}))},onFocus:function(){return se(!0)},placeholder:"YYYY-MM-DD HH:MM",value:oe?(0,N.XM)(oe,he,{localTimezone:v}):""}),(0,H.jsx)("div",{style:{width:"400px"},children:(0,H.jsx)(X.Z,{disableEscape:!0,onClickOutside:function(){return se(!1)},open:ce,style:{position:"relative"},children:(0,H.jsx)(J.Z,{localTime:v,selectedDate:oe,selectedTime:he,setSelectedDate:ue,setSelectedTime:ve,topPosition:!0})})})]},"end_time_input")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.Pf,{default:!0,size:1.5*S.iI}),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Interval type"})]},"interval_type"),(0,H.jsx)(Z.Z,{monospace:!0,onChange:function(e){e.preventDefault(),g((function(n){return ne(ne({},n),{},{interval_type:e.target.value})}))},placeholder:"Time spacing between each backfill",value:T,children:d.IB.map((function(e){return(0,H.jsx)("option",{value:e,children:(0,C.kC)(e)},e)}))},"interval_type_input")],[(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(w.Pf,{default:!0,size:1.5*S.iI}),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(O.ZP,{default:!0,children:"Interval units"})]},"interval_units"),(0,H.jsx)(G.Z,{disabled:!T,monospace:!0,onChange:function(e){e.preventDefault(),g((function(n){return ne(ne({},n),{},{interval_units:e.target.value})}))},placeholder:T?"Number of ".concat(T).concat(T!==d.I7.CUSTOM?"s":""," between each backfill"):"Interval type is required",type:"number",value:L},"interval_unit_input")]]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(P.Z,{mb:2,px:S.cd,children:(0,H.jsx)(h.Z,{children:"Settings"})}),(0,H.jsx)(f.Z,{light:!0,short:!0}),(0,H.jsx)(k.Z,{columnFlex:[null,1],rows:e})]})}),[oe,pe,v,T,L,F,K,re,ce,he,je]),Ze=(0,o.Db)(_.ZP.backfills.useUpdate(D),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(){i(),s.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(R,"/backfills/").concat(D))},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),Pe=(0,r.Z)(Ze,2),ye=Pe[0],ke=Pe[1].isLoading,Oe=(0,a.useCallback)((function(){var e=ne(ne({},(0,A.GL)(x,["name"])),{},{end_datetime:null,interval_type:null,interval_units:null,start_datetime:null,variables:(0,M.e7)(V)});return d._7===K||(e.interval_type=T,e.interval_units=L,e.end_datetime=oe&&null!==he&&void 0!==he&&he.hour&&null!==he&&void 0!==he&&he.minute?(0,N.XM)(oe,he,{convertToUtc:v,includeSeconds:!0,localTimezone:v}):null,e.start_datetime=pe&&null!==je&&void 0!==je&&je.hour&&null!==je&&void 0!==je&&je.minute?(0,N.XM)(pe,je,{convertToUtc:v,includeSeconds:!0,localTimezone:v}):null),ye({backfill:e})}),[oe,pe,v,T,L,x,V,K,he,je,ye]),_e=(0,a.useMemo)((function(){return d._7===K?!I:!(oe&&pe&&T&&L)}),[I,oe,pe,T,L,K]);return(0,H.jsxs)(m.Z,{breadcrumbs:[{label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(R,"/backfills"),href:"/pipelines/[pipeline]/backfills"}},{label:function(){return null===x||void 0===x?void 0:x.name},linkProps:{as:"/pipelines/".concat(R,"/backfills/").concat(D),href:"/pipelines/[pipeline]/backfills/[...slug]"}}],errors:t,pageName:E.M.BACKFILLS,pipeline:l,setErrors:c,subheader:(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(p.Z,{disabled:_e,loading:ke,onClick:Oe,outline:!0,primary:!0,children:"Save changes"}),(0,H.jsx)(P.Z,{mr:1}),(0,H.jsx)(p.Z,{linkProps:{href:"/pipelines/[pipeline]/backfills/[...slug]",as:"/pipelines/".concat(R,"/backfills/").concat(D)},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"})]}),title:function(){return"Edit ".concat(null===x||void 0===x?void 0:x.name)},uuid:"backfill/edit",children:[(0,H.jsxs)(P.Z,{p:S.cd,children:[(0,H.jsxs)(P.Z,{mb:2,children:[(0,H.jsx)(h.Z,{children:"Backfill type"}),(0,H.jsx)(O.ZP,{muted:!0,children:"How would you like this pipeline to be backfilled?"})]}),(0,H.jsx)(b.ZP,{children:q.map((function(e){var n=e.label,t=e.description,r=e.uuid,i=K===r,l=K&&!i;return(0,H.jsx)(p.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){ee(r)},children:(0,H.jsx)(Q.U,{selected:i,children:(0,H.jsxs)(b.ZP,{alignItems:"center",children:[(0,H.jsx)(W.Z,{children:(0,H.jsx)("input",{checked:i,type:"radio"})}),(0,H.jsx)(P.Z,{mr:S.cd}),(0,H.jsxs)(W.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,H.jsx)(h.Z,{bold:!0,default:!i&&!l,level:5,muted:!i&&l,children:n()}),(0,H.jsx)(O.ZP,{default:!i&&!l,leftAligned:!0,muted:l,children:t()})]})]})})},r)}))})]}),(0,H.jsx)(P.Z,{mt:5,children:ge})]})},re=t(93808);function ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ce(e){var n=e.backfillId,t=e.pipelineUUID,r=e.subpath,i=(0,a.useState)(null),l=i[0],c=i[1],s=_.ZP.variables.pipelines.list(t,{},{revalidateOnFocus:!1}).data,o=(0,a.useMemo)((function(){return null===s||void 0===s?void 0:s.variables}),[s]),u=_.ZP.pipelines.detail(t,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,d=(0,a.useMemo)((function(){return le(le({},null===u||void 0===u?void 0:u.pipeline),{},{uuid:t})}),[u,t]),p=_.ZP.backfills.detail(n,{include_preview_runs:!0}),f=p.data,b=p.mutate,h=(0,a.useMemo)((function(){return null===f||void 0===f?void 0:f.backfill}),[f]);return"edit"===r?(0,H.jsx)(te,{backfill:h,errors:l,fetchBackfill:b,pipeline:d,setErrors:c,variables:o}):(0,H.jsx)(K,{backfill:h,errors:l,fetchBackfill:b,pipeline:d,setErrors:c,variables:o})}ce.getInitialProps=function(){var e=(0,i.Z)(s().mark((function e(n){var t,i,l,c,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,i=t.pipeline,l=t.slug,!Array.isArray(l)){e.next=4;break}return c=(0,r.Z)(l,2),a=c[0],o=c[1],e.abrupt("return",{backfillId:a,pipelineUUID:i,subpath:o});case 4:return e.abrupt("return",{pipelineUUID:i});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var se=(0,re.Z)(ce)},53664:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills/[...slug]",function(){return t(51532)}])}},function(e){e.O(0,[844,5716,6463,1124,9161,4495,8013,600,4636,8264,6833,5499,5457,4366,632,3943,9774,2888,179],(function(){return n=53664,e(e.s=n);var n}));var n=e.O();_N_E=n}]);