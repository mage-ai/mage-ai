(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5912],{46978:function(t,n,e){"use strict";e.d(n,{Cl:function(){return c},Nk:function(){return a},ZG:function(){return u}});var r=e(38626),i=e(44897),o=e(70515),u=1.5*o.iI,c=1*u+o.iI/2,a=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(t){return"\n      background-color: ".concat((t.theme.interactive||i.Z.interactive).hoverBackground,";\n    ")}))},64657:function(t,n,e){"use strict";e.d(n,{CD:function(){return c},NU:function(){return o},a_:function(){return r},hu:function(){return u}});var r,i=e(44897);!function(t){t.BLOCK_RUNS="block_runs",t.BLOCK_RUNTIME="block_runtime",t.PIPELINE_RUNS="pipeline_runs"}(r||(r={}));var o=[i.Z.accent.warning,i.Z.background.success,i.Z.accent.negative,i.Z.content.active,i.Z.interactive.linkPrimary],u=["cancelled","completed","failed","initial","running"],c=-50},7116:function(t,n,e){"use strict";e.d(n,{Z:function(){return v}});e(82684);var r=e(34376),i=e(85854),o=e(75457),u=e(38276),c=e(30160),a=e(74395),l=e(38626),s=e(44897),d=e(70515),f=l.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-1in9sst-0"})(["padding:","px ","px;"," ",""],d.iI,d.tr,(function(t){return t.selected&&"\n    background-color: ".concat((t.theme.interactive||s.Z.interactive).checked,";\n  ")}),(function(t){return!t.selected&&"\n    cursor: pointer;\n  "})),p=e(64657),h=e(28795),m=e(28598);var v=function(t){var n=t.breadcrumbs,e=t.children,l=t.errors,s=t.monitorType,v=t.pipeline,g=t.setErrors,b=t.subheader,x=(0,r.useRouter)();return(0,m.jsx)(o.Z,{before:(0,m.jsxs)(a.M,{children:[(0,m.jsx)(u.Z,{p:d.cd,children:(0,m.jsx)(i.Z,{level:4,muted:!0,children:"Insights"})}),(0,m.jsx)(f,{onClick:function(t){t.preventDefault(),x.push("/pipelines/[pipeline]/monitors","/pipelines/".concat(null===v||void 0===v?void 0:v.uuid,"/monitors"))},selected:p.a_.PIPELINE_RUNS==s,children:(0,m.jsx)(c.ZP,{children:"Pipeline runs"})}),(0,m.jsx)(f,{onClick:function(t){t.preventDefault(),x.push("/pipelines/[pipeline]/monitors/block-runs","/pipelines/".concat(null===v||void 0===v?void 0:v.uuid,"/monitors/block-runs"))},selected:p.a_.BLOCK_RUNS==s,children:(0,m.jsx)(c.ZP,{children:"Block runs"})}),(0,m.jsx)(f,{onClick:function(t){t.preventDefault(),x.push("/pipelines/[pipeline]/monitors/block-runtime","/pipelines/".concat(null===v||void 0===v?void 0:v.uuid,"/monitors/block-runtime"))},selected:p.a_.BLOCK_RUNTIME==s,children:(0,m.jsx)(c.ZP,{children:"Block runtime"})})]}),breadcrumbs:n,errors:l,pageName:h.M.MONITOR,pipeline:v,setErrors:g,subheader:b,uuid:"pipeline/monitor",children:e})}},74395:function(t,n,e){"use strict";e.d(n,{M:function(){return u},W:function(){return o}});var r=e(38626),i=e(46684),o=34*e(70515).iI,u=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},29584:function(t,n,e){"use strict";var r=e(26304),i=e(82394),o=e(21831),u=(e(82684),e(84969)),c=e(90948),a=e(81354),l=e(67778),s=e(29989),d=e(17066),f=e(29179),p=e(65376),h=e(48072),m=e(98677),v=e(84181),g=e(24903),b=e(55485),x=e(26226),y=e(30160),j=e(94035),Z=e(44897),O=e(42631),k=e(95363),w=e(70515),_=e(79221),P=e(28598),M=["height","width","xAxisLabel","yAxisLabel"];function D(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function S(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?D(Object(e),!0).forEach((function(n){(0,i.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):D(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Y(t){var n=t.backgroundColor,e=t.colors,r=t.data,i=t.getXValue,b=(t.getYValue,t.height),x=t.keys,j=t.margin,w=t.numYTicks,M=t.showLegend,D=t.tooltipLeftOffset,Y=void 0===D?0:D,T=t.width,N=t.xLabelFormat,C=t.yLabelFormat,E=(0,f.Z)(),I=E.hideTooltip,L=E.showTooltip,A=E.tooltipData,F=E.tooltipLeft,B=E.tooltipOpen,H=E.tooltipTop,R=T-(j.left+j.right),K=b-(j.bottom+j.top),U=r.reduce((function(t,n){var e=n,r=x.reduce((function(t,n){return Number(e[n])&&(t+=Number(e[n])),t}),0);return t.push(r),t}),[]),z=(0,m.Z)({domain:r.map(i),padding:.4,range:[0,R],round:!1}),W=(0,v.Z)({domain:[0,Math.max.apply(Math,(0,o.Z)(U))],range:[K,0],round:!0}),X=(0,g.Z)({domain:x,range:e});return(0,P.jsxs)("div",{style:{position:"relative",zIndex:2},children:[(0,P.jsxs)("svg",{height:b,width:T,children:[(0,P.jsx)("rect",{fill:n||Z.Z.background.chartBlock,height:b,rx:14,width:T,x:0,y:0}),(0,P.jsx)(l.Z,{height:K,left:j.left,scale:W,stroke:"black",strokeOpacity:.2,top:j.top,width:R}),(0,P.jsx)(s.Z,{left:j.left,top:j.top,children:(0,P.jsx)(a.Z,{color:X,data:r,keys:x,value:function(t,n){return t[n]||0},x:i,xScale:z,yScale:W,children:function(t){return t.map((function(t){return t.bars.map((function(n){return(0,P.jsx)("rect",{fill:n.color,height:n.height,onMouseLeave:I,onMouseMove:function(t){var e=(0,h.Z)(t),r=n.x+n.width/2+Y;L({tooltipData:n,tooltipLeft:r,tooltipTop:(null===e||void 0===e?void 0:e.y)+10})},width:n.width,x:n.x,y:n.y},"bar-stack-".concat(t.index,"-").concat(n.index))}))}))}})}),(0,P.jsx)(u.Z,{hideTicks:!0,left:j.left,numTicks:w,scale:W,stroke:Z.Z.content.muted,tickFormat:function(t){return C?C(t):(0,_.P5)(t)},tickLabelProps:function(){return{fill:Z.Z.content.muted,fontFamily:k.ry,fontSize:11,textAnchor:"end",transform:"translate(0,2.5)"}},top:j.top}),(0,P.jsx)(c.Z,{hideTicks:!0,left:j.left,scale:z,stroke:Z.Z.content.muted,tickFormat:N,tickLabelProps:function(){return{fill:Z.Z.content.muted,fontFamily:k.ry,fontSize:11,textAnchor:"middle"}},top:K+j.top})]}),M&&(0,P.jsx)("div",{style:{display:"flex",fontSize:"14px",justifyContent:"center",position:"absolute",top:j.top/2-10,width:"100%"},children:(0,P.jsx)(d.Z,{direction:"row",labelMargin:"0 15px 0 0",scale:X})}),B&&A&&(0,P.jsxs)(p.Z,{left:F,style:S(S({},p.j),{},{backgroundColor:Z.Z.background.page,borderRadius:"".concat(O.TR,"px"),padding:".3rem .4rem"}),top:H,children:[(0,P.jsx)(y.ZP,{bold:!0,color:X(A.key),children:A.key}),(0,P.jsx)(y.ZP,{children:A.bar.data[A.key]}),(0,P.jsx)(y.ZP,{children:i(A.bar.data)})]})]})}n.Z=function(t){var n=t.height,e=t.width,i=t.xAxisLabel,o=t.yAxisLabel,u=(0,r.Z)(t,M);return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{style:{height:n,marginBottom:w.iI,width:e},children:[o&&(0,P.jsx)(b.ZP,{alignItems:"center",fullHeight:!0,justifyContent:"center",width:28,children:(0,P.jsx)(j.Z,{children:(0,P.jsx)(y.ZP,{center:!0,muted:!0,small:!0,children:o})})}),(0,P.jsx)("div",{style:{height:n,width:o?0===e?e:e-28:e},children:(0,P.jsx)(x.Z,{children:function(t){var n=t.height,e=t.width;return(0,P.jsx)(Y,S(S({},u),{},{height:n,width:e}))}})}),i&&(0,P.jsx)("div",{style:{paddingLeft:o?36:0,paddingTop:4},children:(0,P.jsx)(y.ZP,{center:!0,muted:!0,small:!0,children:i})})]})})}},94035:function(t,n,e){"use strict";var r=e(38626).default.div.withConfig({displayName:"YAxisLabelContainer",componentId:"sc-qwp21x-0"})(["-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-o-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);white-space:nowrap;"]);n.Z=r},79221:function(t,n,e){"use strict";e.d(n,{P5:function(){return i},Vs:function(){return o}});e(81728);var r=Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:2});function i(t){return"number"!==typeof t?t:t>=1e4?r.format(t):t.toString()}function o(t,n,e){var r,i;if("undefined"===typeof t||"undefined"===typeof n)return 0;var o=null===t||void 0===t||null===(r=t(n,e))||void 0===r||null===(i=r.props)||void 0===i?void 0:i.children;return(Array.isArray(o)?o:[o]).join("").length}},57772:function(t,n,e){"use strict";e.r(n);var r=e(77837),i=e(75582),o=e(82394),u=e(38860),c=e.n(u),a=e(82684),l=e(92083),s=e.n(l),d=e(38626),f=e(29584),p=e(39867),h=e(55485),m=e(85854),v=e(7116),g=e(93808),b=e(44085),x=e(38276),y=e(35686),j=e(44897),Z=e(64657),O=e(46978),k=e(55283),w=e(3917),_=e(86735),P=e(28598);function M(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function D(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?M(Object(e),!0).forEach((function(n){(0,o.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):M(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function S(t){var n=t.pipeline,e=(0,a.useContext)(d.ThemeContext),r=(0,a.useState)(null),u=r[0],c=r[1],l=n.uuid,g=y.ZP.pipelines.detail(l,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,M=(0,a.useMemo)((function(){return D(D({},null===g||void 0===g?void 0:g.pipeline),{},{uuid:l})}),[g,l]),S=y.ZP.pipeline_schedules.pipelines.list(l).data,Y=(0,a.useMemo)((function(){return null===S||void 0===S?void 0:S.pipeline_schedules}),[S]),T=(0,a.useMemo)((function(){return(0,_.HK)(null===M||void 0===M?void 0:M.blocks,(function(t){return t.uuid}))||{}}),[M]),N={pipeline_uuid:l};(u||0===u)&&(N.pipeline_schedule_id=Number(u));var C=y.ZP.monitor_stats.detail("block_run_count",N),E=C.data,I=C.mutate,L=((null===E||void 0===E?void 0:E.monitor_stat)||{}).stats,A=(0,a.useMemo)((function(){return(0,w.Y_)()}),[]),F=(0,a.useMemo)((function(){if(L)return Object.entries(L).reduce((function(t,n){var e=(0,i.Z)(n,2),r=e[0],u=e[1].data,c=A.map((function(t){return D({date:t},u[t]||{})}));return D(D({},t),{},(0,o.Z)({},r,c))}),{})}),[A,L]),B=(0,a.useMemo)((function(){var t=[];return t.push({bold:!0,label:function(){return"Monitors"}}),t}),[]);return(0,P.jsx)(v.Z,{breadcrumbs:B,monitorType:Z.a_.BLOCK_RUNS,pipeline:M,subheader:(0,P.jsx)(h.ZP,{children:(0,P.jsxs)(b.Z,{backgroundColor:j.Z.interactive.defaultBackground,label:"Trigger:",onChange:function(t){var n=t.target.value;"initial"!==n?(c(n),I(n)):(I(),c(null))},value:u||"initial",children:[(0,P.jsx)("option",{value:"initial",children:"All"}),Y&&Y.map((function(t){return(0,P.jsx)("option",{value:t.id,children:t.name},t.id)}))]})}),children:(0,P.jsx)(x.Z,{mx:2,children:F&&Object.entries(F).map((function(t){var n,r,o=(0,i.Z)(t,2),u=o[0],c=o[1];return(0,P.jsxs)(x.Z,{mt:3,children:[(0,P.jsxs)(h.ZP,{alignItems:"center",children:[(0,P.jsx)(x.Z,{mx:1,children:(0,P.jsx)(p.Z,{color:(0,k.qn)(null===(n=T[u])||void 0===n?void 0:n.type,{blockColor:null===(r=T[u])||void 0===r?void 0:r.color,theme:e}).accent,size:O.ZG,square:!0})}),(0,P.jsx)(m.Z,{level:4,children:u})]}),(0,P.jsx)(x.Z,{mt:1,children:(0,P.jsx)(f.Z,{colors:Z.NU,data:c,getXValue:function(t){return t.date},height:200,keys:Z.hu,margin:{bottom:30,left:35,right:0,top:10},tooltipLeftOffset:Z.CD,xLabelFormat:function(t){return s()(t).format("MMM DD")}})})]},u)}))})})}S.getInitialProps=function(){var t=(0,r.Z)(c().mark((function t(n){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.query.pipeline,t.abrupt("return",{pipeline:{uuid:e}});case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),n.default=(0,g.Z)(S)},3917:function(t,n,e){"use strict";e.d(n,{A5:function(){return k},AY:function(){return w},BP:function(){return O},Cs:function(){return S},JX:function(){return Z},OC:function(){return f},Pc:function(){return _},Ro:function(){return P},Tz:function(){return j},XG:function(){return x},Y_:function(){return D},d$:function(){return b},jV:function(){return M},lE:function(){return h},lJ:function(){return Y},n$:function(){return y},n1:function(){return m},s8:function(){return s},vk:function(){return o},yD:function(){return d},yd:function(){return g}});var r,i,o,u=e(82394),c=e(92083),a=e.n(c),l=e(86735);!function(t){t.TODAY="today",t.WEEK="week",t.MONTH="month"}(o||(o={}));var s=(r={},(0,u.Z)(r,o.TODAY,"today"),(0,u.Z)(r,o.WEEK,"last 7 days"),(0,u.Z)(r,o.MONTH,"last 30 days"),r),d=(i={},(0,u.Z)(i,o.TODAY,0),(0,u.Z)(i,o.WEEK,6),(0,u.Z)(i,o.MONTH,29),i),f="YYYY-MM-DD HH:mm:ss",p="YYYY-MM-DD HH:mm",h="YYYY-MM-DD HH:mmZ",m="YYYY-MM-DD",v="MMMM D, YYYY",g=Intl.DateTimeFormat().resolvedOptions().timeZone;function b(t,n){var e=n||{},r=e.dayAgo,i=e.includeSeconds,o=e.utcFormat,u=a()(t),c=p;return o&&(u=u.utc()),r&&(u=u.subtract(1,"days")),i&&(c=f),u.format(c)}function x(t,n){return n?a().utc(t).local().format():t}function y(t){return a().utc(t).local().toDate()}function j(t){var n=b((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==t&&void 0!==t&&t.dateObj?new Date(n):n}function Z(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a().unix(t).format(null!==n&&void 0!==n&&n.withSeconds?f:p)}function O(t,n,e){return a()(t).utc().hours(+n).minutes(+e).format()}function k(t){return a()(t).unix()}function w(t,n,e,r){var i="".concat(t.toISOString().split("T")[0]," ").concat(n,":").concat(e);return r?"".concat(i,":").concat(r):i}function _(t){var n=a().unix(+t).utc();return{date:n.toDate(),hour:String(n.hour()),minute:String(n.minute())}}function P(t,n){var e=a().utc(),r=a().utc();null!==n&&void 0!==n&&n.localTime&&(e=a()().local(),r=a()().local());var i=(e=e.subtract(t,"days")).format(v),o=r.format(v);return null!==n&&void 0!==n&&n.endDateOnly?o:"".concat(i," - ").concat(o)}function M(t,n){var e=null!==n&&void 0!==n&&n.localTime?a()().local():a().utc();if(t===o.WEEK){var r=d[o.WEEK];e=e.subtract(r,"days")}else if(t===o.MONTH){var i=d[o.MONTH];e=e.subtract(i,"days")}return null!==n&&void 0!==n&&n.isoString?e.startOf("day").toISOString():e.startOf("day").format(f)}function D(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n=new Date,e=[],r=0;r<t;r++)e.unshift(n.toISOString().split("T")[0]),n.setDate(n.getDate()-1);return e}function S(){var t=new Date,n=String(t.getMonth()+1).padStart(2,"0"),e=t.getFullYear(),r=a()("".concat(e,"-").concat(n),"YYYY-MM").daysInMonth();return(0,l.m5)(r,1)}function Y(t){return t.padStart(2,"0")}},83542:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/monitors/block-runs",function(){return e(57772)}])}},function(t){t.O(0,[844,9902,5896,2714,9404,6358,9696,8264,1845,5457,9774,2888,179],(function(){return n=83542,t(t.s=n);var n}));var n=t.O();_N_E=n}]);