(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{70543:function(e,n,t){"use strict";t.d(n,{IY:function(){return o},Jf:function(){return l},LR:function(){return i},NR:function(){return s},b7:function(){return r}});var r="edit",i="[ERR_BLOCK_EXISTS]",l={uuid:"All files"},o={uuid:"Files in pipeline"},s=[l,o]},2850:function(e,n,t){"use strict";t.d(n,{M:function(){return o},W:function(){return l}});var r=t(38626),i=t(3055),l=34*t(49125).iI,o=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},56681:function(e,n,t){"use strict";t.d(n,{G7:function(){return y},ZP:function(){return _},u$:function(){return x}});var r=t(75582),i=t(82394),l=t(26304),o=t(32316),s=t(22673),c=t(48952),u=t(86673),a=t(19711),d=t(87815),p=t(49125),f=t(19395),h=t(7715),m=t(28598),v=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=76,Z={uuid:"Run details"},b={uuid:"Dependency tree"},y=[b,Z];function _(e){var n=e.height,t=e.heightOffset,i=e.pipeline,g=e.selectedRun,_=e.selectedTab,P=e.setSelectedTab,O=j({},(0,l.Z)(e,v));g?O.blockStatus=(0,f.IJ)(null===g||void 0===g?void 0:g.block_runs):O.noStatus=!0;var S=(0,h.Kn)(null===g||void 0===g?void 0:g.variables)?j({},null===g||void 0===g?void 0:g.variables):(null===g||void 0===g?void 0:g.variables)||{},I=null===g||void 0===g?void 0:g.event_variables;if(I&&(0,h.Kn)(I)&&!(0,h.Qr)(I))if((0,h.Kn)(S)&&S.hasOwnProperty("event")){var w=(0,h.Kn)(S.event)?S.event:{};S.event=j(j({},w),I)}else S.event=j({},I);var k=[];S&&JSON.stringify(S,null,2).split("\n").forEach((function(e){k.push("    ".concat(e))}));var T=g&&[["Run ID",null===g||void 0===g?void 0:g.id],["Variables",(0,m.jsx)(s.Z,{language:"json",small:!0,source:k.join("\n")},"variable_value")]],E=g&&(0,m.jsx)(u.Z,{pb:p.cd,px:p.cd,children:(0,m.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:T.map((function(e,n){var t=(0,r.Z)(e,2),i=t[0],l=t[1];return[(0,m.jsx)(a.ZP,{monospace:!0,muted:!0,children:i},"key_".concat(n)),(0,m.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:l},"val_".concat(n))]})),uuid:"LogDetail"})}),C=_&&P;return(0,m.jsxs)(m.Fragment,{children:[C&&(0,m.jsx)(u.Z,{py:p.cd,children:(0,m.jsx)(o.Z,{onClickTab:P,selectedTabUUID:null===_||void 0===_?void 0:_.uuid,tabs:y})}),(!C||b.uuid===(null===_||void 0===_?void 0:_.uuid))&&(0,m.jsx)(c.Z,j(j({},O),{},{height:n,heightOffset:(t||0)+(C?x:0),pipeline:i})),Z.uuid===(null===_||void 0===_?void 0:_.uuid)&&E]})}},58122:function(e,n,t){"use strict";t.d(n,{FS:function(){return c},JZ:function(){return a},e7:function(){return d},wx:function(){return u}});var r=t(75582),i=t(82394),l=t(93348);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e){return"string"===typeof e?e:JSON.stringify(e)}function u(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return s(s({},e),{},{value:c(n)})}))}function a(e,n){return n===l.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===l.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function d(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,r.Z)(n,2),l=t[0],o=t[1],c=o;try{c=JSON.parse(o)}catch(u){}return s(s({},e),{},(0,i.Z)({},l,c))}),{}):e}},18025:function(e,n,t){"use strict";t.d(n,{J:function(){return c},U:function(){return s}});var r=t(38626),i=t(23831),l=t(73942),o=t(49125),s=r.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-m7tlau-0"})(["border-radius:","px;border-style:solid;border-width:2px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],l.TR,14*o.iI,o.cd*o.iI,o.cd*o.iI,40*o.iI,(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.interactive||i.Z.interactive).linkPrimary,";\n  ")})),c=r.default.div.withConfig({displayName:"indexstyle__DateSelectionContainer",componentId:"sc-m7tlau-1"})(["border-radius:","px;padding:","px;"," "," ",""],l.n_,o.tr,(function(e){return"\n    background-color: ".concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.absolute&&"\n    position: absolute;\n    z-index: 2;\n    right: 0;\n    top: ".concat(2.5*o.iI,"px;\n  ")}),(function(e){return e.topPosition&&"\n    top: -".concat(42*o.iI,"px;\n  ")}))},51099:function(e,n,t){"use strict";t.d(n,{Et:function(){return p},Q:function(){return d}});t(82684);var r=t(60328),i=t(67971),l=t(86673),o=t(19963),s=t(22341),c=t(73899),u=t(49125),a=t(28598),d=30,p=9;n.ZP=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,p=e.totalPages,f=[],h=t;if(h>p)f=Array.from({length:p},(function(e,n){return n}));else{var m=Math.floor(h/2),v=n-m;n+m>=p?(v=p-h+2,h-=2):n-m<=0?(v=0,h-=2):(h-=4,v=n-Math.floor(h/2)),f=Array.from({length:h},(function(e,n){return n+v}))}return(0,a.jsx)(a.Fragment,{children:p>0&&(0,a.jsxs)(i.ZP,{alignItems:"center",children:[(0,a.jsx)(r.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,a.jsx)(s.Hd,{size:1.5*u.iI,stroke:o.Av})}),!f.includes(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!f.includes(1)&&(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),f.map((function(e){return(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{backgroundColor:e===n&&c.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!f.includes(p-1)&&(0,a.jsxs)(a.Fragment,{children:[!f.includes(p-2)&&(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(p-1)},children:p})},p-1)]}),(0,a.jsx)(l.Z,{ml:1}),(0,a.jsx)(r.Z,{disabled:n===p-1,onClick:function(){return d(n+1)},children:(0,a.jsx)(s.Kw,{size:1.5*u.iI,stroke:o.Av})})]})})}},52769:function(e,n,t){"use strict";t.d(n,{C:function(){return r}});var r="global"},2713:function(e,n,t){"use strict";var r=t(82394),i=t(44495),l=t(67971),o=t(55378),s=t(86673),c=t(19711),u=t(18025),a=t(49125),d=t(24224),p=t(28598);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.selectedDate,t=e.selectedTime,r=e.setSelectedDate,f=e.setSelectedTime,m=e.topPosition;return(0,p.jsxs)(u.J,{absolute:!0,topPosition:m,children:[(0,p.jsx)(i.ZP,{onChange:r,value:n}),(0,p.jsx)(s.Z,{mb:2}),(0,p.jsxs)(l.ZP,{alignItems:"center",children:[(0,p.jsx)(c.ZP,{default:!0,large:!0,children:"Time (UTC):"}),(0,p.jsx)(s.Z,{pr:2}),(0,p.jsx)(o.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{hour:e.target.value})}))},paddingRight:5*a.iI,placeholder:"HH",value:null===t||void 0===t?void 0:t.hour,children:(0,d.m5)(24,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"hour_".concat(e))}))}),(0,p.jsx)(s.Z,{px:1,children:(0,p.jsx)(c.ZP,{bold:!0,large:!0,children:":"})}),(0,p.jsx)(o.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{minute:e.target.value})}))},paddingRight:5*a.iI,placeholder:"MM",value:null===t||void 0===t?void 0:t.minute,children:(0,d.m5)(60,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"minute_".concat(e))}))})]})]})}},22673:function(e,n,t){"use strict";var r=t(82684),i=t(68792),l=t(31811),o=t(38626),s=t(65292),c=t(23831),u=t(2005),a=t(49125),d=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,p=e.showLineNumbers,f=e.small,h=e.source,m=e.wrapLines,v=(0,r.useContext)(o.ThemeContext);function g(e){var r=e.value;return(0,d.jsx)(l.Z,{customStyle:{backgroundColor:(v.background||c.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:u.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,maxWidth:t,paddingBottom:2*a.iI,paddingTop:2*a.iI},language:n,lineNumberStyle:{color:(v.content||c.Z.content).muted},showLineNumbers:p,style:s._4,useInlineStyles:!0,wrapLines:m,children:r})}return(0,d.jsx)(i.D,{components:{code:function(e){var n=e.children;return(0,d.jsx)(g,{value:n})}},children:h})}},65730:function(e,n,t){"use strict";var r,i=t(82394),l=(t(82684),t(64866)),o=t(21764),s=t(67971),c=t(10919),u=t(86673),a=t(19711),d=t(46261),p=t(22341),f=t(49125),h=t(28598);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(r||(r={})),n.Z=function(e){var n,t=e.children,i=e.copiedText,m=e.iconPosition,g=void 0===m?r.LEFT:m,j=e.inverted,x=e.linkProps,Z=e.linkText,b=e.monospace,y=e.muted,_=e.small,P=e.toastMessage,O=e.withCopyIcon;return t?n=(0,h.jsx)("span",{children:t}):O&&(n=(0,h.jsx)(c.Z,v(v({href:"#",inline:!0,muted:y,preventDefault:!0,sameColorAsText:!0,small:_},x),{},{children:(0,h.jsxs)(s.ZP,{alignItems:"center",children:[g===r.LEFT&&(0,h.jsx)(u.Z,{mr:Z?1:0,children:(0,h.jsx)(s.ZP,{alignItems:"center",children:(0,h.jsx)(p.CK,{inverted:j,muted:y,size:2*f.iI})})}),Z&&(0,h.jsx)(a.ZP,{inverted:j,monospace:b,muted:y,small:_,children:Z}),g===r.RIGHT&&(0,h.jsx)(u.Z,{ml:Z?1:0,children:(0,h.jsx)(s.ZP,{alignItems:"center",children:(0,h.jsx)(p.CK,{inverted:j,muted:y})})})]})}))),(0,h.jsx)(d.Z,{block:!0,label:"Copy",size:null,widthFitContent:!0,children:(0,h.jsx)(l.CopyToClipboard,{onCopy:function(){return o.Am.success(P||"Successfully copied to clipboard.",{position:o.Am.POSITION.BOTTOM_RIGHT,toastId:i})},text:i,children:n})})}},32316:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(82684),i=t(60328),l=t(67971),o=t(882),s=t(86673),c=t(19711),u=t(99994),a=t(38626),d=t(49125),p=t(37391),f=a.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],d.cd*d.iI,d.cd*d.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),p.w5),h=t(66653),m=t(28598);var v=function(e){var n=e.allowScroll,t=e.compact,a=e.contained,p=e.noPadding,v=e.onClickTab,g=e.regularSizeText,j=e.selectedTabUUID,x=e.small,Z=e.tabs,b=(0,r.useMemo)((function(){var e=Z.length,n=[];return Z.forEach((function(r,a){var p=r.Icon,f=r.IconSelected,Z=r.label,b=r.uuid,y=b===j,_=y&&f||p,P=Z?Z():b,O=(0,m.jsxs)(l.ZP,{alignItems:"center",children:[_&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_,{default:!y,size:2*d.iI}),(0,m.jsx)(s.Z,{mr:1})]}),(0,m.jsx)(c.ZP,{bold:!0,default:!y,noWrapping:!0,small:!g,children:P})]});a>=1&&e>=2&&n.push((0,m.jsx)("div",{style:{marginLeft:1.5*d.iI}},"spacing-".concat(b))),y?n.push((0,m.jsx)(o.Z,{backgroundGradient:u.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:t||x,onClick:function(e){(0,h.j)(e),v(r)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:x,children:O},b)):n.push((0,m.jsx)("div",{style:{padding:2},children:(0,m.jsx)(i.Z,{borderLess:!0,compact:t||x,default:!0,onClick:function(e){(0,h.j)(e),v(r)},outline:!0,small:x,children:O})},"button-tab-".concat(b)))})),n}),[t,v,j,x,Z]),y=(0,m.jsx)(l.ZP,{alignItems:"center",children:b});return a?y:(0,m.jsx)(f,{allowScroll:n,noPadding:p,children:y})}},70422:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return qe}});var r,i=t(75582),l=t(77837),o=t(82394),s=t(38860),c=t.n(s),u=t(82684),a=t(83455),d=t(34376),p=t(60328),f=t(65730),h=t(34744),m=t(67971),v=t(87372),g=t(10919),j=t(51099),x=t(60547),Z=t(97496),b=t(47409),y=t(93348),_=t(52769),P=t(55378),O=t(86673),S=t(54283),I=t(87815),w=t(55264),k=t(19711),T=t(46261),E=t(82531),C=t(56681),D=t(2850),M=t(86422),N=t(22341),A=t(49125),H=t(59920),U=t(24224);!function(e){e.AWS="aws_event"}(r||(r={}));var F=[{label:function(){return"AWS"},uuid:r.AWS}],L=(0,U.HK)(F,(function(e){return e.uuid})),W=t(58122),Y=t(19395),R=t(42305),z=t(25958),q=t(33766),K=t(7715),V=t(9736),X=t(96510),B=t(66653),J=t(59e3),G=t(28598);function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ee=function(e){var n=e.errors,t=e.fetchPipelineSchedule,r=e.pipeline,l=e.pipelineSchedule,o=e.setErrors,s=e.variables,c=(0,d.useRouter)(),F=(0,V.Ct)(),$=(r||{}).uuid,ee=l||{},ne=ee.id,te=ee.event_matchers,re=ee.name,ie=ee.next_pipeline_run_date,le=ee.schedule_interval,oe=ee.schedule_type,se=ee.settings,ce=ee.sla,ue=ee.start_time,ae=ee.status,de=ee.tags,pe=ee.variables,fe=void 0===pe?{}:pe,he=(0,J.iV)(),me={_limit:30,_offset:30*(null!==he&&void 0!==he&&he.page?he.page:0)};null!==he&&void 0!==he&&he.status&&(me.status=he.status),null!==l&&void 0!==l&&l.global_data_product_uuid&&(me.global_data_product_uuid=null===l||void 0===l?void 0:l.global_data_product_uuid);var ve=E.ZP.pipeline_runs.pipeline_schedules.list(ne,me,{refreshInterval:3e3,revalidateOnFocus:!0}),ge=ve.data,je=ve.mutate,xe=(0,u.useMemo)((function(){return(null===ge||void 0===ge?void 0:ge.pipeline_runs)||[]}),[ge]),Ze=(0,u.useMemo)((function(){var e;return(null===ge||void 0===ge||null===(e=ge.metadata)||void 0===e?void 0:e.count)||[]}),[ge]),be=(0,u.useState)(null),ye=be[0],_e=be[1],Pe=(0,u.useMemo)((function(){var e=null!==he&&void 0!==he&&he.page?he.page:0;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Z.Z,{fetchPipelineRuns:je,onClickRow:function(e){return _e((function(n){var t=xe[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:xe,selectedRun:ye,setErrors:o}),(0,G.jsx)(O.Z,{p:2,children:(0,G.jsx)(j.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),t=Q(Q({},he),{},{page:n>=0?n:0});c.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat($,"/triggers/").concat(ne,"?").concat((0,J.uM)(t)))},page:Number(e),totalPages:Math.ceil(Ze/30)})})]})}),[je,xe,ne,$,he,c,ye,o,Ze]),Oe=(0,u.useState)(C.G7[0]),Se=Oe[0],Ie=Oe[1],we=(0,a.Db)((function(e){return E.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:(0,K.gR)(e,["id"])})}),{onSuccess:function(e){return(0,X.wD)(e,{callback:function(){t()},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),ke=(0,i.Z)(we,2),Te=ke[0],Ee=ke[1].isLoading,Ce=E.ZP.pipeline_triggers.pipelines.list($),De=Ce.data,Me=Ce.mutate,Ne=(0,u.useMemo)((function(){return(0,U.HK)((null===De||void 0===De?void 0:De.pipeline_triggers)||[],(function(e){return e.name}))}),[De]),Ae=(0,u.useMemo)((function(){return!(null===Ne||void 0===Ne||!Ne[null===l||void 0===l?void 0:l.name])}),[l,Ne]),He=(0,a.Db)(E.ZP.pipeline_triggers.pipelines.useCreate($),{onSuccess:function(e){return(0,X.wD)(e,{callback:function(){Me()},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),Ue=(0,i.Z)(He,2),Fe=Ue[0],Le=Ue[1].isLoading,We=(0,u.useMemo)((function(){return y.fq.ACTIVE===ae}),[ae]),Ye=(0,u.useMemo)((function(){var e,n,t={default:!0,size:1.5*A.iI},r=[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.VW,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger type"})]},"trigger_type_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:null===(e=y.Z4[oe])||void 0===e?void 0:e.call(y.Z4)},"trigger_type")],[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.rs,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Status"})]},"trigger_status_label"),(0,G.jsx)(k.ZP,{danger:!We,monospace:!0,success:We,children:ae},"trigger_status")]];if(ce){var i=(0,Y.gU)(ce),o=i.time,s=i.unit,c=1===o?s:"".concat(s,"s");r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.kI,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"SLA"})]},"trigger_sla_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:"".concat(o," ").concat(c)},"trigger_sla")])}if(le&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Pf,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Frequency"})]},"trigger_frequency_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:le.replace("@","")},"trigger_frequency")],[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Next run date"})]},"trigger_next_run_date_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:ie?(0,R.d$)(ie,{includeSeconds:!0,utcFormat:!0}):"N/A"},"trigger_next_run_date")]),ue&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Start date"})]},"trigger_start_date_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:ue},"trigger_start_date")]),y.Xm.API===oe){var u=(0,Y.M8)(l);r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Ae,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"API endpoint"})]},"trigger_api_endpoint_label"),(0,G.jsx)(f.Z,{copiedText:u,children:(0,G.jsx)(k.ZP,{monospace:!0,small:!0,children:u})},"trigger_api_endpoint")])}null!==se&&void 0!==se&&se.skip_if_previous_running&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(T.Z,{default:!0,label:"Skip current run if any previous runs are still in progress",size:1.5*A.iI,widthFitContent:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Skip if running"})]},"trigger_skip_if_running"),(0,G.jsx)(k.ZP,{monospace:!0,children:null===(n=se.skip_if_previous_running)||void 0===n?void 0:n.toString()},"trigger_skip_if_running_label")]);return null!==se&&void 0!==se&&se.allow_blocks_to_fail&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(T.Z,{default:!0,label:"Trigger runs will continue running blocks if other unrelated blocks fail",size:1.5*A.iI,widthFitContent:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Allow blocks to fail"})]},"trigger_allow_blocks_to_fail"),(0,G.jsx)(k.ZP,{monospace:!0,children:se.allow_blocks_to_fail.toString()},"trigger_allow_blocks_to_fail_label")]),(0,G.jsx)(I.Z,{columnFlex:[null,1],rows:r})}),[We,ie,l,le,oe,se,ce,ue,ae]),Re=(0,u.useMemo)((function(){return fe||{}}),[fe]),ze=(0,u.useMemo)((function(){var e,n=[];return(0,K.Qr)(Re)?n=(0,W.wx)(s,(function(e){return e.uuid===_.C})):Object.entries(Re).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],l=t[1];b.sZ!==r&&n.push({uuid:r,value:(0,W.FS)(l)})})),"undefined"!==typeof(n=(0,W.JZ)(n||[],oe))&&null!==(e=n)&&void 0!==e&&e.length?(0,G.jsx)(I.Z,{columnFlex:[null,1],rows:n.map((function(e){var n=e.uuid,t=e.value;return[(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:n},"settings_variable_label_".concat(n)),(0,G.jsx)(k.ZP,{monospace:!0,children:t},"settings_variable_".concat(n))]}))}):null}),[oe,Re,s]),qe=(0,u.useMemo)((function(){var e,n,t=[],i=null===Re||void 0===Re||null===(e=Re[b.sZ])||void 0===e?void 0:e.blocks;return null===r||void 0===r||null===(n=r.blocks)||void 0===n||n.forEach((function(e){var n=e.type,r=e.uuid;if(M.tf.DBT===n){var l,o=(null===i||void 0===i||null===(l=i[r])||void 0===l?void 0:l.configuration)||{},s=o.flags,c=o.prefix,u=o.suffix,a=(0,z.IU)(e).name;(s||c||u)&&t.push({flags:s,prefix:c,suffix:u,uuid:a})}})),"undefined"!==typeof t&&null!==t&&void 0!==t&&t.length?(0,G.jsx)(I.Z,{columnFlex:[1,null],rows:t.map((function(e){var n=e.flags,t=e.prefix,r=e.suffix,i=e.uuid;return[(0,G.jsxs)(k.ZP,{monospace:!0,small:!0,children:[t&&(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:t}),i,r&&(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:r})]},"settings_variable_label_".concat(i)),(0,G.jsx)(k.ZP,{monospace:!0,muted:!0,small:!0,children:n&&n.join(", ")},"settings_variable_".concat(i))]}))}):null}),[r,Re]),Ke=(0,u.useMemo)((function(){return(0,G.jsx)(I.Z,{columnFlex:[null,1],columns:[{uuid:"Provider"},{uuid:"Event"}],rows:null===te||void 0===te?void 0:te.map((function(e,n){var t=e.event_type,r=e.name;return[(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:L[t].label()},"".concat(t,"_").concat(n,"_label")),(0,G.jsx)(k.ZP,{monospace:!0,children:r},"".concat(t,"_").concat(n,"_name"))]}))})}),[te]);return(0,G.jsxs)(x.Z,{afterHidden:!ye,before:(0,G.jsxs)(D.M,{children:[(0,G.jsxs)(O.Z,{mb:A.HN,pt:A.cd,px:A.cd,children:[(0,G.jsxs)(O.Z,{mb:A.cd,children:[y.Xm.TIME===oe&&(0,G.jsx)(N.kO,{size:5*A.iI}),y.Xm.EVENT===oe&&(0,G.jsx)(N.Jp,{size:5*A.iI}),y.Xm.API===oe&&(0,G.jsx)(N.Bf,{size:5*A.iI}),!oe&&(0,G.jsx)(N.VW,{size:5*A.iI})]}),(0,G.jsx)(v.Z,{children:re})]}),(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),Ye,(null===te||void 0===te?void 0:te.length)>=1&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Events"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),Ke]}),ze&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Runtime variables"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),ze]}),qe&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"dbt runtime settings"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),qe]}),(null===de||void 0===de?void 0:de.length)>=1&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Tags"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),(0,G.jsx)(O.Z,{mt:A.cd,px:A.cd,children:(0,G.jsx)(w.Z,{tags:null===de||void 0===de?void 0:de.map((function(e){return{uuid:e}}))})})]}),(0,G.jsx)(O.Z,{my:A.HN,children:(0,G.jsxs)(O.Z,{px:A.cd,children:[(0,G.jsxs)(v.Z,{level:5,children:[Ae&&"Trigger exists in code",!Ae&&"Store trigger in code"]}),(0,G.jsx)(O.Z,{mt:1,children:(0,G.jsxs)(k.ZP,{default:!0,children:["Save or update the trigger and its settings in the pipeline\u2019s metadata and version control the trigger using Git. For more information, please read the ",(0,G.jsx)(g.Z,{href:"https://docs.mage.ai/guides/triggers/configure-triggers-in-code",openNewWindow:!0,children:"documentation"}),"."]})}),(0,G.jsxs)(O.Z,{mt:A.cd,children:[!De&&(0,G.jsx)(S.Z,{inverted:!0}),De&&(0,G.jsxs)(p.Z,{disabled:!(null!==l&&void 0!==l&&l.id),loading:Le,onClick:function(){Fe({pipeline_trigger:{pipeline_schedule_id:null===l||void 0===l?void 0:l.id}})},secondary:!0,children:[Ae&&"Update trigger in code",!Ae&&"Save trigger in code"]})]})]})})]}),beforeWidth:D.W,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat($,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return re},linkProps:{as:"/pipelines/".concat($,"/triggers/").concat(ne),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],buildSidekick:function(e){return(0,C.ZP)(Q(Q({},e),{},{selectedRun:ye,selectedTab:Se,setSelectedTab:Ie}))},errors:n,pageName:H.M.TRIGGERS,pipeline:r,setErrors:o,subheader:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(p.Z,{beforeIcon:We?(0,G.jsx)(N.dz,{size:2*A.iI}):(0,G.jsx)(N.Py,{inverted:!F,size:2*A.iI}),danger:We&&!F,loading:Ee,onClick:function(e){(0,B.j)(e),Te({id:ne,status:We?y.fq.INACTIVE:y.fq.ACTIVE})},outline:!0,success:!We&&!F,children:We?"Pause trigger":"Start trigger"}),(0,G.jsx)(O.Z,{mr:A.cd}),!F&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat($,"/triggers/").concat(ne,"/edit"),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Edit trigger"}),(0,G.jsx)(O.Z,{mr:A.cd})]}),(0,G.jsxs)(P.Z,{compact:!0,defaultColor:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?c.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat($,"/triggers/").concat(ne)):(0,q.u7)({page:0,status:e.target.value})},paddingRight:4*A.iI,placeholder:"Select run status",value:(null===he||void 0===he?void 0:he.status)||"all",children:[(0,G.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),b.IK.map((function(e){return(0,G.jsx)("option",{value:e,children:b.Do[e]},e)}))]})]}),title:function(){return re},uuid:"triggers/detail",children:[(0,G.jsx)(O.Z,{mt:A.cd,px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Runs for this trigger"})}),(0,G.jsx)(h.Z,{light:!0,mt:A.cd,short:!0}),Pe]})},ne=t(21831),te=t(20026),re=t.n(te),ie=t(92083),le=t.n(ie),oe=t(21764),se=t(2713),ce=t(38341),ue=t(47999),ae=t(22673),de=t(38626),pe=t(16634),fe=t(82944),he=t(44162);function me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?me(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ge=function(e){var n=e.blocks,t=e.updateVariables,r=e.variables,i=(0,u.useContext)(de.ThemeContext),l=(0,u.useCallback)((function(e,n){return t((function(){var t=(null===r||void 0===r?void 0:r.__mage_variables)||{},i=(null===t||void 0===t?void 0:t.blocks)||{},l=i[e]||{},s=(null===l||void 0===l?void 0:l.configuration)||{};return ve(ve({},r),{},{__mage_variables:ve(ve({},t),{},{blocks:ve(ve({},i),{},(0,o.Z)({},e,ve(ve({},l),{},{configuration:ve(ve({},s),n)})))})})}))}),[t,r]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(v.Z,{children:"dbt runtime settings"}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(I.Z,{columnFlex:[1,null,null,null],columns:[{uuid:"Block"},{uuid:"Flags"},{uuid:"Prefix"},{uuid:"Suffix"}],compact:!0,rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,o,s=e.type,c=e.uuid,u=(0,z.IU)(e).name,a=(0,he.qn)(s,{blockColor:e.color,theme:i}).accent,d=null===r||void 0===r||null===(n=r.__mage_variables)||void 0===n||null===(t=n.blocks)||void 0===t||null===(o=t[c])||void 0===o?void 0:o.configuration,p=d||{},f=p.prefix,h=p.suffix,v=(null===d||void 0===d?void 0:d.flags)||[],g=!(null===v||void 0===v||!v.includes(z.Dy));return[(0,G.jsx)(T.Z,{block:!0,label:(0,G.jsx)(k.ZP,{monospace:!0,small:!0,children:c}),size:null,widthFitContent:!0,children:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(pe.Z,{color:a,size:1.5*A.iI,square:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsxs)(k.ZP,{monospace:!0,small:!0,children:[f&&(0,G.jsx)(k.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:f}),u,h&&(0,G.jsx)(k.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:h})]})]})},"uuid-".concat(c)),(0,G.jsx)(m.ZP,{alignItems:"center",children:(0,G.jsx)(ce.Z,{checked:g,label:z.Dy,monospace:!0,onClick:function(){return l(c,{flags:g?(0,U.Od)(v,(function(e){return z.Dy===e})):v.concat(z.Dy)})},small:!0})},"flags-".concat(c)),(0,G.jsx)(fe.Z,{compact:!0,monospace:!0,onChange:function(e){return l(c,{prefix:e.target.value})},placeholder:"N+, +",small:!0,value:f,width:10*A.iI},"prefix-".concat(c)),(0,G.jsx)(fe.Z,{compact:!0,monospace:!0,onChange:function(e){return l(c,{suffix:e.target.value})},placeholder:"+, +N",small:!0,value:h,width:10*A.iI},"suffix-".concat(c))]}))})})]})},je=t(93461),xe=t(26304),Ze=t(23831),be=t(2005),ye=t(31012),_e=["children","large","lineHeight","ordered"];function Pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pe(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Se=(0,de.css)([""," "," "," "," "," "," "," "," "," ",""],(function(e){return!e.muted&&"\n    color: ".concat((e.theme.content||Ze.Z.content).default,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.content||Ze.Z.content).muted,";\n  ")}),(function(e){return e.inverted&&"\n    color: ".concat((e.theme.content||Ze.Z.content).inverted,";\n  ")}),(function(e){return e.color&&"\n    color: ".concat(e.color,";\n  ")}),(function(e){return!e.monospace&&"\n    font-family: ".concat(be.ry,";\n  ")}),(function(e){return e.monospace&&"\n    font-family: ".concat(be.Vp,";\n  ")}),(function(e){return e.large&&"\n    ".concat(ye.x_,"\n  ")}),(function(e){return!e.large&&!e.small&&"\n    ".concat(ye.i3,"\n  ")}),(function(e){return e.small&&"\n    ".concat(ye.J5,"\n  ")}),(function(e){return e.lineHeight&&"\n    line-height: ".concat(e.lineHeight,"px !important;\n  ")})),Ie=de.default.ul.withConfig({displayName:"List__UnorderedListStyle",componentId:"sc-1f6yhbi-0"})(["",""],Se),we=de.default.ol.withConfig({displayName:"List__OrderedListStyle",componentId:"sc-1f6yhbi-1"})(["",""],Se),ke=de.default.li.withConfig({displayName:"List__ListItemStyle",componentId:"sc-1f6yhbi-2"})(["",""],(function(e){return e.large&&e.marginTop&&"\n    margin-top: ".concat(1*A.iI,"px;\n  ")}));var Te=function(e){var n=e.children,t=e.large,r=e.lineHeight,i=e.ordered,l=(0,xe.Z)(e,_e),o=i?we:Ie;return(0,G.jsx)(o,Oe(Oe({large:t,lineHeight:r},l),{},{children:u.Children.map(n,(function(e,n){var r;return(0,G.jsx)(ke,Oe(Oe({large:t,marginTop:n>=1},l),{},{children:u.cloneElement(e)}),(null===(r=e.props)||void 0===r?void 0:r.key)||n)}))}))},Ee=t(98781),Ce=t(18190),De=t(70902),Me=t(18025),Ne=t(90211);function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function He(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ue=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:y.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:y.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:y.Xm.API}];return e?n.slice(0,1):n};var Fe=function(e){var n=e.errors,t=e.fetchPipelineSchedule,r=e.pipeline,l=e.pipelineSchedule,s=e.setErrors,c=e.variables,j=(0,d.useRouter)(),Z=null===r||void 0===r?void 0:r.uuid,S=null===l||void 0===l?void 0:l.id,w=(null===r||void 0===r?void 0:r.type)===Ee.qL.STREAMING,T=(0,u.useState)([]),C=T[0],D=T[1],L=(0,u.useState)(!1),R=L[0],z=L[1],q=(0,u.useState)(!1),V=q[0],B=q[1],J=(0,u.useState)(),$=J[0],Q=J[1],ee=(0,u.useState)({}),te=ee[0],ie=ee[1],de=(0,u.useState)(null),pe=de[0],he=de[1],me=(0,u.useState)(!1),ve=me[0],xe=me[1],Ze=(0,u.useState)(null),be=Ze[0],ye=Ze[1],_e=(0,u.useMemo)((function(){return(0,W.wx)(c,(function(e){return e.uuid===_.C}))}),[c]),Pe=pe||{},Oe=Pe.name,Se=Pe.schedule_interval,Ie=Pe.schedule_type,we=Pe.settings,ke=void 0===we?{}:we,Ae=(Pe.sla,Pe.start_time),Fe=Pe.tags,Le=Pe.variables,We=void 0===Le?{}:Le;(0,u.useEffect)((function(){ke&&Q(ke)}),[ke]);var Ye=(0,u.useState)(null),Re=Ye[0],ze=Ye[1],qe=(0,u.useState)({hour:"00",minute:"00"}),Ke=qe[0],Ve=qe[1],Xe=(0,u.useState)({dayOfMonth:null,dayOfWeek:null,hour:null,minute:null,second:null}),Be=Xe[0],Je=Xe[1],Ge=E.ZP.event_rules.detail(y.Xm.EVENT===Ie?"aws":null).data,$e=(0,u.useMemo)((function(){var e;return(null===Ge||void 0===Ge||null===(e=Ge.event_rule)||void 0===e?void 0:e.rules)||[]}),[Ge]),Qe=(0,u.useMemo)((function(){return(0,U.HK)($e,(function(e){return e.name}))}),[$e]),en=(0,a.Db)(E.ZP.pipeline_schedules.useUpdate(S),{onSuccess:function(e){return(0,X.wD)(e,{callback:function(){t(),j.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(Z,"/triggers/").concat(S))},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),nn=(0,i.Z)(en,2),tn=nn[0],rn=nn[1].isLoading,ln=(0,u.useMemo)((function(){return We||{}}),[We]);(0,u.useEffect)((function(){if(Ae){var e=Ae.split(" ")[1];ze((0,Y.eI)(Ae)),Ve({hour:e.substring(0,2),minute:e.substring(3,5)});var n=le()(Ae).utc();Je({dayOfMonth:n.date(),dayOfWeek:n.day(),hour:n.hours(),minute:n.minutes(),second:n.seconds()})}else{var t=new Date;ze(t),Ve({hour:String(t.getUTCHours()).padStart(2,"0"),minute:String(t.getUTCMinutes()).padStart(2,"0")})}}),[Ae]),(0,u.useEffect)((function(){ln&&Object.keys(ln).length>0&&z(!0)}),[ln]),(0,u.useEffect)((function(){ie(R?null===_e||void 0===_e?void 0:_e.reduce((function(e,n){var t=n.uuid,r=n.value;return He(He({},e),{},(0,o.Z)({},t,ln[t]||r))}),{}):null)}),[_e,R,ln]);var on=(0,u.useMemo)((function(){return Se&&!Object.values(y.U5).includes(Se)}),[Se]),sn=(0,u.useMemo)((function(){return on&&be?re().toString(be,{throwExceptionOnParseError:!1}):""}),[be,on]),cn=(0,u.useMemo)((function(){return null===sn||void 0===sn?void 0:sn.toLowerCase().includes("error")}),[sn]);(0,u.useEffect)((function(){if(l&&!pe){D(l.event_matchers),(null===l||void 0===l?void 0:l.schedule_interval)&&!Object.values(y.U5).includes(null===l||void 0===l?void 0:l.schedule_interval)?(ye(null===l||void 0===l?void 0:l.schedule_interval),he(He(He({},l),{},{schedule_interval:"custom"}))):he(w?He(He({},l),{},{schedule_interval:y.U5.ONCE}):l);var e=l.sla;if(e){B(!0);var n=(0,Y.gU)(e),t=n.time,r=n.unit;he((function(e){return He(He({},e),{},{slaAmount:t,slaUnit:r})}))}}}),[w,l,pe,Se]);var un=(0,u.useMemo)((function(){return!(null===$||void 0===$||!$.landing_time_enabled)}),[$]),an=(0,u.useMemo)((function(){return y.Xm.TIME!==Ie||![y.U5.DAILY,y.U5.HOURLY,y.U5.MONTHLY,y.U5.WEEKLY].includes(Se)}),[Se,Ie]),dn=(0,u.useMemo)((function(){return un&&!an}),[an,un]),pn=(0,u.useCallback)((function(){var e=He(He({},(0,K.GL)(pe,["name","schedule_type","tags"])),{},{event_matchers:[],schedule_interval:null,start_time:null,variables:(0,W.e7)(te)});if(dn){var n=Be.dayOfMonth,t=Be.dayOfWeek,r=Be.hour,i=Be.minute,o=Be.second,s=le()("2023-07-01").utc();(0,Ne.HW)(n)&&(s=s.date(n)),(0,Ne.HW)(t)&&(s=s.day(t)),(0,Ne.HW)(r)&&(s=s.hours(r)),(0,Ne.HW)(i)&&(s=s.minutes(i)),(0,Ne.HW)(o)&&(s=s.seconds(o)),e.schedule_interval=on?be:pe.schedule_interval,e.start_time=s.toISOString()}else y.Xm.EVENT===pe.schedule_type?e.event_matchers=C:(e.schedule_interval=on?be:pe.schedule_interval,e.start_time=Re&&null!==Ke&&void 0!==Ke&&Ke.hour&&null!==Ke&&void 0!==Ke&&Ke.minute?"".concat(Re.toISOString().split("T")[0]," ").concat(null===Ke||void 0===Ke?void 0:Ke.hour,":").concat(null===Ke||void 0===Ke?void 0:Ke.minute,":00"):null);if(V){var c=null===pe||void 0===pe?void 0:pe.slaAmount,u=null===pe||void 0===pe?void 0:pe.slaUnit;if(!c||isNaN(c)||!u)return void oe.Am.error("Please enter a valid SLA",{position:oe.Am.POSITION.BOTTOM_RIGHT,toastId:"sla_error"});e.sla=(0,Y.vJ)(c,u)}else null!==l&&void 0!==l&&l.sla&&(e.sla=0);e.settings=$,tn({pipeline_schedule:e})}),[be,Re,V,C,on,Be,l,te,pe,$,dn,Ke,tn]),fn=(0,u.useMemo)((function(){if(null===l||void 0===l||!l.runtime_average)return"Trigger doesn\u2019t have enough history to estimate runtime.";var e=Number(null===l||void 0===l?void 0:l.runtime_average),n=Math.max(Math.floor(e/3600),0),t=Math.max(Math.floor((e-60*n*60)/60),0),r=Math.max(Math.floor(e-(60*n*60+60*t)),0),i=[];return n>=1&&i.push((0,Ne._6)("hour",n,!0)),t>=1&&i.push((0,Ne._6)("minute",t,!0)),r>=1&&i.push((0,Ne._6)("second",r,!0)),i.join(" ")}),[l]),hn=(0,u.useMemo)((function(){if(!dn)return null;var e=[(0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Minute"})}),(0,G.jsxs)(P.Z,{compact:!0,monospace:!0,onChange:function(e){Je((function(n){return He(He({},n),{},{minute:e.target.value})}))},value:(null===Be||void 0===Be?void 0:Be.minute)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(60).map((function(e,n){return(0,G.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Minute"),(0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Second"})}),(0,G.jsxs)(P.Z,{compact:!0,monospace:!0,onChange:function(e){Je((function(n){return He(He({},n),{},{second:e.target.value})}))},value:(null===Be||void 0===Be?void 0:Be.second)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(60).map((function(e,n){return(0,G.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Second")];return[y.U5.DAILY,y.U5.MONTHLY,y.U5.WEEKLY].includes(Se)&&e.unshift((0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Hour"})}),(0,G.jsxs)(P.Z,{compact:!0,monospace:!0,onChange:function(e){Je((function(n){return He(He({},n),{},{hour:e.target.value})}))},value:(null===Be||void 0===Be?void 0:Be.hour)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(24).map((function(e,n){return(0,G.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Hour")),y.U5.WEEKLY===Se?e.unshift((0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Day of the week"})}),(0,G.jsxs)(P.Z,{compact:!0,monospace:!0,onChange:function(e){Je((function(n){return He(He({},n),{},{dayOfWeek:e.target.value})}))},value:(null===Be||void 0===Be?void 0:Be.dayOfWeek)||"",children:[(0,G.jsx)("option",{value:""}),(0,G.jsx)("option",{value:6,children:"Sunday"}),(0,G.jsx)("option",{value:0,children:"Monday"}),(0,G.jsx)("option",{value:1,children:"Tuesday"}),(0,G.jsx)("option",{value:2,children:"Wednesday"}),(0,G.jsx)("option",{value:3,children:"Thursday"}),(0,G.jsx)("option",{value:4,children:"Friday"}),(0,G.jsx)("option",{value:5,children:"Saturday"})]})]},"Day of the week")):y.U5.MONTHLY===Se&&e.unshift((0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Day of the month"})}),(0,G.jsxs)(P.Z,{compact:!0,monospace:!0,onChange:function(e){Je((function(n){return He(He({},n),{},{dayOfMonth:e.target.value})}))},value:(null===Be||void 0===Be?void 0:Be.dayOfMonth)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(31).map((function(e,n){return(0,G.jsx)("option",{value:n+1,children:n+1>=10?String(n+1):"0".concat(n+1)},n+1)}))]})]},"Day of the month")),(0,G.jsx)(m.ZP,{children:e})}),[Be,Se,dn]),mn=(0,u.useMemo)((function(){var e=[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.KJ,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger name"})]},"trigger_name_detail"),(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:Oe},"trigger_name_input_detail")],[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Pf,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,G.jsxs)("div",{children:[(0,G.jsxs)(P.Z,{monospace:!0,onChange:function(e){e.preventDefault();var n=e.target.value;he((function(e){return He(He({},e),{},{schedule_interval:n})}))},placeholder:"Choose the frequency to run",value:Se,children:[Object.values(y.U5).map((function(e){return(0,G.jsx)("option",{value:e,children:e.substring(1)},e)})),(0,G.jsx)("option",{value:"custom",children:"custom"},"custom")]}),(0,G.jsx)(O.Z,{mt:1,p:1,children:(0,G.jsxs)(k.ZP,{muted:!0,small:!0,children:["If you don\u2019t see the frequency option you need, select ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:"custom"})," and enter CRON syntax."]})})]},"frequency_input")]];return e.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.rs,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Enable landing time"})]},"frequency"),(0,G.jsxs)("div",{children:[(0,G.jsx)(De.Z,{checked:un,disabled:an,onCheck:function(){Q((function(e){return He(He({},e),{},{landing_time_enabled:!un})}))}}),(0,G.jsxs)(O.Z,{mt:1,p:1,children:[an&&(0,G.jsxs)(k.ZP,{muted:!0,small:!0,children:["In order to enable landing time, the trigger\u2019s frequency must be ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.HOURLY}),", ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.DAILY}),", ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.WEEKLY}),", or ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.MONTHLY}),"."]}),!an&&(0,G.jsx)(k.ZP,{muted:!0,small:!0,children:"Instead of starting at a specific time, this trigger will schedule pipeline runs at a time where it will finish by the specified time below."})]})]},"frequency_input")]),dn&&e.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Pf,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Average runtime"})]},"runtime_average"),(0,G.jsx)(m.ZP,{alignItems:"center",style:{minHeight:"".concat(5.75*A.iI,"px")},children:(0,G.jsx)(k.ZP,{monospace:!0,children:fn})},"runtime_average_value")]),e.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsxs)(k.ZP,{default:!0,children:[dn&&"Pipeline complete by",!dn&&"Start date and time"]})]},"start_time"),dn?hn:(0,G.jsxs)("div",{style:{minHeight:"".concat(5.75*A.iI,"px")},children:[!ve&&(0,G.jsx)(fe.Z,{monospace:!0,onClick:function(){return xe((function(e){return!e}))},placeholder:"YYYY-MM-DD HH:MM",value:Re?"".concat(Re.toISOString().split("T")[0]," ").concat(null===Ke||void 0===Ke?void 0:Ke.hour,":").concat(null===Ke||void 0===Ke?void 0:Ke.minute):""}),(0,G.jsx)("div",{style:{width:"400px"},children:(0,G.jsx)(ue.Z,{disableEscape:!0,onClickOutside:function(){return xe(!1)},open:ve,style:{position:"relative"},children:(0,G.jsx)(se.Z,{selectedDate:Re,selectedTime:Ke,setSelectedDate:ze,setSelectedTime:Ve,topPosition:!0})})})]},"start_time_input")]),w&&e.splice(1,1),on&&e.splice(2,0,[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.EK,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Cron expression"})]},"cron_expression"),(0,G.jsxs)("div",{children:[(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),ye(e.target.value)},placeholder:"* * * * *",value:be}),(0,G.jsxs)(O.Z,{mt:1,p:1,children:[(0,G.jsx)(k.ZP,{monospace:!0,xsmall:!0,children:"[minute] [hour] [day(month)] [month] [day(week)]"}),be?(0,G.jsx)(k.ZP,{danger:cn,muted:!0,small:!0,children:cn?"Invalid cron expression. Please check the cron syntax.":(0,G.jsxs)(G.Fragment,{children:['"',sn,'"']})}):null]})]},"cron_expression_input")]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{mb:2,px:A.cd,children:(0,G.jsx)(v.Z,{children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(0,G.jsx)(I.Z,{columnFlex:[null,1],rows:e})]})}),[cn,be,Re,on,w,an,un,hn,Oe,sn,fn,Se,ve,dn,Ke]),vn=(0,u.useCallback)((function(e,n){D((function(t){return Object.entries(n).forEach((function(n){var r=(0,i.Z)(n,2),l=r[0],o=r[1];t[e][l]=o})),(0,ne.Z)(t)}))}),[D]),gn=(0,u.useMemo)((function(){return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{mb:A.cd,px:A.cd,children:(0,G.jsx)(v.Z,{children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(0,G.jsx)(I.Z,{columnFlex:[null,1],rows:[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.KJ,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger name"})]},"trigger_name_event"),(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:Oe},"trigger_name_input_event")]]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Events"}),(0,G.jsxs)(k.ZP,{muted:!0,children:["Add 1 or more event that will trigger this pipeline to run.",(0,G.jsx)("br",{}),"If you add more than 1 event, this pipeline will trigger if any of the events are received."]}),(0,G.jsxs)(O.Z,{mt:A.Mq,children:[(0,G.jsx)(k.ZP,{bold:!0,large:!0,children:"AWS events"}),(0,G.jsxs)(k.ZP,{muted:!0,children:["In order to retrieve all the possible AWS events you can trigger your pipeline from,",(0,G.jsx)("br",{}),"you\u2019ll need to set 3 environment variables (",(0,G.jsx)(g.Z,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html",openNewWindow:!0,underline:!0,children:"more info here"}),"):"]}),(0,G.jsx)(O.Z,{mt:1,children:(0,G.jsxs)(Te,{monospace:!0,ordered:!0,children:[(0,G.jsx)(k.ZP,{monospace:!0,children:"AWS_REGION_NAME"}),(0,G.jsx)(k.ZP,{monospace:!0,children:"AWS_ACCESS_KEY_ID"}),(0,G.jsx)(k.ZP,{monospace:!0,children:"AWS_SECRET_ACCESS_KEY"})]})})]})]}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(null===C||void 0===C?void 0:C.length)>=1&&(0,G.jsx)(I.Z,{alignTop:!0,columnFlex:[1,1,2,null],columns:[{uuid:"Provider"},{uuid:"Event"},{uuid:"Pattern"},{label:function(){return""},uuid:"delete"}],rows:null===C||void 0===C?void 0:C.map((function(e,n){var t=e.event_type,r=e.name,i=e.pattern,l=e.id||"".concat(t,"-").concat(r,"-").concat(n,"-").concat(JSON.stringify(i)),o=[];return i&&JSON.stringify(i,null,2).split("\n").forEach((function(e){o.push("    ".concat(e))})),[(0,G.jsx)(P.Z,{monospace:!0,onChange:function(e){return vn(n,{event_type:e.target.value})},placeholder:"Event provider",value:t||"",children:F.map((function(e){var n=e.label,t=e.uuid;return(0,G.jsx)("option",{value:t,children:n()},t)}))},"event-provider-".concat(l)),(0,G.jsx)(P.Z,{monospace:!0,onChange:function(e){var t,r=e.target.value,i=null===(t=Qe[r])||void 0===t?void 0:t.event_pattern;vn(n,{name:r,pattern:i?JSON.parse(i):null})},placeholder:"Event name",value:r,children:$e.map((function(e){var n=e.name;return(0,G.jsx)("option",{value:n,children:n},n)}))},"event-name-".concat(l)),i&&(0,G.jsx)(ae.Z,{language:"json",small:!0,source:o.join("\n")}),(0,G.jsx)(p.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return D((function(e){return(0,U.oM)(e,n)}))},children:(0,G.jsx)(N.rF,{default:!0,size:2*A.iI})},"remove_event")]}))}),(0,G.jsx)(O.Z,{p:A.cd,children:(0,G.jsx)(p.Z,{beforeIcon:(0,G.jsx)(N.mm,{size:2*A.iI}),onClick:function(){return D((function(e){return e.concat({})}))},outline:!0,children:"Add event matcher"})})]})}),[C,$e,Qe,Oe,vn]),jn=(0,u.useMemo)((function(){var e=(0,Y.M8)(l);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{mb:A.cd,px:A.cd,children:(0,G.jsx)(v.Z,{children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(0,G.jsx)(I.Z,{columnFlex:[null,1],rows:[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.KJ,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger name"})]},"trigger_name_api"),(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:Oe},"trigger_name_input_api")]]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Endpoint"}),(0,G.jsxs)(k.ZP,{muted:!0,children:["Make a ",(0,G.jsx)(k.ZP,{bold:!0,inline:!0,monospace:!0,children:"POST"})," request to the following endpoint:"]}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(f.Z,{copiedText:e,linkText:e,monospace:!0,withCopyIcon:!0})})]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Payload"}),(0,G.jsx)(k.ZP,{muted:!0,children:"You can optionally include runtime variables in your request payload. These runtime variables are accessible from within each pipeline block."}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(f.Z,{copiedText:'{\n  "pipeline_run": {\n    "variables": {\n      "key1": "value1",\n      "key2": "value2"\n    }\n  }\n}\n',withCopyIcon:!0,children:(0,G.jsx)(ae.Z,{language:"json",small:!0,source:'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\n'})})})]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Sample cURL command"}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(ae.Z,{language:"bash",small:!0,source:"\n    curl -X POST ".concat(e,' \\\n      --header \'Content-Type: application/json\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n')})})]})]})}),[Oe,l]),xn=!Ie||y.Xm.TIME===Ie&&!(w&&Re||!w&&Re&&Se)||y.Xm.EVENT===Ie&&(!(null!==C&&void 0!==C&&C.length)||!C.every((function(e){var n=e.event_type,t=e.name;return n&&t}))),Zn=(0,u.useMemo)((function(){var e;return(null===r||void 0===r||null===(e=r.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return M.tf.DBT===n})))||[]}),[r]),bn=(0,u.useMemo)((function(){return(0,G.jsxs)(O.Z,{p:A.cd,children:[(0,G.jsxs)(O.Z,{mb:A.HN,children:[(0,G.jsx)(v.Z,{children:"Pipeline run settings"}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(m.ZP,{alignItems:"center",children:(0,G.jsx)(ce.Z,{checked:null===$||void 0===$?void 0:$.allow_blocks_to_fail,label:"Keep running pipeline even if blocks fail",onClick:function(){return Q((function(e){return He(He({},e),{},{allow_blocks_to_fail:!(null!==$&&void 0!==$&&$.allow_blocks_to_fail)})}))}})})}),y.Xm.TIME===Ie&&(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(m.ZP,{alignItems:"center",children:(0,G.jsx)(ce.Z,{checked:null===$||void 0===$?void 0:$.skip_if_previous_running,label:"Skip run if previous run still in progress",onClick:function(){return Q((function(e){return He(He({},e),{},{skip_if_previous_running:!(null!==$&&void 0!==$&&$.skip_if_previous_running)})}))}})})}),(0,G.jsxs)(O.Z,{mt:A.Mq,children:[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(O.Z,{mr:2,children:(0,G.jsx)(De.Z,{checked:V,onCheck:function(e){B(e),e||he((function(e){return He(He({},e),{},{slaAmount:0})}))}})}),(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:"Configure trigger SLA"})]}),V&&(0,G.jsx)(I.Z,{columnFlex:[null,1],rows:[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"SLA"})]},"sla_detail"),(0,G.jsxs)(m.ZP,{children:[(0,G.jsx)(je.Z,{flex:1,children:(0,G.jsx)(fe.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{slaAmount:e.target.value})}))},placeholder:"Time",value:null===pe||void 0===pe?void 0:pe.slaAmount})}),(0,G.jsx)(je.Z,{flex:1,children:(0,G.jsx)(P.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{slaUnit:e.target.value})}))},placeholder:"Select time unit",small:!0,value:null===pe||void 0===pe?void 0:pe.slaUnit,children:Object.keys(Y.tL).map((function(e){return(0,G.jsx)("option",{value:e,children:"".concat(e,"(s)")},e)}))})})]},"sla_input_detail")]]})]})]}),(0,G.jsxs)(O.Z,{mb:A.HN,children:[(0,G.jsx)(v.Z,{children:"Runtime variables"}),!(0,K.Qr)(_e)&&(0,G.jsxs)(O.Z,{mt:A.Mq,children:[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(O.Z,{mr:2,children:(0,G.jsx)(De.Z,{checked:R,onCheck:z})}),(0,G.jsx)(k.ZP,{monospace:!0,muted:!0,children:"Overwrite global variables"})]}),R&&te&&Object.entries(te).length>0&&(0,G.jsx)(O.Z,{mt:1,children:(0,G.jsx)(I.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(te).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],l=t[1];return b.sZ===r?e:e.concat([[(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:r},"variable_".concat(r)),(0,G.jsx)(fe.Z,{borderless:!0,monospace:!0,onChange:function(e){e.preventDefault(),ie((function(n){return He(He({},n),{},(0,o.Z)({},r,e.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:l},"variable_uuid_input_".concat(r))]])}),[])})})]})]}),(null===Zn||void 0===Zn?void 0:Zn.length)>=1&&(0,G.jsx)(O.Z,{mb:A.HN,children:(0,G.jsx)(ge,{blocks:Zn,updateVariables:ie,variables:He(He({},ln),te)})})]})}),[Zn,V,_e,R,te,pe,Ie,ln,B,z,ie,$]),yn=E.ZP.tags.list().data,_n=(0,u.useMemo)((function(){return((null===yn||void 0===yn?void 0:yn.tags)||[]).filter((function(e){var n=e.uuid;return!(null!==Fe&&void 0!==Fe&&Fe.includes(n))}))}),[yn,Fe]);return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(x.Z,{after:bn,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(Z,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return null===l||void 0===l?void 0:l.name},linkProps:{as:"/pipelines/".concat(Z,"/triggers/").concat(S),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],errors:n,pageName:H.M.TRIGGERS,pipeline:r,setErrors:s,subheader:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(p.Z,{disabled:xn,loading:rn,onClick:pn,outline:!0,primary:!0,children:"Save changes"}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat(Z,"/triggers/").concat(S),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"})]}),title:function(){return"Edit ".concat(null===l||void 0===l?void 0:l.name)},uuid:"triggers/edit",children:[(0,G.jsxs)(O.Z,{p:A.cd,children:[(0,G.jsxs)(O.Z,{mb:2,children:[(0,G.jsx)(v.Z,{children:"Trigger type"}),(0,G.jsx)(k.ZP,{muted:!0,children:"How would you like this pipeline to be triggered?"})]}),(0,G.jsx)(m.ZP,{children:Ue(w).map((function(e){var n=e.label,t=e.description,r=e.uuid,i=Ie===r,l=Ie&&!i;return(0,G.jsx)(p.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){y.Xm.EVENT!==r||null!==C&&void 0!==C&&C.length||D([{}]),he((function(e){return He(He({},e),{},{schedule_type:r})}))},children:(0,G.jsx)(Me.U,{selected:i,children:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(je.Z,{children:(0,G.jsx)("input",{checked:i,type:"radio"})}),(0,G.jsx)(O.Z,{mr:A.cd}),(0,G.jsxs)(je.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,G.jsx)(v.Z,{bold:!0,default:!i&&!l,level:5,muted:!i&&l,children:n()}),(0,G.jsx)(k.ZP,{default:!i&&!l,leftAligned:!0,muted:l,children:t()})]})]})})},r)}))})]}),(0,G.jsxs)(O.Z,{mt:A.HN,children:[y.Xm.TIME===Ie&&mn,y.Xm.EVENT===Ie&&gn,y.Xm.API===Ie&&jn]}),(0,G.jsxs)(O.Z,{mt:A.HN,px:A.cd,children:[(0,G.jsxs)(O.Z,{mb:2,children:[(0,G.jsx)(v.Z,{children:"Tags"}),(0,G.jsx)(k.ZP,{muted:!0,children:"Add or remove tags from this trigger."})]}),(0,G.jsx)(Ce.Z,{removeTag:function(e){he((function(n){return He(He({},n),{},{tags:null===Fe||void 0===Fe?void 0:Fe.filter((function(n){return n!==e.uuid}))})}))},selectTag:function(e){he((function(n){return He(He({},n),{},{tags:(0,U.$C)(e.uuid,Fe,(function(n){return n===e.uuid}))})}))},selectedTags:null===Fe||void 0===Fe?void 0:Fe.map((function(e){return{uuid:e}})),tags:_n,uuid:"TagsAutocompleteInputField-trigger-".concat(S)})]})]})})},Le=t(41788),We=t(70543);function Ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ye(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ze(e){var n=e.pipelineScheduleId,t=e.pipelineUUID,r=e.subpath,i=We.b7===r,l=(0,u.useState)(null),o=l[0],s=l[1],c=E.ZP.variables.pipelines.list(t,{},{revalidateOnFocus:!1}).data,a=null===c||void 0===c?void 0:c.variables,d={};i&&(d._format="with_runtime_average");var p=E.ZP.pipeline_schedules.detail(n,d),f=p.data,h=p.mutate,m=null===f||void 0===f?void 0:f.pipeline_schedule,v=E.ZP.pipelines.detail(t,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,g=Re(Re({},null===v||void 0===v?void 0:v.pipeline),{},{uuid:t});return i?(0,G.jsx)(Fe,{errors:o,fetchPipelineSchedule:h,pipeline:g,pipelineSchedule:m,setErrors:s,variables:a}):(0,G.jsx)(ee,{errors:o,fetchPipelineSchedule:h,pipeline:g,pipelineSchedule:m,setErrors:s,variables:a})}ze.getInitialProps=function(){var e=(0,l.Z)(c().mark((function e(n){var t,r,l,o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,r=t.pipeline,l=t.slug,!Array.isArray(l)){e.next=4;break}return o=(0,i.Z)(l,2),s=o[0],u=o[1],e.abrupt("return",{pipelineScheduleId:s,pipelineUUID:r,subpath:u});case 4:return e.abrupt("return",{pipelineUUID:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var qe=(0,Le.Z)(ze)},42305:function(e,n,t){"use strict";t.d(n,{A5:function(){return x},AY:function(){return Z},BP:function(){return j},JX:function(){return g},OC:function(){return d},Pc:function(){return b},Ro:function(){return y},Tz:function(){return v},Y_:function(){return P},d$:function(){return m},jV:function(){return _},lJ:function(){return O},n1:function(){return f},s8:function(){return u},vk:function(){return l},yD:function(){return a}});var r,i,l,o=t(82394),s=t(92083),c=t.n(s);!function(e){e.TODAY="today",e.WEEK="week",e.MONTH="month"}(l||(l={}));var u=(r={},(0,o.Z)(r,l.TODAY,"today"),(0,o.Z)(r,l.WEEK,"last 7 days"),(0,o.Z)(r,l.MONTH,"last 30 days"),r),a=(i={},(0,o.Z)(i,l.TODAY,0),(0,o.Z)(i,l.WEEK,6),(0,o.Z)(i,l.MONTH,29),i),d="YYYY-MM-DD HH:mm:ss",p="YYYY-MM-DD HH:mm",f="YYYY-MM-DD",h="MMMM D, YYYY";function m(e,n){var t=n||{},r=t.dayAgo,i=t.includeSeconds,l=t.utcFormat,o=c()(e),s=p;return l&&(o=o.utc()),r&&(o=o.subtract(1,"days")),i&&(s=d),o.format(s)}function v(e){var n=m((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==e&&void 0!==e&&e.dateObj?new Date(n):n}function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c().unix(e).format(null!==n&&void 0!==n&&n.withSeconds?d:p)}function j(e,n,t){return c()(e).utc().hours(+n).minutes(+t).format()}function x(e){return c()(e).unix()}function Z(e,n,t,r){var i="".concat(e.toISOString().split("T")[0]," ").concat(n,":").concat(t);return r?"".concat(i,":").concat(r):i}function b(e){var n=c().unix(+e).utc();return{date:n.toDate(),hour:String(n.hour()),minute:String(n.minute())}}function y(e,n){var t=c().utc(),r=c().utc();null!==n&&void 0!==n&&n.localTime&&(t=c()().local(),r=c()().local());var i=(t=t.subtract(e,"days")).format(h),l=r.format(h);return null!==n&&void 0!==n&&n.endDateOnly?l:"".concat(i," - ").concat(l)}function _(e,n){var t=null!==n&&void 0!==n&&n.localTime?c()().local():c().utc();if(e===l.WEEK){var r=a[l.WEEK];t=t.subtract(r,"days")}else if(e===l.MONTH){var i=a[l.MONTH];t=t.subtract(i,"days")}return null!==n&&void 0!==n&&n.isoString?t.startOf("day").toISOString():t.startOf("day").format(d)}function P(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n=new Date,t=[],r=0;r<e;r++)t.unshift(n.toISOString().split("T")[0]),n.setDate(n.getDate()-1);return t}function O(e){return e.padStart(2,"0")}},95488:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers/[...slug]",function(){return t(70422)}])}},function(e){e.O(0,[844,9902,426,1774,8792,7849,4495,9302,1424,1005,7815,6422,547,8952,7496,8190,9774,2888,179],(function(){return n=95488,e(e.s=n);var n}));var n=e.O();_N_E=n}]);