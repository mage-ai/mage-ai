(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{58122:function(e,n,t){"use strict";t.d(n,{FS:function(){return l},JZ:function(){return s},e7:function(){return d},wx:function(){return a}});var r=t(75582),i=t(82394),c=t(93348);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e){return"string"===typeof e?e:JSON.stringify(e)}function a(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return u(u({},e),{},{value:l(n)})}))}function s(e,n){return n===c.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===c.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function d(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,r.Z)(n,2),c=t[0],o=t[1],l=o;try{l=JSON.parse(o)}catch(a){}return u(u({},e),{},(0,i.Z)({},c,l))}),{}):e}},55264:function(e,n,t){"use strict";var r=t(82684),i=t(79891),c=t(67971),o=t(19711),u=t(24224),l=t(28598);n.Z=function(e){var n=e.onClickTag,t=e.tags,a=void 0===t?[]:t,s=(0,r.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)||0}),[a]),d=(0,r.useMemo)((function(){return(0,u.YC)(a||[],"uuid")}),[a]);return(0,l.jsx)(c.ZP,{alignItems:"center",flexWrap:"wrap",children:null===d||void 0===d?void 0:d.reduce((function(e,t){return e.push((0,l.jsx)("div",{style:{marginBottom:2,marginRight:s>=2?4:0,marginTop:2},children:(0,l.jsx)(i.Z,{onClick:n?function(){return n(t)}:null,small:!0,children:(0,l.jsx)(o.ZP,{children:t.uuid})})},"tag-".concat(t.uuid))),e}),[])})}},97225:function(e,n,t){"use strict";var r=t(75582),i=t(12691),c=t.n(i),o=t(82684),u=t(83455),l=t(34376),a=t(60328),s=t(16634),d=t(47999),p=t(67971),f=t(10919),h=t(93348),g=t(62609),v=t(86673),m=t(87815),x=t(55264),b=t(19711),j=t(46261),Z=t(82531),y=t(22341),P=t(66050),_=t(49125),k=t(45838),O=t(9736),w=t(96510),C=t(66653),I=t(28598),E=1.5*_.iI;n.Z=function(e){var n=e.disableActions,t=e.fetchPipelineSchedules,i=e.highlightRowOnHover,S=e.includeCreatedAtColumn,T=e.includePipelineColumn,A=e.pipeline,D=e.pipelineSchedules,N=e.pipelineTriggersByName,M=e.selectedSchedule,H=e.setErrors,V=e.setSelectedSchedule,Y=e.stickyHeader,R=null===A||void 0===A?void 0:A.uuid,B=(0,l.useRouter)(),F=(0,o.useRef)({}),W=(0,o.useState)(null),z=W[0],L=W[1],q=(0,o.useState)(0),J=q[0],U=q[1],K=(0,o.useState)(0),Q=K[0],X=K[1],G=(0,u.Db)((function(e){return Z.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,w.wD)(e,{callback:function(){null===t||void 0===t||t()},onErrorCallback:function(e,n){return H({errors:n,response:e})}})}}),$=(0,r.Z)(G,1)[0],ee=(0,u.Db)((function(e){return Z.ZP.pipeline_schedules.useDelete(e)()}),{onSuccess:function(e){return(0,w.wD)(e,{callback:function(){null===t||void 0===t||t(),R?B.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(R,"/triggers")):null===t||void 0===t||t()},onErrorCallback:function(e,n){return H({errors:n,response:e})}})}}),ne=(0,r.Z)(ee,1)[0],te=[],re=[];return n||(te.push.apply(te,[null,null,null]),re.push.apply(re,[{label:function(){return""},uuid:"action"},{uuid:"Info"},{uuid:"Type"}])),te.push.apply(te,[1]),re.push.apply(re,[{uuid:"Name"}]),n||(te.push.apply(te,[null,2]),re.push.apply(re,[{uuid:"Frequency"},{uuid:"Tags"}])),te.push.apply(te,[null,null,null]),re.push.apply(re,[{uuid:"Runs"},{uuid:"Latest status"},{uuid:"Logs"}]),n||(0,O.Ct)()||(te.push.apply(te,[null]),re.push({label:function(){return""},uuid:"edit/delete"})),!n&&T&&(re.splice(2,0,{uuid:"Pipeline"}),te.splice(2,0,2)),!n&&S&&(re.splice(3,0,{uuid:"Created at"}),te.splice(3,0,null)),(0,I.jsx)(k.cl,{overflowVisible:!0,children:0===D.length?(0,I.jsx)(v.Z,{px:3,py:1,children:(0,I.jsx)(b.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,I.jsx)(m.Z,{columnFlex:te,columns:re,highlightRowOnHover:i,isSelectedRow:function(e){return D[e].id===(null===M||void 0===M?void 0:M.id)},onClickRow:V?function(e){return null===V||void 0===V?void 0:V(D[e])}:null,rowVerticalPadding:6,rows:D.map((function(e,t){var r,i=e.id,u=e.created_at,l=e.pipeline_runs_count,m=e.pipeline_uuid,Z=e.last_pipeline_run_status,k=e.name,w=e.schedule_interval,A=e.status,D=e.tags,M=R||m;F.current[i]=(0,o.createRef)(),h.fq.ACTIVE===A?r=(0,I.jsx)(s.Z,{size:E,success:!0}):h.fq.INACTIVE===A&&(r=(0,I.jsx)(s.Z,{borderSize:1,size:E,square:!0,warning:!0}));var H,V=[];n?V.push.apply(V,[(0,I.jsx)(b.ZP,{bold:!0,children:k},"trigger_name_".concat(t))]):V.push.apply(V,[(0,I.jsx)(a.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,C.j)(n),$({id:e.id,status:h.fq.ACTIVE===A?h.fq.INACTIVE:h.fq.ACTIVE})},children:h.fq.ACTIVE===A?(0,I.jsx)(y.dz,{muted:!0,size:2*_.iI}):(0,I.jsx)(y.Py,{default:!0,size:2*_.iI})},"toggle_trigger_".concat(t)),(0,I.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,I.jsx)(j.Z,{block:!0,label:A,size:E,widthFitContent:!0,children:r}),(null===N||void 0===N?void 0:N[k])&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.Z,{mr:1}),(0,I.jsx)(j.Z,{block:!0,label:"This trigger is saved in code.",size:E,widthFitContent:!0,children:(0,I.jsx)(y.EK,{default:!0,size:E})})]})]},"trigger_status_".concat(t)),(0,I.jsx)(b.ZP,{default:!0,monospace:!0,children:null===(H=h.Z4[e.schedule_type])||void 0===H?void 0:H.call(h.Z4)},"trigger_type_".concat(t)),(0,I.jsx)(c(),{as:"/pipelines/".concat(M,"/triggers/").concat(i),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,I.jsx)(f.Z,{bold:!0,onClick:function(e){(0,C.j)(e),B.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(M,"/triggers/").concat(i))},sameColorAsText:!0,children:k})},"trigger_name_".concat(t))]);return n||V.push.apply(V,[(0,I.jsx)(b.ZP,{default:!0,monospace:!0,children:w},"trigger_frequency_".concat(t)),(0,I.jsx)("div",{children:(0,I.jsx)(x.Z,{tags:null===D||void 0===D?void 0:D.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(t))]),V.push.apply(V,[(0,I.jsx)(b.ZP,{default:!0,monospace:!0,children:l},"trigger_run_count_".concat(t)),(0,I.jsx)(b.ZP,{danger:P.V.FAILED===Z,default:!Z,monospace:!0,success:P.V.COMPLETED===Z,warning:P.V.CANCELLED===Z,children:Z||"N/A"},"latest_run_status_".concat(t)),(0,I.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return B.push("/pipelines/".concat(M,"/logs?pipeline_schedule_id[]=").concat(i))},children:(0,I.jsx)(y.UL,{default:!0,size:2*_.iI})},"logs_button_".concat(t))]),n||(0,O.Ct)()||V.push((0,I.jsxs)(p.ZP,{children:[(0,I.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return B.push("/pipelines/".concat(M,"/triggers/").concat(i,"/edit"))},title:"Edit",children:(0,I.jsx)(y.I8,{default:!0,size:2*_.iI})}),(0,I.jsx)(v.Z,{mr:1}),(0,I.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var e,n,t,r;L(i),U((null===(e=F.current[i])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0),X((null===(t=F.current[i])||void 0===t||null===(r=t.current)||void 0===r?void 0:r.offsetLeft)||0)},ref:F.current[i],title:"Delete",children:(0,I.jsx)(y.rF,{default:!0,size:2*_.iI})}),(0,I.jsx)(d.Z,{onClickOutside:function(){return L(null)},open:z===i,children:(0,I.jsx)(g.Z,{danger:!0,left:(Q||0)-286,onCancel:function(){return L(null)},onClick:function(){L(null),ne(i)},title:"Are you sure you want to delete the trigger ".concat(k,"?"),top:(J||0)-(t<=1?40:96),width:40*_.iI})})]},"edit_delete_buttons_".concat(t))),!n&&T&&V.splice(2,0,(0,I.jsx)(b.ZP,{default:!0,monospace:!0,children:M},"pipeline_name_".concat(t))),!n&&S&&V.splice(3,0,(0,I.jsx)(b.ZP,{default:!0,monospace:!0,children:u},"created_at_".concat(t))),V})),stickyHeader:Y,uuid:"pipeline-triggers"})})}},51099:function(e,n,t){"use strict";t.d(n,{Q:function(){return s}});t(82684);var r=t(60328),i=t(67971),c=t(86673),o=t(22341),u=t(73899),l=t(49125),a=t(28598),s=22;n.Z=function(e){var n=e.page,t=e.maxPages,s=e.onUpdate,d=e.totalPages,p=[],f=t;if(f>d)p=Array.from({length:d},(function(e,n){return n}));else{var h=Math.floor(f/2),g=n-h;n+h>=d?(g=d-f+2,f-=2):n-h<=0?(g=0,f-=2):(f-=4,g=n-Math.floor(f/2)),p=Array.from({length:f},(function(e,n){return n+g}))}return(0,a.jsx)(a.Fragment,{children:d>0&&(0,a.jsxs)(i.ZP,{alignItems:"center",children:[(0,a.jsx)(r.Z,{disabled:0===n,onClick:function(){return s(n-1)},children:(0,a.jsx)(o.Hd,{size:1.5*l.iI,stroke:"#AEAEAE"})}),!p.includes(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{ml:1,children:(0,a.jsx)(r.Z,{onClick:function(){return s(0)},borderLess:!0,noBackground:!0,children:1})},0),!p.includes(1)&&(0,a.jsx)(c.Z,{ml:1,children:(0,a.jsx)(r.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),p.map((function(e){return(0,a.jsx)(c.Z,{ml:1,children:(0,a.jsx)(r.Z,{onClick:function(){e!==n&&s(e)},notClickable:e===n,backgroundColor:e===n&&u.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!p.includes(d-1)&&(0,a.jsxs)(a.Fragment,{children:[!p.includes(d-2)&&(0,a.jsx)(c.Z,{ml:1,children:(0,a.jsx)(r.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,a.jsx)(c.Z,{ml:1,children:(0,a.jsx)(r.Z,{onClick:function(){return s(d-1)},borderLess:!0,noBackground:!0,children:d})},d-1)]}),(0,a.jsx)(c.Z,{ml:1}),(0,a.jsx)(r.Z,{disabled:n===d-1,onClick:function(){return s(n+1)},children:(0,a.jsx)(o.Kw,{size:1.5*l.iI,stroke:"#AEAEAE"})})]})})}},93348:function(e,n,t){"use strict";t.d(n,{TR:function(){return d},U5:function(){return l},Xm:function(){return c},Z4:function(){return s},fq:function(){return u},kJ:function(){return a}});var r,i,c,o=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(c||(c={}));var u,l,a,s=(r={},(0,o.Z)(r,c.API,(function(){return"API"})),(0,o.Z)(r,c.EVENT,(function(){return"event"})),(0,o.Z)(r,c.TIME,(function(){return"schedule"})),r);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(u||(u={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(l||(l={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(a||(a={}));var d=(i={},(0,o.Z)(i,a.CREATED_AT,"Created at"),(0,o.Z)(i,a.NAME,"Name"),(0,o.Z)(i,a.PIPELINE,"Pipeline"),(0,o.Z)(i,a.STATUS,"Status"),(0,o.Z)(i,a.TYPE,"Type"),i)},52769:function(e,n,t){"use strict";t.d(n,{C:function(){return r}});var r="global"},79891:function(e,n,t){"use strict";var r=t(38626),i=t(60328),c=t(67971),o=t(86673),u=t(19711),l=t(23831),a=t(22341),s=t(49125),d=t(31012),p=t(28598),f=r.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||l.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||l.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((s.iI+d.Al)/2,"px;\n    height: ").concat(1.5*s.iI+d.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((s.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||l.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,t=e.children,r=e.disabled,l=e.label,d=e.onClick,h=e.primary,g=e.small;return(0,p.jsx)(f,{border:n,primary:h,small:g,children:(0,p.jsx)(i.Z,{basic:!0,disabled:r,noBackground:!0,noPadding:!0,onClick:d,transparent:!0,children:(0,p.jsxs)(c.ZP,{alignItems:"center",children:[t,l&&(0,p.jsx)(u.ZP,{small:g,children:l}),!r&&d&&(0,p.jsx)(o.Z,{ml:1,children:(0,p.jsx)(a.x8,{default:h,muted:!h,size:g?s.iI:1.25*s.iI})})]})})})}},29237:function(e,n,t){"use strict";var r=t(38626),i=t(67971),c=t(86673),o=t(19711),u=t(23831),l=t(73942),a=t(37391),s=t(49125),d=t(28598),p=(0,r.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*s.iI,1.5*s.iI,1.5*s.iI),f=r.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],l.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||u.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||u.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||u.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||u.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||u.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),h=r.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],l.n_,l.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||u.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||u.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),p,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),g=r.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*s.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*s.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),v=r.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],l.M8,l.YF,1.75*s.iI);n.Z=function(e){var n=e.borderless,t=e.children,r=e.containerRef,u=e.contentContainerRef,l=e.dark,a=e.footer,s=e.fullHeight,p=void 0===s||s,m=e.fullWidth,x=void 0===m||m,b=e.header,j=e.headerHeight,Z=e.headerIcon,y=e.headerPaddingVertical,P=e.headerTitle,_=e.maxHeight,k=e.maxWidth,O=e.minWidth,w=e.noPadding,C=e.overflowVisible,I=e.subtitle,E=e.success;return(0,d.jsxs)(f,{borderless:n,dark:l,fullHeight:p,fullWidth:x,maxHeight:_,maxWidth:k,minWidth:O,overflowVisible:C,ref:r,success:E,children:[(b||P)&&(0,d.jsxs)(h,{headerPaddingVertical:y,height:j,children:[b&&b,P&&(0,d.jsx)(i.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,d.jsxs)(i.ZP,{alignItems:"center",children:[Z&&Z,(0,d.jsx)(c.Z,{ml:Z?1:0,children:(0,d.jsx)(o.ZP,{bold:!0,default:!0,children:P})})]})})]}),(0,d.jsxs)(g,{maxHeight:_,noPadding:w,overflowVisible:C,ref:u,children:[I&&(0,d.jsx)(c.Z,{mb:2,children:(0,d.jsx)(o.ZP,{default:!0,children:I})}),t]}),a&&(0,d.jsx)(v,{children:a})]})}},6087:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return pe}});var r=t(77837),i=t(82394),c=t(75582),o=t(38860),u=t.n(o),l=t(12691),a=t.n(l),s=t(82684),d=t(83455),p=t(34376),f=t(60328),h=t(48952),g=t(34744),v=t(67971),m=t(87372),x=t(11135),b=t(10919),j=t(51099),Z=t(60547),y=t(93348),P=t(41788),_=t(29237),k=t(86673),O=t(87815),w=t(19711),C=t(38435),I=t(82944),E=t(70902),S=t(23831),T=t(38626),A=t(73942),D=t(49125),N=T.default.div.withConfig({displayName:"indexstyle__ToggleStyle",componentId:"sc-f9kt7n-0"})(["padding:","px ","px;border-radius:","px;",""],1.5*D.iI,2*D.iI,A.n_,(function(e){return"\n    border: 1px solid ".concat((e.theme||S.Z).borders.light,";\n    background-color: ").concat((e.theme||S.Z).background.popup,";\n  ")})),M=t(90211),H=t(58122),V=t(28598);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B="".concat(D.iI,"px ").concat(3*D.iI,"px");var F=function(e){var n=e.initialPipelineSchedulePayload,t=e.onCancel,r=e.onSuccess,o=e.variables,u=(0,s.useState)(!1),l=u[0],a=u[1],d=(0,s.useState)({}),p=d[0],h=d[1],g=(0,s.useState)(o||{}),x=g[0],b=g[1],j=(0,s.useMemo)((function(){return R(R({},n),{},{name:(0,M.Y6)(),variables:l?(0,H.e7)(x):null})}),[n,l,x]),Z=function(e,n){var t={borderless:!0,key:"variable_uuid_input_".concat(e),monospace:!0,onChange:function(n){n.preventDefault(),b((function(t){return R(R({},t),{},(0,i.Z)({},e,n.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:n};return p[e]?(0,V.jsx)(C.Z,R(R({},t),{},{rows:1,value:n})):(0,V.jsx)(I.Z,R({},t))};return(0,s.useEffect)((function(){var e=Object.entries(x).reduce((function(e,n){var t=(0,c.Z)(n,2),r=t[0],o=t[1],u=(0,M.Pb)(o)&&"object"===typeof JSON.parse(o)&&!Array.isArray(JSON.parse(o))&&null!==JSON.parse(o);return R(R({},e),{},(0,i.Z)({},r,u))}),{});h(e)}),[]),(0,V.jsxs)(_.Z,{footer:(0,V.jsxs)(v.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,V.jsx)(f.Z,{onClick:function(){r({pipeline_schedule:j}),t()},padding:B,primaryAlternate:!0,children:"Run now"}),(0,V.jsx)(k.Z,{mr:1}),(0,V.jsx)(f.Z,{borderColor:S.Z.background.page,onClick:t,padding:B,secondary:!0,children:"Cancel"})]}),header:(0,V.jsx)(m.Z,{level:5,children:"Run pipeline now"}),maxHeight:"90vh",minWidth:85*D.iI,subtitle:"Creates a new trigger and immediately runs the current pipeline once.",children:[(0,V.jsx)(N,{children:(0,V.jsxs)(v.ZP,{alignItems:"center",children:[(0,V.jsx)(k.Z,{mr:2,children:(0,V.jsx)(E.Z,{checked:l,onCheck:a})}),(0,V.jsx)(w.ZP,{bold:!0,large:!0,children:"Overwrite runtime variables"})]})}),l&&x&&Object.entries(x).length>0&&(0,V.jsx)(k.Z,{mt:2,children:(0,V.jsx)(O.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(x).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return[(0,V.jsx)(w.ZP,{default:!0,monospace:!0,children:t},"variable_".concat(t)),Z(t,r)]}))})})]})},W=t(37391),z=T.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],S.Z.borders.medium,D.tr),L=T.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],W.w5),q=T.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],S.Z.background.output,A.n_,D.iI,D.tr),J=t(73899);var U=function(e){var n=e.hasOverride,t=e.scheduleType,r=e.variables,i=e.variablesOverride,o=[];return Object.entries(r).forEach((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1],u=null===i||void 0===i?void 0:i[t];o.push({uuid:t,value:(0,H.FS)(u||r)})})),(0,H.JZ)(o,t),(0,V.jsxs)(z,{children:[(0,V.jsx)(k.Z,{mb:2,children:(0,V.jsxs)(w.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,V.jsx)(L,{noScrollbarTrackBackground:!0,children:r&&o.map((function(e){var n=e.uuid,t=e.value;return(0,V.jsxs)(q,{children:[(0,V.jsx)(w.ZP,{monospace:!0,small:!0,children:n}),(0,V.jsx)(w.ZP,{color:J.Or,monospace:!0,small:!0,children:(0,H.FS)(t)})]})}))})]})},K=t(54283),Q=t(46261),X=t(97225),G=t(82531),$=t(22341),ee=t(52769),ne=t(59920),te=t(42305),re=t(24224),ie=t(7715),ce=t(9736),oe=t(96510),ue=t(59e3),le=t(99497);function ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ae(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function de(e){var n=e.pipeline,t=(0,p.useRouter)(),r=(0,ce.Ct)(),o=n.uuid,u=(0,s.useState)(null),l=u[0],P=u[1],_=G.ZP.variables.pipelines.list(o,{global_only:!0},{revalidateOnFocus:!1}).data,O=null===_||void 0===_?void 0:_.variables,C=(0,ue.iV)(),I=null!==C&&void 0!==C&&C.page?C.page:0,E=G.ZP.pipeline_schedules.pipelines.list(o,{_limit:j.Q,_offset:(null!==C&&void 0!==C&&C.page?C.page:0)*j.Q},{refreshInterval:7500}),S=E.data,T=E.mutate,A=(0,s.useMemo)((function(){return(null===S||void 0===S?void 0:S.pipeline_schedules)||[]}),[S]),N=function(e){return(0,d.Db)(G.ZP.pipeline_schedules.pipelines.useCreate(o),{onSuccess:function(n){return(0,oe.wD)(n,{callback:function(n){var t=n.pipeline_schedule.id;null===e||void 0===e||e(t)},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}})},Y=N((function(e){return t.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(e,"/edit"))})),R=(0,c.Z)(Y,2),B=R[0],W=R[1].isLoading,z=N(T),L=(0,c.Z)(z,2),q=L[0],J=L[1].isLoading,ae=(0,s.useMemo)((function(){var e;return null===(e=(0,H.wx)(O,(function(e){return e.uuid===ee.C})))||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid,r=n.value;return se(se({},e),{},(0,i.Z)({},t,r))}),{})}),[O]),de={name:(0,M.Y6)(),schedule_interval:y.U5.ONCE,schedule_type:y.Xm.TIME,start_time:(0,te.d$)((new Date).toISOString(),{dayAgo:!0,utcFormat:!0}),status:y.fq.ACTIVE},pe=(0,le.dd)((function(){return(0,V.jsx)(F,{initialPipelineSchedulePayload:de,onCancel:ge,onSuccess:q,variables:ae})}),{},[O,ae],{background:!0,uuid:"run_pipeline_now_popup"}),fe=(0,c.Z)(pe,2),he=fe[0],ge=fe[1],ve=(0,s.useState)(),me=ve[0],xe=ve[1],be=(0,s.useMemo)((function(){var e=null===me||void 0===me?void 0:me.variables,n=!(0,ie.Qr)(e),t=n?null===me||void 0===me?void 0:me.variables:(0,ie.Qr)(ae)?null:ae;return function(i){var c=i.height-(t?151:80);return(0,V.jsxs)(V.Fragment,{children:[t&&(0,V.jsx)(U,{hasOverride:n,scheduleType:null===me||void 0===me?void 0:me.schedule_type,variables:ae,variablesOverride:e}),!t&&(0,V.jsxs)(k.Z,{p:D.cd,children:[(0,V.jsx)(w.ZP,{children:"This pipeline has no runtime variables."}),!r&&(0,V.jsxs)(k.Z,{mt:1,children:[(0,V.jsx)(a(),{as:"/pipelines/".concat(o,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,V.jsx)(b.Z,{primary:!0,children:"Click here"})})," ",(0,V.jsx)(w.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,V.jsx)(h.Z,se(se({},i),{},{height:c,noStatus:!0}))]})}}),[r,o,null===me||void 0===me?void 0:me.schedule_type,null===me||void 0===me?void 0:me.variables,ae]),je=(0,s.useMemo)((function(){var e;return(null===S||void 0===S||null===(e=S.metadata)||void 0===e?void 0:e.count)||[]}),[S]),Ze=G.ZP.pipeline_triggers.pipelines.list(o),ye=Ze.data,Pe=(Ze.mutate,(0,s.useMemo)((function(){return(0,re.HK)((null===ye||void 0===ye?void 0:ye.pipeline_triggers)||[],(function(e){return e.name}))}),[ye]));return(0,V.jsxs)(Z.Z,{breadcrumbs:[{label:function(){return"Triggers"}}],buildSidekick:be,errors:l,pageName:ne.M.TRIGGERS,pipeline:n,setErrors:P,subheaderBackgroundImage:"".concat(t.basePath,"/images/banner-shape-purple-peach.jpg"),subheaderButton:(0,V.jsx)(x.ZP,{beforeElement:(0,V.jsx)($.mm,{size:2.5*D.iI}),blackBorder:!0,inline:!0,loading:W,noHoverUnderline:!0,onClick:function(){return B({pipeline_schedule:{name:(0,M.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/add_new_schedule",children:"Create new trigger"}),subheaderText:(0,V.jsx)(w.ZP,{bold:!0,large:!0,children:"Run this pipeline using a schedule, event, or API."}),title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(ne.M.TRIGGERS,"_").concat(o),children:[(0,V.jsx)(k.Z,{mt:D.cd,px:D.cd,children:(0,V.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,V.jsx)(m.Z,{level:5,children:"Pipeline triggers"}),(0,V.jsx)(Q.Z,{appearBefore:!0,default:!0,fullSize:!0,label:"Creates an @once trigger and runs pipeline immediately",widthFitContent:!0,children:(0,V.jsx)(f.Z,{beforeIcon:(0,V.jsx)($.JM,{inverted:!0,size:2*D.iI}),disabled:r,loading:J,onClick:(0,ie.Qr)(ae)?function(){return q({pipeline_schedule:de})}:he,outline:!0,success:!r,children:"Run pipeline now"})})]})}),(0,V.jsx)(g.Z,{light:!0,mt:D.cd,short:!0}),S?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(X.Z,{fetchPipelineSchedules:T,pipeline:n,pipelineSchedules:A,pipelineTriggersByName:Pe,selectedSchedule:me,setErrors:P,setSelectedSchedule:xe}),(0,V.jsx)(k.Z,{p:2,children:(0,V.jsx)(j.Z,{maxPages:9,onUpdate:function(e){var n=Number(e),r=se(se({},C),{},{page:n>=0?n:0});t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(o,"/triggers?").concat((0,ue.uM)(r)))},page:Number(I),totalPages:Math.ceil(je/j.Q)})})]}):(0,V.jsx)(k.Z,{m:2,children:(0,V.jsx)(K.Z,{inverted:!0})})]})}de.getInitialProps=function(){var e=(0,r.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var pe=(0,P.Z)(de)},42305:function(e,n,t){"use strict";t.d(n,{A5:function(){return b},AY:function(){return j},BP:function(){return x},JX:function(){return m},OC:function(){return d},Pc:function(){return Z},Ro:function(){return y},Tz:function(){return v},Y_:function(){return _},d$:function(){return g},jV:function(){return P},lJ:function(){return k},n1:function(){return f},s8:function(){return a},vk:function(){return c},yD:function(){return s}});var r,i,c,o=t(82394),u=t(92083),l=t.n(u);!function(e){e.TODAY="today",e.WEEK="week",e.MONTH="month"}(c||(c={}));var a=(r={},(0,o.Z)(r,c.TODAY,"today"),(0,o.Z)(r,c.WEEK,"last 7 days"),(0,o.Z)(r,c.MONTH,"last 30 days"),r),s=(i={},(0,o.Z)(i,c.TODAY,0),(0,o.Z)(i,c.WEEK,6),(0,o.Z)(i,c.MONTH,29),i),d="YYYY-MM-DD HH:mm:ss",p="YYYY-MM-DD HH:mm",f="YYYY-MM-DD",h="MMMM D, YYYY";function g(e,n){var t=n.dayAgo,r=n.includeSeconds,i=n.utcFormat,c=l()(e),o=p;return i&&(c=c.utc()),t&&(c=c.subtract(1,"days")),r&&(o=d),c.format(o)}function v(e){var n=g((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==e&&void 0!==e&&e.dateObj?new Date(n):n}function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l().unix(e).format(null!==n&&void 0!==n&&n.withSeconds?d:p)}function x(e,n,t){return l()(e).utc().hours(+n).minutes(+t).format()}function b(e){return l()(e).unix()}function j(e,n,t,r){var i="".concat(e.toISOString().split("T")[0]," ").concat(n,":").concat(t);return r?"".concat(i,":").concat(r):i}function Z(e){var n=l().unix(+e).utc();return{date:n.toDate(),hour:String(n.hour()),minute:String(n.minute())}}function y(e,n){var t=l().utc(),r=l().utc();null!==n&&void 0!==n&&n.localTime&&(t=l()().local(),r=l()().local());var i=(t=t.subtract(e,"days")).format(h),c=r.format(h);return null!==n&&void 0!==n&&n.endDateOnly?c:"".concat(i," - ").concat(c)}function P(e,n){var t=null!==n&&void 0!==n&&n.localTime?l()().local():l().utc();if(e===c.WEEK){var r=s[c.WEEK];t=t.subtract(r,"days")}else if(e===c.MONTH){var i=s[c.MONTH];t=t.subtract(i,"days")}return null!==n&&void 0!==n&&n.isoString?t.startOf("day").toISOString():t.startOf("day").format(d)}function _(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n=new Date,t=[],r=0;r<e;r++)t.unshift(n.toISOString().split("T")[0]),n.setDate(n.getDate()-1);return t}function k(e){return e.padStart(2,"0")}},40183:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return t(6087)}])}},function(e){e.O(0,[844,9902,426,1774,1424,1005,7815,6422,547,8952,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);