(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7803],{17717:function(e){!function(){"use strict";var n={114:function(e){function n(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,n){for(var r,t="",o=0,i=-1,l=0,c=0;c<=e.length;++c){if(c<e.length)r=e.charCodeAt(c);else{if(47===r)break;r=47}if(47===r){if(i===c-1||1===l);else if(i!==c-1&&2===l){if(t.length<2||2!==o||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2))if(t.length>2){var u=t.lastIndexOf("/");if(u!==t.length-1){-1===u?(t="",o=0):o=(t=t.slice(0,u)).length-1-t.lastIndexOf("/"),i=c,l=0;continue}}else if(2===t.length||1===t.length){t="",o=0,i=c,l=0;continue}n&&(t.length>0?t+="/..":t="..",o=2)}else t.length>0?t+="/"+e.slice(i+1,c):t=e.slice(i+1,c),o=c-i-1;i=c,l=0}else 46===r&&-1!==l?++l:l=-1}return t}var t={resolve:function(){for(var e,t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var l;i>=0?l=arguments[i]:(void 0===e&&(e=""),l=e),n(l),0!==l.length&&(t=l+"/"+t,o=47===l.charCodeAt(0))}return t=r(t,!o),o?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(n(e),0===e.length)return".";var t=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!t)).length||t||(e="."),e.length>0&&o&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var o=arguments[r];n(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":t.normalize(e)},relative:function(e,r){if(n(e),n(r),e===r)return"";if((e=t.resolve(e))===(r=t.resolve(r)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var i=e.length,l=i-o,c=1;c<r.length&&47===r.charCodeAt(c);++c);for(var u=r.length-c,s=l<u?l:u,a=-1,d=0;d<=s;++d){if(d===s){if(u>s){if(47===r.charCodeAt(c+d))return r.slice(c+d+1);if(0===d)return r.slice(c+d)}else l>s&&(47===e.charCodeAt(o+d)?a=d:0===d&&(a=0));break}var f=e.charCodeAt(o+d);if(f!==r.charCodeAt(c+d))break;47===f&&(a=d)}var v="";for(d=o+a+1;d<=i;++d)d!==i&&47!==e.charCodeAt(d)||(0===v.length?v+="..":v+="/..");return v.length>0?v+r.slice(c+a):(c+=a,47===r.charCodeAt(c)&&++c,r.slice(c))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var r=e.charCodeAt(0),t=47===r,o=-1,i=!0,l=e.length-1;l>=1;--l)if(47===(r=e.charCodeAt(l))){if(!i){o=l;break}}else i=!1;return-1===o?t?"/":".":t&&1===o?"//":e.slice(0,o)},basename:function(e,r){if(void 0!==r&&"string"!==typeof r)throw new TypeError('"ext" argument must be a string');n(e);var t,o=0,i=-1,l=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var c=r.length-1,u=-1;for(t=e.length-1;t>=0;--t){var s=e.charCodeAt(t);if(47===s){if(!l){o=t+1;break}}else-1===u&&(l=!1,u=t+1),c>=0&&(s===r.charCodeAt(c)?-1===--c&&(i=t):(c=-1,i=u))}return o===i?i=u:-1===i&&(i=e.length),e.slice(o,i)}for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!l){o=t+1;break}}else-1===i&&(l=!1,i=t+1);return-1===i?"":e.slice(o,i)},extname:function(e){n(e);for(var r=-1,t=0,o=-1,i=!0,l=0,c=e.length-1;c>=0;--c){var u=e.charCodeAt(c);if(47!==u)-1===o&&(i=!1,o=c+1),46===u?-1===r?r=c:1!==l&&(l=1):-1!==r&&(l=-1);else if(!i){t=c+1;break}}return-1===r||-1===o||0===l||1===l&&r===o-1&&r===t+1?"":e.slice(r,o)},format:function(e){if(null===e||"object"!==typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,n){var r=n.dir||n.root,t=n.base||(n.name||"")+(n.ext||"");return r?r===n.root?r+t:r+e+t:t}("/",e)},parse:function(e){n(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var t,o=e.charCodeAt(0),i=47===o;i?(r.root="/",t=1):t=0;for(var l=-1,c=0,u=-1,s=!0,a=e.length-1,d=0;a>=t;--a)if(47!==(o=e.charCodeAt(a)))-1===u&&(s=!1,u=a+1),46===o?-1===l?l=a:1!==d&&(d=1):-1!==l&&(d=-1);else if(!s){c=a+1;break}return-1===l||-1===u||0===d||1===d&&l===u-1&&l===c+1?-1!==u&&(r.base=r.name=0===c&&i?e.slice(1,u):e.slice(c,u)):(0===c&&i?(r.name=e.slice(1,l),r.base=e.slice(1,u)):(r.name=e.slice(c,l),r.base=e.slice(c,u)),r.ext=e.slice(l,u)),c>0?r.dir=e.slice(0,c-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};t.posix=t,e.exports=t}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}},l=!0;try{n[e](i,i.exports,t),l=!1}finally{l&&delete r[e]}return i.exports}t.ab="//";var o=t(114);e.exports=o}()},41143:function(e,n,r){"use strict";var t;r.d(n,{V:function(){return t}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running",e.UPSTREAM_FAILED="upstream_failed",e.CONDITION_FAILED="condition_failed"}(t||(t={}))},44265:function(e,n,r){"use strict";r.d(n,{Az:function(){return u},BF:function(){return c},Do:function(){return a},IK:function(){return l},VO:function(){return i},sZ:function(){return s}});var t,o=r(82394),i=r(41143).V,l=[i.FAILED,i.COMPLETED,i.RUNNING,i.CANCELLED,i.INITIAL],c=[i.INITIAL,i.RUNNING],u=[i.CANCELLED,i.COMPLETED,i.FAILED],s="__mage_variables",a=(t={},(0,o.Z)(t,i.CANCELLED,"Cancelled"),(0,o.Z)(t,i.COMPLETED,"Done"),(0,o.Z)(t,i.FAILED,"Failed"),(0,o.Z)(t,i.INITIAL,"Ready"),(0,o.Z)(t,i.RUNNING,"Running"),t)},25050:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return ie}});var t=r(77837),o=r(38860),i=r.n(o),l=r(82684),c=r(75457),u=r(93808),s=r(75582),a=r(82394),d=r(97618),f=r(55485),v=r(85854),h=r(44265),m=r(38276),p=r(4190),g=r(30160),b=r(44897),x=r(72473),j=r(38626),Z=r(42631),y=r(95363),_=r(70515),k=r(61896),I=j.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-15svh8z-0"})(["border-radius:","px;margin:","px;overflow:hidden;"," "," "," "," "," "," &:hover{"," "," "," "," ","}"],Z.n_,_.cd*_.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||b.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.borders||b.Z.borders).dark,";\n\n    &:hover {\n      cursor: pointer;\n    }\n  ")}),(function(e){return e.selected&&e.danger&&"\n    border-color: ".concat((e.theme.accent||b.Z.accent).negative,";\n  ")}),(function(e){return e.selected&&e.primary&&"\n    border-color: ".concat((e.theme.interactive||b.Z.interactive).linkPrimary,";\n  ")}),(function(e){return e.selected&&e.default&&"\n    border-color: ".concat((e.theme.interactive||b.Z.interactive).focusBackground,";\n  ")}),(function(e){return e.selected&&e.success&&"\n    border-color: ".concat((e.theme.background||b.Z.background).success,";\n  ")}),(function(e){return e.selected&&e.warning&&"\n    border-color: ".concat((e.theme.accent||b.Z.accent).warning,";\n  ")}),(function(e){return e.danger&&"\n      border-color: ".concat((e.theme.accent||b.Z.accent).negative,";\n    ")}),(function(e){return e.primary&&"\n      border-color: ".concat((e.theme.interactive||b.Z.interactive).linkPrimary,";\n    ")}),(function(e){return e.default&&"\n      border-color: ".concat((e.theme.interactive||b.Z.interactive).focusBackground,";\n    ")}),(function(e){return e.success&&"\n      border-color: ".concat((e.theme.background||b.Z.background).success,";\n    ")}),(function(e){return e.warning&&"\n      border-color: ".concat((e.theme.accent||b.Z.accent).warning,";\n    ")})),w=(0,j.css)([""," "," "," "," ",""],(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.accent||b.Z.accent).negative,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.interactive||b.Z.interactive).linkPrimary,";\n  ")}),(function(e){return e.default&&"\n    background-color: ".concat((e.theme.interactive||b.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||b.Z.background).success,";\n  ")}),(function(e){return e.warning&&"\n    background-color: ".concat((e.theme.accent||b.Z.accent).warning,";\n  ")})),N=j.default.div.withConfig({displayName:"indexstyle__StatusStyle",componentId:"sc-15svh8z-1"})([""," ",";border-radius:","px;display:inline-block;font-family:",";padding:6px;"," "," "," "," "," ",""],w,k.iD,Z.D7,y.ry,(function(e){return e.danger&&"\n    color: ".concat((e.theme.content||b.Z.content).active,";\n  ")}),(function(e){return e.primary&&"\n    color: ".concat((e.theme.content||b.Z.content).active,";\n  ")}),(function(e){return(e.default||e.success)&&"\n  "}),(function(e){return e.default&&"\n    color: ".concat((e.theme.content||b.Z.content).default,";\n  ")}),(function(e){return e.success&&"\n    color: ".concat((e.theme.content||b.Z.content).inverted,";\n  ")}),(function(e){return e.warning&&"\n    color: ".concat((e.theme.content||b.Z.content).inverted,";\n  ")})),O=j.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-15svh8z-2"})([""," display:flex;height:auto;width:3px;",""],w,(function(e){return e.default&&"\n    background-color: ".concat((e.theme.interactive||b.Z.interactive).focusBackground,";\n  ")})),E=r(81728),P=r(92083),C=r.n(P),A=r(41143),L=r(86735);function M(e){var n;return Object.keys((null===e||void 0===e||null===(n=e.metrics)||void 0===n?void 0:n.blocks)||{}).sort()}function S(e){var n,r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=null,i=null,l=null,c=null,u={},a=(null===e||void 0===e?void 0:e.block_runs)||[],d=(null===e||void 0===e||null===(n=e.metrics)||void 0===n?void 0:n.blocks)||{},f=(null===e||void 0===e||null===(r=e.metrics)||void 0===r?void 0:r.pipeline)||{},v=D(e);return Object.entries(d).forEach((function(e){var n,r=(0,s.Z)(e,2),a=r[0],d=r[1];if(!t||t===a){var h,m=d||{},p=m.destinations,g=void 0===p?{records_affected:null,records_inserted:null,records_updated:null}:p,b=m.sources,x=void 0===b?{records:null}:b,j=v[a]||[];if(t&&t===a&&j.every((function(e){var n=e.status;return A.V.COMPLETED===n}))&&null===o&&(o=0),null!==f&&void 0!==f&&null!==(n=f[a])&&void 0!==n&&n.record_counts)null===o&&(o=0),o+=Number(null===f||void 0===f||null===(h=f[a])||void 0===h?void 0:h.record_counts);else null!==x&&void 0!==x&&x.records&&(null===o&&(o=0),o+=Number(x.records));null!==g&&void 0!==g&&g.records_updated?(null===l&&(l=0),l+=Number(g.records_updated),null===c&&(c=0),c+=Number(g.records_updated)):null!==g&&void 0!==g&&g.records_inserted?(null===l&&(l=0),l+=Number(g.records_inserted),null===i&&(i=0),i+=Number(g.records_inserted)):null!==g&&void 0!==g&&g.records_affected&&(null===l&&(l=0),l+=Number(g.records_affected)),["destinations","sources"].forEach((function(e){var n=d[e]||{};null!==n&&void 0!==n&&n.error&&(u[a]||(u[a]={}),u[a][e]={error:null===n||void 0===n?void 0:n.error,errors:null===n||void 0===n?void 0:n.errors,message:null===n||void 0===n?void 0:n.message})}))}})),null===a||void 0===a||a.forEach((function(e){var n=e.block_uuid,r=e.metrics,t=e.status;if(A.V.FAILED===t&&null!==r&&void 0!==r&&r.error&&n){var o=n.split(":"),i=(0,s.Z)(o,3),l=(i[0],i[1]);i[2];u[l]||(u[l]={}),u[l][""]=r.error}})),{errors:u,records:o,recordsInserted:i,recordsProcessed:l,recordsUpdated:c}}function D(e){var n=e.block_runs,r={};return null===n||void 0===n||n.forEach((function(e){var n=e.block_uuid.split(":"),t=(0,s.Z)(n,3),o=(t[0],t[1]);t[2];r[o]||(r[o]=[]),r[o].push(e)})),r}function T(e){var n=D(e),r={};return Object.entries(n).forEach((function(e){var n=(0,s.Z)(e,2),t=n[0],o=n[1],i=o.filter((function(e){var n=e.status;return A.V.COMPLETED===n})),l=i.map((function(e){var n=e.completed_at,r=e.started_at,t=C().utc(n),o=C().utc(r);return t.diff(o,"second")})),c=i.length,u=o.length;r[t]={completed:c,runtime:l.length>=1?(0,L.Sm)(l)/l.length:null,total:u}})),r}function V(e){var n=e.block_runs,r=(null===n||void 0===n?void 0:n.length)||1,t=function(e){var n=(null===e||void 0===e?void 0:e.block_runs)||[];return null===n||void 0===n?void 0:n.filter((function(e){var n=e.status;return A.V.COMPLETED===n}))}(e).length||0;return t/r}function R(e){var n=e.completed_at,r=e.block_runs,t=void 0===r?[]:r,o=e.status;if(null===t||void 0===t||!t.length)return 0;var i=C().utc();if(n)i=C().utc(n);else if([h.VO.CANCELLED,h.VO.FAILED].includes(o)){var l=(0,L.YC)(t,(function(e){return e.started_at}),{ascending:!1})[0];i=C().utc(l.updated_at)}var c=C().utc(e.created_at);return i.diff(c,"second")}function U(e,n){var r,t,o,i,l,c=D(e),u=T(e),s=(null===e||void 0===e?void 0:e.metrics)||{blocks:null,pipeline:null},a=s.blocks||{},d=s.pipeline||{},f=(a[n],d[n],u[n]||{completed:null,total:null}),v=f.completed,h=f.total,m=v&&h?v/h:0,p=c[n]||[],g=p.every((function(e){var n=e.status;return A.V.COMPLETED===n})),b=(0,L.YC)(p,(function(e){return e.updated_at}),{ascending:!1})[0],x=null===(r=(0,L.YC)(p,(function(e){return e.started_at}),{ascending:!0})[0])||void 0===r?void 0:r.started_at;g?t=null===(l=(0,L.YC)(p,(function(e){return e.completed_at}),{ascending:!1})[0])||void 0===l?void 0:l.completed_at:b&&(i=null===b||void 0===b?void 0:b.updated_at);var j=g?C().utc(t||i):C().utc(),Z=C().utc(x);return{completed:v,completedAt:t,done:g,progress:m,runtime:o=j.diff(Z,"second"),startedAt:x,status:null===b||void 0===b?void 0:b.status,timeText:(0,E.zf)(o),total:h,updatedAt:i}}var F=r(28598);function z(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function G(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?z(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var B=function(e){var n=e.onSelect,r=e.pipelineRun,t=e.selected,o=(r.block_runs,r.created_at),i=r.status,c=(0,l.useMemo)((function(){return(null===r||void 0===r?void 0:r.metrics)||{blocks:{},destination:null,pipeline:{},source:null}}),[r]),u=((0,l.useMemo)((function(){return c.blocks||{}}),[c]),(0,l.useMemo)((function(){return c.pipeline||{}}),[c])),a=c.destination,j=c.source,Z=(0,l.useMemo)((function(){return Object.keys(u).length}),[u]),y=(0,l.useMemo)((function(){return S(r)}),[r]),k=y.errors,w=y.records,P=y.recordsProcessed,C=(0,l.useMemo)((function(){return V(r)}),[r]),A=(0,l.useMemo)((function(){return[h.VO.COMPLETED].includes(i)}),[i]),L=(0,l.useMemo)((function(){return{danger:h.VO.FAILED===i,default:h.VO.INITIAL===i,primary:h.VO.RUNNING===i,success:A,warning:h.VO.CANCELLED===i}}),[A,i]),M=(0,l.useMemo)((function(){if(r){var e=R(r);return(0,E.zf)(e)}}),[r]);return(0,F.jsx)(I,G(G({},L),{},{onClick:function(){return n(t?null:r.id)},selected:t,children:(0,F.jsxs)(f.ZP,{fullHeight:!0,justifyContent:"space-between",children:[(0,F.jsx)(O,G({},L)),(0,F.jsx)(d.Z,{flex:1,flexDirection:"column",children:(0,F.jsxs)(m.Z,{ml:3,py:3,children:[(0,F.jsx)(v.Z,{bold:!0,level:5,monospace:!0,children:o}),(0,F.jsx)(m.Z,{fullWidth:!1,mt:2,children:(0,F.jsx)(N,G(G({},L),{},{children:(0,F.jsxs)(f.ZP,{alignItems:"center",children:[A&&(0,F.jsx)(x.Jr,{inverted:!0,size:2*_.iI}),[h.VO.INITIAL,h.VO.RUNNING].includes(i)&&(0,F.jsx)(p.Z,{color:h.VO.INITIAL!==i?b.Z.monotone.white:null,inverted:h.VO.INITIAL===i,small:!0}),"\xa0",h.VO.RUNNING===i&&(0,F.jsxs)(F.Fragment,{children:["\xa0",Math.round(100*C),"%"]}),![h.VO.INITIAL,h.VO.RUNNING].includes(i)&&h.Do[i],h.VO.INITIAL===i&&"Starting"]})}))}),Object.values(k).length>=1&&(0,F.jsx)(m.Z,{mt:1,children:Object.entries(k).map((function(e,n){var r=(0,s.Z)(e,2),t=r[0];r[1];return(0,F.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:[t," stream failed"]},t)}))})]})}),(0,F.jsxs)(d.Z,{flex:1,children:[(0,F.jsx)(d.Z,{flex:1,flexDirection:"column",children:(0,F.jsxs)(m.Z,{ml:3,py:3,children:[(0,F.jsxs)(m.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Rows processed"}),(0,F.jsx)(g.ZP,{monospace:!0,children:P>=1?(0,E.x6)(P):"-"})]}),(0,F.jsxs)(m.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Rows remaining"}),(0,F.jsx)(g.ZP,{monospace:!0,children:w>=1&&w>=P?(0,E.x6)(w-P):"-"})]}),h.VO.RUNNING!==i&&(0,F.jsxs)(m.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Runtime"}),(0,F.jsx)(g.ZP,{monospace:!0,children:M})]})]})}),(0,F.jsx)(d.Z,{flex:1,flexDirection:"column",children:(0,F.jsxs)(m.Z,{ml:3,py:3,children:[(0,F.jsxs)(m.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Source"}),(0,F.jsx)(g.ZP,{monospace:!0,children:j||"-"})]}),(0,F.jsxs)(m.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Destination"}),(0,F.jsx)(g.ZP,{monospace:!0,children:a||"-"})]}),(0,F.jsxs)(m.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Streams"}),(0,F.jsx)(g.ZP,{monospace:!0,children:Z>=1?(0,E.x6)(Z):"-"})]})]})})]})]})}))},Y=r(89565),W=r.n(Y),J=r(34376),X=r(71180),q=r(48670),H=r(75499),K=j.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-1thr560-0"})(["display:flex;flex:1;"," "," ",""],(function(e){return e.even&&e.fill&&"\n    background-color: ".concat((e.theme.accent||b.Z.accent).cyan,";\n  ")}),(function(e){return e.even&&!e.fill&&"\n    background-color: ".concat((e.theme.accent||b.Z.accent).cyanTransparent,";\n  ")}),(function(e){return"\n    height: ".concat((e.small?1:2)*_.iI,"px;\n  ")})),Q=r(3314);var $=function(e){var n=e.onClickRow,r=e.pipelineRun,t=e.selectedStream,o=(0,J.useRouter)(),i=(0,l.useState)(null),c=i[0],u=i[1],a=(0,l.useState)(null),d=a[0],p=a[1],b=(0,l.useMemo)((function(){return r?D(r):{}}),[r]),j=(0,l.useMemo)((function(){return r?T(r):{}}),[r]),Z=(0,l.useMemo)((function(){var e=0,n=[],r=[];if(Object.entries(j).forEach((function(t){var o=(0,s.Z)(t,2),i=(o[0],o[1]),l=i.completed,c=i.runtime,u=i.total;null===c?r.push(i):(n.push(c),e+=c*(u-l))})),0===n.length)return null;var t=(0,L.Sm)(n)/n.length;return r.forEach((function(n){var r=n.completed,o=n.total;e+=t*(o-r)})),e}),[j]),y=(0,l.useMemo)((function(){return t?j[t]:null}),[j,t]),k=(0,l.useMemo)((function(){if(t&&j){var e=j[t]||{},n=e.completed,o=e.total;if(o>=1)return n/o}else if(r)return V(r);return 0}),[y,r,t]),I=(0,l.useMemo)((function(){return(0,F.jsx)(f.ZP,{children:(0,L.w6)(101).map((function(e,n){return(0,F.jsx)(K,{even:n%2===0,fill:k>0&&Math.round(100*k)>=n},n)}))})}),[k]),w=(0,l.useMemo)((function(){if(t){var e=b[t]||[],n=e.every((function(e){var n=e.status;return A.V.COMPLETED===n})),o=(0,L.YC)(e,(function(e){return e.updated_at}),{ascending:!1})[0],i=null===o||void 0===o?void 0:o.status,l=y||{},c=l.completed,u=l.runtime,s=l.total;if(n)return"Sync complete for ".concat(t);if([A.V.CANCELLED,A.V.FAILED].includes(i))return h.Do[i];if(u&&s>=1){var a=Math.ceil(u*(s-c)/60);return"".concat((0,E._6)("minute",a,!0)," to completion")}return"Estimating time remaining for stream..."}if(h.VO.COMPLETED===(null===r||void 0===r?void 0:r.status))return"Sync complete";if(r){if([h.VO.CANCELLED,h.VO.FAILED].includes(null===r||void 0===r?void 0:r.status))return h.Do[null===r||void 0===r?void 0:r.status];if(h.VO.INITIAL===(null===r||void 0===r?void 0:r.status))return"Initializing sync (this can take several minutes)";if(null===Z)return"Estimating time remaining...";var d=Math.ceil(Z/60);return"".concat((0,E._6)("minute",d,!0)," to completion")}return"Select a sync"}),[b,Z,y,r,t]),N=(0,l.useMemo)((function(){return r&&t?U(r,t):{completed:null,completedAt:null,done:null,progress:null,runtime:null,startedAt:null,status:null,timeText:null,total:null,updatedAt:null}}),[r,t]);(0,l.useEffect)((function(){var e;if(r){var n=R(r);u(n),e=setInterval((function(){return u((function(e){return e+1}))}),1e3)}return function(){return clearInterval(e)}}),[r]),(0,l.useEffect)((function(){var e;if(r&&t&&N){var n=(null===N||void 0===N?void 0:N.runtime)||0;p(n),e=setInterval((function(){return p((function(e){return e+1}))}),1e3)}return function(){return clearInterval(e)}}),[r,t,N]);var O=(0,l.useMemo)((function(){if(r){if(t)return null===N||void 0===N?void 0:N.timeText;var e=R(r);return(0,E.zf)(e)}}),[r,t,N]),P=(0,l.useMemo)((function(){var e=Math.floor(c%86400/3600),n=Math.floor(c%3600/60),r=Math.floor(c%60/1);return[e>=10?String(e):"0".concat(e),n>=10?String(n):"0".concat(n),r>=10?String(r):"0".concat(r)].join(":")}),[c]),C=(0,l.useMemo)((function(){var e=Math.floor(d%86400/3600),n=Math.floor(d%3600/60),r=Math.floor(d%60/1);return[e>=10?String(e):"0".concat(e),n>=10?String(n):"0".concat(n),r>=10?String(r):"0".concat(r)].join(":")}),[d]),z=(0,l.useMemo)((function(){return r?S(r):{errors:null,records:null,recordsInserted:null,recordsProcessed:null,recordsUpdated:null}}),[r]),G=z.errors,B=z.records,Y=z.recordsInserted,$=z.recordsProcessed,ee=z.recordsUpdated,ne=(0,l.useMemo)((function(){return r&&t?S(r,t):{errors:null,records:null,recordsInserted:null,recordsProcessed:null,recordsUpdated:null}}),[r,t]),re=(0,l.useMemo)((function(){var e=t?null===ne||void 0===ne?void 0:ne.records:B,n=t?null===ne||void 0===ne?void 0:ne.recordsInserted:Y,r=t?null===ne||void 0===ne?void 0:ne.recordsProcessed:$,o=t?null===ne||void 0===ne?void 0:ne.recordsUpdated:ee,i=[{label:"Rows fetched",value:null===e?"-":(0,E.x6)(e)}];return null===n&&null===o?i.push({label:"Rows processed",value:null===r?"-":(0,E.x6)(r)}):null!==n?i.push({label:"Rows inserted",value:(0,E.x6)(n)}):null!==o&&i.push({label:"Rows updated",value:(0,E.x6)(o)}),i.map((function(e){var n=e.label,r=e.value;return(0,F.jsxs)("div",{children:[(0,F.jsx)(g.ZP,{bold:!0,large:!0,muted:!0,children:n}),(0,F.jsx)(g.ZP,{headline:!0,children:r})]},n)}))}),[B,ne,Y,$,ee,O,P,status]),te=(0,l.useMemo)((function(){if(!r)return(0,F.jsx)("div",{});var e=M(r);return(0,F.jsx)(H.Z,{columnFlex:[null,null,null,null,null,null],columns:[{uuid:"Stream"},{uuid:"Start"},{uuid:"End"},{uuid:"Time"},{uuid:"Progress"},{uuid:"Logs"}],isSelectedRow:function(n){return t&&t===e[n]},onClickRow:n,rows:e.map((function(e){var n=U(r,e),t=(n.completed,n.completedAt),i=n.done,l=n.progress,c=n.startedAt,u=n.status,s=n.timeText,a=(n.total,!!G[e]);return[(0,F.jsx)(g.ZP,{danger:a,default:!a,monospace:!0,children:e},"stream"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,children:c?c.split(".")[0]:"-"},"started_at"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,children:t?t.split(".")[0]:"-"},"completed_at"),(0,F.jsx)(g.ZP,{default:!0,children:[A.V.INITIAL,A.V.RUNNING].includes(u)?"-":s},"runtime"),(0,F.jsxs)("div",{children:[i&&(0,F.jsx)(x.Jr,{default:!0,size:2*_.iI}),!i&&(0,F.jsx)(f.ZP,{children:(0,L.w6)(51).map((function(e,n){return(0,F.jsx)(K,{fill:l>0&&Math.round(50*l)>=n,even:n%2===0,small:!0},n)}))})]},"progress"),(0,F.jsx)(X.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(e){o.push("/pipelines/".concat(r.pipeline_uuid,"/logs?pipeline_run_id[]=").concat(r.id)),(0,Q.j)(e)},children:(0,F.jsx)(x.UL,{default:!0,size:2*_.iI})},"logs")]})),uuid:"".concat(null===r||void 0===r?void 0:r.id,"-streams-table")})}),[G,j,r,t]),oe=(0,l.useMemo)((function(){var e,n,o,i,l,c,u,a;if(r&&t){var d=(null===r||void 0===r?void 0:r.metrics)||{blocks:null,destination:null,pipeline:null,source:null},f=null===d||void 0===d||null===(e=d.pipeline)||void 0===e||null===(n=e[t])||void 0===n||null===(o=n.bookmarks)||void 0===o?void 0:o[t],v=null===d||void 0===d||null===(i=d.blocks)||void 0===i||null===(l=i[t])||void 0===l||null===(c=l.destinations)||void 0===c||null===(u=c.state)||void 0===u||null===(a=u.bookmarks)||void 0===a?void 0:a[t];if(f||v){var h=Array.from(new Set(Object.keys(f||{}).concat(Object.keys(v||{})))).sort(),m=[];h.forEach((function(e){var n=[(0,F.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,children:e},e)];[f,v].forEach((function(r,t){r&&n.push((0,F.jsx)(g.ZP,{monospace:!0,small:!0,children:r[e]},"".concat(e,"-").concat(t)))})),m.push(n)}));var p=[{label:function(){return""},uuid:"column"}];return[[null===d||void 0===d?void 0:d.source,"source",f],[null===d||void 0===d?void 0:d.destination,"destination",v]].forEach((function(e){var n=(0,s.Z)(e,3),r=n[0],t=n[1];n[2]&&p.push({uuid:"".concat(r," (").concat(t,")")})})),(0,F.jsx)(H.Z,{columnFlex:[null,1,1],columns:p,rows:m,uuid:"".concat(t,"-bookmark-table")})}}}),[r,t]),ie=(0,l.useMemo)((function(){var e,n,o,i,l,c;if(r&&t){var u=(null===r||void 0===r?void 0:r.metrics)||{blocks:null,destination:null,pipeline:null,source:null},a=null===u||void 0===u||null===(e=u.blocks)||void 0===e||null===(n=e[t])||void 0===n||null===(o=n.sources)||void 0===o?void 0:o.record,d=null===u||void 0===u||null===(i=u.blocks)||void 0===i||null===(l=i[t])||void 0===l||null===(c=l.destinations)||void 0===c?void 0:c.record;if(a||d){var f=Object.keys(d||a||{}).sort(),v=[];f.forEach((function(e){var n=[(0,F.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,children:e},e)];[a,d].forEach((function(r,t){if(r){var o=r[e],i="object"===typeof o;n.push((0,F.jsxs)(g.ZP,{monospace:!0,small:!0,textOverflow:!0,whiteSpaceNormal:!0,wordBreak:!0,children:[i&&(0,F.jsx)("pre",{children:JSON.stringify(o,null,2)}),!i&&o]},"".concat(e,"-").concat(t)))}})),v.push(n)}));var h=[{label:function(){return""},uuid:"column"}];return[[null===u||void 0===u?void 0:u.source,"source",a],[null===u||void 0===u?void 0:u.destination,"destination",d]].forEach((function(e){var n=(0,s.Z)(e,3),r=n[0],t=n[1];n[2]&&h.push({uuid:"".concat(r," (").concat(t,")")})})),(0,F.jsx)(H.Z,{columnFlex:[null,1,1],columns:h,rows:v.map((function(e){return e.map((function(e){return(0,F.jsx)(g.ZP,{default:!0,monospace:!0,children:e},e)}))})),uuid:"".concat(t,"-bookmark-table")})}}}),[r,t]),le=(0,l.useMemo)((function(){var e,n,o,i,l,c,u=null===r||void 0===r||null===(e=r.metrics)||void 0===e||null===(n=e.blocks)||void 0===n?void 0:n[t];return(null===u||void 0===u||null===(o=u.sources)||void 0===o||null===(i=o.block_tags)||void 0===i?void 0:i.destination_table)||(null===u||void 0===u||null===(l=u.destinations)||void 0===l||null===(c=l.block_tags)||void 0===c?void 0:c.destination_table)}),[r,t]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(m.Z,{p:3,children:[t&&(0,F.jsx)(m.Z,{mb:3,children:(0,F.jsxs)(f.ZP,{alignItems:"center",children:[(0,F.jsx)(q.Z,{block:!0,onClick:function(){return o.push("/pipelines/".concat(r.pipeline_uuid,"/syncs?pipeline_run_id=").concat(r.id))},preventDefault:!0,children:(0,F.jsxs)(f.ZP,{alignItems:"center",children:[(0,F.jsx)(x.Xd,{default:!0,size:1.5*_.iI}),(0,F.jsx)(m.Z,{mr:1}),(0,F.jsx)(g.ZP,{default:!0,children:"Syncs"})]})}),(0,F.jsx)(m.Z,{mx:1,children:(0,F.jsx)(g.ZP,{default:!0,monospace:!0,children:"/"})}),(0,F.jsx)(g.ZP,{bold:!0,monospace:!0,children:t})]})}),(0,F.jsxs)(f.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,F.jsx)(m.Z,{mr:2,my:1,children:(0,F.jsx)(v.Z,{level:5,muted:!r,children:w})}),r&&(0,F.jsx)(X.Z,{onClick:function(){return o.push("/pipelines/".concat(r.pipeline_uuid,"/logs?pipeline_run_id[]=").concat(r.id))},small:!0,children:"Logs"})]}),(0,F.jsx)(m.Z,{mt:2,children:I}),r&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(m.Z,{mt:3,children:(0,F.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(g.ZP,{bold:!0,large:!0,muted:!0,children:"Runtime"}),(0,F.jsxs)(g.ZP,{headline:!0,children:[t&&[A.V.INITIAL,A.V.RUNNING].includes(null===N||void 0===N?void 0:N.status)&&C,t&&![A.V.INITIAL,A.V.RUNNING].includes(null===N||void 0===N?void 0:N.status)&&(null===N||void 0===N?void 0:N.timeText),!t&&[h.VO.INITIAL,h.VO.RUNNING].includes(null===r||void 0===r?void 0:r.status)&&P,!t&&![h.VO.INITIAL,h.VO.RUNNING].includes(null===r||void 0===r?void 0:r.status)&&O]})]}),re]})}),Object.values(G).length>=1&&(0,F.jsxs)(m.Z,{mt:3,children:[(0,F.jsx)(v.Z,{level:5,muted:!0,children:"Errors"}),Object.entries(G).map((function(e,n){var r=(0,s.Z)(e,2),o=r[0],i=r[1];return(!t||t===o)&&(0,F.jsx)(m.Z,{mt:n>=1?1:0,children:Object.entries(i).map((function(e){var n=(0,s.Z)(e,2),r=n[0],t=n[1],i=t.error,l=t.errors,c=t.message,u=Array.isArray(i)?i.join(" "):i;return(0,F.jsxs)("div",{children:[(0,F.jsx)(m.Z,{mb:c||(null===l||void 0===l?void 0:l.length)>=1?2:0,children:(0,F.jsxs)(g.ZP,{monospace:!0,preWrap:!0,textOverflow:!0,children:[o,!!r&&(0,F.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,children:["\xa0(",r,")"]}),": ",(0,F.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:u&&(0,F.jsx)(W(),{children:u})})]})}),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:c}),l.map((function(e){return(0,F.jsx)(g.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:e},e)}))]},"".concat(o,"-").concat(r))}))},o)}))]})]})]}),r&&!t&&(0,F.jsx)(m.Z,{my:3,children:te}),r&&t&&(0,F.jsxs)(F.Fragment,{children:[le&&(0,F.jsx)(m.Z,{my:3,children:(0,F.jsxs)(m.Z,{px:3,children:[(0,F.jsx)(v.Z,{level:5,children:"Table name"}),(0,F.jsx)(m.Z,{mt:1,children:(0,F.jsx)(g.ZP,{default:!0,monospace:!0,children:le})})]})}),oe&&(0,F.jsxs)(m.Z,{my:3,children:[(0,F.jsx)(m.Z,{px:3,children:(0,F.jsx)(v.Z,{level:5,children:"Bookmarks"})}),(0,F.jsx)(m.Z,{px:1,children:oe})]}),ie&&(0,F.jsxs)(m.Z,{my:3,children:[(0,F.jsx)(m.Z,{px:3,children:(0,F.jsx)(v.Z,{level:5,children:"Sample row"})}),(0,F.jsx)(m.Z,{px:1,children:ie})]})]})]})},ee=r(35686),ne=r(28795),re=r(15610),te=r(69419);function oe(e){var n=e.pipeline,r=n.uuid,t=ee.ZP.pipeline_runs.list({_limit:20,_offset:0,pipeline_uuid:r},{refreshInterval:5e3}).data,o=(0,l.useMemo)((function(){return(null===t||void 0===t?void 0:t.pipeline_runs)||[]}),[t]),i=(0,te.iV)(),u=(0,l.useState)(null),s=u[0],a=u[1],d=(0,l.useState)(null),f=d[0],v=d[1],h=(0,l.useState)(null),m=h[0],p=h[1];(0,l.useEffect)((function(){null!==i&&void 0!==i&&i.pipeline_run_id?p(null===o||void 0===o?void 0:o.find((function(e){return e.id===Number(i.pipeline_run_id)}))):m&&p(null),null!==i&&void 0!==i&&i.stream?v(i.stream):f&&v(null)}),[o,i,m,f]);var g=(0,l.useCallback)((function(){var e=m?M(m):[];return(0,F.jsx)($,{onClickRow:function(n){var r=e[n];(0,re.u7)({stream:f===r?null:r})},pipelineRun:m,selectedStream:f})}),[m,f]),b=(0,l.useMemo)((function(){var e="/pipelines/".concat(r,"/syncs");m&&(e="".concat(e,"?pipeline_run_id=").concat(m.id));var n=[{label:function(){return"Syncs"},linkProps:f?{as:e,href:"/pipelines/[pipeline]/syncs"}:null}];return f&&n.push({label:function(){return f}}),n}),[r,m,f]);return(0,F.jsx)(c.Z,{breadcrumbs:b,buildSidekick:g,errors:s,pageName:ne.M.SYNCS,pipeline:n,setErrors:a,title:function(e){var n=e.name;return"".concat(n," syncs")},uuid:"".concat(ne.M.SYNCS,"_").concat(r),children:o.map((function(e){var n=(null===m||void 0===m?void 0:m.id)===e.id;return(0,F.jsx)(B,{onSelect:function(e){return(0,re.u7)({pipeline_run_id:e,stream:null})},pipelineRun:e,selected:n},e.id)}))})}oe.getInitialProps=function(){var e=(0,t.Z)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:r}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var ie=(0,u.Z)(oe)},81728:function(e,n,r){"use strict";r.d(n,{RA:function(){return f},kC:function(){return v},vg:function(){return j},kE:function(){return w},Mp:function(){return h},Pb:function(){return a},HW:function(){return y},wX:function(){return m},x6:function(){return p},_6:function(){return g},zf:function(){return Z},Y6:function(){return k},Lo:function(){return I},wE:function(){return N},J3:function(){return b},We:function(){return d},QV:function(){return _},C5:function(){return x}});var t=r(75582),o=r(17717),i=["aged","ancient","autumn","billowing","bitter","black","blue","bold","broken","cold","cool","crimson","damp","dark","dawn","delicate","divine","dry","empty","falling","floral","fragrant","frosty","green","hidden","holy","icy","late","lingering","little","lively","long","misty","morning","muddy","nameless","old","patient","polished","proud","purple","quiet","red","restless","rough","shy","silent","small","snowy","solitary","sparkling","spring","still","summer","throbbing","twilight","wandering","weathered","white","wild","winter","wispy","withered","young"],l=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],c=(r(92083),["bird","breeze","brook","bush","butterfly","cherry","cloud","darkness","dawn","dew","dream","dust","feather","field","fire","firefly","flower","fog","forest","frog","frost","glade","glitter","grass","haze","hill","lake","leaf","meadow","moon","morning","mountain","night","paper","pine","pond","rain","resonance","river","sea","shadow","shape","silence","sky","smoke","snow","snowflake","sound","star","sun","sun","sunset","surf","thunder","tree","violet","voice","water","water","waterfall","wave","wildflower","wind","wood"]),u=["0","1","2","3","4","5","6","7","8","9"],s=r(86735);function a(e){if(!e)return!1;try{JSON.parse(e)}catch(n){return!1}return!0}function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return e.split(" ").join(n)}function f(e){return e.split(" ").join("_")}function v(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return String((new Date).getTime()*e)}function m(e){return e.charAt(0).toLowerCase()+e.slice(1)}function p(e){if(null===e||"undefined"===typeof e)return"";var n=e.toString().split("."),r=(0,t.Z)(n,2),o=r[0],i=r[1],l=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return i?"".concat(l,".").concat(i):l}function g(e,n){var r,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n,l=void 0!==i&&null!==i;if(l||(i=2),1===i)r=e;else{var c=e.length,u=e[c-1];r="y"===u&&"day"!==e?"".concat(e.slice(0,c-1),"ies"):"".concat(e,"s"===u?"es":"s")}if(l&&!o){var s=t?p(i):i;return"".concat(s," ").concat(r)}return r}function b(e){return null===e||void 0===e?void 0:e.replace(/_/g," ")}function x(e){var n=e.length;return"ies"===e.slice(n-3,n)?"".concat(e.slice(0,n-3),"y"):"es"===e.slice(n-2,n)&&"ces"!==e.slice(n-3,n)?e.slice(0,n-2):e.slice(0,n-1)}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v(b(e.toLowerCase()))}function Z(e){var n,r=[["second",60],["minute",60],["hour",24],["day",7],["week",4],["month",12],["year",null]];return r.forEach((function(o,i){if(!n){var l=(0,t.Z)(o,2),c=l[0],u=l[1],s=r.slice(0,i).reduce((function(e,n){return e*Number(n[1])}),1);e<Number(u)*s&&(n=g(c,Math.round(e/s)))}})),n}function y(e){return"undefined"!==typeof e&&null!==e&&!isNaN(e)}function _(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=Math.pow(10,n);return Math.round((e||0)*r)/r}function k(){return"".concat((0,s.mp)(i)," ").concat((0,s.mp)(c))}function I(){return"".concat((0,s.mp)(l)).concat((0,s.mp)(u))}function w(e){return null===e||void 0===e?void 0:e.toLowerCase().replace(/\W+/g,"_")}function N(e){var n,r=e.split(o.sep),t=r[r.length-1].split(".");return n=1===t.length?t[0]:t.slice(0,-1).join("."),r.slice(0,r.length-1).concat(n).join(o.sep)}},59416:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/syncs",function(){return r(25050)}])},80022:function(e,n,r){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return t}})},15544:function(e,n,r){"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}r.d(n,{Z:function(){return t}})},99177:function(e,n,r){"use strict";function t(e,n){return t=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},t(e,n)}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}r.d(n,{Z:function(){return o}})},93189:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var t=r(12539),o=r(80022);function i(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}}},function(e){e.O(0,[844,2083,8013,600,9696,8264,4666,5499,5457,9774,2888,179],(function(){return n=59416,e(e.s=n);var n}));var n=e.O();_N_E=n}]);