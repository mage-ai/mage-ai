(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},30229:function(e,n,i){"use strict";i.d(n,{TR:function(){return f},U5:function(){return c},Wb:function(){return p},Xm:function(){return u},Z4:function(){return s},fq:function(){return l},gm:function(){return d},kJ:function(){return a}});var t,o,u,r=i(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var l,c,s=(t={},(0,r.Z)(t,u.API,(function(){return"API"})),(0,r.Z)(t,u.EVENT,(function(){return"event"})),(0,r.Z)(t,u.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(l||(l={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly",e.ALWAYS_ON="@always_on"}(c||(c={}));var d,a,p=[c.ONCE,c.HOURLY,c.DAILY,c.WEEKLY,c.MONTHLY];!function(e){e.INTERVAL="frequency[]",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(d||(d={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(a||(a={}));var f=(o={},(0,r.Z)(o,a.CREATED_AT,"Created at"),(0,r.Z)(o,a.NAME,"Name"),(0,r.Z)(o,a.PIPELINE,"Pipeline"),(0,r.Z)(o,a.STATUS,"Active"),(0,r.Z)(o,a.TYPE,"Type"),o)},31882:function(e,n,i){"use strict";var t=i(38626),o=i(71180),u=i(55485),r=i(30160),l=i(44897),c=i(72473),s=i(70515),d=i(61896),a=i(28598),p=t.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||l.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||l.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((s.iI+d.Al)/2,"px;\n    height: ").concat(1.5*s.iI+d.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((s.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((s.iI/1+d.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||l.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,i=e.children,t=e.disabled,l=e.label,d=e.monospace,f=e.onClick,v=e.primary,h=e.small,m=e.xsmall;return(0,a.jsx)(p,{border:n,primary:v,small:h,xsmall:m,children:(0,a.jsx)(o.ZP,{basic:!0,disabled:t,noBackground:!0,noPadding:!0,onClick:f,transparent:!0,children:(0,a.jsxs)(u.ZP,{alignItems:"center",children:[i,l&&(0,a.jsx)(r.ZP,{monospace:d,small:h,xsmall:m,children:l}),!t&&f&&(0,a.jsx)("div",{style:{marginLeft:2}}),!t&&f&&(0,a.jsx)(c.x8,{default:v,muted:!v,size:h?s.iI:1.25*s.iI})]})})})}},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return ke}});var t=i(77837),o=i(21831),u=i(75582),r=i(82394),l=i(38860),c=i.n(l),s=i(12691),d=i.n(s),a=i(82684),p=i(69864),f=i(34376),v=i(52749),h=i(60523),m=i(71180),g=i(90299),b=i(31882),x=i(94629),Z=i(97618),j=i(55485),C=i(85854),_=i(93369),I=i(65956),w=i(38276),P=i(30160),y=i(35576),k=i(17488),T=i(28598);var A=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,o=e.minWidth,u=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,s=e.title,d=e.value,p=(0,a.useRef)(null),f=(0,a.useState)(d),v=f[0],h=f[1],g=c?y.Z:k.Z;return(0,a.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,T.jsxs)(I.Z,{maxWidth:t,minWidth:o,children:[(0,T.jsx)(P.ZP,{bold:!0,children:s}),(0,T.jsx)(w.Z,{mt:1,children:(0,T.jsx)(g,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,T.jsx)(w.Z,{mt:2,children:(0,T.jsx)(P.ZP,{muted:!0,small:!0,children:n})}),(0,T.jsx)(w.Z,{mt:3,children:(0,T.jsxs)(j.ZP,{children:[(0,T.jsx)(_.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===d||u&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,T.jsx)(w.Z,{ml:1}),(0,T.jsx)(m.ZP,{onClick:r,children:"Cancel"})]})})]})},E=i(48670),S=i(57653),O=i(55729),M=i(93808),N=i(82359),R=i(4190),D=i(75499),L=i(48381),G=i(69650),U=i(85544),Y=i(35686),B=i(44897),H=i(42631),V=i(44425),W=i(72473),$=i(23780),z=i(8666),q=i(46684),K=i(53808),Q="pipeline_list_filters",X="pipeline_list_group_bys",F="pipeline_list_sort_column_index",J="pipeline_list_sort_direction",ee="pipeline_list_selected_tab_uuid";function ne(e){return(0,K.t8)(Q,e),e}function ie(e){return(0,K.t8)(X,e),e}var te=i(32929),oe=i(44898),ue=i(70515),re=i(30229),le=i(81655),ce=i(31608),se=i(81728),de=i(3917),ae=i(72619),pe=i(69419),fe=i(65458),ve=i(15610),he=i(86735),me=i(42122),ge=i(3314),be=i(70320),xe=i(89538);function Ze(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function je(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ze(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ze(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ce={Icon:W.Pf,label:function(){return"Recently viewed"},uuid:"recent"},_e={Icon:W.vd,label:function(){return"All pipelines"},uuid:"all"},Ie=[_e,Ce],we="tab",Pe={borderRadius:H.BG,iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function ye(){var e,n=(0,f.useRouter)(),i=(0,a.useRef)(null),t=(0,a.useRef)(null),l=(0,a.useState)(null),c=l[0],s=l[1],_=(0,a.useState)(null),y=_[0],k=_[1],M=(0,a.useState)(null),H=M[0],Ze=M[1],ye=(0,a.useState)(null),ke=ye[0],Te=ye[1],Ae=(0,a.useState)(null),Ee=Ae[0],Se=Ae[1],Oe=(0,a.useState)({}),Me=Oe[0],Ne=Oe[1],Re=(0,a.useState)(null),De=Re[0],Le=Re[1],Ge=(0,pe.iV)(),Ue=(0,pe.DQ)(Ge,[S.$1.STATUS,S.$1.TAG,S.$1.TYPE]);(0,a.useEffect)((function(){var e;s(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Ge,i]);var Ye=Y.ZP.projects.list(),Be=Ye.data,He=Ye.mutate,Ve=(0,a.useMemo)((function(){var e;return null===Be||void 0===Be||null===(e=Be.projects)||void 0===e?void 0:e[0]}),[Be]),We=(0,a.useMemo)((function(){var e;return(0,be.h)(null===Ve||void 0===Ve||null===(e=Ve.features)||void 0===e?void 0:e[N.d.LOCAL_TIMEZONE])}),[null===Ve||void 0===Ve?void 0:Ve.features]),$e=(0,a.useMemo)((function(){var e;return null===Ve||void 0===Ve||null===(e=Ve.features)||void 0===e?void 0:e[N.d.OPERATION_HISTORY]}),[Ve]),ze=(0,a.useMemo)((function(){return We?le.O$:{}}),[We]),qe=Y.ZP.pipelines.list(je(je({},Ue),{},{include_schedules:1})),Ke=qe.data,Qe=qe.mutate,Xe=(0,a.useMemo)((function(){return(null===Ge||void 0===Ge?void 0:Ge[S.$1.HISTORY_DAYS])||7}),[Ge]),Fe=Y.ZP.pipelines.list(je(je({},Ue),{},(e={},(0,r.Z)(e,S.$1.HISTORY_DAYS,(0,se.HW)(Xe)?Number(Xe):Xe),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!$e}),Je=Fe.data,en=Fe.mutate,nn=(0,a.useCallback)((function(e){var n=e||[];if(Ee){var i=Ee.toLowerCase();n=n.filter((function(e){var n=e.name,t=e.description,o=e.uuid;return(null===n||void 0===n?void 0:n.toLowerCase().includes(i))||(null===o||void 0===o?void 0:o.toLowerCase().includes(i))||(null===t||void 0===t?void 0:t.toLowerCase().includes(i))}))}return n}),[Ee]),tn=(0,a.useMemo)((function(){var e=nn((null===Ke||void 0===Ke?void 0:Ke.pipelines)||[]);if(null!==Ge&&void 0!==Ge&&Ge[S.$1.TAG]){var n=Ge[S.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(S.$1.NO_TAGS)}))}return e}),[Ke,nn,Ge]),on=(0,a.useMemo)((function(){return nn((null===Je||void 0===Je?void 0:Je.pipelines)||[])}),[Je,nn]),un=(0,a.useMemo)((function(){return(0,he.HK)(tn,(function(e){return e.uuid}))}),[tn]),rn=(0,a.useMemo)((function(){return(0,he.HK)(on,(function(e){return e.uuid}))}),[on]),ln=(0,a.useCallback)((function(e){var n,i,t,o;return null===e||void 0===e||null===(n=e[2])||void 0===n||null===(i=n.props)||void 0===i||null===(t=i.children)||void 0===t||null===(o=t.props)||void 0===o?void 0:o.children}),[]),cn=(0,a.useMemo)((function(){return(null===H||void 0===H?void 0:H.length)>0?null===H||void 0===H?void 0:H.map((function(e){var n=ln(e);return null===un||void 0===un?void 0:un[n]})):tn}),[ln,H,tn,un]),sn=(0,a.useMemo)((function(){return(null===ke||void 0===ke?void 0:ke.length)>0?null===ke||void 0===ke?void 0:ke.map((function(e){var n=ln(e);return null===rn||void 0===rn?void 0:rn[n]})):on}),[ln,ke,on,rn]),dn=(0,a.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),an=null===Ge||void 0===Ge?void 0:Ge[le.lG.SORT_COL_IDX],pn=null===Ge||void 0===Ge?void 0:Ge[le.lG.SORT_DIRECTION],fn=(0,a.useMemo)((function(){return an?{columnIndex:+an,sortDirection:pn||le.sh.ASC}:void 0}),[an,pn]),vn=null===Ge||void 0===Ge?void 0:Ge[S.$1.GROUP],hn=(0,a.useMemo)((function(){return null===Ge||void 0===Ge?void 0:Ge.tab}),[Ge]);(0,a.useEffect)((function(){var e,n={};if(an&&dn.includes(+an))(0,K.t8)(F,an),pn&&(0,K.t8)(J,pn);else{var i=(0,K.U2)(F,null),t=(0,K.U2)(J,le.sh.ASC);null!==i&&(n[le.lG.SORT_COL_IDX]=i,n[le.lG.SORT_DIRECTION]=t)}$e&&(hn?(0,K.t8)(ee,hn):n.tab=(0,K.U2)(ee,null===Ie||void 0===Ie||null===(e=Ie[0])||void 0===e?void 0:e.uuid));if(vn)ie((0,r.Z)({},vn,!0));else{var o,l=(0,K.U2)(X,{});l&&Object.entries(l).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];!o&&t&&(o=i)})),o&&(n[S.$1.GROUP]=o)}if((0,me.Qr)(Ue)){var c={},s=(0,K.U2)(Q,{});s&&Object.entries(s).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];c[i]=[],Object.entries(t).forEach((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1]&&c[i].push(t)}))})),(0,me.Qr)(c)||(n=je(je({},n),c))}else{var d={};Object.entries(Ue).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];d[i]={};var o,r=t;(Array.isArray(r)||(r=[r]),r&&Array.isArray(r))&&(null===(o=r)||void 0===o||o.forEach((function(e){d[i][e]=!0})))})),ne(d)}(0,me.Qr)(n)||(0,ve.u7)(n,{pushHistory:!1})}),[vn,$e,Ue,hn,dn,an,pn]),(0,a.useEffect)((function(){(0,ae.bB)(Ke,Le)}),[Ke]);var mn=function(e){return(0,p.Db)(Y.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,ae.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return Le({errors:n,response:e})}})}})},gn=mn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),bn=(0,u.Z)(gn,2),xn=bn[0],Zn=bn[1].isLoading,jn=mn((function(){null===Qe||void 0===Qe||Qe(),null===en||void 0===en||en()})),Cn=(0,u.Z)(jn,2),_n=Cn[0],In=Cn[1].isLoading,wn=(0,p.Db)((function(e){return Y.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Ne((function(e){return je(je({},e),{},(0,r.Z)({},n,!1))})),Qe(),null===en||void 0===en||en(),null===Rn||void 0===Rn||Rn(),k(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Ne((function(e){return je(je({},e),{},(0,r.Z)({},t,!1))})),Le({errors:n,response:e})}})}}),Pn=(0,u.Z)(wn,2),yn=Pn[0],kn=Pn[1].isLoading,Tn=(0,p.Db)((function(e){return Y.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(){null===Qe||void 0===Qe||Qe(),null===en||void 0===en||en()},onErrorCallback:function(e,n){return Le({errors:n,response:e})}})}}),An=(0,u.Z)(Tn,2),En=An[0],Sn=An[1].isLoading,On=(0,xe.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,T.jsx)(A,{isLoading:kn,minWidth:55*ue.iI,noEmptyValue:!!t,onClose:Rn,onSave:function(e){var i=n||y;if(i){var o=i.uuid,u={uuid:o};t?u.name=e:u.description=e,Ne((function(e){return je(je({},e),{},(0,r.Z)({},o,!0))})),yn(u)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null===n||void 0===n?void 0:n.uuid),value:t||i})}),{},[kn,y],{background:!0,uuid:"rename_pipeline_and_save"}),Mn=(0,u.Z)(On,2),Nn=Mn[0],Rn=Mn[1],Dn=(0,xe.dd)((function(){return(0,T.jsx)($.BC,{children:(0,T.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){xn({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,se.Y6)()}}).then((function(){Un()}))},showBreadcrumbs:!0,tabs:[te.A2]})})}),{},[xn],{background:!0,uuid:"browse_templates"}),Ln=(0,u.Z)(Dn,2),Gn=Ln[0],Un=Ln[1],Yn=(0,xe.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,T.jsx)($.BC,{children:(0,T.jsx)(O.Z,{cancelButtonText:n,contained:!0,header:(0,T.jsx)(w.Z,{mb:ue.HN,children:(0,T.jsxs)(I.Z,{children:[(0,T.jsx)(P.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,T.jsx)(w.Z,{mt:1,children:(0,T.jsxs)(P.ZP,{warning:!0,children:["Read ",(0,T.jsx)(E.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),Vn()},onSaveSuccess:function(e){He(),Vn(),null===t||void 0===t||t(e)}})})}),{},[He],{background:!0,uuid:"configure_project"}),Bn=(0,u.Z)(Yn,2),Hn=Bn[0],Vn=Bn[1],Wn=(0,xe.dd)((function(){return(0,T.jsx)($.BC,{children:(0,T.jsx)(v.Z,{createPipeline:xn,isLoading:Zn,onClose:qn})})}),{},[xn,Zn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),$n=(0,u.Z)(Wn,2),zn=$n[0],qn=$n[1],Kn=(0,a.useMemo)((function(){return(0,fe.d)(xn,{showAIModal:function(){null!==Ve&&void 0!==Ve&&Ve.openai_api_key?zn():Hn({onSaveSuccess:function(){zn()}})},showBrowseTemplates:Gn})}),[xn,Ve,zn,Gn,Hn]),Qn=Y.ZP.tags.list().data,Xn=(0,a.useMemo)((function(){return(0,he.YC)((null===Qn||void 0===Qn?void 0:Qn.tags)||[],(function(e){return e.uuid}))}),[Qn]),Fn=(0,a.useMemo)((function(){return(0,T.jsx)(U.Z,{addButtonProps:{isLoading:Zn,label:"New",menuItems:Kn},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:Sn,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===y||void 0===y?void 0:y.uuid,"?"))&&En(null===y||void 0===y?void 0:y.uuid)}},extraActionButtonProps:{Icon:W.oX,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===y||void 0===y?void 0:y.uuid,"?"),isLoading:In,onClick:function(){return _n({pipeline:{clone_pipeline_uuid:null===y||void 0===y?void 0:y.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:S.kA,tag:[S.$1.NO_TAGS].concat((0,o.Z)(Xn.map((function(e){return e.uuid})))),type:Object.values(S.qL)},filterValueLabelMapping:{status:S.kA.reduce((function(e,n){return je(je({},e),{},(0,r.Z)({},n,(0,se.J3)((0,se.kC)(n))))}),{}),tag:je((0,r.Z)({},S.$1.NO_TAGS,"No tags"),Xn.reduce((function(e,n){var i=n.uuid;return je(je({},e),{},(0,r.Z)({},i,i))}),{})),type:S.G7},groupButtonProps:{groupByLabel:vn,menuItems:[{beforeIcon:vn===S.r0.STATUS?(0,T.jsx)(W.Jr,{fill:B.Z.content.default,size:1.5*ue.iI}):(0,T.jsx)(W.Cd,{muted:!0,size:1.5*ue.iI}),label:function(){return(0,se.kC)(S.r0.STATUS)},onClick:function(){var e=vn===S.r0.STATUS?null:S.r0.STATUS;e||ie({}),(0,ve.u7)((0,r.Z)({},S.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:vn===S.r0.TAG?(0,T.jsx)(W.Jr,{fill:B.Z.content.default,size:1.5*ue.iI}):(0,T.jsx)(W.Cd,{muted:!0,size:1.5*ue.iI}),label:function(){return(0,se.kC)(S.r0.TAG)},onClick:function(){var e=vn===S.r0.TAG?null:S.r0.TAG;e||ie({}),(0,ve.u7)((0,r.Z)({},S.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:vn===S.r0.TYPE?(0,T.jsx)(W.Jr,{fill:B.Z.content.default,size:1.5*ue.iI}):(0,T.jsx)(W.Cd,{muted:!0,size:1.5*ue.iI}),label:function(){return(0,se.kC)(S.r0.TYPE)},onClick:function(){var e=vn===S.r0.TYPE?null:S.r0.TYPE;e||ie({}),(0,ve.u7)((0,r.Z)({},S.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return Nn({pipelineName:null===y||void 0===y?void 0:y.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return Nn({pipeline:y,pipelineDescription:null===y||void 0===y?void 0:y.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){ne({}),n.push("/pipelines")},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&ne({})},query:Ue,searchProps:{onChange:Se,value:Ee},selectedRowId:null===y||void 0===y?void 0:y.uuid,setSelectedRow:k})}),[_n,En,vn,In,Zn,Sn,Kn,Ue,n,Ee,y,Nn,Xn]),Jn=(0,$.VI)(null,{},[],{uuid:"pipelines/list"}),ei=(0,u.Z)(Jn,1)[0],ni=(0,p.Db)(Y.ZP.projects.useUpdate(null===Ve||void 0===Ve?void 0:Ve.name),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(){He()},onErrorCallback:function(e,n){return ei({errors:n,response:e})}})}}),ii=(0,u.Z)(ni,2),ti=ii[0],oi=ii[1].isLoading,ui=(0,a.useCallback)((function(e){return ti({project:e})}),[ti]),ri=(0,xe.dd)((function(){return(0,T.jsxs)(I.Z,{maxWidth:60*ue.iI,children:[(0,T.jsx)(w.Z,{mb:1,children:(0,T.jsx)(C.Z,{children:"Help improve Mage"})}),(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsx)(P.ZP,{default:!0,children:"Please contribute usage statistics to help improve the developer experience for you and everyone in the community \ud83e\udd1d."})}),(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsx)(I.Z,{success:!0,children:(0,T.jsxs)(j.ZP,{alignItems:"center",children:[(0,T.jsx)(W.Yo,{size:5*ue.iI,success:!0}),(0,T.jsx)(w.Z,{mr:1}),(0,T.jsx)(Z.Z,{children:(0,T.jsx)(P.ZP,{children:"All usage statistics are completely anonymous. It\u2019s impossible for Mage to know which statistics belongs to whom."})})]})})}),(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsxs)(P.ZP,{default:!0,children:["By opting into sending usage statistics to ",(0,T.jsx)(E.Z,{href:"https://www.mage.ai",openNewWindow:!0,children:"Mage"}),", it\u2019ll help the team and community of contributors (",(0,T.jsx)(E.Z,{href:"https://www.mage.ai/chat",openNewWindow:!0,children:"Magers"}),") learn what\u2019s going wrong with the tool and what improvements can be made."]})}),(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsx)(P.ZP,{default:!0,children:"In addition to helping reduce potential errors, you\u2019ll help inform which features are useful and which need work."})}),(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,T.jsx)(P.ZP,{bold:!0,children:"I want to help make Mage more powerful for everyone"}),(0,T.jsx)(w.Z,{mr:ue.cd}),(0,T.jsx)(G.Z,{checked:!0,onCheck:function(){window.confirm("Are you sure you don\u2019t want to help everyone in the community?")&&ui({help_improve_mage:!1}).then((function(){return si()}))}})]})}),oi&&(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsx)(R.Z,{inverted:!0})}),(0,T.jsx)(w.Z,{mb:ue.cd,children:(0,T.jsxs)(P.ZP,{muted:!0,small:!0,children:["To learn more about how this works, please check out the ",(0,T.jsx)(E.Z,{href:"https://docs.mage.ai/contributing/statistics/overview",openNewWindow:!0,small:!0,children:"documentation"}),"."]})}),(0,T.jsx)(m.ZP,{onClick:function(){return ui({help_improve_mage:!0}).then((function(){return si()}))},secondary:!0,children:"Close"})]})}),{},[Ve],{background:!0,hideCallback:function(){ui({help_improve_mage:!0})},uuid:"help_mage"}),li=(0,u.Z)(ri,2),ci=li[0],si=li[1];(0,a.useEffect)((function(){Ve&&null===(null===Ve||void 0===Ve?void 0:Ve.help_improve_mage)&&ci()}),[Ve,ci]);var di=(0,a.useCallback)((function(e){var n={};null===e||void 0===e||e.forEach((function(e,i){var t=null===e||void 0===e?void 0:e[vn];if(S.r0.STATUS===vn){var o=(e||{}).schedules,u=void 0===o?[]:o,r=u.length;t=u.find((function(e){var n=e.status;return re.fq.ACTIVE===n}))?S.QK.ACTIVE:r>=1?S.QK.INACTIVE:S.QK.NO_SCHEDULES}else if(S.r0.TAG===vn){t=(null===e||void 0===e?void 0:e.tags)?(0,he.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];S.r0.STATUS===vn?Object.values(S.QK).forEach((function(e){i.push(n[e]),t.push((0,se.vg)(e))})):S.r0.TAG===vn?(0,he.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,T.jsx)(b.Z,{small:!0,children:(0,T.jsx)(P.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):S.r0.TYPE===vn&&Object.values(S.qL).forEach((function(e){i.push(n[e]),t.push(S.G7[e])}));var o=[],u=[];return null===i||void 0===i||i.forEach((function(e,n){"undefined"!==typeof e&&null!==e&&(null===e||void 0===e?void 0:e.length)>=1&&(u.push(e),o.push(null===t||void 0===t?void 0:t[n]))})),{rowGroupHeaders:o,rowsGroupedByIndex:u}}),[vn]),ai=(0,a.useMemo)((function(){return di(cn)}),[di,cn]),pi=ai.rowGroupHeaders,fi=ai.rowsGroupedByIndex,vi=(0,a.useMemo)((function(){return di(sn)}),[di,sn]),hi=vi.rowGroupHeaders,mi=vi.rowsGroupedByIndex,gi=(0,a.useCallback)((function(e,i,o,u,l){return(0,T.jsx)(D.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,se.kC)(S.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,se.kC)(S.r0.TYPE)},je(je({},ze),{},{uuid:"Updated at"}),je(je({},ze),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],defaultSortColumnIndex:2,getUniqueRowIdentifier:ln,isSelectedRow:function(e){var n;return(null===(n=i[e])||void 0===n?void 0:n.uuid)===(null===y||void 0===y?void 0:y.uuid)},localStorageKeySortColIdx:F,localStorageKeySortDirection:J,onClickRow:function(e){return k((function(n){var t=i[e];return(null===n||void 0===n?void 0:n.uuid)!==(null===t||void 0===t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(e){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(i[e].uuid,"/edit"))},ref:t,renderRightClickMenuItems:function(e){var t=i[e];return[{label:function(){return"Edit description"},onClick:function(){return Nn({pipeline:t,pipelineDescription:null===t||void 0===t?void 0:t.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return Nn({pipeline:t,pipelineName:null===t||void 0===t?void 0:t.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return _n({pipeline:{clone_pipeline_uuid:null===t||void 0===t?void 0:t.uuid}})},uuid:"clone"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===t||void 0===t?void 0:t.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(oe.R,"&new=1&pipeline_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(z.b.PIPELINE,"&new=1&object_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"))&&En(null===t||void 0===t?void 0:t.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:25*ue.iI,rowGroupHeaders:o,rows:null===e||void 0===e?void 0:e.map((function(e,i){var t=e.blocks,o=e.created_at,u=e.description,l=e.schedules,c=e.tags,s=e.type,a=e.updated_at,p=e.uuid,f=t.filter((function(e){var n=e.type;return V.tf.SCRATCHPAD!==n})).length,v=l.length,h=l.find((function(e){var n=e.status;return re.fq.ACTIVE===n})),g=(0,T.jsx)("div",{children:(0,T.jsx)(L.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||Me[p]?(0,T.jsx)(m.ZP,{iconOnly:!0,loading:!!Me[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,ge.j)(n),Ne((function(e){return je(je({},e),{},(0,r.Z)({},p,!0))})),yn(je(je({},e),{},{status:h?re.fq.INACTIVE:re.fq.ACTIVE}))},children:h?(0,T.jsx)(W.dz,{muted:!0,size:2*ue.iI}):(0,T.jsx)(W.Py,{default:!0,size:2*ue.iI})}):null,(0,T.jsx)(P.ZP,{default:!h,monospace:!0,success:!!h,children:h?re.fq.ACTIVE:v>=1?re.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,T.jsx)(d(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,T.jsx)(E.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,T.jsx)(P.ZP,{default:!0,preWrap:!0,title:u,children:u},"pipeline_description_".concat(i)),(0,T.jsx)(P.ZP,{children:S.G7[s]},"pipeline_type_".concat(i)),(0,T.jsx)(P.ZP,{monospace:!0,small:!0,title:a?(0,de._6)(a):null,children:a?(0,de.XG)(a,We):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(i)),(0,T.jsx)(P.ZP,{monospace:!0,small:!0,title:o?(0,de._6)(o):null,children:o?(0,de.XG)(o.slice(0,19),We):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(i)),g,(0,T.jsx)(P.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,T.jsx)(P.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,T.jsxs)(Z.Z,{flex:1,justifyContent:"flex-end",children:[(0,T.jsx)(m.ZP,je(je({},Pe),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,T.jsx)(W.UY,{default:!0,size:2*ue.iI})})),(0,T.jsx)(w.Z,{mr:1}),(0,T.jsx)(m.ZP,je(je({},Pe),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,T.jsx)(W.$B,{default:!0,size:2*ue.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:u,setRowsSorted:l,sortableColumnIndexes:dn,sortedColumn:fn,stickyHeader:!0})}),[_n,En,We,ln,Me,n,y,Ne,k,Nn,dn,fn,ze,yn]),bi=(0,a.useMemo)((function(){return gi(tn,cn,pi,fi,Ze)}),[tn,cn,gi,pi,fi,Ze]),xi=(0,a.useMemo)((function(){return gi(on,sn,hi,mi,Te)}),[on,sn,gi,hi,mi,Te]),Zi=(0,a.useMemo)((function(){return(null===tn||void 0===tn?void 0:tn.length)||0}),[tn]),ji=(0,a.useMemo)((function(){return(null===on||void 0===on?void 0:on.length)||0}),[on]),Ci=(0,a.useMemo)((function(){return(!$e||_e.uuid===hn)&&!Zi||$e&&Ce.uuid===hn&&!ji}),[$e,Zi,ji,hn]);return(0,T.jsxs)(x.Z,{errors:De,setErrors:Le,subheaderChildren:Fn,title:"Pipelines",uuid:"pipelines/index",children:[$e&&(0,T.jsx)(w.Z,{pb:vn?0:ue.cd,pt:ue.cd,px:ue.cd,ref:i,children:(0,T.jsx)(g.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return(0,ve.u7)((0,r.Z)({},we,n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:hn,tabs:Ie})}),Ci?(0,T.jsx)(w.Z,{p:ue.Mq,children:Ke?(0,T.jsx)(P.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,T.jsx)(R.Z,{inverted:!0,large:!0})}):null,(0,T.jsxs)(ce.cl,{hide:Ci,includePadding:!!vn,maxHeight:"calc(100vh - ".concat(q.Mz+74+(c||0),"px)"),children:[(!$e||_e.uuid===hn)&&bi,$e&&Ce.uuid===hn&&xi]})]})}ye.getInitialProps=(0,t.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var ke=(0,M.Z)(ye)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])}},function(e){e.O(0,[2678,1154,844,8224,8789,1124,341,1751,1821,4267,600,8487,8264,7858,5499,3932,5389,5810,1769,1550,9264,5544,1952,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);