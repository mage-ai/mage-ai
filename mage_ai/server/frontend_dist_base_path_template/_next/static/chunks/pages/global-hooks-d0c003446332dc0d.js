(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3009],{44374:function(e,n,t){"use strict";t.d(n,{Z:function(){return A}});var o=t(82684),l=t(71180),r=t(94629),i=t(46866),u=t(82394),c=t(12691),a=t.n(c),s=t(9518),d=t(34376),p=t(55485),f=t(48670),h=t(75499),v=t(30160),b=t(35686),m=t(72473),j=t(8193),k={default:!0,monospace:!0},g=t(81728),P=t(3917),_=t(55283),w=t(86735),x=t(70320),y=t(28598);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=function(e){var n=e.rootProject,t=(0,x.qB)(),l=(0,o.useContext)(s.ThemeContext),r=(0,d.useRouter)(),i=(0,o.useState)(null),u=i[0],c=(i[1],b.ZP.global_hooks.list(O({_format:"with_pipeline_details",include_snapshot_validation:1},n?{root_project:n}:{})).data),Z=(0,o.useMemo)((function(){return(null==c?void 0:c.global_hooks)||[]}),[c]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(h.Z,{columnFlex:[null,null,null,null,1,null,null],columns:[{uuid:"UUID"},{uuid:"Resource"},{uuid:"Operation"},{uuid:"Pipeline"},{uuid:"Outputs"},{center:!0,uuid:"Valid"},{rightAligned:!0,uuid:"Snapshotted at"}],onClickRow:function(e,t){var o=null==Z?void 0:Z[e],l=o.operation_type,i=o.resource_type,u=o.uuid;r.push("/".concat(n?"platform/":"","global-hooks/").concat(u,"?operation_type=").concat(l,"&resource_type=").concat(i))},getObjectAtRowIndex:function(e){return null==Z?void 0:Z[e]},rows:null==Z?void 0:Z.map((function(e){var n,r=e.metadata,i=e.operation_type,u=e.outputs,c=e.pipeline,s=e.pipeline_details,d=e.resource_type,h=e.uuid,b=null==c?void 0:c.uuid,x=b?(0,y.jsx)(a(),{as:"/pipelines/".concat(b,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,y.jsx)(f.Z,O(O({},k),{},{openNewWindow:!0,children:b}))},"pipeline"):(0,o.createElement)(v.ZP,O(O({},k),{},{key:"pipeline",muted:!0}),"-"),Z=[];if((null==u?void 0:u.length)>=1&&(null==s||null===(n=s.blocks)||void 0===n?void 0:n.length)>=1){var E=(0,w.HK)((null==s?void 0:s.blocks)||[],(function(e){return e.uuid}));null==u||u.forEach((function(e,n){var t;if(null!=e&&null!==(t=e.block)&&void 0!==t&&t.uuid){var r,i=null==E?void 0:E[null==e||null===(r=e.block)||void 0===r?void 0:r.uuid];i&&(n>=1&&Z.push((0,o.createElement)(v.ZP,O(O({},k),{},{inline:!0,key:"".concat(null==i?void 0:i.uuid,"-").concat(n,"-comma"),muted:!0}),",Â ")),Z.push((0,y.jsx)(a(),{as:"/pipelines/".concat(b,"/edit?block_uuid=").concat(null==i?void 0:i.uuid),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,y.jsx)(f.Z,O(O({},k),{},{inline:!0,openNewWindow:!0,sameColorAsText:!0,children:(0,y.jsx)(v.ZP,O(O({},k),{},{color:(0,_.qn)(null==i?void 0:i.type,{blockColor:null==i?void 0:i.color,theme:l}).accent,inline:!0,children:null==i?void 0:i.uuid}))}))},"".concat(null==i?void 0:i.uuid,"-").concat(n,"-link"))))}}))}return[(0,o.createElement)(v.ZP,O(O({},k),{},{key:"uuid"}),h),(0,o.createElement)(v.ZP,O(O({},k),{},{key:"resourceType",monospace:!1}),d?(0,g.j3)(d):"-"),(0,o.createElement)(v.ZP,O(O({},k),{},{key:"operationType",monospace:!1}),i?(0,g.vg)(i):"-"),x,(0,y.jsxs)("div",{children:[(null==Z?void 0:Z.length)>=1&&Z,!(null!=Z&&Z.length)&&(0,y.jsx)(v.ZP,O(O({},k),{},{muted:!0,children:"-"}))]},"outputs"),(0,y.jsx)(p.ZP,{justifyContent:"center",children:null!=r&&r.snapshot_valid?(0,y.jsx)(m.Check,{size:j.Z,success:!0}):(0,y.jsx)(m.AlertTriangle,{danger:!0,size:j.Z})},"valid"),(0,o.createElement)(v.ZP,O(O({},k),{},{key:"snapshottedAt",rightAligned:!0}),null!=r&&r.snapshotted_at?(0,P.XG)(null==r?void 0:r.snapshotted_at,t):"-")]})),selectedRowIndexInternal:u,uuid:"GlobalHooks/Table"})})},C=t(70515),T=t(69419);var A=function(e){var n=e.rootProject,t=(0,o.useState)(!1),u=t[0],c=t[1],a=(0,T.iV)();(0,o.useEffect)((function(){var e=a.new;c(!!e)}),[a]);var s=n?"Platform global hooks":"Global hooks";return(0,y.jsxs)(r.Z,{addProjectBreadcrumbToCustomBreadcrumbs:u,breadcrumbs:u?[{label:function(){return s},linkProps:{href:"/".concat(n?"platform/":"","global-hooks")}},{bold:!0,label:function(){return"New"}}]:null,subheaderChildren:!u&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(l.ZP,{beforeIcon:(0,y.jsx)(m.Add,{size:2.5*C.iI}),inline:!0,linkProps:{as:"/".concat(n?"platform/":"","global-hooks?new=1"),href:"/".concat(n?"platform/":"","global-hooks")},noHoverUnderline:!0,primary:!0,sameColorAsText:!0,children:"Add new global hook"})}),title:s,uuid:"GlobalHooks/index",children:[u&&(0,y.jsx)(i.Z,{isNew:u,rootProject:n}),!u&&(0,y.jsx)(E,{rootProject:n})]})}},60921:function(e,n,t){"use strict";t.r(n);var o=t(77837),l=t(38860),r=t.n(l),i=t(44374),u=t(93808),c=t(28598);function a(){return(0,c.jsx)(i.Z,{})}a.getInitialProps=(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,u.Z)(a)},95140:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/global-hooks",function(){return t(60921)}])}},function(e){e.O(0,[1557,1187,9774,2888,179],(function(){return n=95140,e(e.s=n);var n}));var n=e.O();_N_E=n}]);