(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7869],{48591:function(e,n,t){"use strict";var i=t(21831),r=t(75582),o=t(82684),u=t(37958);n.Z=function(e){var n=e.children,t=e.uuid,l=e.uuids,c=void 0===l?[]:l,s=(0,u.j)("apiReloads"),a=(0,r.Z)(s,1)[0],d=(0,i.Z)(c);t&&d.push(t);var f=d.map((function(e){return String(a[e])||"-"})).join("_");return o.cloneElement(n,{key:f})}},1210:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var i=t(82394),r=t(21831),o=t(82684),u=t(47999),l=t(49894),c=t(93461),s=t(57384),a=t(41424),d=t(72454),f=t(28598);function v(e,n){var t=e.children;return(0,f.jsx)(d.HS,{ref:n,children:t})}var p=o.forwardRef(v),h=t(32063),b=t(85019),m=t(82531),g=t(66166),j=t(3055),O=t(49125),y=t(91427),x=t(24141);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n,t=e.addProjectBreadcrumbToCustomBreadcrumbs,i=e.after,v=e.afterHidden,w=e.afterWidth,Z=e.afterWidthOverride,P=e.before,S=e.beforeWidth,k=e.breadcrumbs,D=e.children,M=e.errors,E=e.headerMenuItems,_=e.headerOffset,I=e.mainContainerHeader,R=e.navigationItems,T=e.setErrors,F=e.subheaderChildren,A=e.title,N=e.uuid,H=(0,x.i)().width,U="dashboard_after_width_".concat(N),W="dashboard_before_width_".concat(N),Y=(0,o.useRef)(null),V=(0,o.useState)(Z?w:(0,y.U2)(U,w)),z=V[0],L=V[1],B=(0,o.useState)(!1),K=B[0],X=B[1],G=(0,o.useState)(P?Math.max((0,y.U2)(W,S),13*O.iI):null),J=G[0],Q=G[1],q=(0,o.useState)(!1),$=q[0],ee=q[1],ne=(0,o.useState)(null)[1],te=m.ZP.projects.list({},{revalidateOnFocus:!1}).data,ie=null===te||void 0===te?void 0:te.projects,re={label:function(){var e;return null===ie||void 0===ie||null===(e=ie[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},oe=[];k?(t&&oe.push(re),oe.push.apply(oe,(0,r.Z)(k))):(null===ie||void 0===ie?void 0:ie.length)>=1&&oe.push.apply(oe,[re,{bold:!0,label:function(){return A}}]),(0,o.useEffect)((function(){null===Y||void 0===Y||!Y.current||K||$||null===ne||void 0===ne||ne(Y.current.getBoundingClientRect().width)}),[K,z,$,J,Y,ne,H]),(0,o.useEffect)((function(){K||(0,y.t8)(U,z)}),[v,K,z,U]),(0,o.useEffect)((function(){$||(0,y.t8)(W,J)}),[$,J,W]);var ue=(0,g.Z)(w);return(0,o.useEffect)((function(){Z&&ue!==w&&L(w)}),[Z,w,ue]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:A}),(0,f.jsx)(a.Z,{breadcrumbs:oe,menuItems:E,project:null===ie||void 0===ie?void 0:ie[0],version:null===ie||void 0===ie||null===(n=ie[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(d.Nk,{children:[0!==(null===R||void 0===R?void 0:R.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(b.Z,{navigationItems:R,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(h.Z,{after:i,afterHeightOffset:j.Mz,afterHidden:v,afterMousedownActive:K,afterWidth:z,before:P,beforeHeightOffset:j.Mz,beforeMousedownActive:$,beforeWidth:d.k1+(P?J:0),headerOffset:_,hideAfterCompletely:!0,leftOffset:P?d.k1:null,mainContainerHeader:I,mainContainerRef:Y,setAfterMousedownActive:X,setAfterWidth:L,setBeforeMousedownActive:ee,setBeforeWidth:Q,children:[F&&(0,f.jsx)(p,{children:F}),D]})})]}),M&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===T||void 0===T?void 0:T(null)},children:(0,f.jsx)(l.Z,C(C({},M),{},{onClose:function(){return null===T||void 0===T?void 0:T(null)}}))})]})}},91207:function(e,n,t){"use strict";t.d(n,{Z:function(){return A}});var i=t(82394),r=t(75582),o=t(17717),u=t(82684),l=t(37958),c=t(83455),s=t(35490),a=t(86422),d=t(60328),f=t(38626),v=t(93461),p=t(67971),h=t(28598),b=f.default.div.withConfig({displayName:"ButtonGroup__ButtonGroupStyle",componentId:"sc-15vbmc8-0"})([""]),m=f.default.div.withConfig({displayName:"ButtonGroup__VerticalDivider",componentId:"sc-15vbmc8-1"})(["width:1px;"]),g=function(e){var n=e.children,t=e.divider,i=u.Children.toArray(n).length;return(0,h.jsx)(b,{children:(0,h.jsx)(p.ZP,{children:u.Children.map(n,(function(e,n){return e&&(0,h.jsxs)(v.Z,{children:[n>=1&&t&&(0,h.jsx)(m,{}),u.cloneElement(e,{borderRadiusLeft:i>=2&&0===n,borderRadiusRight:i>=2&&n===i-1,halfPaddingLeft:i>=2&&0!==n,halfPaddingRight:i>=2&&n!==i-1,noBorder:i>=2&&n>0&&n<i-1,noBorderRight:i>=2&&n!==i-1})]},"button-group-child-".concat(n))}))})})},j=t(57722),O=t(73828),y=t(11135),x=t(98781),w=t(86673),C=t(82531),Z=t(16115),P=t(94353),S=t(60701),k=t(55512),D=t(24224),M=t(32821),E=t(90211),_=t(96510),I=t(51504),R=t(41150);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=function(e){var n=e.active,t=e.addNewBlock,f=e.disableRefreshWarning,v=e.fetchPipeline,b=e.fetchVariables,m=e.filePath,T=e.hideHeaderButtons,A=e.onContentChange,N=e.openSidekickView,H=e.pipeline,U=e.saveFile,W=e.selectedFilePath,Y=e.sendTerminalMessage,V=e.setDisableShortcuts,z=e.setErrors,L=e.setFilesTouched,B=e.setSelectedBlock,K=(0,l.j)("apiReloads"),X=(0,r.Z)(K,2)[1],G=(0,u.useState)(null),J=G[0],Q=G[1],q=(0,u.useState)(!1),$=q[0],ee=(q[1],(0,u.useRef)(null)),ne=(0,u.useMemo)((function(){return new s.Z}),[]),te=(0,u.useMemo)((function(){return{api_key:P.l,token:ne.decodedToken.token}}),[ne]),ie=C.ZP.statuses.list().data,re=(0,u.useMemo)((function(){var e,n;return null===ie||void 0===ie||null===(e=ie.statuses)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.repo_path}),[ie]),oe=C.ZP.file_contents.detail(m).data;(0,u.useEffect)((function(){null!==oe&&void 0!==oe&&oe.file_content&&Q(oe.file_content)}),[oe]);var ue=(0,u.useState)(null===J||void 0===J?void 0:J.content),le=ue[0],ce=ue[1],se=(0,u.useCallback)((function(e){ce(e),A&&(null===A||void 0===A||A(e))}),[A]),ae=(0,u.useState)(!1),de=ae[0],fe=ae[1];(0,u.useEffect)((function(){n&&V&&(null===V||void 0===V||V(!0))}),[n,V]),(0,u.useEffect)((function(){var e;W&&(null===ee||void 0===ee||null===(e=ee.current)||void 0===e||e.scrollIntoView())}),[W]);var ve=(0,c.Db)(C.ZP.file_contents.useUpdate((null===J||void 0===J?void 0:J.path)&&encodeURIComponent(null===J||void 0===J?void 0:J.path)),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(){X((function(e){return F(F({},e),{},(0,i.Z)({},"FileVersions/".concat(null===J||void 0===J?void 0:J.path),Number(new Date)))}))},onErrorCallback:function(e,n){return null===z||void 0===z?void 0:z({errors:n,response:e})}})}}),pe=(0,r.Z)(ve,1)[0],he=(0,u.useCallback)((function(e,n){if(U)return U(e,n);pe({file_content:F(F({},n),{},{content:e})}).then((function(){decodeURIComponent(m).split(o.sep).pop()===O.dT.METADATA_YAML&&b&&(null===b||void 0===b||b())})),L((function(e){return F(F({},e),{},(0,i.Z)({},null===n||void 0===n?void 0:n.path,!1))})),fe(!1)}),[b,m,U,L,pe]),be=(0,u.useMemo)((function(){return(0,k.lU)()}),[]),me=(0,u.useMemo)((function(){var e,n,t,i;return null===(null===J||void 0===J||null===(e=J.path)||void 0===e?void 0:e.match(be))?O.Lu.TXT:null===J||void 0===J||null===(n=J.path)||void 0===n||null===(t=n.match(be))||void 0===t||null===(i=t[0])||void 0===i?void 0:i.split(".")[1]}),[be,J]),ge=(0,u.useMemo)((function(){if(null!==J&&void 0!==J&&J.path)return(0,h.jsx)(j.Z,{autoHeight:!0,language:O.nB[me],onChange:function(e){se(e),L((function(e){return F(F({},e),{},(0,i.Z)({},null===J||void 0===J?void 0:J.path,!0))})),fe(!0)},onSave:function(e){he(e,J)},selected:!0,textareaFocused:!0,value:(0,E.Pb)(null===J||void 0===J?void 0:J.content)?JSON.stringify(JSON.parse(null===J||void 0===J?void 0:J.content),null,2):null===J||void 0===J?void 0:J.content,width:"100%"})}),[J,me,he,se,L]),je=null!==H&&void 0!==H&&H.blocks?(0,D.sE)(null===H||void 0===H?void 0:H.blocks,(function(e){var n=e.type;return a.tf.DATA_EXPORTER===n})):null,Oe=(0,c.Db)(C.ZP.blocks.pipelines.useUpdate(null===H||void 0===H?void 0:H.uuid,null===je||void 0===je?void 0:je.uuid),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(){null===v||void 0===v||v()}})}}),ye=(0,r.Z)(Oe,1)[0],xe=t&&H&&(me===O.Lu.PY||me===O.Lu.SQL||(me===O.Lu.YAML||me===O.Lu.R)&&(0,M.V3)(J,null===J||void 0===J?void 0:J.path))&&(0,k.ck)(J.path.split(o.sep))!==a.tf.SCRATCHPAD&&(0,M.lr)(J)&&(0,h.jsx)(d.Z,{onClick:function(){var e=(null===H||void 0===H?void 0:H.type)===x.qL.INTEGRATION,n=(0,k.TU)(J,re,H);t(n,(function(n){e&&je&&ye({block:F(F({},je),{},{upstream_blocks:[n.uuid]})}),null===B||void 0===B||B(n)}))},primary:!0,children:"Add to current pipeline"}),we=Y&&(0,h.jsx)(w.Z,{m:2,children:(0,h.jsx)(y.ZP,{disabled:!re,inline:!0,loading:$,onClick:function(){null===N||void 0===N||N(S.cH.TERMINAL),null===Y||void 0===Y||Y(JSON.stringify(F(F({},te),{},{command:["stdin","pip install -r ".concat(re,"/requirements.txt\r")]})))},title:re?"Pip install packages from your saved requirements.txt file (\u2318+S to save).":"Please use right panel terminal to install packages.",uuid:"FileEditor/InstallPackages",children:"Install packages"})}),Ce="FileEditor/".concat(null===J||void 0===J?void 0:J.path),Ze=(0,R.y)(),Pe=Ze.registerOnKeyDown,Se=Ze.unregisterOnKeyDown;return(0,u.useEffect)((function(){return function(){Se(Ce)}}),[Se,Ce]),Pe(Ce,(function(e,t){if(n&&!f)if((0,I.y)([Z.zX,Z.Um],t)||(0,I.y)([Z.PQ,Z.Um],t))e.preventDefault(),he(le,J);else if(de&&(0,I.y)([Z.zX,Z.hS],t)){e.preventDefault();var i="".concat(J.path," has changes that are unsaved. ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(i)&&location.reload()}}),[n,le,f,J,he,de]),(0,h.jsxs)("div",{ref:ee,children:[!T&&(0,h.jsx)(w.Z,{p:2,children:(0,h.jsxs)(p.ZP,{justifyContent:"space-between",children:[(0,h.jsxs)(g,{children:[xe,(0,h.jsx)(d.Z,{disabled:!le,onClick:function(e){e.preventDefault(),he(le,J)},title:le?null:"No changes have been made to this file.",children:"Save file content"})]}),N&&(0,h.jsx)(g,{children:(0,h.jsx)(d.Z,{compact:!0,onClick:function(){N(S.cH.FILE_VERSIONS)},small:!0,title:"View previous changes to this file.",children:"Show versions"})})]})}),ge,m===O.dT.REQS_TXT&&we]})}},23351:function(e,n,t){"use strict";var i=t(82394),r=t(75582),o=t(17717),u=t(37958),l=t(82684),c=t(83455),s=t(60328),a=t(57722),d=t(73828),f=t(93461),v=t(67971),p=t(87372),h=t(86673),b=t(54283),m=t(87815),g=t(19711),j=t(82531),O=t(49125),y=t(55512),x=t(42305),w=t(90211),C=t(96510),Z=t(66653),P=t(24224),S=t(28598);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.onActionCallback,t=e.selectedBlock,k=e.selectedFilePath,M=e.setErrors,E=e.width,_=(0,u.j)("apiReloads"),I=(0,r.Z)(_,2)[1],R=j.ZP.file_versions.files.list(k&&encodeURIComponent(k)),T=R.data,F=R.mutate,A=(0,l.useMemo)((function(){return(null===T||void 0===T?void 0:T.file_versions)||[]}),[T]),N=(0,l.useState)(null),H=N[0],U=N[1],W=(0,l.useMemo)((function(){return null===A||void 0===A?void 0:A[H]}),[H,A]),Y=j.ZP.file_contents.detail(W?encodeURIComponent(W.path):null).data,V=(0,l.useMemo)((function(){return null===Y||void 0===Y?void 0:Y.file_content}),[Y]),z=(0,l.useMemo)((function(){return(0,y.lU)()}),[]),L=(0,l.useMemo)((function(){var e,n,t;return null===k||void 0===k||null===(e=k.match(z))||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.split("."))||void 0===t?void 0:t[1]}),[k,z]),B=(0,c.Db)(j.ZP.file_contents.useUpdate(k&&encodeURIComponent(k)),{onSuccess:function(e){return(0,C.wD)(e,{callback:function(e){var t;k&&F();var r=null===e||void 0===e||null===(t=e.file_content)||void 0===t?void 0:t.path,u="FileEditor/".concat(r);if(r){var l=r.split(o.sep);if("pipelines"===l[0]){var c=l.slice(1,l.length-1).join(o.sep);u="PipelineDetail/".concat(c)}}I((function(e){return D(D({},e),{},(0,i.Z)({},u,Number(new Date)))})),U((function(e){return e+1})),null===n||void 0===n||n(e)},onErrorCallback:function(e,n){return M({errors:n,response:e})}})}}),K=(0,r.Z)(B,2),X=K[0],G=K[1].isLoading,J=(0,l.useMemo)((function(){var e=A.map((function(e){var n=e.name,t=e.path;return[(0,S.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,S.jsxs)(f.Z,{flex:1,children:[(0,S.jsx)(g.ZP,{default:!0,monospace:!0,children:(0,x.JX)(n,{withSeconds:!0})}),(0,S.jsx)(h.Z,{px:2*O.cd,children:(0,S.jsx)(g.ZP,{monospace:!0,children:n})})]}),W&&(null===W||void 0===W?void 0:W.path)===t&&(0,S.jsx)(s.Z,{compact:!0,loading:G,onClick:function(e){(0,Z.j)(e),X({file_content:{version:n}})},small:!0,children:"Replace with this version"})]},n)]}));if(W){var n=(0,S.jsx)(h.Z,{p:O.cd,children:(0,S.jsx)(b.Z,{},"spinner")});if(V&&(null===V||void 0===V?void 0:V.path)===(null===W||void 0===W?void 0:W.path)){var t=V.content,i=void 0===t?"":t;n=(0,S.jsx)(a.Z,{autoHeight:!0,language:d.nB[L],padding:!0,readOnly:!0,value:(0,w.Pb)(i)?JSON.stringify(JSON.parse(i),null,2):i,width:E})}e=(0,P.Hk)([n],H+1,e)}return e}),[V,L,A,G,W,H,X,E]);return(0,S.jsxs)("div",{style:{width:E},children:[(0,S.jsxs)(h.Z,{p:O.cd,children:[(0,S.jsx)(p.Z,{level:5,children:"File versions"}),(0,S.jsx)(g.ZP,{inline:!0,monospace:!0,children:k?decodeURIComponent(k):null===t||void 0===t?void 0:t.uuid})]}),(0,S.jsx)(m.Z,{buildRowProps:function(e){if(W&&H+1===e)return{renderCell:function(e){return e},renderRow:function(e){return e}}},columnFlex:[1],columns:[{uuid:"Version"}],isSelectedRow:function(e){var n;return(null===(n=A[e])||void 0===n?void 0:n.name)===(null===W||void 0===W?void 0:W.name)},onClickRow:function(e){W?e===H?U(null):e<H?U(e):e>H+1&&U(e-1):U(e)},rows:J})]})}},38488:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var i=t(82394),r=t(26304),o=t(82684),u=t(38626),l=t(16634),c=t(67971),s=t(10919),a=t(86673),d=t(19711),f=t(46261),v=t(23831),p=t(22341),h=t(28347),b=t(49125),m=t(33766),g=t(66653),j=t(28598);var O=function(e){var n=e.filePath,t=e.filesTouched,i=void 0===t?{}:t,r=e.isLast,u=e.onClickTab,O=e.onClickTabClose,y=e.renderTabTitle,x=e.savePipelineContent,w=e.selected,C=e.themeContext,Z=(0,o.useState)(!1),P=Z[0],S=Z[1];return(0,j.jsx)(c.ZP,{flexDirection:"column",fullHeight:!0,onClick:function(e){e.preventDefault(),w||(u?u(n):(null===x||void 0===x||x(),(0,m.u7)({file_path:encodeURIComponent(n)})))},onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)},children:(0,j.jsx)(h.Gb,{last:r,selected:w,children:(0,j.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,children:[(0,j.jsx)(f.Z,{appearAbove:!0,appearBefore:!0,label:n,size:null,widthFitContent:!0,children:(0,j.jsxs)(c.ZP,{alignItems:"center",fullHeight:!0,children:[!i[n]&&(0,j.jsx)(p.iU,{muted:!w,size:1.5*b.iI}),i[n]&&(0,j.jsx)(f.Z,{label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,j.jsx)("div",{style:{padding:1},children:(0,j.jsx)(l.Z,{borderColor:(C||v.Z).borders.danger,size:1.25*b.iI})})}),(0,j.jsx)(a.Z,{mr:1}),(0,j.jsx)(d.ZP,{muted:!w,children:y?y(n):n})]})}),(0,j.jsx)(a.Z,{mr:2}),(0,j.jsx)(f.Z,{label:"Close",size:null,widthFitContent:!0,children:(0,j.jsxs)(s.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(e){(0,g.j)(e),null===O||void 0===O||O(n)},preventDefault:!0,children:[(P||w)&&(0,j.jsx)(p.x8,{muted:!w,size:1.25*b.iI}),!P&&!w&&(0,j.jsx)("div",{style:{width:1.25*b.iI}})]})})]})})})},y=t(24224),x=["filePaths","isSelectedFilePath","onClickTabClose","selectedFilePath"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n=e.filePaths,t=e.isSelectedFilePath,i=e.onClickTabClose,l=e.selectedFilePath,s=(0,r.Z)(e,x),a=(0,o.useContext)(u.ThemeContext),d=(0,o.useMemo)((function(){return n.map((function(e){return decodeURIComponent(e)}))}),[n]),f=(0,o.useMemo)((function(){return null===d||void 0===d?void 0:d.length}),[d]);return(0,j.jsx)(c.ZP,{alignItems:"center",justifyContent:"flex-start",children:null===d||void 0===d?void 0:d.map((function(e,n){var r=t?t(e,l):l===encodeURIComponent(e);return(0,o.createElement)(O,C(C({},s),{},{filePath:e,isLast:n===f-1,key:e,onClickTabClose:function(e){if(i)i(e);else{var n=(0,y.Od)(d,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,m.u7)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})}},selected:r,themeContext:a}))}))})}},28347:function(e,n,t){"use strict";t.d(n,{Gb:function(){return f},fm:function(){return a},lO:function(){return s},rK:function(){return d},zn:function(){return c}});var i=t(38626),r=t(23831),o=t(82386),u=t(49125),l=t(37391),c=300,s=i.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],c,c),a=i.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).codeArea,";\n  ")})),d=i.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:","px;width:100%;z-index:5;"," "," "," ",""],o.Wi,o.Wi,(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||r.Z.borders).medium,";\n  ")}),(function(e){return e.relativePosition&&"\n    position: relative;\n  "}),(function(e){return e.secondary&&"\n    height: ".concat(37,"px;\n    top: ").concat(o.Wi,"px;\n    overflow-x: auto;\n    z-index: 3;\n  ")}),(0,l.y$)()),f=i.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-right:1px solid transparent;height:100%;padding:","px ","px;"," "," ",""],u.iI,u.cd*u.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||r.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||r.Z.interactive).hoverBackground,";\n  ")}),(function(e){return!e.selected&&!e.last&&"\n    border-color: ".concat((e.theme.borders||r.Z.borders).light," !important;\n  ")}))},55389:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Q}});var i=t(77837),r=t(38860),o=t.n(r),u=t(82394),l=t(75582),c=t(17717),s=t(82684),a=t(37958),d=t(83455),f=t(48591),v=t(1210),p=t(46299),h=t(91207),b=t(47999),m=t(67971),g=t(62084),j=t(19711),O=t(16115),y=t(64318),x=t(54405),w=t(41150),C=t(28598);var Z=function(e){var n=e.children,t=e.fileVersionsVisible,i=e.onSave,r=e.setFilesVersionsVisible,o=(0,s.useState)(null),u=o[0],l=o[1],c=(0,s.useRef)(null),a=(0,s.useRef)(null),d=(0,s.useMemo)((function(){return[{disabled:!i,keyTextGroups:[[(0,x.V5)()?O.RJ:O.hE,O.SS]],label:function(){return"Save"},onClick:function(){return i?i():null},uuid:"save"}]}),[i]),f=(0,s.useMemo)((function(){return[{label:function(){return t?"Hide versions":"Show versions"},onClick:function(){return r(!t)},uuid:"versions"}]}),[t,r]),v="FileHeaderMenu/index",p=(0,w.y)(),h=p.registerOnKeyDown,Z=p.unregisterOnKeyDown;return(0,s.useEffect)((function(){return function(){Z(v)}}),[Z,v]),h(v,(function(e,n){null!==u&&(n[O.QK]?l((function(e){return 0===e?2:e-1})):n[O.DY]&&l((function(e){return 2===e?0:e+1})))}),[u,l]),(0,C.jsx)(b.Z,{onClickOutside:function(){return l(null)},open:!0,style:{position:"relative"},children:(0,C.jsxs)(m.ZP,{children:[(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsx)(y.u,{highlighted:0===u,onClick:function(){return l((function(e){return 0===e?null:0}))},onMouseEnter:function(){return l((function(e){return null!==e?0:null}))},ref:c,children:(0,C.jsx)(j.ZP,{children:"File"})}),(0,C.jsx)(g.Z,{items:d,onClickCallback:function(){return l(null)},open:0===u,parentRef:c,uuid:"FileHeaderMenu/file"})]}),(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsx)(y.u,{highlighted:1===u,onClick:function(){return l((function(e){return 1===e?null:1}))},onMouseEnter:function(){return l((function(e){return null!==e?1:null}))},ref:a,children:(0,C.jsx)(j.ZP,{children:"Edit"})}),(0,C.jsx)(g.Z,{items:f,onClickCallback:function(){return l(null)},open:1===u,parentRef:a,uuid:"FileHeaderMenu/edit"})]}),n]})})},P=t(38488),S=t(23351),k=t(82531),D=t(38626),M=t(23831),E=t(82386),_=t(3055),I=t(37391),R=72-E.uX+_.Mz,T=D.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-11pty4f-0"})(["height:","px;top:","px;z-index:3;",""],72,_.Mz,(function(e){return"\n    background-color: ".concat((e.theme.background||M.Z.background).codeArea,";\n  ")})),F=D.default.div.withConfig({displayName:"indexstyle__MenuStyle",componentId:"sc-11pty4f-1"})(["height:","px;position:relative;z-index:1;",""],36,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||M.Z.borders).medium,";\n  ")})),A=D.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-11pty4f-2"})([""," height:","px;overflow-x:auto;position:sticky;width:100%;z-index:0;"],(0,I.y$)(),36),N=t(91427),H=t(24224),U="open_files";function W(e){(0,N.t8)(U,e)}var Y=t(96510),V=t(51504),z=t(9728);function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function K(e){var n=e.split(c.sep);return n[n.length-1]}var X=function(){var e=(0,a.j)("apiReloads"),n=(0,l.Z)(e,2)[1],t=(0,s.useRef)(null),i=(0,s.useRef)(null),r=(0,s.useCallback)((function(e){i.current||(i.current={}),i.current=B(B({},i.current),e)}),[i]),o=(0,s.useState)([]),c=o[0],b=o[1],m=(0,s.useState)(null),g=m[0],j=m[1],y=(0,s.useState)({}),x=y[0],D=y[1],M=(0,s.useState)(!1),E=M[0],_=M[1],I=(0,s.useMemo)((function(){return c.reduce((function(e,n){var t=K(n);return e[t]||(e[t]=[]),e[t].push(n),e}),{})}),[c]),L=(0,s.useCallback)((function(e){W(e),b(e)}),[]),X=(0,s.useCallback)((function(e){L(function(e){var n=(0,N.U2)(U,[]);return n.includes(e)||n.push(e),W(n),n}(e))}),[L]),G=(0,s.useCallback)((function(e){r((0,u.Z)({},e,null)),D((function(n){return B(B({},n),{},(0,u.Z)({},e,!1))}));var n=function(e){var n=(0,N.U2)(U,[]),t=(0,H.Od)(n,(function(n){return n===e}));return W(t),t}(e);L(n),g===e&&(null===n||void 0===n?void 0:n.length)>=1&&j(n[n.length-1]),0===(null===n||void 0===n?void 0:n.length)&&j(null)}),[g,r,L]),J=(0,s.useCallback)((function(e,n){n||(X(e),j(e))}),[X]);(0,s.useEffect)((function(){var e=(0,N.U2)(U,[]);L(e),j((function(n){return!n&&(null===e||void 0===e?void 0:e.length)>=1?e[0]:n}))}),[L]);var Q=k.ZP.files.list(),q=Q.data,$=Q.mutate,ee=(0,s.useMemo)((function(){return(null===q||void 0===q?void 0:q.files)||[]}),[q]),ne=(0,z.VI)(null,{},[],{uuid:"FilesPage"}),te=(0,l.Z)(ne,1)[0],ie="Files/index",re=(0,w.y)(),oe=(re.disableGlobalKeyboardShortcuts,re.registerOnKeyDown),ue=re.unregisterOnKeyDown;(0,s.useEffect)((function(){return function(){ue(ie)}}),[ue,ie]),oe(ie,(function(e,n){var t=Object.entries(x).reduce((function(e,n){var t=(0,l.Z)(n,2),i=t[0];return t[1]?e.concat(i):e}),[]);if((0,V.y)([O.zX,O.hS],n)&&(null===t||void 0===t?void 0:t.length)>=1){e.preventDefault();var i="You have changes that are unsaved: ".concat(t.join(", "),". ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(i)&&location.reload()}}),[x]);var le=(0,s.useMemo)((function(){return(0,C.jsx)(P.Z,{filePaths:c,filesTouched:x,isSelectedFilePath:function(e,n){return e===n},onClickTab:function(e){return j(e)},onClickTabClose:function(e){return G(e)},renderTabTitle:function(e){var n=K(e),t=I[n];return t&&(null===t||void 0===t?void 0:t.length)>=2?e:n},selectedFilePath:g})}),[x,c,I,G,g]),ce=(0,s.useMemo)((function(){return(0,C.jsx)(p.Z,{fetchFileTree:$,files:ee,onClickFile:function(e){return J(e)},onClickFolder:function(e){return J(e,!0)},onCreateFile:function(e){var n=e.path;return J(n)},ref:t,setErrors:te})}),[$,t,ee,J,te]),se=(0,d.Db)((function(e){return k.ZP.file_contents.useUpdate((null===e||void 0===e?void 0:e.path)&&encodeURIComponent(null===e||void 0===e?void 0:e.path))({file_content:e})}),{onSuccess:function(e){return(0,Y.wD)(e,{callback:function(e){var t=e.file_content;n((function(e){return B(B({},e),{},(0,u.Z)({},"FileVersions/".concat(null===t||void 0===t?void 0:t.path),Number(new Date)))})),r((0,u.Z)({},null===t||void 0===t?void 0:t.path,null))},onErrorCallback:function(e,n){return te({errors:n,response:e})}})}}),ae=(0,l.Z)(se,1)[0],de=(0,s.useCallback)((function(e,n){ae(B(B({},n),{},{content:e})),D((function(e){return B(B({},e),{},(0,u.Z)({},null===n||void 0===n?void 0:n.path,!1))}))}),[D,ae]),fe=(0,s.useMemo)((function(){return null===c||void 0===c?void 0:c.map((function(e){return(0,C.jsx)("div",{style:{display:g===e?null:"none"},children:(0,C.jsx)(f.Z,{uuid:"FileEditor/".concat(decodeURIComponent(e)),children:(0,C.jsx)(h.Z,{active:g===e,disableRefreshWarning:!0,filePath:e?encodeURIComponent(e):null,hideHeaderButtons:!0,onContentChange:function(n){return r((0,u.Z)({},e,n))},saveFile:de,selectedFilePath:g,setErrors:te,setFilesTouched:D})})},e)}))}),[c,de,g,r,te]),ve=(0,s.useMemo)((function(){return(0,C.jsx)(Z,{fileVersionsVisible:E,onSave:function(){var e,n;(null===i||void 0===i||null===(e=i.current)||void 0===e||null===(n=e[g])||void 0===n?void 0:n.length)>=1&&de(i.current[g],{path:g})},setFilesVersionsVisible:_})}),[i,E,de,g,_]);return(0,C.jsx)(v.Z,{after:(0,C.jsx)(f.Z,{uuid:"FileVersions/".concat(g?decodeURIComponent(g):""),children:(0,C.jsx)(S.Z,{selectedFilePath:g,setErrors:te})}),afterHidden:!(E&&g),before:ce,headerOffset:R,mainContainerHeader:(null===c||void 0===c?void 0:c.length)>=1&&(0,C.jsxs)(T,{children:[(0,C.jsx)(F,{children:ve}),(0,C.jsx)(A,{children:le})]}),title:"Files",uuid:"Files/index",children:fe})},G=t(41788);function J(){return(0,C.jsx)(X,{})}J.getInitialProps=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Q=(0,G.Z)(J)},37958:function(e,n,t){"use strict";t.d(n,{j:function(){return i}});var i=(0,t(44152).r)({apiReloads:{}}).useGlobalState},42305:function(e,n,t){"use strict";t.d(n,{A5:function(){return j},AY:function(){return O},BP:function(){return g},JX:function(){return m},OC:function(){return d},Pc:function(){return y},Ro:function(){return x},Tz:function(){return b},Y_:function(){return C},d$:function(){return h},jV:function(){return w},lJ:function(){return Z},n1:function(){return v},s8:function(){return s},vk:function(){return o},yD:function(){return a}});var i,r,o,u=t(82394),l=t(92083),c=t.n(l);!function(e){e.TODAY="today",e.WEEK="week",e.MONTH="month"}(o||(o={}));var s=(i={},(0,u.Z)(i,o.TODAY,"today"),(0,u.Z)(i,o.WEEK,"last 7 days"),(0,u.Z)(i,o.MONTH,"last 30 days"),i),a=(r={},(0,u.Z)(r,o.TODAY,0),(0,u.Z)(r,o.WEEK,6),(0,u.Z)(r,o.MONTH,29),r),d="YYYY-MM-DD HH:mm:ss",f="YYYY-MM-DD HH:mm",v="YYYY-MM-DD",p="MMMM D, YYYY";function h(e,n){var t=n.dayAgo,i=n.includeSeconds,r=n.utcFormat,o=c()(e),u=f;return r&&(o=o.utc()),t&&(o=o.subtract(1,"days")),i&&(u=d),o.format(u)}function b(e){var n=h((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==e&&void 0!==e&&e.dateObj?new Date(n):n}function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c().unix(e).format(null!==n&&void 0!==n&&n.withSeconds?d:f)}function g(e,n,t){return c()(e).utc().hours(+n).minutes(+t).format()}function j(e){return c()(e).unix()}function O(e,n,t,i){var r="".concat(e.toISOString().split("T")[0]," ").concat(n,":").concat(t);return i?"".concat(r,":").concat(i):r}function y(e){var n=c().unix(+e).utc();return{date:n.toDate(),hour:String(n.hour()),minute:String(n.minute())}}function x(e,n){var t=c().utc(),i=c().utc();null!==n&&void 0!==n&&n.localTime&&(t=c()().local(),i=c()().local());var r=(t=t.subtract(e,"days")).format(p),o=i.format(p);return null!==n&&void 0!==n&&n.endDateOnly?o:"".concat(r," - ").concat(o)}function w(e,n){var t=null!==n&&void 0!==n&&n.localTime?c()().local():c().utc();if(e===o.WEEK){var i=a[o.WEEK];t=t.subtract(i,"days")}else if(e===o.MONTH){var r=a[o.MONTH];t=t.subtract(r,"days")}return null!==n&&void 0!==n&&n.isoString?t.startOf("day").toISOString():t.startOf("day").format(d)}function C(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n=new Date,t=[],i=0;i<e;i++)t.unshift(n.toISOString().split("T")[0]),n.setDate(n.getDate()-1);return t}function Z(e){return e.padStart(2,"0")}},54405:function(e,n,t){"use strict";var i;t.d(n,{V5:function(){return o}}),function(e){e.ANDROID="Android",e.CHROME_OS="ChromeOS",e.IOS="iOS",e.LINUX="Linux",e.MAC="macOS",e.WINDOWS="Windows"}(i||(i={}));var r=i;function o(){return function(){var e,n,t,i,o,u,l,c=r.MAC,s=null===(e=window)||void 0===e||null===(n=e.navigator)||void 0===n?void 0:n.userAgent,a=(null===(t=window)||void 0===t||null===(i=t.navigator)||void 0===i||null===(o=i.userAgentData)||void 0===o?void 0:o.platform)||(null===(u=window)||void 0===u||null===(l=u.navigator)||void 0===l?void 0:l.platform);return a?["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].includes(a)?c=r.MAC:["Win32","Win64","Windows","WinCE"].includes(a)?c=r.WINDOWS:["iPhone","iPad","iPod"].includes(a)&&(c=r.IOS):s&&(s.includes("Macintosh")?c=r.MAC:s.includes("Windows")?c=r.WINDOWS:s.includes("Linux")&&s.includes("X11")?c=r.LINUX:/(iPhone|iPad)/.test(s)?c=r.IOS:s.includes("Android")&&s.includes("Mobi")?c=r.ANDROID:s.includes("CrOS")&&(c=r.CHROME_OS)),c}()===r.MAC}},99017:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/files",function(){return t(55389)}])}},function(e){e.O(0,[844,9902,8789,7011,5643,1424,1005,7815,6422,7722,3391,6299,9774,2888,179],(function(){return n=99017,e(e.s=n);var n}));var n=e.O();_N_E=n}]);