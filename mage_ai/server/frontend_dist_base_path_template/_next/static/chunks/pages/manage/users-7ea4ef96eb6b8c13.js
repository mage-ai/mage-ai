(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1911],{94629:function(e,r,t){"use strict";t.d(r,{Z:function(){return Z}});var n=t(82394),i=t(21831),o=t(82684),u=t(50724),s=t(82555),c=t(97618),a=t(70613),d=t(94636),l=t(68899),f=t(28598);function p(e,r){var t=e.children,n=e.noPadding;return(0,f.jsx)(l.HS,{noPadding:n,ref:r,children:t})}var v=o.forwardRef(p),h=t(62547),b=t(97927),m=t(35686),O=t(98464),j=t(46684),w=t(70515),g=t(53808),P=t(19183);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function S(e,r){var t,n=e.addProjectBreadcrumbToCustomBreadcrumbs,p=e.after,y=e.afterHeader,S=e.afterHidden,Z=e.afterWidth,E=e.afterWidthOverride,x=e.appendBreadcrumbs,k=e.before,C=e.beforeWidth,R=e.breadcrumbs,I=e.children,A=e.errors,N=e.headerMenuItems,W=e.headerOffset,H=e.hideAfterCompletely,M=e.mainContainerHeader,T=e.navigationItems,D=e.setAfterHidden,U=e.setErrors,B=e.subheaderChildren,F=e.subheaderNoPadding,z=e.title,G=e.uuid,K=(0,P.i)().width,X="dashboard_after_width_".concat(G),L="dashboard_before_width_".concat(G),V=(0,o.useRef)(null),q=(0,o.useState)(E?Z:(0,g.U2)(X,Z)),J=q[0],Q=q[1],Y=(0,o.useState)(!1),$=Y[0],ee=Y[1],re=(0,o.useState)(k?Math.max((0,g.U2)(L,C),13*w.iI):null),te=re[0],ne=re[1],ie=(0,o.useState)(!1),oe=ie[0],ue=ie[1],se=(0,o.useState)(null)[1],ce=m.ZP.projects.list({},{revalidateOnFocus:!1}).data,ae=null===ce||void 0===ce?void 0:ce.projects,de={label:function(){var e;return null===ae||void 0===ae||null===(e=ae[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},le=[];R&&(n&&le.push(de),le.push.apply(le,(0,i.Z)(R))),(null===R||void 0===R||!R.length||x)&&(null===ae||void 0===ae?void 0:ae.length)>=1&&(null!==R&&void 0!==R&&R.length||le.unshift({bold:!x,label:function(){return z}}),le.unshift(de)),(0,o.useEffect)((function(){null===V||void 0===V||!V.current||$||oe||null===se||void 0===se||se(V.current.getBoundingClientRect().width)}),[$,J,oe,te,V,se,K]),(0,o.useEffect)((function(){$||(0,g.t8)(X,J)}),[S,$,J,X]),(0,o.useEffect)((function(){oe||(0,g.t8)(L,te)}),[oe,te,L]);var fe=(0,O.Z)(Z);return(0,o.useEffect)((function(){E&&fe!==Z&&Q(Z)}),[E,Z,fe]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:z}),(0,f.jsx)(d.Z,{breadcrumbs:le,menuItems:N,project:null===ae||void 0===ae?void 0:ae[0],version:null===ae||void 0===ae||null===(t=ae[0])||void 0===t?void 0:t.version}),(0,f.jsxs)(l.Nk,{ref:r,children:[0!==(null===T||void 0===T?void 0:T.length)&&(0,f.jsx)(l.lm,{showMore:!0,children:(0,f.jsx)(b.Z,{navigationItems:T,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(h.Z,{after:p,afterHeader:y,afterHeightOffset:j.Mz,afterHidden:S,afterMousedownActive:$,afterWidth:J,before:k,beforeHeightOffset:j.Mz,beforeMousedownActive:oe,beforeWidth:l.k1+(k?te:0),headerOffset:W,hideAfterCompletely:!D||H,leftOffset:k?l.k1:null,mainContainerHeader:M,mainContainerRef:V,setAfterHidden:D,setAfterMousedownActive:ee,setAfterWidth:Q,setBeforeMousedownActive:ue,setBeforeWidth:ne,children:[B&&(0,f.jsx)(v,{noPadding:F,children:B}),I]})})]}),A&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===U||void 0===U?void 0:U(null)},children:(0,f.jsx)(s.Z,_(_({},A),{},{onClose:function(){return null===U||void 0===U?void 0:U(null)}}))})]})}var Z=o.forwardRef(S)},75083:function(e,r,t){"use strict";t.d(r,{HF:function(){return u},L6:function(){return n}});var n,i=t(82359),o=t(72473);function u(e,r,t){var u=e.owner,s=(e.roles,[{Icon:o.Vz,id:n.WORKSPACES,isSelected:function(){return n.WORKSPACES===t},label:function(){return"Workspaces"},linkProps:{href:"/manage"}}]);return u&&s.push({Icon:o.NO,id:n.USERS,isSelected:function(){return n.USERS===t},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),r==i.k.MAIN&&s.push({Icon:o.Zr,id:n.SETTINGS,isSelected:function(){return n.SETTINGS===t},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}}),s}!function(e){e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings"}(n||(n={}))},59533:function(e,r,t){"use strict";var n=t(82684),i=t(94629),o=t(35686),u=t(70515),s=t(75083),c=t(50178),a=t(28598);r.Z=function(e){var r=e.before,t=e.breadcrumbs,d=void 0===t?[]:t,l=e.children,f=e.errors,p=e.pageName,v=e.setErrors,h=e.subheaderChildren,b=o.ZP.statuses.list().data,m=(0,n.useMemo)((function(){var e,r;return null===b||void 0===b||null===(e=b.statuses)||void 0===e||null===(r=e[0])||void 0===r?void 0:r.project_type}),[b]),O=(0,c.PR)()||{};return(0,a.jsx)(i.Z,{before:r,beforeWidth:r?50*u.iI:0,breadcrumbs:d,errors:f,navigationItems:(0,s.HF)(O,m,p),setErrors:v,subheaderChildren:h,title:"Workspaces",uuid:"workspaces/index",children:l})}},12222:function(e,r,t){"use strict";t.r(r);var n=t(77837),i=t(82394),o=t(38860),u=t.n(o),s=t(82684),c=t(34376),a=t(71180),d=t(85854),l=t(93808),f=t(38276),p=t(75499),v=t(30160),h=t(59533),b=t(35686),m=t(98464),O=t(72473),j=t(70515),w=t(75083),g=t(72619),P=t(50178),y=t(42122),_=t(69419),S=t(28598);function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function x(){var e=(0,c.useRouter)(),r=(0,s.useState)(null),t=r[0],n=r[1],i=((0,P.PR)()||{}).owner,o=(0,s.useState)(null),u=o[0],l=o[1],Z=b.ZP.users.list({},{revalidateOnFocus:!1}),x=Z.data;Z.mutate;(0,s.useEffect)((function(){(0,g.bB)(x,n)}),[x]);var k=(0,s.useMemo)((function(){return(null===x||void 0===x?void 0:x.users)||[]}),[null===x||void 0===x?void 0:x.users]),C=b.ZP.users.detail(null===u||void 0===u?void 0:u.user_id,{},{revalidateOnFocus:!1}),R=C.data;C.mutate;(0,s.useEffect)((function(){(0,g.bB)(R,n)}),[R]);var I=null===R||void 0===R?void 0:R.user,A=(0,_.iV)(),N=(0,m.Z)(A);return(0,s.useEffect)((function(){var e=A.add_new_user,r=A.user_id;if(!(0,y.Xy)(A,N)){var t=E(E({},N),A);r?t.user_id=r:delete t.user_id,e?t.add_new_user=e:delete t.add_new_user,l(t)}}),[A,N]),(0,S.jsxs)(h.Z,{breadcrumbs:[{label:function(){return"Workspaces"},linkProps:{as:"/manage",href:"/manage"}},{bold:!0,label:function(){return"Users"}}],errors:t,pageName:w.L6.USERS,children:[i&&(0,S.jsx)(f.Z,{p:j.cd,children:(0,S.jsx)(a.Z,{beforeIcon:(0,S.jsx)(O.mm,{}),onClick:function(){return e.push("/manage/users/new")},primary:!0,children:"Add new user"})}),(0,S.jsx)(f.Z,{p:j.cd,children:(0,S.jsx)(d.Z,{children:"Users"})}),(0,S.jsx)(p.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var r;return(null===(r=k[e])||void 0===r?void 0:r.id)===(null===I||void 0===I?void 0:I.id)},onClickRow:function(r){var t,n=null===(t=k[r])||void 0===t?void 0:t.id;e.push("/manage/users/[user]","/manage/users/".concat(n))},rows:k.map((function(e){var r=e.email,t=e.roles_display,n=e.roles_new,i=e.username;return[(0,S.jsx)(v.ZP,{bold:!0,children:i},"username"),(0,S.jsx)(v.ZP,{default:!0,children:r},"email"),(0,S.jsx)(v.ZP,{default:!0,children:n&&n[0]?n[0].name:t},"roles")]})),uuid:"pipeline-runs"})]})}x.getInitialProps=(0,n.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),r.default=(0,l.Z)(x)},72695:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/users",function(){return t(12222)}])},80022:function(e,r,t){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(r,{Z:function(){return n}})},15544:function(e,r,t){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.d(r,{Z:function(){return n}})},99177:function(e,r,t){"use strict";function n(e,r){return n=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},n(e,r)}function i(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&n(e,r)}t.d(r,{Z:function(){return i}})},93189:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(12539),i=t(80022);function o(e,r){if(r&&("object"===n(r)||"function"===typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}},function(e){e.O(0,[844,5716,8013,600,4636,8264,6833,5499,9774,2888,179],(function(){return r=72695,e(e.s=r);var r}));var r=e.O();_N_E=r}]);