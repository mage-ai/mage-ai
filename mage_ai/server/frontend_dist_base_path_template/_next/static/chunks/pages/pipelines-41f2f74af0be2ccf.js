(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},30229:function(e,n,i){"use strict";i.d(n,{TR:function(){return f},U5:function(){return c},Wb:function(){return p},Xm:function(){return u},Z4:function(){return s},fq:function(){return l},gm:function(){return d},kJ:function(){return a}});var t,o,u,r=i(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var l,c,s=(t={},(0,r.Z)(t,u.API,(function(){return"API"})),(0,r.Z)(t,u.EVENT,(function(){return"event"})),(0,r.Z)(t,u.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(l||(l={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly",e.ALWAYS_ON="@always_on"}(c||(c={}));var d,a,p=[c.ONCE,c.HOURLY,c.DAILY,c.WEEKLY,c.MONTHLY];!function(e){e.INTERVAL="frequency[]",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(d||(d={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(a||(a={}));var f=(o={},(0,r.Z)(o,a.CREATED_AT,"Created at"),(0,r.Z)(o,a.NAME,"Name"),(0,r.Z)(o,a.PIPELINE,"Pipeline"),(0,r.Z)(o,a.STATUS,"Active"),(0,r.Z)(o,a.TYPE,"Type"),o)},31882:function(e,n,i){"use strict";var t=i(38626),o=i(71180),u=i(55485),r=i(30160),l=i(44897),c=i(72473),s=i(70515),d=i(61896),a=i(28598),p=t.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||l.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||l.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((s.iI+d.Al)/2,"px;\n    height: ").concat(1.5*s.iI+d.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((s.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((s.iI/1+d.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||l.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,i=e.children,t=e.disabled,l=e.label,d=e.monospace,f=e.onClick,v=e.primary,h=e.small,m=e.xsmall;return(0,a.jsx)(p,{border:n,primary:v,small:h,xsmall:m,children:(0,a.jsx)(o.Z,{basic:!0,disabled:t,noBackground:!0,noPadding:!0,onClick:f,transparent:!0,children:(0,a.jsxs)(u.ZP,{alignItems:"center",children:[i,l&&(0,a.jsx)(r.ZP,{monospace:d,small:h,xsmall:m,children:l}),!t&&f&&(0,a.jsx)("div",{style:{marginLeft:2}}),!t&&f&&(0,a.jsx)(c.x8,{default:v,muted:!v,size:h?s.iI:1.25*s.iI})]})})})}},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return ke}});var t=i(77837),o=i(75582),u=i(82394),r=i(38860),l=i.n(r),c=i(12691),s=i.n(c),d=i(82684),a=i(69864),p=i(34376),f=i(52749),v=i(60523),h=i(71180),m=i(90299),g=i(31882),b=i(94629),x=i(97618),j=i(55485),Z=i(85854),C=i(93369),_=i(65956),I=i(38276),w=i(30160),y=i(35576),k=i(17488),P=i(28598);var T=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,o=e.minWidth,u=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,s=e.title,a=e.value,p=(0,d.useRef)(null),f=(0,d.useState)(a),v=f[0],m=f[1],g=c?y.Z:k.Z;return(0,d.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,P.jsxs)(_.Z,{maxWidth:t,minWidth:o,children:[(0,P.jsx)(w.ZP,{bold:!0,children:s}),(0,P.jsx)(I.Z,{mt:1,children:(0,P.jsx)(g,{monospace:!0,onChange:function(e){return m(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,P.jsx)(I.Z,{mt:2,children:(0,P.jsx)(w.ZP,{muted:!0,small:!0,children:n})}),(0,P.jsx)(I.Z,{mt:3,children:(0,P.jsxs)(j.ZP,{children:[(0,P.jsx)(C.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===a||u&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,P.jsx)(I.Z,{ml:1}),(0,P.jsx)(h.Z,{onClick:r,children:"Cancel"})]})})]})},A=i(48670),E=i(57653),S=i(55729),O=i(93808),M=i(82359),R=i(4190),N=i(75499),D=i(48381),L=i(69650),G=i(85544),U=i(35686),Y=i(44897),B=i(42631),H=i(44425),V=i(72473),W=i(23780),z=i(8666),$=i(46684),q=i(53808),K="pipeline_list_filters",Q="pipeline_list_group_bys",X="pipeline_list_sort_column_index",F="pipeline_list_sort_direction",J="pipeline_list_selected_tab_uuid";function ee(e){return(0,q.t8)(K,e),e}function ne(e){return(0,q.t8)(Q,e),e}var ie=i(32929),te=i(44898),oe=i(70515),ue=i(30229),re=i(81655),le=i(31608),ce=i(81728),se=i(3917),de=i(72619),ae=i(69419),pe=i(65458),fe=i(15610),ve=i(86735),he=i(42122),me=i(3314),ge=i(70320),be=i(89538);function xe(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function je(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?xe(Object(i),!0).forEach((function(n){(0,u.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xe(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ze={Icon:V.Pf,label:function(){return"Recently viewed"},uuid:"recent"},Ce={Icon:V.vd,label:function(){return"All pipelines"},uuid:"all"},_e=[Ce,Ze],Ie="tab",we={borderRadius:B.BG,iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function ye(){var e,n=(0,p.useRouter)(),i=(0,d.useRef)(null),t=(0,d.useRef)(null),r=(0,d.useState)(null),l=r[0],c=r[1],C=(0,d.useState)(null),y=C[0],k=C[1],O=(0,d.useState)(null),B=O[0],xe=O[1],ye=(0,d.useState)(null),ke=ye[0],Pe=ye[1],Te=(0,d.useState)(null),Ae=Te[0],Ee=Te[1],Se=(0,d.useState)({}),Oe=Se[0],Me=Se[1],Re=(0,d.useState)(null),Ne=Re[0],De=Re[1],Le=(0,ae.iV)(),Ge=(0,ae.DQ)(Le,[E.$1.STATUS,E.$1.TAG,E.$1.TYPE]);(0,d.useEffect)((function(){var e;c(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Le,i]);var Ue=U.ZP.projects.list(),Ye=Ue.data,Be=Ue.mutate,He=(0,d.useMemo)((function(){var e;return null===Ye||void 0===Ye||null===(e=Ye.projects)||void 0===e?void 0:e[0]}),[Ye]),Ve=(0,d.useMemo)((function(){var e;return(0,ge.h)(null===He||void 0===He||null===(e=He.features)||void 0===e?void 0:e[M.d.LOCAL_TIMEZONE])}),[null===He||void 0===He?void 0:He.features]),We=(0,d.useMemo)((function(){var e;return null===He||void 0===He||null===(e=He.features)||void 0===e?void 0:e[M.d.OPERATION_HISTORY]}),[He]),ze=(0,d.useMemo)((function(){return Ve?re.O$:{}}),[Ve]),$e=U.ZP.pipelines.list(je(je({},Ge),{},{include_schedules:1})),qe=$e.data,Ke=$e.mutate,Qe=(0,d.useMemo)((function(){return(null===Le||void 0===Le?void 0:Le[E.$1.HISTORY_DAYS])||7}),[Le]),Xe=U.ZP.pipelines.list(je(je({},Ge),{},(e={},(0,u.Z)(e,E.$1.HISTORY_DAYS,(0,ce.HW)(Qe)?Number(Qe):Qe),(0,u.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!We}),Fe=Xe.data,Je=Xe.mutate,en=(0,d.useCallback)((function(e){var n=e||[];if(Ae){var i=Ae.toLowerCase();n=n.filter((function(e){var n=e.name,t=e.description,o=e.uuid;return(null===n||void 0===n?void 0:n.toLowerCase().includes(i))||(null===o||void 0===o?void 0:o.toLowerCase().includes(i))||(null===t||void 0===t?void 0:t.toLowerCase().includes(i))}))}return n}),[Ae]),nn=(0,d.useMemo)((function(){var e=en((null===qe||void 0===qe?void 0:qe.pipelines)||[]);return null!==Le&&void 0!==Le&&Le[E.$1.TAG]&&(e=e.filter((function(e){return e.tags.some((function(e){return Le[E.$1.TAG].includes(e)}))}))),e}),[qe,en,Le]),tn=(0,d.useMemo)((function(){return en((null===Fe||void 0===Fe?void 0:Fe.pipelines)||[])}),[Fe,en]),on=(0,d.useMemo)((function(){return(0,ve.HK)(nn,(function(e){return e.uuid}))}),[nn]),un=(0,d.useMemo)((function(){return(0,ve.HK)(tn,(function(e){return e.uuid}))}),[tn]),rn=(0,d.useCallback)((function(e){var n,i,t,o;return null===e||void 0===e||null===(n=e[2])||void 0===n||null===(i=n.props)||void 0===i||null===(t=i.children)||void 0===t||null===(o=t.props)||void 0===o?void 0:o.children}),[]),ln=(0,d.useMemo)((function(){return(null===B||void 0===B?void 0:B.length)>0?null===B||void 0===B?void 0:B.map((function(e){var n=rn(e);return null===on||void 0===on?void 0:on[n]})):nn}),[rn,B,nn,on]),cn=(0,d.useMemo)((function(){return(null===ke||void 0===ke?void 0:ke.length)>0?null===ke||void 0===ke?void 0:ke.map((function(e){var n=rn(e);return null===un||void 0===un?void 0:un[n]})):tn}),[rn,ke,tn,un]),sn=(0,d.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),dn=null===Le||void 0===Le?void 0:Le[re.lG.SORT_COL_IDX],an=null===Le||void 0===Le?void 0:Le[re.lG.SORT_DIRECTION],pn=(0,d.useMemo)((function(){return dn?{columnIndex:+dn,sortDirection:an||re.sh.ASC}:void 0}),[dn,an]),fn=null===Le||void 0===Le?void 0:Le[E.$1.GROUP],vn=(0,d.useMemo)((function(){return null===Le||void 0===Le?void 0:Le.tab}),[Le]);(0,d.useEffect)((function(){var e,n={};if(dn&&sn.includes(+dn))(0,q.t8)(X,dn),an&&(0,q.t8)(F,an);else{var i=(0,q.U2)(X,null),t=(0,q.U2)(F,re.sh.ASC);null!==i&&(n[re.lG.SORT_COL_IDX]=i,n[re.lG.SORT_DIRECTION]=t)}We&&(vn?(0,q.t8)(J,vn):n.tab=(0,q.U2)(J,null===_e||void 0===_e||null===(e=_e[0])||void 0===e?void 0:e.uuid));if(fn)ne((0,u.Z)({},fn,!0));else{var r,l=(0,q.U2)(Q,{});l&&Object.entries(l).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];!r&&t&&(r=i)})),r&&(n[E.$1.GROUP]=r)}if((0,he.Qr)(Ge)){var c={},s=(0,q.U2)(K,{});s&&Object.entries(s).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];c[i]=[],Object.entries(t).forEach((function(e){var n=(0,o.Z)(e,2),t=n[0];n[1]&&c[i].push(t)}))})),(0,he.Qr)(c)||(n=je(je({},n),c))}else{var d={};Object.entries(Ge).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];d[i]={};var u,r=t;(Array.isArray(r)||(r=[r]),r&&Array.isArray(r))&&(null===(u=r)||void 0===u||u.forEach((function(e){d[i][e]=!0})))})),ee(d)}(0,he.Qr)(n)||(0,fe.u7)(n,{pushHistory:!1})}),[fn,We,Ge,vn,sn,dn,an]),(0,d.useEffect)((function(){(0,de.bB)(qe,De)}),[qe]);var hn=function(e){return(0,a.Db)(U.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,de.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return De({errors:n,response:e})}})}})},mn=hn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),gn=(0,o.Z)(mn,2),bn=gn[0],xn=gn[1].isLoading,jn=hn((function(){null===Ke||void 0===Ke||Ke(),null===Je||void 0===Je||Je()})),Zn=(0,o.Z)(jn,2),Cn=Zn[0],_n=Zn[1].isLoading,In=(0,a.Db)((function(e){return U.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,de.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Me((function(e){return je(je({},e),{},(0,u.Z)({},n,!1))})),Ke(),null===Je||void 0===Je||Je(),null===Rn||void 0===Rn||Rn(),k(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Me((function(e){return je(je({},e),{},(0,u.Z)({},t,!1))})),De({errors:n,response:e})}})}}),wn=(0,o.Z)(In,2),yn=wn[0],kn=wn[1].isLoading,Pn=(0,a.Db)((function(e){return U.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,de.wD)(e,{callback:function(){null===Ke||void 0===Ke||Ke(),null===Je||void 0===Je||Je()},onErrorCallback:function(e,n){return De({errors:n,response:e})}})}}),Tn=(0,o.Z)(Pn,2),An=Tn[0],En=Tn[1].isLoading,Sn=(0,be.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,P.jsx)(T,{isLoading:kn,minWidth:55*oe.iI,noEmptyValue:!!t,onClose:Rn,onSave:function(e){var i=n||y;if(i){var o=i.uuid,r={uuid:o};t?r.name=e:r.description=e,Me((function(e){return je(je({},e),{},(0,u.Z)({},o,!0))})),yn(r)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null===n||void 0===n?void 0:n.uuid),value:t||i})}),{},[kn,y],{background:!0,uuid:"rename_pipeline_and_save"}),On=(0,o.Z)(Sn,2),Mn=On[0],Rn=On[1],Nn=(0,be.dd)((function(){return(0,P.jsx)(W.BC,{children:(0,P.jsx)(v.Z,{contained:!0,onClickCustomTemplate:function(e){bn({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,ce.Y6)()}}).then((function(){Gn()}))},showBreadcrumbs:!0,tabs:[ie.A2]})})}),{},[bn],{background:!0,uuid:"browse_templates"}),Dn=(0,o.Z)(Nn,2),Ln=Dn[0],Gn=Dn[1],Un=(0,be.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,P.jsx)(W.BC,{children:(0,P.jsx)(S.Z,{cancelButtonText:n,contained:!0,header:(0,P.jsx)(I.Z,{mb:oe.HN,children:(0,P.jsxs)(_.Z,{children:[(0,P.jsx)(w.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,P.jsx)(I.Z,{mt:1,children:(0,P.jsxs)(w.ZP,{warning:!0,children:["Read ",(0,P.jsx)(A.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),Hn()},onSaveSuccess:function(e){Be(),Hn(),null===t||void 0===t||t(e)}})})}),{},[Be],{background:!0,uuid:"configure_project"}),Yn=(0,o.Z)(Un,2),Bn=Yn[0],Hn=Yn[1],Vn=(0,be.dd)((function(){return(0,P.jsx)(W.BC,{children:(0,P.jsx)(f.Z,{createPipeline:bn,isLoading:xn,onClose:$n})})}),{},[bn,xn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),Wn=(0,o.Z)(Vn,2),zn=Wn[0],$n=Wn[1],qn=(0,d.useMemo)((function(){return(0,pe.d)(bn,{showAIModal:function(){null!==He&&void 0!==He&&He.openai_api_key?zn():Bn({onSaveSuccess:function(){zn()}})},showBrowseTemplates:Ln})}),[bn,He,zn,Ln,Bn]),Kn=U.ZP.tags.list().data,Qn=(0,d.useMemo)((function(){return(0,ve.YC)((null===Kn||void 0===Kn?void 0:Kn.tags)||[],(function(e){return e.uuid}))}),[Kn]),Xn=(0,d.useMemo)((function(){return(0,P.jsx)(G.Z,{addButtonProps:{isLoading:xn,label:"New",menuItems:qn},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:En,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===y||void 0===y?void 0:y.uuid,"?"))&&An(null===y||void 0===y?void 0:y.uuid)}},extraActionButtonProps:{Icon:V.oX,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===y||void 0===y?void 0:y.uuid,"?"),isLoading:_n,onClick:function(){return Cn({pipeline:{clone_pipeline_uuid:null===y||void 0===y?void 0:y.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:E.kA,tag:Qn.map((function(e){return e.uuid})),type:Object.values(E.qL)},filterValueLabelMapping:{status:E.kA.reduce((function(e,n){return je(je({},e),{},(0,u.Z)({},n,(0,ce.J3)((0,ce.kC)(n))))}),{}),tag:Qn.reduce((function(e,n){var i=n.uuid;return je(je({},e),{},(0,u.Z)({},i,i))}),{}),type:E.G7},groupButtonProps:{groupByLabel:fn,menuItems:[{beforeIcon:fn===E.r0.STATUS?(0,P.jsx)(V.Jr,{fill:Y.Z.content.default,size:1.5*oe.iI}):(0,P.jsx)(V.Cd,{muted:!0,size:1.5*oe.iI}),label:function(){return(0,ce.kC)(E.r0.STATUS)},onClick:function(){var e=fn===E.r0.STATUS?null:E.r0.STATUS;e||ne({}),(0,fe.u7)((0,u.Z)({},E.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:fn===E.r0.TAG?(0,P.jsx)(V.Jr,{fill:Y.Z.content.default,size:1.5*oe.iI}):(0,P.jsx)(V.Cd,{muted:!0,size:1.5*oe.iI}),label:function(){return(0,ce.kC)(E.r0.TAG)},onClick:function(){var e=fn===E.r0.TAG?null:E.r0.TAG;e||ne({}),(0,fe.u7)((0,u.Z)({},E.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:fn===E.r0.TYPE?(0,P.jsx)(V.Jr,{fill:Y.Z.content.default,size:1.5*oe.iI}):(0,P.jsx)(V.Cd,{muted:!0,size:1.5*oe.iI}),label:function(){return(0,ce.kC)(E.r0.TYPE)},onClick:function(){var e=fn===E.r0.TYPE?null:E.r0.TYPE;e||ne({}),(0,fe.u7)((0,u.Z)({},E.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return Mn({pipelineName:null===y||void 0===y?void 0:y.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return Mn({pipeline:y,pipelineDescription:null===y||void 0===y?void 0:y.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){ee({}),n.push("/pipelines")},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&ee({})},query:Ge,searchProps:{onChange:Ee,value:Ae},selectedRowId:null===y||void 0===y?void 0:y.uuid,setSelectedRow:k})}),[Cn,An,fn,_n,xn,En,qn,Ge,n,Ae,y,Mn,Qn]),Fn=(0,W.VI)(null,{},[],{uuid:"pipelines/list"}),Jn=(0,o.Z)(Fn,1)[0],ei=(0,a.Db)(U.ZP.projects.useUpdate(null===He||void 0===He?void 0:He.name),{onSuccess:function(e){return(0,de.wD)(e,{callback:function(){Be()},onErrorCallback:function(e,n){return Jn({errors:n,response:e})}})}}),ni=(0,o.Z)(ei,2),ii=ni[0],ti=ni[1].isLoading,oi=(0,d.useCallback)((function(e){return ii({project:e})}),[ii]),ui=(0,be.dd)((function(){return(0,P.jsxs)(_.Z,{maxWidth:60*oe.iI,children:[(0,P.jsx)(I.Z,{mb:1,children:(0,P.jsx)(Z.Z,{children:"Help improve Mage"})}),(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsx)(w.ZP,{default:!0,children:"Please contribute usage statistics to help improve the developer experience for you and everyone in the community \ud83e\udd1d."})}),(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsx)(_.Z,{success:!0,children:(0,P.jsxs)(j.ZP,{alignItems:"center",children:[(0,P.jsx)(V.Yo,{size:5*oe.iI,success:!0}),(0,P.jsx)(I.Z,{mr:1}),(0,P.jsx)(x.Z,{children:(0,P.jsx)(w.ZP,{children:"All usage statistics are completely anonymous. It\u2019s impossible for Mage to know which statistics belongs to whom."})})]})})}),(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsxs)(w.ZP,{default:!0,children:["By opting into sending usage statistics to ",(0,P.jsx)(A.Z,{href:"https://www.mage.ai",openNewWindow:!0,children:"Mage"}),", it\u2019ll help the team and community of contributors (",(0,P.jsx)(A.Z,{href:"https://www.mage.ai/chat",openNewWindow:!0,children:"Magers"}),") learn what\u2019s going wrong with the tool and what improvements can be made."]})}),(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsx)(w.ZP,{default:!0,children:"In addition to helping reduce potential errors, you\u2019ll help inform which features are useful and which need work."})}),(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,P.jsx)(w.ZP,{bold:!0,children:"I want to help make Mage more powerful for everyone"}),(0,P.jsx)(I.Z,{mr:oe.cd}),(0,P.jsx)(L.Z,{checked:!0,onCheck:function(){window.confirm("Are you sure you don\u2019t want to help everyone in the community?")&&oi({help_improve_mage:!1}).then((function(){return ci()}))}})]})}),ti&&(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsx)(R.Z,{inverted:!0})}),(0,P.jsx)(I.Z,{mb:oe.cd,children:(0,P.jsxs)(w.ZP,{muted:!0,small:!0,children:["To learn more about how this works, please check out the ",(0,P.jsx)(A.Z,{href:"https://docs.mage.ai/contributing/statistics/overview",openNewWindow:!0,small:!0,children:"documentation"}),"."]})}),(0,P.jsx)(h.Z,{onClick:function(){return oi({help_improve_mage:!0}).then((function(){return ci()}))},secondary:!0,children:"Close"})]})}),{},[He],{background:!0,hideCallback:function(){oi({help_improve_mage:!0})},uuid:"help_mage"}),ri=(0,o.Z)(ui,2),li=ri[0],ci=ri[1];(0,d.useEffect)((function(){He&&null===(null===He||void 0===He?void 0:He.help_improve_mage)&&li()}),[He,li]);var si=(0,d.useCallback)((function(e){var n={};null===e||void 0===e||e.forEach((function(e,i){var t=null===e||void 0===e?void 0:e[fn];if(E.r0.STATUS===fn){var o=(e||{}).schedules,u=void 0===o?[]:o,r=u.length;t=u.find((function(e){var n=e.status;return ue.fq.ACTIVE===n}))?E.QK.ACTIVE:r>=1?E.QK.INACTIVE:E.QK.NO_SCHEDULES}else if(E.r0.TAG===fn){t=(null===e||void 0===e?void 0:e.tags)?(0,ve.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];E.r0.STATUS===fn?Object.values(E.QK).forEach((function(e){i.push(n[e]),t.push((0,ce.vg)(e))})):E.r0.TAG===fn?(0,ve.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,P.jsx)(g.Z,{small:!0,children:(0,P.jsx)(w.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):E.r0.TYPE===fn&&Object.values(E.qL).forEach((function(e){i.push(n[e]),t.push(E.G7[e])}));var o=[],u=[];return null===i||void 0===i||i.forEach((function(e,n){"undefined"!==typeof e&&null!==e&&(null===e||void 0===e?void 0:e.length)>=1&&(u.push(e),o.push(null===t||void 0===t?void 0:t[n]))})),{rowGroupHeaders:o,rowsGroupedByIndex:u}}),[fn]),di=(0,d.useMemo)((function(){return si(ln)}),[si,ln]),ai=di.rowGroupHeaders,pi=di.rowsGroupedByIndex,fi=(0,d.useMemo)((function(){return si(cn)}),[si,cn]),vi=fi.rowGroupHeaders,hi=fi.rowsGroupedByIndex,mi=(0,d.useCallback)((function(e,i,o,r,l){return(0,P.jsx)(N.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,ce.kC)(E.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,ce.kC)(E.r0.TYPE)},je(je({},ze),{},{uuid:"Updated at"}),je(je({},ze),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],defaultSortColumnIndex:2,getUniqueRowIdentifier:rn,isSelectedRow:function(e){var n;return(null===(n=i[e])||void 0===n?void 0:n.uuid)===(null===y||void 0===y?void 0:y.uuid)},localStorageKeySortColIdx:X,localStorageKeySortDirection:F,onClickRow:function(e){return k((function(n){var t=i[e];return(null===n||void 0===n?void 0:n.uuid)!==(null===t||void 0===t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(e){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(i[e].uuid,"/edit"))},ref:t,renderRightClickMenuItems:function(e){var t=i[e];return[{label:function(){return"Edit description"},onClick:function(){return Mn({pipeline:t,pipelineDescription:null===t||void 0===t?void 0:t.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return Mn({pipeline:t,pipelineName:null===t||void 0===t?void 0:t.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return Cn({pipeline:{clone_pipeline_uuid:null===t||void 0===t?void 0:t.uuid}})},uuid:"clone"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===t||void 0===t?void 0:t.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(te.R,"&new=1&pipeline_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(z.b.PIPELINE,"&new=1&object_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"))&&An(null===t||void 0===t?void 0:t.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:25*oe.iI,rowGroupHeaders:o,rows:null===e||void 0===e?void 0:e.map((function(e,i){var t=e.blocks,o=e.created_at,r=e.description,l=e.schedules,c=e.tags,d=e.type,a=e.updated_at,p=e.uuid,f=t.filter((function(e){var n=e.type;return H.tf.SCRATCHPAD!==n})).length,v=l.length,m=l.find((function(e){var n=e.status;return ue.fq.ACTIVE===n})),g=(0,P.jsx)("div",{children:(0,P.jsx)(D.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||Oe[p]?(0,P.jsx)(h.Z,{iconOnly:!0,loading:!!Oe[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,me.j)(n),Me((function(e){return je(je({},e),{},(0,u.Z)({},p,!0))})),yn(je(je({},e),{},{status:m?ue.fq.INACTIVE:ue.fq.ACTIVE}))},children:m?(0,P.jsx)(V.dz,{muted:!0,size:2*oe.iI}):(0,P.jsx)(V.Py,{default:!0,size:2*oe.iI})}):null,(0,P.jsx)(w.ZP,{default:!m,monospace:!0,success:!!m,children:m?ue.fq.ACTIVE:v>=1?ue.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,P.jsx)(s(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,P.jsx)(A.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,P.jsx)(w.ZP,{default:!0,preWrap:!0,title:r,children:r},"pipeline_description_".concat(i)),(0,P.jsx)(w.ZP,{children:E.G7[d]},"pipeline_type_".concat(i)),(0,P.jsx)(w.ZP,{monospace:!0,small:!0,title:a?(0,se._6)(a):null,children:a?(0,se.XG)(a,Ve):(0,P.jsx)(P.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(i)),(0,P.jsx)(w.ZP,{monospace:!0,small:!0,title:o?(0,se._6)(o):null,children:o?(0,se.XG)(o.slice(0,19),Ve):(0,P.jsx)(P.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(i)),g,(0,P.jsx)(w.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,P.jsx)(w.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,P.jsxs)(x.Z,{flex:1,justifyContent:"flex-end",children:[(0,P.jsx)(h.Z,je(je({},we),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,P.jsx)(V.UY,{default:!0,size:2*oe.iI})})),(0,P.jsx)(I.Z,{mr:1}),(0,P.jsx)(h.Z,je(je({},we),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,P.jsx)(V.$B,{default:!0,size:2*oe.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:r,setRowsSorted:l,sortableColumnIndexes:sn,sortedColumn:pn,stickyHeader:!0})}),[Cn,An,Ve,rn,Oe,n,y,Me,k,Mn,sn,pn,ze,yn]),gi=(0,d.useMemo)((function(){return mi(nn,ln,ai,pi,xe)}),[nn,ln,mi,ai,pi,xe]),bi=(0,d.useMemo)((function(){return mi(tn,cn,vi,hi,Pe)}),[tn,cn,mi,vi,hi,Pe]),xi=(0,d.useMemo)((function(){return(null===nn||void 0===nn?void 0:nn.length)||0}),[nn]),ji=(0,d.useMemo)((function(){return(null===tn||void 0===tn?void 0:tn.length)||0}),[tn]),Zi=(0,d.useMemo)((function(){return(!We||Ce.uuid===vn)&&!xi||We&&Ze.uuid===vn&&!ji}),[We,xi,ji,vn]);return(0,P.jsxs)(b.Z,{errors:Ne,setErrors:De,subheaderChildren:Xn,title:"Pipelines",uuid:"pipelines/index",children:[We&&(0,P.jsx)(I.Z,{pb:fn?0:oe.cd,pt:oe.cd,px:oe.cd,ref:i,children:(0,P.jsx)(m.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return(0,fe.u7)((0,u.Z)({},Ie,n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:vn,tabs:_e})}),Zi?(0,P.jsx)(I.Z,{p:oe.Mq,children:qe?(0,P.jsx)(w.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,P.jsx)(R.Z,{inverted:!0,large:!0})}):null,(0,P.jsxs)(le.cl,{hide:Zi,includePadding:!!fn,maxHeight:"calc(100vh - ".concat($.Mz+74+(l||0),"px)"),children:[(!We||Ce.uuid===vn)&&gi,We&&Ze.uuid===vn&&bi]})]})}ye.getInitialProps=(0,t.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var ke=(0,O.Z)(ye)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])}},function(e){e.O(0,[844,5716,6463,1124,341,8789,1751,1821,8013,600,4636,8264,6833,5499,4366,632,5810,1769,3859,9264,5544,1952,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);