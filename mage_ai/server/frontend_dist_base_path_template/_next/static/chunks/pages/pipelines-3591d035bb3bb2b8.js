(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return De}});var t=i(77837),u=i(75582),o=i(21831),r=i(82394),l=i(38860),c=i.n(l),s=i(12691),d=i.n(s),a=i(82684),p=i(69864),f=i(34376),v=i(52749),h=i(60523),m=i(71180),b=i(90299),g=i(31882),j=i(76111),Z=i(94629),C=i(97618),_=i(55485),x=i(68562),P=i(65956),y=i(38276),I=i(30160),k=i(35576),T=i(17488),w=i(28598);var S=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,u=e.minWidth,o=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,s=e.title,d=e.value,p=(0,a.useRef)(null),f=(0,a.useState)(d),v=f[0],h=f[1],b=c?k.Z:T.Z;return(0,a.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,w.jsxs)(P.Z,{maxWidth:t,minWidth:u,children:[(0,w.jsx)(I.ZP,{bold:!0,children:s}),(0,w.jsx)(y.Z,{mt:1,children:(0,w.jsx)(b,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,w.jsx)(y.Z,{mt:2,children:(0,w.jsx)(I.ZP,{muted:!0,small:!0,children:n})}),(0,w.jsx)(y.Z,{mt:3,children:(0,w.jsxs)(_.ZP,{children:[(0,w.jsx)(x.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===d||o&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,w.jsx)(y.Z,{ml:1}),(0,w.jsx)(m.ZP,{onClick:r,children:"Cancel"})]})})]})},O=i(48670),E=i(55072),A=i(57653),D=i(55729),M=i(93808),R=i(82359),G=i(44085),$=i(4190),U=i(75499),L=i(48381),N=i(85544),B=i(70026),H=i(35686),F=i(44897),Y=i(77417),Q=i(42631),z=i(44425),V=i(72473),q=i(23780),W=i(8666),K=i(46684),X=i(53808),J="pipeline_list_filters",ee="pipeline_list_group_bys",ne="pipeline_list_sort_column_index",ie="pipeline_list_sort_direction",te="pipeline_list_selected_tab_uuid";function ue(e){return(0,X.t8)(J,e),e}function oe(e){return(0,X.t8)(ee,e),e}var re=i(11498),le=i(32929),ce=i(44898),se=i(70515),de=i(30229),ae=i(81655),pe=i(31608),fe=i(81728),ve=i(3917),he=i(72619),me=i(69419),be=i(65458),ge=i(15610),je=i(42122),Ze=i(95924),Ce=i(86735),_e=i(70320),xe=i(89538),Pe=i(44952);function ye(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ie(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ye(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ye(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var ke={Icon:V.Schedule,label:function(){return"Recently viewed"},uuid:"recent"},Te={Icon:V.PipelineV3,label:function(e){return null!==e&&void 0!==e&&e.count?"All pipelines \u203a ".concat((null===e||void 0===e?void 0:e.count)||0):"All pipelines"},uuid:"all"},we=[Te,ke],Se="tab",Oe=[A.$1.SEARCH],Ee={borderRadius:"".concat(Q.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function Ae(){var e,n=(0,f.useRouter)(),i=(0,a.useRef)(null),t=(0,a.useRef)(null),l=(0,a.useRef)(null),c=(0,a.useRef)(null),s=(0,Y.Z)(),x=s.fetchProjects,k=s.project,T=(0,a.useState)(null),M=T[0],Q=T[1],ye=(0,a.useState)(null),Ae=ye[0],De=ye[1],Me=(0,a.useState)(null),Re=Me[0],Ge=Me[1],$e=(0,a.useCallback)((function(e){Ge(e),clearTimeout(c.current),c.current=setTimeout((function(){var n;return(0,ge.u)((n={},(0,r.Z)(n,re.$D.OFFSET,0),(0,r.Z)(n,A.$1.SEARCH,e),n))}),500)}),[Ge]),Ue=(0,a.useState)({}),Le=Ue[0],Ne=Ue[1],Be=(0,a.useState)(null),He=Be[0],Fe=Be[1],Ye=(0,me.iV)(),Qe=Ie({},(0,me.DQ)(Ye,[A.$1.SEARCH,A.$1.STATUS,A.$1.TAG,A.$1.TYPE].concat((0,o.Z)(re.RG)))),ze=(0,a.useMemo)((function(){return null===Ye||void 0===Ye?void 0:Ye.tab}),[Ye]);(0,a.useEffect)((function(){var e;Q(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Ye,i]);var Ve=(0,a.useMemo)((function(){var e;return(0,_e.hY)(null===k||void 0===k||null===(e=k.features)||void 0===e?void 0:e[R.d.LOCAL_TIMEZONE])}),[null===k||void 0===k?void 0:k.features]),qe=(0,a.useMemo)((function(){var e;return null===k||void 0===k||null===(e=k.features)||void 0===e?void 0:e[R.d.OPERATION_HISTORY]}),[k]),We=(0,a.useMemo)((function(){return Ve?ae.O$:{}}),[Ve]),Ke=H.ZP.pipelines.list(Ie(Ie({},Qe),{},{include_schedules:1}),{revalidateOnFocus:!1}),Xe=Ke.data,Je=Ke.mutate,en=(0,a.useMemo)((function(){return(null===Ye||void 0===Ye?void 0:Ye[A.$1.HISTORY_DAYS])||7}),[Ye]),nn=H.ZP.pipelines.list(Ie(Ie({},Qe),{},(e={},(0,r.Z)(e,A.$1.HISTORY_DAYS,(0,fe.HW)(en)?Number(en):en),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!qe||!ze||ke.uuid!==ze}),tn=nn.data,un=nn.mutate,on=(0,a.useCallback)((function(e){return e}),[]),rn=(0,a.useMemo)((function(){var e=on((null===Xe||void 0===Xe?void 0:Xe.pipelines)||[]);if(null!==Ye&&void 0!==Ye&&Ye[A.$1.TAG]){var n=Ye[A.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(A.$1.NO_TAGS)}))}return e}),[Xe,on,Ye]),ln=(0,a.useMemo)((function(){return on((null===tn||void 0===tn?void 0:tn.pipelines)||[])}),[tn,on]),cn=(0,a.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),sn=null===Ye||void 0===Ye?void 0:Ye[ae.lG.SORT_COL_IDX],dn=null===Ye||void 0===Ye?void 0:Ye[ae.lG.SORT_DIRECTION],an=(0,a.useMemo)((function(){return sn?{columnIndex:+sn,sortDirection:dn||ae.sh.ASC}:void 0}),[sn,dn]),pn=null===Ye||void 0===Ye?void 0:Ye[A.$1.GROUP],fn=(0,p.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,t=void 0!==i&&i;return H.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:t}})}),{onSuccess:function(e){return(0,he.wD)(e,{callback:function(){var n=e.data.download.token;(0,Pe.K)(n)},onErrorCallback:function(e,n){return Fe({errors:n,response:e})}})}}),vn=(0,u.Z)(fn,1)[0];(0,a.useEffect)((function(){null!==Qe&&void 0!==Qe&&Qe[A.$1.SEARCH]&&null===Re&&Ge(null===Qe||void 0===Qe?void 0:Qe[A.$1.SEARCH])}),[Qe,Re,Ge]),(0,a.useEffect)((function(){var e,n={};if(!sn){var i=(0,X.U2)(ne,null),t=(0,X.U2)(ie,ae.sh.ASC);null!==i&&(n[ae.lG.SORT_COL_IDX]=i,n[ae.lG.SORT_DIRECTION]=t)}qe&&(ze?(0,X.t8)(te,ze):n.tab=(0,X.U2)(te,null===we||void 0===we||null===(e=we[0])||void 0===e?void 0:e.uuid));if(pn)oe((0,r.Z)({},pn,!0));else{var o,l=(0,X.U2)(ee,{});l&&Object.entries(l).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];!o&&t&&(o=i)})),o&&(n[A.$1.GROUP]=o)}if((0,je.Qr)(Qe)){var c=(0,r.Z)({},re.$D.LIMIT,E.Q),s=(0,X.U2)(J,{});s&&Object.entries(s).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];"undefined"!==typeof t&&null!==t&&(re.RG.includes(i)||Oe.includes(i)?c[i]=t:(c[i]=[],Object.entries(t).forEach((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1]&&c[i].push(t)}))))})),(0,je.Qr)(c)||(n={},Object.entries(Ie(Ie({},n),c)||{}).forEach((function(e){var i=(0,u.Z)(e,2),t=i[0],o=i[1];"undefined"!==typeof o&&null!==o&&(n[t]=o)})))}else{var d={};Object.entries(Qe).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];d[i]={};var o,r=t;"undefined"!==typeof t&&null!==t&&(re.RG.includes(i)||Oe.includes(i)?d[i]=r:(Array.isArray(r)||(r=[r]),r&&Array.isArray(r)&&(null===(o=r)||void 0===o||o.forEach((function(e){d[i][e]=!0})))))})),ue((0,je.hB)(d))}(0,je.Qr)(n)||(0,ge.u)((0,je.hB)(n),{pushHistory:!1})}),[pn,qe,Qe,ze,cn,sn,dn]),(0,a.useEffect)((function(){(0,he.bB)(Xe,Fe)}),[Xe]);var hn=function(e){return(0,p.Db)(H.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,he.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return Fe({errors:n,response:e})}})}})},mn=hn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),bn=(0,u.Z)(mn,2),gn=bn[0],jn=bn[1].isLoading,Zn=hn((function(){null===Je||void 0===Je||Je(),null===un||void 0===un||un()})),Cn=(0,u.Z)(Zn,2),_n=Cn[0],xn=Cn[1].isLoading,Pn=(0,p.Db)((function(e){return H.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,he.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Ne((function(e){return Ie(Ie({},e),{},(0,r.Z)({},n,!1))})),Je(),null===un||void 0===un||un(),null===Un||void 0===Un||Un(),De(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Ne((function(e){return Ie(Ie({},e),{},(0,r.Z)({},t,!1))})),Fe({errors:n,response:e})}})}}),yn=(0,u.Z)(Pn,2),In=yn[0],kn=yn[1].isLoading,Tn=(0,p.Db)((function(e){return H.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,he.wD)(e,{callback:function(){null===Je||void 0===Je||Je(),null===un||void 0===un||un()},onErrorCallback:function(e,n){return Fe({errors:n,response:e})}})}}),wn=(0,u.Z)(Tn,2),Sn=wn[0],On=wn[1].isLoading,En=(0,xe.dd)((function(e){var n=e.pipelineType;return(0,w.jsx)(j.Z,{onClose:Mn,onSave:function(e){var i=e.name,t=e.description,u=e.tags;gn({pipeline:{description:t,name:i,tags:u,type:n}})},pipelineType:n})}),{},[gn],{background:!0,disableEscape:!0,uuid:"overview/create_pipeline"}),An=(0,u.Z)(En,2),Dn=An[0],Mn=An[1],Rn=(0,xe.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,w.jsx)(S,{isLoading:kn,minWidth:55*se.iI,noEmptyValue:!!t,onClose:Un,onSave:function(e){var i=n||Ae;if(i){var u=i.uuid,o={uuid:u};t?o.name=e:o.description=e,Ne((function(e){return Ie(Ie({},e),{},(0,r.Z)({},u,!0))})),In(o)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null===n||void 0===n?void 0:n.uuid),value:t||i})}),{},[kn,Ae],{background:!0,uuid:"rename_pipeline_and_save"}),Gn=(0,u.Z)(Rn,2),$n=Gn[0],Un=Gn[1],Ln=(0,xe.dd)((function(){return(0,w.jsx)(B.Z,{fetchPipelines:Je,onCancel:Hn})}),{},[Je],{background:!0,uuid:"upload_pipeline"}),Nn=(0,u.Z)(Ln,2),Bn=Nn[0],Hn=Nn[1],Fn=(0,xe.dd)((function(){return(0,w.jsx)(q.BC,{children:(0,w.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){gn({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,fe.Y6)()}}).then((function(){zn()}))},showBreadcrumbs:!0,tabs:[le.A2]})})}),{},[gn],{background:!0,uuid:"browse_templates"}),Yn=(0,u.Z)(Fn,2),Qn=Yn[0],zn=Yn[1],Vn=(0,xe.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,w.jsx)(q.BC,{children:(0,w.jsx)(D.Z,{cancelButtonText:n,contained:!0,header:(0,w.jsx)(y.Z,{mb:se.HN,children:(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(I.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,w.jsx)(y.Z,{mt:1,children:(0,w.jsxs)(I.ZP,{warning:!0,children:["Read ",(0,w.jsx)(O.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),Kn()},onSaveSuccess:function(e){x(),Kn(),null===t||void 0===t||t(e)}})})}),{},[x],{background:!0,uuid:"configure_project"}),qn=(0,u.Z)(Vn,2),Wn=qn[0],Kn=qn[1],Xn=(0,xe.dd)((function(){return(0,w.jsx)(q.BC,{children:(0,w.jsx)(v.Z,{createPipeline:gn,isLoading:jn,onClose:ni})})}),{},[gn,jn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),Jn=(0,u.Z)(Xn,2),ei=Jn[0],ni=Jn[1],ii=(0,a.useMemo)((function(){return(0,be.d)(gn,{showAIModal:function(){null!==k&&void 0!==k&&k.openai_api_key?ei():Wn({onSaveSuccess:function(){ei()}})},showBrowseTemplates:Qn,showCreatePipelineModal:Dn,showImportPipelineModal:Bn})}),[gn,k,ei,Qn,Wn,Dn,Bn]),ti=H.ZP.tags.list().data,ui=(0,a.useMemo)((function(){return(0,Ce.YC)((null===ti||void 0===ti?void 0:ti.tags)||[],(function(e){return e.uuid}))}),[ti]),oi=(0,a.useMemo)((function(){return(0,w.jsx)(N.Z,{addButtonProps:{isLoading:jn,label:"New",menuItems:ii},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:On,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===Ae||void 0===Ae?void 0:Ae.uuid,"?"))&&Sn(null===Ae||void 0===Ae?void 0:Ae.uuid)}},extraActionButtonProps:{Icon:V.Clone,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===Ae||void 0===Ae?void 0:Ae.uuid,"?"),isLoading:xn,onClick:function(){return _n({pipeline:{clone_pipeline_uuid:null===Ae||void 0===Ae?void 0:Ae.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:A.kA,tag:[A.$1.NO_TAGS].concat((0,o.Z)(ui.map((function(e){return e.uuid})))),type:Object.values(A.qL)},filterValueLabelMapping:{status:A.kA.reduce((function(e,n){return Ie(Ie({},e),{},(0,r.Z)({},n,(0,fe.J3)((0,fe.kC)(n))))}),{}),tag:Ie((0,r.Z)({},A.$1.NO_TAGS,"No tags"),ui.reduce((function(e,n){var i=n.uuid;return Ie(Ie({},e),{},(0,r.Z)({},i,i))}),{})),type:A.G7},groupButtonProps:{groupByLabel:pn,menuItems:[{beforeIcon:pn===A.r0.STATUS?(0,w.jsx)(V.Check,{fill:F.Z.content.default,size:1.5*se.iI}):(0,w.jsx)(V.Circle,{muted:!0,size:1.5*se.iI}),label:function(){return(0,fe.kC)(A.r0.STATUS)},onClick:function(){var e=pn===A.r0.STATUS?null:A.r0.STATUS;e||oe({}),(0,ge.u)((0,r.Z)({},A.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:pn===A.r0.TAG?(0,w.jsx)(V.Check,{fill:F.Z.content.default,size:1.5*se.iI}):(0,w.jsx)(V.Circle,{muted:!0,size:1.5*se.iI}),label:function(){return(0,fe.kC)(A.r0.TAG)},onClick:function(){var e=pn===A.r0.TAG?null:A.r0.TAG;e||oe({}),(0,ge.u)((0,r.Z)({},A.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:pn===A.r0.TYPE?(0,w.jsx)(V.Check,{fill:F.Z.content.default,size:1.5*se.iI}):(0,w.jsx)(V.Circle,{muted:!0,size:1.5*se.iI}),label:function(){return(0,fe.kC)(A.r0.TYPE)},onClick:function(){var e=pn===A.r0.TYPE?null:A.r0.TYPE;e||oe({}),(0,ge.u)((0,r.Z)({},A.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return $n({pipelineName:null===Ae||void 0===Ae?void 0:Ae.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return $n({pipeline:Ae,pipelineDescription:null===Ae||void 0===Ae?void 0:Ae.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){ue({}),Ge(""),null===Je||void 0===Je||Je().then((function(){var e;(0,ge.u)((e={},(0,r.Z)(e,re.$D.LIMIT,(null===Qe||void 0===Qe?void 0:Qe[re.$D.LIMIT])||E.Q),(0,r.Z)(e,A.$1.SEARCH,""),e),{replaceParams:!0})}))},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&ue({})},query:Qe,resetLimitOnFilterApply:!0,searchProps:{onChange:$e,value:Re},selectedRowId:null===Ae||void 0===Ae?void 0:Ae.uuid,setSelectedRow:De})}),[_n,Sn,Je,pn,xn,jn,On,ii,Qe,Re,Ae,$e,$n,ui]),ri=(0,a.useCallback)((function(e){var n={};null===e||void 0===e||e.forEach((function(e,i){var t=null===e||void 0===e?void 0:e[pn];if(A.r0.STATUS===pn){var u=(e||{}).schedules,o=void 0===u?[]:u,r=o.length;t=o.find((function(e){var n=e.status;return de.fq.ACTIVE===n}))?A.QK.ACTIVE:r>=1?A.QK.INACTIVE:A.QK.NO_SCHEDULES}else if(A.r0.TAG===pn){t=(null===e||void 0===e?void 0:e.tags)?(0,Ce.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];A.r0.STATUS===pn?Object.values(A.QK).forEach((function(e){i.push(n[e]),t.push((0,fe.vg)(e))})):A.r0.TAG===pn?(0,Ce.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,w.jsx)(g.Z,{small:!0,children:(0,w.jsx)(I.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):A.r0.TYPE===pn&&Object.values(A.qL).forEach((function(e){i.push(n[e]),t.push(A.G7[e])}));var u=[],o=[];return null===i||void 0===i||i.forEach((function(e,n){"undefined"!==typeof e&&null!==e&&(null===e||void 0===e?void 0:e.length)>=1&&(o.push(e),u.push(null===t||void 0===t?void 0:t[n]))})),{rowGroupHeaders:u,rowsGroupedByIndex:o}}),[pn]),li=(0,a.useMemo)((function(){return ri(rn)}),[ri,rn]),ci=li.rowGroupHeaders,si=li.rowsGroupedByIndex,di=(0,a.useMemo)((function(){return ri(ln)}),[ri,ln]),ai=di.rowGroupHeaders,pi=di.rowsGroupedByIndex,fi=(0,a.useCallback)((function(e,i,u){return(0,w.jsx)(U.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,fe.kC)(A.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,fe.kC)(A.r0.TYPE)},Ie(Ie({},We),{},{uuid:"Updated at"}),Ie(Ie({},We),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],isSelectedRow:function(n){var i;return(null===(i=e[n])||void 0===i?void 0:i.uuid)===(null===Ae||void 0===Ae?void 0:Ae.uuid)},localStorageKeySortColIdx:ne,localStorageKeySortDirection:ie,onClickRow:function(n){return De((function(i){var t=e[n];return(null===i||void 0===i?void 0:i.uuid)!==(null===t||void 0===t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(i){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e[i].uuid,"/edit"))},ref:t,renderRightClickMenuItems:function(i){var t=e[i];return[{label:function(){return"Edit description"},onClick:function(){return $n({pipeline:t,pipelineDescription:null===t||void 0===t?void 0:t.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return $n({pipeline:t,pipelineName:null===t||void 0===t?void 0:t.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return _n({pipeline:{clone_pipeline_uuid:null===t||void 0===t?void 0:t.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){vn({filesOnly:!1,pipelineUUID:null===t||void 0===t?void 0:t.uuid})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){vn({filesOnly:!0,pipelineUUID:null===t||void 0===t?void 0:t.uuid})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===t||void 0===t?void 0:t.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(ce.R,"&new=1&pipeline_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(W.b.PIPELINE,"&new=1&object_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"))&&Sn(null===t||void 0===t?void 0:t.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*se.iI,rowGroupHeaders:i,rows:null===e||void 0===e?void 0:e.map((function(e,i){var t=e.blocks,u=e.created_at,o=e.description,l=e.schedules,c=e.tags,s=e.type,a=e.updated_at,p=e.uuid,f=t.filter((function(e){var n=e.type;return z.tf.SCRATCHPAD!==n})).length,v=l.length,h=l.find((function(e){var n=e.status;return de.fq.ACTIVE===n})),b=s===A.ad,g=(0,w.jsx)("div",{children:(0,w.jsx)(L.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||Le[p]?(0,w.jsx)(m.ZP,{iconOnly:!0,loading:!!Le[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,Ze.j)(n),Ne((function(e){return Ie(Ie({},e),{},(0,r.Z)({},p,!0))})),In(Ie(Ie({},e),{},{status:h?de.fq.INACTIVE:de.fq.ACTIVE}))},children:h?(0,w.jsx)(V.Pause,{muted:!0,size:2*se.iI}):(0,w.jsx)(V.PlayButtonFilled,{default:!0,size:2*se.iI})}):null,(0,w.jsx)(I.ZP,{default:!h,monospace:!0,success:!!h,children:h?de.fq.ACTIVE:v>=1?de.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,w.jsx)(d(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,w.jsx)(O.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,w.jsx)(I.ZP,{default:!0,preWrap:!0,title:o,children:o},"pipeline_description_".concat(i)),(0,w.jsx)(I.ZP,{bold:b,danger:b,children:b?(0,fe.kC)(A.ad):A.G7[s]},"pipeline_type_".concat(i)),(0,w.jsx)(I.ZP,{monospace:!0,small:!0,title:a?(0,ve._6)(a):null,children:a?(0,ve.XG)((0,ve.d$)(a,{includeSeconds:!0,utcFormat:!0}),Ve):(0,w.jsx)(w.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(i)),(0,w.jsx)(I.ZP,{monospace:!0,small:!0,title:u?(0,ve._6)(u):null,children:u?(0,ve.XG)(u.slice(0,19),Ve):(0,w.jsx)(w.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(i)),g,(0,w.jsx)(I.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,w.jsx)(I.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,w.jsxs)(C.Z,{flex:1,justifyContent:"flex-end",children:[(0,w.jsx)(m.ZP,Ie(Ie({},Ee),{},{onClick:function(){vn({pipelineUUID:p})},title:"Download (keep folder structure)",children:(0,w.jsx)(V.Save,{default:!0,size:2*se.iI})})),(0,w.jsx)(y.Z,{mr:1}),(0,w.jsx)(m.ZP,Ie(Ie({},Ee),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,w.jsx)(V.Open,{default:!0,size:2*se.iI})})),(0,w.jsx)(y.Z,{mr:1}),(0,w.jsx)(m.ZP,Ie(Ie({},Ee),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,w.jsx)(V.File,{default:!0,size:2*se.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:u,sortableColumnIndexes:cn,sortedColumn:an,stickyHeader:!0,uuid:"pipelines_table"})}),[_n,Sn,vn,Ve,Le,n,Ae,Ne,De,$n,cn,an,We,In]),vi=(0,a.useMemo)((function(){return fi(rn,ci,si)}),[rn,fi,ci,si]),hi=(0,a.useMemo)((function(){return fi(ln,ai,pi)}),[ln,fi,ai,pi]),mi=(0,a.useMemo)((function(){return(null===rn||void 0===rn?void 0:rn.length)||0}),[rn]),bi=(0,a.useMemo)((function(){return(null===ln||void 0===ln?void 0:ln.length)||0}),[ln]),gi=(0,a.useMemo)((function(){return(!qe||Te.uuid===ze)&&!mi||qe&&ke.uuid===ze&&!bi}),[qe,mi,bi,ze]),ji=(0,a.useMemo)((function(){var e=null===Qe||void 0===Qe?void 0:Qe[re.$D.LIMIT];return(0,w.jsxs)(_.ZP,{alignItems:"center",children:[(0,w.jsx)(I.ZP,{muted:!0,small:!0,children:"Per page"}),(0,w.jsx)(y.Z,{mr:1}),(0,w.jsxs)(G.Z,{compact:!0,onChange:function(e){var n;return(0,ge.u)((n={},(0,r.Z)(n,re.$D.LIMIT,e.target.value),(0,r.Z)(n,re.$D.OFFSET,0),n),{pushHistory:!0})},small:!0,value:e,children:[e&&(e>5*E.Q||e%E.Q)&&(0,w.jsx)("option",{value:e,children:e}),(0,Ce.w6)(5).map((function(e,n){var i=(n+1)*E.Q;return(0,w.jsx)("option",{value:i,children:i},i)}))]})]})}),[Qe]),Zi=(0,a.useMemo)((function(){var e,n,i=Xe;qe&&ke.uuid===ze&&(i=tn);var t=(null===(e=i)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.count)||0,u=(null===Qe||void 0===Qe?void 0:Qe[re.$D.LIMIT])||E.Q,o=(null===Qe||void 0===Qe?void 0:Qe[re.$D.OFFSET])||0,l=Math.ceil(t/u);return(0,w.jsx)(y.Z,{p:se.cd,children:(0,w.jsx)(E.ZP,{maxPages:E.Et,onUpdate:function(e){var n=Number(e);(0,ge.u)((0,r.Z)({},re.$D.OFFSET,n*u))},page:Math.floor(o/u),totalPages:l})})}),[Xe,tn,qe,Qe,ze]);return(0,w.jsxs)(Z.Z,{errors:He,setErrors:Fe,subheaderChildren:(0,w.jsxs)(_.ZP,{alignItems:"center",justifyContent:"space-between",children:[oi,ji]}),title:"Pipelines",uuid:"pipelines/index",children:[qe&&(0,w.jsx)(y.Z,{px:se.cd,ref:i,children:(0,w.jsx)(b.Z,{noPadding:!0,onClickTab:function(e){var n,i=e.uuid;return(0,ge.u)((n={},(0,r.Z)(n,Se,i),(0,r.Z)(n,re.$D.OFFSET,0),n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:ze,tabs:we.map((function(e){var n=e.Icon,i=e.label;return{Icon:n,label:function(){var e;return i({count:null===Xe||void 0===Xe||null===(e=Xe.metadata)||void 0===e?void 0:e.count})},uuid:e.uuid}})),underlineStyle:!0})}),gi?(0,w.jsx)(y.Z,{p:se.Mq,children:Xe?(0,w.jsx)(I.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,w.jsx)($.Z,{inverted:!0,large:!0})}):null,(0,w.jsxs)(pe.cl,{hide:gi,includePadding:!!pn,maxHeight:"calc(100vh - ".concat(K.Mz+74+(M||44)+68,"px)"),children:[(!qe||Te.uuid===ze)&&vi,qe&&ke.uuid===ze&&hi]}),(0,w.jsx)("div",{ref:l,children:Zi})]})}Ae.getInitialProps=(0,t.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var De=(0,M.Z)(Ae)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])},80022:function(e,n,i){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(n,{Z:function(){return t}})},15544:function(e,n,i){"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}i.d(n,{Z:function(){return t}})},13692:function(e,n,i){"use strict";i.d(n,{Z:function(){return u}});var t=i(61049);function u(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,t.Z)(e,n)}},93189:function(e,n,i){"use strict";i.d(n,{Z:function(){return o}});var t=i(12539),u=i(80022);function o(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,u.Z)(e)}}},function(e){e.O(0,[1557,4241,5544,523,3548,5627,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);