"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8146],{58146:function(e,n,t){var i=t(21831),r=t(75582),s=t(82394),l=t(21764),c=t(82684),o=t(69864),d=t(34376),a=t(71180),u=t(70652),h=t(15338),f=t(97618),m=t(55485),x=t(85854),E=t(65956),Z=t(36288),p=t(44085),j=t(28274),_=t(38276),I=t(75499),g=t(30160),v=t(35576),A=t(17488),L=t(69650),S=t(35686),b=t(8193),D=t(72473),P=t(70515),T=t(24755),R=t(48277),O=t(81728),C=t(3917),y=t(76417),N=t(86735),B=t(42122),k=t(72619),w=t(3314),W=t(28598);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U,Y=2*P.iI;!function(e){e.ROLES="Roles",e.USERS="Users"}(U||(U={})),n.Z=function(e){var n,t=e.contained,s=e.onCancel,H=e.slug,V=(0,d.useRouter)(),Q=(0,c.useState)(!0),F=Q[0],K=Q[1],G=(0,c.useState)(null),z=G[0],q=G[1],$=(0,c.useState)({}),J=$[0],X=$[1],ee=(0,c.useState)(null),ne=ee[0],te=ee[1],ie=(0,c.useCallback)((function(e,n,t){te(M(M({},e),{},{rolesMapping:(0,N.HK)(n||[],(function(e){return e.id})),usersMapping:(0,N.HK)(t||[],(function(e){return e.id}))}))}),[te]),re=(0,c.useCallback)((function(e){X((function(n){return M(M({},n),e)})),te((function(n){return M(M({},n),e)}))}),[X,te]),se=S.ZP.permissions.detail(H,{},{revalidateOnFocus:!1}).data,le=(0,c.useMemo)((function(){return null===se||void 0===se?void 0:se.permission}),[se]);(0,c.useEffect)((function(){le&&ie(le,null===le||void 0===le?void 0:le.roles,null===le||void 0===le?void 0:le.users)}),[ie,le]);var ce=S.ZP.permissions.list({_format:"with_only_entity_options",only_entity_options:!0},{},{pauseFetch:!!le}).data,oe=(0,c.useMemo)((function(){var e;return null===ce||void 0===ce||null===(e=ce.permissions)||void 0===e?void 0:e[0]}),[ce]),de=(0,c.useMemo)((function(){var e;return(null===(e=le||oe)||void 0===e?void 0:e.entity_names)||[]}),[le,oe]),ae=(0,c.useMemo)((function(){var e;return(null===(e=le||oe)||void 0===e?void 0:e.entity_types)||[]}),[le,oe]),ue=(0,o.Db)(le?S.ZP.permissions.useUpdate(null===le||void 0===le?void 0:le.id):S.ZP.permissions.useCreate(),{onSuccess:function(e){return(0,k.wD)(e,{callback:function(e){var n=e.permission;X({}),ie(n,null===n||void 0===n?void 0:n.roles,null===n||void 0===n?void 0:n.users),le||V.push("/settings/workspace/permissions/".concat(null===n||void 0===n?void 0:n.id)),l.Am.success(le?"Permission successfully updated.":"New permission created successfully.",{position:l.Am.POSITION.BOTTOM_RIGHT,toastId:"permission-mutate-success-".concat(n.id)})},onErrorCallback:function(e){var n=e.error,t=n.errors,i=n.exception,r=n.message,s=n.type;l.Am.error((null===t||void 0===t?void 0:t.error)||i||r,{position:l.Am.POSITION.BOTTOM_RIGHT,toastId:s})}})}}),he=(0,r.Z)(ue,2),fe=he[0],me=he[1].isLoading,xe=(0,o.Db)(S.ZP.permissions.useDelete(null===le||void 0===le?void 0:le.id),{onSuccess:function(e){return(0,k.wD)(e,{callback:function(){V.push("/settings/workspace/permissions"),l.Am.success("Permission successfully delete.",{position:l.Am.POSITION.BOTTOM_RIGHT,toastId:"permission-delete-success-".concat(null===le||void 0===le?void 0:le.id)})},onErrorCallback:function(e){var n=e.error,t=n.errors,i=n.exception,r=n.message,s=n.type;l.Am.error((null===t||void 0===t?void 0:t.error)||i||r,{position:l.Am.POSITION.BOTTOM_RIGHT,toastId:s})}})}}),Ee=(0,r.Z)(xe,2),Ze=Ee[0],pe=Ee[1].isLoading,je=(0,c.useMemo)((function(){return(null===ne||void 0===ne?void 0:ne.access)||0}),[ne]),_e=(0,c.useCallback)((function(e){return e.map((function(e,n){var t=Z.K4[e],i=Boolean(je&Number(e)),r=(0,R.fD)(je),s=(0,R.fD)(e);return(0,W.jsx)(_.Z,{mt:n>=1?1:0,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(L.Z,{checked:i,compact:!0,onCheck:function(e){return re({access:(0,R.$P)(e(i)?(0,R.vN)(r,s):(0,R.VJ)(r,s))})}}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(g.ZP,{default:!i,children:t})]})},t)}))}),[je,re]),Ie=(0,c.useMemo)((function(){return(null===ne||void 0===ne?void 0:ne.conditions)||[]}),[ne]),ge=(0,c.useMemo)((function(){var e=Z.WG.DISABLE_UNLESS_CONDITIONS,n=(0,R.fD)(je),t=(0,R.fD)(e),r=Boolean(je&Number(e)),s=new Set((0,i.Z)(Ie)),l=s.has(Z.m_.HAS_NOTEBOOK_EDIT_ACCESS),c=s.has(Z.m_.HAS_PIPELINE_EDIT_ACCESS),o=s.has(Z.m_.USER_OWNS_ENTITY),d=r&&l,a=r&&c,u=r&&o;return(0,W.jsxs)(m.ZP,{flexDirection:"column",children:[(0,W.jsx)(_.Z,{mt:1,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(L.Z,{checked:d,compact:!0,onCheck:function(e){var l=n;e(d)?(r||(l=(0,R.vN)(n,t)),s.add(Z.m_.HAS_NOTEBOOK_EDIT_ACCESS)):(c||o||(l=(0,R.VJ)(n,t)),s.delete(Z.m_.HAS_NOTEBOOK_EDIT_ACCESS)),re({access:(0,R.$P)(l),conditions:(0,i.Z)(s)})}}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(g.ZP,{default:!d,children:Z.ND[Z.m_.HAS_NOTEBOOK_EDIT_ACCESS]})]})}),(0,W.jsx)(_.Z,{mt:1,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(L.Z,{checked:a,compact:!0,onCheck:function(e){var c=n;e(a)?(r||(c=(0,R.vN)(n,t)),s.add(Z.m_.HAS_PIPELINE_EDIT_ACCESS)):(l||o||(c=(0,R.VJ)(n,t)),s.delete(Z.m_.HAS_PIPELINE_EDIT_ACCESS)),re({access:(0,R.$P)(c),conditions:(0,i.Z)(s)})}}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(g.ZP,{default:!a,children:Z.ND[Z.m_.HAS_PIPELINE_EDIT_ACCESS]})]})}),(0,W.jsx)(_.Z,{mt:1,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(L.Z,{checked:u,compact:!0,onCheck:function(e){var c=n;e(u)?(r||(c=(0,R.vN)(n,t)),s.add(Z.m_.USER_OWNS_ENTITY)):(l||l||(c=(0,R.VJ)(n,t)),s.delete(Z.m_.USER_OWNS_ENTITY)),re({access:(0,R.$P)(c),conditions:(0,i.Z)(s)})}}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(g.ZP,{default:!u,children:Z.ND[Z.m_.USER_OWNS_ENTITY]})]})})]})}),[je,Ie,re]),ve=S.ZP.roles.list({},{},{pauseFetch:!le}).data,Ae=(0,c.useMemo)((function(){return(0,N.YC)((null===ve||void 0===ve?void 0:ve.roles)||[],"name")}),[ve]),Le=(0,c.useMemo)((function(){return(null===ne||void 0===ne?void 0:ne.rolesMapping)||{}}),[ne]),Se=(0,c.useMemo)((function(){return(0,N.YC)(Object.values(Le),"name")}),[Le]),be=S.ZP.users.list({},{},{pauseFetch:!le}).data,De=((0,c.useMemo)((function(){return(0,N.YC)((null===be||void 0===be?void 0:be.users)||[],(function(e){return(0,y.s)(e)}))}),[be]),(0,c.useMemo)((function(){return(null===ne||void 0===ne?void 0:ne.usersMapping)||{}}),[ne])),Pe=(0,c.useMemo)((function(){return(0,N.YC)(Object.values(De),(function(e){return(0,y.s)(e)}))}),[De]),Te=(0,c.useMemo)((function(){return(null===Se||void 0===Se?void 0:Se.length)>=1}),[Se]),Re=(0,c.useMemo)((function(){return(0,W.jsx)(a.ZP,{beforeIcon:(0,W.jsx)(D.mm,{}),compact:!0,onClick:function(){q(U.ROLES),K(!1)},primary:!Te,secondary:Te,small:!0,children:"Add roles"})}),[Te,q,K]),Oe=(0,c.useMemo)((function(){return(null===Pe||void 0===Pe?void 0:Pe.length)>=1}),[Pe]),Ce=(0,c.useCallback)((function(e,n){return(0,W.jsx)(I.Z,{columnFlex:[null,1],columns:[{label:function(){var n=null===e||void 0===e?void 0:e.every((function(e){var n=e.id;return null===Le||void 0===Le?void 0:Le[n]}));return(0,W.jsx)(u.Z,{checked:n,onClick:function(t){(0,w.j)(t),re(n?{rolesMapping:{}}:{rolesMapping:(0,N.HK)(e,(function(e){return e.id}))})}},"checkbox")},uuid:"actions"},{uuid:"Role"}],onClickRow:n?function(n){var t=e[n];t&&window.open("/settings/workspace/roles/".concat(null===t||void 0===t?void 0:t.id),"_blank").focus()}:null,rows:null===e||void 0===e?void 0:e.map((function(e){var n=e.name,t=e.id,i=!(null===Le||void 0===Le||!Le[t]);return[(0,W.jsx)(u.Z,{checked:i,onClick:function(n){(0,w.j)(n);var r=M({},Le);i?null===r||void 0===r||delete r[t]:r[t]=e,re({rolesMapping:r})}},"checkbox"),(0,W.jsx)(g.ZP,{monospace:!0,children:n},"name")]})),uuid:"roles"})}),[Le,re]),ye=(0,c.useCallback)((function(e,n){return(0,W.jsx)(I.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"First name"},{uuid:"Last name"}],onClickRow:n?function(n){var t=e[n];t&&window.open("/settings/workspace/users/".concat(null===t||void 0===t?void 0:t.id),"_blank").focus()}:null,rows:null===e||void 0===e?void 0:e.map((function(e){var n=e.first_name,t=e.last_name,i=e.username;return[(0,W.jsx)(g.ZP,{children:i},"username"),(0,W.jsx)(g.ZP,{default:!0,children:n},"firstName"),(0,W.jsx)(g.ZP,{default:!0,children:t},"lastName")]})),uuid:"users"})}),[De,re]),Ne=(0,c.useMemo)((function(){return Ce(Ae)}),[Ce,Ae]),Be=(0,c.useMemo)((function(){return Ce(Se,!0)}),[Ce,Se]),ke=(0,c.useMemo)((function(){return ye(Pe,!0)}),[ye,Pe]),we=(0,W.jsxs)(b.N,{children:[(0,W.jsxs)(E.Z,{noPadding:!0,children:[(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsx)(x.Z,{level:4,children:le?"Permission ".concat(null===le||void 0===le?void 0:le.id):"New permission"})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsxs)(g.ZP,{danger:"entity_name"in J&&!(null!==ne&&void 0!==ne&&ne.entity_name),default:!0,large:!0,children:["Entity ","entity_name"in J&&!(null!==ne&&void 0!==ne&&ne.entity_name)&&(0,W.jsx)(g.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(f.Z,{flex:1,justifyContent:"flex-end",children:(0,W.jsx)(p.Z,{afterIconSize:Y,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,onChange:function(e){return re({entity_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"Select an entity",value:(null===ne||void 0===ne?void 0:ne.entity_name)||"",children:de.map((function(e){return(0,W.jsx)("option",{value:e,children:(0,O.j3)(e)},e)}))})})]})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Entity subtype"}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(f.Z,{flex:1,justifyContent:"flex-end",children:(0,W.jsxs)(p.Z,{afterIconSize:Y,alignRight:!0,autoComplete:"off",large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return re({entity_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"Select an entity subtype",value:(null===ne||void 0===ne?void 0:ne.entity_type)||"",children:[(0,W.jsx)("option",{value:""}),ae.map((function(e){return(0,W.jsx)("option",{value:e,children:e},e)}))]})})]})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Enity UUID"}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsx)(A.Z,{afterIcon:(0,W.jsx)(D.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:Y,alignRight:!0,autoComplete:"off",large:!0,monospace:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return re({entity_id:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. pipeline_uuid",value:(null===ne||void 0===ne?void 0:ne.entity_id)||""})})]})})]}),(0,W.jsx)(_.Z,{mb:P.HN}),(0,W.jsxs)(E.Z,{noPadding:!0,children:[(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsx)(x.Z,{level:4,children:"Access"})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Groups"})}),_e(Z.G9)]})}),(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Special conditions"})}),ge]})})]}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Operations"})}),_e(Z.Pt)]})}),(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Disable operations"})}),_e(Z.oO)]})})]}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsxs)(m.ZP,{alignItems:"flex-start",children:[(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Read attributes"})}),_e(Z.Fy)]})}),(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{fullWidth:!0,p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Readable attributes (comma separated)"})}),(0,W.jsx)(v.Z,{fullWidth:!0,monospace:!0,onChange:function(e){return re({read_attributes:e.target.value})},placeholder:"e.g. email",value:(null===ne||void 0===ne?void 0:ne.read_attributes)||""})]})})]}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsxs)(m.ZP,{alignItems:"flex-start",children:[(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Write attributes"})}),_e(Z.H1)]})}),(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{fullWidth:!0,p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Writable attributes (comma separated)"})}),(0,W.jsx)(v.Z,{fullWidth:!0,monospace:!0,onChange:function(e){return re({write_attributes:e.target.value})},placeholder:"e.g. password",value:(null===ne||void 0===ne?void 0:ne.write_attributes)||""})]})})]}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsxs)(m.ZP,{alignItems:"flex-start",children:[(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Query parameters"})}),_e(Z.hl)]})}),(0,W.jsx)(f.Z,{flex:1,children:(0,W.jsxs)(_.Z,{fullWidth:!0,p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Parameters that can be queried (comma separated)"})}),(0,W.jsx)(v.Z,{fullWidth:!0,monospace:!0,onChange:function(e){return re({query_attributes:e.target.value})},placeholder:"e.g. include_outputs",value:(null===ne||void 0===ne?void 0:ne.query_attributes)||""})]})})]})]}),(0,W.jsx)(_.Z,{mb:P.HN}),le&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(E.Z,{noPadding:!0,children:[(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,W.jsx)(x.Z,{level:4,children:"Roles"}),(0,W.jsx)(_.Z,{mr:P.cd}),Te&&(0,W.jsx)(m.ZP,{alignItems:"center",children:Re})]})}),(0,W.jsx)(h.Z,{light:!0}),!Te&&(0,W.jsxs)(_.Z,{p:P.cd,children:[(0,W.jsx)(_.Z,{mb:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,children:"This permission is currently not attached to any role."})}),(0,W.jsx)(m.ZP,{alignItems:"center",children:Re})]}),Te&&(0,W.jsx)(_.Z,{pb:P.Mq,children:Be})]}),(0,W.jsx)(_.Z,{mb:P.HN}),(0,W.jsxs)(E.Z,{noPadding:!0,children:[(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsx)(m.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,W.jsx)(x.Z,{level:4,children:"Users"})})}),(0,W.jsx)(h.Z,{light:!0}),!Oe&&(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsx)(g.ZP,{default:!0,children:"There are currently no users with this permission."})}),Oe&&(0,W.jsx)(_.Z,{pb:P.Mq,children:ke})]}),(0,W.jsx)(_.Z,{mb:P.HN}),(0,W.jsxs)(E.Z,{noPadding:!0,children:[(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsx)(x.Z,{level:4,children:"Metadata"})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Last updated"}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsxs)(f.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,W.jsx)(g.ZP,{large:!0,monospace:!0,muted:!0,children:(null===ne||void 0===ne?void 0:ne.updated_at)&&(0,C.d$)(null===ne||void 0===ne?void 0:ne.updated_at,{includeSeconds:!0})}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(D.Pf,{muted:!0,size:Y}),(0,W.jsx)(_.Z,{mr:1})]})]})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Created at"}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsxs)(f.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,W.jsx)(g.ZP,{large:!0,monospace:!0,muted:!0,children:(null===ne||void 0===ne?void 0:ne.created_at)&&(0,C.d$)(null===ne||void 0===ne?void 0:ne.created_at,{includeSeconds:!0})}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(D.Pf,{muted:!0,size:Y}),(0,W.jsx)(_.Z,{mr:1})]})]})}),(0,W.jsx)(h.Z,{light:!0}),(0,W.jsx)(_.Z,{p:P.cd,children:(0,W.jsxs)(m.ZP,{alignItems:"center",children:[(0,W.jsx)(g.ZP,{default:!0,large:!0,children:"Created by"}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsxs)(f.Z,{alignItems:"center",flex:1,justifyContent:"flex-end",children:[(0,W.jsx)(g.ZP,{large:!0,monospace:!0,muted:!0,children:(0,y.s)(null===le||void 0===le?void 0:le.user)}),(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(D.Pf,{muted:!0,size:Y}),(0,W.jsx)(_.Z,{mr:1})]})]})})]}),(0,W.jsx)(_.Z,{mb:P.HN})]}),(0,W.jsxs)(m.ZP,{children:[(0,W.jsx)(a.ZP,{beforeIcon:(0,W.jsx)(D.vc,{}),disabled:!J||!(null!==(n=Object.keys(J))&&void 0!==n&&n.length),loading:me,onClick:function(){return fe({permission:M(M({},(0,B.GL)(ne,["access","conditions","entity_id","entity_name","entity_type","query_attributes","read_attributes","write_attributes"],{include_blanks:!0})),le?{role_ids:Object.keys((null===ne||void 0===ne?void 0:ne.rolesMapping)||{}).map((function(e){return Number(e)}))}:{})})},primary:!0,children:le?"Save changes":"Create new permission"}),s&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(a.ZP,{onClick:function(){return null===s||void 0===s?void 0:s()},secondary:!0,children:"Cancel and go back"})]}),le&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(_.Z,{mr:P.cd}),(0,W.jsx)(a.ZP,{beforeIcon:(0,W.jsx)(D.rF,{}),danger:!0,loading:pe,onClick:function(){return Ze()},children:"Delete permission"})]})]})]});return t?we:(0,W.jsx)(j.Z,{after:U.ROLES===z?Ne:null,afterHeader:(0,W.jsx)(_.Z,{px:P.cd,children:(0,W.jsx)(g.ZP,{bold:!0,children:z})}),afterHidden:F,afterWidth:60*P.iI,appendBreadcrumbs:!0,breadcrumbs:[{label:function(){return"Permissions"},linkProps:{href:"/settings/workspace/permissions"}},{bold:!0,label:function(){return"Permission ".concat(null===le||void 0===le?void 0:le.id)}}],hideAfterCompletely:!0,setAfterHidden:K,title:null!==le&&void 0!==le&&le.id?"Permission ".concat(null===le||void 0===le?void 0:le.id):"New permission",uuidItemSelected:T.B2.PERMISSIONS,uuidWorkspaceSelected:T.Pl.USER_MANAGEMENT,children:le&&we})}},8193:function(e,n,t){t.d(n,{N:function(){return o},Z:function(){return c}});var i=t(38626),r=t(44897),s=t(42631),l=t(70515),c=2*l.iI,o=i.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1ck7mzt-0"})(["border-radius:","px;padding:","px;",""],s.n_,l.cd*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||r.Z.background).codeArea,";\n  ")}))},36288:function(e,n,t){t.d(n,{Fy:function(){return m},G9:function(){return a},H1:function(){return x},K4:function(){return o},ND:function(){return d},Pt:function(){return u},WG:function(){return s},hl:function(){return f},m_:function(){return l},oO:function(){return h}});var i,r,s,l,c=t(82394);!function(e){e[e.OWNER=1]="OWNER",e[e.ADMIN=2]="ADMIN",e[e.EDITOR=4]="EDITOR",e[e.VIEWER=8]="VIEWER",e[e.LIST=16]="LIST",e[e.DETAIL=32]="DETAIL",e[e.CREATE=64]="CREATE",e[e.UPDATE=128]="UPDATE",e[e.DELETE=512]="DELETE",e[e.OPERATION_ALL=1024]="OPERATION_ALL",e[e.QUERY=2048]="QUERY",e[e.QUERY_ALL=4096]="QUERY_ALL",e[e.READ=8192]="READ",e[e.READ_ALL=16384]="READ_ALL",e[e.WRITE=32768]="WRITE",e[e.WRITE_ALL=65536]="WRITE_ALL",e[e.ALL=131072]="ALL",e[e.DISABLE_LIST=262144]="DISABLE_LIST",e[e.DISABLE_DETAIL=524288]="DISABLE_DETAIL",e[e.DISABLE_CREATE=1048576]="DISABLE_CREATE",e[e.DISABLE_UPDATE=2097152]="DISABLE_UPDATE",e[e.DISABLE_DELETE=4194304]="DISABLE_DELETE",e[e.DISABLE_OPERATION_ALL=8388608]="DISABLE_OPERATION_ALL",e[e.DISABLE_QUERY=16777216]="DISABLE_QUERY",e[e.DISABLE_QUERY_ALL=33554432]="DISABLE_QUERY_ALL",e[e.DISABLE_READ=67108864]="DISABLE_READ",e[e.DISABLE_READ_ALL=134217728]="DISABLE_READ_ALL",e[e.DISABLE_WRITE=268435456]="DISABLE_WRITE",e[e.DISABLE_WRITE_ALL=536870912]="DISABLE_WRITE_ALL",e[e.DISABLE_UNLESS_CONDITIONS=1073741824]="DISABLE_UNLESS_CONDITIONS"}(s||(s={})),function(e){e.HAS_NOTEBOOK_EDIT_ACCESS="HAS_NOTEBOOK_EDIT_ACCESS",e.HAS_PIPELINE_EDIT_ACCESS="HAS_PIPELINE_EDIT_ACCESS",e.USER_OWNS_ENTITY="USER_OWNS_ENTITY"}(l||(l={}));var o=(i={},(0,c.Z)(i,s.OWNER,"Owner"),(0,c.Z)(i,s.ADMIN,"Admin"),(0,c.Z)(i,s.EDITOR,"Editor"),(0,c.Z)(i,s.VIEWER,"Viewer"),(0,c.Z)(i,s.LIST,"List"),(0,c.Z)(i,s.DETAIL,"Detail"),(0,c.Z)(i,s.CREATE,"Create"),(0,c.Z)(i,s.UPDATE,"Update"),(0,c.Z)(i,s.DELETE,"Delete"),(0,c.Z)(i,s.OPERATION_ALL,"All operations"),(0,c.Z)(i,s.QUERY,"Query"),(0,c.Z)(i,s.QUERY_ALL,"Query all attributes"),(0,c.Z)(i,s.READ,"Read"),(0,c.Z)(i,s.READ_ALL,"Read all attributes"),(0,c.Z)(i,s.WRITE,"Write"),(0,c.Z)(i,s.WRITE_ALL,"Write all attributes"),(0,c.Z)(i,s.ALL,"All"),(0,c.Z)(i,s.DISABLE_LIST,"Disable list"),(0,c.Z)(i,s.DISABLE_DETAIL,"Disable detail"),(0,c.Z)(i,s.DISABLE_CREATE,"Disable create"),(0,c.Z)(i,s.DISABLE_UPDATE,"Disable update"),(0,c.Z)(i,s.DISABLE_DELETE,"Disable delete"),(0,c.Z)(i,s.DISABLE_OPERATION_ALL,"Disable all operations"),(0,c.Z)(i,s.DISABLE_QUERY,"Disable query"),(0,c.Z)(i,s.DISABLE_QUERY_ALL,"Disable all query parameters"),(0,c.Z)(i,s.DISABLE_READ,"Disable read"),(0,c.Z)(i,s.DISABLE_READ_ALL,"Disable all read attributes"),(0,c.Z)(i,s.DISABLE_WRITE,"Disable write"),(0,c.Z)(i,s.DISABLE_WRITE_ALL,"Disable all write attributes"),i),d=(r={},(0,c.Z)(r,l.HAS_NOTEBOOK_EDIT_ACCESS,"Disable unless user has notebook edit access"),(0,c.Z)(r,l.HAS_PIPELINE_EDIT_ACCESS,"Disable unless user has pipeline edit access"),(0,c.Z)(r,l.USER_OWNS_ENTITY,"Disable unless user owns the current entity"),r),a=[s.OWNER,s.ADMIN,s.EDITOR,s.VIEWER,s.ALL],u=[s.LIST,s.DETAIL,s.CREATE,s.UPDATE,s.DELETE,s.OPERATION_ALL],h=[s.DISABLE_LIST,s.DISABLE_DETAIL,s.DISABLE_CREATE,s.DISABLE_UPDATE,s.DISABLE_DELETE,s.DISABLE_OPERATION_ALL],f=[s.QUERY,s.QUERY_ALL,s.DISABLE_QUERY,s.DISABLE_QUERY_ALL],m=[s.READ,s.READ_ALL,s.DISABLE_READ,s.DISABLE_READ_ALL],x=[s.WRITE,s.WRITE_ALL,s.DISABLE_WRITE,s.DISABLE_WRITE_ALL]},65956:function(e,n,t){var i=t(38626),r=t(55485),s=t(38276),l=t(30160),c=t(44897),o=t(42631),d=t(47041),a=t(70515),u=t(28598),h=(0,i.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*a.iI,1.5*a.iI,1.5*a.iI),f=i.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],o.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||c.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||c.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),m=i.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],o.n_,o.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||c.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),h,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),x=i.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*a.iI,d.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*a.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),E=i.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],o.M8,o.YF,1.75*a.iI);n.Z=function(e){var n=e.borderless,t=e.children,i=e.containerRef,c=e.contentContainerRef,o=e.dark,d=e.footer,a=e.fullHeight,h=void 0===a||a,Z=e.fullWidth,p=void 0===Z||Z,j=e.header,_=e.headerHeight,I=e.headerIcon,g=e.headerPaddingVertical,v=e.headerTitle,A=e.maxHeight,L=e.maxWidth,S=e.minWidth,b=e.noPadding,D=e.overflowVisible,P=e.subtitle,T=e.success;return(0,u.jsxs)(f,{borderless:n,dark:o,fullHeight:h,fullWidth:p,maxHeight:A,maxWidth:L,minWidth:S,overflowVisible:D,ref:i,success:T,children:[(j||v)&&(0,u.jsxs)(m,{headerPaddingVertical:g,height:_,children:[j&&j,v&&(0,u.jsx)(r.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,u.jsxs)(r.ZP,{alignItems:"center",children:[I&&I,(0,u.jsx)(s.Z,{ml:I?1:0,children:(0,u.jsx)(l.ZP,{bold:!0,default:!0,children:v})})]})})]}),(0,u.jsxs)(x,{maxHeight:A,noPadding:b,overflowVisible:D,ref:c,children:[P&&"string"===typeof P&&(0,u.jsx)(s.Z,{mb:2,children:(0,u.jsx)(l.ZP,{default:!0,children:P})}),P&&"string"!==typeof P&&P,t]}),d&&(0,u.jsx)(E,{children:d})]})}},76417:function(e,n,t){function i(e){return null!==e&&void 0!==e&&e.first_name?[null===e||void 0===e?void 0:e.first_name,null===e||void 0===e?void 0:e.last_name].filter((function(e){return e})).join(" "):null===e||void 0===e?void 0:e.username}t.d(n,{s:function(){return i}})},48277:function(e,n,t){t.d(n,{$P:function(){return d},JI:function(){return s},VJ:function(){return o},fD:function(){return l},uf:function(){return r},vN:function(){return c}});var i=t(75582),r=function(e){var n=String(e).split("."),t=(0,i.Z)(n,2),r=t[0],s=t[1];return"".concat(r.replace(/\B(?=(\d{3})+(?!\d))/g,",")).concat(s?".".concat(s):"")};function s(e){var n=Math.floor(Date.now()/1e3);return e>0?n-e:n}function l(e){return(e>>>0).toString(2)}function c(e,n){return String(BigInt(e)+BigInt(n))}function o(e,n){return String(BigInt(e)-BigInt(n))}function d(e){return parseInt(e,2)}}}]);