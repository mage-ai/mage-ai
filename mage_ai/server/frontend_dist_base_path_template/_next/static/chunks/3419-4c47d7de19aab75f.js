"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3419],{23192:function(n,e,t){t.d(e,{fi:function(){return M},lG:function(){return I}});var o=t(75582),r=t(82684),i=t(12691),u=t.n(i),c=t(34376),l=t.n(c),s=t(38626),a=t(83455),d=t(40761),f=t(41143),p=t(71180),v=t(39867),b=t(55485),h=t(48670),m=t(57653),j=t(38276),g=t(75499),x=t(30160),O=t(12468),Z=t(35686),k=t(15135),P=t(11498),_=t(72473),y=t(81655),C=t(70515),L=t(55283),S=t(86735),T=t(72619),w=t(74052),D=t(69419),R=t(28598),I=[0,1,4],M={0:"status",1:"block_uuid",4:"completed_at"};e.ZP=function(n){var e=n.blockRuns,t=n.onClickRow,i=n.pipeline,c=n.selectedRun,I=n.setErrors,M=n.sortableColumnIndexes,E=(0,r.useContext)(s.ThemeContext),A=(0,r.useState)(null),N=A[0],Y=A[1],B=(0,r.useState)(null),U=B[0],V=B[1],F=i||{},Q=F.uuid,H=F.type,K=(0,r.useMemo)((function(){return i.blocks||[]}),[i]),J=(0,r.useMemo)((function(){return(0,S.HK)(K,(function(n){return n.uuid}))}),[K]),q=(0,r.useMemo)((function(){return m.qL.INTEGRATION===H}),[H]),z=(0,r.useMemo)((function(){return m.qL.PYTHON===H}),[H]),G=(0,D.iV)(),X=null===G||void 0===G?void 0:G[y.lG.SORT_COL_IDX],W=(0,r.useMemo)((function(){return X?{columnIndex:+X,sortDirection:(null===G||void 0===G?void 0:G[y.lG.SORT_DIRECTION])||y.sh.ASC}:void 0}),[G,X]),$=(0,r.useMemo)((function(){var n,e;return null===(n=new d.Z)||void 0===n||null===(e=n.decodedToken)||void 0===e?void 0:e.token}),[]),nn=(0,a.Db)((function(n){var e=n.blockUUID,t=n.pipelineRunId;return Z.ZP.block_outputs.pipelines.downloads.detailAsync(null===i||void 0===i?void 0:i.uuid,e,{pipeline_run_id:t,token:$},{onDownloadProgress:function(n){return Y((Number((null===n||void 0===n?void 0:n.loaded)||0)/1e6).toFixed(3))},responseType:P.E.BLOB})}),{onSuccess:function(n){return(0,T.wD)(n,{callback:function(n){V(null),(0,w.uS)(n,"block_output.".concat(k.Lu.CSV))},onErrorCallback:function(n,e){return null===I||void 0===I?void 0:I({errors:e,response:n})}})}}),en=(0,o.Z)(nn,2),tn=en[0],on=en[1].isLoading,rn=[{uuid:"Status"},{uuid:"Block"},{uuid:"Trigger"},{uuid:"Created at"},{uuid:"Completed at"},{uuid:"Logs"}];return z&&rn.push({uuid:"Output"}),(0,R.jsx)(g.Z,{columnFlex:[1,2,2,1,1,null,null],columns:rn,isSelectedRow:function(n){return e[n].id===(null===c||void 0===c?void 0:c.id)},onClickRow:t,rows:null===e||void 0===e?void 0:e.map((function(n){var e,t,o,r,i=n||{},c=i.block_uuid,s=i.completed_at,a=i.created_at,d=i.id,m=i.pipeline_run_id,g=i.pipeline_schedule_id,Z=i.pipeline_schedule_name,k=i.status,P=c,y=P.split(":"),S=U===d&&on;q&&(P=y[0],o=y[1],r=y[2]);var T=J[P];T||(T=J[y[0]]);var w=[(0,R.jsx)(x.ZP,{danger:f.V.FAILED===k,default:f.V.CANCELLED===k,info:f.V.INITIAL===k,monospace:!0,success:f.V.COMPLETED===k,warning:f.V.RUNNING===k,children:k},"".concat(d,"_status")),(0,R.jsx)(u(),{as:"/pipelines/".concat(Q,"/edit?block_uuid=").concat(P),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,R.jsxs)(h.Z,{bold:!0,fitContentWidth:!0,verticalAlignContent:!0,children:[(0,R.jsx)(v.Z,{color:(0,L.qn)(null===(e=T)||void 0===e?void 0:e.type,{blockColor:null===(t=T)||void 0===t?void 0:t.color,theme:E}).accent,size:1.5*C.iI,square:!0}),(0,R.jsx)(j.Z,{mr:1}),(0,R.jsxs)(x.ZP,{monospace:!0,sky:!0,children:[P,o&&":",o&&(0,R.jsx)(x.ZP,{default:!0,inline:!0,monospace:!0,children:o}),r>=0&&":",r>=0&&(0,R.jsx)(x.ZP,{default:!0,inline:!0,monospace:!0,children:r})]})]})},"".concat(d,"_block_uuid")),(0,R.jsx)(u(),{as:"/pipelines/".concat(Q,"/triggers/").concat(g),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,R.jsx)(h.Z,{bold:!0,sky:!0,children:Z})},"".concat(d,"_trigger")),(0,R.jsx)(x.ZP,{default:!0,monospace:!0,small:!0,children:a},"".concat(d,"_created_at")),(0,R.jsx)(x.ZP,{default:!0,monospace:!0,small:!0,children:(null===s||void 0===s?void 0:s.slice(0,19))||"-"},"".concat(d,"_completed_at")),(0,R.jsx)(p.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return l().push("/pipelines/".concat(Q,"/logs?block_run_id[]=").concat(d))},children:(0,R.jsx)(_.UL,{default:!0,size:2*C.iI})},"".concat(d,"_logs"))];return z&&w.push((0,R.jsx)(b.ZP,{alignItems:"center",justifyContent:"center",children:(0,R.jsx)(O.Z,{appearBefore:!0,autoHide:!S,block:!0,forceVisible:S,label:S?"".concat(N||0,"mb downloaded..."):"Save block run output as CSV file (not supported for dynamic blocks)",size:null,children:(0,R.jsx)(p.Z,{default:!0,disabled:!z||!(f.V.COMPLETED===k)||on,iconOnly:!0,loading:S,noBackground:!0,onClick:function(){Y(null),V(d),tn({blockUUID:P,pipelineRunId:m})},children:(0,R.jsx)(_.vc,{default:!0,size:2*C.iI})})})},"".concat(d,"_save_output"))),w})),sortableColumnIndexes:M,sortedColumn:W,uuid:"block-runs"})}},74052:function(n,e,t){t.d(e,{Dp:function(){return p},OF:function(){return v},Q9:function(){return h},Rt:function(){return a},h8:function(){return b},k1:function(){return d},uS:function(){return m}});var o=t(21831),r=t(82394),i=t(53808),u=t(86735),c=t(31098);function l(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function a(n){var e={},t={};return null===n||void 0===n||n.forEach((function(n){var o=n.content,r=n.outputs,i=n.type,u=n.uuid;(null===r||void 0===r?void 0:r.length)>=1&&(e[u]=r.map((function(n){var e=n||{},t=e.sample_data,o=e.shape,r=e.text_data,i=e.type;return t?{data:s({shape:o},t),type:i}:r&&(0,c.Pb)(r)?JSON.parse(r):r}))),t[i]||(t[i]={}),t[i][u]=o})),{content:t,messages:e}}function d(n,e,t){n.forEach((function(n){(0,i.t8)("".concat(t,"/").concat(n.uuid,"/codeCollapsed"),(0,i.Od)("".concat(e,"/").concat(n.uuid,"/codeCollapsed"))),(0,i.t8)("".concat(t,"/").concat(n.uuid,"/outputCollapsed"),(0,i.Od)("".concat(e,"/").concat(n.uuid,"/outputCollapsed")))}))}function f(n){return"".concat(n,"/").concat(i.kP)}function p(n){return(0,i.U2)(f(n),[])}function v(n,e){var t=p(n);t.includes(e)||(0,i.t8)(f(n),[].concat((0,o.Z)(t),[e]))}function b(n,e){var t=p(n).filter((function(n){return n!==e}));(0,i.t8)(f(n),t)}function h(n,e){var t=(0,u.HK)(e,(function(n){return n.uuid}));return n.map((function(n){return t[n]})).filter((function(n){return!!n}))}var m=function(n,e){var t=window.URL.createObjectURL(n),o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),o.remove()}},8955:function(n,e,t){t.d(e,{G7:function(){return Z},ZP:function(){return k},u$:function(){return g}});var o=t(75582),r=t(82394),i=t(26304),u=t(90299),c=t(9134),l=t(17586),s=t(38276),a=t(30160),d=t(75499),f=t(70515),p=t(16488),v=t(42122),b=t(28598),h=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var g=76,x={uuid:"Run details"},O={uuid:"Dependency tree"},Z=[O,x];function k(n){var e=n.height,t=n.heightOffset,r=n.pipeline,m=n.selectedRun,k=n.selectedTab,P=n.setSelectedTab,_=j({},(0,i.Z)(n,h));m?_.blockStatus=(0,p.IJ)(null===m||void 0===m?void 0:m.block_runs):_.noStatus=!0;var y=(0,v.Kn)(null===m||void 0===m?void 0:m.variables)?j({},null===m||void 0===m?void 0:m.variables):(null===m||void 0===m?void 0:m.variables)||{},C=null===m||void 0===m?void 0:m.event_variables;if(C&&(0,v.Kn)(C)&&!(0,v.Qr)(C))if((0,v.Kn)(y)&&y.hasOwnProperty("event")){var L=(0,v.Kn)(y.event)?y.event:{};y.event=j(j({},L),C)}else y.event=j({},C);var S=[];y&&JSON.stringify(y,null,2).split("\n").forEach((function(n){S.push("    ".concat(n))}));var T=m&&[["Run ID",null===m||void 0===m?void 0:m.id],["Variables",(0,b.jsx)(c.Z,{language:"json",small:!0,source:S.join("\n")},"variable_value")]],w=m&&(0,b.jsx)(s.Z,{pb:f.cd,px:f.cd,children:(0,b.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(n){return 1===n?"100px":null},rows:T.map((function(n,e){var t=(0,o.Z)(n,2),r=t[0],i=t[1];return[(0,b.jsx)(a.ZP,{monospace:!0,muted:!0,children:r},"key_".concat(e)),(0,b.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:i},"val_".concat(e))]})),uuid:"LogDetail"})}),D=k&&P;return(0,b.jsxs)(b.Fragment,{children:[D&&(0,b.jsx)(s.Z,{py:f.cd,children:(0,b.jsx)(u.Z,{onClickTab:P,selectedTabUUID:null===k||void 0===k?void 0:k.uuid,tabs:Z})}),(!D||O.uuid===(null===k||void 0===k?void 0:k.uuid))&&(0,b.jsx)(l.Z,j(j({},_),{},{height:e,heightOffset:(t||0)+(D?g:0),pipeline:r})),x.uuid===(null===k||void 0===k?void 0:k.uuid)&&w]})}},55072:function(n,e,t){t.d(e,{Et:function(){return f},Q:function(){return d}});t(82684);var o=t(71180),r=t(55485),i=t(38276),u=t(31748),c=t(72473),l=t(79633),s=t(70515),a=t(28598),d=30,f=9;e.ZP=function(n){var e=n.page,t=n.maxPages,d=n.onUpdate,f=n.totalPages,p=[],v=t;if(v>f)p=Array.from({length:f},(function(n,e){return e}));else{var b=Math.floor(v/2),h=e-b;e+b>=f?(h=f-v+2,v-=2):e-b<=0?(h=0,v-=2):(v-=4,h=e-Math.floor(v/2)),p=Array.from({length:v},(function(n,e){return e+h}))}return(0,a.jsx)(a.Fragment,{children:f>0&&(0,a.jsxs)(r.ZP,{alignItems:"center",children:[(0,a.jsx)(o.Z,{disabled:0===e,onClick:function(){return d(e-1)},children:(0,a.jsx)(c.Hd,{size:1.5*s.iI,stroke:u.Av})}),!p.includes(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{ml:1,children:(0,a.jsx)(o.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!p.includes(1)&&(0,a.jsx)(i.Z,{ml:1,children:(0,a.jsx)(o.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),p.map((function(n){return(0,a.jsx)(i.Z,{ml:1,children:(0,a.jsx)(o.Z,{backgroundColor:n===e&&l.a$,borderLess:!0,noBackground:!0,notClickable:n===e,onClick:function(){n!==e&&d(n)},children:n+1})},n)})),!p.includes(f-1)&&(0,a.jsxs)(a.Fragment,{children:[!p.includes(f-2)&&(0,a.jsx)(i.Z,{ml:1,children:(0,a.jsx)(o.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,a.jsx)(i.Z,{ml:1,children:(0,a.jsx)(o.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(f-1)},children:f})},f-1)]}),(0,a.jsx)(i.Z,{ml:1}),(0,a.jsx)(o.Z,{disabled:e===f-1,onClick:function(){return d(e+1)},children:(0,a.jsx)(c.Kw,{size:1.5*s.iI,stroke:u.Av})})]})})}},15135:function(n,e,t){t.d(e,{JD:function(){return b},Lu:function(){return i},PF:function(){return f},dT:function(){return u},n6:function(){return s},nB:function(){return v},oy:function(){return p},xF:function(){return d}});var o,r,i,u,c=t(82394),l=t(44425);!function(n){n.CSV="csv",n.JSON="json",n.MD="md",n.PY="py",n.R="r",n.SQL="sql",n.TXT="txt",n.YAML="yaml",n.YML="yml"}(i||(i={})),function(n){n.INIT_PY="__init__.py",n.METADATA_YAML="metadata.yaml",n.REQS_TXT="requirements.txt"}(u||(u={}));var s=[i.PY,i.SQL],a=[i.JSON,i.MD,i.PY,i.R,i.SQL,i.TXT,i.YAML,i.YML],d=new RegExp(a.map((function(n){return".".concat(n,"$")})).join("|")),f=(new RegExp(a.map((function(n){return".".concat(n,"$")})).join("|")),"charts"),p="pipelines",v=(o={},(0,c.Z)(o,i.MD,l.t6.MARKDOWN),(0,c.Z)(o,i.JSON,i.JSON),(0,c.Z)(o,i.PY,l.t6.PYTHON),(0,c.Z)(o,i.R,l.t6.R),(0,c.Z)(o,i.SQL,l.t6.SQL),(0,c.Z)(o,i.TXT,"text"),(0,c.Z)(o,i.YAML,l.t6.YAML),(0,c.Z)(o,i.YML,l.t6.YAML),o),b=(r={},(0,c.Z)(r,l.t6.MARKDOWN,i.MD),(0,c.Z)(r,l.t6.PYTHON,i.PY),(0,c.Z)(r,l.t6.R,i.R),(0,c.Z)(r,l.t6.SQL,i.SQL),(0,c.Z)(r,l.t6.YAML,i.YAML),(0,c.Z)(r,"text",i.TXT),r)}}]);