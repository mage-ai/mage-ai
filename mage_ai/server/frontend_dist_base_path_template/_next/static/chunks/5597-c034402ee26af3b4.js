"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5597],{94629:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(82394),o=r(21831),i=r(82684),u=r(50724),l=r(82555),s=r(97618),a=r(70613),d=r(59696),c=r(68899),f=r(28598);function p(e,n){var r=e.children,t=e.noPadding;return(0,f.jsx)(c.HS,{noPadding:t,ref:n,children:r})}var v=i.forwardRef(p),m=r(62547),h=r(82571),b=r(35686),w=r(98464),j=r(46684),O=r(70515),y=r(53808),g=r(19183);function x(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function _(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?x(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Z(e,n){var r,t=e.addProjectBreadcrumbToCustomBreadcrumbs,p=e.after,x=e.afterHidden,Z=e.afterWidth,C=e.afterWidthOverride,P=e.before,I=e.beforeWidth,k=e.breadcrumbs,E=e.children,A=e.errors,S=e.headerMenuItems,T=e.headerOffset,D=e.mainContainerHeader,M=e.navigationItems,N=e.setErrors,R=e.subheaderChildren,B=e.subheaderNoPadding,H=e.title,L=e.uuid,q=(0,g.i)().width,U="dashboard_after_width_".concat(L),W="dashboard_before_width_".concat(L),F=(0,i.useRef)(null),G=(0,i.useState)(C?Z:(0,y.U2)(U,Z)),z=G[0],K=G[1],Q=(0,i.useState)(!1),V=Q[0],Y=Q[1],J=(0,i.useState)(P?Math.max((0,y.U2)(W,I),13*O.iI):null),X=J[0],$=J[1],ee=(0,i.useState)(!1),ne=ee[0],re=ee[1],te=(0,i.useState)(null)[1],oe=b.ZP.projects.list({},{revalidateOnFocus:!1}).data,ie=null===oe||void 0===oe?void 0:oe.projects,ue={label:function(){var e;return null===ie||void 0===ie||null===(e=ie[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},le=[];k?(t&&le.push(ue),le.push.apply(le,(0,o.Z)(k))):(null===ie||void 0===ie?void 0:ie.length)>=1&&le.push.apply(le,[ue,{bold:!0,label:function(){return H}}]),(0,i.useEffect)((function(){null===F||void 0===F||!F.current||V||ne||null===te||void 0===te||te(F.current.getBoundingClientRect().width)}),[V,z,ne,X,F,te,q]),(0,i.useEffect)((function(){V||(0,y.t8)(U,z)}),[x,V,z,U]),(0,i.useEffect)((function(){ne||(0,y.t8)(W,X)}),[ne,X,W]);var se=(0,w.Z)(Z);return(0,i.useEffect)((function(){C&&se!==Z&&K(Z)}),[C,Z,se]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:H}),(0,f.jsx)(d.Z,{breadcrumbs:le,menuItems:S,project:null===ie||void 0===ie?void 0:ie[0],version:null===ie||void 0===ie||null===(r=ie[0])||void 0===r?void 0:r.version}),(0,f.jsxs)(c.Nk,{ref:n,children:[0!==(null===M||void 0===M?void 0:M.length)&&(0,f.jsx)(c.lm,{showMore:!0,children:(0,f.jsx)(h.Z,{navigationItems:M,showMore:!0})}),(0,f.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(m.Z,{after:p,afterHeightOffset:j.Mz,afterHidden:x,afterMousedownActive:V,afterWidth:z,before:P,beforeHeightOffset:j.Mz,beforeMousedownActive:ne,beforeWidth:c.k1+(P?X:0),headerOffset:T,hideAfterCompletely:!0,leftOffset:P?c.k1:null,mainContainerHeader:D,mainContainerRef:F,setAfterMousedownActive:Y,setAfterWidth:K,setBeforeMousedownActive:re,setBeforeWidth:$,children:[R&&(0,f.jsx)(v,{noPadding:B,children:R}),E]})})]}),A&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===N||void 0===N?void 0:N(null)},children:(0,f.jsx)(l.Z,_(_({},A),{},{onClose:function(){return null===N||void 0===N?void 0:N(null)}}))})]})}var C=i.forwardRef(Z)},14875:function(e,n,r){r.d(n,{Z3:function(){return t},ms:function(){return i},s7:function(){return o}});var t=[{autoComplete:"username",label:"Username",required:!0,uuid:"username"},{autoComplete:"email",disabled:!1,label:"Email",required:!0,type:"email",uuid:"email"}],o="password_current",i=[{autoComplete:"current-password",label:"Current password",type:"password",uuid:o},{autoComplete:"new-password",label:"New password",type:"password",uuid:"password"},{autoComplete:"new-password",label:"Confirm new password",type:"password",uuid:"password_confirmation"}]},36043:function(e,n,r){var t=r(82394),o=r(21831),i=r(75582),u=r(21764),l=r(82684),s=r(69864),a=r(71180),d=r(31882),c=r(55485),f=r(85854),p=r(44085),v=r(38276),m=r(30160),h=r(17488),b=r(35686),w=r(98464),j=r(82359),O=r(14875),y=r(86735),g=r(50178),x=r(42122),_=r(72619),Z=r(28598);function C(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?C(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.disabledFields,r=e.hideFields,C=e.newUser,I=e.onDeleteSuccess,k=e.onSaveSuccess,E=e.showDelete,A=e.title,S=e.user,T=(0,l.useState)(!0),D=T[0],M=T[1],N=(0,l.useState)({}),R=N[0],B=N[1],H=(0,l.useState)(null),L=H[0],q=H[1],U=((0,g.PR)()||{}).owner,W=b.ZP.statuses.list().data,F=(0,l.useMemo)((function(){var e;return(null===W||void 0===W||null===(e=W.statuses)||void 0===e?void 0:e[0])||{}}),[W]),G=F.project_type,z=F.project_uuid,K="global",Q=null,V=null;G===j.k.SUB?(K="project",Q=z):G===j.k.MAIN&&(V="The roles selected here will apply to this user globally.\n                If a user has both a global role and a workspace role,\n                then the role with higher access will take precedence.");var Y=b.ZP.roles.list({entity:K,entity_ids:Q?[Q]:[],limit_roles:!!C},{revalidateOnFocus:!1}),J=Y.data,X=(Y.mutate,(0,l.useMemo)((function(){return(null===J||void 0===J?void 0:J.roles)||[]}),[null===J||void 0===J?void 0:J.roles])),$=(0,s.Db)(C?b.ZP.users.useCreate():b.ZP.users.useUpdate(null===S||void 0===S?void 0:S.id),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(e){var n=e.user,r=O.Z3.concat(O.ms).map((function(e){return e.uuid}));r.push("id");var t=(0,x.GL)(n,r);q(t),u.Am.success(C?"New user created successfully.":"User profile successfully updated.",{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:"user-update-success-".concat(n.id)}),null===k||void 0===k||k(t)},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.exception,o=n.message,i=n.type;u.Am.error((null===r||void 0===r?void 0:r.error)||t||o,{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:i})}})}}),ee=(0,i.Z)($,2),ne=ee[0],re=ee[1].isLoading,te=(0,s.Db)(b.ZP.users.useDelete(null===S||void 0===S?void 0:S.id),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(){null===I||void 0===I||I()},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.message;alert(t),console.log(r)}})}}),oe=(0,i.Z)(te,2),ie=oe[0],ue=oe[1].isLoading,le=r?(0,o.Z)(r):[];C&&le.push(O.s7);var se=!le||!le.includes(O.s7),ae=(0,w.Z)(S);(0,l.useEffect)((function(){if(S&&(!L||(null===ae||void 0===ae?void 0:ae.id)!==(null===S||void 0===S?void 0:S.id))){var e=O.Z3.concat(O.ms).map((function(e){return e.uuid}));q((0,x.GL)(S,e))}null!==L&&void 0!==L&&L.password||null!==L&&void 0!==L&&L.password_confirmation?(null===L||void 0===L?void 0:L.password)!==(null===L||void 0===L?void 0:L.password_confirmation)?B({password_confirmation:"Password confirmation does not match."}):!se||null!==L&&void 0!==L&&L.password_current?B(null):B({password_current:"This field is required."}):null!==L&&void 0!==L&&L.password_current&&se?null!==L&&void 0!==L&&L.password&&null!==L&&void 0!==L&&L.password_confirmation?B(null):B({password:"This field is required.",password_confirmation:"This field is required."}):null!==L&&void 0!==L&&L.password_current||null!==L&&void 0!==L&&L.password||null!==L&&void 0!==L&&L.password_confirmation||B(null)}),[L,se,S,ae]);var de=(0,l.useState)(!1),ce=de[0],fe=de[1],pe=(0,l.useMemo)((function(){return(ce?null===L||void 0===L?void 0:L.roles_new:null===S||void 0===S?void 0:S.roles_new)||[]}),[L,ce,S]),ve=(0,l.useMemo)((function(){var e=(null===X||void 0===X?void 0:X.map((function(e){return e.id})))||[];return null===pe||void 0===pe?void 0:pe.filter((function(n){var r=n.id;return e.includes(r)}))}),[pe,X]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(f.Z,{children:A||"Edit profile"}),(0,Z.jsxs)("form",{children:[O.Z3.filter((function(e){var n=e.uuid;return!le||!le.includes(n)})).map((function(e){var n=e.autoComplete,r=e.disabled,o=e.label,i=e.required,u=e.type,l=e.uuid;return(0,Z.jsx)(v.Z,{mt:2,children:(0,Z.jsx)(h.Z,{autoComplete:n,disabled:r&&!C,label:o,onChange:function(e){M(!1),q((function(n){return P(P({},n),{},(0,t.Z)({},l,e.target.value))}))},primary:!0,required:i,setContentOnMount:!0,type:u,value:(null===L||void 0===L?void 0:L[l])||""})},l)})),!(null!==S&&void 0!==S&&S.owner)&&!(null!==le&&void 0!==le&&le.includes("roles"))&&(0,Z.jsxs)(v.Z,{mt:2,children:[V&&(0,Z.jsx)(v.Z,{mb:1,children:(0,Z.jsx)(m.ZP,{children:V})}),(0,Z.jsx)(p.Z,{disabled:null===n||void 0===n?void 0:n.includes("roles"),label:"Roles",onChange:function(e){var n=(0,y.sE)(X,(function(n){return n.id==e.target.value}));n&&(M(!1),fe(!0),q((function(e){var r={};return(0,y.sE)(pe,(function(e){return e.id==(null===n||void 0===n?void 0:n.id)}))||(r={roles_new:[].concat((0,o.Z)(pe),[n])}),P(P({},e),r)})))},primary:!0,setContentOnMount:!0,children:X.map((function(e){var n=e.id,r=e.name;return(0,Z.jsx)("option",{value:n,children:r},r)}))}),(0,Z.jsx)(v.Z,{mb:1}),(0,Z.jsx)(c.ZP,{alignItems:"center",flexWrap:"wrap",children:null===ve||void 0===ve?void 0:ve.map((function(e){var r=e.id,t=e.name;return(0,Z.jsx)(v.Z,{mb:1,mr:1,children:(0,Z.jsx)(d.Z,{disabled:null===n||void 0===n?void 0:n.includes("roles"),label:t,onClick:function(){M(!1),fe(!0),q((function(e){return P(P({},e),{},{roles_new:(0,y.Od)(pe,(function(e){return e.id===r}))})}))},primary:!0})},"user_roles/".concat(t))}))})]}),(0,Z.jsxs)(v.Z,{mt:5,children:[(0,Z.jsx)(f.Z,{children:C?"Password":"Change password"}),O.ms.filter((function(e){var n=e.uuid;return!le||!le.includes(n)})).map((function(e){var n=e.autoComplete,r=e.disabled,o=e.label,i=e.required,u=e.type,l=e.uuid;return(0,Z.jsx)(v.Z,{mt:2,children:(0,Z.jsx)(h.Z,{autoComplete:n,disabled:r,label:o,meta:{error:null===R||void 0===R?void 0:R[l],touched:!(null===R||void 0===R||!R[l])},onChange:function(e){M(!1),q((function(n){return P(P({},n),{},(0,t.Z)({},l,e.target.value))}))},primary:!0,required:i,setContentOnMount:!0,type:u,value:(null===L||void 0===L?void 0:L[l])||""})},l)}))]}),(0,Z.jsx)(v.Z,{mt:5,children:(0,Z.jsxs)(c.ZP,{children:[(0,Z.jsx)(a.Z,{disabled:D||R&&!(0,x.Qr)(R),loading:re,onClick:function(){var e,n=P({},L);"roles_new"in n&&(n.roles_new=null===(e=L.roles_new)||void 0===e?void 0:e.map((function(e){return e.id})));ne({user:n})},primary:!0,children:C?"Create new user":"Update user profile"}),E&&U&&(0,Z.jsx)(v.Z,{ml:1,children:(0,Z.jsx)(a.Z,{danger:!0,loading:ue,onClick:function(){window.confirm("Are you sure you want to delete ".concat(L.username||L.email,"?"))&&ie()},children:"Delete user"})})]})})]})]})}},82359:function(e,n,r){var t,o;r.d(n,{d:function(){return t},k:function(){return o}}),function(e){e.ADD_NEW_BLOCK_V2="add_new_block_v2",e.DATA_INTEGRATION_IN_BATCH_PIPELINE="data_integration_in_batch_pipeline",e.INTERACTIONS="interactions",e.LOCAL_TIMEZONE="display_local_timezone",e.OPERATION_HISTORY="operation_history"}(t||(t={})),function(e){e.MAIN="main",e.STANDALONE="standalone",e.SUB="sub"}(o||(o={}))},31882:function(e,n,r){var t=r(38626),o=r(71180),i=r(55485),u=r(30160),l=r(44897),s=r(72473),a=r(70515),d=r(61896),c=r(28598),f=t.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||l.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||l.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((a.iI+d.Al)/2,"px;\n    height: ").concat(1.5*a.iI+d.Al,"px;\n    padding: ").concat(a.iI/1.5,"px ").concat(1.25*a.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((a.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+a.iI/2+2,"px;\n    padding: ").concat(a.iI/4,"px ").concat(a.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((a.iI/1+d.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||l.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,r=e.children,t=e.disabled,l=e.label,d=e.monospace,p=e.onClick,v=e.primary,m=e.small,h=e.xsmall;return(0,c.jsx)(f,{border:n,primary:v,small:m,xsmall:h,children:(0,c.jsx)(o.Z,{basic:!0,disabled:t,noBackground:!0,noPadding:!0,onClick:p,transparent:!0,children:(0,c.jsxs)(i.ZP,{alignItems:"center",children:[r,l&&(0,c.jsx)(u.ZP,{monospace:d,small:m,xsmall:h,children:l}),!t&&p&&(0,c.jsx)("div",{style:{marginLeft:2}}),!t&&p&&(0,c.jsx)(s.x8,{default:v,muted:!v,size:m?a.iI:1.25*a.iI})]})})})}},80022:function(e,n,r){function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return t}})},15544:function(e,n,r){function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}r.d(n,{Z:function(){return t}})},99177:function(e,n,r){function t(e,n){return t=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},t(e,n)}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}r.d(n,{Z:function(){return o}})},93189:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(12539),o=r(80022);function i(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}}}]);