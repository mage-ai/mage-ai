"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9440],{39440:function(e,n,t){t.d(n,{Z:function(){return ve}});var o=t(21831),i=t(82394),l=t(75582),r=t(65701),u=t(1254),c=t(82684),a=t(83455),d=t(10975),s=t(14567),v=t(47041),f=t(70515),h=t(28598),p=3*f.iI;var m=function(e){e.blockLayoutItem;var n=e.buildChart,t=e.height,o=e.width,i=(0,c.useMemo)((function(){return t-(v.nn+p)}),[t]),l=(0,c.useMemo)((function(){return null===n||void 0===n?void 0:n({height:i,width:o})}),[n,i,o]);return(0,h.jsx)(h.Fragment,{children:l})},g=t(71180),x=t(4006),b=t(97618),j=t(55485),y=t(46732),k=t(72473),Z=t(38626),_=t(44897),C=t(42631),I=3*f.iI,O=Z.default.div.withConfig({displayName:"indexstyle__DividerStyle",componentId:"sc-17acf36-0"})(["display:flex;position:relative;",";",";"],(function(e){return!e.horizontal&&"\n    height: 100%;\n    justify-content: center;\n    width: ".concat(I,"px;\n  ")}),(function(e){return e.horizontal&&"\n    align-items: center;\n    height: ".concat(I,"px;\n    margin-left: ").concat(I,"px;\n    margin-right: ").concat(I,"px;\n    width: calc(100% - ").concat(2*I,"px);\n  ")})),P=Z.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-17acf36-1"})(["border-radius:","px;"," ",";",";"],C.Ro,(function(e){return"\n    background-color: ".concat((e.theme||_.Z).accent.blueLight,";\n  ")}),(function(e){return!e.horizontal&&"\n    height: 100%;\n    width: ".concat(.5*f.iI,"px;\n  ")}),(function(e){return e.horizontal&&"\n    height: ".concat(.5*f.iI,"px;\n    width: 100%;\n  ")})),w=Z.default.a.withConfig({displayName:"indexstyle__ButtonStyle",componentId:"sc-17acf36-2"})(["align-items:center;border-radius:50%;display:flex;height:","px;justify-content:center;position:absolute;width:","px;"," ",";",";"],3*f.iI,3*f.iI,(function(e){return"\n    background-color: ".concat((e.theme||_.Z).background.page,";\n    border: ").concat(C.mP,"px solid ").concat((e.theme||_.Z).accent.blueLight,";\n    box-shadow:\n      0 0 0 ").concat(C.mP,"px ").concat((e.theme||_.Z).background.page,";\n\n    &:hover {\n      background-color: ").concat((e.theme||_.Z).interactive.linkPrimary,";\n      border: ").concat(C.mP,"px solid ").concat((e.theme||_.Z).interactive.linkPrimary,";\n      cursor: pointer;\n    }\n  ")}),(function(e){return!e.horizontal&&"\n    top: ".concat(3*f.iI,"px;\n  ")}),(function(e){return e.horizontal&&"\n    left: ".concat(3*f.iI,"px;\n  ")}));var S=function(e){var n=e.horizontal,t=e.onClickAdd,o=(0,c.useState)(!1),i=o[0],l=o[1];return(0,h.jsx)(O,{horizontal:n,onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:i&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w,{horizontal:n,href:"#",onClick:function(e){e.preventDefault(),null===t||void 0===t||t()},children:(0,h.jsx)(k.mm,{size:2*f.iI})}),(0,h.jsx)(P,{horizontal:n})]})})},E=t(38276),M=t(4190),L=t(30160),R=t(17488),D=t(35686),U=2*(C.YF+f.cd*f.iI)+I,B=Z.default.div.withConfig({displayName:"indexstyle__ItemStyle",componentId:"sc-rcft6g-0"})(["border-radius:","px;padding:","px;",""],C.Ro,f.cd*f.iI,(function(e){return"\n    border: ".concat(C.YF,"px ").concat(C.M8," ").concat((e.theme||_.Z).interactive.defaultBorder,";\n    background-color: ").concat((e.theme||_.Z).background.chartBlock,";\n  ")})),N=t(35058);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=function(e){var n,t,o=e.block,r=e.blockLayoutItem,u=void 0===r?null:r,a=e.blockUUID,v=e.columnIndex,p=e.columnLayoutSettings,Z=e.columnsInRow,_=e.createNewBlockItem,C=e.detail,O=e.disableDrag,P=e.first,w=e.height,H=e.onDrop,z=e.onSave,F=e.pageBlockLayoutUUID,q=e.removeBlockLayoutItem,W=e.rowIndex,T=e.setSelectedBlockItem,K=e.updateLayout,Y=e.width,V=(0,c.useRef)(null),X=(0,c.useState)(!1),J=X[0],Q=X[1],G=(0,c.useState)(!1),$=G[0],ee=G[1],ne=(0,c.useState)(!1),te=ne[0],oe=ne[1],ie=(0,c.useState)(p)[0],le=(0,c.useState)(null),re=le[0],ue=le[1],ce=(0,c.useMemo)((function(){return u||re}),[u,re]),ae=(0,c.useState)(null),de=ae[0],se=ae[1],ve=(0,c.useMemo)((function(){return(null===ce||void 0===ce?void 0:ce.data)||de}),[ce,de]),fe=(0,c.useMemo)((function(){var e;return null===ce||void 0===ce||null===(e=ce.data_source)||void 0===e?void 0:e.refresh_interval}),[ce]),he=D.ZP.block_layout_items.page_block_layouts.detail(!u&&encodeURIComponent(F),!u&&encodeURIComponent(a),{},{refreshInterval:fe,revalidateOnFocus:!fe}).data;(0,c.useEffect)((function(){ce||(o?ue(o):null!==he&&void 0!==he&&he.block_layout_item&&ue(null===he||void 0===he?void 0:he.block_layout_item))}),[o,ce,he]),(0,c.useEffect)((function(){var e,n;null!==he&&void 0!==he&&null!==(e=he.block_layout_item)&&void 0!==e&&e.data&&se(null===he||void 0===he||null===(n=he.block_layout_item)||void 0===n?void 0:n.data)}),[null===he||void 0===he||null===(n=he.block_layout_item)||void 0===n?void 0:n.data]);var pe=(0,c.useCallback)((function(e){var n,t=e.height,o=e.width;return ve?(0,h.jsx)(x.Z,{block:A(A({},ce),{},{configuration:A(A({},null===ce||void 0===ce?void 0:ce.configuration),{},(0,i.Z)({},N.JJ,t))}),data:ve,width:o,xAxisLabel:null===ce||void 0===ce||null===(n=ce.configuration)||void 0===n?void 0:n.x_axis_label}):null}),[ce,ve]),me=(0,d.c)((function(){return{collect:function(e){return{isDragging:!!e.isDragging()}},item:{blockLayoutItem:ce,columnIndex:v,rowIndex:W},type:"BlockLayoutItem"}}),[ce,v,W]),ge=(0,l.Z)(me,2),xe=ge[0],be=ge[1],je=(0,s.L)((function(){return{accept:"BlockLayoutItem",drop:function(e){return null===H||void 0===H?void 0:H(e)}}}),[]),ye=(0,l.Z)(je,2)[1];return C?(0,h.jsx)(m,{blockLayoutItem:ce,buildChart:pe,height:w,width:Y}):(0,h.jsxs)(h.Fragment,{children:[P&&(0,h.jsx)(S,{onClickAdd:function(){return _({columnIndex:v,rowIndex:W})}}),(0,h.jsx)(b.Z,{flex:1,flexDirection:"column",children:(0,h.jsx)("div",{onMouseEnter:function(){return oe(!0)},onMouseLeave:function(){return oe(!1)},ref:ye,children:(0,h.jsxs)(B,A(A({},xe),{},{ref:O?null:be,children:[(0,h.jsx)(E.Z,{mb:1,children:(0,h.jsxs)(j.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,h.jsx)(E.Z,{py:1,children:(0,h.jsx)(L.ZP,{bold:!0,default:!0,children:(null===ce||void 0===ce?void 0:ce.name)||a})}),(0,h.jsx)("div",{children:(0,h.jsx)(y.Z,{items:[{label:function(){return"Edit content"},onClick:function(){return null===T||void 0===T?void 0:T(ce)},uuid:"Edit content"},{label:function(){return"Change height and/or width"},onClick:function(){return ee(!0)},uuid:"Change"},{label:function(){return"Remove chart"},onClick:function(){return null===q||void 0===q?void 0:q()},uuid:"Remove chart"}],onClickCallback:function(){return Q(!1)},onClickOutside:function(){return Q(!1)},open:J,parentRef:V,rightOffset:0,uuid:"BlockLayoutItem/".concat(a),children:(te||J)&&(0,h.jsx)(g.Z,{iconOnly:!0,noBackground:!0,onClick:function(){Q(!0)},children:(0,h.jsx)(k.mH,{default:!0,size:2*f.iI})})})})]})}),$&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(j.ZP,{alignItems:"center",fullWidth:!0,children:[(0,h.jsx)(R.Z,{compact:!0,fullWidth:!0,label:"Width",onChange:function(e){return null===K||void 0===K?void 0:K(A(A({},p),{},{width:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===p||void 0===p?void 0:p.width)||""}),(0,h.jsx)(E.Z,{mr:1}),(0,h.jsx)(R.Z,{compact:!0,fullWidth:!0,label:"Max width percentage",onChange:function(e){return null===K||void 0===K?void 0:K(A(A({},p),{},{max_width_percentage:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===p||void 0===p?void 0:p.max_width_percentage)||""}),(0,h.jsx)(E.Z,{mr:1}),(0,h.jsx)(R.Z,{compact:!0,fullWidth:!0,label:"Height",onChange:function(e){return null===K||void 0===K?void 0:K(A(A({},p),{},{height:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===p||void 0===p?void 0:p.height)||""})]}),(0,h.jsx)(E.Z,{mt:f.cd,children:(0,h.jsxs)(j.ZP,{alignItems:"center",justifyContent:"flex-end",children:[(0,h.jsx)(g.Z,{compact:!0,onClick:function(){null===z||void 0===z||z(),ee(!1)},primary:!0,small:!0,children:"Save"}),(0,h.jsx)(E.Z,{mr:1}),(0,h.jsx)(g.Z,{compact:!0,onClick:function(){ee(!1),null===K||void 0===K||K(ie)},small:!0,children:"Cancel"})]})})]}),!he&&!ve&&(0,h.jsx)(M.Z,{inverted:!0}),ve&&pe({height:w||(null===ce||void 0===ce||null===(t=ce.configuration)||void 0===t?void 0:t[N.JJ]),width:Y-(U+1)-(Z?I/Z:0)})]}))})}),(0,h.jsx)(S,{onClickAdd:function(){return _({columnIndex:v+1,rowIndex:W})}})]})},F=t(75399),q=t(44425),W=t(54750),T=t(31882),K=t(10305),Y=t(44085),V=t(85108),X=t(81728),J=t(86735);function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $=function(e){var n=e.block,t=e.updateConfiguration,o=n||{},r=o.data,u=o.configuration,a=(u||{}).chart_type,d=(r||{}).columns,s=V.G8[a],v=(0,c.useMemo)((function(){return Object.entries(s||{}).reduce((function(e,n){var o=(0,l.Z)(n,2),r=o[0],c=o[1];return G(G({},e),{},(0,i.Z)({},r,c.map((function(e){var n,o=e.autoRun,l=e.label,r=e.monospace,c=e.options,a=e.settings,s=void 0===a?{}:a,v=e.type,f=e.uuid,p={fullWidth:!0,key:f,label:(0,X.kC)(l()),monospace:r,onChange:function(e){return t((0,i.Z)({},f,e.target.value),{autoRun:o})},value:(null===u||void 0===u?void 0:u[f])||""};if(V.VR.COLUMNS===v){var m=u[f]||[];n=(0,h.jsxs)(h.Fragment,{children:[(!s.maxValues||m.length<s.maxValues)&&(0,h.jsx)(Y.Z,G(G({},p),{},{onChange:function(e){var n=u[f]||[],l=e.target.value;n.includes(l)?n=(0,J.Od)(n,(function(e){return e===l})):n.push(l),t((0,i.Z)({},f,n),{autoRun:o})},value:null,children:(0,J.YC)((d||[]).filter((function(e){return!m.includes(e)})),(function(e){return e})).map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))})),m.map((function(e){return(0,h.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,h.jsx)(T.Z,{label:e,onClick:function(){t((0,i.Z)({},f,(0,J.Od)(m,(function(n){return n===e}))),{autoRun:o})}})},e)}))]})}else if(V.VR.METRICS===v){var g=u[f]||[];n=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Metrics"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Select a column and an aggregation function."}),(0,h.jsxs)(K.Z,{onChange:function(e,n){var l=n.resetValues,r=n.setValues;2===e.filter((function(e){return!!e})).length&&(g.find((function(n){var t=n.aggregation;return n.column===e[1]&&t===e[0]}))||(t((0,i.Z)({},f,g.concat({aggregation:e[0],column:e[1]})),{autoRun:o}),r([null,null]),l()))},children:[(0,h.jsx)(Y.Z,G(G({},p),{},{label:"aggregation",children:(0,J.YC)(N.bn,(function(e){return e})).map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))})),(0,h.jsx)(Y.Z,G(G({},p),{},{label:"column",children:(0,J.YC)(d||[],(function(e){return e})).map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))}))]}),g.map((function(e){var n=e.aggregation,l=e.column;return(0,h.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,h.jsx)(T.Z,{label:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(L.ZP,{inline:!0,monospace:!0,children:[n,"("]}),l,(0,h.jsx)(L.ZP,{inline:!0,monospace:!0,children:")"})]}),onClick:function(){t((0,i.Z)({},f,(0,J.Od)(g,(function(e){var t=e.aggregation,o=e.column;return n===t&&l===o}))),{autoRun:o})}})},"".concat(n,"(").concat(l,")"))}))]})}else n=c?(0,h.jsx)(Y.Z,G(G({},p),{},{children:c.map((function(e){return(0,h.jsx)("option",{value:e,children:e},e)}))})):(0,h.jsx)(R.Z,G(G({},p),{},{type:v}));return(0,h.jsx)(E.Z,{mb:1,children:n},f)}))))}),{noCode:[]})}),[d,u,s,t]),f=(v.code,v.noCode);return(0,h.jsx)(h.Fragment,{children:f})},ee=t(75810),ne=t(15338),te=t(85854),oe=t(62547),ie=t(2842),le=t(53808),re=t(42122),ue=t(72619),ce=t(23780),ae=t(19183);function de(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?de(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ve=function(e){var n,t=e.leftOffset,d=e.pageBlockLayoutTemplate,s=e.topOffset,p=e.uuid,m=(0,ce.VI)(null,{},[],{uuid:"BlockLayout/".concat(p)}),x=(0,l.Z)(m,1)[0],Z=(0,c.useState)(null),_=Z[0],C=Z[1],I=(0,c.useState)(!1),O=I[0],P=I[1],w=(0,c.useRef)(null),M="block_layout_after_width_".concat(p),U="block_layout_before_width_".concat(p),B=(0,c.useRef)(null),H=(0,c.useState)((0,le.U2)(M,200)),A=H[0],T=H[1],K=(0,c.useState)(!1),V=K[0],Q=K[1],G=(0,c.useState)(Math.max((0,le.U2)(U),13*f.iI)),de=G[0],ve=G[1],fe=(0,c.useState)(!1),he=fe[0],pe=fe[1],me=(0,c.useRef)(null),ge=(0,ae.i)(),xe=(0,c.useState)(null),be=xe[0],je=xe[1],ye=(0,c.useMemo)((function(){var e;return null===be||void 0===be||null===(e=be.data_source)||void 0===e?void 0:e.refresh_interval}),[be]),ke=D.ZP.block_layout_items.page_block_layouts.detail(be&&encodeURIComponent(p),be&&encodeURIComponent(null===be||void 0===be?void 0:be.uuid),{configuration_override:encodeURIComponent(JSON.stringify((null===_||void 0===_?void 0:_.configuration)||"")),data_source_override:encodeURIComponent(JSON.stringify((null===_||void 0===_?void 0:_.data_source)||""))},{refreshInterval:ye,revalidateOnFocus:!ye}),Ze=ke.data,_e=ke.mutate,Ce=(0,c.useMemo)((function(){return null===Ze||void 0===Ze?void 0:Ze.block_layout_item}),[Ze]);(0,c.useEffect)((function(){var e;null!==Ce&&void 0!==Ce&&null!==(e=Ce.data)&&void 0!==e&&e.error&&x({response:null===Ce||void 0===Ce?void 0:Ce.data})}),[Ce,x]);var Ie=(0,c.useCallback)((function(e){_e(),C(e)}),[_e,C]),Oe=(0,c.useCallback)((function(e){Ie(e),je(e)}),[Ie,je]),Pe=D.ZP.page_block_layouts.detail(encodeURIComponent(p)).data,we=(0,c.useState)(null),Se=we[0],Ee=we[1],Me=(0,c.useMemo)((function(){return null===Se||void 0===Se?void 0:Se.layout}),[Se]),Le=(0,c.useCallback)((function(e){Ee((function(n){return se(se({},n),{},{layout:e})}))}),[Ee]);(0,c.useEffect)((function(){null!==Pe&&void 0!==Pe&&Pe.page_block_layout&&Ee(null===Pe||void 0===Pe?void 0:Pe.page_block_layout)}),[Pe]);var Re=(0,a.Db)(D.ZP.page_block_layouts.useUpdate(encodeURIComponent(p)),{onSuccess:function(e){return(0,ue.wD)(e,{callback:function(e){var n=e.page_block_layout,t=n.blocks;Ee(n);var o=Object.values(t).find((function(e){return e.name===(null===_||void 0===_?void 0:_.name_new)}));o&&Oe(o),_e()},onErrorCallback:function(e,n){return x({errors:n,response:e})}})}}),De=(0,l.Z)(Re,2),Ue=De[0],Be=De[1].isLoading,Ne=(0,c.useCallback)((function(e){return Ue({page_block_layout:{blocks:se(se({},null===Se||void 0===Se?void 0:Se.blocks),{},(0,i.Z)({},null===e||void 0===e?void 0:e.uuid,(0,re.gR)(e,["data"]))),layout:null===Se||void 0===Se?void 0:Se.layout}})}),[Se,Ue]),He=(0,c.useCallback)((function(){return Ue({page_block_layout:{blocks:null===Se||void 0===Se?void 0:Se.blocks,layout:null===Se||void 0===Se?void 0:Se.layout}})}),[Se,Ue]),Ae=(0,c.useMemo)((function(){return null===Se||void 0===Se?void 0:Se.blocks}),[Se]),ze=(0,c.useCallback)((function(e,n,t){var i=(0,o.Z)(Me);i[e][n]=t,Le(i)}),[Me,Le]),Fe=(0,c.useState)(null),qe=Fe[0],We=Fe[1],Te=(0,c.useState)(null),Ke=Te[0],Ye=Te[1];(0,c.useEffect)((function(){var e;null===B||void 0===B||!B.current||V||he||We(null===B||void 0===B||null===(e=B.current)||void 0===e?void 0:e.getBoundingClientRect())}),[V,he,B,be,ge]),(0,c.useEffect)((function(){var e;null!==me&&void 0!==me&&me.current&&Ye(null===me||void 0===me||null===(e=me.current)||void 0===e?void 0:e.getBoundingClientRect())}),[me,be,ge]),(0,c.useEffect)((function(){V||(0,le.t8)(M,A)}),[V,A,M]),(0,c.useEffect)((function(){he||(0,le.t8)(U,de)}),[he,de,U]);var Ve=(0,c.useCallback)((function(e,n,t){var i=se({},null===Se||void 0===Se?void 0:Se.blocks);null===i||void 0===i||delete i[e];var l=(0,o.Z)(null===Se||void 0===Se?void 0:Se.layout),r=l[n]||[],u=(0,J.oM)(r,t);0===(null===u||void 0===u?void 0:u.length)?l=(0,J.oM)(l,n):l[n]=u,Ue({page_block_layout:{blocks:i,layout:l}})}),[Se,Ue]),Xe=(0,c.useCallback)((function(e,n,t,i){var l=(0,o.Z)(Me||[]),r=l[e]||[],u=r[n];if(e===t&&n!==i){var c=(0,J.oM)(r,n);l[e]=(0,J.Hk)(u,i>n?i:i-1,c)}else{var a=(0,J.oM)(r,n);l[e]=a;var d=(0,J.Hk)(u,i,l[t]);l[t]=d,0===(null===a||void 0===a?void 0:a.length)&&(l=(0,J.oM)(l,e))}e===t&&n===i||Ue({page_block_layout:{blocks:null===Se||void 0===Se?void 0:Se.blocks,layout:l}})}),[Me,Se,Ue]),Je=(0,c.useCallback)((function(e){var n=(0,X.Y6)(),t={name:n,type:q.tf.CHART,uuid:(0,X.kE)(n)},l=(0,o.Z)(Me||[]),r={block_uuid:t.uuid,width:1};if(e){var u=e||{},c=u.columnIndex,a=void 0===c?0:c,d=u.rowIndex,s=u.rowIndexInsert;"undefined"!==typeof s?l=(0,J.Hk)([r],s,l):l[d]=(0,J.Hk)(r,a,l[d])}else l.push([r]);Ue({page_block_layout:{blocks:se(se({},null===Se||void 0===Se?void 0:Se.blocks),{},(0,i.Z)({},t.uuid,t)),layout:l}}),Oe(t)}),[Me,Se,Oe,Ue]),Qe=(0,c.useMemo)((function(){var e=[];return null===Me||void 0===Me||Me.forEach((function(n,t){var o=[],i=(0,J.Sm)(null===n||void 0===n?void 0:n.map((function(e){return e.width||0})));n.forEach((function(e,l){var r=e.block_uuid,u=e.height,c=e.max_width_percentage,a=e.width,d=null===Ae||void 0===Ae?void 0:Ae[r],s="undefined"!==typeof c&&null!==c?c>=0?c/100:c:null,f=a/i,m=s&&f>s?s:f,g=(null===qe||void 0===qe?void 0:qe.width)-v.nn;o.push((0,h.jsx)(b.Z,{flexBasis:"".concat(Math.floor(100*m),"%"),children:(0,h.jsx)(z,{block:d,blockUUID:r,columnIndex:l,columnLayoutSettings:e,columnsInRow:null===n||void 0===n?void 0:n.length,createNewBlockItem:Je,first:0===l,height:u,onDrop:function(e){var n=e.columnIndex,o=e.rowIndex;Xe(o,n,t,l)},onSave:He,pageBlockLayoutUUID:p,removeBlockLayoutItem:function(){return Ve(r,t,l)},rowIndex:t,setSelectedBlockItem:Oe,updateLayout:function(e){return ze(t,l,e)},width:Math.floor(m*g)})},"row-".concat(t,"-column-").concat(l,"-").concat(r)))})),0===t&&e.push((0,h.jsx)(S,{horizontal:!0,onClickAdd:function(){return Je({rowIndexInsert:t})}},"layout-divider-".concat(t,"-top"))),e.push((0,h.jsx)(j.ZP,{children:o},"row-".concat(t))),e.push((0,h.jsx)(S,{horizontal:!0,onClickAdd:function(){return Je({rowIndexInsert:t+1})}},"layout-divider-".concat(t,"-bottom")))})),e}),[Ae,qe,Je,Me,Xe,Ve,He,Oe,ze,p]),Ge=(0,c.useMemo)((function(){return Pe&&0===(null===Me||void 0===Me?void 0:Me.length)}),[Pe,Me]),$e=(0,c.useMemo)((function(){return(0,h.jsx)(j.ZP,{justifyContent:"center",children:(0,h.jsxs)(E.Z,{my:f.HN,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:f.Mq,children:[(0,h.jsx)(E.Z,{mb:1,children:(0,h.jsx)(te.Z,{center:!0,children:"You currently have no content added"})}),(0,h.jsx)(L.ZP,{center:!0,default:!0,children:"To get started, you can create a new chart and customize it to your needs."}),d&&(0,h.jsx)(L.ZP,{center:!0,default:!0,children:"Or, you can add recommended charts with a click of a button."})]}),(0,h.jsxs)(j.ZP,{alignContent:"center",justifyContent:"center",children:[d&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g.Z,{onClick:function(){return Ue({page_block_layout:d})},primary:!0,children:"Add recommended charts"}),(0,h.jsx)(E.Z,{mr:1})]}),(0,h.jsx)(g.Z,{onClick:function(){return Je()},primary:!d,secondary:!!d,children:"Create new chart"})]})]})})}),[Je,d,Ue]),en=(0,c.useMemo)((function(){return(null===qe||void 0===qe?void 0:qe.height)-(null===Ke||void 0===Ke?void 0:Ke.height)}),[qe,Ke]),nn=(0,c.useMemo)((function(){return!be}),[be]),tn=D.ZP.pipelines.detail(null===_||void 0===_||null===(n=_.data_source)||void 0===n?void 0:n.pipeline_uuid).data,on=(0,c.useMemo)((function(){return null===tn||void 0===tn?void 0:tn.pipeline}),[tn]),ln=(0,c.useMemo)((function(){return(0,J.YC)((null===on||void 0===on?void 0:on.blocks)||[],"uuid")}),[on]),rn=D.ZP.pipelines.list().data,un=(0,c.useMemo)((function(){return(0,J.YC)((null===rn||void 0===rn?void 0:rn.pipelines)||[],"uuid")}),[rn]),cn=D.ZP.pipeline_schedules.pipelines.list(null===on||void 0===on?void 0:on.uuid).data,an=(0,c.useMemo)((function(){return null===cn||void 0===cn?void 0:cn.pipeline_schedules}),[cn]),dn=(0,c.useMemo)((function(){var e,n,t,o,i,l,r,u,c,a;return(0,h.jsxs)("div",{style:{paddingBottom:f.Mq*f.iI,paddingTop:"undefined"===typeof s?ie.Wi:0},children:[(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Chart name"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Human readable name for your chart."})]}),(0,h.jsx)(R.Z,{onChange:function(e){return Ie((function(n){return se(se({},n),{},{name_new:e.target.value})}))},placeholder:"Type name for chart...",primary:!0,setContentOnMount:!0,value:(null===_||void 0===_?void 0:_.name_new)||(null===_||void 0===_?void 0:_.name)||""})]}),(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Chart type"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Choose how you want to display your data."})]}),(0,h.jsx)(Y.Z,{onChange:function(e){return Ie((function(n){return se(se({},n),{},{configuration:se(se({},null===n||void 0===n?void 0:n.configuration),{},{chart_type:e.target.value})})}))},placeholder:"Select chart type",primary:!0,value:(null===_||void 0===_||null===(e=_.configuration)||void 0===e?void 0:e.chart_type)||"",children:N.CK.map((function(e){return(0,h.jsx)("option",{value:e,children:(0,X.kC)(e)},e)}))})]}),(0,h.jsx)(E.Z,{mt:f.Mq,children:(0,h.jsx)(ne.Z,{light:!0})}),(0,h.jsx)(E.Z,{mt:f.Mq,px:f.cd,children:(0,h.jsx)(te.Z,{children:"Data source"})}),(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Data source type"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Configure where the data for this chart comes from."})]}),(0,h.jsx)(Y.Z,{onChange:function(e){return Ie((function(n){return se(se({},n),{},{data_source:se(se({},null===n||void 0===n?void 0:n.data_source),{},{type:e.target.value})})}))},placeholder:"Select data source type",primary:!0,value:(null===_||void 0===_||null===(n=_.data_source)||void 0===n?void 0:n.type)||"",children:F.tW.map((function(e){return(0,h.jsx)("option",{value:e,children:(0,X.kC)(F.Qj[e])},e)}))})]}),[F.XO.BLOCK,F.XO.BLOCK_RUNS,F.XO.PIPELINE_RUNS,F.XO.PIPELINE_SCHEDULES].includes(null===_||void 0===_||null===(t=_.data_source)||void 0===t?void 0:t.type)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Pipeline UUID"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Select the pipeline the data source comes from."})]}),(0,h.jsxs)(Y.Z,{monospace:!0,onChange:function(e){return Ie((function(n){return se(se({},n),{},{data_source:se(se({},null===n||void 0===n?void 0:n.data_source),{},{block_uuid:null,pipeline_schedule_id:null,pipeline_uuid:e.target.value})})}))},primary:!0,value:(null===_||void 0===_||null===(o=_.data_source)||void 0===o?void 0:o.pipeline_uuid)||"",children:[(0,h.jsx)("option",{value:null}),null===un||void 0===un?void 0:un.map((function(e){var n=e.uuid;return(0,h.jsx)("option",{value:n,children:n},n)}))]})]})}),[F.XO.PIPELINE_RUNS].includes(null===_||void 0===_||null===(i=_.data_source)||void 0===i?void 0:i.type)&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Trigger"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Select the trigger that the pipeline runs should belong to."})]}),(0,h.jsxs)(Y.Z,{monospace:!0,onChange:function(e){return Ie((function(n){return se(se({},n),{},{data_source:se(se({},null===n||void 0===n?void 0:n.data_source),{},{pipeline_schedule_id:e.target.value})})}))},primary:!0,value:(null===_||void 0===_||null===(l=_.data_source)||void 0===l?void 0:l.pipeline_schedule_id)||"",children:[(0,h.jsx)("option",{value:null}),null===an||void 0===an?void 0:an.map((function(e){var n=e.id,t=e.name;return(0,h.jsx)("option",{value:n,children:t},n)}))]})]})}),F.XO.BLOCK===(null===_||void 0===_||null===(r=_.data_source)||void 0===r?void 0:r.type)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Block UUID"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Select the block the data source comes from."})]}),(0,h.jsxs)(Y.Z,{monospace:!0,onChange:function(e){return Ie((function(n){return se(se({},n),{},{data_source:se(se({},null===n||void 0===n?void 0:n.data_source),{},{block_uuid:e.target.value})})}))},primary:!0,value:(null===_||void 0===_||null===(u=_.data_source)||void 0===u?void 0:u.block_uuid)||"",children:[(0,h.jsx)("option",{value:null}),null===ln||void 0===ln?void 0:ln.map((function(e){var n=e.uuid;return(0,h.jsx)("option",{value:n,children:n},n)}))]})]}),(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Partitions"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Enter a positive or a negative number. If positive, then data from the block will be the most recent N partitions. If negative, then data from the block will be the oldest N partitions."}),(0,h.jsx)(E.Z,{mt:1,children:(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"Leave blank if you want the chart to execute the block and display the data produced from that ad hoc block execution."})})]}),(0,h.jsx)(R.Z,{monospace:!0,onChange:function(e){return Ie((function(n){return se(se({},n),{},{data_source:se(se({},null===n||void 0===n?void 0:n.data_source),{},{partitions:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value})})}))},placeholder:"Enter number of partitions",primary:!0,setContentOnMount:!0,type:"number",value:(null===_||void 0===_||null===(c=_.data_source)||void 0===c?void 0:c.partitions)||""})]})]}),(0,h.jsxs)(E.Z,{mt:f.Mq,px:f.cd,children:[(0,h.jsxs)(E.Z,{mb:1,children:[(0,h.jsx)(L.ZP,{bold:!0,children:"Refresh interval"}),(0,h.jsx)(L.ZP,{muted:!0,small:!0,children:"How frequent do you want this chart to automatically fetch new data from its data source? Enter a number in milliseconds (e.g. 1000ms is 1 second)."})]}),(0,h.jsx)(R.Z,{monospace:!0,onChange:function(e){return Ie((function(n){return se(se({},n),{},{data_source:se(se({},null===n||void 0===n?void 0:n.data_source),{},{refresh_interval:e.target.value})})}))},placeholder:"Enter number for refresh interval",primary:!0,setContentOnMount:!0,type:"number",value:(null===_||void 0===_||null===(a=_.data_source)||void 0===a?void 0:a.refresh_interval)||""})]}),(0,h.jsx)(E.Z,{mt:f.Mq,children:(0,h.jsx)(ne.Z,{light:!0})}),(0,h.jsx)(E.Z,{mt:f.Mq,px:f.cd,children:(0,h.jsx)(te.Z,{children:"Chart display settings"})}),(0,h.jsx)(E.Z,{mt:f.Mq,px:f.cd,children:(0,h.jsx)($,{block:se(se(se({},be),_),{},{data:se(se(se({},null===be||void 0===be?void 0:be.data),null===_||void 0===_?void 0:_.data),null===Ce||void 0===Ce?void 0:Ce.data)}),updateConfiguration:function(e){Ie((function(n){return se(se({},n),{},{configuration:se(se({},null===n||void 0===n?void 0:n.configuration),e)})}))}})})]})}),[Ce,ln,_,an,un,be,Ie,s]),sn=(0,c.useMemo)((function(){return be&&(0,h.jsx)(E.Z,{py:f.cd,children:(0,h.jsx)(ee.Z,{autoHeight:!0,block:be,onChange:function(e){Ie((function(n){return se(se({},n),{},{content:e})}))},value:(null===_||void 0===_?void 0:_.content)||(null===Ce||void 0===Ce?void 0:Ce.content)||"",width:"100%"})})}),[Ce,_,be,Ie]);return(0,h.jsxs)(oe.Z,{after:sn,afterHeightOffset:s||0,afterHidden:nn,afterMousedownActive:V,afterWidth:A,before:dn,beforeHeader:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(W.Z,{breadcrumbs:[{label:function(){return"All content"},onClick:function(){return Oe(null)}},{bold:!0,label:function(){return(null===be||void 0===be?void 0:be.name)||(null===be||void 0===be?void 0:be.uuid)}}]})}),beforeHeaderOffset:6*f.iI,beforeHeightOffset:s||0,beforeHidden:nn,beforeMousedownActive:he,beforeWidth:de,contained:!0,headerOffset:s||0,hideAfterCompletely:!0,hideBeforeCompletely:!0,leftOffset:t||0,mainContainerRef:B,setAfterMousedownActive:Q,setAfterWidth:T,setBeforeMousedownActive:pe,setBeforeWidth:ve,children:[(0,h.jsx)("div",{ref:me,children:(0,h.jsxs)(j.ZP,{justifyContent:"space-between",children:[(0,h.jsx)(b.Z,{flex:1}),nn&&(0,h.jsx)(E.Z,{p:f.cd,children:(0,h.jsx)(y.Z,{items:[{label:function(){return"Create new chart"},onClick:function(){Je()},uuid:"Create new chart"}],onClickCallback:function(){return P(!1)},onClickOutside:function(){return P(!1)},open:O,parentRef:w,rightOffset:0,uuid:"BlockLayout/".concat(p),zIndex:1,children:(0,h.jsx)(g.Z,{beforeIcon:(0,h.jsx)(k.mm,{size:2*f.iI}),onClick:function(){return P(!0)},primary:!0,children:"Add content"})})}),!nn&&(0,h.jsx)(E.Z,{p:f.cd,children:(0,h.jsx)(g.Z,{loading:Be,onClick:function(){return Ne(_)},primary:!0,children:"Save content"})})]})}),(0,h.jsxs)(r.W,{backend:u.PD,children:[be&&(0,h.jsx)(z,{block:be,blockLayoutItem:se(se({},Ce),{},{configuration:se(se({},null===Ce||void 0===Ce?void 0:Ce.configuration),null===_||void 0===_?void 0:_.configuration),data_source:se(se({},null===Ce||void 0===Ce?void 0:Ce.data_source),null===_||void 0===_?void 0:_.data_source)}),blockUUID:null===be||void 0===be?void 0:be.uuid,detail:!0,disableDrag:!0,height:en,pageBlockLayoutUUID:p,setSelectedBlockItem:Oe,width:null===qe||void 0===qe?void 0:qe.width}),!be&&!Ge&&Qe,!be&&Ge&&$e]})]})}},75399:function(e,n,t){t.d(n,{Qj:function(){return u},XO:function(){return i},tW:function(){return r}});var o,i,l=t(82394);!function(e){e.BLOCK="block",e.BLOCK_RUNS="block_runs",e.CHART_CODE="chart_code",e.PIPELINES="pipelines",e.PIPELINE_RUNS="pipeline_runs",e.PIPELINE_SCHEDULES="pipeline_schedules"}(i||(i={}));var r=[i.BLOCK,i.BLOCK_RUNS,i.CHART_CODE,i.PIPELINES,i.PIPELINE_RUNS,i.PIPELINE_SCHEDULES],u=(o={},(0,l.Z)(o,i.BLOCK,"Block data output"),(0,l.Z)(o,i.BLOCK_RUNS,"Block runs"),(0,l.Z)(o,i.CHART_CODE,"Custom code"),(0,l.Z)(o,i.PIPELINES,"Pipelines"),(0,l.Z)(o,i.PIPELINE_RUNS,"Pipeline runs"),(0,l.Z)(o,i.PIPELINE_SCHEDULES,"Triggers"),o)}}]);