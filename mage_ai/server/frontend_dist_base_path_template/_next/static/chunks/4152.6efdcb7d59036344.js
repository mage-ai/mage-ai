"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4152],{44152:function(t,e,o){o.r(e),o.d(e,{default:function(){return S}});var i=o(45493);(0,o(80676).Z)(".monaco-editor .tokens-inspect-widget{background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);color:var(--vscode-editorHoverWidget-foreground);padding:10px;user-select:text;-webkit-user-select:text;z-index:50}.monaco-editor.hc-black .tokens-inspect-widget,.monaco-editor.hc-light .tokens-inspect-widget{border-width:2px}.monaco-editor .tokens-inspect-widget .tokens-inspect-separator{background-color:var(--vscode-editorHoverWidget-border);border:0;height:1px}.monaco-editor .tokens-inspect-widget .tm-token{font-family:var(--monaco-monospace-font)}.monaco-editor .tokens-inspect-widget .tm-token-length{float:right;font-size:60%;font-weight:400}.monaco-editor .tokens-inspect-widget .tm-metadata-table{width:100%}.monaco-editor .tokens-inspect-widget .tm-metadata-value{font-family:var(--monaco-monospace-font);text-align:right}.monaco-editor .tokens-inspect-widget .tm-token-type{font-family:var(--monaco-monospace-font)}",{});var n,s=o(97309),r=o(10707),a=o(7428),d=o(20080),g=o(27291),c=o(73864),h=o(46039),l=o(18712),u=o(49452),m=o(6153);let k=class extends a.JT{static{n=this}static{this.ID="editor.contrib.inspectTokens"}static get(t){return t.getContribution(n.ID)}constructor(t,e,o){super(),this._editor=t,this._languageService=o,this._widget=null,this._register(this._editor.onDidChangeModel((t=>this.stop()))),this._register(this._editor.onDidChangeModelLanguage((t=>this.stop()))),this._register(g.RW.onDidChange((t=>this.stop()))),this._register(this._editor.onKeyUp((t=>9===t.keyCode&&this.stop())))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new _(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};k=n=(0,i.g)([(0,i.f)(1,u.Z),(0,i.f)(2,l.O)],k);class p extends d.R6{constructor(){super({id:"editor.action.inspectTokens",label:m.ug.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(t,e){const o=k.get(e);o?.launch()}}class _ extends a.JT{static{this._ID="editor.contrib.inspectTokensWidget"}constructor(t,e){super(),this.allowEditorOverflow=!0,this._editor=t,this._languageService=e,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=function(t,e){const o=g.RW.get(e);if(o)return o;const i=t.encodeLanguageId(e);return{getInitialState:()=>h.TJ,tokenize:(t,o,i)=>(0,h.Ri)(e,i),tokenizeEncoded:(t,e,o)=>(0,h.Dy)(i,o)}}(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition((t=>this._compute(this._editor.getPosition())))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return _._ID}_compute(t){const e=this._getTokensAtLine(t.lineNumber);let o=0;for(let i=e.tokens1.length-1;i>=0;i--){const n=e.tokens1[i];if(t.column-1>=n.offset){o=i;break}}let i=0;for(let o=e.tokens2.length>>>1;o>=0;o--)if(t.column-1>=e.tokens2[o<<1]){i=o;break}const n=this._model.getLineContent(t.lineNumber);let a="";if(o<e.tokens1.length){const t=e.tokens1[o].offset,i=o+1<e.tokens1.length?e.tokens1[o+1].offset:n.length;a=n.substring(t,i)}(0,s.mc)(this._domNode,(0,s.$)("h2.tm-token",void 0,function(t){let e="";for(let o=0,i=t.length;o<i;o++){const i=t.charCodeAt(o);switch(i){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(i)}}return e}(a),(0,s.$)("span.tm-token-length",void 0,`${a.length} ${1===a.length?"char":"chars"}`))),(0,s.R3)(this._domNode,(0,s.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const d=1+(i<<1)<e.tokens2.length?this._decodeMetadata(e.tokens2[1+(i<<1)]):null;(0,s.R3)(this._domNode,(0,s.$)("table.tm-metadata-table",void 0,(0,s.$)("tbody",void 0,(0,s.$)("tr",void 0,(0,s.$)("td.tm-metadata-key",void 0,"language"),(0,s.$)("td.tm-metadata-value",void 0,`${d?d.languageId:"-?-"}`)),(0,s.$)("tr",void 0,(0,s.$)("td.tm-metadata-key",void 0,"token type"),(0,s.$)("td.tm-metadata-value",void 0,`${d?this._tokenTypeToString(d.tokenType):"-?-"}`)),(0,s.$)("tr",void 0,(0,s.$)("td.tm-metadata-key",void 0,"font style"),(0,s.$)("td.tm-metadata-value",void 0,`${d?this._fontStyleToString(d.fontStyle):"-?-"}`)),(0,s.$)("tr",void 0,(0,s.$)("td.tm-metadata-key",void 0,"foreground"),(0,s.$)("td.tm-metadata-value",void 0,`${d?r.Il.Format.CSS.formatHex(d.foreground):"-?-"}`)),(0,s.$)("tr",void 0,(0,s.$)("td.tm-metadata-key",void 0,"background"),(0,s.$)("td.tm-metadata-value",void 0,`${d?r.Il.Format.CSS.formatHex(d.background):"-?-"}`))))),(0,s.R3)(this._domNode,(0,s.$)("hr.tokens-inspect-separator")),o<e.tokens1.length&&(0,s.R3)(this._domNode,(0,s.$)("span.tm-token-type",void 0,e.tokens1[o].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(t){const e=g.RW.getColorMap(),o=c.N.getLanguageId(t),i=c.N.getTokenType(t),n=c.N.getFontStyle(t),s=c.N.getForeground(t),r=c.N.getBackground(t);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(o),tokenType:i,fontStyle:n,foreground:e[s],background:e[r]}}_tokenTypeToString(t){switch(t){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(t){let e="";return 1&t&&(e+="italic "),2&t&&(e+="bold "),4&t&&(e+="underline "),8&t&&(e+="strikethrough "),0===e.length&&(e="---"),e}_getTokensAtLine(t){const e=this._getStateBeforeLine(t),o=this._tokenizationSupport.tokenize(this._model.getLineContent(t),!0,e),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(t),!0,e);return{startState:e,tokens1:o.tokens,tokens2:i.tokens,endState:o.endState}}_getStateBeforeLine(t){let e=this._tokenizationSupport.getInitialState();for(let o=1;o<t;o++){e=this._tokenizationSupport.tokenize(this._model.getLineContent(o),!0,e).endState}return e}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}(0,d._K)(k.ID,k,4),(0,d.Qr)(p);var v=o(32942),f=o(17981);class b extends d.R6{constructor(){super({id:"editor.action.toggleHighContrast",label:m.xi.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(t,e){const o=t.get(u.Z),i=o.getColorTheme();(0,v.c3)(i.type)?(o.setTheme(this._originalThemeName||((0,v._T)(i.type)?f.rW:f.TG)),this._originalThemeName=null):(o.setTheme((0,v._T)(i.type)?f.kR:f.MU),this._originalThemeName=i.themeName)}}function S(){return{}}(0,d.Qr)(b)}}]);