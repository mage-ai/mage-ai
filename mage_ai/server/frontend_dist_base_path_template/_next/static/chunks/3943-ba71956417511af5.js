"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3943],{4611:function(e,n,t){t.d(n,{f:function(){return l}});var i=t(38626),r=t(44897),u=t(70515),o=t(42631),l=i.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-0"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;"," "," "," ",""],58*u.iI,o.TR,2*u.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||r.Z.shadow).popup,";\n    background-color: ").concat((e.theme.interactive||r.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.leftOffset&&"\n    left: ".concat(e.leftOffset,"px;\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}))},53943:function(e,n,t){var i=t(82394),r=t(75582),u=t(12691),o=t.n(u),l=t(83455),c=t(82684),s=t(34376),a=t(71180),d=t(70652),p=t(50724),f=t(97618),h=t(55485),v=t(48670),g=t(44265),m=t(89515),b=t(38276),_=t(4190),x=t(75499),E=t(30160),j=t(35686),C=t(44897),O=t(42631),I=t(72473),Z=t(81655),y=t(72191),w=t(4611),P=t(30229),T=t(31608),N=t(70515),k=t(3917),L=t(16488),D=t(86735),R=t(50178),A=t(72619),S=t(3314),V=t(69419),U=t(70320),F=t(28598);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Y={monospace:!0,small:!0};function z(e){var n=e.cancelingRunId,t=e.disabled,i=e.isLoadingCancelPipeline,u=e.onCancel,o=e.onSuccess,s=e.pipelineRun,d=e.setCancelingRunId,f=e.setErrors,v=e.setShowConfirmationId,m=e.showConfirmationId,x=(0,R.Ct)(),Z=s||{},T=Z.id,N=Z.pipeline_schedule_id,k=Z.pipeline_schedule_token,L=Z.pipeline_schedule_type,D=Z.status,S=i&&T===n&&g.VO.RUNNING===D,U=(0,V.iV)(),M=(0,c.useMemo)((function(){return(null!==U&&void 0!==U&&U.page?+U.page:0)>0}),[null===U||void 0===U?void 0:U.page]),H=(0,l.Db)(P.Xm.API===L&&k?j.ZP.pipeline_runs.pipeline_schedules.useCreateWithParent(N,k):j.ZP.pipeline_runs.pipeline_schedules.useCreate(N),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){o()},onErrorCallback:function(e,n){return null===f||void 0===f?void 0:f({errors:n,response:e})}})}}),Y=(0,r.Z)(H,1)[0],z=(0,c.useCallback)((function(){v(null),Y({pipeline_run:{backfill_id:null===s||void 0===s?void 0:s.backfill_id,event_variables:(null===s||void 0===s?void 0:s.event_variables)||{},execution_date:null===s||void 0===s?void 0:s.execution_date,pipeline_schedule_id:null===s||void 0===s?void 0:s.pipeline_schedule_id,pipeline_uuid:null===s||void 0===s?void 0:s.pipeline_uuid,variables:(null===s||void 0===s?void 0:s.variables)||{}}})}),[Y,s,v]),G=(0,c.useCallback)((function(){v(null),d(T),u({id:T,status:g.VO.CANCELLED})}),[u,T,d,v]);return(0,F.jsxs)("div",{style:{position:"relative"},children:[(0,F.jsx)(a.Z,{backgroundColor:S&&C.Z.accent.yellow,beforeIcon:g.VO.INITIAL!==D&&!t&&(0,F.jsxs)(F.Fragment,{children:[g.VO.COMPLETED===D&&(0,F.jsx)(I.Jr,{size:y.bL}),[g.VO.FAILED,g.VO.CANCELLED].includes(D)&&(0,F.jsx)(I.Py,{inverted:g.VO.CANCELLED===D&&!x,size:y.bL}),[g.VO.RUNNING].includes(D)&&(0,F.jsx)(_.Z,{color:S?C.Z.status.negative:C.Z.monotone.white,small:!0})]}),borderRadius:O.D7,danger:g.VO.FAILED===D&&!x,default:g.VO.INITIAL===D,disabled:t||x,loading:!s,onClick:function(){return v(T)},padding:"6px",primary:g.VO.RUNNING===D&&!S&&!x,warning:g.VO.CANCELLED===D&&!x,children:t?"Ready":S?"Canceling":g.Do[D]}),(0,F.jsx)(p.Z,{onClickOutside:function(){return v(null)},open:m===T,children:(0,F.jsxs)(w.f,{children:[[g.VO.RUNNING,g.VO.INITIAL].includes(D)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(E.ZP,{bold:!0,color:"#9ECBFF",children:"Run is in progress"}),(0,F.jsx)(b.Z,{mb:1}),(0,F.jsxs)(E.ZP,{children:["This pipeline run is currently ongoing. Retrying will cancel",(0,F.jsx)("br",{}),"the current pipeline run."]}),(0,F.jsx)(E.ZP,{}),(0,F.jsx)(b.Z,{mt:1,children:(0,F.jsxs)(h.ZP,{children:[(0,F.jsx)(a.Z,{onClick:function(){G(),z()},children:"Retry run"}),(0,F.jsx)(b.Z,{ml:1}),(0,F.jsx)(a.Z,{onClick:G,children:"Cancel run"})]})})]}),[g.VO.CANCELLED,g.VO.FAILED,g.VO.COMPLETED].includes(D)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(E.ZP,{bold:!0,color:"#9ECBFF",children:["Run ",D]}),(0,F.jsx)(b.Z,{mb:1}),(0,F.jsxs)(E.ZP,{children:["Retry the run with changes you have made to the pipeline.",M?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("br",{}),"Note that the retried run may appear on a previous page."]}):null]}),(0,F.jsx)(b.Z,{mb:1}),(0,F.jsx)(a.Z,{onClick:z,children:"Retry run"})]})]})})]})}n.Z=function(e){var n=e.allowBulkSelect,t=e.allowDelete,u=e.deletePipelineRun,_=e.disableRowSelect,C=e.emptyMessage,w=void 0===C?"No runs available":C,P=e.fetchPipelineRuns,V=e.hideTriggerColumn,M=e.onClickRow,G=e.pipelineRuns,X=e.selectedRun,B=e.selectedRuns,q=e.setSelectedRuns,J=e.setErrors,K=(0,s.useRouter)(),Q=(0,R.Ct)(),W=(0,U.q)(),$=(0,c.useRef)({}),ee=(0,c.useState)(null),ne=ee[0],te=ee[1],ie=(0,c.useState)(null),re=ie[0],ue=ie[1],oe=(0,c.useState)(null),le=oe[0],ce=oe[1],se=(0,c.useState)(0),ae=se[0],de=se[1],pe=(0,c.useState)(0),fe=pe[0],he=pe[1],ve=(0,l.Db)((function(e){var n=e.id,t=e.status;return j.ZP.pipeline_runs.useUpdate(n)({pipeline_run:{status:t}})}),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){te(null),null===P||void 0===P||P()},onErrorCallback:function(e,n){te(null),null===J||void 0===J||J({errors:n,response:e})}})}}),ge=(0,r.Z)(ve,2),me=ge[0],be=ge[1].isLoading,_e=W?Z.O$:{},xe=[null,1],Ee=[{uuid:"Status"},{uuid:"Pipeline"}];V||(xe.push(1),Ee.push({uuid:"Trigger"})),xe.push.apply(xe,[1,1,null,null]),Ee.push.apply(Ee,[H(H({},_e),{},{uuid:"Execution date"}),H(H({},_e),{},{uuid:"Completed at"}),{uuid:"Block runs"},{uuid:"Logs"}]),t&&!Q&&(xe.push.apply(xe,[null]),Ee.push({label:function(){return""},uuid:"Delete"}));var je=(0,c.useMemo)((function(){return G.every((function(e){var n=e.id;return!(null===B||void 0===B||!B[n])}))}),[G,B]);return n&&(xe.unshift(null),Ee.unshift({label:function(){return(0,F.jsx)(d.Z,{checked:je,onClick:function(){var e=(0,D.HK)(G||[],(function(e){return e.id}));q(je?{}:e)}})},uuid:"Selected"})),!_&&M&&(xe.push(null),Ee.push({label:function(){return""},uuid:"action"})),(0,F.jsx)(T.cl,{minHeight:30*N.iI,overflowVisible:!!re,children:0===(null===G||void 0===G?void 0:G.length)?(0,F.jsx)(b.Z,{px:3,py:1,children:(0,F.jsx)(E.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:w})}):(0,F.jsx)(x.Z,{columnFlex:xe,columns:Ee,isSelectedRow:function(e){return!_&&G[e].id===(null===X||void 0===X?void 0:X.id)},onClickRow:_?null:M,rowVerticalPadding:6,rows:null===G||void 0===G?void 0:G.map((function(e,r){var l=e.block_runs_count,s=e.completed_block_runs_count,x=e.completed_at,j=e.execution_date,C=e.id,w=e.pipeline_schedule_id,T=e.pipeline_schedule_name,N=e.pipeline_uuid,D=e.status;$.current[C]=(0,c.createRef)();var R,A,U=!C&&!D,X="".concat(s," out of ").concat(l," block runs completed"),ee=[];r>0&&G[r-1].execution_date===e.execution_date&&G[r-1].pipeline_schedule_id===e.pipeline_schedule_id?(ee=[(0,F.jsx)(b.Z,{ml:1,children:(0,F.jsxs)(h.ZP,{alignItems:"center",children:[(0,F.jsx)(I.TT,{size:y.bL,useStroke:!0}),(0,F.jsx)(a.Z,{borderRadius:O.D7,notClickable:!0,padding:"6px",children:(0,F.jsx)(E.ZP,{muted:!0,children:g.Do[D]})})]})},"row_status"),(0,F.jsx)(E.ZP,{default:!0,monospace:!0,muted:!0,children:N},"row_pipeline_uuid")],V||ee.push((0,F.jsx)(E.ZP,{default:!0,monospace:!0,muted:!0,children:"-"},"row_trigger_retry")),(R=ee).push.apply(R,[(0,F.jsx)(E.ZP,{default:!0,monospace:!0,muted:!0,children:"-"},"row_date_retry"),(0,c.createElement)(E.ZP,H(H({},Y),{},{key:"row_completed",muted:!0,title:x?"UTC: ".concat(x.slice(0,19)):null}),x?W?(0,k.XG)(x,W):(0,L.Vx)(x):(0,F.jsx)(F.Fragment,{children:"\u2014"})),(0,F.jsx)(o(),{as:"/pipelines/".concat(N,"/runs/").concat(C),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,F.jsx)(v.Z,{bold:!0,muted:!0,title:X,children:"".concat(s," / ").concat(l)})},"row_block_runs"),(0,F.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return K.push("/pipelines/".concat(N,"/logs?pipeline_run_id[]=").concat(C))},children:(0,F.jsx)(I.UL,{default:!0,size:y.bL})},"row_logs")])):(ee=[(0,F.jsx)(z,{cancelingRunId:ne,disabled:U,isLoadingCancelPipeline:be,onCancel:me,onSuccess:P,pipelineRun:e,setCancelingRunId:te,setErrors:J,setShowConfirmationId:ue,showConfirmationId:re},"row_retry_button"),(0,F.jsx)(E.ZP,{default:!0,monospace:!0,children:N},"row_pipeline_uuid")],V||ee.push((0,F.jsx)(o(),{as:"/pipelines/".concat(N,"/triggers/").concat(w),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,F.jsx)(v.Z,{bold:!0,sky:!0,children:T})},"row_trigger")),(A=ee).push.apply(A,[(0,c.createElement)(E.ZP,H(H({},Y),{},{default:!0,key:"row_date",title:j?"UTC: ".concat(j):null}),j?W?(0,k.XG)(j,W):(0,L.Vx)(j):(0,F.jsx)(F.Fragment,{children:"\u2014"})),(0,c.createElement)(E.ZP,H(H({},Y),{},{default:!0,key:"row_completed",title:x?"UTC: ".concat(x.slice(0,19)):null}),x?W?(0,k.XG)(x,W):(0,L.Vx)(x):(0,F.jsx)(F.Fragment,{children:"\u2014"})),(0,F.jsx)(o(),{as:"/pipelines/".concat(N,"/runs/").concat(C),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,F.jsx)(v.Z,{bold:!0,disabled:U,sky:!0,title:X,children:U?"":"".concat(s," / ").concat(l)})},"row_block_runs"),(0,F.jsx)(a.Z,{default:!0,disabled:U,iconOnly:!0,noBackground:!0,onClick:function(){return K.push("/pipelines/".concat(N,"/logs?pipeline_run_id[]=").concat(C))},children:(0,F.jsx)(I.UL,{default:!0,size:y.bL})},"row_logs")]));if(t&&!Q&&ee.push((0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(e){var n,t,i,r;(0,S.j)(e),ce(C),de((null===(n=$.current[C])||void 0===n||null===(t=n.current)||void 0===t?void 0:t.offsetTop)||0),he((null===(i=$.current[C])||void 0===i||null===(r=i.current)||void 0===r?void 0:r.offsetLeft)||0)},ref:$.current[C],title:"Delete",children:(0,F.jsx)(I.rF,{default:!0,size:y.bL})}),(0,F.jsx)(p.Z,{onClickOutside:function(){return ce(null)},open:le===C,children:(0,F.jsx)(m.Z,{danger:!0,left:(fe||0)-Z.nH,onCancel:function(){return ce(null)},onClick:function(){ce(null),u(C)},title:"Are you sure you want to delete this run (id ".concat(C,' for trigger "').concat(T,'")?'),top:(ae||0)-(r<=1?Z.oz:Z.OK),width:Z.Xx})})]})),n){var ie=!(null===B||void 0===B||!B[C]);ee.unshift((0,F.jsx)(d.Z,{checked:ie,onClick:function(){q((function(n){return H(H({},n),{},(0,i.Z)({},C,ie?null:e))}))}},"selected-pipeline-run-".concat(C)))}return!_&&M&&ee.push((0,F.jsx)(f.Z,{flex:1,justifyContent:"flex-end",children:(0,F.jsx)(I._Q,{default:!0,size:y.bL})})),ee})),uuid:"pipeline-runs"})})}},16488:function(e,n,t){t.d(n,{IJ:function(){return f},M8:function(){return C},Vx:function(){return b},XM:function(){return j},eI:function(){return m},gU:function(){return x},ri:function(){return v},tL:function(){return _},vJ:function(){return E},xH:function(){return g}});var i,r=t(82394),u=t(92083),o=t.n(u),l=t(3917),c=t(4383),s=t(30229),a=t(42122);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,i=n.completed_at,u=n.started_at,l=n.status,c=null;u&&i&&(c=o()(i).valueOf()-o()(u).valueOf());return p(p({},e),{},(0,r.Z)({},t,{runtime:c,status:l}))}),{})}var h,v=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:s.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:s.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:s.Xm.API}];return e?n.slice(0,1):n};function g(e){var n=(0,a.gR)(e,[s.gm.INTERVAL,s.gm.TYPE]),t=e[s.gm.INTERVAL];t&&(n["schedule_interval[]"]=encodeURIComponent(t));var i=e[s.gm.TYPE];return i&&(n["schedule_type[]"]=i),n}function m(e){if(!e)return null;var n=new Date(o()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function b(e){return"string"!==typeof e?e:m(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(h||(h={}));var _=(i={},(0,r.Z)(i,h.DAY,86400),(0,r.Z)(i,h.HOUR,3600),(0,r.Z)(i,h.MINUTE,60),(0,r.Z)(i,h.SECOND,1),i);function x(e){var n=h.SECOND,t=e;return e%86400===0?(t/=86400,n=h.DAY):e%3600===0?(t/=3600,n=h.HOUR):e%60===0&&(t/=60,n=h.MINUTE),{time:t,unit:n}}function E(e,n){return e*_[n]}function j(e,n,t){var i="".concat(e.toISOString().split("T")[0]," ").concat(null===n||void 0===n?void 0:n.hour,":").concat(null===n||void 0===n?void 0:n.minute);if(null!==t&&void 0!==t&&t.includeSeconds&&(i=i.concat(":00")),null!==t&&void 0!==t&&t.localTimezone){var r=o()(e);r.set("hour",+(null===n||void 0===n?void 0:n.hour)||0),r.set("minute",+(null===n||void 0===n?void 0:n.minute)||0),r.set("second",0),i=r.format(l.lE),null!==t&&void 0!==t&&t.convertToUtc&&(i=(0,l.d$)(i,{includeSeconds:null===t||void 0===t?void 0:t.includeSeconds,utcFormat:!0}))}return i}function C(e){var n,t="";return t="".concat(window.origin,"/api/pipeline_schedules/").concat(null===e||void 0===e?void 0:e.id,"/pipeline_runs"),null!==e&&void 0!==e&&e.token&&(t="".concat(t,"/").concat(e.token)),(n=window.location.port)&&(t=t.replace(n,c.QT)),t}},70320:function(e,n,t){t.d(n,{h:function(){return o},q:function(){return u}});var i=t(78419),r=t(53808);function u(){return(0,r.U2)(i.am,null)||!1}function o(e){return"undefined"!==typeof e&&(0,r.t8)(i.am,e),e}},44265:function(e,n,t){t.d(n,{Az:function(){return c},BF:function(){return l},Do:function(){return a},IK:function(){return o},VO:function(){return u},sZ:function(){return s}});var i,r=t(82394),u=t(41143).V,o=[u.FAILED,u.COMPLETED,u.RUNNING,u.CANCELLED,u.INITIAL],l=[u.INITIAL,u.RUNNING],c=[u.CANCELLED,u.COMPLETED,u.FAILED],s="__mage_variables",a=(i={},(0,r.Z)(i,u.CANCELLED,"Cancelled"),(0,r.Z)(i,u.COMPLETED,"Done"),(0,r.Z)(i,u.FAILED,"Failed"),(0,r.Z)(i,u.INITIAL,"Ready"),(0,r.Z)(i,u.RUNNING,"Running"),i)},30229:function(e,n,t){t.d(n,{TR:function(){return p},U5:function(){return c},Xm:function(){return u},Z4:function(){return d},fq:function(){return l},gm:function(){return s},kJ:function(){return a}});var i,r,u,o=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var l,c,s,a,d=(i={},(0,o.Z)(i,u.API,(function(){return"API"})),(0,o.Z)(i,u.EVENT,(function(){return"event"})),(0,o.Z)(i,u.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(l||(l={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(c||(c={})),function(e){e.INTERVAL="frequency[]",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(s||(s={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(a||(a={}));var p=(r={},(0,o.Z)(r,a.CREATED_AT,"Created at"),(0,o.Z)(r,a.NAME,"Name"),(0,o.Z)(r,a.PIPELINE,"Pipeline"),(0,o.Z)(r,a.STATUS,"Active"),(0,o.Z)(r,a.TYPE,"Type"),r)},72191:function(e,n,t){t.d(n,{_k:function(){return u},bL:function(){return r},l2:function(){return o}});var i=t(70515),r=(i.iI,2*i.iI),u=2.5*i.iI,o=3*i.iI}}]);