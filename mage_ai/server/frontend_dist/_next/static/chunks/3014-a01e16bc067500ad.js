"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3014],{1210:function(e,n,t){t.d(n,{Z:function(){return P}});var i=t(82394),r=t(21831),u=t(82684),l=t(47999),o=t(49894),c=t(93461),s=t(57384),d=t(12344),a=t(72454),f=t(28598);function p(e,n){var t=e.children;return(0,f.jsx)(a.HS,{ref:n,children:t})}var h=u.forwardRef(p),v=t(32063),g=t(15270),j=t(82531),_=t(66166),b=t(3055),Z=t(49125),x=t(91427),m=t(24141);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=function(e){var n,t=e.after,i=e.afterHidden,p=e.afterWidth,E=e.afterWidthOverride,P=e.before,y=e.beforeWidth,O=e.breadcrumbs,I=e.children,k=e.errors,A=e.headerMenuItems,w=e.navigationItems,T=e.setErrors,S=e.subheaderChildren,N=e.title,R=e.uuid,D=(0,m.i)().width,M="dashboard_after_width_".concat(R),H="dashboard_before_width_".concat(R),V=(0,u.useRef)(null),q=(0,u.useState)(E?p:(0,x.U2)(M,p)),B=q[0],L=q[1],z=(0,u.useState)(!1),W=z[0],U=z[1],Y=(0,u.useState)(P?Math.max((0,x.U2)(H,y),13*Z.iI):null),F=Y[0],J=Y[1],K=(0,u.useState)(!1),X=K[0],G=K[1],Q=(0,u.useState)(null)[1],$=j.ZP.projects.list({},{revalidateOnFocus:!1}).data,ee=null===$||void 0===$?void 0:$.projects,ne=[];O?ne.push.apply(ne,(0,r.Z)(O)):(null===ee||void 0===ee?void 0:ee.length)>=1&&ne.push.apply(ne,[{label:function(){var e;return null===(e=ee[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return N}}]),(0,u.useEffect)((function(){null===V||void 0===V||!V.current||W||X||null===Q||void 0===Q||Q(V.current.getBoundingClientRect().width)}),[W,B,X,F,V,Q,D]),(0,u.useEffect)((function(){W||(0,x.t8)(M,B)}),[i,W,B,M]),(0,u.useEffect)((function(){X||(0,x.t8)(H,F)}),[X,F,H]);var te=(0,_.Z)(p);return(0,u.useEffect)((function(){E&&te!==p&&L(p)}),[E,p,te]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:N}),(0,f.jsx)(d.Z,{breadcrumbs:ne,menuItems:A,project:null===ee||void 0===ee?void 0:ee[0],version:null===ee||void 0===ee||null===(n=ee[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(a.Nk,{children:[0!==(null===w||void 0===w?void 0:w.length)&&(0,f.jsx)(a.lm,{children:(0,f.jsx)(g.Z,{navigationItems:w})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(v.Z,{after:t,afterHeightOffset:b.Mz,afterHidden:i,afterMousedownActive:W,afterWidth:B,before:P,beforeHeightOffset:b.Mz,beforeMousedownActive:X,beforeWidth:a.k1+(P?F:0),hideAfterCompletely:!0,leftOffset:P?a.k1:null,mainContainerRef:V,setAfterMousedownActive:U,setAfterWidth:L,setBeforeMousedownActive:G,setBeforeWidth:J,children:[S&&(0,f.jsx)(h,{children:S}),I]})})]}),k&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===T||void 0===T?void 0:T(null)},children:(0,f.jsx)(o.Z,C(C({},k),{},{onClose:function(){return null===T||void 0===T?void 0:T(null)}}))})]})}},97225:function(e,n,t){var i=t(75582),r=t(12691),u=t.n(r),l=t(82684),o=t(83455),c=t(34376),s=t(60328),d=t(47999),a=t(67971),f=t(10919),p=t(93348),h=t(62609),v=t(86673),g=t(58180),j=t(19711),_=t(82531),b=t(10503),Z=t(49125),x=t(45838),m=t(9736),E=t(96510),C=t(66653),P=t(28598);n.Z=function(e){var n=e.fetchPipelineSchedules,t=e.highlightRowOnHover,r=e.includeCreatedAtColumn,y=e.includePipelineColumn,O=e.pipeline,I=e.pipelineSchedules,k=e.selectedSchedule,A=e.setErrors,w=e.setSelectedSchedule,T=e.stickyHeader,S=null===O||void 0===O?void 0:O.uuid,N=(0,c.useRouter)(),R=(0,l.useRef)({}),D=(0,l.useState)(null),M=D[0],H=D[1],V=(0,l.useState)(0),q=V[0],B=V[1],L=(0,l.useState)(0),z=L[0],W=L[1],U=(0,o.Db)((function(e){return _.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,E.wD)(e,{callback:function(){n()},onErrorCallback:function(e,n){return A({errors:n,response:e})}})}}),Y=(0,i.Z)(U,1)[0],F=(0,o.Db)((function(e){return _.ZP.pipeline_schedules.useDelete(e)()}),{onSuccess:function(e){return(0,E.wD)(e,{callback:function(){n(),S?N.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(S,"/triggers")):n()},onErrorCallback:function(e,n){return A({errors:n,response:e})}})}}),J=(0,i.Z)(F,1)[0],K=[{label:function(){return""},uuid:"action"},{uuid:"Status"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Latest run status"},{uuid:"Logs"}];(0,m.Ct)()||K.push({label:function(){return""},uuid:"edit/delete"});var X=[null,1,1,3,1,null,null,null,null];return y&&(K.splice(2,0,{uuid:"Pipeline"}),X.splice(2,0,2)),r&&(K.splice(3,0,{uuid:"Created at"}),X.splice(3,0,null)),(0,P.jsx)(x.cl,{overflowVisible:!0,children:0===I.length?(0,P.jsx)(v.Z,{px:3,py:1,children:(0,P.jsx)(j.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,P.jsx)(g.Z,{columnFlex:X,columns:K,highlightRowOnHover:t,isSelectedRow:function(e){return I[e].id===(null===k||void 0===k?void 0:k.id)},onClickRow:w?function(e){return null===w||void 0===w?void 0:w(I[e])}:null,rowVerticalPadding:6,rows:I.map((function(e,n){var t,i=e.id,o=e.created_at,c=e.pipeline_runs_count,g=e.pipeline_uuid,_=e.last_pipeline_run_status,x=e.name,E=e.schedule_interval,O=e.status,I=S||g;R.current[i]=(0,l.createRef)();var k=[(0,P.jsx)(s.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,C.j)(n),Y({id:e.id,status:p.fq.ACTIVE===O?p.fq.INACTIVE:p.fq.ACTIVE})},children:p.fq.ACTIVE===O?(0,P.jsx)(b.dz,{muted:!0,size:2*Z.iI}):(0,P.jsx)(b.Py,{default:!0,size:2*Z.iI})},"toggle_trigger_".concat(n)),(0,P.jsx)(j.ZP,{default:p.fq.INACTIVE===O,monospace:!0,success:p.fq.ACTIVE===O,children:O},"trigger_status_".concat(n)),(0,P.jsx)(j.ZP,{default:!0,monospace:!0,children:null===(t=p.Z4[e.schedule_type])||void 0===t?void 0:t.call(p.Z4)},"trigger_type_".concat(n)),(0,P.jsx)(u(),{as:"/pipelines/".concat(I,"/triggers/").concat(i),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,P.jsx)(f.Z,{bold:!0,onClick:function(e){(0,C.j)(e),N.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(I,"/triggers/").concat(i))},sameColorAsText:!0,children:x})},"trigger_name_".concat(n)),(0,P.jsx)(j.ZP,{default:!0,monospace:!0,children:E},"trigger_frequency_".concat(n)),(0,P.jsx)(j.ZP,{default:!0,monospace:!0,children:c},"trigger_run_count_".concat(n)),(0,P.jsx)(j.ZP,{default:!0,monospace:!0,children:_||"N/A"},"latest_run_status_".concat(n)),(0,P.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return N.push("/pipelines/".concat(I,"/logs?pipeline_schedule_id[]=").concat(i))},children:(0,P.jsx)(b.B4,{default:!0,size:2*Z.iI})},"logs_button_".concat(n))];return(0,m.Ct)()||k.push((0,P.jsxs)(a.Z,{children:[(0,P.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return N.push("/pipelines/".concat(I,"/triggers/").concat(i,"/edit"))},title:"Edit",children:(0,P.jsx)(b.I8,{default:!0,size:2*Z.iI})}),(0,P.jsx)(v.Z,{mr:1}),(0,P.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var e,n,t,r;H(i),B((null===(e=R.current[i])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0),W((null===(t=R.current[i])||void 0===t||null===(r=t.current)||void 0===r?void 0:r.offsetLeft)||0)},ref:R.current[i],title:"Delete",children:(0,P.jsx)(b.rF,{default:!0,size:2*Z.iI})}),(0,P.jsx)(d.Z,{onClickOutside:function(){return H(null)},open:M===i,children:(0,P.jsx)(h.Z,{danger:!0,left:(z||0)-286,onCancel:function(){return H(null)},onClick:function(){H(null),J(i)},title:"Are you sure you want to delete the trigger ".concat(x,"?"),top:(q||0)-(n<=1?40:96),width:40*Z.iI})})]},"edit_delete_buttons_".concat(n))),y&&k.splice(2,0,(0,P.jsx)(j.ZP,{default:!0,monospace:!0,children:I},"pipeline_name_".concat(n))),r&&k.splice(3,0,(0,P.jsx)(j.ZP,{default:!0,monospace:!0,children:o},"created_at_".concat(n))),k})),stickyHeader:T,uuid:"pipeline-triggers"})})}},93348:function(e,n,t){t.d(n,{TR:function(){return a},U5:function(){return c},Xm:function(){return u},Z4:function(){return d},fq:function(){return o},kJ:function(){return s}});var i,r,u,l=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var o,c,s,d=(i={},(0,l.Z)(i,u.API,(function(){return"API"})),(0,l.Z)(i,u.EVENT,(function(){return"event"})),(0,l.Z)(i,u.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(o||(o={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(c||(c={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var a=(r={},(0,l.Z)(r,s.CREATED_AT,"Created at"),(0,l.Z)(r,s.NAME,"Name"),(0,l.Z)(r,s.PIPELINE,"Pipeline"),(0,l.Z)(r,s.STATUS,"Status"),(0,l.Z)(r,s.TYPE,"Type"),r)}}]);