"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4317],{97225:function(e,n,i){var t=i(75582),r=i(12691),l=i.n(r),c=i(82684),u=i(83455),o=i(34376),s=i(60328),d=i(16634),a=i(47999),f=i(67971),p=i(10919),h=i(93348),g=i(62609),x=i(86673),Z=i(87815),j=i(19711),_=i(46261),E=i(82531),C=i(10503),m=i(66050),k=i(49125),v=i(45838),I=i(9736),A=i(96510),T=i(66653),b=i(28598),P=1.5*k.iI;n.Z=function(e){var n=e.fetchPipelineSchedules,i=e.highlightRowOnHover,r=e.includeCreatedAtColumn,y=e.includePipelineColumn,w=e.pipeline,N=e.pipelineSchedules,S=e.pipelineTriggersByName,L=e.selectedSchedule,V=e.setErrors,z=e.setSelectedSchedule,D=e.stickyHeader,B=null===w||void 0===w?void 0:w.uuid,R=(0,o.useRouter)(),O=(0,c.useRef)({}),q=(0,c.useState)(null),F=q[0],H=q[1],M=(0,c.useState)(0),U=M[0],Y=M[1],K=(0,c.useState)(0),J=K[0],Q=K[1],W=(0,u.Db)((function(e){return E.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){n()},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}}),X=(0,t.Z)(W,1)[0],$=(0,u.Db)((function(e){return E.ZP.pipeline_schedules.useDelete(e)()}),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){n(),B?R.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(B,"/triggers")):n()},onErrorCallback:function(e,n){return V({errors:n,response:e})}})}}),G=(0,t.Z)($,1)[0],ee=[{label:function(){return""},uuid:"action"},{uuid:"Info"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Latest status"},{uuid:"Logs"}];(0,I.Ct)()||ee.push({label:function(){return""},uuid:"edit/delete"});var ne=[null,null,null,1,null,null,null,null,null];return y&&(ee.splice(2,0,{uuid:"Pipeline"}),ne.splice(2,0,2)),r&&(ee.splice(3,0,{uuid:"Created at"}),ne.splice(3,0,null)),(0,b.jsx)(v.cl,{overflowVisible:!0,children:0===N.length?(0,b.jsx)(x.Z,{px:3,py:1,children:(0,b.jsx)(j.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,b.jsx)(Z.Z,{columnFlex:ne,columns:ee,highlightRowOnHover:i,isSelectedRow:function(e){return N[e].id===(null===L||void 0===L?void 0:L.id)},onClickRow:z?function(e){return null===z||void 0===z?void 0:z(N[e])}:null,rowVerticalPadding:6,rows:N.map((function(e,n){var i,t,u=e.id,o=e.created_at,Z=e.pipeline_runs_count,E=e.pipeline_uuid,v=e.last_pipeline_run_status,A=e.name,w=e.schedule_interval,N=e.status,L=B||E;O.current[u]=(0,c.createRef)(),h.fq.ACTIVE===N?t=(0,b.jsx)(d.Z,{size:P,success:!0}):h.fq.INACTIVE===N&&(t=(0,b.jsx)(d.Z,{borderSize:1,size:P,square:!0,warning:!0}));var V=[(0,b.jsx)(s.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,T.j)(n),X({id:e.id,status:h.fq.ACTIVE===N?h.fq.INACTIVE:h.fq.ACTIVE})},children:h.fq.ACTIVE===N?(0,b.jsx)(C.dz,{muted:!0,size:2*k.iI}):(0,b.jsx)(C.Py,{default:!0,size:2*k.iI})},"toggle_trigger_".concat(n)),(0,b.jsxs)(f.Z,{alignItems:"center",flexDirection:"row",children:[(0,b.jsx)(_.Z,{block:!0,label:N,size:P,widthFitContent:!0,children:t}),(null===S||void 0===S?void 0:S[A])&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x.Z,{mr:1}),(0,b.jsx)(_.Z,{block:!0,label:"This trigger is saved in code.",size:P,widthFitContent:!0,children:(0,b.jsx)(C.EK,{default:!0,size:P})})]})]},"trigger_status_".concat(n)),(0,b.jsx)(j.ZP,{default:!0,monospace:!0,children:null===(i=h.Z4[e.schedule_type])||void 0===i?void 0:i.call(h.Z4)},"trigger_type_".concat(n)),(0,b.jsx)(l(),{as:"/pipelines/".concat(L,"/triggers/").concat(u),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,b.jsx)(p.Z,{bold:!0,onClick:function(e){(0,T.j)(e),R.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(L,"/triggers/").concat(u))},sameColorAsText:!0,children:A})},"trigger_name_".concat(n)),(0,b.jsx)(j.ZP,{default:!0,monospace:!0,children:w},"trigger_frequency_".concat(n)),(0,b.jsx)(j.ZP,{default:!0,monospace:!0,children:Z},"trigger_run_count_".concat(n)),(0,b.jsx)(j.ZP,{danger:m.V.FAILED===v,default:!v,monospace:!0,success:m.V.COMPLETED===v,warning:m.V.CANCELLED===v,children:v||"N/A"},"latest_run_status_".concat(n)),(0,b.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return R.push("/pipelines/".concat(L,"/logs?pipeline_schedule_id[]=").concat(u))},children:(0,b.jsx)(C.B4,{default:!0,size:2*k.iI})},"logs_button_".concat(n))];return(0,I.Ct)()||V.push((0,b.jsxs)(f.Z,{children:[(0,b.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return R.push("/pipelines/".concat(L,"/triggers/").concat(u,"/edit"))},title:"Edit",children:(0,b.jsx)(C.I8,{default:!0,size:2*k.iI})}),(0,b.jsx)(x.Z,{mr:1}),(0,b.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var e,n,i,t;H(u),Y((null===(e=O.current[u])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0),Q((null===(i=O.current[u])||void 0===i||null===(t=i.current)||void 0===t?void 0:t.offsetLeft)||0)},ref:O.current[u],title:"Delete",children:(0,b.jsx)(C.rF,{default:!0,size:2*k.iI})}),(0,b.jsx)(a.Z,{onClickOutside:function(){return H(null)},open:F===u,children:(0,b.jsx)(g.Z,{danger:!0,left:(J||0)-286,onCancel:function(){return H(null)},onClick:function(){H(null),G(u)},title:"Are you sure you want to delete the trigger ".concat(A,"?"),top:(U||0)-(n<=1?40:96),width:40*k.iI})})]},"edit_delete_buttons_".concat(n))),y&&V.splice(2,0,(0,b.jsx)(j.ZP,{default:!0,monospace:!0,children:L},"pipeline_name_".concat(n))),r&&V.splice(3,0,(0,b.jsx)(j.ZP,{default:!0,monospace:!0,children:o},"created_at_".concat(n))),V})),stickyHeader:D,uuid:"pipeline-triggers"})})}},51099:function(e,n,i){i.d(n,{Q:function(){return d}});i(82684);var t=i(60328),r=i(67971),l=i(86673),c=i(10503),u=i(73899),o=i(49125),s=i(28598),d=22;n.Z=function(e){var n=e.page,i=e.maxPages,d=e.onUpdate,a=e.totalPages,f=[],p=i;if(p>a)f=Array.from({length:a},(function(e,n){return n}));else{var h=Math.floor(p/2),g=n-h;n+h>=a?(g=a-p+2,p-=2):n-h<=0?(g=0,p-=2):(p-=4,g=n-Math.floor(p/2)),f=Array.from({length:p},(function(e,n){return n+g}))}return(0,s.jsx)(s.Fragment,{children:a>0&&(0,s.jsxs)(r.Z,{alignItems:"center",children:[(0,s.jsx)(t.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(c.Hd,{size:1.5*o.iI,stroke:"#AEAEAE"})}),!f.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(t.Z,{onClick:function(){return d(0)},borderLess:!0,noBackground:!0,children:1})},0),!f.includes(1)&&(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(t.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),f.map((function(e){return(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(t.Z,{onClick:function(){e!==n&&d(e)},notClickable:e===n,backgroundColor:e===n&&u.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!f.includes(a-1)&&(0,s.jsxs)(s.Fragment,{children:[!f.includes(a-2)&&(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(t.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(t.Z,{onClick:function(){return d(a-1)},borderLess:!0,noBackground:!0,children:a})},a-1)]}),(0,s.jsx)(l.Z,{ml:1}),(0,s.jsx)(t.Z,{disabled:n===a-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(c.Kw,{size:1.5*o.iI,stroke:"#AEAEAE"})})]})})}},93348:function(e,n,i){i.d(n,{TR:function(){return a},U5:function(){return o},Xm:function(){return l},Z4:function(){return d},fq:function(){return u},kJ:function(){return s}});var t,r,l,c=i(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(l||(l={}));var u,o,s,d=(t={},(0,c.Z)(t,l.API,(function(){return"API"})),(0,c.Z)(t,l.EVENT,(function(){return"event"})),(0,c.Z)(t,l.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(u||(u={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(o||(o={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var a=(r={},(0,c.Z)(r,s.CREATED_AT,"Created at"),(0,c.Z)(r,s.NAME,"Name"),(0,c.Z)(r,s.PIPELINE,"Pipeline"),(0,c.Z)(r,s.STATUS,"Status"),(0,c.Z)(r,s.TYPE,"Type"),r)}}]);