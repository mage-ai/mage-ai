"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7225],{55264:function(n,e,t){var i=t(82684),r=t(79891),u=t(67971),c=t(19711),l=t(24224),o=t(28598);e.Z=function(n){var e=n.onClickTag,t=n.tags,a=void 0===t?[]:t,s=(0,i.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)||0}),[a]),d=(0,i.useMemo)((function(){return(0,l.YC)(a||[],"uuid")}),[a]);return(0,o.jsx)(u.ZP,{alignItems:"center",flexWrap:"wrap",children:null===d||void 0===d?void 0:d.reduce((function(n,t){return n.push((0,o.jsx)("div",{style:{marginBottom:2,marginRight:s>=2?4:0,marginTop:2},children:(0,o.jsx)(r.Z,{onClick:e?function(){return e(t)}:null,small:!0,children:(0,o.jsx)(c.ZP,{children:t.uuid})})},"tag-".concat(t.uuid))),n}),[])})}},97225:function(n,e,t){var i=t(75582),r=t(12691),u=t.n(r),c=t(82684),l=t(83455),o=t(34376),a=t(60328),s=t(16634),d=t(47999),p=t(67971),f=t(10919),h=t(93348),g=t(62609),m=t(86673),x=t(87815),v=t(55264),_=t(19711),j=t(46261),y=t(82531),Z=t(22341),b=t(66050),C=t(49125),k=t(45838),I=t(42305),S=t(9736),T=t(96510),D=t(66653),E=t(28598),P=1.5*C.iI;e.Z=function(n){var e=n.disableActions,t=n.fetchPipelineSchedules,r=n.highlightRowOnHover,w=n.includeCreatedAtColumn,O=n.includePipelineColumn,A=n.pipeline,Y=n.pipelineSchedules,M=n.pipelineTriggersByName,N=n.selectedSchedule,z=n.setErrors,H=n.setSelectedSchedule,V=n.stickyHeader,F=null===A||void 0===A?void 0:A.uuid,R=(0,o.useRouter)(),q=(0,c.useRef)({}),B=(0,c.useState)(null),L=B[0],K=B[1],W=(0,c.useState)(0),J=W[0],U=W[1],$=(0,c.useState)(0),X=$[0],G=$[1],Q=(0,l.Db)((function(n){return y.ZP.pipeline_schedules.useUpdate(n.id)({pipeline_schedule:n})}),{onSuccess:function(n){return(0,T.wD)(n,{callback:function(){null===t||void 0===t||t()},onErrorCallback:function(n,e){return z({errors:e,response:n})}})}}),nn=(0,i.Z)(Q,1)[0],en=(0,l.Db)((function(n){return y.ZP.pipeline_schedules.useDelete(n)()}),{onSuccess:function(n){return(0,T.wD)(n,{callback:function(){null===t||void 0===t||t(),F?R.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(F,"/triggers")):null===t||void 0===t||t()},onErrorCallback:function(n,e){return z({errors:e,response:n})}})}}),tn=(0,i.Z)(en,1)[0],rn=[],un=[];return e||(rn.push.apply(rn,[null,null,null]),un.push.apply(un,[{label:function(){return""},uuid:"action"},{uuid:"Info"},{uuid:"Type"}])),rn.push.apply(rn,[1]),un.push.apply(un,[{uuid:"Name"}]),e||(rn.push.apply(rn,[null,2]),un.push.apply(un,[{uuid:"Frequency"},{uuid:"Tags"}])),rn.push.apply(rn,[null,1,1,null]),un.push.apply(un,[{uuid:"Runs"},{tooltipMessage:"This is the execution date of the next pipeline run         (after the initial run if the trigger has no runs yet).",uuid:"Next run date"},{uuid:"Latest status"},{uuid:"Logs"}]),e||(0,S.Ct)()||(rn.push.apply(rn,[null]),un.push({label:function(){return""},uuid:"edit/delete"})),!e&&O&&(un.splice(2,0,{uuid:"Pipeline"}),rn.splice(2,0,2)),!e&&w&&(un.splice(3,0,{uuid:"Created at"}),rn.splice(3,0,null)),(0,E.jsx)(k.cl,{overflowVisible:!0,children:0===Y.length?(0,E.jsx)(m.Z,{px:3,py:1,children:(0,E.jsx)(_.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,E.jsx)(x.Z,{columnFlex:rn,columns:un,highlightRowOnHover:r,isSelectedRow:function(n){return Y[n].id===(null===N||void 0===N?void 0:N.id)},onClickRow:H?function(n){return null===H||void 0===H?void 0:H(Y[n])}:null,rowVerticalPadding:6,rows:Y.map((function(n,t){var i,r=n.id,l=n.created_at,o=n.next_pipeline_run_date,x=n.pipeline_runs_count,y=n.pipeline_uuid,k=n.last_pipeline_run_status,T=n.name,A=n.schedule_interval,Y=n.status,N=n.tags,z=F||y;q.current[r]=(0,c.createRef)(),h.fq.ACTIVE===Y?i=(0,E.jsx)(s.Z,{size:P,success:!0}):h.fq.INACTIVE===Y&&(i=(0,E.jsx)(s.Z,{borderSize:1,size:P,square:!0,warning:!0}));var H,V=[];e?V.push.apply(V,[(0,E.jsx)(_.ZP,{bold:!0,children:T},"trigger_name_".concat(t))]):V.push.apply(V,[(0,E.jsx)(a.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(e){(0,D.j)(e),nn({id:n.id,status:h.fq.ACTIVE===Y?h.fq.INACTIVE:h.fq.ACTIVE})},children:h.fq.ACTIVE===Y?(0,E.jsx)(Z.dz,{muted:!0,size:2*C.iI}):(0,E.jsx)(Z.Py,{default:!0,size:2*C.iI})},"toggle_trigger_".concat(t)),(0,E.jsxs)(p.ZP,{alignItems:"center",flexDirection:"row",children:[(0,E.jsx)(j.Z,{block:!0,label:Y,size:P,widthFitContent:!0,children:i}),(null===M||void 0===M?void 0:M[T])&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.Z,{mr:1}),(0,E.jsx)(j.Z,{block:!0,label:"This trigger is saved in code.",size:P,widthFitContent:!0,children:(0,E.jsx)(Z.EK,{default:!0,size:P})})]})]},"trigger_status_".concat(t)),(0,E.jsx)(_.ZP,{default:!0,monospace:!0,children:null===(H=h.Z4[n.schedule_type])||void 0===H?void 0:H.call(h.Z4)},"trigger_type_".concat(t)),(0,E.jsx)(u(),{as:"/pipelines/".concat(z,"/triggers/").concat(r),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,E.jsx)(f.Z,{bold:!0,onClick:function(n){(0,D.j)(n),R.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(z,"/triggers/").concat(r))},sameColorAsText:!0,children:T})},"trigger_name_".concat(t))]);return e||V.push.apply(V,[(0,E.jsx)(_.ZP,{default:!0,monospace:!0,children:A},"trigger_frequency_".concat(t)),(0,E.jsx)("div",{children:(0,E.jsx)(v.Z,{tags:null===N||void 0===N?void 0:N.map((function(n){return{uuid:n}}))})},"pipeline_tags_".concat(t))]),V.push.apply(V,[(0,E.jsx)(_.ZP,{default:!0,monospace:!0,children:x},"trigger_run_count_".concat(t)),(0,E.jsx)(_.ZP,{default:!0,monospace:!0,small:!0,children:o?(0,I.d$)(o,{includeSeconds:!0,utcFormat:!0}):(0,E.jsx)(E.Fragment,{children:"\u2014"})},"trigger_next_run_date_".concat(t)),(0,E.jsx)(_.ZP,{danger:b.V.FAILED===k,default:!k,monospace:!0,success:b.V.COMPLETED===k,warning:b.V.CANCELLED===k,children:k||"N/A"},"latest_run_status_".concat(t)),(0,E.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return R.push("/pipelines/".concat(z,"/logs?pipeline_schedule_id[]=").concat(r))},children:(0,E.jsx)(Z.UL,{default:!0,size:2*C.iI})},"logs_button_".concat(t))]),e||(0,S.Ct)()||V.push((0,E.jsxs)(p.ZP,{children:[(0,E.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return R.push("/pipelines/".concat(z,"/triggers/").concat(r,"/edit"))},title:"Edit",children:(0,E.jsx)(Z.I8,{default:!0,size:2*C.iI})}),(0,E.jsx)(m.Z,{mr:1}),(0,E.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var n,e,t,i;K(r),U((null===(n=q.current[r])||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0),G((null===(t=q.current[r])||void 0===t||null===(i=t.current)||void 0===i?void 0:i.offsetLeft)||0)},ref:q.current[r],title:"Delete",children:(0,E.jsx)(Z.rF,{default:!0,size:2*C.iI})}),(0,E.jsx)(d.Z,{onClickOutside:function(){return K(null)},open:L===r,children:(0,E.jsx)(g.Z,{danger:!0,left:(X||0)-286,onCancel:function(){return K(null)},onClick:function(){K(null),tn(r)},title:"Are you sure you want to delete the trigger ".concat(T,"?"),top:(J||0)-(t<=1?40:96),width:40*C.iI})})]},"edit_delete_buttons_".concat(t))),!e&&O&&V.splice(2,0,(0,E.jsx)(_.ZP,{default:!0,monospace:!0,children:z},"pipeline_name_".concat(t))),!e&&w&&V.splice(3,0,(0,E.jsx)(_.ZP,{default:!0,monospace:!0,children:l},"created_at_".concat(t))),V})),stickyHeader:V,uuid:"pipeline-triggers"})})}},79891:function(n,e,t){var i=t(38626),r=t(60328),u=t(67971),c=t(86673),l=t(19711),o=t(23831),a=t(22341),s=t(49125),d=t(31012),p=t(28598),f=i.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," ",""],(function(n){return!n.primary&&"\n    background-color: ".concat((n.theme.background||o.Z.background).tag,";\n  ")}),(function(n){return n.primary&&"\n    background-color: ".concat((n.theme.chart||o.Z.chart).primary,";\n  ")}),(function(n){return!n.small&&"\n    border-radius: ".concat((s.iI+d.Al)/2,"px;\n    height: ").concat(1.5*s.iI+d.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(n){return n.small&&"\n    border-radius: ".concat((s.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(n){return n.border&&"\n    border: 1px solid ".concat((n.theme.content||o.Z.content).muted,";\n  ")}));e.Z=function(n){var e=n.border,t=n.children,i=n.disabled,o=n.label,d=n.onClick,h=n.primary,g=n.small;return(0,p.jsx)(f,{border:e,primary:h,small:g,children:(0,p.jsx)(r.Z,{basic:!0,disabled:i,noBackground:!0,noPadding:!0,onClick:d,transparent:!0,children:(0,p.jsxs)(u.ZP,{alignItems:"center",children:[t,o&&(0,p.jsx)(l.ZP,{small:g,children:o}),!i&&d&&(0,p.jsx)(c.Z,{ml:1,children:(0,p.jsx)(a.x8,{default:h,muted:!h,size:g?s.iI:1.25*s.iI})})]})})})}},42305:function(n,e,t){t.d(e,{A5:function(){return _},AY:function(){return j},BP:function(){return v},JX:function(){return x},OC:function(){return d},Pc:function(){return y},Ro:function(){return Z},Tz:function(){return m},Y_:function(){return C},d$:function(){return g},jV:function(){return b},lJ:function(){return k},n1:function(){return f},s8:function(){return a},vk:function(){return u},yD:function(){return s}});var i,r,u,c=t(82394),l=t(92083),o=t.n(l);!function(n){n.TODAY="today",n.WEEK="week",n.MONTH="month"}(u||(u={}));var a=(i={},(0,c.Z)(i,u.TODAY,"today"),(0,c.Z)(i,u.WEEK,"last 7 days"),(0,c.Z)(i,u.MONTH,"last 30 days"),i),s=(r={},(0,c.Z)(r,u.TODAY,0),(0,c.Z)(r,u.WEEK,6),(0,c.Z)(r,u.MONTH,29),r),d="YYYY-MM-DD HH:mm:ss",p="YYYY-MM-DD HH:mm",f="YYYY-MM-DD",h="MMMM D, YYYY";function g(n,e){var t=e||{},i=t.dayAgo,r=t.includeSeconds,u=t.utcFormat,c=o()(n),l=p;return u&&(c=c.utc()),i&&(c=c.subtract(1,"days")),r&&(l=d),c.format(l)}function m(n){var e=g((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==n&&void 0!==n&&n.dateObj?new Date(e):e}function x(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o().unix(n).format(null!==e&&void 0!==e&&e.withSeconds?d:p)}function v(n,e,t){return o()(n).utc().hours(+e).minutes(+t).format()}function _(n){return o()(n).unix()}function j(n,e,t,i){var r="".concat(n.toISOString().split("T")[0]," ").concat(e,":").concat(t);return i?"".concat(r,":").concat(i):r}function y(n){var e=o().unix(+n).utc();return{date:e.toDate(),hour:String(e.hour()),minute:String(e.minute())}}function Z(n,e){var t=o().utc(),i=o().utc();null!==e&&void 0!==e&&e.localTime&&(t=o()().local(),i=o()().local());var r=(t=t.subtract(n,"days")).format(h),u=i.format(h);return null!==e&&void 0!==e&&e.endDateOnly?u:"".concat(r," - ").concat(u)}function b(n,e){var t=null!==e&&void 0!==e&&e.localTime?o()().local():o().utc();if(n===u.WEEK){var i=s[u.WEEK];t=t.subtract(i,"days")}else if(n===u.MONTH){var r=s[u.MONTH];t=t.subtract(r,"days")}return null!==e&&void 0!==e&&e.isoString?t.startOf("day").toISOString():t.startOf("day").format(d)}function C(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,e=new Date,t=[],i=0;i<n;i++)t.unshift(e.toISOString().split("T")[0]),e.setDate(e.getDate()-1);return t}function k(n){return n.padStart(2,"0")}}}]);