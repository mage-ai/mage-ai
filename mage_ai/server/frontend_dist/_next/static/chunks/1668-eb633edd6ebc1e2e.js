"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1668],{48421:function(e,n,t){t.d(n,{Z:function(){return _e}});var o=t(21831),i=t(82394),r=t(75582),l=t(82684),u=t(65701),c=t(1254),a=t(69864),d=t(35686),s=t(72619),v=t(31882),f=t(55485),h=t(10305),p=t(44085),m=t(69650),x=t(38276),g=t(30160),b=t(17488),j=t(35058),y=t(85108),Z=t(81728),k=t(86735),_=t(35576),C=t(65956),P=t(70515),w=t(42122),O=t(28598);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=function(e){var n=e.block,t=e.updateConfiguration,o=n||{},u=o.data,c=o.configuration,a=(c||{}).chart_type,d=(u||{}).columns,s=y.G8[a],I=(0,l.useMemo)((function(){return Object.entries(s||{}).reduce((function(e,n){var o=(0,r.Z)(n,2),l=o[0],u=o[1];return S(S({},e),{},(0,i.Z)({},l,u.map((function(e){var n,o=e.autoRun,r=e.description,l=e.label,u=e.monospace,a=e.options,s=e.settings,I=void 0===s?{}:s,M=e.type,E=e.uuid,L=function(e,n){var t=(n||{inline:!1}).inline,o=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(g.ZP,{bold:!0,children:null===D||void 0===D?void 0:D.label}),r&&(0,O.jsx)(x.Z,{mb:1,children:(Array.isArray(r)?r:[r]).map((function(e,n){return(0,O.jsx)(g.ZP,{monospace:u,muted:!0,xsmall:!0,children:(0,O.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})},"".concat(e,"-").concat(n))}))}),e&&(0,O.jsx)(x.Z,{mt:2,children:e})]});return t?o:(0,O.jsx)(C.Z,{children:o})},D={fullWidth:!0,key:E,label:(0,Z.kC)(l()),monospace:u,onChange:function(e){return t(S({},(0,w.mv)(c,E,e.target.value)),{autoRun:o})},value:c?(0,w.t2)(c||{},E):""};if(y.VR.COLUMNS===M){var R=c[E]||[];n=(0,O.jsxs)(O.Fragment,{children:[(!I.maxValues||R.length<I.maxValues)&&(0,O.jsx)(p.Z,S(S({},D),{},{onChange:function(e){var n=c[E]||[],r=e.target.value;n.includes(r)?n=(0,k.Od)(n,(function(e){return e===r})):n.push(r),t((0,i.Z)({},E,n),{autoRun:o})},value:null,children:(0,k.YC)((d||[]).filter((function(e){return!R.includes(e)})),(function(e){return e})).map((function(e){return(0,O.jsx)("option",{value:e,children:e},e)}))})),R.length>0&&(0,O.jsx)("div",{style:{marginTop:4}}),R.map((function(e){return(0,O.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,O.jsx)(v.Z,{label:e,onClick:function(){t((0,i.Z)({},E,(0,k.Od)(R,(function(n){return n===e}))),{autoRun:o})}})},e)}))]})}else if(y.VR.METRICS===M){var F=c[E]||[];n=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Metrics"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Select a column and an aggregation function."}),(0,O.jsxs)(h.Z,{onChange:function(e,n){var r=n.resetValues,l=n.setValues;2===e.filter((function(e){return!!e})).length&&(F.find((function(n){var t=n.aggregation;return n.column===e[1]&&t===e[0]}))||(t((0,i.Z)({},E,F.concat({aggregation:e[0],column:e[1]})),{autoRun:o}),l([null,null]),r()))},children:[(0,O.jsx)(p.Z,S(S({},D),{},{label:"aggregation",children:(0,k.YC)(j.bn,(function(e){return e})).map((function(e){return(0,O.jsx)("option",{value:e,children:e},e)}))})),(0,O.jsx)(p.Z,S(S({},D),{},{label:"column",children:(0,k.YC)(d||[],(function(e){return e})).map((function(e){return(0,O.jsx)("option",{value:e,children:e},e)}))}))]}),F.map((function(e){var n=e.aggregation,r=e.column;return(0,O.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:4},children:(0,O.jsx)(v.Z,{label:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(g.ZP,{inline:!0,monospace:!0,children:[n,"("]}),r,(0,O.jsx)(g.ZP,{inline:!0,monospace:!0,children:")"})]}),onClick:function(){t((0,i.Z)({},E,(0,k.Od)(F,(function(e){var t=e.aggregation,o=e.column;return n===t&&r===o}))),{autoRun:o})}})},"".concat(n,"(").concat(r,")"))}))]})}else y.VR.CODE===M?n=L((0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(g.ZP,{monospace:!0,small:!0,children:[(0,O.jsx)(g.ZP,{color:"#00CC99",inline:!0,monospace:!0,small:!0,children:"function"})," ",(0,O.jsx)(g.ZP,{color:"#0080FF",inline:!0,monospace:!0,small:!0,children:"format"}),(0,O.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:"("}),(0,O.jsx)(g.ZP,{color:"#00FFFF",inline:!0,monospace:!0,small:!0,children:"value"}),","," ",(0,O.jsx)(g.ZP,{color:"#00FFFF",inline:!0,monospace:!0,small:!0,children:"index"}),","," ",(0,O.jsx)(g.ZP,{color:"#00FFFF",inline:!0,monospace:!0,small:!0,children:"values"}),(0,O.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:")"})," ",(0,O.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:"{"})]}),(0,O.jsx)(_.Z,S(S({},D),{},{autoGrow:!0,borderless:!0,label:null,monospace:!0,onChange:function(e){t((0,i.Z)({},E,e.target.value),{skip_render:!0})},paddingVertical:0,primary:!0,rows:1,small:!0})),(0,O.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:"}"})]})):a?n=(0,O.jsx)(p.Z,S(S({},D),{},{children:a.map((function(e){return(0,O.jsx)("option",{value:e,children:e},e)}))})):y.VR.TOGGLE===M?n=(0,O.jsx)(x.Z,{mt:P.cd,children:(0,O.jsxs)(f.ZP,{alignItems:"center",children:[(0,O.jsx)(m.Z,{checked:!(null===D||void 0===D||!D.value),compact:!0,onCheck:function(e){return null===D||void 0===D?void 0:D.onChange({target:{value:e(null===D||void 0===D?void 0:D.value)}})}}),(0,O.jsx)(x.Z,{mr:P.cd}),L(null,{inline:!0})]})}):(n=(0,O.jsx)(b.Z,S(S({},D),{},{label:r||null===D||void 0===D?void 0:D.label,placeholder:r?null===D||void 0===D?void 0:D.label:void 0,type:M})),r&&(n=L(n)));return(0,O.jsx)(x.Z,{mb:1,children:n},E)}))))}),{noCode:[]})}),[d,c,s,t]),M=(I.code,I.noCode);return(0,O.jsx)(O.Fragment,{children:M})},E=t(54750),L=t(89083),D=t(62547),R=t(2842),F=t(23780),N=t(75399),B=t(44425),U=t(97618),A=t(65927),H=t(4190),T=t(71180),W=t(15338),q=t(85854),z=t(48670),V=t(72473),G=t(47041),J=t(53808);var K=function(){var e=(0,l.useRef)(null),n=(0,l.useCallback)((function(n,t){for(var o=arguments.length,i=new Array(o>2?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];e.current&&clearTimeout(e.current),e.current=setTimeout((function(){n.apply(void 0,i)}),t)}),[]);return[n,(0,l.useCallback)((function(){e.current&&(clearTimeout(e.current),e.current=null)}),[])]},Y=t(19183),X=t(10975),Q=t(14567),$=3*P.iI;var ee=function(e){var n=e.buildChart,t=e.height,o=e.width,i=(0,l.useMemo)((function(){return t-(G.nn+$)}),[t]);return(0,O.jsx)(O.Fragment,{children:null===n||void 0===n?void 0:n({height:i,width:o})})},ne=t(24496),te=t(46732),oe=t(25976),ie=t(44897),re=t(42631),le=3*P.iI,ue=oe.default.div.withConfig({displayName:"indexstyle__DividerStyle",componentId:"sc-17acf36-0"})(["display:flex;position:relative;",";",";"],(function(e){return!e.horizontal&&"\n    height: 100%;\n    justify-content: center;\n    width: ".concat(le,"px;\n  ")}),(function(e){return e.horizontal&&"\n    align-items: center;\n    height: ".concat(le,"px;\n    margin-left: ").concat(le,"px;\n    margin-right: ").concat(le,"px;\n    width: calc(100% - ").concat(2*le,"px);\n  ")})),ce=oe.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-17acf36-1"})(["border-radius:","px;"," ",";",";"],re.Ro,(function(e){return"\n    background-color: ".concat((e.theme||ie.Z).accent.blueLight,";\n  ")}),(function(e){return!e.horizontal&&"\n    height: 100%;\n    width: ".concat(.5*P.iI,"px;\n  ")}),(function(e){return e.horizontal&&"\n    height: ".concat(.5*P.iI,"px;\n    width: 100%;\n  ")})),ae=oe.default.a.withConfig({displayName:"indexstyle__ButtonStyle",componentId:"sc-17acf36-2"})(["align-items:center;border-radius:50%;display:flex;height:","px;justify-content:center;position:absolute;width:","px;"," ",";",";"],3*P.iI,3*P.iI,(function(e){return"\n    background-color: ".concat((e.theme||ie.Z).background.page,";\n    border: ").concat(re.mP,"px solid ").concat((e.theme||ie.Z).accent.blueLight,";\n    box-shadow:\n      0 0 0 ").concat(re.mP,"px ").concat((e.theme||ie.Z).background.page,";\n\n    &:hover {\n      background-color: ").concat((e.theme||ie.Z).interactive.linkPrimary,";\n      border: ").concat(re.mP,"px solid ").concat((e.theme||ie.Z).interactive.linkPrimary,";\n      cursor: pointer;\n    }\n  ")}),(function(e){return!e.horizontal&&"\n    top: ".concat(3*P.iI,"px;\n  ")}),(function(e){return e.horizontal&&"\n    left: ".concat(3*P.iI,"px;\n  ")}));var de=function(e){var n=e.horizontal,t=e.onClickAdd,o=(0,l.useState)(!1),i=o[0],r=o[1];return(0,O.jsx)(ue,{horizontal:n,onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:i&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ae,{horizontal:n,href:"#",onClick:function(e){e.preventDefault(),null===t||void 0===t||t()},children:(0,O.jsx)(V.Add,{size:2*P.iI})}),(0,O.jsx)(ce,{horizontal:n})]})})},se=2*(re.YF+P.cd*P.iI)+le,ve=oe.default.div.withConfig({displayName:"indexstyle__ItemStyle",componentId:"sc-rcft6g-0"})(["border-radius:","px;padding:","px;",""],re.Ro,P.cd*P.iI,(function(e){return"\n    border: ".concat(re.YF,"px ").concat(re.M8," ").concat((e.theme||ie.Z).interactive.defaultBorder,";\n    background-color: ").concat((e.theme||ie.Z).background.chartBlock,";\n  ")})),fe=t(77837),he=t(38860),pe=t.n(he);function me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?me(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ge=function(e){var n=(0,l.useState)(null),t=n[0],o=n[1],i=(0,l.useState)(!1),r=i[0],u=i[1],c=(0,l.useState)(null),a=c[0],d=c[1],s=(0,l.useRef)(null),v=(0,l.useCallback)((0,fe.Z)(pe().mark((function n(){var t,i,r,l,c,a,v,f=arguments;return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(u(!0),d(null),s.current&&s.current.abort(),s.current=new AbortController,t=s.current.signal,n.prev=5,i=f.length,r=new Array(i),l=0;l<i;l++)r[l]=f[l];return r.length>0&&"object"===typeof r[r.length-1]?(c=r[r.length-1],r[r.length-1]=xe(xe({},c),{},{signal:t})):r.push({signal:t}),n.next=10,e.apply(void 0,r);case 10:a=n.sent,o(a),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(5),"AbortError"!==(v=n.t0).name&&d(v);case 18:return n.prev=18,u(!1),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[5,14,18,21]])}))),[e]);return(0,l.useEffect)((function(){return function(){s.current&&s.current.abort()}}),[]),{doFetch:v,data:t,isLoading:r,error:a}};function be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?be(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ye=function(e){var n,t=e.block,o=e.blockLayoutItem,u=void 0===o?null:o,c=e.blockUUID,v=e.columnIndex,h=e.columnLayoutSettings,p=e.columnsInRow,m=e.createNewBlockItem,y=e.detail,Z=e.disableDrag,k=e.first,_=e.height,C=e.isLoading,w=e.onDrop,I=e.onFetchBlockLayoutItem,S=e.onSave,M=e.pageBlockLayoutUUID,E=e.removeBlockLayoutItem,L=e.rowIndex,D=e.setSelectedBlockItem,R=e.updateLayout,B=e.width,A=(0,l.useRef)(null),W=(0,l.useState)(!1),q=W[0],z=W[1],G=(0,l.useState)(!1),J=G[0],K=G[1],Y=(0,l.useState)(!1),$=Y[0],oe=Y[1],ie=(0,l.useState)(h)[0],re=(0,l.useState)(t),ue=re[0],ce=(re[1],(0,l.useMemo)((function(){return u||ue}),[u,ue])),ae=(0,F.VI)(null,{},[],{uuid:"BlockLayoutItem/".concat(M,"/").concat(c)}),fe=(0,r.Z)(ae,1)[0],he=(0,l.useMemo)((function(){var e,n=null===ce||void 0===ce||null===(e=ce.data_source)||void 0===e?void 0:e.refresh_interval;return n||6e4}),[ce]),pe=(0,l.useState)({block_layout_item:ce}),me=pe[0],xe=(pe[1],(0,a.Db)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.ZP.block_layout_items.page_block_layouts.detailAsync(!u&&encodeURIComponent(M),!u&&encodeURIComponent(c),{skip_render:!(null===e||void 0===e||!e.skip_render)},{refreshInterval:he,revalidateOnFocus:!1})}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){if(null!==e&&void 0!==e&&e.error)fe({response:e});else{var n=null===e||void 0===e?void 0:e.block_layout_item;I&&(null===I||void 0===I||I(n))}}})}})),be=(0,r.Z)(xe,2),ye=be[0],Ze=be[1].isLoading,ke=ge((function(){return!y&&ye()})),_e=ke.doFetch;ke.data,ke.isLoading,ke.error,(0,l.useEffect)((function(){_e()}),[]);var Ce=(0,l.useMemo)((function(){return C&&Ze}),[C,Ze]),Pe=(0,l.useMemo)((function(){var e;return(null===ce||void 0===ce?void 0:ce.data)||(null===me||void 0===me||null===(e=me.block_layout_item)||void 0===e?void 0:e.data)}),[ce,me]),we=(0,l.useCallback)((function(e){var n,t=e.height,o=e.width;if(!Pe)return null;var r=null===Pe||void 0===Pe?void 0:Pe.render;if(r){var l=null===Pe||void 0===Pe?void 0:Pe.render_type;if(N.hN.JPEG===l||N.hN.JPG===l)return(0,O.jsx)("img",{height:t,src:"data:image/jpeg;base64,".concat(r),width:o});if(N.hN.PNG===l)return(0,O.jsx)("img",{height:t,src:"data:image/png;base64,".concat(r),width:o});if(N.hN.HTML===l)return(0,O.jsx)("iframe",{srcDoc:r,style:{height:t,width:o}})}return(0,O.jsx)(ne.Z,{block:je(je({},ce),{},{configuration:je(je({},null===ce||void 0===ce?void 0:ce.configuration),{},(0,i.Z)({},j.JJ,t))}),data:Pe,width:o,xAxisLabel:null===ce||void 0===ce||null===(n=ce.configuration)||void 0===n?void 0:n.x_axis_label})}),[ce,Pe]),Oe=(0,X.c)((function(){return{collect:function(e){return{isDragging:!!e.isDragging()}},item:{blockLayoutItem:ce,columnIndex:v,rowIndex:L},type:"BlockLayoutItem"}}),[ce,v,L]),Ie=(0,r.Z)(Oe,2),Se=Ie[0],Me=Ie[1],Ee=(0,Q.L)((function(){return{accept:"BlockLayoutItem",drop:function(e){return null===w||void 0===w?void 0:w(e)}}}),[w]),Le=(0,r.Z)(Ee,2)[1];return y?(0,O.jsx)(ee,{buildChart:we,height:_,width:B}):(0,O.jsxs)(O.Fragment,{children:[k&&(0,O.jsx)(de,{onClickAdd:function(){return m({columnIndex:v,rowIndex:L})}}),(0,O.jsx)(U.Z,{flex:1,flexDirection:"column",children:(0,O.jsx)("div",{onMouseEnter:function(){return oe(!0)},onMouseLeave:function(){return oe(!1)},ref:Le,children:(0,O.jsxs)(ve,je(je({},Se),{},{ref:Z?null:Me,children:[(0,O.jsx)(x.Z,{mb:1,children:(0,O.jsxs)(f.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,O.jsx)(x.Z,{py:1,children:(0,O.jsx)(g.ZP,{bold:!0,default:!0,children:(null===ce||void 0===ce?void 0:ce.name)||c})}),(0,O.jsx)("div",{children:(0,O.jsx)(te.Z,{items:[{label:function(){return"Edit content"},onClick:function(){return null===D||void 0===D?void 0:D(ce)},uuid:"Edit content"},{label:function(){return"Change height and/or width"},onClick:function(){return K(!0)},uuid:"Change"},{label:function(){return"Remove chart"},onClick:function(){return null===E||void 0===E?void 0:E()},uuid:"Remove chart"}],onClickCallback:function(){return z(!1)},onClickOutside:function(){return z(!1)},open:q,parentRef:A,rightOffset:0,uuid:"BlockLayoutItem/".concat(c),children:($||q)&&(0,O.jsx)(T.ZP,{disabled:Ce,iconOnly:!0,loading:Ce,noBackground:!0,onClick:function(){z(!0)},children:(0,O.jsx)(V.Ellipsis,{default:!0,size:2*P.iI})})})})]})}),J&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(f.ZP,{alignItems:"center",fullWidth:!0,children:[(0,O.jsxs)(U.Z,{flex:1,flexDirection:"column",children:[(0,O.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Width (flex box)"}),(0,O.jsx)(b.Z,{compact:!0,fullWidth:!0,onChange:function(e){return null===R||void 0===R?void 0:R(je(je({},h),{},{width:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===h||void 0===h?void 0:h.width)||""})]}),(0,O.jsx)(x.Z,{mr:1}),(0,O.jsxs)(U.Z,{flex:1,flexDirection:"column",children:[(0,O.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Max width (%)"}),(0,O.jsx)(b.Z,{compact:!0,fullWidth:!0,label:"Max width percentage",onChange:function(e){return null===R||void 0===R?void 0:R(je(je({},h),{},{max_width_percentage:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===h||void 0===h?void 0:h.max_width_percentage)||""})]}),(0,O.jsx)(x.Z,{mr:1}),(0,O.jsxs)(U.Z,{flex:1,flexDirection:"column",children:[(0,O.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Height (pixels)"}),(0,O.jsx)(b.Z,{compact:!0,fullWidth:!0,onChange:function(e){return null===R||void 0===R?void 0:R(je(je({},h),{},{height:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===h||void 0===h?void 0:h.height)||""})]})]}),(0,O.jsx)(x.Z,{mt:P.cd,children:(0,O.jsxs)(f.ZP,{alignItems:"center",justifyContent:"flex-end",children:[(0,O.jsx)(T.ZP,{compact:!0,onClick:function(){null===S||void 0===S||S(),K(!1)},primary:!0,small:!0,children:"Save"}),(0,O.jsx)(x.Z,{mr:1}),(0,O.jsx)(T.ZP,{compact:!0,onClick:function(){K(!1),null===R||void 0===R||R(ie)},small:!0,children:"Cancel"})]})})]}),!me&&(0,O.jsx)(x.Z,{p:P.cd,children:(0,O.jsx)(H.Z,{})}),me&&!Pe&&(0,O.jsx)(g.ZP,{muted:!0,children:"Chart hasn\u2019t been configured or no data was retrieved."}),Pe&&we({height:_||(null===ce||void 0===ce||null===(n=ce.configuration)||void 0===n?void 0:n[j.JJ]),width:B-(se+1)-(p?le/p:0)})]}))})}),(0,O.jsx)(de,{onClickAdd:function(){return m({columnIndex:v+1,rowIndex:L})}})]})};function Ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ze(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _e=function(e){var n,t=e.leftOffset,v=e.pageBlockLayoutTemplate,h=e.topOffset,m=e.uuid,y=(0,F.VI)(null,{},[],{uuid:"BlockLayout/".concat(m)}),_=(0,r.Z)(y,1)[0],C=K(),I=(0,r.Z)(C,1)[0],S=(0,l.useState)({}),X=(S[0],S[1],(0,l.useState)(null)),Q=X[0],$=X[1],ee=(0,l.useState)({}),ne=ee[0],te=ee[1],oe=(0,l.useState)(!1),ie=(oe[0],oe[1],"block_layout_after_width_".concat(m)),re="block_layout_before_width_".concat(m),le=(0,l.useRef)(null),ue=(0,l.useState)((0,J.U2)(ie,40*P.iI)),ce=ue[0],ae=ue[1],se=(0,l.useState)(!1),ve=se[0],fe=se[1],he=(0,l.useState)(Math.max((0,J.U2)(re),50*P.iI)),pe=he[0],me=he[1],xe=(0,l.useState)(!1),ge=xe[0],be=xe[1],je=(0,l.useRef)(null),Ze=(0,Y.i)(),_e=(0,l.useState)(null),Ce=_e[0],Pe=_e[1],we=(0,l.useState)(null),Oe=we[0],Ie=we[1],Se=(0,l.useMemo)((function(){var e;return null===Ce||void 0===Ce||null===(e=Ce.data_source)||void 0===e?void 0:e.refresh_interval}),[Ce]),Me=(0,l.useMemo)((function(){return null===ne||void 0===ne?void 0:ne[null===Ce||void 0===Ce?void 0:Ce.uuid]}),[ne,Ce]),Ee=(0,l.useState)(null),Le=Ee[0],De=Ee[1],Re=(0,a.Db)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.ZP.block_layout_items.page_block_layouts.detailAsync(Ce&&encodeURIComponent(m),Ce&&encodeURIComponent(null===Ce||void 0===Ce?void 0:Ce.uuid),{configuration_override:encodeURIComponent(JSON.stringify((null===Q||void 0===Q?void 0:Q.configuration)||"")),content_override:encodeURIComponent((null===Q||void 0===Q?void 0:Q.content)||(null===Me||void 0===Me?void 0:Me.content)||""),data_source_override:encodeURIComponent(JSON.stringify((null===Q||void 0===Q?void 0:Q.data_source)||"")),skip_render:!(null===e||void 0===e||!e.skip_render)},{refreshInterval:Se,revalidateOnFocus:!Se})}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){return De((function(n){var t,o=null===e||void 0===e?void 0:e.block_layout_item;return(null===n||void 0===n||null===(t=n.block_layout_item)||void 0===t?void 0:t.uuid)!==(null===o||void 0===o?void 0:o.uuid)&&$((function(e){return ke(ke({},e),o)})),te((function(e){return ke(ke({},e),{},(0,i.Z)({},null===o||void 0===o?void 0:o.uuid,o))})),e}))}})}}),Fe=(0,r.Z)(Re,2),Ne=Fe[0],Be=Fe[1].isLoading,Ue=(0,l.useMemo)((function(){return null===Le||void 0===Le?void 0:Le.block_layout_item}),[Le]);(0,l.useEffect)((function(){var e;null!==Ue&&void 0!==Ue&&null!==(e=Ue.data)&&void 0!==e&&e.error&&_({response:null===Ue||void 0===Ue?void 0:Ue.data})}),[Ue,_]);var Ae=(0,l.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I((function(){return Ne({skip_render:!1})}),null!==n&&void 0!==n&&n.skip_render?3e3:1e3),$("function"===typeof e?e:function(n){return ke(ke({},n),e)})}),[Ne,I,$]),He=(0,l.useCallback)((function(e){Ae(ke(ke({},e),{},{name_new:(null===e||void 0===e?void 0:e.name_new)||(null===e||void 0===e?void 0:e.name)||(0,Z.Y6)()})),Pe(e)}),[Ae,Pe]),Te=(0,l.useState)(null),We=Te[0],qe=Te[1],ze=(0,l.useMemo)((function(){return null===We||void 0===We?void 0:We.page_block_layout}),[We]),Ve=(0,a.Db)((function(){return d.ZP.page_block_layouts.detailAsync(encodeURIComponent(m))}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){qe(e)}})}}),Ge=(0,r.Z)(Ve,1)[0];(0,l.useEffect)((function(){Ge()}),[Ge]);var Je=(0,l.useMemo)((function(){return null===ze||void 0===ze?void 0:ze.layout}),[ze]),Ke=(0,a.Db)((function(e){return d.ZP.page_block_layouts.useUpdate(encodeURIComponent(m))(e)}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){var n=(null===e||void 0===e?void 0:e.page_block_layout).blocks;qe(e);var t=Object.values(n).find((function(e){return e.name===(null===Q||void 0===Q?void 0:Q.name_new)}));t&&He(t),Ie(null)},onErrorCallback:function(e,n){return _({errors:n,response:e})}})}}),Ye=(0,r.Z)(Ke,2),Xe=Ye[0],Qe=Ye[1].isLoading,$e=(0,l.useCallback)((function(e){return Xe({page_block_layout:{blocks:ke(ke({},null===ze||void 0===ze?void 0:ze.blocks),{},(0,i.Z)({},null===e||void 0===e?void 0:e.uuid,(0,w.gR)(e,["data"]))),layout:null===ze||void 0===ze?void 0:ze.layout}})}),[ze,Xe]),en=(0,l.useCallback)((function(){return Xe({page_block_layout:{blocks:null===ze||void 0===ze?void 0:ze.blocks,layout:null===ze||void 0===ze?void 0:ze.layout}})}),[ze,Xe]),nn=(0,l.useMemo)((function(){return null===ze||void 0===ze?void 0:ze.blocks}),[ze]),tn=(0,l.useCallback)((function(e,n,t){var i,r=(0,o.Z)(Je);r[e][n]=t,i=r,qe((function(e){return ke(ke({},e),{},{page_block_layout:ke(ke({},null===e||void 0===e?void 0:e.page_block_layout),{},{layout:i})})}))}),[Je]),on=(0,l.useState)(null),rn=on[0],ln=on[1],un=(0,l.useState)(null),cn=un[0],an=un[1];(0,l.useEffect)((function(){var e;null===le||void 0===le||!le.current||ve||ge||ln(null===le||void 0===le||null===(e=le.current)||void 0===e?void 0:e.getBoundingClientRect())}),[ve,ge,le,Ce,Ze]),(0,l.useEffect)((function(){var e;null!==je&&void 0!==je&&je.current&&an(null===je||void 0===je||null===(e=je.current)||void 0===e?void 0:e.getBoundingClientRect())}),[je,Ce,Ze]),(0,l.useEffect)((function(){ve||(0,J.t8)(ie,ce)}),[ve,ce,ie]),(0,l.useEffect)((function(){ge||(0,J.t8)(re,pe)}),[ge,pe,re]);var dn=(0,l.useCallback)((function(e,n,t){var i=ke({},null===ze||void 0===ze?void 0:ze.blocks);null===i||void 0===i||delete i[e];var r=(0,o.Z)(null===ze||void 0===ze?void 0:ze.layout),l=r[n]||[],u=(0,k.oM)(l,t);0===(null===u||void 0===u?void 0:u.length)?r=(0,k.oM)(r,n):r[n]=u,Ie(e),Xe({page_block_layout:{blocks:i,layout:r}})}),[ze,Xe]),sn=(0,l.useCallback)((function(e,n,t,i){var r=(0,o.Z)(Je||[]),l=r[e]||[],u=l[n];if(e===t&&n!==i){var c=(0,k.oM)(l,n);r[e]=(0,k.Hk)(u,i>n?i:i-1,c)}else{var a=(0,k.oM)(l,n);r[e]=a;var d=(0,k.Hk)(u,i,r[t]);r[t]=d,0===(null===a||void 0===a?void 0:a.length)&&(r=(0,k.oM)(r,e))}e===t&&n===i||Xe({page_block_layout:{blocks:null===ze||void 0===ze?void 0:ze.blocks,layout:r}})}),[Je,ze,Xe]),vn=(0,l.useCallback)((function(e){var n=(0,Z.Y6)(),t={name:n,type:B.tf.CHART,uuid:(0,Z.kE)(n)},r=(0,o.Z)(Je||[]),l={block_uuid:t.uuid,width:1};if(e){var u=e||{},c=u.columnIndex,a=void 0===c?0:c,d=u.rowIndex,s=u.rowIndexInsert;"undefined"!==typeof s?r=(0,k.Hk)([l],s,r):r[d]=(0,k.Hk)(l,a,r[d])}else r.push([l]);Xe({page_block_layout:{blocks:ke(ke({},null===ze||void 0===ze?void 0:ze.blocks),{},(0,i.Z)({},t.uuid,t)),layout:r}}),He(t),Ae((function(){return{}}))}),[Je,ze,He,Ae,Xe]),fn=(0,l.useMemo)((function(){var e=[];return null===Je||void 0===Je||Je.forEach((function(n,t){var o=[],r=(0,k.Sm)(null===n||void 0===n?void 0:n.map((function(e){return e.width||0})));n.forEach((function(e,l){var u=e.block_uuid,c=e.height,a=e.max_width_percentage,d=e.width,s=null===nn||void 0===nn?void 0:nn[u],v="undefined"!==typeof a&&null!==a?a>=0?a/100:a:null,f=d/r,h=v&&f>v?v:f,p=(null===rn||void 0===rn?void 0:rn.width)-G.nn;o.push((0,O.jsx)(U.Z,{flexBasis:"".concat(Math.floor(100*h),"%"),children:(0,O.jsx)(ye,{block:s,blockLayoutItem:null===ne||void 0===ne?void 0:ne[u],blockUUID:u,columnIndex:l,columnLayoutSettings:e,columnsInRow:null===n||void 0===n?void 0:n.length,createNewBlockItem:vn,first:0===l,height:c,isLoading:Oe===u&&Qe,onDrop:function(e){var n=e.columnIndex,o=e.rowIndex;sn(o,n,t,l)},onFetchBlockLayoutItem:function(e){return te((function(n){return ke(ke({},n),{},(0,i.Z)({},null===e||void 0===e?void 0:e.uuid,e))}))},onSave:en,pageBlockLayoutUUID:m,removeBlockLayoutItem:function(){return dn(u,t,l)},rowIndex:t,setSelectedBlockItem:He,updateLayout:function(e){return tn(t,l,e)},width:Math.floor(h*p)})},"row-".concat(t,"-column-").concat(l,"-").concat(u)))})),0===t&&e.push((0,O.jsx)(de,{horizontal:!0,onClickAdd:function(){return vn({rowIndexInsert:t})}},"layout-divider-".concat(t,"-top"))),e.push((0,O.jsx)(f.ZP,{children:o},"row-".concat(t))),e.push((0,O.jsx)(de,{horizontal:!0,onClickAdd:function(){return vn({rowIndexInsert:t+1})}},"layout-divider-".concat(t,"-bottom")))})),e}),[nn,rn,vn,Oe,Qe,ne,Je,sn,dn,en,He,tn,m]),hn=(0,l.useMemo)((function(){return We&&0===(null===Je||void 0===Je?void 0:Je.length)}),[We,Je]),pn=(0,l.useMemo)((function(){return(0,O.jsx)(f.ZP,{justifyContent:"center",children:(0,O.jsxs)(x.Z,{my:3*P.HN,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:P.Mq,children:[(0,O.jsx)(x.Z,{mb:1,children:(0,O.jsx)(q.Z,{center:!0,children:"Create a custom dashboard"})}),(0,O.jsx)(g.ZP,{center:!0,default:!0,children:"Add customizable charts with the exact insights you need."}),v&&(0,O.jsx)(g.ZP,{center:!0,default:!0,children:"Start with a recommended set or freely define your own."})]}),(0,O.jsxs)(f.ZP,{alignContent:"center",justifyContent:"center",children:[v&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(T.ZP,{onClick:function(){return Xe({page_block_layout:v})},primary:!0,children:"Add recommended charts"}),(0,O.jsx)(x.Z,{mr:1})]}),(0,O.jsx)(T.ZP,{onClick:function(){return vn()},primary:!v,secondary:!!v,children:"Create new chart"})]})]})})}),[vn,v,Xe]),mn=(0,l.useMemo)((function(){return(null===rn||void 0===rn?void 0:rn.height)-(null===cn||void 0===cn?void 0:cn.height)}),[rn,cn]),xn=(0,l.useMemo)((function(){return!Ce}),[Ce]),gn=d.ZP.pipelines.detail(null===Q||void 0===Q||null===(n=Q.data_source)||void 0===n?void 0:n.pipeline_uuid).data,bn=(0,l.useMemo)((function(){return null===gn||void 0===gn?void 0:gn.pipeline}),[gn]),jn=(0,l.useMemo)((function(){return(0,k.YC)((null===bn||void 0===bn?void 0:bn.blocks)||[],"uuid")}),[bn]),yn=d.ZP.pipelines.list().data,Zn=(0,l.useMemo)((function(){return(0,k.YC)((null===yn||void 0===yn?void 0:yn.pipelines)||[],"uuid")}),[yn]),kn=d.ZP.pipeline_schedules.pipelines.list(null===bn||void 0===bn?void 0:bn.uuid).data,_n=(0,l.useMemo)((function(){return null===kn||void 0===kn?void 0:kn.pipeline_schedules}),[kn]),Cn=(0,l.useMemo)((function(){return ke(ke(ke({},Ce),Q),{},{data:ke(ke(ke({},null===Ce||void 0===Ce?void 0:Ce.data),null===Q||void 0===Q?void 0:Q.data),null===Ue||void 0===Ue?void 0:Ue.data)})}),[Ue,Q,Ce]),Pn=(0,l.useMemo)((function(){var e,n,t,o,i,r,l,u,c,a,d,s,v;return xn?null:(0,O.jsxs)("div",{style:{paddingBottom:P.Mq*P.iI,paddingTop:"undefined"===typeof h?R.Wi:0},children:[(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Chart name"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Human readable name for your chart."})]}),(0,O.jsx)(b.Z,{onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{name_new:e.target.value})}),{skip_render:!0})},placeholder:"Type name for chart...",primary:!0,setContentOnMount:!0,value:(null===Q||void 0===Q?void 0:Q.name_new)||""})]}),(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Chart type"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Choose how you want to display your data."})]}),(0,O.jsx)(p.Z,{onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{configuration:{chart_type:e.target.value}})}),{skip_render:!0})},placeholder:"Select chart type",primary:!0,value:(null===Q||void 0===Q||null===(e=Q.configuration)||void 0===e?void 0:e.chart_type)||"",children:j.CK.concat(j.oV.CUSTOM).map((function(e){return(0,O.jsx)("option",{value:e,children:(0,Z.kC)(e)},e)}))})]}),(0,O.jsx)(x.Z,{mt:P.Mq,children:(0,O.jsx)(W.Z,{light:!0})}),(0,O.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:(0,O.jsx)(q.Z,{children:"Data source"})}),(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Data source type"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Configure where the data for this chart comes from."})]}),(0,O.jsx)(p.Z,{onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{data_source:ke(ke({},null===n||void 0===n?void 0:n.data_source),{},{type:e.target.value})})}),{skip_render:!0})},placeholder:"Select data source type",primary:!0,value:(null===Q||void 0===Q||null===(n=Q.data_source)||void 0===n?void 0:n.type)||"",children:N.tW.map((function(e){return(0,O.jsx)("option",{value:e,children:(0,Z.kC)(N.Qj[e])},e)}))})]}),[N.XO.BLOCK,N.XO.BLOCK_RUNS,N.XO.PIPELINE_RUNS,N.XO.PIPELINE_SCHEDULES].includes(null===Q||void 0===Q||null===(t=Q.data_source)||void 0===t?void 0:t.type)&&(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Pipeline UUID"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Select the pipeline the data source comes from."})]}),(0,O.jsxs)(p.Z,{monospace:!0,onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{data_source:ke(ke({},null===n||void 0===n?void 0:n.data_source),{},{block_uuid:null,pipeline_schedule_id:null,pipeline_uuid:e.target.value})})}),{skip_render:!0})},primary:!0,value:(null===Q||void 0===Q||null===(o=Q.data_source)||void 0===o?void 0:o.pipeline_uuid)||"",children:[(0,O.jsx)("option",{value:null}),null===Zn||void 0===Zn?void 0:Zn.map((function(e){var n=e.uuid;return(0,O.jsx)("option",{value:n,children:n},n)}))]})]})}),[N.XO.PIPELINE_RUNS].includes(null===Q||void 0===Q||null===(i=Q.data_source)||void 0===i?void 0:i.type)&&(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Trigger"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Select the trigger that the pipeline runs should belong to."})]}),(0,O.jsxs)(p.Z,{monospace:!0,onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{data_source:ke(ke({},null===n||void 0===n?void 0:n.data_source),{},{pipeline_schedule_id:e.target.value})})}),{skip_render:!0})},primary:!0,value:(null===Q||void 0===Q||null===(r=Q.data_source)||void 0===r?void 0:r.pipeline_schedule_id)||"",children:[(0,O.jsx)("option",{value:null}),null===_n||void 0===_n?void 0:_n.map((function(e){var n=e.id,t=e.name;return(0,O.jsx)("option",{value:n,children:t},n)}))]})]})}),N.XO.BLOCK===(null===Q||void 0===Q||null===(l=Q.data_source)||void 0===l?void 0:l.type)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Block UUID"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Select the block the data source comes from."})]}),(0,O.jsxs)(p.Z,{monospace:!0,onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{data_source:ke(ke({},null===n||void 0===n?void 0:n.data_source),{},{block_uuid:e.target.value})})}),{skip_render:!0})},primary:!0,value:(null===Q||void 0===Q||null===(u=Q.data_source)||void 0===u?void 0:u.block_uuid)||"",children:[(0,O.jsx)("option",{value:null}),null===jn||void 0===jn?void 0:jn.map((function(e){var n=e.uuid;return(0,O.jsx)("option",{value:n,children:n},n)}))]})]}),(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Partitions"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Enter a positive or a negative number. If positive, then data from the block will be the most recent N partitions. If negative, then data from the block will be the oldest N partitions."}),(0,O.jsx)(x.Z,{mt:1,children:(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"Leave blank if you want the chart to execute the block and display the data produced from that ad hoc block execution."})})]}),(0,O.jsx)(b.Z,{monospace:!0,onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{data_source:ke(ke({},null===n||void 0===n?void 0:n.data_source),{},{partitions:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value})})}),{skip_render:!0})},placeholder:"Enter number of partitions",primary:!0,setContentOnMount:!0,type:"number",value:(null===Q||void 0===Q||null===(c=Q.data_source)||void 0===c?void 0:c.partitions)||""})]})]}),(0,O.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,O.jsxs)(x.Z,{mb:1,children:[(0,O.jsx)(g.ZP,{bold:!0,children:"Refresh interval"}),(0,O.jsx)(g.ZP,{muted:!0,small:!0,children:"How frequent do you want this chart to automatically fetch new data from its data source? Enter a number in milliseconds (e.g. 1000ms is 1 second)."})]}),(0,O.jsx)(b.Z,{monospace:!0,onChange:function(e){return Ae((function(n){return ke(ke({},n),{},{data_source:ke(ke({},null===n||void 0===n?void 0:n.data_source),{},{refresh_interval:e.target.value})})}),{skip_render:!0})},placeholder:"Enter number for refresh interval",primary:!0,setContentOnMount:!0,type:"number",value:(null===Q||void 0===Q||null===(a=Q.data_source)||void 0===a?void 0:a.refresh_interval)||6e4})]}),(0,O.jsx)(x.Z,{mt:P.Mq,children:(0,O.jsx)(W.Z,{light:!0})}),(0,O.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:(0,O.jsx)(q.Z,{children:"Chart display settings"})}),(0,O.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:null!==Cn&&void 0!==Cn&&Cn.data_source?(0,O.jsxs)(g.ZP,{default:!0,children:["Number of columns from data source:"," ","undefined"!==typeof(null===Cn||void 0===Cn||null===(d=Cn.data)||void 0===d?void 0:d.columns)?(0,O.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:null===Cn||void 0===Cn||null===(s=Cn.data)||void 0===s||null===(v=s.columns)||void 0===v?void 0:v.length}):(0,O.jsx)(x.Z,{mt:1,children:(0,O.jsx)(H.Z,{inverted:!0,small:!0})})]}):(0,O.jsx)(g.ZP,{default:!0,children:"Please select a data source type above."})}),(0,O.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:(0,O.jsx)(M,{block:Cn,updateConfiguration:function(e,n){Ae((function(n){return ke(ke({},n),{},{configuration:ke(ke({},null===n||void 0===n?void 0:n.configuration),e)})}),n)}})})]})}),[xn,Cn,jn,Q,_n,Zn,Ae,h]),wn=(0,l.useMemo)((function(){return Ce&&(0,O.jsxs)(x.Z,{py:P.cd,children:[(0,O.jsxs)(x.Z,{mb:P.Mq,px:P.cd,children:[(0,O.jsx)(x.Z,{mb:1,children:(0,O.jsx)(q.Z,{children:"Custom code"})}),(0,O.jsxs)(g.ZP,{default:!0,children:["Write code for custom data sources, parsing, etc. For more information on what is possible, please check out the"," ",(0,O.jsx)(z.Z,{href:"https://docs.mage.ai/visualizations/dashboards#custom-code-for-chart",openNewWindow:!0,children:"chart documentation"}),"."]})]}),(0,O.jsx)(L.Z,{autoHeight:!0,block:ke(ke({},Me),Ce),onChange:function(e){Ae((function(n){return ke(ke({},n),{},{content:e})}),{skip_render:!0})},value:(null===Q||void 0===Q?void 0:Q.content)||(null===Me||void 0===Me?void 0:Me.content)||"",width:"100%"})]})}),[Me,Q,Ce,Ae]),On=(0,l.useMemo)((function(){return(0,O.jsx)(x.Z,{p:P.cd,children:(0,O.jsxs)(f.ZP,{children:[(0,O.jsx)(T.ZP,{fullWidth:!0,loading:Qe,onClick:function(){return $e(Q)},primary:!0,children:"Save changes"}),(0,O.jsx)(x.Z,{mr:1}),(0,O.jsx)(T.ZP,{fullWidth:!0,onClick:function(){return He(null)},secondary:!0,children:"Back to dashboard"})]})})}),[Qe,Q,He,$e]);return(0,O.jsxs)(D.Z,{after:wn,afterHeightOffset:h||0,afterHidden:xn,afterMousedownActive:ve,afterWidth:ce,before:Pn,beforeDraggableTopOffset:h?h-R.Wi:0,beforeFooter:!xn&&On,beforeHeader:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(E.Z,{breadcrumbs:[{label:function(){return"Back to dashboard"},onClick:function(){return He(null)}},{bold:!0,label:function(){return(null===Ce||void 0===Ce?void 0:Ce.name)||(null===Ce||void 0===Ce?void 0:Ce.uuid)}}]})}),beforeHeaderOffset:6*P.iI,beforeHeightOffset:h||0,beforeHidden:xn,beforeMousedownActive:ge,beforeWidth:pe,contained:!0,excludeOffsetFromBeforeDraggableLeft:!0,headerOffset:h||0,hideAfterCompletely:!0,hideBeforeCompletely:!0,leftOffset:t||0,mainContainerRef:le,setAfterMousedownActive:fe,setAfterWidth:ae,setBeforeMousedownActive:be,setBeforeWidth:me,children:[(0,O.jsxs)("div",{ref:je,style:{position:"relative"},children:[Ce&&Be&&(0,O.jsx)("div",{style:{position:"absolute",width:"100%"},children:(0,O.jsx)(A.Z,{})}),(0,O.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,O.jsx)(U.Z,{flex:1}),xn&&!hn&&(0,O.jsx)(x.Z,{p:P.cd,children:(0,O.jsx)(T.ZP,{beforeIcon:(0,O.jsx)(V.Add,{size:2*P.iI}),onClick:function(){return vn()},primary:!0,children:"Create new chart"})})]})]}),(0,O.jsxs)(u.W,{backend:c.PD,children:[Ce&&(0,O.jsx)(ye,{block:ke(ke({},Me),Ce),blockLayoutItem:ke(ke(ke({},Me),Ue),{},{configuration:ke(ke(ke({},null===Me||void 0===Me?void 0:Me.configuration),null===Ue||void 0===Ue?void 0:Ue.configuration),null===Q||void 0===Q?void 0:Q.configuration),data:Ue?null===Ue||void 0===Ue?void 0:Ue.data:null===Me||void 0===Me?void 0:Me.data,data_source:ke(ke(ke({},null===Me||void 0===Me?void 0:Me.data_source),null===Ue||void 0===Ue?void 0:Ue.data_source),null===Q||void 0===Q?void 0:Q.data_source)}),blockUUID:null===Ce||void 0===Ce?void 0:Ce.uuid,detail:!0,disableDrag:!0,height:mn,pageBlockLayoutUUID:m,setSelectedBlockItem:He,width:null===rn||void 0===rn?void 0:rn.width}),(0,O.jsx)("div",{style:{display:Ce||hn?"none":null},children:fn}),!Ce&&hn&&pn]}),(0,O.jsx)(x.Z,{mb:2})]})}},75399:function(e,n,t){t.d(n,{Qj:function(){return c},XO:function(){return i},hN:function(){return r},tW:function(){return u}});var o,i,r,l=t(82394);!function(e){e.BLOCK="block",e.BLOCK_RUNS="block_runs",e.CHART_CODE="chart_code",e.PIPELINES="pipelines",e.PIPELINE_RUNS="pipeline_runs",e.PIPELINE_SCHEDULES="pipeline_schedules"}(i||(i={})),function(e){e.HTML="html",e.JPEG="jpeg",e.JPG="jpg",e.PNG="png"}(r||(r={}));var u=[i.BLOCK,i.BLOCK_RUNS,i.CHART_CODE,i.PIPELINES,i.PIPELINE_RUNS,i.PIPELINE_SCHEDULES],c=(o={},(0,l.Z)(o,i.BLOCK,"Block data output"),(0,l.Z)(o,i.BLOCK_RUNS,"Block runs"),(0,l.Z)(o,i.CHART_CODE,"Custom code"),(0,l.Z)(o,i.PIPELINES,"Pipelines"),(0,l.Z)(o,i.PIPELINE_RUNS,"Pipeline runs"),(0,l.Z)(o,i.PIPELINE_SCHEDULES,"Triggers"),o)}}]);