(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4913],{94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return O}});var r=t(82394),i=t(21831),o=t(82684),l=t(50724),s=t(82555),c=t(97618),a=t(70613),u=t(68487),d=t(68899),f=t(28598);function m(e,n){var t=e.children,r=e.noPadding;return(0,f.jsx)(d.HS,{noPadding:r,ref:n,children:t})}var p=o.forwardRef(m),h=t(62547),v=t(82571),g=t(35686),x=t(98464),j=t(46684),Z=t(70515),b=t(53808),y=t(19183);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function P(e,n){var t,r=e.addProjectBreadcrumbToCustomBreadcrumbs,m=e.after,k=e.afterHeader,P=e.afterHidden,O=e.afterWidth,S=e.afterWidthOverride,w=e.appendBreadcrumbs,C=e.before,E=e.beforeWidth,I=e.breadcrumbs,M=e.children,R=e.errors,T=e.headerMenuItems,N=e.headerOffset,A=e.hideAfterCompletely,D=e.mainContainerHeader,z=e.navigationItems,B=e.setAfterHidden,F=e.setErrors,W=e.subheaderChildren,L=e.subheaderNoPadding,H=e.title,V=e.uuid,U=(0,y.i)().width,G="dashboard_after_width_".concat(V),q="dashboard_before_width_".concat(V),J=(0,o.useRef)(null),X=(0,o.useState)(S?O:(0,b.U2)(G,O)),Y=X[0],K=X[1],Q=(0,o.useState)(!1),$=Q[0],ee=Q[1],ne=(0,o.useState)(C?Math.max((0,b.U2)(q,E),13*Z.iI):null),te=ne[0],re=ne[1],ie=(0,o.useState)(!1),oe=ie[0],le=ie[1],se=(0,o.useState)(null)[1],ce=g.ZP.projects.list({},{revalidateOnFocus:!1}).data,ae=null===ce||void 0===ce?void 0:ce.projects,ue={label:function(){var e;return null===ae||void 0===ae||null===(e=ae[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},de=[];I&&(r&&de.push(ue),de.push.apply(de,(0,i.Z)(I))),(null===I||void 0===I||!I.length||w)&&(null===ae||void 0===ae?void 0:ae.length)>=1&&(null!==I&&void 0!==I&&I.length||de.unshift({bold:!w,label:function(){return H}}),de.unshift(ue)),(0,o.useEffect)((function(){null===J||void 0===J||!J.current||$||oe||null===se||void 0===se||se(J.current.getBoundingClientRect().width)}),[$,Y,oe,te,J,se,U]),(0,o.useEffect)((function(){$||(0,b.t8)(G,Y)}),[P,$,Y,G]),(0,o.useEffect)((function(){oe||(0,b.t8)(q,te)}),[oe,te,q]);var fe=(0,x.Z)(O);return(0,o.useEffect)((function(){S&&fe!==O&&K(O)}),[S,O,fe]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:H}),(0,f.jsx)(u.Z,{breadcrumbs:de,menuItems:T,project:null===ae||void 0===ae?void 0:ae[0],version:null===ae||void 0===ae||null===(t=ae[0])||void 0===t?void 0:t.version}),(0,f.jsxs)(d.Nk,{ref:n,children:[0!==(null===z||void 0===z?void 0:z.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(v.Z,{navigationItems:z,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(h.Z,{after:m,afterHeader:k,afterHeightOffset:j.Mz,afterHidden:P,afterMousedownActive:$,afterWidth:Y,before:C,beforeHeightOffset:j.Mz,beforeMousedownActive:oe,beforeWidth:d.k1+(C?te:0),headerOffset:N,hideAfterCompletely:!B||A,leftOffset:C?d.k1:null,mainContainerHeader:D,mainContainerRef:J,setAfterHidden:B,setAfterMousedownActive:ee,setAfterWidth:K,setBeforeMousedownActive:le,setBeforeWidth:re,children:[W&&(0,f.jsx)(p,{noPadding:L,children:W}),M]})})]}),R&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===F||void 0===F?void 0:F(null)},children:(0,f.jsx)(s.Z,_(_({},R),{},{onClose:function(){return null===F||void 0===F?void 0:F(null)}}))})]})}var O=o.forwardRef(P)},33065:function(e,n,t){"use strict";t.d(n,{HE:function(){return g},I5:function(){return m},N0:function(){return v},Nk:function(){return f},Tr:function(){return d},UF:function(){return a},YI:function(){return x},bC:function(){return p},cL:function(){return h},yh:function(){return u}});var r=t(38626),i=t(44897),o=t(42631),l=t(70515),s=t(47041),c=t(91437),a=8*l.iI,u=r.default.div.withConfig({displayName:"indexstyle__AfterContentStyle",componentId:"sc-119v89s-0"})(["",""],(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n  ")})),d=r.default.div.withConfig({displayName:"indexstyle__AfterFooterStyle",componentId:"sc-119v89s-1"})(["",""],(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n  ")})),f=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-119v89s-2"})(["border-radius:","px;position:relative;"," ",""],o.n_,(function(e){return"\n    border: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n    background-color: ").concat((e.theme.background||i.Z.background).panel,";\n  ")}),(function(e){return e.maxWidth&&"\n    width: ".concat(e.maxWidth,"px;\n  ")})),m=r.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-119v89s-3"})(["padding:","px;",""],l.cd*l.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),p=r.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-119v89s-4"})([""," "," ",""],(0,c.eR)(),(function(e){return!e.selected&&"\n    &:hover {\n      background-color: ".concat((e.theme.interactive||i.Z.interactive).rowHoverBackground,";\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")})),h=r.default.div.withConfig({displayName:"indexstyle__StreamGridGroupStyle",componentId:"sc-119v89s-5"})(["position:absolute;"]),v=r.default.div.withConfig({displayName:"indexstyle__StreamGridGroupInnerStyle",componentId:"sc-119v89s-6"})([""," overflow:auto;position:fixed;",""],s.w5,(function(e){return e.borderRight&&"\n    border-right: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),g=r.default.div.withConfig({displayName:"indexstyle__StreamGridStyle",componentId:"sc-119v89s-7"})(["border-radius:","px;padding:","px;margin:","px;"," "," "," "," ",""],o.n_,l.cd*l.iI,1*l.iI,(function(e){return!e.warning&&"\n    &:hover {\n      cursor: pointer;\n    }\n  "}),(function(e){return!e.selected&&!e.warning&&"\n    border: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.warning&&!e.selected&&"\n    border: 1px solid ".concat((e.theme.accent||i.Z.accent).warningTransparent,";\n  ")}),(function(e){return e.warning&&e.selected&&"\n    border: 1px solid ".concat((e.theme.accent||i.Z.accent).warning,";\n  ")}),(function(e){return e.selected&&!e.warning&&"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.borders||i.Z.borders).contrast,";\n  ")})),x=r.default.div.withConfig({displayName:"indexstyle__BackgroundStyle",componentId:"sc-119v89s-8"})(["",""],(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n  ")}))},8193:function(e,n,t){"use strict";t.d(n,{N:function(){return c},Z:function(){return s}});var r=t(38626),i=t(44897),o=t(42631),l=t(70515),s=2*l.iI,c=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1ck7mzt-0"})(["border-radius:","px;padding:","px;",""],o.n_,l.cd*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).codeArea,";\n  ")}))},52443:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Pn}});var r=t(77837),i=t(38860),o=t.n(i),l=t(82684),s=t(82394),c=t(75582),a=t(69864),u=t(71180),d=t(21831),f=t(15338),m=t(97618),p=t(55485),h=t(85854),v=t(65956),g=t(38276),x=t(30160),j=t(17488),Z=t(72473),b=t(8193),y=t(70515),k=t(3314),_=t(28598);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=function(e){var n=e.addButtonText,t=e.addTextInputPlaceholder,r=e.alreadyExistsMessage,i=e.configurationValuePlaceholder,o=e.configurations,a=e.createButtonText,d=e.description,P=e.emptyState,S=e.setConfigurations,w=e.title,C=(0,l.useRef)(null),E=(0,l.useState)(!1),I=E[0],M=E[1],R=(0,l.useState)(null),T=R[0],N=R[1],A=(0,l.useMemo)((function(){var e;return(null===(e=Object.keys(o||{}))||void 0===e?void 0:e.length)>=1}),[o]),D=(0,l.useMemo)((function(){return T in(o||{})}),[o,T]),z=(0,l.useMemo)((function(){return(0,_.jsxs)(p.ZP,{alignItems:"center",children:[!I&&(0,_.jsx)(u.ZP,{beforeIcon:(0,_.jsx)(Z.mm,{}),compact:!0,onClick:function(e){(0,k.j)(e),M(!0),setTimeout((function(){var e;return null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.focus()}),1)},secondary:!A,small:!0,children:n||"Add configuration"}),I&&(0,_.jsxs)(_.Fragment,{children:[D&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.ZP,{danger:!0,small:!0,children:r||"Already exists"}),(0,_.jsx)(g.Z,{mr:1})]}),(0,_.jsx)(j.Z,{autoComplete:"off",compact:!0,meta:{touched:!!D,error:""},monospace:!0,onClick:function(e){return(0,k.j)(e)},paddingVertical:y.iI/2-2,placeholder:t,onChange:function(e){(0,k.j)(e),N(e.target.value)},ref:C,small:!0,value:T||""}),(0,_.jsx)(g.Z,{mr:1}),(0,_.jsx)(u.ZP,{disabled:D,compact:!0,onClick:function(e){(0,k.j)(e),D||(S(O(O({},o),{},(0,s.Z)({},T,""))),M(!1),N(null))},primary:!0,small:!0,children:a||"Create configuration"}),(0,_.jsx)(g.Z,{mr:1}),(0,_.jsx)(u.ZP,{compact:!0,onClick:function(e){(0,k.j)(e),M(!1),N(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[n,D,o,A,I,T,C,M,N]),B=(0,l.useMemo)((function(){return Object.entries(o||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return(0,_.jsxs)("div",{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(u.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e=O({},o);null===e||void 0===e||delete e[t],S(e)},children:(0,_.jsx)(Z.rF,{default:!0,size:b.Z})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(x.ZP,{default:!0,large:!0,monospace:!0,children:t}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){return S(O(O({},o),{},(0,s.Z)({},t,e.target.value)))},paddingHorizontal:0,paddingVertical:0,placeholder:i,value:r||""})})]})})]},t)}))}),[o,S]);return(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,_.jsxs)(m.Z,{flex:1,flexDirection:"column",children:[(0,_.jsx)(h.Z,{level:4,children:w}),d&&(0,_.jsx)(g.Z,{mt:1,children:d})]}),(0,_.jsx)(g.Z,{mr:y.cd}),A&&(0,_.jsx)(p.ZP,{alignItems:"center",children:z})]})}),!A&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsxs)(g.Z,{p:y.cd,children:[P&&(0,_.jsx)(g.Z,{mb:y.cd,children:(0,_.jsx)(x.ZP,{default:!0,children:P})}),(0,_.jsx)(p.ZP,{alignItems:"center",children:z})]})]}),A&&B]})},w=t(69650),C=69.063,E=C/85;var I,M,R,T,N=function(e){var n,t,r=e.height,i=e.size,o=e.width;return i?(n=i/E,t=i):r?(n=r,t=r*E):o&&(n=o/E,t=o),(0,_.jsxs)("svg",{fill:"#fff",fillRule:"evenodd",height:n,stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 ".concat(C," ").concat(85),width:t,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,_.jsx)("use",{xlinkHref:"#A",x:"2.031",y:"2.5"}),(0,_.jsx)("symbol",{id:"A",overflow:"visible",children:(0,_.jsxs)("g",{stroke:"none",children:[(0,_.jsx)("path",{d:"M16.829 39.981L13.086 62.83l-9.812 2.283-3.255-1.659V39.981h16.81z",fill:"#9d5025"}),(0,_.jsx)("path",{d:"M65 31.932l-32.5 2.351L0 31.932 32.5 0 65 31.932z",fill:"#6b3b19"}),(0,_.jsx)("path",{d:"M38.971 39.981H3.274v25.132l35.697-8.322v-16.81z",fill:"#f58534"}),(0,_.jsx)("path",{d:"M21.127 39.981l1.168 25.698-11.43 3.298-3.992-2.029V39.981h14.254z",fill:"#9d5025"}),(0,_.jsx)("path",{d:"M49.664 39.981H10.865v28.995l38.799-11.22V39.981z",fill:"#f58534"}),(0,_.jsx)("path",{d:"M29.255 39.981v30.507l-8.912 3.317-5.016-2.556V39.981h13.929z",fill:"#9d5025"}),(0,_.jsx)("path",{d:"M58.117 39.981H20.342v33.824l37.775-14.078V39.981z",fill:"#f58534"}),(0,_.jsx)("path",{d:"M26.019 76.703V39.981h24.602l11.803 24.771L32.49 80.001l-6.471-3.297z",fill:"#9d5025"}),(0,_.jsx)("path",{d:"M32.49 80.001v-40.02h32.5v23.464l-32.5 16.556zM65 31.932l-32.5-5.697V0L65 16.556v15.376z",fill:"#f58534"}),(0,_.jsx)("path",{d:"M0 31.932l32.5-5.697V0L0 16.556v15.376z",fill:"#9d5025"})]})})]})};function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z,B,F=8*y.iI;!function(e){e.AWS_EMR="AWS_EMR",e.STANDALONE_CLUSTER="STANDALONE_CLUSTER"}(z||(z={})),function(e){e.CONNECTION="CONNECTION",e.RESOURCES="RESOURCES",e.MONITORING="MONITORING",e.SYSTEM="SYSTEM"}(B||(B={}));var W=(I={},(0,s.Z)(I,B.CONNECTION,"Connection"),(0,s.Z)(I,B.RESOURCES,"Resources"),(0,s.Z)(I,B.MONITORING,"Monitoring"),(0,s.Z)(I,B.SYSTEM,"System"),I),L=(M={},(0,s.Z)(M,z.AWS_EMR,"AWS EMR"),(0,s.Z)(M,z.STANDALONE_CLUSTER,"Standalone cluster"),M),H=(R={},(0,s.Z)(R,z.AWS_EMR,"Spark"),(0,s.Z)(R,z.STANDALONE_CLUSTER,"Spark"),R),V=(T={},(0,s.Z)(T,z.AWS_EMR,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return(0,_.jsx)(N,{height:e})})),(0,s.Z)(T,z.STANDALONE_CLUSTER,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return(0,_.jsx)(Z.Hm,{size:e,warning:!0})})),T),U=[{buildPayload:function(e){return{emr_config:null,spark_config:D({app_name:"",spark_master:"local"},null===e||void 0===e?void 0:e.spark_config)}},displayName:L[z.STANDALONE_CLUSTER],documentationHref:"https://docs.mage.ai/integrations/spark-pyspark#standalone-spark-cluster",kicker:H[z.STANDALONE_CLUSTER],renderIcon:V[z.STANDALONE_CLUSTER],uuid:z.STANDALONE_CLUSTER},{buildPayload:function(e){return{emr_config:D({master_instance_type:""},null===e||void 0===e?void 0:e.emr_config),spark_config:D({app_name:""},null===e||void 0===e?void 0:e.spark_config)}},displayName:L[z.AWS_EMR],documentationHref:"https://docs.mage.ai/integrations/spark-pyspark#aws",kicker:H[z.AWS_EMR],renderIcon:V[z.AWS_EMR],uuid:z.AWS_EMR}],G={default:!0,monospace:!0,preWrap:!0,small:!0},q=t(86735);function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Y=function(e){var n,t=e.attributesTouched,r=e.isLoading,i=e.mutateObject,o=e.objectAttributes,s=e.onCancel,c=e.selectedComputeService,a=e.setObjectAttributes,P=(0,l.useCallback)((function(e){return a({emr_config:X(X({},null===o||void 0===o?void 0:o.emr_config),e)})}),[o,a]),O=(0,l.useCallback)((function(e){return a({spark_config:X(X({},null===o||void 0===o?void 0:o.spark_config),e)})}),[o,a]),C=(0,l.useMemo)((function(){return(null===o||void 0===o?void 0:o.emr_config)||{}}),[o]),E=(0,l.useMemo)((function(){return(null===o||void 0===o?void 0:o.spark_config)||{}}),[o]),I=(0,l.useRef)(null),M=((0,l.useRef)(null),(0,l.useState)(!1)),R=M[0],T=M[1],N=(0,l.useState)(null),A=N[0],D=N[1],B=(0,l.useMemo)((function(){return(null===E||void 0===E?void 0:E.spark_jars)||[]}),[E]),F=(0,l.useMemo)((function(){return(null===B||void 0===B?void 0:B.length)>=1}),[B]),W=(0,l.useMemo)((function(){return(B||[]).includes(A)}),[B,A]),L=(0,l.useMemo)((function(){return(0,_.jsxs)(p.ZP,{alignItems:"center",children:[!R&&(0,_.jsx)(u.ZP,{beforeIcon:(0,_.jsx)(Z.mm,{}),compact:!0,onClick:function(e){(0,k.j)(e),T(!0),setTimeout((function(){var e;return null===I||void 0===I||null===(e=I.current)||void 0===e?void 0:e.focus()}),1)},secondary:!F,small:!0,children:"Add JAR file"}),R&&(0,_.jsxs)(_.Fragment,{children:[W&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.ZP,{danger:!0,small:!0,children:"JAR file exists"}),(0,_.jsx)(g.Z,{mr:1})]}),(0,_.jsx)(j.Z,{autoComplete:"off",compact:!0,meta:{touched:!!W,error:""},monospace:!0,onClick:function(e){return(0,k.j)(e)},paddingVertical:y.iI/2-2,onChange:function(e){(0,k.j)(e),D(e.target.value)},ref:I,small:!0,value:A||""}),(0,_.jsx)(g.Z,{mr:1}),(0,_.jsx)(u.ZP,{disabled:W,compact:!0,onClick:function(e){(0,k.j)(e),W||(O({spark_jars:B.concat(A)}),T(!1),D(null))},primary:!0,small:!0,children:"Add JAR file"}),(0,_.jsx)(g.Z,{mr:1}),(0,_.jsx)(u.ZP,{compact:!0,onClick:function(e){(0,k.j)(e),T(!1),D(null)},secondary:!0,small:!0,children:"Cancel"})]})]})}),[W,B,F,R,A,I,T,D]),H=(0,l.useMemo)((function(){return null===B||void 0===B?void 0:B.map((function(e,n){return(0,_.jsxs)("div",{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(u.ZP,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e=(0,d.Z)(B);O({spark_jars:(0,q.oM)(e,n)})},children:(0,_.jsx)(Z.rF,{default:!0,size:b.Z})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsxs)(x.ZP,{default:!0,large:!0,monospace:!0,children:["File ",n+1]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,fullWidth:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,onChange:function(e){var t=(0,d.Z)(B);t[n]=e.target.value,O({spark_jars:t})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /home/path/example1.jar",value:e||""})})]})})]},e)}))}),[B,O]);return(0,_.jsxs)(b.N,{children:[(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(h.Z,{level:4,children:"Setup"})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsxs)(x.ZP,{danger:"app_name"in t&&!(null!==E&&void 0!==E&&E.app_name),default:!0,large:!0,children:["Application name ","app_name"in t&&!(null!==E&&void 0!==E&&E.app_name)&&(0,_.jsx)(x.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return O({app_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. Sparkmage",value:(null===E||void 0===E?void 0:E.app_name)||""})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsxs)(x.ZP,{danger:"spark_master"in t&&!(null!==E&&void 0!==E&&E.spark_master),default:!0,large:!0,children:["Master URL ","spark_master"in t&&!(null!==E&&void 0!==E&&E.spark_master)&&(0,_.jsx)(x.ZP,{danger:!0,inline:!0,large:!0,children:"is required"})]}),(0,_.jsx)(x.ZP,{muted:!0,small:!0,children:"The URL for connecting to the master."})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return O({spark_master:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. local, yarn, spark://host:port",value:(null===E||void 0===E?void 0:E.spark_master)||""})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Spark home directory"}),(0,_.jsx)(x.ZP,{muted:!0,small:!0,children:"Path where Spark is installed on worker nodes."})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return O({spark_home:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /usr/lib/spark",value:(null===E||void 0===E?void 0:E.spark_home)||""})})]})}),z.AWS_EMR===c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Remote variables directory"}),(0,_.jsx)(x.ZP,{muted:!0,small:!0,children:"This S3 bucket will be used by Spark."})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return a({remote_variables_dir:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. s3://magically-powerful-bucket",value:(null===o||void 0===o?void 0:o.remote_variables_dir)||""})})]})})]})]}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(h.Z,{level:4,children:"Customizations"})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Use custom session"}),(0,_.jsxs)(x.ZP,{muted:!0,small:!0,children:["Whether to create custom SparkSession via",(0,_.jsx)("br",{}),"code and set it in ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']"}),"."]})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,justifyContent:"flex-end",children:(0,_.jsx)(w.Z,{checked:null===E||void 0===E?void 0:E.use_custom_session,compact:!0,onCheck:function(e){return O({use_custom_session:e(null===E||void 0===E?void 0:E.use_custom_session)})}})})]})}),(null===E||void 0===E?void 0:E.use_custom_session)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Custom session variable"}),(0,_.jsxs)(x.ZP,{muted:!0,small:!0,children:["The variable name to set in ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']"}),",",(0,_.jsx)("br",{}),"e.g. If variable name is ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"spark"})," then the Spark session",(0,_.jsx)("br",{}),"is accessed using ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"kwargs['context']['spark']"}),"."]})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,large:!0,monospace:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return O({custom_session_var_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. spark",value:(null===E||void 0===E?void 0:E.custom_session_var_name)||""})})]})})]}),z.AWS_EMR===c&&(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Bootstrap script path"}),(0,_.jsx)(x.ZP,{muted:!0,small:!0,children:"Use a custom script to bootstrap the EMR cluster."})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return P({bootstrap_script_path:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. /path/to/emr_bootstrap.sh",value:(null===C||void 0===C?void 0:C.bootstrap_script_path)||""})})]})})]}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsx)(S,{addButtonText:"Add environment variable",addTextInputPlaceholder:"e.g. PYTHONPATH",alreadyExistsMessage:"Environment variable exists",configurationValuePlaceholder:"e.g. /home/path",configurations:null===E||void 0===E?void 0:E.executor_env,createButtonText:"Create environment variable",description:(0,_.jsx)(x.ZP,{muted:!0,children:"Environment variables for the executor."}),emptyState:"There are currently no executor environment variables.",setConfigurations:function(e){return O({executor_env:e})},title:"Environment variables"}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,_.jsxs)(m.Z,{flex:1,flexDirection:"column",children:[(0,_.jsx)(h.Z,{level:4,children:"JAR files"}),(0,_.jsx)(g.Z,{mt:1,children:(0,_.jsxs)(x.ZP,{muted:!0,children:["These files will be to be uploaded to the cluster and added to the ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,children:"classpath"}),"."]})})]}),(0,_.jsx)(g.Z,{mr:y.cd}),F&&(0,_.jsx)(p.ZP,{alignItems:"center",children:L})]})}),!F&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsxs)(g.Z,{p:y.cd,children:[(0,_.jsx)(g.Z,{mb:y.cd,children:(0,_.jsx)(x.ZP,{default:!0,children:"There are currently no JAR files."})}),(0,_.jsx)(p.ZP,{alignItems:"center",children:L})]})]}),F&&H]}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsxs)(p.ZP,{children:[(0,_.jsx)(u.ZP,{beforeIcon:(0,_.jsx)(Z.vc,{}),disabled:!t||!(null!==(n=Object.keys(t))&&void 0!==n&&n.length),loading:r,onClick:function(){return i()},primary:!0,children:"Save changes"}),s&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(u.ZP,{onClick:function(){return null===s||void 0===s?void 0:s()},secondary:!0,children:"Cancel and go back"})]})]})]})},K=t(48670),Q=t(38626),$=t(90299),ee=t(92083),ne=t.n(ee),te=t(75499),re=t(39867),ie=t(12468),oe=t(44897),le=3*y.iI,se=Q.default.div.withConfig({displayName:"indexstyle__BarsContainerStyle",componentId:"sc-15hlddf-0"})(["width:100%;"]),ce=Q.default.div.withConfig({displayName:"indexstyle__BarContainerStyle",componentId:"sc-15hlddf-1"})(["align-items:center;display:flex;height:","px;width:100%;"],le),ae=Q.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-15hlddf-2"})(["height:100%;"," "," "," "," "," "," "," "," ",""],(function(e){return e.widthPercentage&&"\n    width: ".concat(100*e.widthPercentage,"%;\n  ")}),(function(e){return e.blue&&"\n    background-color: ".concat((e.theme||oe.Z).accent.blue,";\n  ")}),(function(e){return e.green&&"\n    background-color: ".concat((e.theme||oe.Z).accent.positive,";\n  ")}),(function(e){return e.orange&&"\n    background-color: ".concat((e.theme||oe.Z).accent.dbt,";\n  ")}),(function(e){return e.purple&&"\n    background-color: ".concat((e.theme||oe.Z).accent.purple,";\n  ")}),(function(e){return e.red&&"\n    background-color: ".concat((e.theme||oe.Z).accent.negative,";\n  ")}),(function(e){return e.teal&&"\n    background-color: ".concat((e.theme||oe.Z).accent.teal,";\n  ")}),(function(e){return e.yellow&&"\n    background-color: ".concat((e.theme||oe.Z).accent.yellow,";\n  ")}),(function(e){return e.empty&&"\n    background-color: ".concat((e.theme||oe.Z).background.chartBlock,";\n  ")})),ue=Q.default.div.withConfig({displayName:"indexstyle__FillerStyle",componentId:"sc-15hlddf-3"})(["height:","px;width:100%;"],le),de=Q.default.div.withConfig({displayName:"indexstyle__TextStyle",componentId:"sc-15hlddf-4"})(["align-items:center;display:flex;height:","px;justify-content:flex-end;"],le),fe=t(3917),me=t(70320);var pe,he,ve,ge,xe,je=function(e){var n,t=e.stageAttempt,r=(0,l.useContext)(Q.ThemeContext),i=(0,me.q)(),o=(t.submission_time,(0,l.useMemo)((function(){return(0,q.YC)(Object.values((null===t||void 0===t?void 0:t.tasks)||{}),(function(e){return e.launch_time}),{ascending:!0})}),[t])),s=(0,l.useMemo)((function(){var e,n;return null===o||void 0===o||o.forEach((function(t){var r=t.duration,i=t.launch_time,o=ne()(i,fe.kE).unix();(!n||o<n)&&(n=o);var l=o+r;(!e||l>e)&&(e=l)})),{maxEndTimestamp:e,minLaunchTimestamp:n}}),[o]),c=s.maxEndTimestamp,a=s.minLaunchTimestamp,u=(0,l.useCallback)((function(e){return(0,_.jsx)(ie.Z,{appearAbove:!0,block:!0,fullSize:!0,label:(0,_.jsx)(x.ZP,{leftAligned:!0,children:e}),lightBackground:!0,muted:!0,widthFitContent:!0,children:(0,_.jsx)(ue,{})})}),[]),d=(0,l.useMemo)((function(){var e=c-a,n=[];return null===o||void 0===o||o.forEach((function(t,r){var i=t.duration,o=t.task_id,l=t.launch_time,s=t.scheduler_delay,d=t.task_metrics,f=d.executor_deserialize_time,m=d.shuffle_read_metrics.fetch_wait_time,p=d.executor_run_time,h=d.shuffle_write_metrics.write_time,v=d.result_serialization_time,x=t.getting_result_time,j=ne()(l,fe.kE).unix(),Z=j+i,b=[(0,_.jsx)(ae,{empty:!0,widthPercentage:(j-a)/e,children:u("Waiting to start")},"launchTimestamp"),(0,_.jsx)(ae,{blue:!0,widthPercentage:s/e,children:u("Scheduler delay")},"schedulerDelay"),(0,_.jsx)(ae,{red:!0,widthPercentage:f/e,children:u("Task deserialization time")},"executorDeserializeTime"),(0,_.jsx)(ae,{orange:!0,widthPercentage:m/e,children:u("Shuffle read time")},"fetchWaitTime"),(0,_.jsx)(ae,{green:!0,widthPercentage:p/e,children:u("Executor computing time")},"executorRunTime"),(0,_.jsx)(ae,{widthPercentage:h/e,yellow:!0,children:u("Shuffle write time")},"writeTime"),(0,_.jsx)(ae,{purple:!0,widthPercentage:v/e,children:u("Result serialization time")},"resultSerializationTime"),(0,_.jsx)(ae,{teal:!0,widthPercentage:x/e,children:u("Getting result time")},"gettingResultTime"),(0,_.jsx)(ae,{empty:!0,widthPercentage:(c-Z)/e,children:u("Already finished")},"endTime")];n.push((0,_.jsx)(g.Z,{mt:1},"divider-".concat(o))),n.push((0,_.jsx)(ce,{children:b},o))})),(0,_.jsxs)(se,{children:[(0,_.jsx)(ce,{children:(0,_.jsxs)(p.ZP,{fullWidth:!0,justifyContent:"space-between",children:[(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(x.ZP,{monospace:!0,muted:!0,children:(0,fe.XG)((0,fe.Mg)(a).format(fe.OC),i)})}),(0,_.jsx)(m.Z,{flex:1,justifyContent:"flex-end",children:(0,_.jsx)(x.ZP,{monospace:!0,muted:!0,children:(0,fe.XG)((0,fe.Mg)(c).format(fe.OC),i)})})]})}),n]})}),[c,a,u,o]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{mb:y.cd,children:(0,_.jsx)(x.ZP,{bold:!0,large:!0,children:"Task timeline"})}),(0,_.jsx)(g.Z,{mb:y.cd,children:[{color:null===r||void 0===r||null===(n=r.accent)||void 0===n?void 0:n.blue,uuid:"Scheduler delay"},{color:null===r||void 0===r?void 0:r.accent.negative,uuid:"Task deserialization time"},{color:null===r||void 0===r?void 0:r.accent.dbt,uuid:"Shuffle read time"},{color:null===r||void 0===r?void 0:r.accent.positive,uuid:"Executor computing time"},{color:null===r||void 0===r?void 0:r.accent.yellow,uuid:"Shuffle write time"},{color:null===r||void 0===r?void 0:r.accent.purple,uuid:"Result serialization time"},{color:null===r||void 0===r?void 0:r.accent.teal,uuid:"Getting result time"}].map((function(e,n){var t=e.color,r=e.uuid;return(0,_.jsx)(g.Z,{mt:n>=1?1:0,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(re.Z,{color:t,size:1*y.iI}),(0,_.jsx)(g.Z,{mr:1}),(0,_.jsx)(x.ZP,{default:!0,children:r})]})},r)}))}),(0,_.jsxs)(p.ZP,{children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(de,{children:(0,_.jsx)(x.ZP,{bold:!0,monospace:!0,muted:!0,noWrapping:!0,children:"ID"})}),null===o||void 0===o?void 0:o.map((function(e,n){var t=e.task_id;return(0,_.jsx)(g.Z,{mt:1,children:(0,_.jsx)(de,{children:(0,_.jsx)(x.ZP,{default:!0,monospace:!0,noWrapping:!0,children:t})})},t)}))]}),(0,_.jsx)(g.Z,{mr:2}),d]})]})},Ze=t(35686);!function(e){e.SUCCEEDED="SUCCEEDED"}(pe||(pe={})),function(e){e.COMPLETE="COMPLETE"}(he||(he={})),function(e){e.NODE_LOCAL="NODE_LOCAL",e.PROCESS_LOCAL="PROCESS_LOCAL"}(ve||(ve={})),function(e){e.SUCCESS="SUCCESS"}(ge||(ge={})),function(e){e.COMPLETED="COMPLETED"}(xe||(xe={}));var be=t(81728);function ye(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ye(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ye(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _e=function(e){var n=e.jobs,t=e.stagesMapping,r=(0,me.q)();return(0,_.jsx)(te.Z,{apiForFetchingAfterAction:Ze.ZP.spark_jobs.detail,buildApiOptionsFromObject:function(e){return[null===e||void 0===e?void 0:e.job_id]},columnFlex:[null,null,null,null,null,null],columns:[{uuid:"ID"},{uuid:"Name"},{uuid:"Submitted"},{uuid:"Status"},{center:!0,uuid:"Stages"},{center:!0,uuid:"Tasks"}],getObjectAtRowIndex:function(e){return null===n||void 0===n?void 0:n[e]},renderExpandedRowWithObject:function(e,n){var i=null===n||void 0===n?void 0:n.spark_job;if(i){var o=i.num_active_stages,s=i.num_active_tasks,c=i.num_completed_stages,a=i.num_completed_tasks,u=i.num_failed_stages,d=i.num_failed_tasks,h=i.num_killed_tasks,j=i.num_skipped_stages,Z=i.num_skipped_tasks,b=i.num_tasks,k=i.stage_ids,P=(0,q.YC)(k,(function(e){return e}),{ascending:!1}).reduce((function(e,n){var r=null===t||void 0===t?void 0:t[n];return r?e.concat(r):r}),[]),O=function(e){return(0,_.jsx)(te.Z,{columnFlex:[null,1],columns:[{uuid:"Attribute"},{uuid:"Value"}],rows:e.map((function(e){return[(0,_.jsx)(x.ZP,{monospace:!0,muted:!0,small:!0,children:e[0]},"attribute"),(0,_.jsx)(x.ZP,{monospace:!0,muted:!0,small:!0,children:e[1]},"value")]}))})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{children:[(0,_.jsx)(m.Z,{flex:1,alignItems:"stretch",children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{px:y.cd,py:y.cd,children:(0,_.jsx)(x.ZP,{bold:!0,large:!0,children:"Stage summary"})}),(0,_.jsx)(f.Z,{light:!0,short:!0}),O([["IDs",null===k||void 0===k?void 0:k.join(", ")],["Completed",c],["Active",o],["Skipped",j],["Failed",u]])]})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,alignItems:"stretch",children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{px:y.cd,py:y.cd,children:(0,_.jsx)(x.ZP,{bold:!0,large:!0,children:"Task summary"})}),(0,_.jsx)(f.Z,{light:!0,short:!0}),O([["Total",b],["Completed",a],["Active",s],["Skipped",Z],["Failed",d],["Killed",h]])]})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(x.ZP,{bold:!0,large:!0,children:["Stages\xa0\xa0\xa0",(0,_.jsx)(x.ZP,{default:!0,inline:!0,large:!0,monospace:!0,children:null===P||void 0===P?void 0:P.length})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(te.Z,{columnFlex:[null,null,null,null,null,null,null,null,null,null,null,null,null],columns:[{uuid:"ID"},{center:!0,uuid:"Attempt"},{uuid:"Name"},{uuid:"Submitted"},{center:!0,uuid:"Duration"},{uuid:"Status"},{center:!0,uuid:"Tasks"},{center:!0,tooltipMessage:"Bytes read from storage in this stage",uuid:"In"},{center:!0,uuid:"In recs"},{center:!0,tooltipMessage:"Bytes written in storage in this stage",uuid:"Out"},{center:!0,uuid:"Out recs"},{center:!0,tooltipMessage:"Total shuffle bytes and records read, includes both data read locally and data read from remote executors.",uuid:"Sh read"},{rightAligned:!0,tooltipMessage:"Bytes and records written to disk in order to be read by a shuffle in a future stage.",uuid:"Sh write"}],getObjectAtRowIndex:function(e){return null===P||void 0===P?void 0:P[e]},buildApiOptionsFromObject:function(e){return[null===e||void 0===e?void 0:e.stage_id,{quantiles:"0.01,0.25,0.5,0.75,0.99",withSummaries:!0}]},apiForFetchingAfterAction:Ze.ZP.spark_stages.detail,renderExpandedRowWithObject:function(e,n){var t,i,o=null===P||void 0===P?void 0:P[e];if(!o)return(0,_.jsx)("div",{});var s=o.details,c=o.num_active_tasks,a=o.num_complete_tasks,u=o.num_failed_tasks,d=o.num_killed_tasks,h=o.num_tasks,j=null===n||void 0===n||null===(t=n.spark_stage)||void 0===t?void 0:t.stage_attempts;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{children:[(0,_.jsx)(m.Z,{flex:1,alignItems:"stretch",children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{px:y.cd,py:y.cd,children:(0,_.jsx)(x.ZP,{bold:!0,large:!0,children:"Task summary"})}),(0,_.jsx)(f.Z,{light:!0,short:!0}),O([["Total",h],["Completed",a],["Active",c],["Failed",u],["Killed",d]])]})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:2,alignItems:"stretch",children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{px:y.cd,py:y.cd,children:(0,_.jsx)(x.ZP,{bold:!0,large:!0,children:"Details"})}),(0,_.jsx)(f.Z,{light:!0,short:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:null===s||void 0===s||null===(i=s.split("\n"))||void 0===i?void 0:i.map((function(e){return(0,_.jsx)(x.ZP,{muted:!0,monospace:!0,small:!0,children:e},e)}))})]})})]})}),null===j||void 0===j?void 0:j.map((function(e){e.attempt_id;var n,t=e.task_metrics_distributions,i=e.tasks,o=t.input_metrics,s=t.output_metrics,c=t.quantiles,a=t.shuffle_read_metrics,u=t.shuffle_write_metrics;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(je,{stageAttempt:e})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(p.ZP,{children:(0,_.jsx)(m.Z,{flex:1,alignItems:"stretch",children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{px:y.cd,py:y.cd,children:(0,_.jsxs)(x.ZP,{bold:!0,large:!0,children:["Summary metrics for ",(0,be._6)("completed task",null===e||void 0===e?void 0:e.num_complete_tasks)]})}),(0,_.jsx)(f.Z,{light:!0,short:!0}),(0,_.jsx)(te.Z,{columnFlex:[null].concat(null===c||void 0===c?void 0:c.map((function(){return null}))),columns:[{uuid:"Metric"}].concat(c.map((function(e,n){return{center:!0,label:function(){return 0===n?"Min":n===(null===c||void 0===c?void 0:c.length)-1?"Max":n===Math.floor((null===c||void 0===c?void 0:c.length)/2)?"Median":"".concat(Number(100*e),"th")},uuid:e}}))),rows:[{uuid:"Duration",values:((null===t||void 0===t?void 0:t.duration)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"GC time is the total JVM garbage collection time.",uuid:"GC time",values:((null===t||void 0===t?void 0:t.jvm_gc_time)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"Bytes read from storage in this stage.",uuid:"Input read (bytes)",values:(null===o||void 0===o?void 0:o.bytes_read)||[]},{tooltipMessage:"Records read from storage in this stage.",uuid:"Input records read",values:(null===o||void 0===o?void 0:o.records_read)||[]},{tooltipMessage:"Total shuffle bytes read, includes both data read locally and data read from remote executors.",uuid:"Shuffle read (bytes)",values:(null===a||void 0===a?void 0:a.read_bytes)||[]},{tooltipMessage:"Total shuffle records read, includes both data read locally and data read from remote executors.",uuid:"Shuffle read records",values:(null===a||void 0===a?void 0:a.read_records)||[]},{uuid:"Shuffle read fetch time",values:((null===a||void 0===a?void 0:a.fetch_wait_time)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"Bytes written to storage in this stage.",uuid:"Input write (bytes)",values:(null===s||void 0===s?void 0:s.bytes_written)||[]},{tooltipMessage:"Records written to storage in this stage.",uuid:"Input records write",values:(null===s||void 0===s?void 0:s.records_written)||[]},{tooltipMessage:"Bytes written to disk in order to be read by a shuffle in a future stage.",uuid:"Shuffle write (bytes)",values:(null===u||void 0===u?void 0:u.write_bytes)||[]},{tooltipMessage:"Records written to disk in order to be read by a shuffle in a future stage.",uuid:"Shuffle write records",values:(null===u||void 0===u?void 0:u.write_records)||[]},{uuid:"Shuffle write time",values:((null===u||void 0===u?void 0:u.write_time)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"Scheduler delay is the time the task waits to be scheduled for execution.",uuid:"Scheduler delay",values:(null===t||void 0===t?void 0:t.scheduler_delay)||[]},{uuid:"Task deserialization time",values:((null===t||void 0===t?void 0:t.executor_deserialize_time)||[]).map((function(e){return(0,be.NR)(e)}))},{uuid:"Task deserialization CPU time",values:((null===t||void 0===t?void 0:t.executor_deserialize_cpu_time)||[]).map((function(e){return(0,be.NR)(e)}))},{uuid:"Result size",values:(null===t||void 0===t?void 0:t.result_size)||[]},{tooltipMessage:"Result serialization time is the time spent serializing the task result on an executor before sending it back to the driver.",uuid:"Result serialization time",values:((null===t||void 0===t?void 0:t.result_serialization_time)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"Getting result time is the time that the driver spends fetching task results from workers.",uuid:"Getting result time",values:((null===t||void 0===t?void 0:t.getting_result_time)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"Scheduler delay is the time the task waits to be scheduled for execution.",uuid:"Scheduler delay",values:((null===t||void 0===t?void 0:t.scheduler_delay)||[]).map((function(e){return(0,be.NR)(e)}))},{tooltipMessage:"Peak execution memory is the maximum memory used by the internal data structures created during shuffles, aggregations and joins.",uuid:"Peak execution memory",values:(null===t||void 0===t?void 0:t.peak_execution_memory)||[]},{tooltipMessage:"Shuffle spill (memory) is the size of the deserialized form of the shuffled data in memory.",uuid:"Memory spilled (bytes)",values:(null===t||void 0===t?void 0:t.memory_bytes_spilled)||[]},{tooltipMessage:"Shuffle spill (disk) is the size of the serialized form of the data on disk.",uuid:"Disk spilled (bytes)",values:(null===t||void 0===t?void 0:t.disk_bytes_spilled)||[]}].map((function(e){var n=e.tooltipMessage,t=e.uuid,r=e.values;return[(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(x.ZP,ke(ke({},G),{},{children:t})),n&&(0,_.jsx)("div",{style:{marginLeft:4},children:(0,_.jsx)(ie.Z,{appearAbove:!0,label:(0,_.jsx)(x.ZP,{leftAligned:!0,children:n}),lightBackground:!0,maxWidth:200,muted:!0})})]},t)].concat(null===r||void 0===r?void 0:r.map((function(e,n){return(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"quantile-".concat(c[n],"-").concat(t)}),e)})))}))}),(0,_.jsx)(g.Z,{p:1})]})})})}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(x.ZP,{bold:!0,large:!0,children:["Tasks\xa0\xa0\xa0",(0,_.jsx)(x.ZP,{default:!0,inline:!0,large:!0,monospace:!0,children:i?null===(n=Object.keys(i||{}))||void 0===n?void 0:n.length:""})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(te.Z,{columnFlex:[null,null,null,null,null,null,null,null,null],columns:[{uuid:"ID"},{center:!0,uuid:"Attempt"},{uuid:"Status"},{uuid:"Locality"},{uuid:"Launch"},{center:!0,uuid:"Duration"},{center:!0,tooltipMessage:"GC time is the total JVM garbage collection time.",uuid:"GC time"},{center:!0,tooltipMessage:"Scheduler delay is the time the task waits to be scheduled for execution.",uuid:"Delayed"},{center:!0,tooltipMessage:"Result serialization time is the time spent serializing the task result on an executor before sending it back to the driver.",uuid:"Result time"}],rows:(0,q.YC)(Object.values(i||{}),(function(e){return e.task_id}),{ascending:!1}).map((function(e){var n=e.attempt,t=e.duration,i=e.launch_time,o=e.scheduler_delay,s=e.status,c=e.task_id,a=e.task_locality,u=e.task_metrics;return[(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"taskId"}),c),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"attempt"}),n),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"status",success:ge.SUCCESS===s}),s),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"taskLocality"}),a),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"launchTime"}),i?(0,fe.XG)(ne()(i,fe.kE).format(fe.OC),r):"-"),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"duration"}),t?(0,be.NR)(t):0),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"jvmGcTime"}),null!==u&&void 0!==u&&u.jvm_gc_time?(0,be.NR)(null===u||void 0===u?void 0:u.jvm_gc_time):0),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"schedulerDelay"}),o?(0,be.NR)(o):0),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"resultSerializationTime"}),null!==u&&void 0!==u&&u.result_serialization_time?(0,be.NR)(null===u||void 0===u?void 0:u.result_serialization_time):0)]}))}),(0,_.jsx)(g.Z,{p:1})]})}))]})},rows:null===P||void 0===P?void 0:P.map((function(e){var n=e.attempt_id,t=e.completion_time,i=e.first_task_launched_time,o=e.input_bytes,s=e.input_records,c=e.name,a=e.output_bytes,u=e.output_records,d=e.shuffle_read_bytes,f=e.shuffle_write_bytes,m=e.stage_id,p=e.status,h=e.submission_time,v=e.tasks,g=i&&ne()(i,fe.kE),j=t&&ne()(t,fe.kE),Z=j&&j.diff(g),b=(null===c||void 0===c?void 0:c.length)>=12?"".concat(null===c||void 0===c?void 0:c.slice(0,9),"..."):c;return[(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"stageID"}),m),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"attemptID"}),n),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"displayName",title:c}),b),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"submissionTime"}),h?(0,fe.XG)(ne()(h,fe.kE).format(fe.OC),r):"-"),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"diffDisplayText",center:!0}),Z?(0,be.NR)(Z):0),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"status",success:he.COMPLETE===p}),p),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"tasks",center:!0}),Object.keys(v||{}).length||0),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"inputBytes"}),o),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"inputRecords"}),s),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"outputBytes"}),a),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"outputRecords"}),u),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"shuffleReadBytes"}),d),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"shuffleWriteBytes",rightAligned:!0}),f)]}))}),(0,_.jsx)(g.Z,{p:y.cd})]})})]})}return(0,_.jsx)(g.Z,{p:y.cd})},rows:null===n||void 0===n?void 0:n.map((function(e){var n=e.job_id,t=e.name,i=e.num_tasks,o=e.stage_ids,s=e.status,c=e.submission_time,a=(null===t||void 0===t?void 0:t.length)>=100?"".concat(null===t||void 0===t?void 0:t.slice(0,97),"..."):t;return[(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"id"}),n),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"name",preWrap:!0,title:t}),a),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"submittedAt"}),c?(0,fe.XG)(ne()(c,fe.kE).format(fe.OC),r):"-"),(0,l.createElement)(x.ZP,ke(ke({},G),{},{key:"status",success:pe.SUCCEEDED===s}),s),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"stageIds"}),(null===o||void 0===o?void 0:o.length)||"-"),(0,l.createElement)(x.ZP,ke(ke({},G),{},{center:!0,key:"tasks"}),i)]})),uuid:"jobs"})},Pe=t(32013),Oe=t(98777);function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function we(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ce=function(e){var n=e.setSelectedSql,t=e.stagesMapping,r=(0,me.q)(),i=Ze.ZP.spark_sqls.list().data,o=(0,l.useMemo)((function(){return[].concat((null===i||void 0===i?void 0:i.spark_sqls)||[])}),[i]),s=(0,l.useMemo)((function(){return(0,_.jsx)(te.Z,{apiForFetchingAfterAction:Ze.ZP.spark_sqls.detail,buildApiOptionsFromObject:function(e){return[null===e||void 0===e?void 0:e.id,{include_jobs_and_stages:1,_format:"with_jobs_and_stages"}]},columnFlex:[null,null,null,null,null,null,null],columns:[{uuid:"ID"},{uuid:"Submitted"},{center:!0,uuid:"Duration"},{uuid:"Status"},{center:!0,uuid:"Successful jobs"},{center:!0,uuid:"Running jobs"},{center:!0,uuid:"Failed jobs"}],getObjectAtRowIndex:function(e){return null===o||void 0===o?void 0:o[e]},onClickRow:function(e){var t=null===o||void 0===o?void 0:o[e];null===n||void 0===n||n((function(e){return e&&(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)?null:t}))},renderExpandedRowWithObject:function(e,n){var r,i=null===n||void 0===n||null===(r=n.spark_sql)||void 0===r?void 0:r.jobs,l=null===o||void 0===o?void 0:o[e];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{mb:y.Mq,mt:y.Mq,px:y.cd,children:(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,_.jsxs)(m.Z,{flex:1,flexDirection:"column",children:[(0,_.jsx)(h.Z,{level:5,children:"Description"}),(0,_.jsx)(g.Z,{mt:1,children:(0,_.jsx)(x.ZP,{default:!0,monospace:!0,children:null===l||void 0===l?void 0:l.description})})]})})}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(Pe.Z,{noBoxShadow:!0,children:(0,_.jsx)(Oe.Z,{noPaddingContent:!0,title:"Plan",children:(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(x.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:null===l||void 0===l?void 0:l.plan_description})})})})})]})}),(0,_.jsxs)(g.Z,{mb:y.Mq,px:y.cd,children:[(0,_.jsx)(g.Z,{mb:y.cd,px:y.cd,children:(0,_.jsx)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,_.jsx)(m.Z,{flex:1,flexDirection:"column",children:(0,_.jsx)(h.Z,{level:5,children:"Jobs"})})})}),(0,_.jsx)(v.Z,{overflowVisible:!0,noPadding:!0,children:(0,_.jsx)(_e,{jobs:i,stagesMapping:t})})]})]})},rows:null===o||void 0===o?void 0:o.map((function(e){var n=e.duration,t=e.failed_job_ids,i=e.id,o=e.running_job_ids,s=e.status,c=e.submission_time,a=e.success_job_ids;return[(0,l.createElement)(x.ZP,we(we({},G),{},{key:"id"}),i),(0,l.createElement)(x.ZP,we(we({},G),{},{key:"submissionTime"}),c?(0,fe.XG)(ne()(c,fe.kE).format(fe.OC),r):"-"),(0,l.createElement)(x.ZP,we(we({},G),{},{center:!0,key:"duration"}),n?(0,be.NR)(n):0),(0,l.createElement)(x.ZP,we(we({},G),{},{key:"status",success:xe.COMPLETED===s}),s),(0,l.createElement)(x.ZP,we(we({},G),{},{center:!0,key:"successJobIds"}),null===a||void 0===a?void 0:a.length),(0,l.createElement)(x.ZP,we(we({},G),{},{center:!0,key:"runningJobIds"}),null===o||void 0===o?void 0:o.length),(0,l.createElement)(x.ZP,we(we({},G),{},{center:!0,key:"failedJobIds"}),null===t||void 0===t?void 0:t.length)]}))})}),[o,t]);return(0,_.jsx)(_.Fragment,{children:s})};function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Me="Applications",Re="Jobs",Te="SQLs";var Ne=function(e){e.objectAttributes;var n,t=e.refButtonTabs,r=(e.selectedComputeService,e.setSelectedSql),i=(0,l.useContext)(Q.ThemeContext),o=(0,l.useState)(Re),s=o[0],c=o[1],a=(0,l.useCallback)((function(e){r((function(){return null})),c(e)}),[r,c]),u=(0,me.q)(),d=Ze.ZP.spark_applications.list().data,m=(0,l.useMemo)((function(){return null===d||void 0===d?void 0:d.spark_applications}),[d]),p=Ze.ZP.spark_jobs.list().data,h=(0,l.useMemo)((function(){return null===p||void 0===p?void 0:p.spark_jobs}),[p]),v=Ze.ZP.spark_stages.list({details:!0,_format:"with_details"}).data,j=(0,l.useMemo)((function(){return(0,q.HK)((null===v||void 0===v?void 0:v.spark_stages)||[],(function(e){return e.stage_id}))}),[v]),Z=(0,l.useMemo)((function(){return(0,_.jsx)(te.Z,{columnFlex:[null,null,null,null,null,null],columns:[{uuid:"ID"},{uuid:"Name"},{uuid:"Version"},{uuid:"Spark user"},{uuid:"Started at"},{rightAligned:!0,uuid:"Last updated"}],rows:null===m||void 0===m?void 0:m.map((function(e){var n=e.attempts,t=e.id,r=e.name,i=(null===n||void 0===n?void 0:n[0])||{},o=i.app_spark_version,s=i.last_updated_epoch,c=i.start_time_epoch,a=i.spark_user,d=c&&(0,fe.JX)(c/1e3,{withSeconds:!0}),f=d&&(0,fe.XG)(d,u);return[(0,l.createElement)(x.ZP,Ie(Ie({},G),{},{key:"id"}),t),(0,l.createElement)(x.ZP,Ie(Ie({},G),{},{key:"name"}),r),(0,l.createElement)(x.ZP,Ie(Ie({},G),{},{key:"version"}),o),(0,l.createElement)(x.ZP,Ie(Ie({},G),{},{key:"sparkUser"}),a),(0,l.createElement)(x.ZP,Ie(Ie({},G),{},{key:"startTime"}),f||"-"),(0,l.createElement)(x.ZP,Ie(Ie({},G),{},{key:"lastUpdated",rightAligned:!0}),s?(0,fe.XG)((0,fe.JX)(s/1e3,{withSeconds:!0}),u):"-")]})),uuid:"applications"})}),[m,u]),b=(0,l.useMemo)((function(){return(0,_.jsx)(_e,{jobs:h,stagesMapping:j})}),[h,j]),k=(0,l.useMemo)((function(){return(0,_.jsx)(Ce,{setSelectedSql:r,stagesMapping:j})}),[r,j]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{px:y.cd,children:(0,_.jsx)($.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return a(n)},ref:t,regularSizeText:!0,selectedTabUUID:s,tabs:[{label:function(){return(0,_.jsxs)(_.Fragment,{children:[Me,"\xa0\xa0\xa0",d?(null===m||void 0===m?void 0:m.length)||0:""]})},uuid:Me},{label:function(){return(0,_.jsxs)(_.Fragment,{children:[Re,"\xa0\xa0\xa0",p?(null===h||void 0===h?void 0:h.length)||0:""]})},uuid:Re},{label:function(){return Te},uuid:Te}],underlineColor:null===i||void 0===i||null===(n=i.accent)||void 0===n?void 0:n.blue,underlineStyle:!0})}),(0,_.jsx)(f.Z,{light:!0}),Me===s&&Z,Re===s&&b,Te===s&&k]})};function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function De(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ze=function(e){var n,t=e.attributesTouched,r=e.isLoading,i=e.mutateObject,o=e.objectAttributes,s=e.onCancel,c=e.selectedComputeService,a=e.setObjectAttributes,d=(0,l.useCallback)((function(e){return a({emr_config:De(De({},null===o||void 0===o?void 0:o.emr_config),e)})}),[o,a]),k=(0,l.useCallback)((function(e){return a({spark_config:De(De({},null===o||void 0===o?void 0:o.spark_config),e)})}),[o,a]),P=(0,l.useMemo)((function(){return(null===o||void 0===o?void 0:o.emr_config)||{}}),[o]),O=(0,l.useMemo)((function(){return(null===o||void 0===o?void 0:o.spark_config)||{}}),[o]);return(0,_.jsxs)(b.N,{children:[(0,_.jsx)(S,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null===O||void 0===O?void 0:O.others,createButtonText:"Create Spark configuration",description:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(x.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"}),", e.g. ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,children:"spark.executor.memory=4g"}),"."]}),(0,_.jsxs)(x.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,_.jsx)(K.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no executor Spark configurations.",setConfigurations:function(e){return k({others:e})},title:"Spark configurations"}),(0,_.jsx)(g.Z,{mb:y.HN}),z.AWS_EMR===c&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,_.jsxs)(m.Z,{flex:1,flexDirection:"column",children:[(0,_.jsx)(h.Z,{level:4,children:"EMR instance types"}),(0,_.jsx)(g.Z,{mt:1,children:(0,_.jsxs)(x.ZP,{muted:!0,children:["Refer to the ",(0,_.jsx)(K.Z,{href:"https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-supported-instance-types.html",openNewWindow:!0,children:"AWS EMR"})," documentation for all supported EMR instance types."]})})]})})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(p.ZP,{flexDirection:"column",children:(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Master instance type"})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({master_instance_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. r5.4xlarge",value:(null===P||void 0===P?void 0:P.master_instance_type)||""})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(p.ZP,{flexDirection:"column",children:(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Slave instance type"})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({slave_instance_type:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. r5.2xlarge",value:(null===P||void 0===P?void 0:P.slave_instance_type)||""})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(p.ZP,{flexDirection:"column",children:(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Number of slave instances"})}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){var n=e.target.value||"";(""===n||/^\d+$/.exec(n))&&d({slave_instance_count:n})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. 2",value:(null===P||void 0===P?void 0:P.slave_instance_count)||""})})]})})]}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsx)(S,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null===P||void 0===P?void 0:P.master_spark_properties,createButtonText:"Create Spark configuration",description:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(x.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"})," for the master instance."]}),(0,_.jsxs)(x.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,_.jsx)(K.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no Spark configurations for the master instance.",setConfigurations:function(e){return d({master_spark_properties:e})},title:"Master Spark configurations"}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsx)(S,{addButtonText:"Add Spark configuration",addTextInputPlaceholder:"e.g. spark.driver.cores",alreadyExistsMessage:"Spark configuration exists",configurationValuePlaceholder:"e.g. 4g",configurations:null===P||void 0===P?void 0:P.slave_spark_properties,createButtonText:"Create Spark configuration",description:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(x.ZP,{muted:!0,children:["List of key-value pairs to be set in ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,children:"SparkConf"})," for the slave instance."]}),(0,_.jsxs)(x.ZP,{muted:!0,children:["For a list of all configurations, see the ",(0,_.jsx)(K.Z,{href:"https://spark.apache.org/docs/latest/configuration.html",inline:!0,openNewWindow:!0,children:"Spark configuration documentation"}),"."]})]}),emptyState:"There are currently no Spark configurations for the slave instance.",setConfigurations:function(e){return d({slave_spark_properties:e})},title:"Slave Spark configurations"}),(0,_.jsx)(g.Z,{mb:y.HN}),(0,_.jsxs)(v.Z,{noPadding:!0,children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsx)(p.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,_.jsxs)(m.Z,{flex:1,flexDirection:"column",children:[(0,_.jsx)(h.Z,{level:4,children:"Security"}),(0,_.jsx)(g.Z,{mt:1,children:(0,_.jsx)(x.ZP,{muted:!0,children:"Configure security groups for EMR cluster instances."})})]})})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Master security group"}),(0,_.jsxs)(x.ZP,{muted:!0,small:!0,children:["The default managed security group is ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"ElasticMapReduce-master"}),"."]})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({master_security_group:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. sg-xxxxxxxxxxxx",value:(null===P||void 0===P?void 0:P.master_security_group)||""})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"Slave security group"}),(0,_.jsxs)(x.ZP,{muted:!0,small:!0,children:["The default managed security group is ",(0,_.jsx)(x.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"ElasticMapReduce-slave"}),"."]})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({slave_security_group:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. sg-yyyyyyyyyyyy",value:(null===P||void 0===P?void 0:P.slave_security_group)||""})})]})}),(0,_.jsx)(f.Z,{light:!0}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsxs)(p.ZP,{flexDirection:"column",children:[(0,_.jsx)(x.ZP,{default:!0,large:!0,children:"EC2 key name"}),(0,_.jsxs)(x.ZP,{muted:!0,small:!0,children:["SSH tunnel into the EMR cluster using a key pair created from the ",(0,_.jsx)(K.Z,{href:"https://console.aws.amazon.com/ec2/home#KeyPairs",inline:!0,openNewWindow:!0,small:!0,children:"AWS guide"}),"."]})]}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(m.Z,{flex:1,children:(0,_.jsx)(j.Z,{afterIcon:(0,_.jsx)(Z.I8,{}),afterIconClick:function(e,n){var t;null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus()},afterIconSize:b.Z,alignRight:!0,autoComplete:"off",large:!0,noBackground:!0,noBorder:!0,fullWidth:!0,onChange:function(e){return d({ec2_key_name:e.target.value})},paddingHorizontal:0,paddingVertical:0,placeholder:"e.g. ec2_key_pair_name",value:(null===P||void 0===P?void 0:P.ec2_key_name)||""})})]})})]}),(0,_.jsx)(g.Z,{mb:y.HN})]}),(0,_.jsxs)(p.ZP,{children:[(0,_.jsx)(u.ZP,{beforeIcon:(0,_.jsx)(Z.vc,{}),disabled:!t||!(null!==(n=Object.keys(t))&&void 0!==n&&n.length),loading:r,onClick:function(){return i()},primary:!0,children:"Save changes"}),s&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(u.ZP,{onClick:function(){return null===s||void 0===s?void 0:s()},secondary:!0,children:"Cancel and go back"})]})]})]})},Be=t(42631),Fe=t(31608).DI,We=2*y.iI,Le=5*y.iI+2*We,He=Q.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-9bk2jw-0"})(["border-radius:","px;"," ",""],Be.n_,(function(e){return"\n    background-color: ".concat((e.theme||oe.Z).background.dashboard,";\n    border: 1px solid ").concat((e.theme||oe.Z).borders.light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")})),Ve=Q.default.div.withConfig({displayName:"indexstyle__NodeHeaderStyle",componentId:"sc-9bk2jw-1"})(["padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;",""],Fe,Fe,We,We,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme||oe.Z).borders.light,";\n  ")}));function Ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ue(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ue(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=function(e){var n=e.height,t=e.node,r=(0,l.useMemo)((function(){return(null===t||void 0===t?void 0:t.metrics)||[]}),t),i=(0,l.useMemo)((function(){return(0,_.jsx)(te.Z,{columnFlex:[null,null],columns:[{uuid:"Metric"},{rightAligned:!0,uuid:"Value"}],rows:null===r||void 0===r?void 0:r.map((function(e){var n=e.name,t=e.value;return[(0,l.createElement)(x.ZP,Ge(Ge({},G),{},{key:"name"}),n),(0,l.createElement)(x.ZP,Ge(Ge({},G),{},{key:"value",rightAligned:!0}),t)]}))})}),[r]);return(0,_.jsxs)(He,{height:n,children:[(0,_.jsx)(Ve,{children:(0,_.jsx)(x.ZP,{monospace:!0,children:null===t||void 0===t?void 0:t.node_name})}),(null===r||void 0===r?void 0:r.length)>=1&&i]})},Je=t(24138),Xe=t(21978),Ye=t(55187),Ke=t(99543);function Qe(e){var n=(null===e||void 0===e?void 0:e.metrics)||[],t=Le;return null!==n&&void 0!==n&&n.length&&(t+=37,t+=35*((null===n||void 0===n?void 0:n.length)||0)),t}function $e(e){var n=(null===e||void 0===e?void 0:e.node_name)||"",t=(null===e||void 0===e?void 0:e.metrics)||[],r=Math.max.apply(Math,[(null===n||void 0===n?void 0:n.length)||0].concat((0,d.Z)(null===t||void 0===t?void 0:t.map((function(e){var n=e.name,t=e.value;return((null===n||void 0===n?void 0:n.length)||0)+((null===t||void 0===t?void 0:t.length)||0)}))))),i=2*Fe+r*(Ke.YE+.2);return null!==t&&void 0!==t&&t.length&&(i+=4*Fe),i}function en(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function nn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?en(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var tn=function(e){var n=e.height,t=e.heightOffset,r=e.model,i=e.treeRef,o=(0,l.useRef)(null),s=i||o,c=(0,l.useContext)(Q.ThemeContext),a=Ze.ZP.spark_sqls.detail(null===r||void 0===r?void 0:r.id,{include_jobs_and_stages:1,_format:"with_jobs_and_stages"}).data,u=(0,l.useMemo)((function(){return null===a||void 0===a?void 0:a.spark_sql}),[a]),f=(0,l.useMemo)((function(){return(0,q.HK)((null===u||void 0===u?void 0:u.jobs)||[],(function(e){return e.job_id}))}),[u]),m=(0,l.useMemo)((function(){return(0,q.HK)((null===u||void 0===u?void 0:u.stages)||[],(function(e){return e.stage_id}))}),[u]),p=(0,l.useMemo)((function(){var e,n=[],t=[],r=(null===u||void 0===u?void 0:u.edges)||[],i=((0,q.vM)(r,(function(e){return e.from_id})),(0,q.vM)(r,(function(e){return e.to_id})),{});return null===r||void 0===r||r.forEach((function(e){var n=e.from_id,r=e.to_id;t.push({from:n,fromPort:"".concat(n,"-").concat(r,"-from"),id:"".concat(n,"-").concat(r),to:r,toPort:"".concat(n,"-").concat(r,"-to")}),n in i||(i[n]=[]),i[n].push(nn(nn({},Xe.bJ),{},{disabled:!0,id:"".concat(n,"-").concat(r,"-from"),side:Xe.rl.SOUTH})),r in i||(i[r]=[]),i[r].push(nn(nn({},Xe.bJ),{},{disabled:!0,id:"".concat(n,"-").concat(r,"-to"),side:Xe.rl.NORTH}))})),null===u||void 0===u||null===(e=u.nodes)||void 0===e||e.forEach((function(e){var t=null===e||void 0===e?void 0:e.node_id,r=(0,d.Z)((null===i||void 0===i?void 0:i[t])||[]);n.push({data:{sqlNode:e},height:Qe(e),id:t,ports:r,width:$e(e)})})),{edges:t,nodes:n}}),[f,u,m]),h=p.edges,v=p.nodes;(0,l.useEffect)((function(){setTimeout((function(){var e,n,t,r,i;0===(null===s||void 0===s||null===(e=s.current)||void 0===e||null===(n=e.containerRef)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.scrollTop)&&(null===s||void 0===s||null===(r=s.current)||void 0===r||null===(i=r.fitCanvas)||void 0===i||i.call(r))}),1e3)}),[s]);var g=(0,l.useMemo)((function(){var e=0;return n&&(e+=n),t&&(e-=t),Math.max(0,e)}),[n,t]);return(0,_.jsx)(Ye.$4,{height:g,onDoubleClick:function(){var e,n;return null===s||void 0===s||null===(e=s.current)||void 0===e||null===(n=e.fitCanvas)||void 0===n?void 0:n.call(e)},children:(0,_.jsx)(Je.Xz,{arrow:null,edge:function(e){var n;return(0,_.jsx)(Je.kS,nn(nn({},e),{},{style:{stroke:null===c||void 0===c||null===(n=c.accent)||void 0===n?void 0:n.purple}}))},edges:h,fit:!0,forwardedRef:s,maxHeight:Xe.Jo,maxWidth:Xe.Jo,maxZoom:1,minZoom:-.7,node:function(e){var n,t;return(0,_.jsx)(Je.NB,nn(nn({},e),{},{dragType:"port",linkable:!0,port:(0,_.jsx)(Je.GR,{rx:10,ry:10,style:{fill:null===c||void 0===c||null===(n=c.borders)||void 0===n?void 0:n.light,stroke:null===c||void 0===c||null===(t=c.accent)||void 0===t?void 0:t.purple,strokeWidth:"1px"}}),style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(e){var n=e.height,t=e.node.data.sqlNode;return(0,_.jsx)("foreignObject",{height:n,style:{pointerEvents:"none"},width:e.width,x:0,y:0,children:(0,_.jsx)(qe,{height:n,node:t})})}}))},nodes:v})})};function rn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function on(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rn(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ln="Environment",sn="Executors";var cn=function(e){e.objectAttributes;var n,t=(0,l.useContext)(Q.ThemeContext),r=(0,l.useState)(ln),i=r[0],o=r[1],s=Ze.ZP.spark_executors.list().data,a=(0,l.useMemo)((function(){return null===s||void 0===s?void 0:s.spark_executors}),[s]),u=Ze.ZP.spark_environments.detail("0").data,d=(0,l.useMemo)((function(){return null===u||void 0===u?void 0:u.spark_environment}),[u]),m=(0,l.useMemo)((function(){var e,n,t,r,i,o,s;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{px:y.cd,children:(0,_.jsxs)(Pe.Z,{noBoxShadow:!0,children:[(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Runtime",children:[(0,_.jsx)(te.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(e=Object.entries((null===d||void 0===d?void 0:d.runtime)||{}))||void 0===e?void 0:e.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),e[0]),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1])]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Hadoop properties",children:[(0,_.jsx)(te.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(n=d.hadoop_properties)||void 0===n?void 0:n.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),e[0]),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1])]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Metrics properties",children:[(0,_.jsx)(te.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(t=d.metrics_properties)||void 0===t?void 0:t.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),e[0]),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1])]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Spark properties",children:[(0,_.jsx)(te.Z,{columnFlex:[1,4],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(r=d.spark_properties)||void 0===r?void 0:r.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),e[0]),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1])]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"System properties",children:[(0,_.jsx)(te.Z,{columnFlex:[null,null],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===d||void 0===d||null===(i=d.system_properties)||void 0===i?void 0:i.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),e[0]),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1])]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Classpath entries",children:[(0,_.jsx)(te.Z,{columnFlex:[null,null],columns:[{uuid:"Type"},{uuid:"Value"}],rows:null===d||void 0===d||null===(o=d.classpath_entries)||void 0===o?void 0:o.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"type"}),e[1]),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[0])]}))}),(0,_.jsx)(g.Z,{p:1})]})]})}),null===d||void 0===d||null===(s=d.resource_profiles)||void 0===s?void 0:s.map((function(e){var n=e.executor_resources,t=e.id,r=e.task_resources;return(0,_.jsxs)("div",{children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(h.Z,{level:4,children:["Executor resources ID ",t]})}),(0,_.jsx)(g.Z,{px:y.cd,children:(0,_.jsx)(Pe.Z,{noBoxShadow:!0,children:Object.entries(n||{}).map((function(e){var n,t=(0,c.Z)(e,2),r=t[0],i=t[1];return(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:(0,be.vg)(r),children:[(0,_.jsx)(te.Z,{columnFlex:[1,2],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(n=Object.entries(i))||void 0===n?void 0:n.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),(0,be.vg)(e[0])),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1]||"-")]}))}),(0,_.jsx)(g.Z,{p:1})]},r)}))})}),(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(h.Z,{level:4,children:["Task resources ID ",t]})}),(0,_.jsx)(g.Z,{px:y.cd,children:(0,_.jsx)(Pe.Z,{noBoxShadow:!0,children:Object.entries(r||{}).map((function(e){var n,t=(0,c.Z)(e,2),r=t[0],i=t[1];return(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:(0,be.vg)(r),children:[(0,_.jsx)(te.Z,{columnFlex:[1,2],columns:[{uuid:"Property"},{uuid:"Value"}],rows:null===(n=Object.entries(i))||void 0===n?void 0:n.map((function(e){return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),(0,be.vg)(e[0])),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),e[1]||"-")]}))}),(0,_.jsx)(g.Z,{p:1})]},r)}))})})]},t)}))]})}),[d]),p=(0,l.useMemo)((function(){return null===a||void 0===a?void 0:a.map((function(e){return(0,_.jsxs)("div",{children:[(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(h.Z,{level:4,children:["Executor ",null===e||void 0===e?void 0:e.id]})}),(0,_.jsx)(g.Z,{px:y.cd,children:(0,_.jsxs)(Pe.Z,{noBoxShadow:!0,children:[(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Metrics",children:[(0,_.jsx)(te.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:["active_tasks","add_time","completed_tasks","disk_used","failed_tasks","host_port","is_active","is_blacklisted","is_excluded","max_memory","max_tasks","memory_used","rdd_blocks","resource_profile_id","total_cores","total_duration","total_gc_time","total_input_bytes","total_shuffle_read","total_shuffle_write","total_tasks"].map((function(n){var t=null===e||void 0===e?void 0:e[n];return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),(0,be.vg)(n)),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),"undefined"===typeof t?"-":"boolean"===typeof t?String(t):t)]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Memory metrics",children:[(0,_.jsx)(te.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:Object.entries((null===e||void 0===e?void 0:e.memory_metrics)||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),(0,be.vg)(t)),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),"undefined"===typeof r?"-":"boolean"===typeof r?String(r):r)]}))}),(0,_.jsx)(g.Z,{p:1})]}),(0,_.jsxs)(Oe.Z,{noPaddingContent:!0,title:"Peak memory metrics",children:[(0,_.jsx)(te.Z,{columnFlex:[1,2],columns:[{uuid:"Metric"},{uuid:"Value"}],rows:Object.entries((null===e||void 0===e?void 0:e.peak_memory_metrics)||{}).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return[(0,l.createElement)(x.ZP,on(on({},G),{},{key:"property"}),(0,be.vg)(t)),(0,l.createElement)(x.ZP,on(on({},G),{},{key:"value"}),"undefined"===typeof r?"-":"boolean"===typeof r?String(r):r)]}))}),(0,_.jsx)(g.Z,{p:1})]})]})})]},null===e||void 0===e?void 0:e.id)}))}),[a]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{px:y.cd,children:(0,_.jsx)($.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return o(n)},regularSizeText:!0,selectedTabUUID:i,tabs:[{label:function(){return ln},uuid:ln},{label:function(){return sn},uuid:sn}],underlineColor:null===t||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.blue,underlineStyle:!0})}),(0,_.jsx)(g.Z,{mb:y.cd,children:(0,_.jsx)(f.Z,{light:!0})}),ln===i&&m,sn===i&&p]})},an=t(62547),un=t(91437),dn=Q.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-1b5e7g-0"})([""," border-radius:","px;padding:","px;"," ",""],(0,un.eR)(),Be.D7,2.5*y.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||oe.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.borders||oe.Z.borders).darkLight,";\n    box-shadow: ").concat((e.theme.shadow||oe.Z.shadow).frame,";\n  ")}),(function(e){return!e.inline&&"\n    height: ".concat(28*y.iI,"px;\n    width: ").concat(40*y.iI,"px;\n    margin: ").concat(y.cd/2*y.iI,"px;\n  ")})),fn=t(46684),mn=t(33065),pn=t(53808),hn=t(42122);var vn=t(72619),gn=t(23780),xn=t(19183);function jn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Zn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jn(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var bn=function(e){var n=e.contained,t=e.heightOffset,r=e.mainContainerRef,i=(0,xn.i)(),o=i.height,s=(i.width,(0,l.useMemo)((function(){return"ComputeManagement/".concat(n?"contained":"open")}),[n])),d=(0,gn.VI)(null,{},[],{uuid:s}),f=(0,c.Z)(d,1)[0],v=((0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null)),j=(0,l.useMemo)((function(){return o-(t||0)}),[t,o]),b=(0,l.useState)(null),k=b[0],P=b[1];(0,l.useEffect)((function(){var e;P(null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect())}),[o,v]);var O=(0,l.useMemo)((function(){return"compute_management_after_width_".concat(s)}),[s]),S=(0,l.useMemo)((function(){return"compute_management_before_width_".concat(s)}),[s]),w=(0,l.useState)((0,pn.U2)(O,60*y.iI)),C=w[0],E=w[1],I=(0,l.useCallback)((function(e){E(e),(0,pn.t8)(O,Math.max(e,60*y.iI))}),[O,E]),M=(0,l.useState)(!1),R=M[0],T=M[1],N=(0,l.useState)(Math.max((0,pn.U2)(S),20*y.iI)),A=N[0],D=N[1],F=(0,l.useCallback)((function(e){D(e||20*y.iI),(0,pn.t8)(S,e||20*y.iI)}),[S,D]),G=(0,l.useState)(!1),q=G[0],J=G[1],X=(0,l.useState)(!0),Q=X[0],$=X[1],ee=(0,l.useState)(null),ne=ee[0],te=ee[1],re=(0,l.useCallback)((function(e){te((function(n){var t=e(n);return t&&Q?$(!1):t||Q||$(!0),t}))}),[Q,$,te]),ie=(0,l.useState)(null),oe=ie[0],le=ie[1],se=(0,l.useCallback)((function(e){re((function(){return null})),le(e)}),[re,le]),ce=(0,l.useState)(null),ae=ce[0],ue=ce[1],de=(0,l.useState)(null),fe=de[0],me=de[1],pe=(0,l.useState)({}),he=pe[0],ve=pe[1],ge=(0,l.useCallback)((function(e){ve((function(n){return Zn(Zn({},n),e)})),me((function(n){return Zn(Zn({},n),e)}))}),[ve,me]),xe=((0,l.useCallback)((function(e){return ge({spark_config:Zn(Zn({},null===fe||void 0===fe?void 0:fe.spark_config),e)})}),[fe,ge]),Ze.ZP.projects.list({},{revalidateOnFocus:!1}).data),je=(0,l.useMemo)((function(){var e;return null===xe||void 0===xe||null===(e=xe.projects)||void 0===e?void 0:e[0]}),[xe]),be=(0,l.useMemo)((function(){return null===je||void 0===je?void 0:je.name}),[je]);(0,l.useEffect)((function(){je&&(me(je),ue(function(e){if(!(0,hn.Qr)((null===e||void 0===e?void 0:e.spark_config)||{}))return(0,hn.Qr)((null===e||void 0===e?void 0:e.emr_config)||{})?z.STANDALONE_CLUSTER:z.AWS_EMR}(je)))}),[je,me,ue,se]),(0,l.useEffect)((function(){!oe&&ae&&se({main:B.CONNECTION})}),[ae,oe,se]);var ye=(0,a.Db)(Ze.ZP.projects.useUpdate(be),{onSuccess:function(e){return(0,vn.wD)(e,{callback:function(e){var n=e.project;ve({}),me(n)},onErrorCallback:function(e,n){return f({errors:n,response:e})}})}}),ke=(0,c.Z)(ye,2),_e=ke[0],Pe=ke[1].isLoading,Oe=(0,l.useCallback)((function(e){return _e({project:(0,hn.GL)(Zn(Zn({},fe),e),["emr_config","remote_variables_dir","spark_config"])})}),[fe,_e]),Se=(0,l.useMemo)((function(){var e=[{Icon:Z.Fs,uuid:B.CONNECTION},{Icon:Z.NO,uuid:B.RESOURCES},{Icon:Z.ug,uuid:B.MONITORING},{Icon:Z.m1,uuid:B.SYSTEM}].map((function(e){var n=e.Icon,t=e.uuid;return(0,_.jsx)(mn.bC,{selected:(null===oe||void 0===oe?void 0:oe.main)===t,children:(0,_.jsx)(K.Z,{block:!0,disabled:!ae,noHoverUnderline:!0,noOutline:!0,onClick:function(){return se((function(){return{main:t}}))},preventDefault:!0,children:(0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(n,{size:2*y.iI}),(0,_.jsx)(g.Z,{mr:2}),(0,_.jsx)(x.ZP,{bold:!0,large:!0,children:W[t]})]})})})},t)}));if(ae){var n=L[ae],t=H[ae],r=V[ae];n&&t&&r&&e.unshift((0,_.jsx)(g.Z,{p:y.cd,children:(0,_.jsxs)(dn,{inline:!0,children:[(0,_.jsxs)(p.ZP,{alignItems:"flex-start",children:[(0,_.jsx)(m.Z,{flex:1,children:r()}),(0,_.jsx)(u.ZP,{compact:!0,onClick:function(){ue(null),se(null)},secondary:!0,small:!0,children:"Change"})]}),(0,_.jsxs)(g.Z,{mt:y.cd,children:[(0,_.jsx)(x.ZP,{default:!0,monospace:!0,children:t}),(0,_.jsx)(h.Z,{level:5,children:n})]})]})}))}return e}),[ae,oe,se]),we=(0,l.useMemo)((function(){if(ne)return(0,_.jsx)(tn,{height:j-(((null===k||void 0===k?void 0:k.height)||0)+fn.Mz+1),model:ne})}),[j,ne]),Ce=(0,l.useMemo)((function(){return(0,_.jsx)(Y,{attributesTouched:he||{},isLoading:Pe,mutateObject:Oe,objectAttributes:fe,selectedComputeService:ae,setObjectAttributes:ge})}),[he,Pe,fe,ae,ge,Oe]),Ee=(0,l.useMemo)((function(){return(0,_.jsx)(ze,{attributesTouched:he||{},isLoading:Pe,mutateObject:Oe,objectAttributes:fe,selectedComputeService:ae,setObjectAttributes:ge})}),[he,Pe,fe,ae,ge,Oe]),Ie=(0,l.useMemo)((function(){if(z.STANDALONE_CLUSTER===ae)return(0,_.jsx)(Ne,{objectAttributes:fe,refButtonTabs:v,selectedComputeService:ae,setSelectedSql:re})}),[fe,v,ae,re]),Me=(0,l.useMemo)((function(){if(z.STANDALONE_CLUSTER===ae)return(0,_.jsx)(cn,{objectAttributes:fe})}),[fe,ae]),Re=(0,l.useMemo)((function(){return(0,_.jsxs)(g.Z,{mx:1,py:y.cd,children:[(0,_.jsx)(g.Z,{mb:y.cd,px:y.cd,children:(0,_.jsx)(h.Z,{children:"Select a compute service"})}),(0,_.jsx)(p.ZP,{alignItems:"center",flexWrap:"wrap",children:U.map((function(e){var n=e.buildPayload,t=e.displayName,r=e.documentationHref,i=e.kicker,o=e.renderIcon,l=e.uuid;return(0,_.jsxs)(dn,{children:[o(),(0,_.jsxs)(g.Z,{mt:y.cd,children:[(0,_.jsx)(x.ZP,{default:!0,monospace:!0,children:i}),(0,_.jsx)(h.Z,{level:4,children:t})]}),(0,_.jsx)(g.Z,{mt:y.cd,children:(0,_.jsxs)(p.ZP,{alignItems:"center",children:[(0,_.jsx)(u.ZP,{loading:Pe&&l===ae,onClick:function(){ue(l),Oe(n(fe))},primary:!0,children:"Enable"}),(0,_.jsx)(g.Z,{mr:y.cd}),(0,_.jsx)(K.Z,{href:r,default:!0,openNewWindow:!0,children:"View setup documentation"})]})})]},l)}))})]})}),[Pe,fe,ae,ue,Oe]);return(0,_.jsxs)(an.Z,{after:we,afterHeightOffset:fn.Mz,afterHidden:Q||!ne,afterMousedownActive:R,afterWidth:C,before:Se,beforeHeightOffset:0,beforeHidden:!ae,beforeMousedownActive:q,beforeWidth:A,contained:!0,height:j,hideAfterCompletely:!0,hideBeforeCompletely:!ae,inline:!0,mainContainerRef:r,setAfterHidden:$,setAfterMousedownActive:T,setAfterWidth:I,setBeforeMousedownActive:J,setBeforeWidth:F,uuid:s,children:[!ae&&fe&&Re,ae&&je&&(0,_.jsxs)(_.Fragment,{children:[B.CONNECTION===(null===oe||void 0===oe?void 0:oe.main)&&Ce,B.RESOURCES===(null===oe||void 0===oe?void 0:oe.main)&&Ee,B.MONITORING===(null===oe||void 0===oe?void 0:oe.main)&&Ie,B.SYSTEM===(null===oe||void 0===oe?void 0:oe.main)&&Me]})]})},yn=t(94629),kn=t(93808);function _n(){var e=(0,l.useRef)(null);return(0,_.jsx)(yn.Z,{title:"Compute management",uuid:"Compute management/index",children:(0,_.jsx)("div",{ref:e,children:(0,_.jsx)(bn,{heightOffset:fn.Mz,mainContainerRef:e})})})}_n.getInitialProps=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Pn=(0,kn.Z)(_n)},42278:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/compute",function(){return t(52443)}])}},function(e){e.O(0,[2678,1154,844,8224,4267,600,8487,8264,7858,5499,3932,722,9774,2888,179],(function(){return n=42278,e(e.s=n);var n}));var n=e.O();_N_E=n}]);