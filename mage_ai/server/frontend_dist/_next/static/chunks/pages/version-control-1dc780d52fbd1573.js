(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{1210:function(e,n,r){"use strict";r.d(n,{Z:function(){return y}});var o=r(82394),t=r(21831),i=r(82684),l=r(47999),c=r(49894),s=r(93461),u=r(57384),d=r(41424),a=r(72454),h=r(28598);function f(e,n){var r=e.children;return(0,h.jsx)(a.HS,{ref:n,children:r})}var m=i.forwardRef(f),v=r(32063),j=r(85019),x=r(82531),b=r(66166),p=r(3055),g=r(49125),Z=r(91427),_=r(24141);function w(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?w(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var y=function(e){var n,r=e.addProjectBreadcrumbToCustomBreadcrumbs,o=e.after,f=e.afterHidden,w=e.afterWidth,y=e.afterWidthOverride,C=e.before,k=e.beforeWidth,I=e.breadcrumbs,O=e.children,S=e.errors,M=e.headerMenuItems,B=e.headerOffset,D=e.mainContainerHeader,F=e.navigationItems,E=e.setErrors,N=e.subheaderChildren,H=e.title,R=e.uuid,A=(0,_.i)().width,T="dashboard_after_width_".concat(R),U="dashboard_before_width_".concat(R),G=(0,i.useRef)(null),z=(0,i.useState)(y?w:(0,Z.U2)(T,w)),q=z[0],V=z[1],L=(0,i.useState)(!1),W=L[0],Q=L[1],K=(0,i.useState)(C?Math.max((0,Z.U2)(U,k),13*g.iI):null),X=K[0],Y=K[1],J=(0,i.useState)(!1),$=J[0],ee=J[1],ne=(0,i.useState)(null)[1],re=x.ZP.projects.list({},{revalidateOnFocus:!1}).data,oe=null===re||void 0===re?void 0:re.projects,te={label:function(){var e;return null===oe||void 0===oe||null===(e=oe[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},ie=[];I?(r&&ie.push(te),ie.push.apply(ie,(0,t.Z)(I))):(null===oe||void 0===oe?void 0:oe.length)>=1&&ie.push.apply(ie,[te,{bold:!0,label:function(){return H}}]),(0,i.useEffect)((function(){null===G||void 0===G||!G.current||W||$||null===ne||void 0===ne||ne(G.current.getBoundingClientRect().width)}),[W,q,$,X,G,ne,A]),(0,i.useEffect)((function(){W||(0,Z.t8)(T,q)}),[f,W,q,T]),(0,i.useEffect)((function(){$||(0,Z.t8)(U,X)}),[$,X,U]);var le=(0,b.Z)(w);return(0,i.useEffect)((function(){y&&le!==w&&V(w)}),[y,w,le]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Z,{title:H}),(0,h.jsx)(d.Z,{breadcrumbs:ie,menuItems:M,project:null===oe||void 0===oe?void 0:oe[0],version:null===oe||void 0===oe||null===(n=oe[0])||void 0===n?void 0:n.version}),(0,h.jsxs)(a.Nk,{children:[0!==(null===F||void 0===F?void 0:F.length)&&(0,h.jsx)(a.lm,{showMore:!0,children:(0,h.jsx)(j.Z,{navigationItems:F,showMore:!0})}),(0,h.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,h.jsxs)(v.Z,{after:o,afterHeightOffset:p.Mz,afterHidden:f,afterMousedownActive:W,afterWidth:q,before:C,beforeHeightOffset:p.Mz,beforeMousedownActive:$,beforeWidth:a.k1+(C?X:0),headerOffset:B,hideAfterCompletely:!0,leftOffset:C?a.k1:null,mainContainerHeader:D,mainContainerRef:G,setAfterMousedownActive:Q,setAfterWidth:V,setBeforeMousedownActive:ee,setBeforeWidth:Y,children:[N&&(0,h.jsx)(m,{children:N}),O]})})]}),S&&(0,h.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===E||void 0===E?void 0:E(null)},children:(0,h.jsx)(c.Z,P(P({},S),{},{onClose:function(){return null===E||void 0===E?void 0:E(null)}}))})]})}},55022:function(e,n,r){"use strict";var o;r.d(n,{G:function(){return o}}),function(e){e.ACTIVE_DIRECTORY="active_directory",e.GITHUB="github"}(o||(o={}))},32316:function(e,n,r){"use strict";r.d(n,{Z:function(){return j}});var o=r(82684),t=r(60328),i=r(67971),l=r(882),c=r(86673),s=r(19711),u=r(99994),d=r(38626),a=r(49125),h=r(37391),f=d.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],a.cd*a.iI,a.cd*a.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),h.w5),m=r(66653),v=r(28598);var j=function(e){var n=e.allowScroll,r=e.compact,d=e.contained,h=e.noPadding,j=e.onClickTab,x=e.regularSizeText,b=e.selectedTabUUID,p=e.small,g=e.tabs,Z=(0,o.useMemo)((function(){var e=g.length,n=[];return g.forEach((function(o,d){var h=o.Icon,f=o.IconSelected,g=o.label,Z=o.uuid,_=Z===b,w=_&&f||h,P=g?g():Z,y=(0,v.jsxs)(i.ZP,{alignItems:"center",children:[w&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w,{default:!_,size:2*a.iI}),(0,v.jsx)(c.Z,{mr:1})]}),(0,v.jsx)(s.ZP,{bold:!0,default:!_,noWrapping:!0,small:!x,children:P})]});d>=1&&e>=2&&n.push((0,v.jsx)("div",{style:{marginLeft:1.5*a.iI}},"spacing-".concat(Z))),_?n.push((0,v.jsx)(l.Z,{backgroundGradient:u.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:r||p,onClick:function(e){(0,m.j)(e),j(o)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:p,children:y},Z)):n.push((0,v.jsx)("div",{style:{padding:2},children:(0,v.jsx)(t.Z,{borderLess:!0,compact:r||p,default:!0,onClick:function(e){(0,m.j)(e),j(o)},outline:!0,small:p,children:y})},"button-tab-".concat(Z)))})),n}),[r,j,b,p,g]),_=(0,v.jsx)(i.ZP,{alignItems:"center",children:Z});return d?_:(0,v.jsx)(f,{allowScroll:n,noPadding:h,children:_})}},6343:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Ce}});var o=r(77837),t=r(38860),i=r.n(t),l=r(41788),c=r(82394),s=r(75582),u=r(54407),d=r.n(u),a=r(82684),h=r(83455),f=r(60328),m=r(34744),v=r(67971),j=r(87372),x=r(55378),b=r(86673),p=r(54283),g=r(19711),Z=r(38435),_=r(82944),w=r(46261),P=r(82531),y=r(22341),C="delete",k="merge",I="pull",O="push",S="rebase",M="git_remote_name",B="git_repository_name",D={uuid:"Branches"},F={uuid:"Files"},E={uuid:"Push"},N={uuid:"Setup"},H=[N,D,F,E],R=r(49125),A=r(90211),T=r(96510),U=r(28598);var G=function(e){var n=e.actionRemoteName,r=e.branch,o=e.branches,t=e.fetchBranch,i=e.fetchBranches,l=e.remotes,u=e.setActionRemoteName,d=e.showError,I=(0,a.useState)(""),O=I[0],M=I[1],B=(0,a.useState)(null),D=B[0],E=B[1],H=(0,a.useState)(null),G=H[0],z=H[1],q=(0,a.useState)(null),V=q[0],L=q[1],W=(0,a.useState)(""),Q=W[0],K=W[1],X=(0,a.useMemo)((function(){return null===l||void 0===l?void 0:l.find((function(e){return e.name===n}))}),[n,l]),Y=(0,a.useMemo)((function(){return(null===o||void 0===o?void 0:o.concat((null===X||void 0===X?void 0:X.refs)||[]))||[]}),[o,X]),J=(0,h.Db)(P.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){t(),i(),K("")},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),$=(0,s.Z)(J,2),ee=$[0],ne=$[1].isLoading,re=(0,h.Db)(P.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){t()},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),oe=(0,s.Z)(re,2),te=oe[0],ie=oe[1].isLoading,le=(0,h.Db)(P.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){var n=e.git_custom_branch.progress;t(),M(""),E(""),z(n),L("")},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),ce=(0,s.Z)(le,2),se=ce[0],ue=ce[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsxs)(j.Z,{children:["Branches",Y?" (".concat(null===Y||void 0===Y?void 0:Y.length,")"):""]}),(0,U.jsx)(b.Z,{mt:R.Mq,children:(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.VW,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return u(e.target.value)},placeholder:"Choose a remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(w.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{muted:!1}),beforeIconSize:2*R.iI,monospace:!0,onChange:function(e){return te({git_custom_branch:{name:e.target.value}})},value:null===r||void 0===r?void 0:r.name,children:(null===r||void 0===r?void 0:r.name)&&(null===Y||void 0===Y?void 0:Y.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)})))})}),(0,U.jsx)(b.Z,{mr:R.cd}),ie&&(0,U.jsx)(p.Z,{inverted:!0})]})]})]})}),(0,U.jsx)(b.Z,{mt:R.Mq,children:(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(_.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return K(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:Q||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.mm,{size:2*R.iI}),disabled:!Q,loading:ne,onClick:function(){ee({git_custom_branch:{name:Q}})},primary:!0,children:"Create new branch"})]})})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(j.Z,{children:"Actions"}),(0,U.jsxs)(b.Z,{mt:R.Mq,children:[(0,U.jsxs)(b.Z,{mb:R.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===r||void 0===r?void 0:r.name)&&(0,U.jsx)(g.ZP,{monospace:!0,children:null===r||void 0===r?void 0:r.name})]}),(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return L(e.target.value)},placeholder:"Choose a branch",value:V,children:null===Y||void 0===Y?void 0:Y.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,U.jsxs)(x.Z,{onChange:function(e){return E(e.target.value)},placeholder:"Choose action",value:D||"",children:[(0,U.jsx)("option",{value:k,children:(0,A.vg)(k)}),(0,U.jsx)("option",{value:S,children:(0,A.vg)(S)}),(0,U.jsx)("option",{value:C,children:(0,A.vg)(C)})]})]})]}),D&&[k,S].includes(D)&&(0,U.jsxs)(b.Z,{mt:R.cd,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsxs)(g.ZP,{bold:!0,muted:!0,children:["Message for ",D]})}),(0,U.jsx)(Z.Z,{monospace:!0,onChange:function(e){return M(e.target.value)},value:O||""})]}),(0,U.jsxs)(b.Z,{mt:R.cd,children:[(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*R.iI}),disabled:!D||!V,loading:ue,onClick:function(){(C!==D||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(V,"?")))&&se({git_custom_branch:(0,c.Z)({action_type:D,message:O},D,{base_branch:V})})},primary:!0,children:D?(0,A.vg)(D):"Execute action"}),G&&(0,U.jsx)(b.Z,{mt:R.cd,children:(0,U.jsx)(g.ZP,{default:!0,monospace:!0,preWrap:!0,children:G})})]})]})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:R.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.ZP,{children:[(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.Hd,{}),linkProps:{href:"/version-control?tab=".concat(N.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:N.uuid}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(f.Z,{afterIcon:(0,U.jsx)(y.Kw,{}),linkProps:{href:"/version-control?tab=".concat(F.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",F.uuid]})]})]})]})},z=r(32316),q=r(44182),V=r(25880),L=r(10919),W=r(87815);function Q(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function K(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var X={base_branch:null,body:null,compare_branch:null,repository:null,title:null};var Y=function(e){var n=e.actionRemoteName,r=e.branch,o=e.branches,t=e.fetchBranch,i=e.loading,l=e.remotes,u=e.repositories,d=e.repositoryName,w=e.setActionRemoteName,C=e.setRepositoryName,k=e.showError,I=(0,a.useState)((null===r||void 0===r?void 0:r.name)||""),S=I[0],M=I[1],B=(0,a.useState)(null),D=B[0],E=B[1],N=(0,a.useState)(null),H=N[0],G=N[1],z=(0,a.useState)(X),Q=z[0],Y=z[1],J=(0,h.Db)(P.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){var n=e.git_custom_branch,r=n.error,o=n.progress;r?(E(r),G(null)):(t(),E(null),G(o))},onErrorCallback:function(e,n){return k({errors:n,response:e})}})}}),$=(0,s.Z)(J,2),ee=$[0],ne=$[1].isLoading,re=P.ZP.pull_requests.list({repository:d},{},{pauseFetch:!d}),oe=re.data,te=re.mutate,ie=(0,a.useMemo)((function(){return(null===oe||void 0===oe?void 0:oe.pull_requests)||[]}),[oe]),le=(0,a.useMemo)((function(){return(0,U.jsx)(W.Z,{columnFlex:[null,null,null,null],columns:[{uuid:"Title"},{uuid:"Author"},{uuid:"Created"},{uuid:"Last modified"}],onClickRow:function(e){var n,r=null===ie||void 0===ie||null===(n=ie[e])||void 0===n?void 0:n.url;r&&window.open(r,"_blank")},rows:null===ie||void 0===ie?void 0:ie.map((function(e){var n=e.created_at,r=e.last_modified,o=e.title,t=e.url,i=e.user;return[(0,U.jsx)(L.Z,{default:!0,href:t,monospace:!0,openNewWindow:!0,small:!0,children:o},"title"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:i},"user"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:n},"createdAt"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:r||"-"},"lastModified")]})),uuid:"pull-requests"})}),[ie]),ce=P.ZP.git_custom_branches.list({repository:d},{},{pauseFetch:!d}).data,se=(0,a.useMemo)((function(){return(null===ce||void 0===ce?void 0:ce.git_custom_branches)||[]}),[ce]);(0,a.useEffect)((function(){null!==Q&&void 0!==Q&&Q.compare_branch||null===se||void 0===se||!se.find((function(e){return e.name===(null===r||void 0===r?void 0:r.name)}))||Y((function(e){return K(K({},e),{},{compare_branch:null===r||void 0===r?void 0:r.name})}))}),[r,se,Q]);var ue=(0,h.Db)(P.ZP.pull_requests.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){te(),Y(X)},onErrorCallback:function(e,n){return k({errors:n,response:e})}})}}),de=(0,s.Z)(ue,2),ae=de[0],he=de[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:(0,A.vg)(O)})}),(0,U.jsxs)(b.Z,{mt:R.Mq,children:[(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Remote"})}),i&&(0,U.jsx)(p.Z,{inverted:!0}),!i&&(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.VW,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return w(e.target.value)},placeholder:"Choose remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,U.jsxs)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return M(e.target.value)},placeholder:"Choose branch",value:S||"",children:[(0,U.jsx)("option",{value:""}),null===o||void 0===o?void 0:o.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,U.jsx)(b.Z,{mt:R.cd,children:(0,U.jsxs)(f.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*R.iI}),disabled:!n||!S,loading:ne,onClick:function(){G(null),ee({git_custom_branch:(0,c.Z)({action_type:O},O,{branch:S,remote:n})})},primary:!0,children:[(0,A.vg)(O)," ",n," ",n&&S]})}),(H||D)&&(0,U.jsx)(b.Z,{mt:R.cd,children:(0,U.jsx)(g.ZP,{danger:!!D,default:!!H,monospace:!0,preWrap:!0,children:H||D})})]})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:"Create pull request"})}),(0,U.jsxs)(b.Z,{mt:R.Mq,children:[i&&(0,U.jsx)(p.Z,{inverted:!0}),!i&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Repository"})}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.fy,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return C(e.target.value)},placeholder:"Choose repository",value:d||"",children:null===u||void 0===u?void 0:u.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Base branch"})}),d&&!ce&&(0,U.jsx)(p.Z,{inverted:!0}),(!d||ce)&&(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*R.iI,disabled:!d,monospace:!0,onChange:function(e){return Y((function(n){return K(K({},n),{},{base_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===Q||void 0===Q?void 0:Q.base_branch)||"",children:null===se||void 0===se?void 0:se.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),d&&!ce&&(0,U.jsx)(p.Z,{inverted:!0}),(!d||ce||(null===Q||void 0===Q?void 0:Q.compare_branch))&&(0,U.jsxs)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*R.iI,disabled:!d,monospace:!0,onChange:function(e){return Y((function(n){return K(K({},n),{},{compare_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===Q||void 0===Q?void 0:Q.compare_branch)||"",children:[!(null!==se&&void 0!==se&&se.length)&&(null===Q||void 0===Q?void 0:Q.compare_branch)&&(0,U.jsx)("option",{value:null===Q||void 0===Q?void 0:Q.compare_branch,children:null===Q||void 0===Q?void 0:Q.compare_branch}),null===se||void 0===se?void 0:se.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(_.Z,{label:"Title",monospace:!0,onChange:function(e){return Y((function(n){return K(K({},n),{},{title:e.target.value})}))},value:(null===Q||void 0===Q?void 0:Q.title)||""})}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(Z.Z,{label:"Description",monospace:!0,onChange:function(e){return Y((function(n){return K(K({},n),{},{body:e.target.value})}))},value:(null===Q||void 0===Q?void 0:Q.body)||""})}),(0,U.jsx)(b.Z,{mt:R.cd,children:(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*R.iI}),disabled:!d||!(null!==Q&&void 0!==Q&&Q.title)||!(null!==Q&&void 0!==Q&&Q.base_branch)||!(null!==Q&&void 0!==Q&&Q.compare_branch),loading:he,onClick:function(){ae({pull_request:K(K({},Q),{},{repository:d})})},primary:!0,children:"Create new pull request"})})]})]}),(0,U.jsx)(b.Z,{mt:R.Mq,children:(0,U.jsx)(q.Z,{visibleMapping:{0:!d},children:(0,U.jsxs)(V.Z,{noPaddingContent:!0,title:oe?"Pull requests (".concat(null===ie||void 0===ie?void 0:ie.length,")"):"Pull requests",children:[!d&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(g.ZP,{muted:!0,children:"Please select a repository to view open pull requests."})}),d&&(0,U.jsxs)(U.Fragment,{children:[!oe&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(p.Z,{inverted:!0})}),oe&&le]})]})})})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:R.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.ZP,{children:(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.Hd,{}),linkProps:{href:"/version-control?tab=".concat(F.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:F.uuid})})]})]})},J=r(1210),$=r(46299),ee=r(38341),ne=r(93461),re=r(38626),oe=re.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*R.iI),te=r(7715);function ie(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function le(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ce=function(e){var n=e.branch,r=e.fetchBranch,o=e.modifiedFiles,t=e.setSelectedFilePath,i=e.showError,l=e.stagedFiles,c=e.untrackedFiles,u=(0,a.useRef)(null),d=(0,a.useState)(""),x=d[0],_=d[1],w=(0,a.useState)({}),C=w[0],k=w[1],I=(0,a.useState)({}),O=I[0],S=I[1],M=(0,a.useMemo)((function(){return Object.keys(o).concat(Object.keys(c)).sort()}),[o,c]),B=(0,a.useMemo)((function(){return Object.keys(l||{})}),[l]),F=(0,a.useMemo)((function(){return B.length}),[B]),N=(0,a.useMemo)((function(){return Object.keys(C).length===(null===M||void 0===M?void 0:M.length)}),[C,M]),H=(0,a.useMemo)((function(){return Object.keys(O).length===(null===B||void 0===B?void 0:B.length)}),[O,B]),G=(0,a.useMemo)((function(){return{onErrorCallback:function(e,n){return i({errors:n,response:e})}}}),[i]),z=(0,a.useMemo)((function(){return{onSuccess:function(e){return(0,T.wD)(e,le({callback:function(){r(),k({})}},G))}}}),[r,G]),Q=(0,a.useMemo)((function(){return P.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),K=(0,h.Db)(Q,z),X=(0,s.Z)(K,2),Y=X[0],J=X[1].isLoading,$=(0,h.Db)(Q,z),re=(0,s.Z)($,2),ie=re[0],ce=re[1].isLoading,se=(0,h.Db)(Q,{onSuccess:function(e){return(0,T.wD)(e,le({callback:function(){r(),S({})}},G))}}),ue=(0,s.Z)(se,2),de=ue[0],ae=ue[1].isLoading,he=(0,a.useCallback)((function(e,n,r,o,t){var i=(null===e||void 0===e?void 0:e.length)>=1;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(L.Z,{block:!0,noHoverUnderline:!0,onClick:function(){r(t?{}:o)},preventDefault:!0,children:(0,U.jsxs)(v.ZP,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(ee.Z,{checked:i&&t,disabled:!i}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(g.ZP,{bold:!0,children:i&&t?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,U.jsx)(oe,{children:(0,U.jsx)(L.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return r((function(n){var r=le({},n);return!(null!==r&&void 0!==r&&r[e])?r[e]=!0:delete r[e],r}))},preventDefault:!0,children:(0,U.jsxs)(v.ZP,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(ee.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),fe=(0,a.useMemo)((function(){return(0,te.Qr)(C)}),[C]),me=P.ZP.git_custom_branches.detail("with_logs",{_format:"with_logs"}),ve=me.data,je=me.mutate,xe=(0,a.useMemo)((function(){var e;return(null===ve||void 0===ve||null===(e=ve.git_custom_branch)||void 0===e?void 0:e.logs)||[]}),[ve]),be=(0,h.Db)(P.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){je(),r(),_("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),pe=(0,s.Z)(be,2),ge=pe[0],Ze=pe[1].isLoading,_e=(0,a.useMemo)((function(){return(0,U.jsx)(W.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:xe.map((function(e){var n=e.author,r=e.date,o=e.message;return[(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:r},"date"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:o},"message")]})),uuid:"git-branch-logs"})}),[xe]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mb:R.HN,children:(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)(ne.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(j.Z,{children:["Not staged ",(null===M||void 0===M?void 0:M.length)>=1&&"(".concat(null===M||void 0===M?void 0:M.length,")")]}),(0,U.jsx)(b.Z,{my:R.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(b.Z,{mb:R.cd,children:(0,U.jsxs)(v.ZP,{flexDirection:"row",children:[(0,U.jsx)(f.Z,{compact:!0,disabled:fe||ae||ce,loading:J,onClick:function(){Y({git_custom_branch:{action_type:"add",files:Object.keys(C)}}).then((function(e){var n,r=e.data;null!==r&&void 0!==r&&r.git_custom_branch&&(null===u||void 0===u||null===(n=u.current)||void 0===n||n.focus())}))},primary:!0,children:"Add files"}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.Z,{compact:!0,disabled:fe||J||ae,loading:ce,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&ie({git_custom_branch:{action_type:"checkout",files:Object.keys(C)}})},children:"Checkout files"})]})}),he(M,C,k,le(le({},o),c),N)]}),(0,U.jsx)(b.Z,{mr:R.cd}),(0,U.jsxs)(ne.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(j.Z,{children:["Staged files ",(null===B||void 0===B?void 0:B.length)>=1&&"(".concat(null===B||void 0===B?void 0:B.length,")")]}),(0,U.jsx)(b.Z,{my:R.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(b.Z,{mb:R.cd,children:(0,U.jsx)(v.ZP,{flexDirection:"row",children:(0,U.jsx)(f.Z,{compact:!0,disabled:(0,te.Qr)(O)||J||ce,loading:ae,onClick:function(){de({git_custom_branch:{action_type:"reset",files:Object.keys(O)}})},secondary:!0,children:"Reset files"})})}),he(B,O,S,l,H)]})]})}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:"Commit"})}),(0,U.jsx)(b.Z,{mb:R.cd,children:(0,U.jsx)(q.Z,{children:(0,U.jsx)(V.Z,{noPaddingContent:!0,title:F>=1?"Staged files (".concat(F,")"):"No staged files",children:null===B||void 0===B?void 0:B.map((function(e){return(0,U.jsx)(b.Z,{my:1,px:R.cd,children:(0,U.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,U.jsx)(L.Z,{default:!0,monospace:!0,onClick:function(){return t((function(n){return n===e?null:e}))},warning:null===o||void 0===o?void 0:o[e],children:e}),(0,U.jsx)(b.Z,{mr:1}),(null===o||void 0===o?void 0:o[e])&&(0,U.jsx)(g.ZP,{warning:!0,children:"Modified after staging"})]})},e)}))})})}),(0,U.jsx)(Z.Z,{label:"Commit message",monospace:!0,onChange:function(e){return _(e.target.value)},ref:u,value:x||""}),(0,U.jsx)(b.Z,{mt:R.cd,children:(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsxs)(f.Z,{disabled:0===F||!((null===x||void 0===x?void 0:x.length)>=1),loading:Ze,onClick:function(){ge({git_custom_branch:{action_type:"commit",files:B,message:x}})},primary:!0,children:["Commit ",(0,A._6)("file",F,!0)," with message"]}),0===F&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(g.ZP,{danger:!0,small:!0,children:"Please stage at least 1 file before committing."})]})]})})]}),(0,U.jsx)(b.Z,{mb:R.HN,children:(0,U.jsx)(q.Z,{children:(0,U.jsxs)(V.Z,{noPaddingContent:!0,title:"Logs",children:[!ve&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(p.Z,{inverted:!0})}),ve&&_e]})})}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:R.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.ZP,{children:[(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.Hd,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:D.uuid}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(f.Z,{afterIcon:(0,U.jsx)(y.Kw,{}),linkProps:fe?{href:"/version-control?tab=".concat(E.uuid)}:null,noHoverUnderline:!0,primary:fe,sameColorAsText:!0,secondary:!fe,children:["Next: ",E.uuid]})]})]})]})},se=r(12691),ue=r.n(se),de=r(34376),ae=r(55022),he=r(59e3);var fe=function(e){var n=e.actionRemoteName,r=e.branch,o=e.fetchBranch,t=e.loading,i=e.remotes,l=e.setActionRemoteName,c=e.showError,u=(0,de.useRouter)(),d=(0,a.useRef)(null),Z=(0,a.useState)(null),w=Z[0],C=Z[1],k=(0,a.useState)(null),O=k[0],S=k[1],M=(0,a.useState)(null),B=M[0],F=M[1],E=(0,a.useState)(null),N=E[0],H=E[1],G=(0,a.useState)(!1),z=G[0],Q=G[1],K=(0,a.useState)(null),X=K[0],Y=K[1],J=(0,a.useState)(""),$=J[0],ee=J[1],re=(0,a.useState)(""),oe=re[0],te=re[1],ie=(0,a.useState)(null),le=ie[0],ce=ie[1],se=(0,a.useMemo)((function(){return!(null===r||void 0===r||!r.name)}),[r]);(0,a.useEffect)((function(){var e,n;null!==r&&void 0!==r&&null!==(e=r.sync_config)&&void 0!==e&&e.repo_path&&null===le&&ce(null===r||void 0===r||null===(n=r.sync_config)||void 0===n?void 0:n.repo_path)}),[r,le]);var fe=(0,a.useMemo)((function(){var e,r;return null===i||void 0===i||null===(e=i.find((function(e){return e.name===n})))||void 0===e||null===(r=e.refs)||void 0===r?void 0:r.map((function(e){var n=e.name.split("/");return{name:n[n.length-1]}}))}),[n,i]),me=(0,h.Db)(P.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){o(),Q(!1)},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),ve=(0,s.Z)(me,2),je=ve[0],xe=ve[1].isLoading,be=(0,h.Db)(P.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){var n=e.git_custom_branch,r=n.error,t=n.progress;r?(S(r),H(null)):(o(),C(null),S(null),F(null),H(t))},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),pe=(0,s.Z)(be,2),ge=pe[0],Ze=pe[1].isLoading,_e=(0,h.Db)(P.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){o(),ee(""),te("")},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),we=(0,s.Z)(_e,2),Pe=we[0],ye=we[1].isLoading,Ce=(0,h.Db)(P.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){o(),Y(null)},onErrorCallback:function(e,n){Y(null),c({errors:n,response:e})}})}}),ke=(0,s.Z)(Ce,2),Ie=ke[0],Oe=ke[1].isLoading,Se=P.ZP.oauths.detail(ae.G.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)}),Me=Se.data,Be=Se.mutate,De=(0,a.useMemo)((function(){return(null===Me||void 0===Me?void 0:Me.oauth)||{}}),[Me]),Fe=(0,h.Db)(P.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){Be()},onErrorCallback:function(e,n){c({errors:n,response:e})}})}}),Ee=(0,s.Z)(Fe,2),Ne=Ee[0],He=Ee[1].isLoading,Re=((0,he.iV)()||{}).access_token;(0,a.useEffect)((function(){!De||null!==De&&void 0!==De&&De.authenticated||!Re||Ne({oauth:{provider:ae.G.GITHUB,token:Re}})}),[Re,Ne,De]);var Ae=(0,a.useMemo)((function(){return null===i||void 0===i?void 0:i.map((function(e){var r=e.name,o=e.refs,t=e.urls;return(0,U.jsxs)(b.Z,{mt:R.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,U.jsxs)(ne.Z,{alignItems:"center",children:[(0,U.jsx)(g.ZP,{bold:!0,children:r}),(0,U.jsx)(b.Z,{mx:1,children:(0,U.jsx)(y._Q,{muted:!0})}),null===t||void 0===t?void 0:t.map((function(e){return(0,U.jsx)(b.Z,{mr:1,children:(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.Z,{compact:!0,disabled:Oe&&X!==r,iconOnly:!0,loading:Oe&&X===r,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(r,"?"))&&(Y(r),Ie({git_custom_branch:{action_type:"remove_remote",remote:{name:r}}}).then((function(){n===r&&l(null)})))},small:!0,title:"Remote remote ".concat(r),children:(0,U.jsx)(y.rF,{})})]})}),(0,U.jsx)(q.Z,{children:(0,U.jsxs)(V.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===o||void 0===o?void 0:o.length,")"),children:[0===(null===o||void 0===o?void 0:o.length)&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(g.ZP,{muted:!0,children:"This remote has no refs."})}),(null===o||void 0===o?void 0:o.length)>=1&&(0,U.jsx)(W.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:o.map((function(e){var n,r=e.commit,o=e.name;return[(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:o},"ref-name"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.name},"author"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.date},"date"),(0,U.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,U.jsx)(b.Z,{mt:R.Mq,children:(0,U.jsx)(m.Z,{light:!0})})]},r)}))}),[Oe,X,i,Ie]);return(0,U.jsxs)(U.Fragment,{children:[Me&&(0,U.jsxs)(b.Z,{mb:R.HN,children:[(null===De||void 0===De?void 0:De.authenticated)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.fy,{size:2*R.iI}),disabled:!0,children:"Successfully authenticated with GitHub"}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(g.ZP,{muted:!0,children:"You can pull, push, and create pull requests on GitHub."})})]}),!(null!==De&&void 0!==De&&De.authenticated)&&(null===De||void 0===De?void 0:De.url)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.fy,{size:2*R.iI}),loading:He,onClick:function(){return u.push(null===De||void 0===De?void 0:De.url)},primary:!0,children:"Authenticate with GitHub"}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(g.ZP,{muted:!0,children:"Authenticating with GitHub will allow you to pull, push, and create pull requests on GitHub."})})]})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(j.Z,{children:"Setup"}),(0,U.jsxs)(b.Z,{mt:R.Mq,children:[(0,U.jsxs)(b.Z,{mb:1,children:[(0,U.jsx)(g.ZP,{bold:!0,large:!0,children:se?"Git init directory":"Initialize Git directory"}),!se&&(0,U.jsxs)(g.ZP,{muted:!0,children:["Enter the directory you want to initialize git in. For example, ",(0,U.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,muted:!0,children:"/home/src/default_repo"}),"."]}),se&&(0,U.jsxs)(g.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,U.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(_.Z,{disabled:se&&!z,label:"Git directory",monospace:!0,onChange:function(e){return ce(e.target.value)},ref:d,value:le||""}),(0,U.jsx)(b.Z,{mr:1}),(!se||z)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(f.Z,{compact:!0,disabled:!se&&!le,loading:xe,onClick:function(){je({sync:{repo_path:le}})},primary:!0,small:!0,children:"Save"}),se&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(L.Z,{onClick:function(){return Q(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]})]}),se&&!z&&(0,U.jsx)(L.Z,{onClick:function(){Q(!0),setTimeout((function(){var e;return null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),se&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsxs)(j.Z,{children:["Remotes",!t&&i?" (".concat(null===i||void 0===i?void 0:i.length,")"):""]}),t&&(0,U.jsx)(b.Z,{mt:R.Mq,children:(0,U.jsx)(p.Z,{inverted:!0})}),!t&&Ae,(0,U.jsx)(b.Z,{mt:R.Mq,children:(0,U.jsxs)(v.ZP,{alignItems:"flex-start",children:[(0,U.jsx)(_.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return ee(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:$||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(v.ZP,{flexDirection:"column",children:[(0,U.jsx)(_.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return te(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:oe||""}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsxs)(g.ZP,{muted:!0,small:!0,children:["Use the https URL if you",(0,U.jsx)("br",{}),"authenticated with GitHub above."]})})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.mm,{size:2*R.iI}),disabled:!$||!oe,loading:ye,onClick:function(){Pe({git_custom_branch:{action_type:"add_remote",remote:{name:$,url:oe}}})},primary:!0,children:"Create new remote"})]})})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(j.Z,{children:"Actions"}),(0,U.jsxs)(b.Z,{mt:R.Mq,children:[(0,U.jsxs)(b.Z,{mb:R.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(g.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===r||void 0===r?void 0:r.name)&&(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(g.ZP,{monospace:!0,children:null===r||void 0===r?void 0:r.name}),(0,U.jsx)(b.Z,{mr:R.cd}),(0,U.jsx)(ue(),{href:"/version-control?tab=".concat(D.uuid),passHref:!0,children:(0,U.jsx)(L.Z,{small:!0,children:"Switch branch"})})]})]}),(0,U.jsxs)(v.ZP,{children:[(0,U.jsx)(x.Z,{onChange:function(e){return F(e.target.value)},placeholder:"Action",value:B||"",children:(0,U.jsx)("option",{value:I,children:(0,A.vg)(I)})}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(x.Z,{beforeIcon:(0,U.jsx)(y.VW,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return l(e.target.value)},placeholder:"Remote",value:n||"",children:null===i||void 0===i?void 0:i.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(x.Z,{beforeIcon:(0,U.jsx)(y.I0,{}),beforeIconSize:1.5*R.iI,monospace:!0,onChange:function(e){return C(e.target.value)},value:w||"",children:[(0,U.jsx)("option",{value:"",children:"All branches"}),null===fe||void 0===fe?void 0:fe.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]}),(0,U.jsxs)(b.Z,{mt:R.cd,children:[(0,U.jsx)(f.Z,{beforeIcon:(0,U.jsx)(y.Bf,{size:2*R.iI}),disabled:!B||!n,loading:Ze,onClick:function(){H(null),ge({git_custom_branch:{action_type:B,pull:{branch:w,remote:n}}})},primary:!0,children:B?(0,A.vg)(B):"Execute action"}),(N||O)&&(0,U.jsx)(b.Z,{mt:R.cd,children:(0,U.jsx)(g.ZP,{danger:!!O,default:!!N,monospace:!0,preWrap:!0,children:N||O})})]})]})]}),(0,U.jsxs)(b.Z,{mb:R.HN,children:[(0,U.jsx)(b.Z,{mb:R.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.ZP,{children:(0,U.jsxs)(f.Z,{afterIcon:(0,U.jsx)(y.Kw,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",D.uuid]})})]})]})]})},me=r(2005),ve=re.default.div.withConfig({displayName:"indexstyle__DiffContainerStyle",componentId:"sc-1fo4nus-0"})(["pre{font-family:",";}"],me.Vp),je={codeFoldGutter:{},content:{},contentText:{},diffAdded:{},diffContainer:{},diffRemoved:{},emptyGutter:{},emptyLine:{},gutter:{},highlightedGutter:{},highlightedLine:{},line:{},lineNumber:{},marker:{},splitView:{},titleBlock:{},variables:{dark:{addedBackground:"#044B53",addedColor:"white",addedGutterBackground:"#034148",addedGutterColor:"#8c8c8c",codeFoldBackground:"#262831",codeFoldContentColor:"#555a7b",codeFoldGutterBackground:"#21232b",diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",diffViewerTitleBackground:"#2f323e",diffViewerTitleBorderColor:"#353846",diffViewerTitleColor:"#555a7b",emptyLineBackground:"#363946",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",gutterColor:"#464c67",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",removedBackground:"#632F34",removedColor:"white",removedGutterBackground:"#632b30",removedGutterColor:"#8c8c8c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f"},light:{addedBackground:"#e6ffed",addedColor:"#24292e",addedGutterBackground:"#cdffd8",addedGutterColor:"#212529",codeFoldBackground:"#f1f8ff",codeFoldContentColor:"#212529",codeFoldGutterBackground:"#dbedff",diffViewerBackground:"#fff",diffViewerColor:"212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleBorderColor:"#eee",diffViewerTitleColor:"#212529",emptyLineBackground:"#fafbfc",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",gutterColor:"#212529",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",removedBackground:"#ffeef0",removedColor:"#24292e",removedGutterBackground:"#ffdce0",removedGutterColor:"#212529",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0"}},wordAdded:{},wordDiff:{},wordRemoved:{}},xe=r(91427),be=r(32821),pe=r(33766),ge=r(24224),Ze=r(9728);function _e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function we(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Pe=function(){var e=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,Ze.VI)(null,{},[],{uuid:"VersionControlPage"}),o=(0,s.Z)(r,1)[0],t=(0,a.useState)(null),i=t[0],l=t[1],h=(0,a.useState)(null),f=h[0],v=h[1],j=(0,a.useState)(H[0]),Z=j[0],_=j[1],y=(0,he.iV)();(0,a.useEffect)((function(){null!==y&&void 0!==y&&y.tab&&_(H.find((function(e){return e.uuid===(null===y||void 0===y?void 0:y.tab)})))}),[y]);var C=P.ZP.git_custom_branches.list({include_remote_branches:1}),k=C.data,I=C.mutate,O=(0,a.useMemo)((function(){return null===k||void 0===k?void 0:k.git_custom_branches}),[k]),S=P.ZP.git_custom_branches.detail("current",{_format:"with_files"}),A=S.data,T=S.mutate,q=(0,a.useMemo)((function(){return(null===A||void 0===A?void 0:A.git_custom_branch)||{}}),[A]),V=(0,a.useMemo)((function(){return(null===q||void 0===q?void 0:q.files)||[]}),[q]),L=P.ZP.git_custom_branches.detail("with_remotes",{_format:"with_remotes"}),W=L.data,Q=L.mutate,K=(0,a.useMemo)((function(){return null===W||void 0===W?void 0:W.git_custom_branch}),[W]),X=(0,a.useMemo)((function(){return(null===K||void 0===K?void 0:K.remotes)||[]}),[K]),ee=(0,a.useState)(null),ne=ee[0],re=ee[1],oe=(0,a.useCallback)((function(e){(0,xe.t8)(M,e),re(e)}),[]);(0,a.useEffect)((function(){var e=(0,xe.U2)(M,null);if(W&&e){var n=null===X||void 0===X?void 0:X.find((function(n){return n.name===e}));oe(n?null===n||void 0===n?void 0:n.name:null)}}),[W,X,oe]);var ie=(0,a.useState)((0,xe.U2)(B,"")),le=ie[0],se=ie[1],ue=(0,a.useCallback)((function(e){(0,xe.t8)(B,e),se(e)}),[]),de=(0,a.useMemo)((function(){return(0,ge.Tw)(X.reduce((function(e,n){var r;return e.concat((null===n||void 0===n||null===(r=n.repository_names)||void 0===r?void 0:r.map((function(e){var r;return{name:e,url:null===n||void 0===n||null===(r=n.urls)||void 0===r?void 0:r[0]}})))||[])}),[]),(function(e){return e.name}))}),[X]);(0,a.useEffect)((function(){var e=(0,xe.U2)(B,null);if(W&&e){var n=null===de||void 0===de?void 0:de.find((function(n){return n.name===e}));ue(n?null===n||void 0===n?void 0:n.name:null)}}),[W,de,ue]);var ae=P.ZP.git_files.detail(f?encodeURIComponent(f):null,{base_branch:i}),me=ae.data,_e=ae.mutate,Pe=(0,a.useMemo)((function(){return null===me||void 0===me?void 0:me.git_file}),[me]);(0,a.useEffect)((function(){i&&_e()}),[i,_e]),(0,a.useEffect)((function(){null!==me&&void 0!==me&&me.error&&o({errors:null===me||void 0===me?void 0:me.error,response:me})}),[me,o]);var ye=(0,a.useMemo)((function(){var e,n,r;return{modifiedFiles:null===q||void 0===q||null===(e=q.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return we(we({},e),{},(0,c.Z)({},n,!0))}),{}),stagedFiles:null===q||void 0===q||null===(n=q.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return we(we({},e),{},(0,c.Z)({},n,!0))}),{}),untrackedFiles:null===q||void 0===q||null===(r=q.untracked_files)||void 0===r?void 0:r.reduce((function(e,n){return we(we({},e),{},(0,c.Z)({},n,!0))}),{})}}),[q]),Ce=ye.modifiedFiles,ke=void 0===Ce?{}:Ce,Ie=ye.stagedFiles,Oe=void 0===Ie?{}:Ie,Se=ye.untrackedFiles,Me=void 0===Se?{}:Se;(0,a.useEffect)((function(){f&&(0,te.Qr)(ke)&&(0,te.Qr)(Oe)&&(0,te.Qr)(Me)&&v(null)}),[ke,f,Oe,Me]);var Be=(0,a.useMemo)((function(){return(null===V||void 0===V?void 0:V.length)>=1?(0,U.jsx)($.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFileTree:T,files:V,isFileDisabled:function(){return!1},onClickFile:function(e){v((function(r){if(!r||r!==e){var o;if(!i)null===n||void 0===n||null===(o=n.current)||void 0===o||o.focus();return e}return null}))},ref:e,renderAfterContent:function(e){var n,r,o=e.children,t=(null===o||void 0===o?void 0:o.length)>=1,i=(0,be.a9)(e);t&&(i="".concat(i,"/"));var l={};return null!==ke&&void 0!==ke&&ke[i]?(n="M",r="Modified",l.warning=!0):null!==Me&&void 0!==Me&&Me[i]?(n="U",r="Untracked",l.danger=!0):null!==Oe&&void 0!==Oe&&Oe[i]&&(n="S",r="Staged",l.success=!0),t&&!n?null:(0,U.jsx)(b.Z,{mx:1,children:(0,U.jsx)(w.Z,{appearBefore:!0,label:r,widthFitContent:!0,children:(0,U.jsx)(g.ZP,we(we({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(g.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[i,T,e,V,ke,n,v,Oe,Me]),De=(0,a.useMemo)((function(){return!me||!Pe||f&&(null===Pe||void 0===Pe?void 0:Pe.filename)!==f}),[me,Pe,f]),Fe=(0,a.useMemo)((function(){if(!f)return null;var e=Pe||{},n=e.content,r=e.content_from_base;return(0,U.jsxs)(ve,{children:[!i&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(g.ZP,{muted:!0,children:"Please select a base branch to see the file diffs."})}),(null===Pe||void 0===Pe?void 0:Pe.error)&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(g.ZP,{danger:!0,monospace:!0,preWrap:!0,children:null===Pe||void 0===Pe?void 0:Pe.error})}),i&&!(null!==Pe&&void 0!==Pe&&Pe.error)&&(0,U.jsxs)(U.Fragment,{children:[De&&(0,U.jsx)(b.Z,{p:R.cd,children:(0,U.jsx)(p.Z,{inverted:!0})}),!De&&(0,U.jsx)(d(),{compareMethod:u.DiffMethod.WORDS,newValue:n||"",oldValue:r||"",renderContent:function(e){return(0,U.jsx)(g.ZP,{monospace:!0,children:e})},splitView:!0,styles:je,useDarkTheme:!0})]})]})}),[i,Pe,De,f]),Ee=(0,a.useMemo)((function(){return A&&null!==q&&void 0!==q&&q.name?H:H.slice(0,1)}),[q,A]),Ne=(0,a.useMemo)((function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{style:{marginBottom:.5*R.iI,marginTop:.5*R.iI},children:(0,U.jsx)(z.Z,{compact:!0,onClickTab:function(e){var n=e.uuid;(0,pe.u7)({tab:n})},selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:Ee})}),(0,U.jsx)(m.Z,{light:!0})]})}),[Z,Ee]),He=(0,a.useMemo)((function(){return(0,U.jsx)(fe,{actionRemoteName:ne,branch:q,fetchBranch:function(){T(),Q()},loading:!W,remotes:X,setActionRemoteName:oe,showError:o})}),[ne,q,W,T,Q,X,oe,o]),Re=(0,a.useMemo)((function(){return(0,U.jsx)(G,{actionRemoteName:ne,branch:q,branches:O,fetchBranch:T,fetchBranches:I,remotes:X,setActionRemoteName:oe,showError:o})}),[ne,q,O,T,I,X,oe,o]),Ae=(0,a.useMemo)((function(){return(0,U.jsx)(ce,{branch:q,fetchBranch:T,modifiedFiles:ke,setSelectedFilePath:v,showError:o,stagedFiles:Oe,untrackedFiles:Me})}),[q,T,ke,v,o,Oe,Me]),Te=(0,a.useMemo)((function(){return(0,U.jsx)(Y,{actionRemoteName:ne,branch:q,branches:O,fetchBranch:T,loading:!W,modifiedFiles:ke,remotes:X,repositories:de,repositoryName:le,setActionRemoteName:oe,setRepositoryName:ue,showError:o,stagedFiles:Oe})}),[ne,q,O,W,T,ke,X,de,le,oe,ue,o,Oe]);return(0,U.jsx)(J.Z,{after:Fe,afterHidden:!f,afterWidth:40*R.iI,before:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{p:1,children:(0,U.jsx)(x.Z,{compact:!0,label:"Base branch",onChange:function(e){return l(e.target.value)},ref:n,small:!0,value:i||"",children:null===O||void 0===O?void 0:O.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})}),Be]}),mainContainerHeader:Ne,title:"Version control",uuid:"Version control/index",children:(0,U.jsxs)(b.Z,{p:R.cd,children:[!A&&(0,U.jsx)(p.Z,{inverted:!0}),A&&(0,U.jsxs)(U.Fragment,{children:[N.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&He,D.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Re,F.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Ae,E.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Te]})]})})};function ye(){return(0,U.jsx)(Pe,{})}ye.getInitialProps=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Ce=(0,l.Z)(ye)},75302:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return r(6343)}])}},function(e){e.O(0,[844,9902,7011,7768,1424,1005,7815,6422,3391,6299,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);