(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},30229:function(e,n,i){"use strict";i.d(n,{TR:function(){return d},U5:function(){return c},Xm:function(){return r},Z4:function(){return a},fq:function(){return l},kJ:function(){return s}});var t,o,r,u=i(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(r||(r={}));var l,c,s,a=(t={},(0,u.Z)(t,r.API,(function(){return"API"})),(0,u.Z)(t,r.EVENT,(function(){return"event"})),(0,u.Z)(t,r.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(l||(l={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(c||(c={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var d=(o={},(0,u.Z)(o,s.CREATED_AT,"Created at"),(0,u.Z)(o,s.NAME,"Name"),(0,u.Z)(o,s.PIPELINE,"Pipeline"),(0,u.Z)(o,s.STATUS,"Status"),(0,u.Z)(o,s.TYPE,"Type"),o)},2925:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return ze}});var t=i(77837),o=i(75582),r=i(82394),u=i(38860),l=i.n(u),c=i(12691),s=i.n(c),a=i(82684),d=i(83455),p=i(34376),f=i(52749),h=i(60523),v=i(71180),m=i(31882),b=i(94629),g=i(97618),j=i(55485),x=i(85854),Z=i(93369),C=i(65956),y=i(38276),w=i(30160),k=i(35576),P=i(17488),I=i(28598);var _=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,o=e.minWidth,r=e.noEmptyValue,u=e.onClose,l=e.onSave,c=e.textArea,s=e.title,d=e.value,p=(0,a.useRef)(null),f=(0,a.useState)(d),h=f[0],m=f[1],b=c?k.Z:P.Z;return(0,a.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,I.jsxs)(C.Z,{maxWidth:t,minWidth:o,children:[(0,I.jsx)(w.ZP,{bold:!0,children:s}),(0,I.jsx)(y.Z,{mt:1,children:(0,I.jsx)(b,{monospace:!0,onChange:function(e){return m(e.target.value)},ref:p,rows:c?7:null,value:h})}),n&&(0,I.jsx)(y.Z,{mt:2,children:(0,I.jsx)(w.ZP,{muted:!0,small:!0,children:n})}),(0,I.jsx)(y.Z,{mt:3,children:(0,I.jsxs)(j.ZP,{children:[(0,I.jsx)(Z.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){h===d||r&&!h?u():l(h)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,I.jsx)(y.Z,{ml:1}),(0,I.jsx)(v.Z,{onClick:u,children:"Cancel"})]})})]})},O=i(48670),E=i(57653),T=i(55729),S=i(93808),A=i(4190),M=i(75499),D=i(48381),R=i(69650),B=i(81066),N=i(79757),L=i(50724),G=i(46732),U=i(89515),Y=i(38626),V=i(44897),H=i(42631),z=i(47041),q=i(70515),F=74*q.iI,W=48*q.iI,K=Y.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-18n432u-0"})(["position:absolute;border-radius:","px;overflow:hidden;width:","px;display:none;"," "," "," "," ",""],H.n_,F,(function(e){return"\n    background-color: ".concat((e.theme||V.Z).background.panel,";\n    border: ").concat(H.mP,"px ").concat(H.M8," ").concat((e.theme||V.Z).interactive.defaultBackground,";\n    box-shadow: ").concat((e.theme.shadow||V.Z.shadow).window,";\n  ")}),(function(e){return e.display&&"\n    display: block;\n  "}),(function(e){return e.compact&&"\n    width: ".concat(.75*F,"px;\n  ")}),(function(e){return"undefined"!==typeof e.left&&"\n    left: ".concat(e.left,"px;\n  ")}),(function(e){return"undefined"!==typeof e.top&&"\n    top: ".concat(e.top,"px;\n  ")})),Q=Y.default.div.withConfig({displayName:"indexstyle__MainStyle",componentId:"sc-18n432u-1"})(["display:flex;border-radius:","px;overflow:hidden;height:","px;"," ",""],H.n_,W,(function(e){return"\n    background-color: ".concat((e.theme||V.Z).background.content,";\n    border: ").concat(H.YF,"px ").concat(H.M8," ").concat((e.theme||V.Z).interactive.defaultBackground,";\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(W/2,"px;\n  ")})),$=Y.default.aside.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-18n432u-2"})(["width:100%;overflow:auto;"," ",""],z.w5,(function(e){return"\n    border-right: ".concat(H.YF,"px ").concat(H.M8," ").concat((e.theme||V.Z).background.panel,";\n  ")})),X=Y.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-18n432u-3"})(["width:100%;overflow:auto;",""],z.w5),J=(0,Y.css)(["display:flex;align-items:center;justify-content:space-between;padding:","px ","px;"],q.iI,2*q.iI),ee=Y.default.div.withConfig({displayName:"indexstyle__OptionStyle",componentId:"sc-18n432u-4"})([""," padding-top:","px;padding-bottom:","px;&:hover{cursor:pointer;","}",""],J,1.5*q.iI,1.5*q.iI,(function(e){return"\n      background-color: ".concat((e.theme||V.Z).monotone.black,";\n    ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme||V.Z).monotone.black,";\n  ")})),ne=Y.default.div.withConfig({displayName:"indexstyle__ToggleValueStyle",componentId:"sc-18n432u-5"})([""," ",""],J,(function(e){return"\n    border-bottom: ".concat(H.YF,"px ").concat(H.M8," ").concat((e.theme||V.Z).borders.medium2,";\n  ")})),ie=i(72473),te=i(15610),oe=i(31098);function re(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ue(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?re(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):re(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var le,ce=function(e){var n,i,t,u=e.children,l=e.compact,c=e.onClickCallback,s=e.onClickOutside,d=e.onSecondaryClick,p=e.open,f=e.options,h=void 0===f?{}:f,m=e.parentRef,b=e.query,x=e.setOpen,Z=e.toggleValueMapping,C=(0,a.useState)(null),k=C[0],P=C[1],_=(0,a.useState)(h),O=_[0],E=_[1];(0,a.useEffect)((function(){E(h)}),[h]);var T=((null===m||void 0===m||null===(n=m.current)||void 0===n||null===(i=n.getBoundingClientRect)||void 0===i?void 0:i.call(n))||{}).top,S=void 0===T?0:T,A=Object.keys(h);return(0,I.jsxs)(L.Z,{onClickOutside:s,open:!0,children:[(0,I.jsx)("div",{ref:m,children:u}),(0,I.jsxs)(K,{compact:l,display:p,top:S-5,children:[(0,I.jsxs)(Q,{compact:l,children:[(0,I.jsx)(g.Z,{flex:"1",children:(0,I.jsx)($,{children:A.map((function(e){return(0,I.jsxs)(ee,{highlighted:k===e,onMouseEnter:function(){return P(e)},children:[(0,I.jsx)(w.ZP,{children:(0,oe.kC)(e)}),(0,I.jsx)(ie._Q,{})]},e)}))})}),(0,I.jsx)(g.Z,{flex:"2",children:(0,I.jsx)(X,{children:k&&Object.entries((null===(t=O||h)||void 0===t?void 0:t[k])||{}).map((function(e){var n,i=(0,o.Z)(e,2),t=i[0],u=i[1];return(0,I.jsxs)(ne,{children:[(0,I.jsx)(w.ZP,{children:(null===Z||void 0===Z||null===(n=Z[k])||void 0===n?void 0:n[t])||(0,oe.J3)((0,oe.kC)(t))}),(0,I.jsx)(R.Z,{checked:u,onCheck:function(){return E((function(e){return ue(ue({},e),{},(0,r.Z)({},k,ue(ue({},null===e||void 0===e?void 0:e[k]),{},(0,r.Z)({},t,!u))))}))}})]},t)}))})})]}),(0,I.jsx)(y.Z,{m:1,children:(0,I.jsxs)(j.ZP,{children:[(0,I.jsx)(v.Z,{onClick:function(){var e=Object.entries(O).reduce((function(e,n){var i=(0,o.Z)(n,2),t=i[0],r=i[1],u=[];return Object.entries(r).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0];return n[1]&&u.push(i)})),e[t]=u,e}),{});null===c||void 0===c||c(b,e),(0,te.g_)(b,e,{addingMultipleValues:!0,pushHistory:!0})},secondary:!0,children:"Apply"}),(0,I.jsx)(y.Z,{mr:1}),(0,I.jsx)(v.Z,{noBackground:!0,onClick:function(){x(!1),null===d||void 0===d||d()},children:"Defaults"})]})})]})]})},se=i(12468),ae="".concat(1.5*q.iI,"px"),de=40*q.iI;!function(e){e[e.SECONDARY=1]="SECONDARY",e[e.DELETE=2]="DELETE"}(le||(le={}));var pe={autoHide:!0,size:null,widthFitContent:!0},fe=i(42122),he=i(50178),ve=i(53808),me="pipeline_list_filters",be="pipeline_list_group_bys",ge="pipeline_list_sort_column_index",je="pipeline_list_sort_direction";function xe(e){return(0,ve.t8)(me,e),e}function Ze(e){return(0,ve.t8)(be,e),e}function Ce(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ye(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ce(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var we=function(e){var n=e.addButtonProps,i=e.deleteRowProps,t=e.filterOptions,r=void 0===t?{}:t,u=e.filterValueLabelMapping,l=e.groupButtonProps,c=e.moreActionsMenuItems,s=e.onFilterApply,d=e.query,f=void 0===d?{}:d,h=e.searchProps,v=e.secondaryActionButtonProps,m=e.selectedRowId,b=e.setSelectedRow,x=(0,he.Ct)(),C=(0,p.useRouter)(),k=(0,a.useRef)(null),_=(0,a.useRef)(null),O=(0,a.useRef)(null),E=(0,a.useRef)(null),T=(0,a.useRef)(null),S=(0,a.useState)(!1),A=S[0],M=S[1],D=(0,a.useState)(!1),R=D[0],Y=D[1],V=(0,a.useState)(!1),z=V[0],F=V[1],W=(0,a.useState)(!1),K=W[0],Q=W[1],$=(0,a.useState)(null),X=$[0],J=$[1],ee=!m,ne=(0,a.useCallback)((function(){return M(!1)}),[]),te=(0,a.useCallback)((function(){return Y(!1)}),[]),oe=(0,a.useCallback)((function(){return F(!1)}),[]),re=(0,a.useCallback)((function(){return Q(null)}),[]),ue=(0,a.useCallback)((function(){return J(null)}),[]),ve=v||{},me=ve.Icon,be=ve.confirmationDescription,ge=ve.confirmationMessage,je=ve.isLoading,Ze=ve.label,Ce=ve.onClick,we=ve.openConfirmationDialogue,ke=ve.tooltip,Pe=i||{},Ie=Pe.confirmationMessage,_e=Pe.isLoading,Oe=Pe.item,Ee=Pe.onDelete,Te=h||{},Se=Te.placeholder,Ae=Te.onChange,Me=Te.value,De=(0,a.useMemo)((function(){return Object.entries(r).reduce((function(e,n){var i=(0,o.Z)(n,2),t=i[0],r=i[1];return e[t]={},r.forEach((function(n){var i,o=(null===(i=f["".concat(t,"[]")])||void 0===i?void 0:i.includes(n))||!1;e[t][n]=o})),e}),{})}),[r,f]),Re=n||{},Be=Re.label,Ne=Re.menuItems,Le=Re.isLoading,Ge=(0,a.useMemo)((function(){return(0,I.jsx)(B.Z,{addButtonMenuOpen:A,addButtonMenuRef:k,isLoading:Le,label:Be,menuItems:Ne,onClick:function(){return M((function(e){return!e}))},onClickCallback:ne})}),[Be,Ne,A,ne,Le]),Ue=(0,a.useMemo)((function(){return(0,fe.dw)(De)}),[De]),Ye=(0,a.useMemo)((function(){return(0,I.jsx)(ce,{compact:!0,onClickCallback:function(e,n){s&&(null===s||void 0===s||s(e,n)),te&&(null===te||void 0===te||te())},onClickOutside:te,onSecondaryClick:function(){xe({}),C.push("/pipelines")},open:R,options:De,parentRef:_,query:f,setOpen:Y,toggleValueMapping:u,children:(0,I.jsx)(Z.ZP,ye(ye({},B.B),{},{afterElement:Ue>0?(0,I.jsx)(N.Z,{cyan:!0,noVerticalPadding:!0,children:(0,I.jsx)(w.ZP,{bold:!0,inverted:!0,children:Ue})}):null,beforeElement:(0,I.jsx)(ie.wn,{size:2*q.iI}),onClick:function(){return Y((function(e){return!e}))},uuid:"Table/Toolbar/FilterButton",children:"Filter"}))})}),[te,R,De,u,Ue,s,f,C]),Ve=l||{},He=Ve.groupByLabel,ze=Ve.menuItems,qe=(0,a.useMemo)((function(){return(0,I.jsx)(G.Z,{disableKeyboardShortcuts:!0,items:ze,onClickCallback:oe,onClickOutside:oe,open:z,parentRef:O,roundedStyle:!0,topOffset:1,uuid:"Table/Toolbar/GroupMenu",children:(0,I.jsx)(Z.ZP,ye(ye({},B.B),{},{beforeElement:(0,I.jsx)(ie.ZA,{size:2.5*q.iI}),onClick:function(){F((function(e){return!e}))},uuid:"Table/Toolbar/GroupButton",children:He?"Grouped by ".concat(He):"Group"}))})}),[oe,z,He,ze]),Fe=(0,a.useMemo)((function(){return(0,I.jsx)(G.Z,{disableKeyboardShortcuts:!0,items:c,onClickCallback:re,onClickOutside:re,open:K,parentRef:E,roundedStyle:!0,topOffset:1,uuid:"Table/Toolbar/MoreActionsMenu",children:(0,I.jsx)(se.Z,ye(ye({},pe),{},{label:"More actions",children:(0,I.jsx)(Z.ZP,{Icon:ie.mH,bold:!0,disabled:ee,greyBorder:!0,onClick:function(){return Q((function(e){return!e}))},smallIcon:!0,uuid:"Table/Toolbar/MoreActionsButton"})}))})}),[re,ee,K,c]);return(0,I.jsxs)(j.ZP,{alignItems:"center",children:[Ge,(0,I.jsx)(y.Z,{mr:ae}),Ye,(null===ze||void 0===ze?void 0:ze.length)>0&&(0,I.jsx)(y.Z,{ml:ae,children:qe}),!x&&Ce&&(0,I.jsxs)(y.Z,{ml:ae,children:[(0,I.jsx)(se.Z,ye(ye({},pe),{},{label:ke,children:(0,I.jsx)(Z.ZP,{Icon:!je&&me,bold:!0,disabled:ee,greyBorder:!0,loading:je,onClick:we?function(){return J(le.SECONDARY)}:Ce,smallIcon:!0,uuid:"Table/Toolbar/SecondaryActionButton",children:Ze})})),(0,I.jsx)(L.Z,{onClickOutside:ue,open:X===le.SECONDARY,children:(0,I.jsx)(U.Z,{onCancel:ue,onClick:function(){Ce(),ue(),b(null)},subtitle:be,title:ge,top:58,width:de})})]}),!x&&Ee&&(0,I.jsxs)(y.Z,{ml:ae,children:[(0,I.jsx)(se.Z,ye(ye({},pe),{},{label:"Delete ".concat(Oe),children:(0,I.jsx)(Z.ZP,{Icon:!_e&&ie.rF,bold:!0,disabled:ee,greyBorder:!0,loading:_e,onClick:function(){return J(le.DELETE)},smallIcon:!0,uuid:"Table/Toolbar/DeleteButton"})})),(0,I.jsx)(L.Z,{onClickOutside:ue,open:X===le.DELETE,children:(0,I.jsx)(U.Z,{danger:!0,onCancel:ue,onClick:function(){Ee(m),ue(),b(null)},subtitle:Ie,title:"Are you sure you want to delete the ".concat(Oe," ").concat(m,"?"),top:58,width:de})})]}),!x&&(null===c||void 0===c?void 0:c.length)>0&&(0,I.jsx)(y.Z,{ml:ae,children:Fe}),Ae&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(y.Z,{ml:ae}),(0,I.jsx)(g.Z,{flex:1,children:(0,I.jsx)(P.Z,{afterIcon:Me?(0,I.jsx)(ie.x8,{}):null,afterIconClick:function(){var e;Ae(""),null===T||void 0===T||null===(e=T.current)||void 0===e||e.focus()},afterIconSize:1.5*q.iI,beforeIcon:(0,I.jsx)(ie.HN,{}),borderRadius:H.n_,defaultColor:!0,fullWidth:!0,greyBorder:!0,maxWidth:60*q.iI,onChange:function(e){return Ae(e.target.value)},paddingVertical:9,placeholder:Se||null,ref:T,value:Me})})]})]})},ke=i(35686),Pe=i(44425),Ie=i(23780),_e=i(8666),Oe=i(46684),Ee=i(32929),Te=i(44898),Se=i(30229),Ae=i(81655),Me=i(31608),De=i(72619),Re=i(69419),Be=i(65458),Ne=i(86735),Le=i(3314),Ge=i(89538);function Ue(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ye(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ue(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ue(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ve={borderRadius:H.BG,iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function He(){var e=(0,p.useRouter)(),n=(0,a.useRef)(null),i=(0,a.useState)(null),t=i[0],u=i[1],l=(0,a.useState)(null),c=l[0],Z=l[1],k=(0,a.useState)(null),P=k[0],S=k[1],B=(0,a.useState)({}),N=B[0],L=B[1],G=(0,a.useState)(null),U=G[0],Y=G[1],H=(0,Re.iV)(),z=(0,Re.DQ)(H,[E.$1.STATUS,E.$1.TAG,E.$1.TYPE]),F=ke.ZP.pipelines.list(Ye(Ye({},z),{},{include_schedules:1})),W=F.data,K=F.mutate,Q=(0,a.useMemo)((function(){var e=(null===W||void 0===W?void 0:W.pipelines)||[];if(P){var n=P.toLowerCase();e=e.filter((function(e){var i=e.name,t=e.description,o=e.uuid;return(null===i||void 0===i?void 0:i.toLowerCase().includes(n))||(null===o||void 0===o?void 0:o.toLowerCase().includes(n))||(null===t||void 0===t?void 0:t.toLowerCase().includes(n))}))}return e}),[null===W||void 0===W?void 0:W.pipelines,P]),$=(0,a.useMemo)((function(){return(0,Ne.HK)(Q,(function(e){return e.uuid}))}),[Q]),X=(0,a.useCallback)((function(e){var n,i,t,o;return null===e||void 0===e||null===(n=e[2])||void 0===n||null===(i=n.props)||void 0===i||null===(t=i.children)||void 0===t||null===(o=t.props)||void 0===o?void 0:o.children}),[]),J=(0,a.useMemo)((function(){return(null===c||void 0===c?void 0:c.length)>0?null===c||void 0===c?void 0:c.map((function(e){var n=X(e);return null===$||void 0===$?void 0:$[n]})):Q}),[X,c,Q,$]),ee=(0,a.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),ne=ke.ZP.projects.list(),re=ne.data,ue=ne.mutate,le=(0,a.useMemo)((function(){var e;return null===re||void 0===re||null===(e=re.projects)||void 0===e?void 0:e[0]}),[re]),ce=null===H||void 0===H?void 0:H[Ae.lG.SORT_COL_IDX],se=null===H||void 0===H?void 0:H[Ae.lG.SORT_DIRECTION],ae=(0,a.useMemo)((function(){return ce?{columnIndex:+ce,sortDirection:se||Ae.sh.ASC}:void 0}),[ce,se]),de=null===H||void 0===H?void 0:H[E.$1.GROUP];(0,a.useEffect)((function(){var e={};if(ce&&ee.includes(+ce))(0,ve.t8)(ge,ce),se&&(0,ve.t8)(je,se);else{var n=(0,ve.U2)(ge,null),i=(0,ve.U2)(je,Ae.sh.ASC);null!==n&&(e[Ae.lG.SORT_COL_IDX]=n,e[Ae.lG.SORT_DIRECTION]=i)}if(de)Ze((0,r.Z)({},de,!0));else{var t,u=(0,ve.U2)(be,{});u&&Object.entries(u).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],r=n[1];!t&&r&&(t=i)})),t&&(e[E.$1.GROUP]=t)}if((0,fe.Qr)(z)){var l={},c=(0,ve.U2)(me,{});c&&Object.entries(c).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];l[i]=[],Object.entries(t).forEach((function(e){var n=(0,o.Z)(e,2),t=n[0];n[1]&&l[i].push(t)}))})),(0,fe.Qr)(l)||(e=Ye(Ye({},e),l))}else{var s={};Object.entries(z).forEach((function(e){var n=(0,o.Z)(e,2),i=n[0],t=n[1];s[i]={};var r,u=t;(Array.isArray(u)||(u=[u]),u&&Array.isArray(u))&&(null===(r=u)||void 0===r||r.forEach((function(e){s[i][e]=!0})))})),xe(s)}(0,fe.Qr)(e)||(0,te.u7)(e,{pushHistory:!1})}),[de,z,ee,ce,se]),(0,a.useEffect)((function(){(0,De.bB)(W,Y)}),[W]);var pe=function(e){return(0,d.Db)(ke.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,De.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return Y({errors:n,response:e})}})}})},he=pe((function(n){return e.push("/pipelines/[pipeline]/edit","/pipelines/".concat(n,"/edit"))})),Ce=(0,o.Z)(he,2),ye=Ce[0],Ue=Ce[1].isLoading,He=pe((function(){return null===K||void 0===K?void 0:K()})),ze=(0,o.Z)(He,2),qe=ze[0],Fe=ze[1].isLoading,We=(0,d.Db)((function(e){return ke.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,De.wD)(e,{callback:function(e){var n=e.pipeline.uuid;L((function(e){return Ye(Ye({},e),{},(0,r.Z)({},n,!1))})),K(),null===un||void 0===un||un(),u(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;L((function(e){return Ye(Ye({},e),{},(0,r.Z)({},t,!1))})),Y({errors:n,response:e})}})}}),Ke=(0,o.Z)(We,2),Qe=Ke[0],$e=Ke[1].isLoading,Xe=(0,d.Db)((function(e){return ke.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,De.wD)(e,{callback:function(){null===K||void 0===K||K()},onErrorCallback:function(e,n){return Y({errors:n,response:e})}})}}),Je=(0,o.Z)(Xe,2),en=Je[0],nn=Je[1].isLoading,tn=(0,Ge.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,o=e.pipelineName;return(0,I.jsx)(_,{isLoading:$e,minWidth:55*q.iI,noEmptyValue:!!o,onClose:un,onSave:function(e){var i=n||t;if(i){var u=i.uuid,l={uuid:u};o?l.name=e:l.description=e,L((function(e){return Ye(Ye({},e),{},(0,r.Z)({},u,!0))})),Qe(l)}},textArea:!o,title:o?"Rename pipeline":"Edit description",value:o||i})}),{},[$e,t],{background:!0,uuid:"rename_pipeline_and_save"}),on=(0,o.Z)(tn,2),rn=on[0],un=on[1],ln=(0,Ge.dd)((function(){return(0,I.jsx)(Ie.BC,{children:(0,I.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){ye({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,oe.Y6)()}}).then((function(){an()}))},showBreadcrumbs:!0,tabs:[Ee.A2]})})}),{},[ye],{background:!0,uuid:"browse_templates"}),cn=(0,o.Z)(ln,2),sn=cn[0],an=cn[1],dn=(0,Ge.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,I.jsx)(Ie.BC,{children:(0,I.jsx)(T.Z,{cancelButtonText:n,contained:!0,header:(0,I.jsx)(y.Z,{mb:q.HN,children:(0,I.jsxs)(C.Z,{children:[(0,I.jsx)(w.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,I.jsx)(y.Z,{mt:1,children:(0,I.jsxs)(w.ZP,{warning:!0,children:["Read ",(0,I.jsx)(O.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),hn()},onSaveSuccess:function(e){ue(),hn(),null===t||void 0===t||t(e)}})})}),{},[ue],{background:!0,uuid:"configure_project"}),pn=(0,o.Z)(dn,2),fn=pn[0],hn=pn[1],vn=(0,Ge.dd)((function(){return(0,I.jsx)(Ie.BC,{children:(0,I.jsx)(f.Z,{createPipeline:ye,isLoading:Ue,onClose:gn})})}),{},[ye,Ue],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),mn=(0,o.Z)(vn,2),bn=mn[0],gn=mn[1],jn=(0,a.useMemo)((function(){return(0,Be.d)(ye,{showAIModal:function(){null!==le&&void 0!==le&&le.openai_api_key?bn():fn({onSaveSuccess:function(){bn()}})},showBrowseTemplates:sn})}),[ye,le,bn,sn,fn]),xn=ke.ZP.tags.list().data,Zn=(0,a.useMemo)((function(){return(0,Ne.YC)((null===xn||void 0===xn?void 0:xn.tags)||[],(function(e){return e.uuid}))}),[xn]),Cn=(0,a.useMemo)((function(){return(0,I.jsx)(we,{addButtonProps:{isLoading:Ue,label:"New",menuItems:jn},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:nn,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"))&&en(null===t||void 0===t?void 0:t.uuid)}},filterOptions:{status:Object.values(E.QK),tag:Zn.map((function(e){return e.uuid})),type:Object.values(E.qL)},filterValueLabelMapping:{tag:Zn.reduce((function(e,n){var i=n.uuid;return Ye(Ye({},e),{},(0,r.Z)({},i,i))}),{}),type:E.G7},groupButtonProps:{groupByLabel:de,menuItems:[{beforeIcon:de===E.r0.STATUS?(0,I.jsx)(ie.Jr,{fill:V.Z.content.default,size:1.5*q.iI}):(0,I.jsx)(ie.Cd,{muted:!0,size:1.5*q.iI}),label:function(){return(0,oe.kC)(E.r0.STATUS)},onClick:function(){var e=de===E.r0.STATUS?null:E.r0.STATUS;e||Ze({}),(0,te.u7)((0,r.Z)({},E.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:de===E.r0.TAG?(0,I.jsx)(ie.Jr,{fill:V.Z.content.default,size:1.5*q.iI}):(0,I.jsx)(ie.Cd,{muted:!0,size:1.5*q.iI}),label:function(){return(0,oe.kC)(E.r0.TAG)},onClick:function(){var e=de===E.r0.TAG?null:E.r0.TAG;e||Ze({}),(0,te.u7)((0,r.Z)({},E.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:de===E.r0.TYPE?(0,I.jsx)(ie.Jr,{fill:V.Z.content.default,size:1.5*q.iI}):(0,I.jsx)(ie.Cd,{muted:!0,size:1.5*q.iI}),label:function(){return(0,oe.kC)(E.r0.TYPE)},onClick:function(){var e=de===E.r0.TYPE?null:E.r0.TYPE;e||Ze({}),(0,te.u7)((0,r.Z)({},E.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return rn({pipelineName:null===t||void 0===t?void 0:t.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return rn({pipelineDescription:null===t||void 0===t?void 0:t.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&xe({})},query:z,searchProps:{onChange:S,value:P},secondaryActionButtonProps:{Icon:ie.oX,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"),isLoading:Fe,onClick:function(){return qe({pipeline:{clone_pipeline_uuid:null===t||void 0===t?void 0:t.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},selectedRowId:null===t||void 0===t?void 0:t.uuid,setSelectedRow:u})}),[qe,en,de,Fe,Ue,nn,jn,z,P,null===t||void 0===t?void 0:t.description,null===t||void 0===t?void 0:t.name,null===t||void 0===t?void 0:t.uuid,rn,Zn]),yn=(0,Ie.VI)(null,{},[],{uuid:"pipelines/list"}),wn=(0,o.Z)(yn,1)[0],kn=(0,d.Db)(ke.ZP.projects.useUpdate(null===le||void 0===le?void 0:le.name),{onSuccess:function(e){return(0,De.wD)(e,{callback:function(){ue()},onErrorCallback:function(e,n){return wn({errors:n,response:e})}})}}),Pn=(0,o.Z)(kn,2),In=Pn[0],_n=Pn[1].isLoading,On=(0,a.useCallback)((function(e){return In({project:e})}),[In]),En=(0,Ge.dd)((function(){return(0,I.jsxs)(C.Z,{maxWidth:60*q.iI,children:[(0,I.jsx)(y.Z,{mb:1,children:(0,I.jsx)(x.Z,{children:"Help improve Mage"})}),(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsx)(w.ZP,{default:!0,children:"Please contribute usage statistics to help improve the developer experience for you and everyone in the community \ud83e\udd1d."})}),(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsx)(C.Z,{success:!0,children:(0,I.jsxs)(j.ZP,{alignItems:"center",children:[(0,I.jsx)(ie.Yo,{size:5*q.iI,success:!0}),(0,I.jsx)(y.Z,{mr:1}),(0,I.jsx)(g.Z,{children:(0,I.jsx)(w.ZP,{children:"All usage statistics are completely anonymous. It\u2019s impossible for Mage to know which statistics belongs to whom."})})]})})}),(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsxs)(w.ZP,{default:!0,children:["By opting into sending usage statistics to ",(0,I.jsx)(O.Z,{href:"https://www.mage.ai",openNewWindow:!0,children:"Mage"}),", it\u2019ll help the team and community of contributors (",(0,I.jsx)(O.Z,{href:"https://www.mage.ai/chat",openNewWindow:!0,children:"Magers"}),") learn what\u2019s going wrong with the tool and what improvements can be made."]})}),(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsx)(w.ZP,{default:!0,children:"In addition to helping reduce potential errors, you\u2019ll help inform which features are useful and which need work."})}),(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(w.ZP,{bold:!0,children:"I want to help make Mage more powerful for everyone"}),(0,I.jsx)(y.Z,{mr:q.cd}),(0,I.jsx)(R.Z,{checked:!0,onCheck:function(){window.confirm("Are you sure you don\u2019t want to help everyone in the community?")&&On({help_improve_mage:!1}).then((function(){return An()}))}})]})}),_n&&(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsx)(A.Z,{inverted:!0})}),(0,I.jsx)(y.Z,{mb:q.cd,children:(0,I.jsxs)(w.ZP,{muted:!0,small:!0,children:["To learn more about how this works, please check out the ",(0,I.jsx)(O.Z,{href:"https://docs.mage.ai/contributing/statistics/overview",openNewWindow:!0,small:!0,children:"documentation"}),"."]})}),(0,I.jsx)(v.Z,{onClick:function(){return On({help_improve_mage:!0}).then((function(){return An()}))},secondary:!0,children:"Close"})]})}),{},[le],{background:!0,hideCallback:function(){On({help_improve_mage:!0})},uuid:"help_mage"}),Tn=(0,o.Z)(En,2),Sn=Tn[0],An=Tn[1];(0,a.useEffect)((function(){le&&null===(null===le||void 0===le?void 0:le.help_improve_mage)&&Sn()}),[le,Sn]);var Mn=(0,a.useMemo)((function(){var e={};null===J||void 0===J||J.forEach((function(n,i){var t=null===n||void 0===n?void 0:n[de];if(E.r0.STATUS===de){var o=n.schedules,r=void 0===o?[]:o,u=r.length;t=r.find((function(e){var n=e.status;return Se.fq.ACTIVE===n}))?E.QK.ACTIVE:u>=1?E.QK.INACTIVE:E.QK.NO_SCHEDULES}else if(E.r0.TAG===de){t=(null===n||void 0===n?void 0:n.tags)?(0,Ne.YC)(n.tags,(function(e){return e})).join(", "):""}e[t]||(e[t]=[]),e[t].push(i)}));var n=[],i=[];return E.r0.STATUS===de?Object.values(E.QK).forEach((function(t){n.push(e[t]),i.push((0,oe.vg)(t))})):E.r0.TAG===de?(0,Ne.YC)(Object.keys(e),(function(e){return e})).forEach((function(t){n.push(e[t]),t?i.push(t.split(", ").map((function(e,n){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,I.jsx)(m.Z,{small:!0,children:(0,I.jsx)(w.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):i.push("No tags")})):E.r0.TYPE===de&&Object.values(E.qL).forEach((function(t){n.push(e[t]),i.push(E.G7[t])})),{rowGroupHeaders:i,rowsGroupedByIndex:n}}),[de,J]),Dn=Mn.rowGroupHeaders,Rn=Mn.rowsGroupedByIndex;return(0,I.jsx)(b.Z,{errors:U,setErrors:Y,subheaderChildren:Cn,title:"Pipelines",uuid:"pipelines/index",children:0===(null===Q||void 0===Q?void 0:Q.length)?(0,I.jsx)(y.Z,{px:3,py:1,children:W?(0,I.jsx)(w.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,I.jsx)(A.Z,{inverted:!0,large:!0})}):(0,I.jsx)(Me.cl,{includePadding:!!de,maxHeight:"calc(100vh - ".concat(Oe.Mz+74,"px)"),children:(0,I.jsx)(M.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,oe.kC)(E.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,oe.kC)(E.r0.TYPE)},{uuid:"Updated at"},{uuid:"Created at"},{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],defaultSortColumnIndex:2,getUniqueRowIdentifier:X,isSelectedRow:function(e){var n;return(null===(n=J[e])||void 0===n?void 0:n.uuid)===(null===t||void 0===t?void 0:t.uuid)},localStorageKeySortColIdx:ge,localStorageKeySortDirection:je,onClickRow:function(e){return u((function(n){var i=J[e];return(null===n||void 0===n?void 0:n.uuid)!==(null===i||void 0===i?void 0:i.uuid)?i:null}))},onDoubleClickRow:function(n){e.push("/pipelines/[pipeline]/edit","/pipelines/".concat(J[n].uuid,"/edit"))},ref:n,renderRightClickMenuItems:function(n){var i=J[n];return[{label:function(){return"Edit description"},onClick:function(){return rn({pipeline:i,pipelineDescription:null===i||void 0===i?void 0:i.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return rn({pipeline:i,pipelineName:null===i||void 0===i?void 0:i.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return qe({pipeline:{clone_pipeline_uuid:null===i||void 0===i?void 0:i.uuid}})},uuid:"clone"},{label:function(){return"Add/Remove tags"},onClick:function(){e.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===i||void 0===i?void 0:i.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){e.push("/templates?object_type=".concat(Te.R,"&new=1&pipeline_uuid=").concat(null===i||void 0===i?void 0:i.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){e.push("/global-data-products?object_type=".concat(_e.b.PIPELINE,"&new=1&object_uuid=").concat(null===i||void 0===i?void 0:i.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===i||void 0===i?void 0:i.uuid,"?"))&&en(null===i||void 0===i?void 0:i.uuid)},uuid:"delete"}]},rightClickMenuWidth:25*q.iI,rowGroupHeaders:Dn,rows:Q.map((function(n,i){var t=n.blocks,o=n.created_at,u=n.description,l=n.schedules,c=n.tags,a=n.type,d=n.updated_at,p=n.uuid,f=t.filter((function(e){var n=e.type;return Pe.tf.SCRATCHPAD!==n})).length,h=l.length,m=l.find((function(e){var n=e.status;return Se.fq.ACTIVE===n})),b=(0,I.jsx)("div",{children:(0,I.jsx)(D.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[h>=1||N[p]?(0,I.jsx)(v.Z,{iconOnly:!0,loading:!!N[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(e){(0,Le.j)(e),L((function(e){return Ye(Ye({},e),{},(0,r.Z)({},p,!0))})),Qe(Ye(Ye({},n),{},{status:m?Se.fq.INACTIVE:Se.fq.ACTIVE}))},children:m?(0,I.jsx)(ie.dz,{muted:!0,size:2*q.iI}):(0,I.jsx)(ie.Py,{default:!0,size:2*q.iI})}):null,(0,I.jsx)(w.ZP,{default:!m,monospace:!0,success:!!m,children:m?Se.fq.ACTIVE:h>=1?Se.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,I.jsx)(s(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,I.jsx)(O.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,I.jsx)(w.ZP,{default:!0,title:u,width:90*q.iI,children:u},"pipeline_description_".concat(i)),(0,I.jsx)(w.ZP,{children:E.G7[a]},"pipeline_type_".concat(i)),(0,I.jsx)(w.ZP,{monospace:!0,small:!0,title:d,children:d?d.slice(0,-3):(0,I.jsx)(I.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(i)),(0,I.jsx)(w.ZP,{monospace:!0,small:!0,title:o,children:o?o.slice(0,16):(0,I.jsx)(I.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(i)),b,(0,I.jsx)(w.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,I.jsx)(w.ZP,{default:0===h,monospace:!0,children:h},"pipeline_trigger_count_".concat(i)),(0,I.jsxs)(g.Z,{flex:1,justifyContent:"flex-end",children:[(0,I.jsx)(v.Z,Ye(Ye({},Ve),{},{onClick:function(){e.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,I.jsx)(ie.UY,{default:!0,size:2*q.iI})})),(0,I.jsx)(y.Z,{mr:1}),(0,I.jsx)(v.Z,Ye(Ye({},Ve),{},{onClick:function(){e.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,I.jsx)(ie.$B,{default:!0,size:2*q.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:Rn,setRowsSorted:Z,sortableColumnIndexes:ee,sortedColumn:ae,stickyHeader:!0})})})}He.getInitialProps=(0,t.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var ze=(0,S.Z)(He)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(2925)}])}},function(e){e.O(0,[844,9902,426,5264,8789,4259,9055,9696,8264,5499,5347,7586,5810,1543,9264,523,6987,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);