(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{94629:function(e,n,r){"use strict";r.d(n,{Z:function(){return y}});var t=r(82394),o=r(21831),i=r(82684),l=r(50724),c=r(82555),s=r(97618),d=r(70613),a=r(31557),u=r(68899),h=r(28598);function f(e,n){var r=e.children,t=e.noPadding;return(0,h.jsx)(u.HS,{noPadding:t,ref:n,children:r})}var m=i.forwardRef(f),v=r(62547),x=r(82571),g=r(98464),b=r(77417),p=r(46684),j=r(70515),Z=r(53808),C=r(19183);function w(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function _(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?w(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function P(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var r=e.after,t=e.afterHeader,f=e.afterHidden,w=e.afterWidth,P=e.afterWidthOverride,y=e.appendBreadcrumbs,k=e.before,I=e.beforeWidth,S=e.breadcrumbs,O=e.children,E=e.contained,H=e.errors,M=e.headerMenuItems,B=e.headerOffset,T=e.hideAfterCompletely,A=e.mainContainerHeader,N=e.navigationItems,D=e.setAfterHidden,R=e.setErrors,V=e.subheaderChildren,L=e.subheaderNoPadding,F=e.title,U=e.uuid,G=(0,C.i)().width,W="dashboard_after_width_".concat(U),q="dashboard_before_width_".concat(U),z=(0,i.useRef)(null),K=(0,i.useState)(P?w:(0,Z.U2)(W,w)),Q=K[0],X=K[1],Y=(0,i.useState)(!1),J=Y[0],$=Y[1],ee=(0,i.useState)(k?Math.max((0,Z.U2)(q,I),13*j.iI):null),ne=ee[0],re=ee[1],te=(0,i.useState)(!1),oe=te[0],ie=te[1],le=(0,i.useState)(null)[1],ce=(0,b.Z)().project,se=[];S&&se.push.apply(se,(0,o.Z)(S)),null!==S&&void 0!==S&&S.length&&!y||!ce||null!==S&&void 0!==S&&S.length||se.unshift({bold:!y,label:function(){return F}}),(0,i.useEffect)((function(){null===z||void 0===z||!z.current||J||oe||null===le||void 0===le||le(z.current.getBoundingClientRect().width)}),[J,Q,oe,ne,z,le,G]),(0,i.useEffect)((function(){J||(0,Z.t8)(W,Q)}),[f,J,Q,W]),(0,i.useEffect)((function(){oe||(0,Z.t8)(q,ne)}),[oe,ne,q]);var de=(0,g.Z)(w);return(0,i.useEffect)((function(){P&&de!==w&&X(w)}),[P,w,de]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Z,{title:F}),(0,h.jsx)(a.Z,{breadcrumbs:se,menuItems:M}),(0,h.jsxs)(u.Nk,{ref:n,children:[0!==(null===N||void 0===N?void 0:N.length)&&(0,h.jsx)(u.lm,{showMore:!0,children:(0,h.jsx)(x.Z,{navigationItems:N,showMore:!0})}),(0,h.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,h.jsxs)(v.Z,{after:r,afterHeader:t,afterHeightOffset:p.Mz,afterHidden:f,afterMousedownActive:J,afterWidth:Q,before:k,beforeHeightOffset:p.Mz,beforeMousedownActive:oe,beforeWidth:u.k1+(k?ne:0),contained:E,headerOffset:B,hideAfterCompletely:!D||T,leftOffset:k?u.k1:null,mainContainerHeader:A,mainContainerRef:z,setAfterHidden:D,setAfterMousedownActive:$,setAfterWidth:X,setBeforeMousedownActive:ie,setBeforeWidth:re,children:[V&&(0,h.jsx)(m,{noPadding:L,children:V}),O]})})]}),H&&(0,h.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===R||void 0===R?void 0:R(null)},children:(0,h.jsx)(c.Z,_(_({},H),{},{onClose:function(){return null===R||void 0===R?void 0:R(null)}}))})]})}var y=i.forwardRef(P)},85385:function(e,n,r){"use strict";r.d(n,{Qq:function(){return m},Z7:function(){return v},cH:function(){return o},du:function(){return h},fp:function(){return u},j5:function(){return f},uM:function(){return a}});var t,o,i=r(82394),l=r(57653),c=r(82359),s=r(72473),d=r(86735),a="sideview",u=90;!function(e){e.ADDON_BLOCKS="addon_blocks",e.BLOCK_SETTINGS="block_settings",e.CALLBACKS="callbacks",e.CHARTS="charts",e.DATA="data",e.EXTENSIONS="power_ups",e.FILES="files",e.FILE_VERSIONS="file_versions",e.GRAPHS="graphs",e.INTERACTIONS="interactions",e.REPORTS="reports",e.SECRETS="secrets",e.SETTINGS="settings",e.TERMINAL="terminal",e.TREE="tree",e.VARIABLES="variables"}(o||(o={}));o.BLOCK_SETTINGS,o.CALLBACKS,o.CHARTS,o.DATA,o.EXTENSIONS,o.TREE;var h=[o.DATA];function f(e){var n,r,t,i=[{key:o.TREE,label:"Tree"},{buildLabel:function(e){var n=(e.pipeline||{}).widgets,r=void 0===n?[]:n;return(null===r||void 0===r?void 0:r.length)>=1?"Charts (".concat(r.length,")"):"Charts"},key:o.CHARTS},{buildLabel:function(e){var n=e.variables;return(null===n||void 0===n?void 0:n.length)>=1?"Variables (".concat(n.length,")"):"Variables"},key:o.VARIABLES},{buildLabel:function(e){var n=e.secrets;return(null===n||void 0===n?void 0:n.length)>=1?"Secrets (".concat(n.length,")"):"Secrets"},key:o.SECRETS}];return l.qL.PYSPARK!==(null===e||void 0===e||null===(n=e.pipeline)||void 0===n?void 0:n.type)&&i.push.apply(i,[{buildLabel:function(e){e.pipeline;return"Add-on blocks"},key:o.ADDON_BLOCKS},{buildLabel:function(e){var n=(e.pipeline||{}).extensions,r=void 0===n?{}:n,t=0;return Object.values(r).forEach((function(e){var n=e.blocks;t+=(null===n||void 0===n?void 0:n.length)||0})),t>=1?"Power ups (".concat(t,")"):"Power ups"},key:o.EXTENSIONS}]),i.push.apply(i,[{key:o.DATA,label:"Data"},{key:o.TERMINAL,label:"Terminal"},{key:o.BLOCK_SETTINGS,label:"Block settings"}]),null!==e&&void 0!==e&&null!==(r=e.project)&&void 0!==r&&null!==(t=r.features)&&void 0!==t&&t[c.d.INTERACTIONS]&&i.push({key:o.INTERACTIONS,label:"Interactions"}),i}function m(e){return(0,d.HK)(f(e),(function(e){return e.key}))}var v=(t={},(0,i.Z)(t,o.ADDON_BLOCKS,s.EJ),(0,i.Z)(t,o.BLOCK_SETTINGS,s.JG),(0,i.Z)(t,o.CALLBACKS,s.AQ),(0,i.Z)(t,o.CHARTS,s.GQ),(0,i.Z)(t,o.DATA,s.iA),(0,i.Z)(t,o.EXTENSIONS,s.Bf),(0,i.Z)(t,o.INTERACTIONS,s.yd),(0,i.Z)(t,o.SECRETS,s.Yo),(0,i.Z)(t,o.SETTINGS,s.Zr),(0,i.Z)(t,o.TERMINAL,s.oI),(0,i.Z)(t,o.TREE,s.mp),(0,i.Z)(t,o.VARIABLES,s.LO),t)},40109:function(e,n,r){"use strict";r.d(n,{f:function(){return g},h:function(){return v}});var t=r(82394),o=r(82684),i=r(34376),l=r(93369),c=r(72473),s=r(70515),d=r(69419),a=r(53808),u=r(28598);var h=function(e){var n=e.oauthResponse,r=(0,i.useRouter)(),t=(0,o.useMemo)((function(){return n||{}}),[n]),h=t.url,f=t.redirect_query_params,m=void 0===f?{}:f;return(0,u.jsx)(u.Fragment,{children:h&&(0,u.jsx)(l.ZP,{beforeElement:(0,u.jsx)(c._8,{size:2*s.iI}),bold:!0,inline:!0,onClick:function(){var e=(0,d.iV)(h).state;(0,a.t8)(e,m),r.push(h)},uuid:"SignForm/google",children:"Sign in with Google"})})};var f=function(e){var n=e.oauthResponse,r=(0,i.useRouter)(),t=(0,o.useMemo)((function(){return n||{}}),[n]),h=t.url,f=t.redirect_query_params,m=void 0===f?{}:f;return(0,u.jsx)(u.Fragment,{children:h&&(0,u.jsx)(l.ZP,{beforeElement:(0,u.jsx)(c.Dg,{size:2*s.iI}),bold:!0,inline:!0,onClick:function(){var e=(0,d.iV)(h).state;m&&(0,a.t8)(e,m),r.push(h)},uuid:"SignForm/active_directory",children:"Sign in with Microsoft"})})};var m,v,x=function(e){var n=e.oauthResponse,r=(0,i.useRouter)(),t=(0,o.useMemo)((function(){return n||{}}),[n]),c=t.url,s=t.redirect_query_params,h=void 0===s?{}:s;return(0,u.jsx)(u.Fragment,{children:c&&(0,u.jsx)(l.ZP,{bold:!0,inline:!0,onClick:function(){var e=(0,d.iV)(c).state;(0,a.t8)(e,h),r.push(c)},uuid:"SignForm/okta",children:"Sign in with Okta"})})};!function(e){e.ACTIVE_DIRECTORY="active_directory",e.BITBUCKET="bitbucket",e.GITHUB="github",e.GOOGLE="google",e.OKTA="okta"}(v||(v={}));var g=(m={},(0,t.Z)(m,v.ACTIVE_DIRECTORY,f),(0,t.Z)(m,v.GOOGLE,h),(0,t.Z)(m,v.OKTA,x),m)},65956:function(e,n,r){"use strict";var t=r(38626),o=r(55485),i=r(38276),l=r(30160),c=r(44897),s=r(42631),d=r(47041),a=r(70515),u=r(28598),h=(0,t.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*a.iI,1.5*a.iI,1.5*a.iI),f=t.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],s.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||c.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||c.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),m=t.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],s.n_,s.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||c.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),h,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),v=t.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*a.iI,d.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*a.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),x=t.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],s.M8,s.YF,1.75*a.iI);n.Z=function(e){var n=e.borderless,r=e.children,t=e.containerRef,c=e.contentContainerRef,s=e.dark,d=e.footer,a=e.fullHeight,h=void 0===a||a,g=e.fullWidth,b=void 0===g||g,p=e.header,j=e.headerHeight,Z=e.headerIcon,C=e.headerPaddingVertical,w=e.headerTitle,_=e.maxHeight,P=e.maxWidth,y=e.minWidth,k=e.noPadding,I=e.overflowVisible,S=e.subtitle,O=e.success;return(0,u.jsxs)(f,{borderless:n,dark:s,fullHeight:h,fullWidth:b,maxHeight:_,maxWidth:P,minWidth:y,overflowVisible:I,ref:t,success:O,children:[(p||w)&&(0,u.jsxs)(m,{headerPaddingVertical:C,height:j,children:[p&&p,w&&(0,u.jsx)(o.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,u.jsxs)(o.ZP,{alignItems:"center",children:[Z&&Z,(0,u.jsx)(i.Z,{ml:Z?1:0,children:(0,u.jsx)(l.ZP,{bold:!0,default:!0,children:w})})]})})]}),(0,u.jsxs)(v,{maxHeight:_,noPadding:k,overflowVisible:I,ref:c,children:[S&&"string"===typeof S&&(0,u.jsx)(i.Z,{mb:2,children:(0,u.jsx)(l.ZP,{default:!0,children:S})}),S&&"string"!==typeof S&&S,r]}),d&&(0,u.jsx)(x,{children:d})]})}},90299:function(e,n,r){"use strict";r.d(n,{Z:function(){return p}});var t=r(82684),o=r(71180),i=r(55485),l=r(64888),c=r(38276),s=r(30160),d=r(8059),a=r(38626),u=r(44897),h=r(70515),f=r(47041),m=a.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],h.cd*h.iI,h.cd*h.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),f.w5),v=a.default.div.withConfig({displayName:"indexstyle__SelectedUnderlineStyle",componentId:"sc-segf7l-1"})(["border-radius:6px;height:","px;"," "," ",""],2,(function(e){return!e.selected&&"\n    background-color: transparent;\n  "}),(function(e){return e.selected&&!e.backgroundColor&&"\n    background-color: ".concat((e.theme||u.Z).accent.blue,";\n  ")}),(function(e){return e.selected&&e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")})),x=r(95924),g=r(28598);function b(e,n){var r=e.allowScroll,a=e.compact,u=e.contained,f=e.noPadding,b=e.onClickTab,p=e.regularSizeText,j=e.selectedTabUUID,Z=e.small,C=e.tabs,w=e.underlineColor,_=e.underlineStyle,P=e.uppercase,y=void 0===P||P,k=(0,t.useMemo)((function(){var e=C.length,n=[];return C.forEach((function(r,t){var u=r.Icon,f=r.IconSelected,m=r.label,C=r.uuid,P=C===j,k=P&&f||u,I=m?m():C,S=(0,g.jsxs)(i.ZP,{alignItems:"center",children:[k&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k,{default:!P,size:2*h.iI}),(0,g.jsx)(c.Z,{mr:1})]}),(0,g.jsx)(s.ZP,{bold:!0,default:!P,noWrapping:!0,small:!p,uppercase:y,children:I})]});t>=1&&e>=2&&n.push((0,g.jsx)("div",{style:{marginLeft:(p?2:1.5)*h.iI}},"spacing-".concat(C))),P&&!_?n.push((0,g.jsx)(l.Z,{backgroundGradient:d.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:a||Z,onClick:function(e){(0,x.j)(e),b(r)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:Z,children:S},C)):n.push((0,g.jsxs)(i.ZP,{flexDirection:"column",style:{paddingLeft:2,paddingRight:2,paddingBottom:_?0:2,paddingTop:_?0:2},children:[(0,g.jsxs)(o.ZP,{borderLess:!0,compact:a||Z,default:!0,noBackground:_,noPadding:_,onClick:function(e){(0,x.j)(e),b(r)},outline:!_,small:Z,children:[!_&&S,_&&(0,g.jsx)("div",{style:{paddingBottom:(a||Z?h.iI/2:h.iI)+2,paddingTop:(a||Z?h.iI/2:h.iI)+2+2},children:S})]}),_&&(0,g.jsx)(v,{backgroundColor:w,selected:P})]},"button-tab-".concat(C)))})),n}),[a,b,j,Z,C,_]),I=(0,g.jsx)(i.ZP,{alignItems:"center",children:k});return u?I:(0,g.jsx)(m,{allowScroll:r,noPadding:f,ref:n,children:I})}var p=t.forwardRef(b)},7828:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Te}});var t=r(77837),o=r(38860),i=r.n(o),l=r(93808),c=r(82394),s=r(75582),d=r(54407),a=r.n(d),u=r(82684),h=r(69864),f=r(71180),m=r(15338),v=r(55485),x=r(85854),g=r(44085),b=r(38276),p=r(4190),j=r(30160),Z=r(35576),C=r(17488),w=r(12468),_=r(35686),P=r(72473),y="clone",k="delete",I="fetch",S="merge",O="pull",E="push",H="rebase",M="git_remote_name",B="git_repository_name",T={uuid:"Branches"},A={uuid:"Files"},N={uuid:"Push"},D={uuid:"Setup"},R=[D,T,A,N],V=r(70515),L=r(81728),F=r(72619),U=r(28598);var G=function(e){var n=e.actionRemoteName,r=e.branch,t=e.branches,o=e.fetchBranch,i=e.fetchBranches,l=e.remotes,d=e.setActionRemoteName,a=e.showError,y=(0,u.useState)(""),I=y[0],O=y[1],E=(0,u.useState)(null),M=E[0],B=E[1],T=(0,u.useState)(null),N=T[0],R=T[1],G=(0,u.useState)(null),W=G[0],q=G[1],z=(0,u.useState)(""),K=z[0],Q=z[1],X=(0,u.useMemo)((function(){return null===l||void 0===l?void 0:l.find((function(e){return e.name===n}))}),[n,l]),Y=(0,u.useMemo)((function(){return(null===t||void 0===t?void 0:t.concat((null===X||void 0===X?void 0:X.refs)||[]))||[]}),[t,X]),J=(0,h.Db)(_.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){o(),i(),Q("")},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),$=(0,s.Z)(J,2),ee=$[0],ne=$[1].isLoading,re=(0,h.Db)(_.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){o()},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),te=(0,s.Z)(re,2),oe=te[0],ie=te[1].isLoading,le=(0,h.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(e){var n=e.git_custom_branch.progress;o(),O(""),B(""),R(n),q("")},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),ce=(0,s.Z)(le,2),se=ce[0],de=ce[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsxs)(x.Z,{children:["Branches",t?" (".concat(null===t||void 0===t?void 0:t.length,")"):""]}),(0,U.jsx)(b.Z,{mt:V.Mq,children:(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(P.VW,{}),beforeIconSize:1.5*V.iI,monospace:!0,onChange:function(e){return d(e.target.value)},placeholder:"Choose a remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(w.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(P.I0,{muted:!1}),beforeIconSize:2*V.iI,monospace:!0,onChange:function(e){return oe({git_custom_branch:{name:e.target.value}})},value:null===r||void 0===r?void 0:r.name,children:(null===r||void 0===r?void 0:r.name)&&(null===t||void 0===t?void 0:t.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)})))})}),(0,U.jsx)(b.Z,{mr:V.cd}),ie&&(0,U.jsx)(p.Z,{inverted:!0})]})]})]})}),(0,U.jsx)(b.Z,{mt:V.Mq,children:(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(C.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return Q(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:K||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.mm,{size:2*V.iI}),disabled:!K,loading:ne,onClick:function(){ee({git_custom_branch:{name:K}})},primary:!0,children:"Create new branch"})]})})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(x.Z,{children:"Actions"}),(0,U.jsxs)(b.Z,{mt:V.Mq,children:[(0,U.jsxs)(b.Z,{mb:V.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===r||void 0===r?void 0:r.name)&&(0,U.jsx)(j.ZP,{monospace:!0,children:null===r||void 0===r?void 0:r.name})]}),(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(P.I0,{}),beforeIconSize:1.5*V.iI,monospace:!0,onChange:function(e){return q(e.target.value)},placeholder:"Choose a branch",value:W,children:null===Y||void 0===Y?void 0:Y.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,U.jsxs)(g.Z,{onChange:function(e){return B(e.target.value)},placeholder:"Choose action",value:M||"",children:[(0,U.jsx)("option",{value:S,children:(0,L.vg)(S)}),(0,U.jsx)("option",{value:H,children:(0,L.vg)(H)}),(0,U.jsx)("option",{value:k,children:(0,L.vg)(k)})]})]})]}),M&&[S,H].includes(M)&&(0,U.jsxs)(b.Z,{mt:V.cd,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsxs)(j.ZP,{bold:!0,muted:!0,children:["Message for ",M]})}),(0,U.jsx)(Z.Z,{monospace:!0,onChange:function(e){return O(e.target.value)},value:I||""})]}),(0,U.jsxs)(b.Z,{mt:V.cd,children:[(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.Bf,{size:2*V.iI}),disabled:!M||!W,loading:de,onClick:function(){(k!==M||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(W,"?")))&&se({git_custom_branch:(0,c.Z)({action_type:M,message:I},M,{base_branch:W})})},primary:!0,children:M?(0,L.vg)(M):"Execute action"}),N&&(0,U.jsx)(b.Z,{mt:V.cd,children:(0,U.jsx)(j.ZP,{default:!0,monospace:!0,preWrap:!0,children:N})})]})]})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.ZP,{children:[(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.Hd,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:D.uuid}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(f.ZP,{afterIcon:(0,U.jsx)(P.Kw,{}),linkProps:{href:"/version-control?tab=".concat(A.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",A.uuid]})]})]})]})},W=r(90299),q=r(32013),z=r(98777),K=r(48670),Q=r(75499);function X(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?X(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var J={base_branch:null,body:null,compare_branch:null,repository:null,title:null};var $=function(e){var n=e.actionRemoteName,r=e.branch,t=e.branches,o=e.fetchBranch,i=e.loading,l=e.remotes,d=e.repositories,a=e.repositoryName,w=e.setActionRemoteName,y=e.setRepositoryName,k=e.showError,I=(0,u.useState)((null===r||void 0===r?void 0:r.name)||""),S=I[0],O=I[1],H=(0,u.useState)(null),M=H[0],B=H[1],T=(0,u.useState)(null),N=T[0],D=T[1],R=(0,u.useState)(J),G=R[0],W=R[1],X=(0,h.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(e){var n=e.git_custom_branch,r=n.error,t=n.progress;r?(B(r),D(null)):(o(),B(null),D(t))},onErrorCallback:function(e,n){return k({errors:n,response:e})}})}}),$=(0,s.Z)(X,2),ee=$[0],ne=$[1].isLoading,re=(0,u.useMemo)((function(){var e;return null===d||void 0===d||null===(e=d.find((function(e){return e.name===a})))||void 0===e?void 0:e.url}),[d,a]),te=_.ZP.pull_requests.list({remote_url:re,repository:a},{},{pauseFetch:!a}),oe=te.data,ie=te.mutate,le=(0,u.useMemo)((function(){return(null===oe||void 0===oe?void 0:oe.pull_requests)||[]}),[oe]),ce=(0,u.useMemo)((function(){return(0,U.jsx)(Q.Z,{columnFlex:[null,null,null,null],columns:[{uuid:"Title"},{uuid:"Author"},{uuid:"Created"},{uuid:"Last modified"}],onClickRow:function(e){var n,r=null===le||void 0===le||null===(n=le[e])||void 0===n?void 0:n.url;r&&window.open(r,"_blank")},rows:null===le||void 0===le?void 0:le.map((function(e){var n=e.created_at,r=e.last_modified,t=e.title,o=e.url,i=e.user;return[(0,U.jsx)(K.Z,{default:!0,href:o,monospace:!0,openNewWindow:!0,small:!0,children:t},"title"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:i},"user"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:n},"createdAt"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:r||"-"},"lastModified")]})),uuid:"pull-requests"})}),[le]),se=_.ZP.git_custom_branches.list({remote_url:re,repository:a},{},{pauseFetch:!a}).data,de=(0,u.useMemo)((function(){return(null===se||void 0===se?void 0:se.git_custom_branches)||[]}),[se]);(0,u.useEffect)((function(){null!==G&&void 0!==G&&G.compare_branch||null===de||void 0===de||!de.find((function(e){return e.name===(null===r||void 0===r?void 0:r.name)}))||W((function(e){return Y(Y({},e),{},{compare_branch:null===r||void 0===r?void 0:r.name})}))}),[r,de,G]);var ae=(0,h.Db)(_.ZP.pull_requests.useCreate(),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){ie(),W(J)},onErrorCallback:function(e,n){return k({errors:n,response:e})}})}}),ue=(0,s.Z)(ae,2),he=ue[0],fe=ue[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(x.Z,{children:(0,L.vg)(E)})}),(0,U.jsxs)(b.Z,{mt:V.Mq,children:[(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Remote"})}),i&&(0,U.jsx)(p.Z,{inverted:!0}),!i&&(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(P.VW,{}),beforeIconSize:1.5*V.iI,monospace:!0,onChange:function(e){return w(e.target.value)},placeholder:"Choose remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,U.jsxs)(g.Z,{beforeIcon:(0,U.jsx)(P.I0,{}),beforeIconSize:1.5*V.iI,monospace:!0,onChange:function(e){return O(e.target.value)},placeholder:"Choose branch",value:S||"",children:[(0,U.jsx)("option",{value:""}),null===t||void 0===t?void 0:t.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,U.jsx)(b.Z,{mt:V.cd,children:(0,U.jsxs)(f.ZP,{beforeIcon:(0,U.jsx)(P.Bf,{size:2*V.iI}),disabled:!n||!S,loading:ne,onClick:function(){D(null),ee({git_custom_branch:(0,c.Z)({action_type:E},E,{branch:S,remote:n})})},primary:!0,children:[(0,L.vg)(E)," ",n," ",n&&S]})}),(N||M)&&(0,U.jsx)(b.Z,{mt:V.cd,children:(0,U.jsx)(j.ZP,{danger:!!M,default:!!N,monospace:!0,preWrap:!0,children:N||M})})]})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(x.Z,{children:"Create pull request"})}),(0,U.jsxs)(b.Z,{mt:V.Mq,children:[i&&(0,U.jsx)(p.Z,{inverted:!0}),!i&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Repository"})}),(0,U.jsx)(g.Z,{monospace:!0,onChange:function(e){return y(e.target.value)},placeholder:"Choose repository",value:a||"",children:null===d||void 0===d?void 0:d.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Base branch"})}),a&&!se&&(0,U.jsx)(p.Z,{inverted:!0}),(!a||se)&&(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(P.I0,{}),beforeIconSize:1.5*V.iI,disabled:!a,monospace:!0,onChange:function(e){return W((function(n){return Y(Y({},n),{},{base_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===G||void 0===G?void 0:G.base_branch)||"",children:null===de||void 0===de?void 0:de.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),a&&!se&&(0,U.jsx)(p.Z,{inverted:!0}),(!a||se||(null===G||void 0===G?void 0:G.compare_branch))&&(0,U.jsxs)(g.Z,{beforeIcon:(0,U.jsx)(P.I0,{}),beforeIconSize:1.5*V.iI,disabled:!a,monospace:!0,onChange:function(e){return W((function(n){return Y(Y({},n),{},{compare_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===G||void 0===G?void 0:G.compare_branch)||"",children:[!(null!==de&&void 0!==de&&de.length)&&(null===G||void 0===G?void 0:G.compare_branch)&&(0,U.jsx)("option",{value:null===G||void 0===G?void 0:G.compare_branch,children:null===G||void 0===G?void 0:G.compare_branch}),null===de||void 0===de?void 0:de.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(C.Z,{label:"Title",monospace:!0,onChange:function(e){return W((function(n){return Y(Y({},n),{},{title:e.target.value})}))},value:(null===G||void 0===G?void 0:G.title)||""})}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(Z.Z,{label:"Description",monospace:!0,onChange:function(e){return W((function(n){return Y(Y({},n),{},{body:e.target.value})}))},value:(null===G||void 0===G?void 0:G.body)||""})}),(0,U.jsx)(b.Z,{mt:V.cd,children:(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.Bf,{size:2*V.iI}),disabled:!a||!(null!==G&&void 0!==G&&G.title)||!(null!==G&&void 0!==G&&G.base_branch)||!(null!==G&&void 0!==G&&G.compare_branch),loading:fe,onClick:function(){he({pull_request:Y(Y({},G),{},{remote_url:re,repository:a})})},primary:!0,children:"Create new pull request"})})]})]}),(0,U.jsx)(b.Z,{mt:V.Mq,children:(0,U.jsx)(q.Z,{visibleMapping:{0:!a},children:(0,U.jsxs)(z.Z,{noPaddingContent:!0,title:oe?"Pull requests (".concat(null===le||void 0===le?void 0:le.length,")"):"Pull requests",children:[!a&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(j.ZP,{muted:!0,children:"Please select a repository to view open pull requests."})}),a&&(0,U.jsxs)(U.Fragment,{children:[!oe&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(p.Z,{inverted:!0})}),oe&&ce]})]})})})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.ZP,{children:(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.Hd,{}),linkProps:{href:"/version-control?tab=".concat(A.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:A.uuid})})]})]})},ee=r(94629),ne=r(29269),re=r(70652),te=r(97618),oe=r(38626),ie=oe.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*V.iI),le=r(42122);function ce(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function se(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var de,ae=function(e){var n=e.branch,r=e.fetchBranch,t=e.modifiedFiles,o=e.setSelectedFilePath,i=e.showError,l=e.stagedFiles,c=e.untrackedFiles,d=(0,u.useRef)(null),a=(0,u.useState)(""),g=a[0],C=a[1],w=(0,u.useState)({}),y=w[0],k=w[1],I=(0,u.useState)({}),S=I[0],O=I[1],E=(0,u.useMemo)((function(){return Object.keys(t).concat(Object.keys(c)).sort()}),[t,c]),H=(0,u.useMemo)((function(){return Object.keys(l||{})}),[l]),M=(0,u.useMemo)((function(){return H.length}),[H]),B=(0,u.useMemo)((function(){return Object.keys(y).length===(null===E||void 0===E?void 0:E.length)}),[y,E]),A=(0,u.useMemo)((function(){return Object.keys(S).length===(null===H||void 0===H?void 0:H.length)}),[S,H]),D=(0,u.useMemo)((function(){return{onErrorCallback:function(e,n){return i({errors:n,response:e})}}}),[i]),R=(0,u.useMemo)((function(){return{onSuccess:function(e){return(0,F.wD)(e,se({callback:function(){r(),k({})}},D))}}}),[r,D]),G=(0,u.useMemo)((function(){return _.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),W=(0,h.Db)(G,R),X=(0,s.Z)(W,2),Y=X[0],J=X[1].isLoading,$=(0,h.Db)(G,R),ee=(0,s.Z)($,2),ne=ee[0],oe=ee[1].isLoading,ce=(0,h.Db)(G,{onSuccess:function(e){return(0,F.wD)(e,se({callback:function(){r(),O({})}},D))}}),de=(0,s.Z)(ce,2),ae=de[0],ue=de[1].isLoading,he=(0,u.useCallback)((function(e,n,r,t,o){var i=(null===e||void 0===e?void 0:e.length)>=1;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(K.Z,{block:!0,noHoverUnderline:!0,onClick:function(){r(o?{}:t)},preventDefault:!0,children:(0,U.jsxs)(v.ZP,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(re.Z,{checked:i&&o,disabled:!i}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(j.ZP,{bold:!0,children:i&&o?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,U.jsx)(ie,{children:(0,U.jsx)(K.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return r((function(n){var r=se({},n);return!(null!==r&&void 0!==r&&r[e])?r[e]=!0:delete r[e],r}))},preventDefault:!0,children:(0,U.jsxs)(v.ZP,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(re.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),fe=(0,u.useMemo)((function(){return(0,le.Qr)(y)}),[y]),me=_.ZP.git_custom_branches.detail("with_logs",{_format:"with_logs"}),ve=me.data,xe=me.mutate,ge=(0,u.useMemo)((function(){var e;return(null===ve||void 0===ve||null===(e=ve.git_custom_branch)||void 0===e?void 0:e.logs)||[]}),[ve]),be=(0,h.Db)(_.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){xe(),r(),C("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),pe=(0,s.Z)(be,2),je=pe[0],Ze=pe[1].isLoading,Ce=(0,u.useMemo)((function(){return(0,U.jsx)(Q.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:ge.map((function(e){var n=e.author,r=e.date,t=e.message;return[(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:r},"date"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:t},"message")]})),uuid:"git-branch-logs"})}),[ge]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)(te.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(x.Z,{children:["Not staged ",(null===E||void 0===E?void 0:E.length)>=1&&"(".concat(null===E||void 0===E?void 0:E.length,")")]}),(0,U.jsx)(b.Z,{my:V.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(b.Z,{mb:V.cd,children:(0,U.jsxs)(v.ZP,{flexDirection:"row",children:[(0,U.jsx)(f.ZP,{compact:!0,disabled:fe||ue||oe,loading:J,onClick:function(){Y({git_custom_branch:{action_type:"add",files:Object.keys(y)}}).then((function(e){var n,r=e.data;null!==r&&void 0!==r&&r.git_custom_branch&&(null===d||void 0===d||null===(n=d.current)||void 0===n||n.focus())}))},primary:!0,children:"Add files"}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.ZP,{compact:!0,disabled:fe||J||ue,loading:oe,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&ne({git_custom_branch:{action_type:"checkout",files:Object.keys(y)}})},children:"Checkout files"})]})}),he(E,y,k,se(se({},t),c),B)]}),(0,U.jsx)(b.Z,{mr:V.cd}),(0,U.jsxs)(te.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(x.Z,{children:["Staged files ",(null===H||void 0===H?void 0:H.length)>=1&&"(".concat(null===H||void 0===H?void 0:H.length,")")]}),(0,U.jsx)(b.Z,{my:V.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(b.Z,{mb:V.cd,children:(0,U.jsx)(v.ZP,{flexDirection:"row",children:(0,U.jsx)(f.ZP,{compact:!0,disabled:(0,le.Qr)(S)||J||oe,loading:ue,onClick:function(){ae({git_custom_branch:{action_type:"reset",files:Object.keys(S)}})},secondary:!0,children:"Reset files"})})}),he(H,S,O,l,A)]})]})}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(x.Z,{children:"Commit"})}),(0,U.jsx)(b.Z,{mb:V.cd,children:(0,U.jsx)(q.Z,{children:(0,U.jsx)(z.Z,{noPaddingContent:!0,title:M>=1?"Staged files (".concat(M,")"):"No staged files",children:null===H||void 0===H?void 0:H.map((function(e){return(0,U.jsx)(b.Z,{my:1,px:V.cd,children:(0,U.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,U.jsx)(K.Z,{default:!0,monospace:!0,onClick:function(){return o((function(n){return n===e?null:e}))},warning:null===t||void 0===t?void 0:t[e],children:e}),(0,U.jsx)(b.Z,{mr:1}),(null===t||void 0===t?void 0:t[e])&&(0,U.jsx)(j.ZP,{warning:!0,children:"Modified after staging"})]})},e)}))})})}),(0,U.jsx)(Z.Z,{label:"Commit message",monospace:!0,onChange:function(e){return C(e.target.value)},ref:d,value:g||""}),(0,U.jsx)(b.Z,{mt:V.cd,children:(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsxs)(f.ZP,{disabled:0===M||!((null===g||void 0===g?void 0:g.length)>=1),loading:Ze,onClick:function(){je({git_custom_branch:{action_type:"commit",message:g}})},primary:!0,children:["Commit ",(0,L._6)("file",M,!0)," with message"]}),0===M&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(j.ZP,{danger:!0,small:!0,children:"Please stage at least 1 file before committing."})]})]})})]}),(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsx)(q.Z,{children:(0,U.jsxs)(z.Z,{noPaddingContent:!0,title:"Logs",children:[!ve&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(p.Z,{inverted:!0})}),ve&&Ce]})})}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.ZP,{children:[(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.Hd,{}),linkProps:{href:"/version-control?tab=".concat(T.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:T.uuid}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(f.ZP,{afterIcon:(0,U.jsx)(P.Kw,{}),linkProps:fe?{href:"/version-control?tab=".concat(N.uuid)}:null,noHoverUnderline:!0,primary:fe,sameColorAsText:!0,secondary:!fe,children:["Next: ",N.uuid]})]})]})]})},ue=r(12691),he=r.n(ue),fe=r(34376),me=r(63403),ve=oe.default.svg.withConfig({displayName:"BitbucketWithText__SVGStyle",componentId:"sc-wdje9z-0"})([""]),xe=function(e){var n=e.fill,r=e.opacity,t=e.size,o=void 0===t?me.C:t,i=e.style,l=e.viewBox,c=void 0===l?"0 0 299 42":l;return(0,U.jsxs)(ve,{fill:n,height:o,opacity:r,style:i,viewBox:c,width:o,children:[(0,U.jsx)("path",{d:"M63.3372 2.9978H79.5353C87.4335 2.9978 91.2488 6.77741 91.2488 12.8379C91.2488 17.3994 89.1068 20.2016 84.756 21.179C90.4455 22.0914 93.3237 25.1542 93.3237 30.4978C93.3237 36.4931 89.1737 40.6637 80.4724 40.6637H63.3372V2.9978ZM68.625 19.0939H78.799C83.8191 19.0939 85.894 16.8782 85.894 13.2289C85.894 9.57954 83.6852 7.82008 78.799 7.82008H68.625V19.0939ZM68.625 23.7206V35.4504H80.673C85.7601 35.4504 88.036 33.6909 88.036 29.9113C88.036 25.871 85.827 23.7206 80.5393 23.7206H68.625Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M101.958 0.977783C104.033 0.977783 105.506 2.21592 105.506 4.43157C105.506 6.58205 104.033 7.88536 101.958 7.88536C99.8833 7.88536 98.4106 6.6472 98.4106 4.43157C98.4106 2.21592 99.8833 0.977783 101.958 0.977783ZM99.3478 11.9907H104.435V40.6638H99.3478V11.9907Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M123.779 36.0376C124.984 36.0376 126.055 35.7769 126.992 35.6466V40.4037C126.121 40.6643 125.117 40.8599 123.578 40.8599C117.286 40.8599 114.207 37.2756 114.207 31.9321V16.5529H109.455V11.9912H114.207V5.93091H119.16V11.9912H126.992V16.5529H119.16V31.7367C119.093 34.2781 120.633 36.0376 123.779 36.0376Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M138.504 35.5806V40.5982H133.417V0H138.504V17.1386C140.378 13.359 143.926 11.4039 148.477 11.4039C156.309 11.4039 160.258 17.8554 160.258 26.3271C160.258 34.4076 156.108 41.25 147.875 41.25C143.524 41.25 140.244 39.3602 138.504 35.5806ZM147.072 16.0309C142.52 16.0309 138.504 18.8329 138.504 25.2191V27.5001C138.504 33.8863 142.186 36.6883 146.536 36.6883C152.226 36.6883 155.171 33.0392 155.171 26.3921C155.171 19.4194 152.36 16.0309 147.072 16.0309Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M165.546 11.991H170.633V29.3252C170.633 34.4733 172.775 36.7541 177.594 36.7541C182.279 36.7541 185.559 33.6913 185.559 27.8915V11.991H190.647V40.664H185.559V35.972C183.685 39.3607 180.204 41.2505 176.255 41.2505C169.495 41.2505 165.613 36.6888 165.613 28.8039V11.991H165.546Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M219.027 39.8814C217.287 40.7938 214.542 41.1847 211.864 41.1847C201.355 41.1847 196.469 34.9941 196.469 26.1967C196.469 17.5296 201.355 11.3389 211.864 11.3389C214.542 11.3389 216.55 11.6647 218.892 12.7072V17.2689C217.019 16.4218 215.011 15.9006 212.266 15.9006C204.636 15.9006 201.49 20.5924 201.49 26.1967C201.49 31.8009 204.702 36.4929 212.401 36.4929C215.412 36.4929 217.287 36.1018 219.092 35.4502V39.8814H219.027Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M224.783 40.6635V0H229.87V25.4147L242.52 11.9904H249.147L235.29 26.0664L249.681 40.6635H242.789L229.802 27.2392V40.6635H224.783Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M266.483 41.2506C255.437 41.2506 250.619 35.0599 250.619 26.2624C250.619 17.5954 255.572 11.4045 264.541 11.4045C273.644 11.4045 277.259 17.5302 277.259 26.2624V28.4781H255.773C256.51 33.3655 259.722 36.4935 266.684 36.4935C270.096 36.4935 272.974 35.8418 275.652 34.9296V39.4911C273.175 40.7944 269.494 41.2506 266.483 41.2506ZM255.706 24.2423H272.172C271.904 18.8987 269.427 15.9012 264.34 15.9012C258.919 15.9012 256.242 19.2897 255.706 24.2423Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M294.929 36.0376C296.134 36.0376 297.205 35.7769 298.142 35.6466V40.4037C297.272 40.6643 296.267 40.8599 294.728 40.8599C288.437 40.8599 285.359 37.2756 285.359 31.9321V16.5529H280.606V11.9912H285.359V5.93091H290.311V11.9912H298.142V16.5529H290.311V31.7367C290.245 34.2781 291.784 36.0376 294.929 36.0376Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M1.36497 4.1062C0.556341 4.1062 -0.117513 4.82301 0.0172582 5.605L5.74501 39.1654C5.87979 40.0127 6.62103 40.6642 7.56442 40.6642H34.9903C35.6641 40.6642 36.2032 40.208 36.338 39.5565L42.0658 5.605C42.2006 4.82301 41.594 4.1062 40.718 4.1062H1.36497ZM25.4889 28.3479H16.7288L14.3704 16.3573H27.6453L25.4889 28.3479Z",fill:n||"white"}),(0,U.jsx)("path",{d:"M40.2462 16.3572H27.5775L25.4886 28.3478H16.7286L6.3512 40.2079C6.3512 40.2079 6.82289 40.6641 7.56413 40.6641H34.99C35.6639 40.6641 36.2029 40.2079 36.3377 39.5562L40.2462 16.3572Z",fill:"url(#paint0_linear_13549_1163)"}),(0,U.jsx)("defs",{children:(0,U.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_13549_1163",x1:"43.1513",x2:"22.7826",y1:"19.7256",y2:"36.1667",children:[(0,U.jsx)("stop",{offset:"0.176",stopColor:"#0052CC"}),(0,U.jsx)("stop",{offset:"1",stopColor:"#2684FF"})]})})]})},ge=r(40109),be=r(69419),pe=r(53808),je=(de={},(0,c.Z)(de,ge.h.GITHUB,P.Je),(0,c.Z)(de,ge.h.BITBUCKET,xe),de);function Ze(e){var n=e.isLoadingCreateOauth,r=e.oauth,t=e.provider,o=e.showError,i=(0,fe.useRouter)(),l=(0,h.Db)(_.ZP.oauths.useUpdate(t),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){return window.location.href=window.location.href.split("?")[0]},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),c=(0,s.Z)(l,2),d=c[0],a=c[1].isLoading,u=je[t];return(0,U.jsxs)(v.ZP,{justifyContent:"space-between",children:[(0,U.jsx)(te.Z,{children:(0,U.jsx)(u,{size:12*V.iI})}),(0,U.jsx)(te.Z,{alignItems:"center",children:null!==r&&void 0!==r&&r.authenticated?(0,U.jsx)(f.ZP,{loading:a,onClick:function(){return d({oauth:{action_type:"reset"}})},warning:!0,children:"Reset"}):(0,U.jsx)(f.ZP,{loading:n,onClick:function(){var e=null===r||void 0===r?void 0:r.url,n=(0,be.iV)(e).state;(0,pe.t8)(n,(null===r||void 0===r?void 0:r.redirect_query_params)||{}),i.push(e)},primary:!0,children:"Authenticate"})})]})}var Ce=function(e){var n=e.branch,r=e.isLoadingCreateOauth,t=e.showError,o=_.ZP.oauths.list({type:"git",redirect_uri:encodeURIComponent(window.location.href)}),i=o.data,l=(o.mutate,_.ZP.oauths.detail(ge.h.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)})),c=l.data,d=(l.mutate,(0,u.useMemo)((function(){return(null===c||void 0===c?void 0:c.oauth)||{}}),[c])),a=(0,u.useMemo)((function(){return null===n||void 0===n?void 0:n.access_token_exists}),[n]),h=(0,u.useMemo)((function(){var e,n=(null===i||void 0===i||null===(e=i.oauths)||void 0===e?void 0:e.reduce((function(e,n){return e[n.provider]=n,e}),{}))||{};return n[ge.h.GITHUB]=d,n}),[i,d]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(x.Z,{children:"Authentication"}),(0,U.jsxs)(b.Z,{mt:V.Mq,children:[a&&(0,U.jsxs)(b.Z,{mb:2,children:[(0,U.jsx)(f.ZP,{disabled:!0,children:"Using access token from Git Settings"}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsx)(j.ZP,{muted:!0,children:"Some features may not work unless you authenticate with a Git client."})})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:V.Mq,children:(0,U.jsx)(j.ZP,{muted:!0,children:"Authenticating with the apps below will allow you to easily pull, push, and create pull requests."})}),(0,U.jsxs)(b.Z,{mb:V.Mq,style:{maxWidth:"600px"},children:[(0,U.jsx)(m.Z,{muted:!0}),Object.entries(h||{}).map((function(e){var n=(0,s.Z)(e,2),o=n[0],i=n[1];return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ze,{isLoadingCreateOauth:r,oauth:i,provider:o,showError:t},o),(0,U.jsx)(m.Z,{muted:!0})]})}))]})]})]})]})};var we=function(e){var n=e.actionRemoteName,r=e.branch,t=e.fetchBranch,o=e.loading,i=e.remotes,l=e.setActionRemoteName,d=e.showError,a=(0,fe.useRouter)(),Z=(0,u.useRef)(null),w=(0,u.useState)(null),k=w[0],S=w[1],E=(0,u.useState)(null),H=E[0],M=E[1],B=(0,u.useState)(null),A=B[0],N=B[1],D=(0,u.useState)(null),R=D[0],G=D[1],W=(0,u.useState)(!1),X=W[0],Y=W[1],J=(0,u.useState)(null),$=J[0],ee=J[1],ne=(0,u.useState)(""),re=ne[0],oe=ne[1],ie=(0,u.useState)(""),le=ie[0],ce=ie[1],se=(0,u.useState)(null),de=se[0],ae=se[1],ue=(0,u.useMemo)((function(){return!(null===r||void 0===r||!r.name)}),[r]);(0,u.useMemo)((function(){return null===r||void 0===r?void 0:r.access_token_exists}),[r]),(0,u.useEffect)((function(){var e,n;null!==r&&void 0!==r&&null!==(e=r.sync_config)&&void 0!==e&&e.repo_path&&null===de&&ae(null===r||void 0===r||null===(n=r.sync_config)||void 0===n?void 0:n.repo_path)}),[r,de]);var me=(0,u.useMemo)((function(){var e,r;return null===i||void 0===i||null===(e=i.find((function(e){return e.name===n})))||void 0===e||null===(r=e.refs)||void 0===r?void 0:r.map((function(e){var n=e.name.split("/");return{name:n[n.length-1]}}))}),[n,i]),ve=(0,h.Db)(_.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){t(),Y(!1)},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),xe=(0,s.Z)(ve,2),pe=xe[0],je=xe[1].isLoading,Ze=(0,h.Db)(_.ZP.oauths.useUpdate("github"),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){return window.location.href=window.location.href.split("?")[0]},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),we=(0,s.Z)(Ze,2),_e=(we[0],we[1].isLoading,(0,h.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(e){var n=e.git_custom_branch,r=n.error,o=n.progress;r?(M(r),G(null)):(t(),S(null),M(null),N(null),G(o))},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}})),Pe=(0,s.Z)(_e,2),ye=Pe[0],ke=Pe[1].isLoading,Ie=(0,h.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){t(),oe(""),ce("")},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),Se=(0,s.Z)(Ie,2),Oe=Se[0],Ee=Se[1].isLoading,He=(0,h.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){t(),ee(null)},onErrorCallback:function(e,n){ee(null),d({errors:n,response:e})}})}}),Me=(0,s.Z)(He,2),Be=Me[0],Te=Me[1].isLoading,Ae=(0,h.Db)(_.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){return window.location.href="".concat(a.basePath,"/version-control")},onErrorCallback:function(e,n){d({errors:n,response:e})}})}}),Ne=(0,s.Z)(Ae,2),De=Ne[0],Re=Ne[1].isLoading,Ve=(0,be.iV)()||{},Le=Ve.access_token,Fe=Ve.provider;(0,u.useEffect)((function(){Le&&De({oauth:{provider:Fe||ge.h.GITHUB,token:Le}})}),[Le,De,Fe]);var Ue=(0,u.useMemo)((function(){return null===i||void 0===i?void 0:i.map((function(e){var r=e.name,t=e.refs,o=e.urls;return(0,U.jsxs)(b.Z,{mt:V.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,U.jsxs)(te.Z,{alignItems:"center",children:[(0,U.jsx)(j.ZP,{bold:!0,children:r}),(0,U.jsx)(b.Z,{mx:1,children:(0,U.jsx)(P._Q,{muted:!0})}),null===o||void 0===o?void 0:o.map((function(e){return(0,U.jsx)(b.Z,{mr:1,children:(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.ZP,{compact:!0,disabled:Te&&$!==r,iconOnly:!0,loading:Te&&$===r,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(r,"?"))&&(ee(r),Be({git_custom_branch:{action_type:"remove_remote",remote:{name:r}}}).then((function(){n===r&&l(null)})))},small:!0,title:"Remote remote ".concat(r),children:(0,U.jsx)(P.rF,{})})]})}),(0,U.jsx)(q.Z,{children:(0,U.jsxs)(z.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===t||void 0===t?void 0:t.length,")"),children:[0===(null===t||void 0===t?void 0:t.length)&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(j.ZP,{muted:!0,children:"This remote has no refs."})}),(null===t||void 0===t?void 0:t.length)>=1&&(0,U.jsx)(Q.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:t.map((function(e){var n,r=e.commit,t=e.name;return[(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:t},"ref-name"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.name},"author"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.date},"date"),(0,U.jsx)(j.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,U.jsx)(b.Z,{mt:V.Mq,children:(0,U.jsx)(m.Z,{light:!0})})]},r)}))}),[Te,$,i,Be]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(x.Z,{children:"Setup"}),(0,U.jsxs)(b.Z,{mt:V.Mq,children:[(0,U.jsxs)(b.Z,{mb:1,children:[(0,U.jsx)(j.ZP,{bold:!0,large:!0,children:ue?"Git init directory":"Initialize Git directory"}),!ue&&(0,U.jsxs)(j.ZP,{muted:!0,children:["Enter the directory you want to initialize git in. For example, ",(0,U.jsx)(j.ZP,{bold:!0,inline:!0,monospace:!0,muted:!0,children:"/home/src/default_repo"}),"."]}),ue&&(0,U.jsxs)(j.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,U.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(C.Z,{disabled:ue&&!X,fullWidth:!0,label:"Git directory",maxWidth:400,monospace:!0,onChange:function(e){return ae(e.target.value)},ref:Z,value:de||""}),(0,U.jsx)(b.Z,{mr:1}),(!ue||X)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(f.ZP,{compact:!0,disabled:!ue&&!de,loading:je,onClick:function(){pe({sync:{repo_path:de}})},primary:!0,small:!0,children:"Save"}),ue&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(K.Z,{onClick:function(){return Y(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]})]}),ue&&!X&&(0,U.jsx)(K.Z,{onClick:function(){Y(!0),setTimeout((function(){var e;return null===Z||void 0===Z||null===(e=Z.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsx)(Ce,{branch:r,isLoadingCreateOauth:Re,showError:d})}),ue&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsxs)(x.Z,{children:["Remotes",!o&&i?" (".concat(null===i||void 0===i?void 0:i.length,")"):""]}),o&&(0,U.jsx)(b.Z,{mt:V.Mq,children:(0,U.jsx)(p.Z,{inverted:!0})}),!o&&Ue,(0,U.jsx)(b.Z,{mt:V.Mq,children:(0,U.jsxs)(v.ZP,{alignItems:"flex-start",children:[(0,U.jsx)(C.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return oe(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:re||""}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsxs)(v.ZP,{flexDirection:"column",children:[(0,U.jsx)(C.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return ce(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:le||""}),(0,U.jsx)(b.Z,{mt:1,children:(0,U.jsxs)(j.ZP,{muted:!0,small:!0,children:["Use the https URL if you",(0,U.jsx)("br",{}),"authenticated with GitHub above."]})})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.mm,{size:2*V.iI}),disabled:!re||!le,loading:Ee,onClick:function(){Oe({git_custom_branch:{action_type:"add_remote",remote:{name:re,url:le}}})},primary:!0,children:"Create new remote"})]})})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(x.Z,{children:"Actions"}),(0,U.jsxs)(b.Z,{mt:V.Mq,children:[(0,U.jsxs)(b.Z,{mb:V.Mq,children:[(0,U.jsx)(b.Z,{mb:1,children:(0,U.jsx)(j.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===r||void 0===r?void 0:r.name)&&(0,U.jsxs)(v.ZP,{alignItems:"center",children:[(0,U.jsx)(j.ZP,{monospace:!0,children:null===r||void 0===r?void 0:r.name}),(0,U.jsx)(b.Z,{mr:V.cd}),(0,U.jsx)(he(),{href:"/version-control?tab=".concat(T.uuid),passHref:!0,children:(0,U.jsx)(K.Z,{small:!0,children:"Switch branch"})})]})]}),(0,U.jsxs)(v.ZP,{children:[(0,U.jsxs)(g.Z,{onChange:function(e){return N(e.target.value)},placeholder:"Action",value:A||"",children:[(0,U.jsx)("option",{value:I,children:(0,L.vg)(I)}),(0,U.jsx)("option",{value:O,children:(0,L.vg)(O)}),(0,U.jsx)("option",{value:"reset",children:(0,L.vg)("reset --hard")}),(0,U.jsx)("option",{value:y,children:(0,L.vg)(y)})]}),(0,U.jsx)(b.Z,{mr:1}),(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(P.VW,{}),beforeIconSize:1.5*V.iI,monospace:!0,onChange:function(e){return l(e.target.value)},placeholder:"Remote",value:n||"",children:null===i||void 0===i?void 0:i.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))}),![I,y].includes(A)&&(0,U.jsx)(b.Z,{ml:1,children:(0,U.jsxs)(g.Z,{beforeIcon:(0,U.jsx)(P.I0,{}),beforeIconSize:1.5*V.iI,monospace:!0,onChange:function(e){return S(e.target.value)},value:k||"",children:[(0,U.jsx)("option",{value:"",children:"All branches"}),null===me||void 0===me?void 0:me.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})})]}),(0,U.jsxs)(b.Z,{mt:V.cd,children:[(0,U.jsx)(f.ZP,{beforeIcon:(0,U.jsx)(P.Bf,{size:2*V.iI}),disabled:!A||!n,loading:ke,onClick:function(){G(null),(A!==y||"undefined"!==typeof location&&window.confirm("Are you sure you want to clone remote ".concat(n,"? This will ")+"overwrite all your local changes and may reset any settings you may have configured for your local Git repo. This action cannot be undone."))&&ye({git_custom_branch:(0,c.Z)({action_type:A},A,{branch:k,remote:n})})},primary:!0,children:A?(0,L.vg)(A):"Execute action"}),(R||H)&&(0,U.jsx)(b.Z,{mt:V.cd,children:(0,U.jsx)(j.ZP,{danger:!!H,default:!!R,monospace:!0,preWrap:!0,children:R||H})})]})]})]}),(0,U.jsxs)(b.Z,{mb:V.HN,children:[(0,U.jsx)(b.Z,{mb:V.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.ZP,{children:(0,U.jsxs)(f.ZP,{afterIcon:(0,U.jsx)(P.Kw,{}),linkProps:{href:"/version-control?tab=".concat(T.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",T.uuid]})})]})]})]})},_e=r(95363),Pe=oe.default.div.withConfig({displayName:"indexstyle__DiffContainerStyle",componentId:"sc-1fo4nus-0"})(["pre{font-family:",";}"],_e.Vp),ye={codeFoldGutter:{},content:{},contentText:{},diffAdded:{},diffContainer:{},diffRemoved:{},emptyGutter:{},emptyLine:{},gutter:{},highlightedGutter:{},highlightedLine:{},line:{},lineNumber:{},marker:{},splitView:{},titleBlock:{},variables:{dark:{addedBackground:"#044B53",addedColor:"white",addedGutterBackground:"#034148",addedGutterColor:"#8c8c8c",codeFoldBackground:"#262831",codeFoldContentColor:"#555a7b",codeFoldGutterBackground:"#21232b",diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",diffViewerTitleBackground:"#2f323e",diffViewerTitleBorderColor:"#353846",diffViewerTitleColor:"#555a7b",emptyLineBackground:"#363946",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",gutterColor:"#464c67",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",removedBackground:"#632F34",removedColor:"white",removedGutterBackground:"#632b30",removedGutterColor:"#8c8c8c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f"},light:{addedBackground:"#e6ffed",addedColor:"#24292e",addedGutterBackground:"#cdffd8",addedGutterColor:"#212529",codeFoldBackground:"#f1f8ff",codeFoldContentColor:"#212529",codeFoldGutterBackground:"#dbedff",diffViewerBackground:"#fff",diffViewerColor:"212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleBorderColor:"#eee",diffViewerTitleColor:"#212529",emptyLineBackground:"#fafbfc",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",gutterColor:"#212529",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",removedBackground:"#ffeef0",removedColor:"#24292e",removedGutterBackground:"#ffdce0",removedGutterColor:"#212529",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0"}},wordAdded:{},wordDiff:{},wordRemoved:{}},ke=r(53005),Ie=r(15610),Se=r(86735),Oe=r(23780);function Ee(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function He(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Me=function(){var e=(0,u.useRef)(null),n=(0,u.useRef)(null),r=(0,Oe.VI)(null,{},[],{uuid:"VersionControlPage"}),t=(0,s.Z)(r,1)[0],o=(0,u.useState)(null),i=o[0],l=o[1],h=(0,u.useState)(null),f=h[0],v=h[1],x=(0,u.useState)(R[0]),Z=x[0],C=x[1],P=(0,be.iV)();(0,u.useEffect)((function(){null!==P&&void 0!==P&&P.tab&&C(R.find((function(e){return e.uuid===(null===P||void 0===P?void 0:P.tab)})))}),[P]);var y=_.ZP.git_custom_branches.list({include_remote_branches:1}),k=y.data,I=y.mutate,S=(0,u.useMemo)((function(){return null===k||void 0===k?void 0:k.git_custom_branches}),[k]),O=_.ZP.git_custom_branches.detail("current",{_format:"with_files"}),E=O.data,H=O.mutate,L=(0,u.useMemo)((function(){return(null===E||void 0===E?void 0:E.git_custom_branch)||{}}),[E]),F=(0,u.useMemo)((function(){return(null===L||void 0===L?void 0:L.files)||[]}),[L]),q=_.ZP.git_custom_branches.detail("with_remotes",{_format:"with_remotes"}),z=q.data,K=q.mutate,Q=(0,u.useMemo)((function(){return null===z||void 0===z?void 0:z.git_custom_branch}),[z]),X=(0,u.useMemo)((function(){return(null===Q||void 0===Q?void 0:Q.remotes)||[]}),[Q]),Y=(0,u.useState)(null),J=Y[0],re=Y[1],te=(0,u.useCallback)((function(e){(0,pe.t8)(M,e),re(e)}),[]);(0,u.useEffect)((function(){var e=(0,pe.U2)(M,null);if(z&&e){var n=null===X||void 0===X?void 0:X.find((function(n){return n.name===e}));te(n?null===n||void 0===n?void 0:n.name:null)}}),[z,X,te]);var oe=(0,u.useState)((0,pe.U2)(B,"")),ie=oe[0],ce=oe[1],se=(0,u.useCallback)((function(e){(0,pe.t8)(B,e),ce(e)}),[]),de=(0,u.useMemo)((function(){return(0,Se.Tw)(X.reduce((function(e,n){var r;return e.concat((null===n||void 0===n||null===(r=n.repository_names)||void 0===r?void 0:r.map((function(e){var r;return{name:e,url:null===n||void 0===n||null===(r=n.urls)||void 0===r?void 0:r[0]}})))||[])}),[]),(function(e){return e.name}))}),[X]);(0,u.useEffect)((function(){var e=(0,pe.U2)(B,null);if(z&&e){var n=null===de||void 0===de?void 0:de.find((function(n){return n.name===e}));se(n?null===n||void 0===n?void 0:n.name:null)}}),[z,de,se]);var ue=_.ZP.git_files.detail(f?encodeURIComponent(f):null,{base_branch:i}),he=ue.data,fe=ue.mutate,me=(0,u.useMemo)((function(){return null===he||void 0===he?void 0:he.git_file}),[he]);(0,u.useEffect)((function(){i&&fe()}),[i,fe]),(0,u.useEffect)((function(){null!==he&&void 0!==he&&he.error&&t({errors:null===he||void 0===he?void 0:he.error,response:he})}),[he,t]);var ve=(0,u.useMemo)((function(){var e,n,r;return{modifiedFiles:null===L||void 0===L||null===(e=L.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return He(He({},e),{},(0,c.Z)({},n,!0))}),{}),stagedFiles:null===L||void 0===L||null===(n=L.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return He(He({},e),{},(0,c.Z)({},n,!0))}),{}),untrackedFiles:null===L||void 0===L||null===(r=L.untracked_files)||void 0===r?void 0:r.reduce((function(e,n){return He(He({},e),{},(0,c.Z)({},n,!0))}),{})}}),[L]),xe=ve.modifiedFiles,ge=void 0===xe?{}:xe,je=ve.stagedFiles,Ze=void 0===je?{}:je,Ce=ve.untrackedFiles,_e=void 0===Ce?{}:Ce;(0,u.useEffect)((function(){f&&(0,le.Qr)(ge)&&(0,le.Qr)(Ze)&&(0,le.Qr)(_e)&&v(null)}),[ge,f,Ze,_e]);var Ee=(0,u.useMemo)((function(){return(null===F||void 0===F?void 0:F.length)>=1?(0,U.jsx)(ne.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFiles:H,files:F,isFileDisabled:function(){return!1},onClickFile:function(e){v((function(r){if(!r||r!==e){var t;if(!i)null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus();return e}return null}))},ref:e,renderAfterContent:function(e){var n,r,t=e.children,o=(null===t||void 0===t?void 0:t.length)>=1,i=(0,ke.a9)(e);o&&(i="".concat(i,"/"));var l={};return null!==ge&&void 0!==ge&&ge[i]?(n="M",r="Modified",l.warning=!0):null!==_e&&void 0!==_e&&_e[i]?(n="U",r="Untracked",l.danger=!0):null!==Ze&&void 0!==Ze&&Ze[i]&&(n="S",r="Staged",l.success=!0),o&&!n?null:(0,U.jsx)(b.Z,{mx:1,children:(0,U.jsx)(w.Z,{appearBefore:!0,label:r,widthFitContent:!0,children:(0,U.jsx)(j.ZP,He(He({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(j.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[i,H,e,F,ge,n,v,Ze,_e]),Me=(0,u.useMemo)((function(){return!he||!me||f&&(null===me||void 0===me?void 0:me.filename)!==f}),[he,me,f]),Be=(0,u.useMemo)((function(){if(!f)return null;var e=me||{},n=e.content,r=e.content_from_base;return(0,U.jsxs)(Pe,{children:[!i&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(j.ZP,{muted:!0,children:"Please select a base branch to see the file diffs."})}),(null===me||void 0===me?void 0:me.error)&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(j.ZP,{danger:!0,monospace:!0,preWrap:!0,children:null===me||void 0===me?void 0:me.error})}),i&&!(null!==me&&void 0!==me&&me.error)&&(0,U.jsxs)(U.Fragment,{children:[Me&&(0,U.jsx)(b.Z,{p:V.cd,children:(0,U.jsx)(p.Z,{inverted:!0})}),!Me&&(0,U.jsx)(a(),{compareMethod:d.DiffMethod.WORDS,newValue:n||"",oldValue:r||"",renderContent:function(e){return(0,U.jsx)(j.ZP,{monospace:!0,children:e})},splitView:!0,styles:ye,useDarkTheme:!0})]})]})}),[i,me,Me,f]),Te=(0,u.useMemo)((function(){return E&&null!==L&&void 0!==L&&L.name?R:R.slice(0,1)}),[L,E]),Ae=(0,u.useMemo)((function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{style:{marginBottom:.5*V.iI,marginTop:.5*V.iI},children:(0,U.jsx)(W.Z,{compact:!0,onClickTab:function(e){var n=e.uuid;(0,Ie.u)({tab:n})},selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:Te})}),(0,U.jsx)(m.Z,{light:!0})]})}),[Z,Te]),Ne=(0,u.useMemo)((function(){return(0,U.jsx)(we,{actionRemoteName:J,branch:L,fetchBranch:function(){H(),K()},loading:!z,remotes:X,setActionRemoteName:te,showError:t})}),[J,L,z,H,K,X,te,t]),De=(0,u.useMemo)((function(){return(0,U.jsx)(G,{actionRemoteName:J,branch:L,branches:S,fetchBranch:H,fetchBranches:I,remotes:X,setActionRemoteName:te,showError:t})}),[J,L,S,H,I,X,te,t]),Re=(0,u.useMemo)((function(){return(0,U.jsx)(ae,{branch:L,fetchBranch:H,modifiedFiles:ge,setSelectedFilePath:v,showError:t,stagedFiles:Ze,untrackedFiles:_e})}),[L,H,ge,v,t,Ze,_e]),Ve=(0,u.useMemo)((function(){return(0,U.jsx)($,{actionRemoteName:J,branch:L,branches:S,fetchBranch:H,loading:!z,modifiedFiles:ge,remotes:X,repositories:de,repositoryName:ie,setActionRemoteName:te,setRepositoryName:se,showError:t,stagedFiles:Ze})}),[J,L,S,z,H,ge,X,de,ie,te,se,t,Ze]);return(0,U.jsx)(ee.Z,{after:Be,afterHidden:!f,afterWidth:40*V.iI,before:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b.Z,{p:1,children:(0,U.jsx)(g.Z,{compact:!0,label:"Base branch",onChange:function(e){return l(e.target.value)},ref:n,small:!0,value:i||"",children:null===S||void 0===S?void 0:S.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})}),Ee]}),mainContainerHeader:Ae,title:"Version control",uuid:"Version control/index",children:(0,U.jsxs)(b.Z,{p:V.cd,children:[!E&&(0,U.jsx)(p.Z,{inverted:!0}),E&&(0,U.jsxs)(U.Fragment,{children:[D.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Ne,T.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&De,A.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Re,N.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Ve]})]})})};function Be(){return(0,U.jsx)(Me,{})}Be.getInitialProps=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Te=(0,l.Z)(Be)},75302:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return r(7828)}])}},function(e){e.O(0,[2678,1154,844,7011,6965,874,1557,8264,7858,5499,5283,2646,9269,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);