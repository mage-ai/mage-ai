(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{44162:function(e,n,r){"use strict";r.d(n,{HC:function(){return j},Kf:function(){return d},Nk:function(){return f},PY:function(){return h},gE:function(){return b},jv:function(){return v},nz:function(){return m},oh:function(){return s},qn:function(){return a},t1:function(){return p},y9:function(){return x}});var t=r(38626),o=r(23831),i=r(86422),l=r(73942),c=r(49125),u=r(90880),s=68;function a(e,n){var r,t,l=((null===n||void 0===n||null===(r=n.theme)||void 0===r?void 0:r.borders)||o.Z.borders).light,c=((null===n||void 0===n||null===(t=n.theme)||void 0===t?void 0:t.monotone)||o.Z.monotone).grey500,u=n||{},s=u.blockColor,a=u.isSelected,d=u.theme;return a?l=(d||o.Z).content.active:i.tf.TRANSFORMER===e||s===i.Lq.PURPLE?(l=(d||o.Z).accent.purple,c=(d||o.Z).accent.purpleLight):i.tf.DATA_EXPORTER===e||s===i.Lq.YELLOW?(l=(d||o.Z).accent.yellow,c=(d||o.Z).accent.yellowLight):i.tf.DATA_LOADER===e||s===i.Lq.BLUE?(l=(d||o.Z).accent.blue,c=(d||o.Z).accent.blueLight):i.tf.MARKDOWN===e?(l=(d||o.Z).accent.sky,c=(d||o.Z).accent.skyLight):i.tf.SENSOR===e||s===i.Lq.PINK?(l=(d||o.Z).accent.pink,c=(d||o.Z).accent.pinkLight):i.tf.DBT===e?(l=(d||o.Z).accent.dbt,c=(d||o.Z).accent.dbtLight):i.tf.EXTENSION===e||s===i.Lq.TEAL?(l=((null===d||void 0===d?void 0:d.accent)||o.Z.accent).teal,c=((null===d||void 0===d?void 0:d.accent)||o.Z.accent).tealLight):i.tf.CALLBACK===e?(l=((null===d||void 0===d?void 0:d.accent)||o.Z.accent).rose,c=((null===d||void 0===d?void 0:d.accent)||o.Z.accent).roseLight):(i.tf.CONDITIONAL===e||i.tf.SCRATCHPAD===e||s===i.Lq.GREY||i.tf.CUSTOM===e&&!s)&&(l=(d||o.Z).content.default,c=(d||o.Z).accent.contentDefaultTransparent),{accent:l,accentLight:c}}var d=(0,t.css)([""," "," "," "," "," "," ",""],(0,u.eR)(),(function(e){return!e.selected&&!e.hasError&&"\n    border-color: ".concat(a(e.blockType,e).accentLight,";\n  ")}),(function(e){return e.selected&&!e.hasError&&"\n    border-color: ".concat(a(e.blockType,e).accent,";\n  ")}),(function(e){return!e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.accent||o.Z.accent).negativeTransparent,";\n  ")}),(function(e){return e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.borders||o.Z.borders).danger,";\n  ")}),(function(e){return e.dynamicBlock&&"\n    border-style: dashed !important;\n  "}),(function(e){return e.dynamicChildBlock&&"\n    border-style: dotted !important;\n  "})),f=t.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],l.n_),h=t.default.div.withConfig({displayName:"indexstyle__HiddenBlockContainerStyle",componentId:"sc-s5rj34-1"})([""," border-radius:","px;border-style:",";border-width:","px;",""],d,l.n_,l.M8,l.mP,(function(e){return"\n    background-color: ".concat((e.theme||o.Z).background.content,";\n\n    &:hover {\n      border-color: ").concat(a(e.blockType,e).accent,";\n    }\n  ")})),m=t.default.div.withConfig({displayName:"indexstyle__BlockHeaderStyle",componentId:"sc-s5rj34-2"})([""," border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:",";border-top-width:","px;border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding:","px;position:sticky;top:-5px;"," "," ",""],d,l.n_,l.n_,l.M8,l.mP,l.M8,l.mP,l.M8,l.mP,c.iI,(function(e){return"\n    background-color: ".concat((e.theme||o.Z).background.content,";\n  ")}),(function(e){return e.bottomBorder&&"\n    border-bottom: ".concat(l.YF,"px ").concat(l.M8," ").concat((e.theme||o.Z).borders.medium2,";\n  ")}),(function(e){return e.zIndex&&"\n    z-index: ".concat(6+(e.zIndex||0),";\n  ")})),v=t.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-3"})([""," border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding-bottom:","px;padding-top:","px;position:relative;"," "," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],d,l.M8,l.mP,l.M8,l.mP,c.iI,c.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||o.Z.background).codeTextarea,";\n  ")}),(function(e){return e.lightBackground&&"\n    background-color: ".concat((e.theme||o.Z).background.content,";\n  ")}),(function(e){return!e.hasOutput&&"\n    border-bottom-left-radius: ".concat(l.n_,"px;\n    border-bottom-right-radius: ").concat(l.n_,"px;\n    border-bottom-style: ").concat(l.M8,";\n    border-bottom-width: ").concat(l.mP,"px;\n  ")})),b=t.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-4"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:8;bottom:","px;&:hover{"," .block-divider-inner{","}}"],2*c.iI,.5*c.iI,(function(e){return e.additionalZIndex>0&&"\n      z-index: ".concat(8+e.additionalZIndex,";\n    ")}),(function(e){return"\n        background-color: ".concat((e.theme.text||o.Z.text).fileBrowser,";\n      ")})),p=t.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-5"})(["height 1px;width:100%;position:absolute;z-index:-1;top:","px;"],1.5*c.iI),x=t.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-6"})(["margin-bottom:","px;padding-bottom:","px;",""],1*c.iI,1*c.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||o.Z.borders).medium,";\n    padding-left: ").concat(e.normalPadding?c.iI:s,"px;\n  ")})),j=t.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-7"})(["bottom:","px;left:","px;position:absolute;"],1*c.iI,s)},1210:function(e,n,r){"use strict";r.d(n,{Z:function(){return O}});var t=r(82394),o=r(21831),i=r(82684),l=r(47999),c=r(49894),u=r(93461),s=r(57384),a=r(41424),d=r(72454),f=r(28598);function h(e,n){var r=e.children;return(0,f.jsx)(d.HS,{ref:n,children:r})}var m=i.forwardRef(h),v=r(32063),b=r(85019),p=r(82531),x=r(66166),j=r(3055),g=r(49125),Z=r(91427),y=r(24141);function C(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function _(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?C(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var O=function(e){var n,r=e.after,t=e.afterHidden,h=e.afterWidth,C=e.afterWidthOverride,O=e.before,A=e.beforeWidth,w=e.breadcrumbs,k=e.children,P=e.errors,S=e.headerMenuItems,E=e.headerOffset,R=e.mainContainerHeader,I=e.navigationItems,D=e.setErrors,T=e.subheaderChildren,N=e.title,M=e.uuid,L=(0,y.i)().width,B="dashboard_after_width_".concat(M),H="dashboard_before_width_".concat(M),F=(0,i.useRef)(null),U=(0,i.useState)(C?h:(0,Z.U2)(B,h)),G=U[0],q=U[1],V=(0,i.useState)(!1),z=V[0],W=V[1],K=(0,i.useState)(O?Math.max((0,Z.U2)(H,A),13*g.iI):null),X=K[0],Y=K[1],Q=(0,i.useState)(!1),J=Q[0],$=Q[1],ee=(0,i.useState)(null)[1],ne=p.ZP.projects.list({},{revalidateOnFocus:!1}).data,re=null===ne||void 0===ne?void 0:ne.projects,te=[];w?te.push.apply(te,(0,o.Z)(w)):(null===re||void 0===re?void 0:re.length)>=1&&te.push.apply(te,[{label:function(){var e;return null===(e=re[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return N}}]),(0,i.useEffect)((function(){null===F||void 0===F||!F.current||z||J||null===ee||void 0===ee||ee(F.current.getBoundingClientRect().width)}),[z,G,J,X,F,ee,L]),(0,i.useEffect)((function(){z||(0,Z.t8)(B,G)}),[t,z,G,B]),(0,i.useEffect)((function(){J||(0,Z.t8)(H,X)}),[J,X,H]);var oe=(0,x.Z)(h);return(0,i.useEffect)((function(){C&&oe!==h&&q(h)}),[C,h,oe]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:N}),(0,f.jsx)(a.Z,{breadcrumbs:te,menuItems:S,project:null===re||void 0===re?void 0:re[0],version:null===re||void 0===re||null===(n=re[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(d.Nk,{children:[0!==(null===I||void 0===I?void 0:I.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(b.Z,{navigationItems:I,showMore:!0})}),(0,f.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(v.Z,{after:r,afterHeightOffset:j.Mz,afterHidden:t,afterMousedownActive:z,afterWidth:G,before:O,beforeHeightOffset:j.Mz,beforeMousedownActive:J,beforeWidth:d.k1+(O?X:0),headerOffset:E,hideAfterCompletely:!0,leftOffset:O?d.k1:null,mainContainerHeader:R,mainContainerRef:F,setAfterMousedownActive:W,setAfterWidth:q,setBeforeMousedownActive:$,setBeforeWidth:Y,children:[T&&(0,f.jsx)(m,{children:T}),k]})})]}),P&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===D||void 0===D?void 0:D(null)},children:(0,f.jsx)(c.Z,_(_({},P),{},{onClose:function(){return null===D||void 0===D?void 0:D(null)}}))})]})}},60701:function(e,n,r){"use strict";r.d(n,{Qq:function(){return f},Z7:function(){return h},cH:function(){return o},du:function(){return a},fp:function(){return s},j5:function(){return d},uM:function(){return u}});var t,o,i=r(82394),l=r(10503),c=r(24224),u="sideview",s=90;!function(e){e.ADDON_BLOCKS="addon_blocks",e.CALLBACKS="callbacks",e.CHARTS="charts",e.DATA="data",e.EXTENSIONS="power_ups",e.FILE_VERSIONS="file_versions",e.GRAPHS="graphs",e.REPORTS="reports",e.SECRETS="secrets",e.SETTINGS="settings",e.TERMINAL="terminal",e.TREE="tree",e.VARIABLES="variables"}(o||(o={}));o.CALLBACKS,o.CHARTS,o.DATA,o.EXTENSIONS,o.TREE;var a=[o.DATA],d=[{key:o.TREE,label:"Tree"},{buildLabel:function(e){var n=(e.pipeline||{}).widgets,r=void 0===n?[]:n;return(null===r||void 0===r?void 0:r.length)>=1?"Charts (".concat(r.length,")"):"Charts"},key:o.CHARTS},{buildLabel:function(e){var n=e.variables;return(null===n||void 0===n?void 0:n.length)>=1?"Variables (".concat(n.length,")"):"Variables"},key:o.VARIABLES},{buildLabel:function(e){var n=e.secrets;return(null===n||void 0===n?void 0:n.length)>=1?"Secrets (".concat(n.length,")"):"Secrets"},key:o.SECRETS},{buildLabel:function(e){e.pipeline;return"Add-on blocks"},key:o.ADDON_BLOCKS},{buildLabel:function(e){var n=(e.pipeline||{}).extensions,r=void 0===n?{}:n,t=0;return Object.values(r).forEach((function(e){var n=e.blocks;t+=(null===n||void 0===n?void 0:n.length)||0})),t>=1?"Power ups (".concat(t,")"):"Power ups"},key:o.EXTENSIONS},{key:o.DATA,label:"Data"},{key:o.TERMINAL,label:"Terminal"}],f=(0,c.HK)(d,(function(e){return e.key})),h=(t={},(0,i.Z)(t,o.ADDON_BLOCKS,l.EJ),(0,i.Z)(t,o.CALLBACKS,l.AQ),(0,i.Z)(t,o.CHARTS,l.GQ),(0,i.Z)(t,o.DATA,l.iA),(0,i.Z)(t,o.EXTENSIONS,l.Bf),(0,i.Z)(t,o.SECRETS,l.Yo),(0,i.Z)(t,o.SETTINGS,l.Zr),(0,i.Z)(t,o.TERMINAL,l.oI),(0,i.Z)(t,o.TREE,l.mp),(0,i.Z)(t,o.VARIABLES,l.LO),t)},86422:function(e,n,r){"use strict";r.d(n,{$W:function(){return m},DA:function(){return h},HX:function(){return p},J8:function(){return b},L8:function(){return l},Lq:function(){return d},M5:function(){return f},Qj:function(){return x},Ut:function(){return y},V4:function(){return Z},VZ:function(){return v},dO:function(){return a},f2:function(){return g},iZ:function(){return j},t6:function(){return c},tf:function(){return s}});var t,o,i,l,c,u=r(82394);!function(e){e.CONDITION="condition",e.DBT_SNAPSHOT="snapshot",e.DYNAMIC="dynamic",e.DYNAMIC_CHILD="dynamic_child",e.REDUCE_OUTPUT="reduce_output",e.REPLICA="replica"}(l||(l={})),function(e){e.MARKDOWN="markdown",e.PYTHON="python",e.R="r",e.SQL="sql",e.YAML="yaml"}(c||(c={}));var s,a=(t={},(0,u.Z)(t,c.MARKDOWN,"MD"),(0,u.Z)(t,c.PYTHON,"PY"),(0,u.Z)(t,c.R,"R"),(0,u.Z)(t,c.SQL,"SQL"),(0,u.Z)(t,c.YAML,"YAML"),t);!function(e){e.CALLBACK="callback",e.CHART="chart",e.CONDITIONAL="conditional",e.CUSTOM="custom",e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.DBT="dbt",e.EXTENSION="extension",e.SCRATCHPAD="scratchpad",e.SENSOR="sensor",e.MARKDOWN="markdown",e.TRANSFORMER="transformer"}(s||(s={}));var d,f=[s.CALLBACK,s.CONDITIONAL,s.EXTENSION];!function(e){e.BLUE="blue",e.GREY="grey",e.PINK="pink",e.PURPLE="purple",e.TEAL="teal",e.YELLOW="yellow"}(d||(d={}));var h,m=[s.CHART,s.CUSTOM,s.DATA_EXPORTER,s.DATA_LOADER,s.SCRATCHPAD,s.SENSOR,s.MARKDOWN,s.TRANSFORMER],v=[s.DATA_EXPORTER,s.DATA_LOADER],b=[s.DATA_EXPORTER,s.DATA_LOADER,s.TRANSFORMER],p=[s.DATA_EXPORTER,s.DATA_LOADER,s.DBT,s.TRANSFORMER],x=[s.CHART,s.SCRATCHPAD,s.SENSOR,s.MARKDOWN],j=[s.CALLBACK,s.CHART,s.EXTENSION,s.SCRATCHPAD,s.MARKDOWN];!function(e){e.EXECUTED="executed",e.FAILED="failed",e.NOT_EXECUTED="not_executed",e.UPDATED="updated"}(h||(h={}));var g=[s.CUSTOM,s.DATA_EXPORTER,s.DATA_LOADER,s.TRANSFORMER],Z=(o={},(0,u.Z)(o,s.CALLBACK,"Callback"),(0,u.Z)(o,s.CUSTOM,"Custom"),(0,u.Z)(o,s.DATA_EXPORTER,"Data exporter"),(0,u.Z)(o,s.DATA_LOADER,"Data loader"),(0,u.Z)(o,s.EXTENSION,"Extension"),(0,u.Z)(o,s.SCRATCHPAD,"Scratchpad"),(0,u.Z)(o,s.SENSOR,"Sensor"),(0,u.Z)(o,s.MARKDOWN,"Markdown"),(0,u.Z)(o,s.TRANSFORMER,"Transformer"),o),y=[s.DATA_LOADER,s.TRANSFORMER,s.DATA_EXPORTER,s.SENSOR];i={},(0,u.Z)(i,s.DATA_EXPORTER,"DE"),(0,u.Z)(i,s.DATA_LOADER,"DL"),(0,u.Z)(i,s.SCRATCHPAD,"SP"),(0,u.Z)(i,s.SENSOR,"SR"),(0,u.Z)(i,s.MARKDOWN,"MD"),(0,u.Z)(i,s.TRANSFORMER,"TF")},55022:function(e,n,r){"use strict";var t;r.d(n,{G:function(){return t}}),function(e){e.ACTIVE_DIRECTORY="active_directory",e.GITHUB="github"}(t||(t={}))},32316:function(e,n,r){"use strict";r.d(n,{Z:function(){return b}});var t=r(82684),o=r(60328),i=r(67971),l=r(882),c=r(86673),u=r(19711),s=r(99994),a=r(38626),d=r(49125),f=r(37391),h=a.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],d.cd*d.iI,d.cd*d.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),f.w5),m=r(66653),v=r(28598);var b=function(e){var n=e.allowScroll,r=e.compact,a=e.contained,f=e.noPadding,b=e.onClickTab,p=e.regularSizeText,x=e.selectedTabUUID,j=e.small,g=e.tabs,Z=(0,t.useMemo)((function(){var e=g.length,n=[];return g.forEach((function(t,a){var f=t.Icon,h=t.IconSelected,g=t.label,Z=t.uuid,y=Z===x,C=y&&h||f,_=g?g():Z,O=(0,v.jsxs)(i.Z,{alignItems:"center",children:[C&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(C,{default:!y,size:2*d.iI}),(0,v.jsx)(c.Z,{mr:1})]}),(0,v.jsx)(u.ZP,{bold:!0,default:!y,noWrapping:!0,small:!p,children:_})]});a>=1&&e>=2&&n.push((0,v.jsx)("div",{style:{marginLeft:1.5*d.iI}},"spacing-".concat(Z))),y?n.push((0,v.jsx)(l.Z,{backgroundGradient:s.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:r||j,onClick:function(e){(0,m.j)(e),b(t)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:j,children:O},Z)):n.push((0,v.jsx)("div",{style:{padding:2},children:(0,v.jsx)(o.Z,{borderLess:!0,compact:r||j,default:!0,onClick:function(e){(0,m.j)(e),b(t)},outline:!0,small:j,children:O})},"button-tab-".concat(Z)))})),n}),[r,b,x,j,g]),y=(0,v.jsx)(i.Z,{alignItems:"center",children:Z});return a?y:(0,v.jsx)(h,{allowScroll:n,noPadding:f,children:y})}},92589:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Ae}});var t=r(77837),o=r(38860),i=r.n(o),l=r(41788),c=r(82394),u=r(75582),s=r(54407),a=r.n(s),d=r(82684),f=r(83455),h=r(60328),m=r(34744),v=r(67971),b=r(87372),p=r(55378),x=r(86673),j=r(54283),g=r(19711),Z=r(38435),y=r(82944),C=r(46261),_=r(82531),O=r(10503),A="delete",w="merge",k="pull",P="push",S="rebase",E="git_remote_name",R="git_repository_name",I={uuid:"Branches"},D={uuid:"Files"},T={uuid:"Push"},N={uuid:"Setup"},M=[N,I,D,T],L=r(49125),B=r(90211),H=r(96510),F=r(28598);var U=function(e){var n=e.actionRemoteName,r=e.branch,t=e.branches,o=e.fetchBranch,i=e.fetchBranches,l=e.remotes,s=e.setActionRemoteName,a=e.showError,k=(0,d.useState)(""),P=k[0],E=k[1],R=(0,d.useState)(null),I=R[0],T=R[1],M=(0,d.useState)(null),U=M[0],G=M[1],q=(0,d.useState)(null),V=q[0],z=q[1],W=(0,d.useState)(""),K=W[0],X=W[1],Y=(0,d.useMemo)((function(){return null===l||void 0===l?void 0:l.find((function(e){return e.name===n}))}),[n,l]),Q=(0,d.useMemo)((function(){return(null===t||void 0===t?void 0:t.concat((null===Y||void 0===Y?void 0:Y.refs)||[]))||[]}),[t,Y]),J=(0,f.Db)(_.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){o(),i(),X("")},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),$=(0,u.Z)(J,2),ee=$[0],ne=$[1].isLoading,re=(0,f.Db)(_.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){o()},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),te=(0,u.Z)(re,2),oe=te[0],ie=te[1].isLoading,le=(0,f.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(e){var n=e.git_custom_branch.progress;o(),E(""),T(""),G(n),z("")},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),ce=(0,u.Z)(le,2),ue=ce[0],se=ce[1].isLoading;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsxs)(b.Z,{children:["Branches",Q?" (".concat(null===Q||void 0===Q?void 0:Q.length,")"):""]}),(0,F.jsx)(x.Z,{mt:L.Mq,children:(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.VW,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return s(e.target.value)},placeholder:"Choose a remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))})]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,F.jsxs)(v.Z,{alignItems:"center",children:[(0,F.jsx)(C.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.I0,{muted:!1}),beforeIconSize:2*L.iI,monospace:!0,onChange:function(e){return oe({git_custom_branch:{name:e.target.value}})},value:null===r||void 0===r?void 0:r.name,children:(null===r||void 0===r?void 0:r.name)&&(null===Q||void 0===Q?void 0:Q.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)})))})}),(0,F.jsx)(x.Z,{mr:L.cd}),ie&&(0,F.jsx)(j.Z,{inverted:!0})]})]})]})}),(0,F.jsx)(x.Z,{mt:L.Mq,children:(0,F.jsxs)(v.Z,{alignItems:"center",children:[(0,F.jsx)(y.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return X(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:K||""}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.mm,{size:2*L.iI}),disabled:!K,loading:ne,onClick:function(){ee({git_custom_branch:{name:K}})},primary:!0,children:"Create new branch"})]})})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(b.Z,{children:"Actions"}),(0,F.jsxs)(x.Z,{mt:L.Mq,children:[(0,F.jsxs)(x.Z,{mb:L.Mq,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===r||void 0===r?void 0:r.name)&&(0,F.jsx)(g.ZP,{monospace:!0,children:null===r||void 0===r?void 0:r.name})]}),(0,F.jsxs)(v.Z,{alignItems:"center",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.I0,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return z(e.target.value)},placeholder:"Choose a branch",value:V,children:null===Q||void 0===Q?void 0:Q.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))})]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,F.jsxs)(p.Z,{onChange:function(e){return T(e.target.value)},placeholder:"Choose action",value:I||"",children:[(0,F.jsx)("option",{value:w,children:(0,B.vg)(w)}),(0,F.jsx)("option",{value:S,children:(0,B.vg)(S)}),(0,F.jsx)("option",{value:A,children:(0,B.vg)(A)})]})]})]}),I&&[w,S].includes(I)&&(0,F.jsxs)(x.Z,{mt:L.cd,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsxs)(g.ZP,{bold:!0,muted:!0,children:["Message for ",I]})}),(0,F.jsx)(Z.Z,{monospace:!0,onChange:function(e){return E(e.target.value)},value:P||""})]}),(0,F.jsxs)(x.Z,{mt:L.cd,children:[(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.Bf,{size:2*L.iI}),disabled:!I||!V,loading:se,onClick:function(){(A!==I||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(V,"?")))&&ue({git_custom_branch:(0,c.Z)({action_type:I,message:P},I,{base_branch:V})})},primary:!0,children:I?(0,B.vg)(I):"Execute action"}),U&&(0,F.jsx)(x.Z,{mt:L.cd,children:(0,F.jsx)(g.ZP,{default:!0,monospace:!0,preWrap:!0,children:U})})]})]})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:L.HN,children:(0,F.jsx)(m.Z,{light:!0})}),(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.Hd,{}),linkProps:{href:"/version-control?tab=".concat(N.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:N.uuid}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)(h.Z,{afterIcon:(0,F.jsx)(O.Kw,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",D.uuid]})]})]})]})},G=r(32316),q=r(44182),V=r(25880),z=r(10919),W=r(87815);function K(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function X(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?K(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Y={base_branch:null,body:null,compare_branch:null,repository:null,title:null};var Q=function(e){var n=e.actionRemoteName,r=e.branch,t=e.branches,o=e.fetchBranch,i=e.loading,l=e.remotes,s=e.repositories,a=e.repositoryName,C=e.setActionRemoteName,A=e.setRepositoryName,w=e.showError,k=(0,d.useState)((null===r||void 0===r?void 0:r.name)||""),S=k[0],E=k[1],R=(0,d.useState)(null),I=R[0],T=R[1],N=(0,d.useState)(null),M=N[0],U=N[1],G=(0,d.useState)(Y),K=G[0],Q=G[1],J=(0,f.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(e){var n=e.git_custom_branch,r=n.error,t=n.progress;r?(T(r),U(null)):(o(),T(null),U(t))},onErrorCallback:function(e,n){return w({errors:n,response:e})}})}}),$=(0,u.Z)(J,2),ee=$[0],ne=$[1].isLoading,re=_.ZP.pull_requests.list({repository:a},{},{pauseFetch:!a}),te=re.data,oe=re.mutate,ie=(0,d.useMemo)((function(){return(null===te||void 0===te?void 0:te.pull_requests)||[]}),[te]),le=(0,d.useMemo)((function(){return(0,F.jsx)(W.Z,{columnFlex:[null,null,null,null],columns:[{uuid:"Title"},{uuid:"Author"},{uuid:"Created"},{uuid:"Last modified"}],onClickRow:function(e){var n,r=null===ie||void 0===ie||null===(n=ie[e])||void 0===n?void 0:n.url;r&&window.open(r,"_blank")},rows:null===ie||void 0===ie?void 0:ie.map((function(e){var n=e.created_at,r=e.last_modified,t=e.title,o=e.url,i=e.user;return[(0,F.jsx)(z.Z,{default:!0,href:o,monospace:!0,openNewWindow:!0,small:!0,children:t},"title"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:i},"user"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:n},"createdAt"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:r||"-"},"lastModified")]})),uuid:"pull-requests"})}),[ie]),ce=_.ZP.git_custom_branches.list({repository:a},{},{pauseFetch:!a}).data,ue=(0,d.useMemo)((function(){return(null===ce||void 0===ce?void 0:ce.git_custom_branches)||[]}),[ce]);(0,d.useEffect)((function(){null!==K&&void 0!==K&&K.compare_branch||null===ue||void 0===ue||!ue.find((function(e){return e.name===(null===r||void 0===r?void 0:r.name)}))||Q((function(e){return X(X({},e),{},{compare_branch:null===r||void 0===r?void 0:r.name})}))}),[r,ue,K]);var se=(0,f.Db)(_.ZP.pull_requests.useCreate(),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){oe(),Q(Y)},onErrorCallback:function(e,n){return w({errors:n,response:e})}})}}),ae=(0,u.Z)(se,2),de=ae[0],fe=ae[1].isLoading;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(b.Z,{children:(0,B.vg)(P)})}),(0,F.jsxs)(x.Z,{mt:L.Mq,children:[(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Remote"})}),i&&(0,F.jsx)(j.Z,{inverted:!0}),!i&&(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.VW,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return C(e.target.value)},placeholder:"Choose remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))})]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,F.jsxs)(p.Z,{beforeIcon:(0,F.jsx)(O.I0,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return E(e.target.value)},placeholder:"Choose branch",value:S||"",children:[(0,F.jsx)("option",{value:""}),null===t||void 0===t?void 0:t.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,F.jsx)(x.Z,{mt:L.cd,children:(0,F.jsxs)(h.Z,{beforeIcon:(0,F.jsx)(O.Bf,{size:2*L.iI}),disabled:!n||!S,loading:ne,onClick:function(){U(null),ee({git_custom_branch:(0,c.Z)({action_type:P},P,{branch:S,remote:n})})},primary:!0,children:[(0,B.vg)(P)," ",n," ",n&&S]})}),(M||I)&&(0,F.jsx)(x.Z,{mt:L.cd,children:(0,F.jsx)(g.ZP,{danger:!!I,default:!!M,monospace:!0,preWrap:!0,children:M||I})})]})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(b.Z,{children:"Create pull request"})}),(0,F.jsxs)(x.Z,{mt:L.Mq,children:[i&&(0,F.jsx)(j.Z,{inverted:!0}),!i&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Repository"})}),(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.fy,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return A(e.target.value)},placeholder:"Choose repository",value:a||"",children:null===s||void 0===s?void 0:s.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))})]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Base branch"})}),a&&!ce&&(0,F.jsx)(j.Z,{inverted:!0}),(!a||ce)&&(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.I0,{}),beforeIconSize:1.5*L.iI,disabled:!a,monospace:!0,onChange:function(e){return Q((function(n){return X(X({},n),{},{base_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===K||void 0===K?void 0:K.base_branch)||"",children:null===ue||void 0===ue?void 0:ue.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))})]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)("div",{children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),a&&!ce&&(0,F.jsx)(j.Z,{inverted:!0}),(!a||ce||(null===K||void 0===K?void 0:K.compare_branch))&&(0,F.jsxs)(p.Z,{beforeIcon:(0,F.jsx)(O.I0,{}),beforeIconSize:1.5*L.iI,disabled:!a,monospace:!0,onChange:function(e){return Q((function(n){return X(X({},n),{},{compare_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===K||void 0===K?void 0:K.compare_branch)||"",children:[!(null!==ue&&void 0!==ue&&ue.length)&&(null===K||void 0===K?void 0:K.compare_branch)&&(0,F.jsx)("option",{value:null===K||void 0===K?void 0:K.compare_branch,children:null===K||void 0===K?void 0:K.compare_branch}),null===ue||void 0===ue?void 0:ue.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,F.jsx)(x.Z,{mt:1,children:(0,F.jsx)(y.Z,{label:"Title",monospace:!0,onChange:function(e){return Q((function(n){return X(X({},n),{},{title:e.target.value})}))},value:(null===K||void 0===K?void 0:K.title)||""})}),(0,F.jsx)(x.Z,{mt:1,children:(0,F.jsx)(Z.Z,{label:"Description",monospace:!0,onChange:function(e){return Q((function(n){return X(X({},n),{},{body:e.target.value})}))},value:(null===K||void 0===K?void 0:K.body)||""})}),(0,F.jsx)(x.Z,{mt:L.cd,children:(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.Bf,{size:2*L.iI}),disabled:!a||!(null!==K&&void 0!==K&&K.title)||!(null!==K&&void 0!==K&&K.base_branch)||!(null!==K&&void 0!==K&&K.compare_branch),loading:fe,onClick:function(){de({pull_request:X(X({},K),{},{repository:a})})},primary:!0,children:"Create new pull request"})})]})]}),(0,F.jsx)(x.Z,{mt:L.Mq,children:(0,F.jsx)(q.Z,{visibleMapping:{0:!a},children:(0,F.jsxs)(V.Z,{noPaddingContent:!0,title:te?"Pull requests (".concat(null===ie||void 0===ie?void 0:ie.length,")"):"Pull requests",children:[!a&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(g.ZP,{muted:!0,children:"Please select a repository to view open pull requests."})}),a&&(0,F.jsxs)(F.Fragment,{children:[!te&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(j.Z,{inverted:!0})}),te&&le]})]})})})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:L.HN,children:(0,F.jsx)(m.Z,{light:!0})}),(0,F.jsx)(v.Z,{children:(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.Hd,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:D.uuid})})]})]})},J=r(1210),$=r(46299),ee=r(38341),ne=r(93461),re=r(38626),te=re.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*L.iI),oe=r(7715);function ie(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function le(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ce=function(e){var n=e.branch,r=e.fetchBranch,t=e.modifiedFiles,o=e.setSelectedFilePath,i=e.showError,l=e.stagedFiles,c=e.untrackedFiles,s=(0,d.useRef)(null),a=(0,d.useState)(""),p=a[0],y=a[1],C=(0,d.useState)({}),A=C[0],w=C[1],k=(0,d.useState)({}),P=k[0],S=k[1],E=(0,d.useMemo)((function(){return Object.keys(t).concat(Object.keys(c)).sort()}),[t,c]),R=(0,d.useMemo)((function(){return Object.keys(l||{})}),[l]),D=(0,d.useMemo)((function(){return R.length}),[R]),N=(0,d.useMemo)((function(){return Object.keys(A).length===(null===E||void 0===E?void 0:E.length)}),[A,E]),M=(0,d.useMemo)((function(){return Object.keys(P).length===(null===R||void 0===R?void 0:R.length)}),[P,R]),U=(0,d.useMemo)((function(){return{onErrorCallback:function(e,n){return i({errors:n,response:e})}}}),[i]),G=(0,d.useMemo)((function(){return{onSuccess:function(e){return(0,H.wD)(e,le({callback:function(){r(),w({})}},U))}}}),[r,U]),K=(0,d.useMemo)((function(){return _.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),X=(0,f.Db)(K,G),Y=(0,u.Z)(X,2),Q=Y[0],J=Y[1].isLoading,$=(0,f.Db)(K,G),re=(0,u.Z)($,2),ie=re[0],ce=re[1].isLoading,ue=(0,f.Db)(K,{onSuccess:function(e){return(0,H.wD)(e,le({callback:function(){r(),S({})}},U))}}),se=(0,u.Z)(ue,2),ae=se[0],de=se[1].isLoading,fe=(0,d.useCallback)((function(e,n,r,t,o){var i=(null===e||void 0===e?void 0:e.length)>=1;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(z.Z,{block:!0,noHoverUnderline:!0,onClick:function(){r(o?{}:t)},preventDefault:!0,children:(0,F.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,F.jsx)(ee.Z,{checked:i&&o,disabled:!i}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(g.ZP,{bold:!0,children:i&&o?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,F.jsx)(te,{children:(0,F.jsx)(z.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return r((function(n){var r=le({},n);return!(null!==r&&void 0!==r&&r[e])?r[e]=!0:delete r[e],r}))},preventDefault:!0,children:(0,F.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,F.jsx)(ee.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),he=(0,d.useMemo)((function(){return(0,oe.Qr)(A)}),[A]),me=_.ZP.git_custom_branches.detail("with_logs",{_format:"with_logs"}),ve=me.data,be=me.mutate,pe=(0,d.useMemo)((function(){var e;return(null===ve||void 0===ve||null===(e=ve.git_custom_branch)||void 0===e?void 0:e.logs)||[]}),[ve]),xe=(0,f.Db)(_.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){be(),r(),y("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),je=(0,u.Z)(xe,2),ge=je[0],Ze=je[1].isLoading,ye=(0,d.useMemo)((function(){return(0,F.jsx)(W.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:pe.map((function(e){var n=e.author,r=e.date,t=e.message;return[(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:r},"date"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:t},"message")]})),uuid:"git-branch-logs"})}),[pe]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x.Z,{mb:L.HN,children:(0,F.jsxs)(v.Z,{children:[(0,F.jsxs)(ne.Z,{flex:1,flexDirection:"column",children:[(0,F.jsxs)(b.Z,{children:["Not staged ",(null===E||void 0===E?void 0:E.length)>=1&&"(".concat(null===E||void 0===E?void 0:E.length,")")]}),(0,F.jsx)(x.Z,{my:L.cd,children:(0,F.jsx)(m.Z,{light:!0})}),(0,F.jsx)(x.Z,{mb:L.cd,children:(0,F.jsxs)(v.Z,{flexDirection:"row",children:[(0,F.jsx)(h.Z,{compact:!0,disabled:he||de||ce,loading:J,onClick:function(){Q({git_custom_branch:{action_type:"add",files:Object.keys(A)}}).then((function(e){var n,r=e.data;null!==r&&void 0!==r&&r.git_custom_branch&&(null===s||void 0===s||null===(n=s.current)||void 0===n||n.focus())}))},primary:!0,children:"Add files"}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(h.Z,{compact:!0,disabled:he||J||de,loading:ce,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&ie({git_custom_branch:{action_type:"checkout",files:Object.keys(A)}})},children:"Checkout files"})]})}),fe(E,A,w,le(le({},t),c),N)]}),(0,F.jsx)(x.Z,{mr:L.cd}),(0,F.jsxs)(ne.Z,{flex:1,flexDirection:"column",children:[(0,F.jsxs)(b.Z,{children:["Staged files ",(null===R||void 0===R?void 0:R.length)>=1&&"(".concat(null===R||void 0===R?void 0:R.length,")")]}),(0,F.jsx)(x.Z,{my:L.cd,children:(0,F.jsx)(m.Z,{light:!0})}),(0,F.jsx)(x.Z,{mb:L.cd,children:(0,F.jsx)(v.Z,{flexDirection:"row",children:(0,F.jsx)(h.Z,{compact:!0,disabled:(0,oe.Qr)(P)||J||ce,loading:de,onClick:function(){ae({git_custom_branch:{action_type:"reset",files:Object.keys(P)}})},secondary:!0,children:"Reset files"})})}),fe(R,P,S,l,M)]})]})}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(b.Z,{children:"Commit"})}),(0,F.jsx)(x.Z,{mb:L.cd,children:(0,F.jsx)(q.Z,{children:(0,F.jsx)(V.Z,{noPaddingContent:!0,title:D>=1?"Staged files (".concat(D,")"):"No staged files",children:null===R||void 0===R?void 0:R.map((function(e){return(0,F.jsx)(x.Z,{my:1,px:L.cd,children:(0,F.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,F.jsx)(z.Z,{default:!0,monospace:!0,onClick:function(){return o((function(n){return n===e?null:e}))},warning:null===t||void 0===t?void 0:t[e],children:e}),(0,F.jsx)(x.Z,{mr:1}),(null===t||void 0===t?void 0:t[e])&&(0,F.jsx)(g.ZP,{warning:!0,children:"Modified after staging"})]})},e)}))})})}),(0,F.jsx)(Z.Z,{label:"Commit message",monospace:!0,onChange:function(e){return y(e.target.value)},ref:s,value:p||""}),(0,F.jsx)(x.Z,{mt:L.cd,children:(0,F.jsxs)(v.Z,{alignItems:"center",children:[(0,F.jsxs)(h.Z,{disabled:0===D||!((null===p||void 0===p?void 0:p.length)>=1),loading:Ze,onClick:function(){ge({git_custom_branch:{action_type:"commit",files:R,message:p}})},primary:!0,children:["Commit ",(0,B._6)("file",D,!0)," with message"]}),0===D&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(g.ZP,{danger:!0,small:!0,children:"Please stage at least 1 file before committing."})]})]})})]}),(0,F.jsx)(x.Z,{mb:L.HN,children:(0,F.jsx)(q.Z,{children:(0,F.jsxs)(V.Z,{noPaddingContent:!0,title:"Logs",children:[!ve&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(j.Z,{inverted:!0})}),ve&&ye]})})}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:L.HN,children:(0,F.jsx)(m.Z,{light:!0})}),(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.Hd,{}),linkProps:{href:"/version-control?tab=".concat(I.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:I.uuid}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)(h.Z,{afterIcon:(0,F.jsx)(O.Kw,{}),linkProps:he?{href:"/version-control?tab=".concat(T.uuid)}:null,noHoverUnderline:!0,primary:he,sameColorAsText:!0,secondary:!he,children:["Next: ",T.uuid]})]})]})]})},ue=r(12691),se=r.n(ue),ae=r(34376),de=r(55022),fe=r(59e3);var he=function(e){var n=e.actionRemoteName,r=e.branch,t=e.fetchBranch,o=e.loading,i=e.remotes,l=e.setActionRemoteName,c=e.showError,s=(0,ae.useRouter)(),a=(0,d.useRef)(null),Z=(0,d.useState)(null),C=Z[0],A=Z[1],w=(0,d.useState)(null),P=w[0],S=w[1],E=(0,d.useState)(null),R=E[0],D=E[1],T=(0,d.useState)(null),N=T[0],M=T[1],U=(0,d.useState)(!1),G=U[0],K=U[1],X=(0,d.useState)(null),Y=X[0],Q=X[1],J=(0,d.useState)(""),$=J[0],ee=J[1],re=(0,d.useState)(""),te=re[0],oe=re[1],ie=(0,d.useState)(null),le=ie[0],ce=ie[1],ue=(0,d.useMemo)((function(){return!(null===r||void 0===r||!r.name)}),[r]);(0,d.useEffect)((function(){var e,n;null!==r&&void 0!==r&&null!==(e=r.sync_config)&&void 0!==e&&e.repo_path&&null===le&&ce(null===r||void 0===r||null===(n=r.sync_config)||void 0===n?void 0:n.repo_path)}),[r,le]);var he=(0,d.useMemo)((function(){var e,r;return null===i||void 0===i||null===(e=i.find((function(e){return e.name===n})))||void 0===e||null===(r=e.refs)||void 0===r?void 0:r.map((function(e){var n=e.name.split("/");return{name:n[n.length-1]}}))}),[n,i]),me=(0,f.Db)(_.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){t(),K(!1)},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),ve=(0,u.Z)(me,2),be=ve[0],pe=ve[1].isLoading,xe=(0,f.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(e){var n=e.git_custom_branch,r=n.error,o=n.progress;r?(S(r),M(null)):(t(),A(null),S(null),D(null),M(o))},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),je=(0,u.Z)(xe,2),ge=je[0],Ze=je[1].isLoading,ye=(0,f.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){t(),ee(""),oe("")},onErrorCallback:function(e,n){return c({errors:n,response:e})}})}}),Ce=(0,u.Z)(ye,2),_e=Ce[0],Oe=Ce[1].isLoading,Ae=(0,f.Db)(_.ZP.git_custom_branches.useUpdate(null===r||void 0===r?void 0:r.name),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){t(),Q(null)},onErrorCallback:function(e,n){Q(null),c({errors:n,response:e})}})}}),we=(0,u.Z)(Ae,2),ke=we[0],Pe=we[1].isLoading,Se=_.ZP.oauths.detail(de.G.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)}),Ee=Se.data,Re=Se.mutate,Ie=(0,d.useMemo)((function(){return(null===Ee||void 0===Ee?void 0:Ee.oauth)||{}}),[Ee]),De=(0,f.Db)(_.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){Re()},onErrorCallback:function(e,n){c({errors:n,response:e})}})}}),Te=(0,u.Z)(De,2),Ne=Te[0],Me=Te[1].isLoading,Le=((0,fe.iV)()||{}).access_token;(0,d.useEffect)((function(){!Ie||null!==Ie&&void 0!==Ie&&Ie.authenticated||!Le||Ne({oauth:{provider:de.G.GITHUB,token:Le}})}),[Le,Ne,Ie]);var Be=(0,d.useMemo)((function(){return null===i||void 0===i?void 0:i.map((function(e){var r=e.name,t=e.refs,o=e.urls;return(0,F.jsxs)(x.Z,{mt:L.Mq,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsxs)(v.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,F.jsxs)(ne.Z,{alignItems:"center",children:[(0,F.jsx)(g.ZP,{bold:!0,children:r}),(0,F.jsx)(x.Z,{mx:1,children:(0,F.jsx)(O._Q,{muted:!0})}),null===o||void 0===o?void 0:o.map((function(e){return(0,F.jsx)(x.Z,{mr:1,children:(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(h.Z,{compact:!0,disabled:Pe&&Y!==r,iconOnly:!0,loading:Pe&&Y===r,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(r,"?"))&&(Q(r),ke({git_custom_branch:{action_type:"remove_remote",remote:{name:r}}}).then((function(){n===r&&l(null)})))},small:!0,title:"Remote remote ".concat(r),children:(0,F.jsx)(O.rF,{})})]})}),(0,F.jsx)(q.Z,{children:(0,F.jsxs)(V.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===t||void 0===t?void 0:t.length,")"),children:[0===(null===t||void 0===t?void 0:t.length)&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(g.ZP,{muted:!0,children:"This remote has no refs."})}),(null===t||void 0===t?void 0:t.length)>=1&&(0,F.jsx)(W.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:t.map((function(e){var n,r=e.commit,t=e.name;return[(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:t},"ref-name"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.name},"author"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.date},"date"),(0,F.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,F.jsx)(x.Z,{mt:L.Mq,children:(0,F.jsx)(m.Z,{light:!0})})]},r)}))}),[Pe,Y,i,ke]);return(0,F.jsxs)(F.Fragment,{children:[Ee&&(0,F.jsxs)(x.Z,{mb:L.HN,children:[(null===Ie||void 0===Ie?void 0:Ie.authenticated)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.fy,{size:2*L.iI}),disabled:!0,children:"Successfully authenticated with GitHub"}),(0,F.jsx)(x.Z,{mt:1,children:(0,F.jsx)(g.ZP,{muted:!0,children:"You can pull, push, and create pull requests on GitHub."})})]}),!(null!==Ie&&void 0!==Ie&&Ie.authenticated)&&(null===Ie||void 0===Ie?void 0:Ie.url)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.fy,{size:2*L.iI}),loading:Me,onClick:function(){return s.push(null===Ie||void 0===Ie?void 0:Ie.url)},primary:!0,children:"Authenticate with GitHub"}),(0,F.jsx)(x.Z,{mt:1,children:(0,F.jsx)(g.ZP,{muted:!0,children:"Authenticating with GitHub will allow you to pull, push, and create pull requests on GitHub."})})]})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(b.Z,{children:"Setup"}),(0,F.jsxs)(x.Z,{mt:L.Mq,children:[(0,F.jsxs)(x.Z,{mb:1,children:[(0,F.jsx)(g.ZP,{bold:!0,large:!0,children:ue?"Git init directory":"Initialize Git directory"}),!ue&&(0,F.jsxs)(g.ZP,{muted:!0,children:["Enter the directory you want to initialize git in. For example, ",(0,F.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,muted:!0,children:"/home/src/default_repo"}),"."]}),ue&&(0,F.jsxs)(g.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,F.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,F.jsxs)(v.Z,{alignItems:"center",children:[(0,F.jsx)(y.Z,{disabled:ue&&!G,label:"Git directory",monospace:!0,onChange:function(e){return ce(e.target.value)},ref:a,value:le||""}),(0,F.jsx)(x.Z,{mr:1}),(!ue||G)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h.Z,{compact:!0,disabled:!ue&&!le,loading:pe,onClick:function(){be({sync:{repo_path:le}})},primary:!0,small:!0,children:"Save"}),ue&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(z.Z,{onClick:function(){return K(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]})]}),ue&&!G&&(0,F.jsx)(z.Z,{onClick:function(){K(!0),setTimeout((function(){var e;return null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),ue&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsxs)(b.Z,{children:["Remotes",!o&&i?" (".concat(null===i||void 0===i?void 0:i.length,")"):""]}),o&&(0,F.jsx)(x.Z,{mt:L.Mq,children:(0,F.jsx)(j.Z,{inverted:!0})}),!o&&Be,(0,F.jsx)(x.Z,{mt:L.Mq,children:(0,F.jsxs)(v.Z,{alignItems:"flex-start",children:[(0,F.jsx)(y.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return ee(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:$||""}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)(v.Z,{flexDirection:"column",children:[(0,F.jsx)(y.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return oe(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:te||""}),(0,F.jsx)(x.Z,{mt:1,children:(0,F.jsxs)(g.ZP,{muted:!0,small:!0,children:["Use the https URL if you",(0,F.jsx)("br",{}),"authenticated with GitHub above."]})})]}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.mm,{size:2*L.iI}),disabled:!$||!te,loading:Oe,onClick:function(){_e({git_custom_branch:{action_type:"add_remote",remote:{name:$,url:te}}})},primary:!0,children:"Create new remote"})]})})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(b.Z,{children:"Actions"}),(0,F.jsxs)(x.Z,{mt:L.Mq,children:[(0,F.jsxs)(x.Z,{mb:L.Mq,children:[(0,F.jsx)(x.Z,{mb:1,children:(0,F.jsx)(g.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===r||void 0===r?void 0:r.name)&&(0,F.jsxs)(v.Z,{alignItems:"center",children:[(0,F.jsx)(g.ZP,{monospace:!0,children:null===r||void 0===r?void 0:r.name}),(0,F.jsx)(x.Z,{mr:L.cd}),(0,F.jsx)(se(),{href:"/version-control?tab=".concat(I.uuid),passHref:!0,children:(0,F.jsx)(z.Z,{small:!0,children:"Switch branch"})})]})]}),(0,F.jsxs)(v.Z,{children:[(0,F.jsx)(p.Z,{onChange:function(e){return D(e.target.value)},placeholder:"Action",value:R||"",children:(0,F.jsx)("option",{value:k,children:(0,B.vg)(k)})}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsx)(p.Z,{beforeIcon:(0,F.jsx)(O.VW,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return l(e.target.value)},placeholder:"Remote",value:n||"",children:null===i||void 0===i?void 0:i.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))}),(0,F.jsx)(x.Z,{mr:1}),(0,F.jsxs)(p.Z,{beforeIcon:(0,F.jsx)(O.I0,{}),beforeIconSize:1.5*L.iI,monospace:!0,onChange:function(e){return A(e.target.value)},value:C||"",children:[(0,F.jsx)("option",{value:"",children:"All branches"}),null===he||void 0===he?void 0:he.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))]})]}),(0,F.jsxs)(x.Z,{mt:L.cd,children:[(0,F.jsx)(h.Z,{beforeIcon:(0,F.jsx)(O.Bf,{size:2*L.iI}),disabled:!R||!n,loading:Ze,onClick:function(){M(null),ge({git_custom_branch:{action_type:R,pull:{branch:C,remote:n}}})},primary:!0,children:R?(0,B.vg)(R):"Execute action"}),(N||P)&&(0,F.jsx)(x.Z,{mt:L.cd,children:(0,F.jsx)(g.ZP,{danger:!!P,default:!!N,monospace:!0,preWrap:!0,children:N||P})})]})]})]}),(0,F.jsxs)(x.Z,{mb:L.HN,children:[(0,F.jsx)(x.Z,{mb:L.HN,children:(0,F.jsx)(m.Z,{light:!0})}),(0,F.jsx)(v.Z,{children:(0,F.jsxs)(h.Z,{afterIcon:(0,F.jsx)(O.Kw,{}),linkProps:{href:"/version-control?tab=".concat(I.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",I.uuid]})})]})]})]})},me=r(2005),ve=re.default.div.withConfig({displayName:"indexstyle__DiffContainerStyle",componentId:"sc-1fo4nus-0"})(["pre{font-family:",";}"],me.Vp),be={codeFoldGutter:{},content:{},contentText:{},diffAdded:{},diffContainer:{},diffRemoved:{},emptyGutter:{},emptyLine:{},gutter:{},highlightedGutter:{},highlightedLine:{},line:{},lineNumber:{},marker:{},splitView:{},titleBlock:{},variables:{dark:{addedBackground:"#044B53",addedColor:"white",addedGutterBackground:"#034148",addedGutterColor:"#8c8c8c",codeFoldBackground:"#262831",codeFoldContentColor:"#555a7b",codeFoldGutterBackground:"#21232b",diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",diffViewerTitleBackground:"#2f323e",diffViewerTitleBorderColor:"#353846",diffViewerTitleColor:"#555a7b",emptyLineBackground:"#363946",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",gutterColor:"#464c67",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",removedBackground:"#632F34",removedColor:"white",removedGutterBackground:"#632b30",removedGutterColor:"#8c8c8c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f"},light:{addedBackground:"#e6ffed",addedColor:"#24292e",addedGutterBackground:"#cdffd8",addedGutterColor:"#212529",codeFoldBackground:"#f1f8ff",codeFoldContentColor:"#212529",codeFoldGutterBackground:"#dbedff",diffViewerBackground:"#fff",diffViewerColor:"212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleBorderColor:"#eee",diffViewerTitleColor:"#212529",emptyLineBackground:"#fafbfc",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",gutterColor:"#212529",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",removedBackground:"#ffeef0",removedColor:"#24292e",removedGutterBackground:"#ffdce0",removedGutterColor:"#212529",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0"}},wordAdded:{},wordDiff:{},wordRemoved:{}},pe=r(91427),xe=r(32821),je=r(33766),ge=r(24224),Ze=r(9728);function ye(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Ce(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ye(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var _e=function(){var e=(0,d.useRef)(null),n=(0,d.useRef)(null),r=(0,Ze.VI)(null,{},[],{uuid:"VersionControlPage"}),t=(0,u.Z)(r,1)[0],o=(0,d.useState)(null),i=o[0],l=o[1],f=(0,d.useState)(null),h=f[0],v=f[1],b=(0,d.useState)(M[0]),Z=b[0],y=b[1],O=(0,fe.iV)();(0,d.useEffect)((function(){null!==O&&void 0!==O&&O.tab&&y(M.find((function(e){return e.uuid===(null===O||void 0===O?void 0:O.tab)})))}),[O]);var A=_.ZP.git_custom_branches.list({include_remote_branches:1}),w=A.data,k=A.mutate,P=(0,d.useMemo)((function(){return null===w||void 0===w?void 0:w.git_custom_branches}),[w]),S=_.ZP.git_custom_branches.detail("current"),B=S.data,H=S.mutate,q=(0,d.useMemo)((function(){return(null===B||void 0===B?void 0:B.git_custom_branch)||{}}),[B]),V=(0,d.useMemo)((function(){return(null===q||void 0===q?void 0:q.files)||[]}),[q]),z=_.ZP.git_custom_branches.detail("with_remotes",{_format:"with_remotes"}),W=z.data,K=z.mutate,X=(0,d.useMemo)((function(){return null===W||void 0===W?void 0:W.git_custom_branch}),[W]),Y=(0,d.useMemo)((function(){return(null===X||void 0===X?void 0:X.remotes)||[]}),[X]),ee=(0,d.useState)(null),ne=ee[0],re=ee[1],te=(0,d.useCallback)((function(e){(0,pe.t8)(E,e),re(e)}),[]);(0,d.useEffect)((function(){var e=(0,pe.U2)(E,null);if(W&&e){var n=null===Y||void 0===Y?void 0:Y.find((function(n){return n.name===e}));te(n?null===n||void 0===n?void 0:n.name:null)}}),[W,Y,te]);var ie=(0,d.useState)((0,pe.U2)(R,"")),le=ie[0],ue=ie[1],se=(0,d.useCallback)((function(e){(0,pe.t8)(R,e),ue(e)}),[]),ae=(0,d.useMemo)((function(){return(0,ge.Tw)(Y.reduce((function(e,n){var r;return e.concat((null===n||void 0===n||null===(r=n.repository_names)||void 0===r?void 0:r.map((function(e){var r;return{name:e,url:null===n||void 0===n||null===(r=n.urls)||void 0===r?void 0:r[0]}})))||[])}),[]),(function(e){return e.name}))}),[Y]);(0,d.useEffect)((function(){var e=(0,pe.U2)(R,null);if(W&&e){var n=null===ae||void 0===ae?void 0:ae.find((function(n){return n.name===e}));se(n?null===n||void 0===n?void 0:n.name:null)}}),[W,ae,se]);var de=_.ZP.git_files.detail(h?encodeURIComponent(h):null,{base_branch:i}),me=de.data,ye=de.mutate,_e=(0,d.useMemo)((function(){return null===me||void 0===me?void 0:me.git_file}),[me]);(0,d.useEffect)((function(){i&&ye()}),[i,ye]),(0,d.useEffect)((function(){null!==me&&void 0!==me&&me.error&&t({errors:null===me||void 0===me?void 0:me.error,response:me})}),[me,t]);var Oe=(0,d.useMemo)((function(){var e,n,r;return{modifiedFiles:null===q||void 0===q||null===(e=q.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return Ce(Ce({},e),{},(0,c.Z)({},n,!0))}),{}),stagedFiles:null===q||void 0===q||null===(n=q.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return Ce(Ce({},e),{},(0,c.Z)({},n,!0))}),{}),untrackedFiles:null===q||void 0===q||null===(r=q.untracked_files)||void 0===r?void 0:r.reduce((function(e,n){return Ce(Ce({},e),{},(0,c.Z)({},n,!0))}),{})}}),[q]),Ae=Oe.modifiedFiles,we=void 0===Ae?{}:Ae,ke=Oe.stagedFiles,Pe=void 0===ke?{}:ke,Se=Oe.untrackedFiles,Ee=void 0===Se?{}:Se;(0,d.useEffect)((function(){h&&(0,oe.Qr)(we)&&(0,oe.Qr)(Pe)&&(0,oe.Qr)(Ee)&&v(null)}),[we,h,Pe,Ee]);var Re=(0,d.useMemo)((function(){return(null===V||void 0===V?void 0:V.length)>=1?(0,F.jsx)($.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFileTree:H,files:V,isFileDisabled:function(){return!1},onClickFile:function(e){v((function(r){if(!r||r!==e){var t;if(!i)null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus();return e}return null}))},ref:e,renderAfterContent:function(e){var n,r,t=e.children,o=(null===t||void 0===t?void 0:t.length)>=1,i=(0,xe.a9)(e);o&&(i="".concat(i,"/"));var l={};return null!==we&&void 0!==we&&we[i]?(n="M",r="Modified",l.warning=!0):null!==Ee&&void 0!==Ee&&Ee[i]?(n="U",r="Untracked",l.danger=!0):null!==Pe&&void 0!==Pe&&Pe[i]&&(n="S",r="Staged",l.success=!0),o&&!n?null:(0,F.jsx)(x.Z,{mx:1,children:(0,F.jsx)(C.Z,{appearBefore:!0,label:r,widthFitContent:!0,children:(0,F.jsx)(g.ZP,Ce(Ce({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(g.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[i,H,e,V,we,n,v,Pe,Ee]),Ie=(0,d.useMemo)((function(){return!me||!_e||h&&(null===_e||void 0===_e?void 0:_e.filename)!==h}),[me,_e,h]),De=(0,d.useMemo)((function(){if(!h)return null;var e=_e||{},n=e.content,r=e.content_from_base;return(0,F.jsxs)(ve,{children:[!i&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(g.ZP,{muted:!0,children:"Please select a base branch to see the file diffs."})}),(null===_e||void 0===_e?void 0:_e.error)&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(g.ZP,{danger:!0,monospace:!0,preWrap:!0,children:null===_e||void 0===_e?void 0:_e.error})}),i&&!(null!==_e&&void 0!==_e&&_e.error)&&(0,F.jsxs)(F.Fragment,{children:[Ie&&(0,F.jsx)(x.Z,{p:L.cd,children:(0,F.jsx)(j.Z,{inverted:!0})}),!Ie&&(0,F.jsx)(a(),{compareMethod:s.DiffMethod.WORDS,newValue:n||"",oldValue:r||"",renderContent:function(e){return(0,F.jsx)(g.ZP,{monospace:!0,children:e})},splitView:!0,styles:be,useDarkTheme:!0})]})]})}),[i,_e,Ie,h]),Te=(0,d.useMemo)((function(){return B&&null!==q&&void 0!==q&&q.name?M:M.slice(0,1)}),[q,B]),Ne=(0,d.useMemo)((function(){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:{marginBottom:.5*L.iI,marginTop:.5*L.iI},children:(0,F.jsx)(G.Z,{compact:!0,onClickTab:function(e){var n=e.uuid;(0,je.u7)({tab:n})},selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:Te})}),(0,F.jsx)(m.Z,{light:!0})]})}),[Z,Te]),Me=(0,d.useMemo)((function(){return(0,F.jsx)(he,{actionRemoteName:ne,branch:q,fetchBranch:function(){H(),K()},loading:!W,remotes:Y,setActionRemoteName:te,showError:t})}),[ne,q,W,H,K,Y,te,t]),Le=(0,d.useMemo)((function(){return(0,F.jsx)(U,{actionRemoteName:ne,branch:q,branches:P,fetchBranch:H,fetchBranches:k,remotes:Y,setActionRemoteName:te,showError:t})}),[ne,q,P,H,k,Y,te,t]),Be=(0,d.useMemo)((function(){return(0,F.jsx)(ce,{branch:q,fetchBranch:H,modifiedFiles:we,setSelectedFilePath:v,showError:t,stagedFiles:Pe,untrackedFiles:Ee})}),[q,H,we,v,t,Pe,Ee]),He=(0,d.useMemo)((function(){return(0,F.jsx)(Q,{actionRemoteName:ne,branch:q,branches:P,fetchBranch:H,loading:!W,modifiedFiles:we,remotes:Y,repositories:ae,repositoryName:le,setActionRemoteName:te,setRepositoryName:se,showError:t,stagedFiles:Pe})}),[ne,q,P,W,H,we,Y,ae,le,te,se,t,Pe]);return(0,F.jsx)(J.Z,{after:De,afterHidden:!h,afterWidth:40*L.iI,before:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x.Z,{p:1,children:(0,F.jsx)(p.Z,{compact:!0,label:"Base branch",onChange:function(e){return l(e.target.value)},ref:n,small:!0,value:i||"",children:null===P||void 0===P?void 0:P.map((function(e){var n=e.name;return(0,F.jsx)("option",{value:n,children:n},n)}))})}),Re]}),mainContainerHeader:Ne,title:"Version control",uuid:"Version control/index",children:(0,F.jsxs)(x.Z,{p:L.cd,children:[!B&&(0,F.jsx)(j.Z,{inverted:!0}),B&&(0,F.jsxs)(F.Fragment,{children:[N.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Me,I.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Le,D.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Be,T.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&He]})]})})};function Oe(){return(0,F.jsx)(_e,{})}Oe.getInitialProps=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Ae=(0,l.Z)(Oe)},33766:function(e,n,r){"use strict";r.d(n,{O2:function(){return d},g_:function(){return h},u7:function(){return f}});var t=r(75582),o=r(82394),i=r(34376),l=r.n(i),c=r(59e3),u=r(24224);function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function a(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var d="_offset";function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.preserveParams,o=n.pushHistory,i=n.replaceParams,u=(0,c.iV)(),s={};r&&r.forEach((function(e){u[e]&&(s[e]=u[e])}));var d,f=i?s:u;d=window.location.pathname;var h=o?l().push:l().replace,m=a(a({},f),e);Object.entries(e).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],o=n[1];"undefined"!==typeof o&&null!==o||delete m[r]}));var v=(0,c.uM)(m);v.length>=1&&(v="?".concat(v));var b="".concat(d.split("?")[0]).concat(v);return h(l().router.pathname,b,{shallow:!0})}function h(e,n,r){var o=r.addingMultipleValues,i=r.isList,l=r.itemsPerPage,c=r.pushHistory,s=void 0!==c&&c,h=r.resetLimitParams,m=a({},e);o?Object.entries(n).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],o=n[1];if(Array.isArray(o)){var i="".concat(r,"[]");m[i]=o.map(String)}})):i?Object.entries(n).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],o=n[1],i=String(o),l="".concat(r,"[]"),c=m[l];c&&Array.isArray(c)?(c=c.map(String)).includes(i)?m[l]=(0,u.Od)(c,(function(e){return e===i})):m[l]=c.concat(i):m[l]=[i]})):m=a(a({},m),n),h&&(m._limit=l||20,m[d]=0),f(m,{pushHistory:s})}},75302:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return r(92589)}])}},function(e){e.O(0,[844,7607,7011,4407,1424,1005,7815,551,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);