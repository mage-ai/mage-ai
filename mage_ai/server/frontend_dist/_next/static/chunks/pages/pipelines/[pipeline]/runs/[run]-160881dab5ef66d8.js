(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8662],{64155:function(e,n,t){"use strict";t.d(n,{Eh:function(){return s},ht:function(){return d},t0:function(){return a}});var r=t(9518),i=t(82386),u=t(1286),o=t(31012),c=t(37391),l=t(49125),s=(l.iI,u.O$+3*l.iI+o.dN),a=r.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-15ofupc-0"})([""," overflow:auto;position:absolute;width:100%;",""],c.w5,(function(e){return"\n    height: calc(100vh - ".concat(i.uX,"px - ").concat(e.heightOffset,"px);\n  ")})),d=r.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-15ofupc-1"})(["padding:","px;",""],2*l.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}))},19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return a},Vx:function(){return p},eI:function(){return d},gU:function(){return v},tL:function(){return f},vJ:function(){return b}});var r,i,u=t(82394),o=t(92083),c=t.n(o);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,i=n.started_at,o=n.status,l=null;i&&r&&(l=c()(r).valueOf()-c()(i).valueOf());return s(s({},e),{},(0,u.Z)({},t,{runtime:l,status:o}))}),{})}function d(e){if(!e)return null;var n=new Date(c()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function p(e){return"string"!==typeof e?e:d(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(i||(i={}));var f=(r={},(0,u.Z)(r,i.DAY,86400),(0,u.Z)(r,i.HOUR,3600),(0,u.Z)(r,i.MINUTE,60),(0,u.Z)(r,i.SECOND,1),r);function v(e){var n=i.SECOND,t=e;return e%86400===0?(t/=86400,n=i.DAY):e%3600===0?(t/=3600,n=i.HOUR):e%60===0&&(t/=60,n=i.MINUTE),{time:t,unit:n}}function b(e,n){return e*f[n]}},47409:function(e,n,t){"use strict";t.d(n,{Az:function(){return c},BF:function(){return o},Do:function(){return s},VO:function(){return u},sZ:function(){return l}});var r,i=t(82394),u=t(66050).V,o=[u.INITIAL,u.RUNNING],c=[u.CANCELLED,u.COMPLETED,u.FAILED],l="__mage_variables",s=(r={},(0,i.Z)(r,u.CANCELLED,"Cancelled"),(0,i.Z)(r,u.COMPLETED,"Done"),(0,i.Z)(r,u.FAILED,"Failed"),(0,i.Z)(r,u.INITIAL,"Ready"),(0,i.Z)(r,u.RUNNING,"Running"),r)},23588:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var r=t(77837),i=t(75582),u=t(82394),o=t(38860),c=t.n(o),l=t(82684),s=t(83455),a=t(27125),d=t(60328),p=t(34744),f=t(93461),v=t(67971),b=t(87372),h=t(60547),O=t(47409),g=t(98781),j=t(41788),y=t(86673),m=t(54283),x=t(19711),Z=t(82531),_=t(26304),P=t(32316),w=t(62976),D=t(73752),E=t(82635),k=t(49125),N=t(64155),I=t(56681),S=t(19395),T=t(90211),C=t(28598),R=["blockRuns","columns","dataType","height","heightOffset","loadingData","pipeline","renderColumnHeader","rows","selectedRun","selectedTab","setSelectedTab","textData"];function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M={uuid:"Dependency tree"},U={uuid:"Block output"},B=[U,M];var F=t(59920),H=t(96510),G=t(66653);function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function q(e){var n,t=e.pipeline,r=e.pipelineRun,u=(0,l.useState)(null),o=u[0],c=u[1],j=(0,l.useState)(B[0]),L=j[0],J=j[1],q=(0,l.useState)(null),V=q[0],X=q[1],z=t.uuid,$=Z.ZP.pipelines.detail(z,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,W=(0,l.useMemo)((function(){return Y(Y({},null===$||void 0===$?void 0:$.pipeline),{},{uuid:z})}),[$,z]),K=Z.ZP.pipeline_runs.detail(r.id,{},{refreshInterval:3e3,revalidateOnFocus:!0}).data,Q=(0,l.useMemo)((function(){return(null===K||void 0===K?void 0:K.pipeline_run)||{}}),[K]),ee=Q.block_runs,ne=Q.execution_date,te=Q.id,re=Q.status,ie=(0,s.Db)(Z.ZP.pipeline_runs.useUpdate(te),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){c(null)},onErrorCallback:function(e,n){return X({errors:n,response:e})}})}}),ue=(0,i.Z)(ie,2),oe=ue[0],ce=ue[1].isLoading,le=Z.ZP.outputs.block_runs.list(null===o||void 0===o?void 0:o.id),se=le.data,ae=le.loading,de=(null===se||void 0===se||null===(n=se.outputs)||void 0===n?void 0:n[0])||{},pe=de.sample_data,fe=de.text_data,ve=de.type;(0,l.useEffect)((function(){o||(null===L||void 0===L?void 0:L.uuid)!==U.uuid||J(M)}),[o,null===L||void 0===L?void 0:L.uuid]);var be=(0,l.useMemo)((function(){return ee||[]}),[Q]),he=((null===pe||void 0===pe?void 0:pe.columns)||[]).slice(0,40),Oe=(null===pe||void 0===pe?void 0:pe.rows)||[],ge=(0,l.useMemo)((function(){return(0,C.jsx)(a.Z,{blockRuns:be,onClickRow:function(e){c((function(n){var t=be[e],r=(null===n||void 0===n?void 0:n.id)!==t.id?t:null;return r&&J((function(e){return e!==U?U:e})),r}))},pipeline:W,selectedRun:o,setErrors:X})}),[be,W,o]),je=(null===W||void 0===W?void 0:W.type)!==g.qL.STREAMING&&re&&re!==O.VO.COMPLETED,ye=((null===W||void 0===W?void 0:W.type)===g.qL.PYTHON||(null===W||void 0===W?void 0:W.type)===g.qL.INTEGRATION)&&o&&O.Az.includes(re);return(0,C.jsxs)(h.Z,{breadcrumbs:[{label:function(){return"Runs"},linkProps:{as:"/pipelines/".concat(z,"/runs"),href:"/pipelines/[pipeline]/runs"}},{label:function(){return ne}}],buildSidekick:function(e){return function(e){var n=e.blockRuns,t=e.columns,r=e.dataType,i=e.height,u=e.heightOffset,o=e.loadingData,c=e.pipeline,l=e.renderColumnHeader,s=e.rows,a=e.selectedRun,d=e.selectedTab,p=e.setSelectedTab,f=e.textData,b=A({},(0,_.Z)(e,R));b.blockStatus=(0,S.IJ)(n);var h=(0,C.jsx)(y.Z,{ml:2,children:(0,C.jsx)(x.ZP,{children:"This block run has no output."})}),O=s&&s.length>0?(0,C.jsx)(w.Z,{columnHeaderHeight:l?N.Eh:0,columns:t,height:i-u-90,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,renderColumnHeader:l,rows:s}):h,g=(0,T.Pb)(f)?JSON.stringify(JSON.parse(f),null,2):f,j=f?(0,C.jsx)(y.Z,{ml:2,children:(0,C.jsx)(x.ZP,{monospace:!0,children:(0,C.jsx)("pre",{children:g})})}):h,Z=d&&p;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{position:"fixed",top:"50px"},children:Z&&(0,C.jsx)(y.Z,{py:k.cd,children:(0,C.jsx)(P.Z,{onClickTab:p,selectedTabUUID:null===d||void 0===d?void 0:d.uuid,tabs:a?B:[M]})})}),(0,C.jsxs)("div",{style:{position:"relative",top:"75px"},children:[(!a||M.uuid===(null===d||void 0===d?void 0:d.uuid))&&(0,C.jsx)(D.Z,A(A({},b),{},{height:i,heightOffset:(u||0)+(Z?I.u$:0),pipeline:c})),a&&U.uuid===(null===d||void 0===d?void 0:d.uuid)&&(0,C.jsxs)(C.Fragment,{children:[o&&(0,C.jsx)(y.Z,{mt:2,children:(0,C.jsx)(v.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,C.jsx)(m.Z,{color:"white",large:!0})})}),!o&&r===E.Gi.TABLE&&O,!o&&r!==E.Gi.TABLE&&j]})]})]})}(Y(Y({},e),{},{blockRuns:be,columns:he,dataType:ve,loadingData:ae,rows:Oe,selectedRun:o,selectedTab:L,setSelectedTab:J,showDynamicBlocks:!0,textData:fe}))},errors:V,pageName:F.M.RUNS,pipeline:W,setErrors:X,subheader:(je||ye)&&(0,C.jsxs)(v.Z,{alignItems:"center",children:[O.BF.includes(re)&&(0,C.jsxs)(f.Z,{children:[(0,C.jsx)(x.ZP,{bold:!0,default:!0,large:!0,children:"Pipeline is running"}),(0,C.jsx)(y.Z,{mr:1}),(0,C.jsx)(m.Z,{inverted:!0}),(0,C.jsx)(y.Z,{mr:2})]}),je&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{danger:!0,loading:ce,onClick:function(e){(0,G.j)(e),oe({pipeline_run:{pipeline_run_action:"retry_blocks"}})},outline:!0,children:"Retry incomplete blocks"}),(0,C.jsx)(y.Z,{mr:2})]}),ye&&(0,C.jsxs)(d.Z,{loading:ce,onClick:function(e){(0,G.j)(e),oe({pipeline_run:{from_block_uuid:o.block_uuid,pipeline_run_action:"retry_blocks"}})},outline:!0,primary:!0,children:["Retry from selected block (",o.block_uuid,")"]})]}),title:function(e){var n=e.name;return"".concat(n," runs")},uuid:"".concat(F.M.RUNS,"_").concat(z,"_").concat(te),children:[(0,C.jsx)(y.Z,{mt:k.cd,px:k.cd,children:(0,C.jsx)(b.Z,{level:5,children:"Block runs"})}),(0,C.jsx)(p.Z,{light:!0,mt:k.cd,short:!0}),ge]})}q.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query,r=t.pipeline,i=t.run,e.abrupt("return",{pipeline:{uuid:r},pipelineRun:{id:i}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var V=(0,j.Z)(q)},39525:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/runs/[run]",function(){return t(23588)}])}},function(e){e.O(0,[844,7607,5896,4804,1774,9350,5872,2125,1424,1005,8180,547,3714,3752,1286,4822,2786,9774,2888,179],(function(){return n=39525,e(e.s=n);var n}));var n=e.O();_N_E=n}]);