(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8778],{7432:function(e,n,t){var r={"./Active4D.json":[266,266],"./All Hallows Eve.json":[4450,4450],"./Amy.json":[88849,8849],"./Birds of Paradise.json":[78097,8097],"./Blackboard.json":[88018,6115],"./Brilliance Black.json":[73835,3835],"./Brilliance Dull.json":[6507,6507],"./Chrome DevTools.json":[22508,2508],"./Clouds Midnight.json":[49566,9566],"./Clouds.json":[57951,7951],"./Cobalt.json":[80826,826],"./Cobalt2.json":[98256,8256],"./Dawn.json":[76958,6958],"./Dominion Day.json":[89307,9307],"./Dracula.json":[33453,3453],"./Dreamweaver.json":[19363,9363],"./Eiffel.json":[82481,2481],"./Espresso Libre.json":[44776,4776],"./GitHub.json":[10739,739],"./IDLE.json":[67947,7947],"./Katzenmilch.json":[81240,1240],"./Kuroir Theme.json":[4388,4388],"./LAZY.json":[25164,5164],"./MagicWB (Amiga).json":[76443,6443],"./Merbivore Soft.json":[99361,9361],"./Merbivore.json":[86042,6042],"./Monokai Bright.json":[14883,4883],"./Monokai.json":[34454,4454],"./Night Owl.json":[60261,261],"./Nord.json":[59785,9785],"./Oceanic Next.json":[58920,8920],"./Pastels on Dark.json":[38901,8901],"./Slush and Poppies.json":[26434,6434],"./Solarized-dark.json":[36116,6116],"./Solarized-light.json":[5008,5008],"./SpaceCadet.json":[20440,440],"./Sunburst.json":[68018,8018],"./Textmate (Mac Classic).json":[15824,5824],"./Tomorrow-Night-Blue.json":[81150,1150],"./Tomorrow-Night-Bright.json":[8762,8762],"./Tomorrow-Night-Eighties.json":[82545,2545],"./Tomorrow-Night.json":[99855,9855],"./Tomorrow.json":[34092,4092],"./Twilight.json":[93898,3898],"./Upstream Sunburst.json":[98807,8807],"./Vibrant Ink.json":[89927,9927],"./Xcode_default.json":[64042,4042],"./Zenburnesque.json":[33467,3467],"./iPlastic.json":[88277,8277],"./idleFingers.json":[5104,5104],"./krTheme.json":[9633,9633],"./monoindustrial.json":[15729,5729],"./themelist.json":[79437,9437]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t.t(o,19)}))}o.keys=function(){return Object.keys(r)},o.id=7432,e.exports=o},81617:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Jl}});var r,o,i,c=t(77837),l=t(12757),u=t(82394),a=t(38860),s=t.n(a),d=t(56085),f=t(82684),p=t(83455),h=t(34376),m=t(77555);!function(e){e.CHART="chart",e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.SCRATCHPAD="scratchpad",e.TRANSFORMER="transformer"}(i||(i={}));var v,g=[i.CHART,i.DATA_EXPORTER,i.DATA_LOADER,i.SCRATCHPAD,i.TRANSFORMER],b=[i.CHART,i.SCRATCHPAD];!function(e){e.EXECUTED="executed",e.FAILED="failed",e.NOT_EXECUTED="not_executed",e.UPDATED="updated"}(v||(v={}));var x=(r={},(0,u.Z)(r,i.DATA_EXPORTER,"Data exporter"),(0,u.Z)(r,i.DATA_LOADER,"Data loader"),(0,u.Z)(r,i.SCRATCHPAD,"Scratchpad"),(0,u.Z)(r,i.TRANSFORMER,"Transformer"),r),y=[i.DATA_EXPORTER,i.DATA_LOADER,i.TRANSFORMER],j=(o={},(0,u.Z)(o,i.DATA_EXPORTER,"DE"),(0,u.Z)(o,i.DATA_LOADER,"DL"),(0,u.Z)(o,i.SCRATCHPAD,"SP"),(0,u.Z)(o,i.TRANSFORMER,"TF"),t(67971)),k=t(46313),O=t(19711),C=t(1132),w=t(73942),Z=t(28598),_=(0,k.css)(["min-width:18px;padding-left:2px;padding-right:2px;"," "," "," "," "," ",""],(function(e){return!e.disabled&&"\n    background-color: ".concat((e.theme.content||C.Z.content).inverted,";\n  ")}),(function(e){return e.disabled&&"\n    // background-color: ".concat((e.theme.monotone||C.Z.monotone).grey400," !important;\n  ")}),(function(e){return e.mutedDisabled&&"\n    opacity: 0.3;\n  "}),(function(e){return!e.borderless&&"\n    box-shadow: ".concat((e.theme.shadow||C.Z.shadow).tiny,";\n    padding-bottom: 3px;\n    padding-top: 3px;\n  ")}),(function(e){return e.borderless&&"\n    border-radius: ".concat(w.BG,"px;\n    padding-bottom: 4px;\n    padding-top: 4px;\n  ")}),(function(e){return e.spacingLeft&&"\n    margin-left: ".concat(e.spacingLeft,"px;\n  ")})),P=k.default.kbd.withConfig({displayName:"KeyboardText__KbdStyle",componentId:"sc-18540m4-0"})(["",""],_),I=k.default.div.withConfig({displayName:"KeyboardText__DivStyle",componentId:"sc-18540m4-1"})(["",""],_);var E=function(e){var n=e.borderless,t=e.disabled,r=e.inline,o=e.keyText,i=e.monospace,c=e.mutedDisabled,l=e.spacingLeft,u=r?I:P,a=(0,f.useContext)(k.ThemeContext),s={};if(!n){var d,p;if(t)s.borderColor=null===(d=(null===a||void 0===a?void 0:a.monotone)||C.Z.monotone)||void 0===d?void 0:d.grey400;else s.borderColor=null===(p=(null===a||void 0===a?void 0:a.content)||C.Z.content)||void 0===p?void 0:p.active;s.borderRadius=w.BG,s.borderStyle="solid",s.borderWidth=1,s.overflow="hidden"}return(0,Z.jsx)(O.ZP,{center:!0,inline:!0,monospace:i,muted:t||c,style:s,xsmall:!0,children:(0,Z.jsx)(u,{borderless:n,disabled:t,mutedDisabled:c,spacingLeft:l,children:o})})},S=t(49125),T=k.default.div.withConfig({displayName:"KeyboardTextGroup__SpacingStyle",componentId:"sc-1bx41p7-0"})([""," "," ",""],(function(e){return e.small&&"\n    margin-left: ".concat(.25*S.iI,"px;\n  ")}),(function(e){return!e.small&&"\n    margin-left: ".concat(.25*S.iI,"px;\n  ")}),(function(e){return e.marginRight&&"\n    margin-right: ".concat(.25*S.iI,"px;\n  ")}));var A=function(e){var n=e.borderless,t=e.disabled,r=e.keyTextGroups,o=e.inline,i=e.monospace,c=e.mutedDisabled,l=e.small,u=e.uuidForKey,a=[],s=[];return r.forEach((function(e,r){var o=[];e.forEach((function(e,r){s.push(e),r>=1&&o.push((0,Z.jsx)(T,{small:l},"spacing-".concat(e))),o.push((0,Z.jsx)(E,{borderless:n,disabled:t,inline:!0,keyText:e,monospace:i,mutedDisabled:c},"key-".concat(s.join("-"),"-").concat(u)))})),r>=1&&a.push((0,Z.jsx)(T,{marginRight:!0,children:(0,Z.jsx)(O.ZP,{monospace:i,muted:!0,small:!l,xsmall:l,children:"then"})},"then-".concat(r))),a.push.apply(a,o)})),(0,Z.jsx)(j.Z,{alignItems:"center",inline:o,children:a})},R=t(86673),D=t(10503),M=k.default.div.withConfig({displayName:"indexstyle__FlyoutMenuContainerStyle",componentId:"sc-1o7k6f4-0"})(["position:absolute;max-height:","px;"," ",""],58*S.iI,(function(e){return e.width&&"\n    min-width: 0px;\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||C.Z.shadow).popup,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n    }\n  ")})),F=k.default.div.withConfig({displayName:"indexstyle__TitleContainerStyle",componentId:"sc-1o7k6f4-1"})(["padding:","px;padding-bottom:0;",""],S.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).popup,";\n  ")})),B=k.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-1o7k6f4-2"})(["align-items:center;justify-content:space-between;padding:","px;"," "," "," "," ",""],S.iI,(function(e){return!e.disabled&&"  \n    &:hover {\n      cursor: default;\n      background-color: ".concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n    }\n  ")}),(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).popup,";\n  ")}),(function(e){return e.disabled&&"\n    color: ".concat((e.theme.content||C.Z.content).disabled,";\n    cursor: not-allowed;\n\n    &:hover {\n      color: ").concat((e.theme.content||C.Z.content).disabled,";\n    }\n  ")}),(function(e){return e.indent&&"\n    padding-left: ".concat(2*S.iI,"px;\n  ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n  ")})),N=t(16115);function H(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}var L=t(41150);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var W,G=function(e){var n,t,r=e.items,o=e.left,i=e.onClickCallback,c=e.open,l=e.parentRef,a=e.rightOffset,s=e.topOffset,d=void 0===s?0:s,p=e.uuid,h=e.width,m=(0,f.useState)([]),v=m[0],g=m[1],b=(0,f.useState)({}),x=b[0],y=b[1],k=(0,f.useState)(0),C=k[0],w=k[1],_=((null===l||void 0===l||null===(n=l.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).height,P=(0,f.useRef)({}),I=(0,f.useRef)(null),E=(0,L.y)(),S=E.registerOnKeyDown,T=E.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){T(p)}}),[T,p]),S(p,(function(e,n,t){if(c){var o=v[0];if(n[N.kD])H(e),"undefined"===typeof o||o===r.length-1?g([0]):g([o+1]);else if(n[N.Bu])H(e),g("undefined"===typeof o||0===o?[r.length-1]:[o-1]);else if(n[N.Uq]&&"undefined"!==typeof o){var l,u;null===(l=r[o])||void 0===l||null===(u=l.onClick)||void 0===u||u.call(l),null===i||void 0===i||i()}else null===r||void 0===r||r.forEach((function(e){var r=e.keyboardShortcutValidation;null===r||void 0===r||r({keyHistory:t,keyMapping:n})}))}}),[v,r,i,c,g]),(0,f.useEffect)((function(){c||g([])}),[c]),r?function e(n,t,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0;return c+=1,(0,Z.jsx)(M,{style:{display:r||x[t]?null:"none",left:"undefined"===typeof a&&(1===c?o||0:"100%"),right:1===c?a:null,top:1===c?(_||0)+d:C||0},width:h,children:null===n||void 0===n?void 0:n.map((function(n,t){var r=n.disabled,o=n.items,a=n.indent,s=n.isGroupingTitle,d=n.keyTextGroups,p=n.label,h=n.onClick,m=n.uuid;return l.current[m]=(0,f.createRef)(),s?(0,Z.jsx)(F,{children:(0,Z.jsx)(O.ZP,{bold:!0,muted:!0,noWrapping:!0,children:p()},m)}):(0,Z.jsxs)(B,{disabled:r,highlighted:v[0]===t,indent:a,onClick:function(e){e.preventDefault(),h&&!r&&(null===h||void 0===h||h(),null===i||void 0===i||i())},onMouseEnter:function(){var e,n;(y((function(e){return U(U({},e),{},(0,u.Z)({},m,!0))})),1===c)&&w((null===(e=l.current[m])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0)},onMouseLeave:function(){y((function(e){return U(U({},e),{},(0,u.Z)({},m,!1))}))},ref:l.current[m],children:[(0,Z.jsxs)(j.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,Z.jsx)(O.ZP,{disabled:r,noWrapping:!0,children:p()}),o&&(0,Z.jsx)(R.Z,{ml:2,children:(0,Z.jsx)(D.ol,{})}),d&&(0,Z.jsx)(R.Z,{ml:4,ref:I,children:(0,Z.jsx)(A,{keyTextGroups:d})})]}),o&&e(o,m,!1,c,l)]},m)}))})}(r,void 0,c,0,P):null},K="buckets",V="chart_style",Q="group_by",q="height",X="index",Y="legend_labels",J="limit",$="metrics",ee="time_interval",ne="width_percentage",te="x",re="y",oe="y_sort_order",ie=[te,re];!function(e){e.BAR_CHART="bar chart",e.HISTOGRAM="histogram",e.LINE_CHART="line chart",e.PIE_CHART="pie chart",e.TABLE="table",e.TIME_SERIES_BAR_CHART="time series bar chart",e.TIME_SERIES_LINE_CHART="time series line chart"}(W||(W={}));var ce,le,ue=[W.BAR_CHART,W.HISTOGRAM,W.LINE_CHART,W.PIE_CHART,W.TABLE,W.TIME_SERIES_BAR_CHART,W.TIME_SERIES_LINE_CHART];!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(ce||(ce={})),function(e){e.AVERAGE="average",e.COUNT="count",e.COUNT_DISTINCT="count_distinct",e.MAX="max",e.MEDIAN="median",e.MIN="min",e.MODE="mode",e.SUM="sum"}(le||(le={}));var ae,se,de,fe,pe,he,me,ve,ge,be=[le.AVERAGE,le.COUNT,le.COUNT_DISTINCT,le.MAX,le.MEDIAN,le.MIN,le.MODE,le.SUM];!function(e){e.ASCENDING="ascending",e.DESCENDING="descending"}(ae||(ae={})),function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.MONTH="month",e.ORIGINAL="original",e.SECOND="second",e.WEEK="week",e.YEAR="year"}(se||(se={})),function(e){e.COLUMNS="columns",e.METRICS="metrics",e.NUMBER="number"}(ge||(ge={}));var xe={noCode:[{label:function(){return"time column"},settings:{maxValues:1},type:ge.COLUMNS,uuid:Q},{label:function(){return"time interval"},options:[se.ORIGINAL,se.SECOND,se.MINUTE,se.HOUR,se.DAY,se.WEEK,se.MONTH,se.YEAR],uuid:ee},{label:function(){return"metrics"},type:ge.METRICS,uuid:$}]},ye=(de={},(0,u.Z)(de,W.BAR_CHART,{noCode:[{label:function(){return"group by columns"},type:ge.COLUMNS,uuid:Q},{label:function(){return"metrics"},type:ge.METRICS,uuid:$},{autoRun:!0,label:function(){return"chart style"},options:[ce.HORIZONTAL,ce.VERTICAL],uuid:V},{autoRun:!0,label:function(){return"sort direction"},options:[null,ae.ASCENDING,ae.DESCENDING],uuid:oe}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:te},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:re}]}),(0,u.Z)(de,W.HISTOGRAM,{noCode:[{label:function(){return"number column for chart"},settings:{maxValues:1},type:ge.COLUMNS,uuid:Q},{autoRun:!0,label:function(){return"Number of buckets"},type:ge.NUMBER,uuid:K}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:te}]}),(0,u.Z)(de,W.LINE_CHART,{noCode:[{label:function(){return"group by columns"},settings:{maxValues:1},type:ge.COLUMNS,uuid:Q},{label:function(){return"metrics"},type:ge.METRICS,uuid:$}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:te},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:re},{label:function(){return"labels of lines in chart (comma separated)"},uuid:Y}]}),(0,u.Z)(de,W.PIE_CHART,{noCode:[{label:function(){return"column for chart"},settings:{maxValues:1},type:ge.COLUMNS,uuid:Q},{autoRun:!0,label:function(){return"Number of slices"},type:ge.NUMBER,uuid:K}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:te}]}),(0,u.Z)(de,W.TABLE,{noCode:[{label:function(){return"columns"},type:ge.COLUMNS,uuid:Q},{label:function(){return"max number of rows"},type:ge.NUMBER,uuid:J}],code:[{label:function(){return"variable name of columns"},monospace:!0,uuid:te},{label:function(){return"variable name of rows"},monospace:!0,uuid:re}]}),(0,u.Z)(de,W.TIME_SERIES_BAR_CHART,xe),(0,u.Z)(de,W.TIME_SERIES_LINE_CHART,xe),de),je=(fe={},(0,u.Z)(fe,W.BAR_CHART,{configuration:function(e){var n;return n={},(0,u.Z)(n,te,"x"),(0,u.Z)(n,re,"y"),(0,u.Z)(n,V,ce.VERTICAL),n},content:function(e){return"columns = df_1.columns\nx = df_1.columns[:7]\ny = [[v] for v in [len(df_1[col].unique()) for col in x]]\n"}}),(0,u.Z)(fe,W.HISTOGRAM,{configuration:function(e){var n;return n={},(0,u.Z)(n,K,10),(0,u.Z)(n,te,"x"),n},content:function(e){return"columns = df_1.columns\ncol = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))[0]\nx = df_1[col]\n"}}),(0,u.Z)(fe,W.LINE_CHART,{configuration:function(e){var n;return n={},(0,u.Z)(n,te,"x"),(0,u.Z)(n,re,"y"),n},content:function(e){return"columns = df_1.columns\ncols = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))\nx = df_1[cols[0]]\ny = [df_1[cols[1]]]\n"}}),(0,u.Z)(fe,W.PIE_CHART,{configuration:function(e){var n;return n={},(0,u.Z)(n,K,7),(0,u.Z)(n,te,"x"),n},content:function(e){return"x = df_1[df_1.columns[0]]"}}),(0,u.Z)(fe,W.TABLE,{configuration:function(e){var n;return n={},(0,u.Z)(n,J,10),(0,u.Z)(n,te,"x"),(0,u.Z)(n,re,"y"),n},content:function(e){return"x = df_1.columns\ny = df_1.to_numpy()"}}),(0,u.Z)(fe,W.TIME_SERIES_BAR_CHART,{configuration:function(e){return(0,u.Z)({},ee,se.ORIGINAL)}}),(0,u.Z)(fe,W.TIME_SERIES_LINE_CHART,{configuration:function(e){return(0,u.Z)({},ee,se.ORIGINAL)}}),fe),ke=(ve={},(0,u.Z)(ve,W.BAR_CHART,(pe={},(0,u.Z)(pe,te,(function(){return"must be a list of booleans, dates, integers, floats, or strings."})),(0,u.Z)(pe,re,(function(){return"must be a list of lists containing integers or floats."})),pe)),(0,u.Z)(ve,W.HISTOGRAM,(0,u.Z)({},te,(function(){return"must be a list of integers or floats."}))),(0,u.Z)(ve,W.LINE_CHART,(he={},(0,u.Z)(he,te,(function(){return"must be a list of integers or floats."})),(0,u.Z)(he,re,(function(){return"must be a list of lists containing integers or floats. Each list is a single line in the chart."})),he)),(0,u.Z)(ve,W.PIE_CHART,(0,u.Z)({},te,(function(){return"must be a list of booleans, dates, integers, floats, or strings."}))),(0,u.Z)(ve,W.TABLE,(me={},(0,u.Z)(me,te,(function(){return"must be a list of strings."})),(0,u.Z)(me,re,(function(){return"must be a list of lists containing booleans, dates, integers, floats, or strings."})),me)),ve),Oe=[{label:function(){return"% of missing values"},widgetTemplate:function(e){var n,t=e.block;return{name:"missing values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,u.Z)(n,te,"columns_with_mising_values"),(0,u.Z)(n,re,"percentage_of_missing_values"),(0,u.Z)(n,V,ce.HORIZONTAL),(0,u.Z)(n,oe,ae.DESCENDING),(0,u.Z)(n,"chart_type",W.BAR_CHART),n),content:"number_of_rows = len(df_1.index)\ncolumns_with_mising_values = []\npercentage_of_missing_values = []\nfor col in df_1.columns:\n    missing = df_1[col].isna().sum()\n    if missing > 0:\n        columns_with_mising_values.append(col)\n        percentage_of_missing_values.append(100 * missing / number_of_rows)\n"}}},{label:function(){return"Unique values"},widgetTemplate:function(e){var n,t=e.block;return{name:"unique values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,u.Z)(n,te,"columns"),(0,u.Z)(n,re,"number_of_unique_values"),(0,u.Z)(n,V,ce.HORIZONTAL),(0,u.Z)(n,oe,ae.DESCENDING),(0,u.Z)(n,"chart_type",W.BAR_CHART),n),content:"columns = df_1.columns\nnumber_of_unique_values = [df_1[col].nunique() for col in columns]\n"}}},{label:function(){return"Most frequent values"},widgetTemplate:function(e){var n,t=e.block;return{name:"most frequent values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,u.Z)(n,q,3e3),(0,u.Z)(n,X,"column_index"),(0,u.Z)(n,te,"columns"),(0,u.Z)(n,re,"rows"),(0,u.Z)(n,"chart_type",W.TABLE),n),content:"columns = ['mode value', 'frequency', '% of values']\n\ncolumn_index = []\nrows = []\nfor col in df_1.columns:\n    value_counts = df_1[col].value_counts()\n    if len(value_counts.index) == 0:\n        continue\n    column_value = value_counts.index[0]\n    value = value_counts[column_value]\n    number_of_rows = df_1[col].count()\n    column_index.append(col)\n    rows.append([\n        column_value,\n        f'{round(100 * value / number_of_rows, 2)}%',\n        value,\n      ])\n"}}},{label:function(){return"Summary overview"},widgetTemplate:function(e){var n,t=e.block;return{name:"summary overview for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,u.Z)(n,q,3e3),(0,u.Z)(n,X,"stats"),(0,u.Z)(n,te,"headers"),(0,u.Z)(n,re,"rows"),(0,u.Z)(n,"chart_type",W.TABLE),n),content:"from mage_ai.data_cleaner.column_types.column_type_detector import infer_column_types\n\n\nheaders = ['value']\nstats = ['Columns', 'Rows']\nrows = [[len(df_1.columns)], [len(df_1.index)]]\n\ncol_counts = {}\nfor col, col_type in infer_column_types(df_1).items():\n    col_type_name = col_type.value\n    if not col_counts.get(col_type_name):\n        col_counts[col_type_name] = 0\n    col_counts[col_type_name] += 1\n\nfor col_type, count in sorted(col_counts.items()):\n    stats.append(f'# of {col_type}')\n    rows.append([count])\n"}}},{label:function(){return"Feature profiles"},widgetTemplate:function(e){var n,t=e.block;return{name:"feature profiles for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(n={},(0,u.Z)(n,q,3e3),(0,u.Z)(n,X,"stats"),(0,u.Z)(n,te,"columns"),(0,u.Z)(n,re,"rows"),(0,u.Z)(n,"chart_type",W.TABLE),n),content:"from mage_ai.data_cleaner.column_types.column_type_detector import infer_column_types\nimport statistics\n\n\ncolumns_and_types = infer_column_types(df_1).items()\ncolumns = [t[0] for t in columns_and_types]\nstats = ['Type', 'Missing values', 'Unique values', 'Min', 'Max', 'Mean', 'Median', 'Mode']\nrows = [[] for _ in stats]\n\nfor col, col_type in columns_and_types:\n    series = df_1[col]\n    min_value = None\n    max_value = None\n    mean = None\n    median = None\n\n    not_null = series[series.notnull()]\n\n    if col_type.value in ['number', 'number_with_decimals']:\n        count = len(not_null.index)\n        if count >= 1:\n            mean = round(not_null.sum() / count, 2)\n            median = sorted(not_null)[int(count / 2)]\n        min_value = round(series.min(), 2)\n        max_value = round(series.max(), 2)\n    else:\n        min_value = not_null.astype(str).min()\n        max_value = not_null.astype(str).max()\n\n    _, mode = sorted(\n      [(v, k) for k, v in not_null.value_counts().items()],\n      reverse=True,\n    )[0]\n\n    for idx, value in enumerate([\n        col_type.value,\n        len(series[series.isna()].index),\n        len(series.unique()),\n        min_value,\n        max_value,\n        mean,\n        median,\n        mode,\n    ]):\n      rows[idx].append(value)\n"}}}],Ce=t(29817);function we(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ze(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?we(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):we(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _e=function(e){var n=e.addWidget,t=e.block,r=e.left,o=e.rightOffset,c=e.onClickCallback,l=e.open,u=e.parentRef,a=e.runBlock,s=e.topOffset,d=(0,f.useMemo)((function(){return ue.map((function(e){var r,o,c={configuration:{chart_type:e},type:i.CHART,upstream_blocks:t?[t.uuid]:null},l=je[e],u=(null===l||void 0===l||null===(r=l.configuration)||void 0===r?void 0:r.call(l,c))||{},s=(null===l||void 0===l||null===(o=l.content)||void 0===o?void 0:o.call(l,c))||null,d=e;return t&&(d="".concat(d," for ").concat(t.uuid)),{label:function(){return(0,Ce.vg)(e)},onClick:function(){return n(Ze(Ze({},c),{},{name:"".concat(d," ").concat((0,Ce.Mp)()),configuration:Ze(Ze({},c.configuration),u),content:s}),{onCreateCallback:function(e){t&&([v.EXECUTED,v.UPDATED].includes(t.status)?a({block:e,code:s,disableReset:!0}):a({block:t,runDownstream:!0}))}})},uuid:e}}))}),[ue,t,a]),p=(0,f.useMemo)((function(){return Oe.map((function(e){var r=e.label,o=Ze(Ze({},(0,e.widgetTemplate)({block:t})),{},{type:i.CHART,upstream_blocks:t?[t.uuid]:null});return{label:r,onClick:function(){return n(o,{onCreateCallback:function(e){t&&([v.EXECUTED,v.UPDATED].includes(t.status)?a({block:e,code:e.content,disableReset:!0}):a({block:t,runDownstream:!0}))}})},uuid:r()}}))}),[Oe,n,t,a]);return(0,Z.jsx)(G,{items:[{isGroupingTitle:!0,label:function(){return"Custom charts"},uuid:"custom_charts"}].concat((0,m.Z)(d),[{isGroupingTitle:!0,label:function(){return"Templates"},uuid:"chart_templates"}],(0,m.Z)(p)),left:r,onClickCallback:c,open:l,parentRef:u,rightOffset:o,topOffset:s,uuid:"CommandButtons/add_charts",width:25*S.iI})},Pe=t(60328),Ie=t(47999),Ee=t(26304),Se=t(93461),Te=["children"];function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var De=k.default.div.withConfig({displayName:"Circle__CircleStyle",componentId:"sc-1o70504-0"})([""," "," "," "," "," "," ",""],(function(e){return!e.square&&"\n    border-radius: 50%;\n  "}),(function(e){return e.square&&"\n    border-radius: ".concat(w.BG,"px;\n  ")}),(function(e){return!e.color&&!(e.borderSize||e.borderColor)&&"\n    background-color: ".concat((e.theme.content||C.Z.content).muted,";\n  ")}),(function(e){return(e.borderSize||e.borderColor)&&"\n    border: ".concat(e.borderSize||1,"px solid ").concat(e.borderColor||(e.theme.content||C.Z.content).active,";\n  ")}),(function(e){return e.color&&"\n    background-color: ".concat(e.color,";\n  ")}),(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n    width: ").concat(e.size,"px;\n  ")}),(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.borders||C.Z.borders).danger,";\n  ")}));var Me,Fe,Be=function(e){var n=e.children,t=(0,Ee.Z)(e,Te);return(0,Z.jsx)(De,Re(Re({},t),{},{children:(0,Z.jsx)(j.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,justifyContent:"center",children:n&&(0,Z.jsx)(Se.Z,{children:n})})}))};!function(e){e.PY="py",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(Fe||(Fe={}));var Ne,He,Le=[Fe.TXT,Fe.YAML,Fe.YML],ze=new RegExp(Le.map((function(e){return".".concat(e,"$")})).join("|")),Ue="charts",We="pipelines",Ge=(Me={},(0,u.Z)(Me,Fe.PY,"python"),(0,u.Z)(Me,Fe.TXT,"text"),(0,u.Z)(Me,Fe.YAML,"yaml"),(0,u.Z)(Me,Fe.YML,"yaml"),Me),Ke=1.5*S.iI,Ve=1*Ke+S.iI/2,Qe=k.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n    ")})),qe=function(e){return e.at(-1)},Xe=function(e){return e.at(-2).slice(0,-1)},Ye=function(e){return qe(e).slice(0,-3)};!function(e){e.DATA_LOADERS="data_loaders",e.DATA_EXPORTERS="data_exporters",e.GLOBAL_VARIABLES="global_variables",e.PIPELINES="pipelines",e.SCRATCHPADS="scratchpads",e.TRANSFORMERS="transformers"}(Ne||(Ne={})),function(e){e.INIT_PY="__init__.py"}(He||(He={}));var Je,$e,en="sideview";!function(e){e.CHARTS="charts",e.DATA="data",e.GRAPHS="graphs",e.REPORTS="reports",e.TREE="tree",e.VARIABLES="variables"}($e||($e={}));var nn=[$e.CHARTS,$e.DATA,$e.REPORTS,$e.TREE],tn=[$e.DATA,$e.REPORTS,$e.GRAPHS],rn=[{key:$e.TREE,label:"Tree"},{key:$e.CHARTS,label:"Charts"},{key:$e.VARIABLES,label:"Variables"},{key:$e.DATA,label:"Data"}],on=(Je={},(0,u.Z)(Je,$e.CHARTS,D.er),(0,u.Z)(Je,$e.DATA,D.t1),(0,u.Z)(Je,$e.GRAPHS,D.er),(0,u.Z)(Je,$e.REPORTS,D.Do),(0,u.Z)(Je,$e.TREE,D.BJ),(0,u.Z)(Je,$e.VARIABLES,D.KJ),Je),cn=t(91427),ln=t(90880);function un(e,n){var t=(n.theme.borders||C.Z.borders).light,r=(n.theme.monotone||C.Z.monotone).grey500,o=n||{},c=o.isSelected,l=o.theme;return c?t=(l.content||C.Z.content).active:i.TRANSFORMER===e?(t=(l.accent||C.Z.accent).purple,r=(l.accent||C.Z.accent).purpleLight):i.DATA_EXPORTER===e?(t=(l.accent||C.Z.accent).yellow,r=(l.accent||C.Z.accent).yellowLight):i.DATA_LOADER===e?(t=(l.accent||C.Z.accent).blue,r=(l.accent||C.Z.accent).blueLight):i.SCRATCHPAD===e&&(t=(l.content||C.Z.content).default,r=(l.accent||C.Z.accent).contentDefaultTransparent),{accent:t,accentLight:r}}var an=(0,k.css)([""," "," "," ",""],(0,ln.eR)(),(function(e){return!e.selected&&!e.hasError&&"\n    border-color: ".concat(un(e.blockType,e).accentLight,";\n  ")}),(function(e){return e.selected&&!e.hasError&&"\n    border-color: ".concat(un(e.blockType,e).accent,";\n  ")}),(function(e){return e.selected&&e.hasError&&"\n    border-color: ".concat((e.theme.borders||C.Z.borders).danger,";\n  ")})),sn=k.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],w.n_),dn=k.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-1"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:solid;border-top-width:2px;padding-bottom:","px;padding-top:","px;position:relative;"," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],an,w.n_,w.n_,S.iI,S.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).codeTextarea,";\n  ")}),(function(e){return!e.hasOutput&&"\n    border-bottom-left-radius: ".concat(w.n_,"px;\n    border-bottom-right-radius: ").concat(w.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),fn=k.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-2"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:10;&:hover{.block-divider-inner{","}}"],2*S.iI,(function(e){return"\n        background-color: ".concat((e.theme.text||C.Z.text).fileBrowser,";\n      ")})),pn=k.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-3"})(["height 1px;width:100%;position:absolute;z-index:-1;"]),hn=k.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-4"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],S.cd*S.iI,S.iI,68,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||C.Z.borders).medium,";\n  ")})),mn=k.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-5"})(["bottom:","px;left:","px;position:absolute;"],1*S.iI,68);function vn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n||(null===e||void 0===e?void 0:e.name);return null!==e&&void 0!==e&&e.parent?vn(e.parent,"".concat(e.parent.name,"/").concat(t)):t}function gn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=vn(e,n).split("/"),r=(0,Ce.C5)(t[1]),o=t[t.length-1],i=new RegExp(".".concat(Fe.PY,"$"));if(g.includes(r)&&o.match(i))return{type:r,uuid:o.replace(i,"")}}var bn=t(24224);function xn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function yn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var jn,kn=function e(n){var t,r=n.file,o=n.level,c=n.onSelectBlockFile,l=n.openFile,u=n.openPipeline,a=n.openSidekickView,s=n.setContextItem,d=n.theme,p=r.children,h=r.disabled,m=r.name,v=r.parent,b=h||"__init__.py"===m||!!m.match(/^\./),x=(null===v||void 0===v?void 0:v.name)===We,y=(0,f.useMemo)((function(){return x?null:p?(0,bn.YC)(p,(function(e){var n=e.children,t=e.name;return m===We?t:n?0:1})):p}),[p,x]),j="".concat(o,"/").concat(m),k=(0,f.useState)((0,cn.U2)(j,!1)),C=k[0],w=k[1],_=D.iU;x&&!b||1===o&&m===We?_=D.B_:m===Ue?_=D.er:y&&(_=D.gt),y&&g.includes((0,Ce.C5)(m))&&(0,Ce.C5)(m)!==i.CHART&&(t=un((0,Ce.C5)(m),{theme:d}).accent);var P=(0,f.useMemo)((function(){return null===y||void 0===y?void 0:y.map((function(n){return(0,Z.jsx)(e,{file:yn(yn({},n),{},{parent:r}),level:o+1,onSelectBlockFile:c,openFile:l,openPipeline:u,openSidekickView:a,setContextItem:s,theme:d},"".concat(j,"/").concat(n.name))}))}),[y,l,u]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!b){if((null===v||void 0===v?void 0:v.name)===Ue){a($e.CHARTS);var n=gn(r);n&&c(n.uuid,n.type,vn(r).split("/").slice(1).join("/"))}if(x)u(m);else if(y)w((function(e){return(0,cn.t8)(j,!e),!e}));else if(m.match(ze))l(vn(r).split("/").slice(1).join("/"));else{var t=gn(r);t&&c(t.uuid,t.type,vn(r).split("/").slice(1).join("/"))}}},onContextMenu:function(e){e.preventDefault(),b?s({type:jn.DISABLED}):x?s({data:{name:m},type:jn.PIPELINE}):y?s({type:jn.FOLDER}):m.match(ze)||m===He.INIT_PY?s({type:jn.FILE}):s({data:{block:gn(r)},type:jn.BLOCK_FILE})},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:o*Ve+r.name.length*S.Fo+2*S.iI,paddingBottom:S.iI/4,paddingLeft:S.iI/4+Ve*o,paddingRight:S.iI/4,paddingTop:S.iI/4},children:[y&&!C&&(0,Z.jsx)(D._M,{muted:!0,size:Ke}),y&&C&&(0,Z.jsx)(D._Q,{muted:!0,size:Ke}),!y&&(0,Z.jsx)("div",{style:{width:Ke}}),(0,Z.jsxs)("div",{style:{marginLeft:S.iI/2,marginRight:S.iI/2},children:[!t&&(0,Z.jsx)(_,{disabled:b,size:Ke}),t&&(0,Z.jsx)(Be,{color:t,size:Ke,square:!0})]}),(0,Z.jsx)(O.ZP,{color:t,default:!t&&!b,disabled:b,monospace:!0,small:!0,children:m})]}),(0,Z.jsx)("div",{style:{display:C?"none":"block"},children:P})]})},On=["files"];function Cn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function wn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Cn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Zn(e,n){var t=e.files,r=(0,Ee.Z)(e,On),o=(0,f.useContext)(k.ThemeContext);return(0,Z.jsx)(Qe,{ref:n,children:null===t||void 0===t?void 0:t.map((function(e){return(0,f.createElement)(kn,wn(wn({},r),{},{file:e,key:e.name,level:0,theme:o}))}))})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(jn||(jn={}));var _n,Pn=f.forwardRef(Zn),In=t(86585);!function(e){e.FILE_BROWSER="file_browser"}(_n||(_n={}));var En=k.default.div.withConfig({displayName:"ContextMenu__ContainerStyle",componentId:"sc-b9ha7f-0"})(["position:fixed;z-index:",";"," "," "," "," "," "," ",""],In.bf+100,(function(e){return"undefined"!==typeof e.left&&"\n    left: ".concat(e.left+5,"px;\n  ")}),(function(e){return"undefined"!==typeof e.right&&"\n    right: ".concat(e.right,"px;\n  ")}),(function(e){return"undefined"!==typeof e.top&&"\n    top: ".concat(e.top,"px;\n  ")}),(function(e){return"undefined"!==typeof e.bottom&&"\n    bottom: ".concat(e.bottom,"px;\n  ")}),(function(e){return"undefined"===typeof e.top&&"undefined"===typeof e.bottom&&"\n    top: ".concat(In.Mz-1*S.iI,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.width&&"\n    min-width: ".concat(33*S.iI,"px;\n  ")}));var Sn=function(e){var n,t=e.areaRef,r=e.children,o=e.createPipeline,i=e.deleteBlockFile,c=e.deletePipeline,l=e.enableContextItem,a=e.numPipelines,s=e.type,d=(0,f.useState)({x:0,y:0}),p=d[0],h=d[1],m=(0,f.useState)({}),v=m[0],g=m[1],b=(0,f.useState)(!1),x=b[0],y=b[1];(0,f.useEffect)((function(){return document.addEventListener("click",j),document.addEventListener("contextmenu",k),function(){document.addEventListener("click",j),document.removeEventListener("contextmenu",k)}}),[]);var j=(0,f.useCallback)((function(e){e.preventDefault(),y(!1)}),[y]),k=(0,f.useCallback)((function(e){t.current.contains(e.target)?(l||e.preventDefault(),h({x:e.pageX,y:e.pageY}),y(!0)):y(!1)}),[t,l,h,y]),O=(n={},(0,u.Z)(n,jn.BLOCK_FILE,[{label:function(){return"Delete"},onClick:function(){return i(v.data.block)},uuid:"delete_block_file"}]),(0,u.Z)(n,jn.PIPELINE,[{label:function(){return"Duplicate"},onClick:function(){return o({pipeline:{clone_pipeline_uuid:v.data.name,name:"".concat(v.data.name,"_copy")}})},uuid:"duplicate_pipeline"},{disabled:a<=1,label:function(){return"Delete"},onClick:function(){return c(v.data.name)},uuid:"delete_pipeline"}]),n);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(En,{left:p.x,top:p.y,children:(0,Z.jsx)(G,{items:O[l?v.type:s],open:x,parentRef:void 0,uuid:"ContextMenu"})}),f.Children.map(r,(function(e){return f.cloneElement(e,{setContextItem:g})}))]})},Tn=t(85202),An=t(38789),Rn=t(66166),Dn="twilight",Mn=t(2005),Fn=t(31012),Bn=k.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-w2hta3-0"})([""]),Nn=k.default.div.withConfig({displayName:"indexstyle__PlaceholderStyle",componentId:"sc-w2hta3-1"})(["padding-left:67px;position:absolute;z-index:1;"]);function Hn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Hn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function zn(e){var n=function(e){var n="[\\w.]+",t=["import ".concat(n," as ").concat(n),"import ".concat(n),"from ".concat(n," import ").concat(n," as ").concat(n),"from ".concat(n," import ").concat(n)],r=new RegExp("(".concat(t.join("|"),")"),"g");return(0,m.Z)(e.matchAll(r)).map((function(e){return e[1]}))}(e),t="[\\w.]+",r=["from ".concat(t," import ").concat(t," as (").concat(t,")"),"from ".concat(t," import (").concat(t,")"),"import ".concat(t," as (").concat(t,")"),"import (".concat(t,")")],o=new RegExp("(".concat(r.join("|"),")"));return n.reduce((function(e,n){var t=n.match(o);if(!t)return e;var r=(0,m.Z)(t),i=r[2],c=r[3],l=r[4],a=r[5],s=i||c||l||a;return Ln(Ln({},e),{},(0,u.Z)({},s,n))}),{})}function Un(e,n){return function(e,n){return e.split("\n")[n.startLineNumber-1]}(e,n).slice(0,n.startColumn-1)}var Wn={"all-hallows-eve":"All Hallows Eve","birds-of-paradise":"Birds of Paradise","brilliance-black":"Brilliance Black","brilliance-dull":"Brilliance Dull","chrome-devtools":"Chrome DevTools","clouds-midnight":"Clouds Midnight","espresso-libre":"Espresso Libre","kuroir-theme":"Kuroir Theme","magicwb--amiga-":"MagicWB (Amiga)","merbivore-soft":"Merbivore Soft","monokai-bright":"Monokai Bright","night-owl":"Night Owl","oceanic-next":"Oceanic Next","pastels-on-dark":"Pastels on Dark","slush-and-poppies":"Slush and Poppies","solarized-dark":"Solarized-dark","solarized-light":"Solarized-light","textmate--mac-classic-":"Textmate (Mac Classic)","tomorrow-night":"Tomorrow-Night","tomorrow-night-blue":"Tomorrow-Night-Blue","tomorrow-night-bright":"Tomorrow-Night-Bright","tomorrow-night-eighties":"Tomorrow-Night-Eighties","upstream-sunburst":"Upstream Sunburst","vibrant-ink":"Vibrant Ink","xcode-default":"Xcode_default",active4d:"Active4D",amy:"Amy",blackboard:"Blackboard",clouds:"Clouds",cobalt:"Cobalt",dawn:"Dawn",dreamweaver:"Dreamweaver",eiffel:"Eiffel",github:"GitHub",idle:"IDLE",idlefingers:"idleFingers",iplastic:"iPlastic",katzenmilch:"Katzenmilch",krtheme:"krTheme",lazy:"LAZY",merbivore:"Merbivore",monoindustrial:"monoindustrial",monokai:"Monokai",spacecadet:"SpaceCadet",sunburst:"Sunburst",tomorrow:"Tomorrow",twilight:"Twilight",zenburnesque:"Zenburnesque"};var Gn=function(e){var n=e.autocompleteProviders,r=e.autoHeight,o=e.autoSave,i=e.fontSize,c=void 0===i?Fn.i3:i,u=e.height,a=e.language,s=e.onChange,d=e.onDidChangeCursorPosition,p=e.onSave,h=e.placeholder,m=e.selected,v=e.setSelected,g=e.setTextareaFocused,b=e.shortcuts,x=e.showLineNumbers,y=void 0===x||x,j=e.textareaFocused,k=e.theme,C=e.value,w=e.width,_=void 0===w?"100%":w,P=(0,f.useRef)(null),I=(0,f.useRef)(null),E=(0,f.useRef)(null),S=(0,f.useState)([]),T=S[0],A=S[1],R=(0,f.useState)(null),D=R[0],M=R[1],F=(0,f.useState)(!1),B=F[0],N=F[1],H=(0,f.useState)(u),L=(H[0],H[1],(0,f.useState)(k||Dn)),z=L[0],U=L[1],W=(0,f.useCallback)((function(e){e.languages.typescript.javascriptDefaults.setEagerModelSync(!0),M(e)}),[]),G=(0,f.useCallback)((function(e,n){P.current=e,I.current=n;var t=[];null===b||void 0===b||b.forEach((function(r){t.push(r(n,e))})),p&&t.push(function(e,n){return{contextMenuGroupId:"navigation",contextMenuOrder:1.5,id:"saveCode",keybindingContext:null,keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.KeyS],label:"Save",precondition:null,run:function(e){n()}}}(n,(function(){p(e.getValue())}))),function(e,n,t){t.forEach((function(e){n.addAction(e)}))}(0,e,t),e.getModel().updateOptions({tabSize:4}),r&&!u&&(e._domElement.style.height="".concat(21*((C||"").split("\n").length+2),"px")),e.onDidFocusEditorWidget((function(){null===v||void 0===v||v(!0),null===g||void 0===g||g(!0)})),e.onDidContentSizeChange((function(n){var t=n.contentHeight,o=n.contentHeightChanged;r&&o&&(e._domElement.style.height="".concat(t+42,"px"))})),m&&j&&setTimeout((function(){e.focus()}),1),d&&e.onDidChangeCursorPosition((function(n){var t=n.position.lineNumber,r=e._domElement.getBoundingClientRect(),o=r.height,i=r.top;d({editorRect:{height:Number(o),top:Number(i)},position:{lineNumber:Number(t)}})})),N(!0)}),[r,u,d,p,E.current,m,A,N,v,g,b,j,C]);(0,f.useEffect)((function(){(function(e){return new Promise((function(n){Promise.all([An._m.init(),t(7432)("./".concat(Wn[e],".json"))]).then((function(t){var r=(0,l.Z)(t,2),o=r[0],i=r[1];i.colors["editor.background"]="#000000",i.colors["editor.foreground"]="#FFFFFF",o.editor.defineTheme(e,i),n()}))}))})(Dn).then((function(){U(Dn)}))}),[]),(0,f.useEffect)((function(){var e;return o&&p&&(e=setInterval((function(){p(P.current.getValue())}),5e3)),function(){o&&e&&clearInterval(e)}}),[o,P,p]);var K=(0,Rn.Z)(m),V=(0,Rn.Z)(j);return(0,f.useEffect)((function(){null!==P&&void 0!==P&&P.current&&(m&&j?setTimeout((function(){P.current.focus()}),1):Tn.findDOMNode(P.current._domElement).getElementsByClassName("inputarea")[0].blur())}),[P,m,K,j,V]),(0,f.useEffect)((function(){return function(){T.map((function(e){return e.dispose()}))}}),[T]),(0,f.useEffect)((function(){D&&n&&(0===T.length&&j||!V&&j?A(function(e,n){return Object.entries(n).map((function(n){var t=(0,l.Z)(n,2),r=t[0],o=t[1];return e.languages.registerCompletionItemProvider(r,{provideCompletionItems:o(e)})}))}(D,n)):V&&!j&&T.map((function(e){return e.dispose()})))}),[n,T,D,j,V]),(0,Z.jsxs)(Bn,{style:{display:B?null:"none"},children:[h&&!(null!==C&&void 0!==C&&C.length)&&(0,Z.jsx)(Nn,{children:(0,Z.jsx)(O.ZP,{monospace:!0,muted:!0,children:h})}),(0,Z.jsx)(An.ZP,{beforeMount:W,height:u,language:a||"python",onChange:function(e){null===s||void 0===s||s(e)},onMount:G,options:{fontFamily:Mn.Vp,fontLigatures:!0,fontSize:c,hideCursorInOverviewRuler:!0,lineNumbers:y,minimap:{enabled:!1},overviewRulerBorder:!1,renderLineHighlightOnlyWhenFocus:!0,scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1,vertical:"hidden"},wordBasedSuggestions:!1},theme:z,value:C,width:_}),(0,Z.jsx)("div",{ref:E})]})},Kn=t(12691),Vn=t.n(Kn),Qn=t(39421),qn=t(56663),Xn=t.n(qn),Yn=t(66757),Jn=t.n(Yn),$n=t(55361);var et="current_group_id",nt="current_group",tt="current_user";function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e){var n=Xn()(e),t=n.current_group_id;return{id:t}}var r=Jn().get(nt),o=Qn.Z.get(et,$n.Hu);if(r&&o)return r}function ot(){return Jn().get(tt)}function it(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ct(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?it(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):it(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function lt(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ct(ct({},t),{},{groupId:null===(e=rt())||void 0===e?void 0:e.id,id:null===(n=ot())||void 0===n?void 0:n.id})}var ut=t(86954);function at(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function st(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?at(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):at(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function dt(){return[[ut.go,"initialAsPath"],[ut.iT,"initialPathname"],[ut.FT,"notificationTemplate"],[ut.Ll,"notificationUUID"],[ut.$m,"referringURL"]].reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],o=t[1];return st(st({},e),{},(0,u.Z)({},o,Qn.Z.get(r,ut.vZ)))}),{})}var ft=t(36283);function pt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ht(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pt(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var mt="click",vt="button";function gt(e){var n,t,r=e.actionName,o=e.actionType,i=e.componentName,c=e.componentType,l=e.properties,u=e.screenName,a=(n=r||o,t=i||c,"".concat(u,".").concat(n,"_").concat(t)),s=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=dt(),o=(null!==t&&void 0!==t&&t.width,window.innerWidth);return ht(ht(ht({},t),r),{},{groupId:null===(e=rt())||void 0===e?void 0:e.id,partner_id:"Mage",screenSize:(0,ft.Z3)(o),userId:null===(n=ot())||void 0===n?void 0:n.id})}(ht({actionType:o,componentType:c},l));return{eventProperties:s,eventType:a,userProperties:lt()}}function bt(e,n){null===e||void 0===e||e(n)}var xt=function(e){var n=e.children;return e.eventProperties,e.userProperties,n((function(e){return!1}))};function yt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function jt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?yt(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var kt,Ot,Ct=function(e){var n,t=e.buildChildren,r=e.disabled,o=e.eventActionName,i=void 0===o?mt:o,c=e.eventComponentName,l=void 0===c?vt:c,u=e.eventProperties,a=void 0===u?{}:u,s=e.eventScreenName,d=void 0===s?"generic":s,p=e.keyboardShortcutValidation,m=e.linkProps,v=e.onClick,g=e.openNewTab,b=e.requireKeyUp,x=e.uuid,y=(0,h.useRouter)(),j=(0,L.y)(),k=j.registerOnKeyDown,O=j.registerOnKeyUp,C=j.unregisterOnKeyDown,w=j.unregisterOnKeyUp;(0,f.useEffect)((function(){return function(){var e=b?w:C;null===e||void 0===e||e(x)}}),[b,C,w,x]),r||!v&&!m||(n=function(e){null===v||void 0===v||v(e),m&&(g?(window.open(m.as||m.href),e.preventDefault()):y.push(m.href,m.as))});var _=gt({actionName:i,actionType:mt,componentName:l,componentType:vt,properties:a,screenName:d}),P=_.eventType,I=_.eventProperties,E=_.userProperties;return(0,Z.jsx)(xt,{eventProperties:I,userProperties:E,children:function(e){var r=e.logEvent;p&&n&&(b?O:k)(x,(function(e,t,o){p({keyHistory:o,keyMapping:t})&&(bt(r,P,{eventProperties:jt(jt({},I),{},{usedKeyboardShortcut:!0}),userProperties:E}),n(e))}),[I,P,r,n,E]);return t({eventProperties:I,eventType:P,logEvent:r,onClick:n,userProperties:E})}})},wt={chatBubbleProps:null,graphicButtonProps:null,logoProps:null,mageImageUrl:null,mascotImageUrls:{base:null,castingSpell:null,chargingUp:null,thinking:null},sharedProps:null},Zt=f.createContext(wt),_t=Zt,Pt=t(54283),It=t(73899),Et=t(10919),St=["Icon","afterElement","beforeElement","bold","borderless","centerText","children","compact","disabled","fitContentWidth","inverted","keyTextGroups","keyTextsPosition","linkProps","loading","mutedDisabled","noHover","onClick","type","useModelTheme"];function Tt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function At(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Tt(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(kt||(kt={})),function(e){e.BUTTON="button",e.SUBMIT="submit"}(Ot||(Ot={}));var Rt=(0,k.css)([""," align-items:center;border:none;display:flex;flex-direction:row;position:relative;text-align:left;z-index:0;"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ",""],(0,ln.eR)(),(function(e){return!e.large1&&!e.large2&&"\n    ".concat(Fn.iD,"\n  ")}),(function(e){return e.small&&"\n    ".concat(Fn.HC,"\n  ")}),(function(e){return e.large1&&"\n    ".concat(Fn.ln,"\n  ")}),(function(e){return e.large2&&"\n    ".concat(Fn.QU,"\n  ")}),(function(e){return!e.inline&&"\n    width: 100%;\n  "}),(function(e){return e.shortWidth&&"\n    min-width: ".concat(28*S.iI,"px;\n  ")}),(function(e){return!e.wrapText&&"\n    white-space: nowrap;\n  "}),(function(e){return!e.secondary&&"\n    font-family: ".concat(Mn.ry,";\n    justify-content: space-between;\n  ")}),(function(e){return e.center&&"\n    justify-content: center;\n  "}),(function(e){return!e.noPadding&&!e.spacious&&!e.compact&&"\n    padding: ".concat(1.25*S.iI,"px ").concat(1.5*S.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    padding: ".concat(.5*S.iI,"px ").concat(.75*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingTop&&"\n    padding-top: ".concat(.625*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingBottom&&"\n    padding-bottom: ".concat(.625*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingRight&&"\n    padding-right: ".concat(.75*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&!e.spacious&&e.halfPaddingLeft&&"\n    padding-left: ".concat(.75*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&!e.marketing&&"\n    padding: ".concat(2.25*S.iI,"px ").concat(3*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.marketing&&"\n    padding: ".concat(2.25*S.iI-2,"px ").concat(3*S.iI-2,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingTop&&"\n    padding-top: ".concat(1.125*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingBottom&&"\n    padding-bottom: ".concat(1.125*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingRight&&"\n    padding-right: ".concat(1.5*S.iI,"px;\n  ")}),(function(e){return!e.noPadding&&e.spacious&&e.halfPaddingLeft&&"\n    padding-left: ".concat(1.5*S.iI,"px;\n  ")}),(function(e){return e.secondary&&"\n    flex-basis: content;\n    font-family: ".concat(Mn.nF,";\n    padding: 0;\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.bold&&"\n    font-family: ".concat(Mn.nF,";\n  ")}),(function(e){return!e.muted&&!e.inverted&&"\n    color: ".concat((e.theme.content||C.Z.content).active,";\n  ")}),(function(e){return!e.muted&&e.inverted&&"\n    color: ".concat((e.theme.content||C.Z.content).inverted,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.monotone||C.Z.monotone).grey300,";\n  ")}),(function(e){return e.warning&&"\n    color: ".concat((e.theme.brand||C.Z.brand).energy400,";\n  ")}),(function(e){return e.noHover&&"\n    &:hover {\n      cursor: default;\n    }\n  "}),(function(e){return e.blackBorder&&"\n    border: ".concat(w.YF,"px ").concat(w.M8," ").concat((e.theme.monotone||C.Z.monotone).black,";\n  ")}),(function(e){return!e.pill&&!e.borderless&&!e.compact&&"\n    border-radius: ".concat(w.n_,"px;\n  ")}),(function(e){return e.compact&&"\n    border-radius: ".concat(w.BG,"px;\n  ")}),(function(e){return!e.borderRadiusLeft&&!e.borderRadiusRight&&e.pill&&!e.spacious&&"\n    border-radius: ".concat(5*S.iI,"px;\n  ")}),(function(e){return e.borderRadiusLeft&&e.pill&&!e.spacious&&"\n    border-bottom-left-radius: ".concat(5*S.iI,"px;\n    border-top-left-radius: ").concat(5*S.iI,"px;\n  ")}),(function(e){return e.borderRadiusRight&&e.pill&&!e.spacious&&"\n    border-bottom-right-radius: ".concat(5*S.iI,"px;\n    border-top-right-radius: ").concat(5*S.iI,"px;\n  ")}),(function(e){return e.borderRadiusLeft&&e.pill&&e.spacious&&"\n    border-bottom-left-radius: ".concat(8*S.iI,"px;\n    border-top-left-radius: ").concat(8*S.iI,"px;\n  ")}),(function(e){return e.borderRadiusRight&&e.pill&&e.spacious&&"\n    border-bottom-right-radius: ".concat(8*S.iI,"px;\n    border-top-right-radius: ").concat(8*S.iI,"px;\n  ")}),(function(e){return!e.noBackground&&e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return e.inverted&&!e.noBackground&&!e.backgroundColor&&"\n    background-color: ".concat((e.theme.monotone||C.Z.monotone).black,";\n  ")}),(function(e){return!e.inverted&&!e.noBackground&&"\n    background-color: ".concat((e.theme.interactive||C.Z.interactive).defaultBackground,";\n\n    &:hover {\n      background-color: ").concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n    }\n  ")}),(function(e){return e.noBackground&&"\n    background-color: transparent !important;\n  "}),(function(e){return e.disabled&&e.inverted&&"\n    color: ".concat((e.theme.monotone||C.Z.monotone).grey400," !important;\n  ")}),(function(e){return e.disabled&&!e.inverted&&"\n    color: ".concat((e.theme.monotone||C.Z.monotone).grey300," !important;\n  ")}),(function(e){return e.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.monotone||C.Z.monotone).black,";\n    color: ").concat((e.theme.monotone||C.Z.monotone).white,";\n  ")}),(function(e){return e.selected&&e.grey300&&"\n    background-color: ".concat((e.theme.monotone||C.Z.monotone).grey300,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.fire&&"\n    background-color: ".concat((e.theme.brand||C.Z.brand).fire400,";\n  ")}),(function(e){return e.useModelTheme&&"\n    color: ".concat((e.theme.monotone||C.Z.monotone).white,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.earth&&"\n    background-color: ".concat((e.theme.brand||C.Z.brand).earth400,";\n  ")}),(function(e){return e.primaryGradient&&"\n    background: ".concat(It.uH,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.wind&&"\n    background-color: ".concat((e.theme.brand||C.Z.brand).wind400,";\n  ")}),(function(e){return(e.selected||e.useModelTheme)&&e.water&&"\n    background-color: ".concat((e.theme.brand||C.Z.brand).water400,";\n  ")}),(function(e){return e.withIcon&&"\n    padding: ".concat(1.25*S.iI-1,"px !important;\n  ")}),(function(e){return e.shadow&&"\n    box-shadow: ".concat((e.theme.shadow||C.Z.shadow).large,";\n  ")})),Dt=k.default.button.withConfig({displayName:"KeyboardShortcutButton__ButtonStyle",componentId:"sc-10tm4pj-0"})(["",""],Rt),Mt=k.default.a.withConfig({displayName:"KeyboardShortcutButton__AnchorStyle",componentId:"sc-10tm4pj-1"})([""," ",""],Rt,Et.R),Ft=k.default.span.withConfig({displayName:"KeyboardShortcutButton__SpanStyle",componentId:"sc-10tm4pj-2"})(["margin-right:","px;"],1*S.iI);var Bt=function(e){var n=e.Icon,t=e.afterElement,r=e.beforeElement,o=e.bold,i=e.borderless,c=e.centerText,l=e.children,a=e.compact,s=e.disabled,d=e.fitContentWidth,p=e.inverted,h=e.keyTextGroups,m=e.keyTextsPosition,v=void 0===m?kt.RIGHT:m,g=e.linkProps,b=e.loading,x=e.mutedDisabled,y=e.noHover,j=e.onClick,k=e.type,O=void 0===k?Ot.BUTTON:k,C=e.useModelTheme,w=(0,Ee.Z)(e,St),_=g||{},P=_.as,I=_.href,E=P||I?Mt:Dt,T=(0,f.useMemo)((function(){if(!h)return null;var e=(0,u.Z)({},v===kt.RIGHT?"ml":"mr",l?1:0);return(0,Z.jsx)(R.Z,At(At({},e),{},{children:(0,Z.jsx)(A,{borderless:p,disabled:s,keyTextGroups:h,mutedDisabled:x})}))}),[l,s,p,h,v,x]),D=((0,f.useContext)(_t)||{}).sharedProps;return(0,Z.jsx)(Ct,At(At({},w),{},{buildChildren:function(e){var u=e.eventProperties,f=e.eventType,h=e.logEvent,m=e.onClick,j=e.userProperties,k=(0,Z.jsxs)(E,At(At(At({},w),C?D:{}),{},{bold:C||o,borderless:C||i,center:c,compact:a,disabled:s||x,fitContentWidth:d,inverted:p,noHover:(!m||y)&&!(P||I)&&O===Ot.BUTTON,onClick:function(e){bt(h,f,{eventProperties:u,userProperties:j}),null===m||void 0===m||m(e)},type:P||I?null:O,useModelTheme:C,withIcon:!!n,children:[r&&!b&&(0,Z.jsxs)(Z.Fragment,{children:[r,(0,Z.jsx)(R.Z,{mr:1})]}),v===kt.LEFT&&T,(0,Z.jsxs)(Se.Z,{alignItems:"center",children:[n&&(0,Z.jsx)(n,{inverted:!p,muted:s||x,size:2.5*S.iI}),n&&l&&(0,Z.jsx)(R.Z,{mr:1}),b&&(0,Z.jsx)(Ft,{children:(0,Z.jsx)(Pt.Z,{inverted:!p})}),!b&&l]}),v===kt.RIGHT&&T&&(0,Z.jsx)(R.Z,{ml:1,children:T}),t&&!b&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(R.Z,{ml:t?1:0}),t]})]}));return!P&&!I||s||x?k:(0,Z.jsx)(Vn(),At(At({},g),{},{passHref:!0,children:k}))},disabled:s||x,linkProps:g,onClick:j}))},Nt=t(41374),Ht=t(96510);function Lt(e,n){var t=e.map((function(e){return String(e)})),r=e.includes(N.PQ),o=e.includes(N.zX),i=e.includes(N.XR),c=N.xU.map((function(e){return String(e)})),u=N.vk.map((function(e){return String(e)})),a=N.Tr.map((function(e){return String(e)})),s=Object.entries(n).find((function(e){var n=(0,l.Z)(e,2),s=n[0];return n[1]&&!t.includes(String(s))&&(!o||!u.includes(String(s)))&&(!r||!c.includes(String(s)))&&(!i||!a.includes(String(s)))}));return e.every((function(e){return n[e]}))&&!s}function zt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ut(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?zt(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Wt=function(e){var n=e.active,t=e.addNewBlock,r=e.filePath,o=(e.pipeline,e.setFilesTouched),c=(0,f.useState)(null),a=c[0],s=c[1],d=Nt.ZP.file_contents.detail(r).data;(0,f.useEffect)((function(){null!==d&&void 0!==d&&d.file_content&&s(d.file_content)}),[d]);var h=(0,f.useState)(null===a||void 0===a?void 0:a.content),m=h[0],v=h[1],g=(0,f.useState)(!1),b=g[0],x=g[1],y=(0,p.Db)(Nt.ZP.file_contents.useUpdate(null===a||void 0===a?void 0:a.path),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){return!0},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),j=(0,l.Z)(y,1)[0],k=function(e,n){j({file_content:Ut(Ut({},n),{},{content:e})}),o((function(e){return Ut(Ut({},e),{},(0,u.Z)({},null===n||void 0===n?void 0:n.path,!1))})),x(!1)},O=(0,f.useMemo)((function(){return new RegExp(Object.keys(Ge).map((function(e){return".(".concat(e,")$")})).join("|"))}),[]),C=(0,f.useMemo)((function(){var e;return null===a||void 0===a||null===(e=a.path.match(O)[0])||void 0===e?void 0:e.split(".")[1]}),[O,a]),w=(0,f.useMemo)((function(){if(null!==a&&void 0!==a&&a.path)return(0,Z.jsx)(Gn,{autoHeight:!0,language:Ge[C],onSave:function(e){k(e,a)},onChange:function(e){v(e),o((function(e){return Ut(Ut({},e),{},(0,u.Z)({},null===a||void 0===a?void 0:a.path,!0))})),x(!0)},selected:!0,textareaFocused:!0,value:null===a||void 0===a?void 0:a.content,width:"100%"})}),[a,C,k,o]),_=C===Fe.PY&&Xe(a.path.split("/"))!==i.SCRATCHPAD&&(0,Z.jsx)(R.Z,{p:2,children:(0,Z.jsx)(Bt,{inline:!0,onClick:function(){return t({type:Xe(a.path.split("/")),uuid:Ye(a.path.split("/"))})},uuid:"FileEditor/AddToCurrentPipeline",children:"Add to current pipeline"})}),P="FileEditor/".concat(null===a||void 0===a?void 0:a.path),I=(0,L.y)(),E=I.registerOnKeyDown,S=I.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){S(P)}}),[S,P]),E(P,(function(e,t,r){if(n)if(Lt([N.zX,N.Um],t))e.preventDefault(),k(m,a);else if(b&&Lt([N.zX,N.hS],t)){e.preventDefault();var o="".concat(a.path," has changes that are unsaved. ")+"Click cancel and save your changes before reloading page.";"undefined"!==typeof location&&window.confirm(o)&&location.reload()}}),[n,m,a,k,b]),(0,Z.jsxs)(Z.Fragment,{children:[w,_]})},Gt=k.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-y3uzxv-0"})(["padding:","px;&:hover{cursor:pointer;","}",""],S.iI,(function(e){return"\n      background-color: ".concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n    ")}),(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n  ")}));function Kt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Vt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Kt(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Qt=function(e){var n=e.createPipeline,t=e.interruptKernel,r=e.restartKernel,o=e.savePipelineContent,i=e.setMessages,c=(0,f.useState)(null),l=c[0],a=c[1],s=(0,f.useRef)(null),d=(0,f.useRef)(null),p=[{label:function(){return"New pipeline"},onClick:function(){return n({pipeline:{name:(0,Ce.Y6)()}})},uuid:"new pipeline"},{label:function(){return"Save pipeline"},keyTextGroups:[[N.RJ,N.SS]],onClick:function(){return o()},uuid:"save pipeline"}],h=[{label:function(){return"Interrupt kernel"},keyTextGroups:[[N.kA],[N.kA]],onClick:function(){return t()},uuid:"Interrupt kernel"},{label:function(){return"Restart kernel"},keyTextGroups:[[N.t_[N.OC]],[N.t_[N.OC]]],onClick:function(){return r()},uuid:"Restart kernel"},{label:function(){return"Clear all outputs"},onClick:function(){return i((function(e){return Object.keys(e).reduce((function(e,n){return Vt(Vt({},e),{},(0,u.Z)({},n,[]))}),{})}))},uuid:"Clear all outputs"}],m="FileHeaderMenu/index",v=(0,L.y)(),g=v.registerOnKeyDown,b=v.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){b(m)}}),[b,m]),g(m,(function(e,n,t){null!==l&&(n[N.QK]?a((function(e){return 0===e?1:e-1})):n[N.DY]&&a((function(e){return 1===e?0:e+1})))}),[l,a]),(0,Z.jsx)(Ie.Z,{onClickOutside:function(){return a(null)},open:!0,style:{position:"relative"},children:(0,Z.jsxs)(j.Z,{children:[(0,Z.jsxs)("div",{style:{position:"relative"},children:[(0,Z.jsx)(Gt,{highlighted:0===l,onClick:function(){return a((function(e){return 0===e?null:0}))},onMouseEnter:function(){return a((function(e){return null!==e?0:null}))},ref:s,children:(0,Z.jsx)(O.ZP,{children:"File"})}),(0,Z.jsx)(G,{items:p,onClickCallback:function(){return a(null)},open:0===l,parentRef:s,uuid:"FileHeaderMenu/file_items"})]}),(0,Z.jsxs)("div",{style:{position:"relative"},children:[(0,Z.jsx)(Gt,{highlighted:1===l,onClick:function(){return a((function(e){return 1===e?null:1}))},onMouseEnter:function(){return a((function(e){return null!==e?1:null}))},ref:d,children:(0,Z.jsx)(O.ZP,{children:"Run"})}),(0,Z.jsx)(G,{items:h,onClickCallback:function(){return a(null)},open:1===l,parentRef:d,uuid:"FileHeaderMenu/run_items"})]})]})})},qt=t(57384),Xt=t(82944),Yt=(0,k.css)(["position:relative;",""],(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n  ")})),Jt=k.default.div.withConfig({displayName:"TooltipWrapper__ContainerStyle",componentId:"sc-1dd57l8-0"})(["",""],Yt),$t=k.default.span.withConfig({displayName:"TooltipWrapper__ContainerSpanStyle",componentId:"sc-1dd57l8-1"})(["",""],Yt),er=k.default.a.withConfig({displayName:"TooltipWrapper__HoverStyle",componentId:"sc-1dd57l8-2"})([""," "," border-radius:50%;"," "," &:active,&:focus{outline:none;}",""],(0,ln.eR)(),(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n    width: ").concat(e.size,"px;\n  ")}),(function(e){return!e.block&&"\n    display: inline-block;\n  "}),(function(e){return e.block&&"\n    display: block;\n  "}),(function(e){return!e.noHoverOutline&&"\n    &:hover {\n      cursor: pointer;\n\n      box-shadow:\n        0 0 0 ".concat(w.PV,"px ").concat((0,Pe.W)(e),",\n        0 0 0 ").concat(w.PV+w.q2,"px ").concat((e.theme.interactive||C.Z.interactive).hoverOverlay,";\n    }\n  ")})),nr=k.default.span.withConfig({displayName:"TooltipWrapper__BasicStyle",componentId:"sc-1dd57l8-3"})([""]),tr=k.default.div.withConfig({displayName:"TooltipWrapper__ContentStyle",componentId:"sc-1dd57l8-4"})(["position:absolute;z-index:3;"," "," "," "," "," "," "," "," ",""],(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||C.Z.shadow).base,";\n  ")}),(function(e){return e.appearAbove&&!e.size&&"\n    bottom: 0;\n  "}),(function(e){return e.appearAbove&&e.size&&"\n    bottom: ".concat(e.size+w.PV+w.q2,"px;\n  ")}),(function(e){return e.appearBefore&&"\n    right: 0;\n  "}),(function(e){return e.leftPosition&&"\n    left: ".concat(e.leftPosition,"px;\n  ")}),(function(e){return!e.leftPosition&&e.rightPosition&&"\n    right: 0px;\n  "}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n  ")}),(function(e){return e.widthFitContent&&"\n    width: max-content;\n  "}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}));var rr=function(e){var n=e.alignLeft,t=e.appearAbove,r=e.appearBefore,o=e.autoWidth,i=e.basic,c=e.block,l=e.center,u=e.children,a=e.content,s=e.inline,d=e.minWidth,p=e.noHoverOutline,h=e.size,m=void 0===h?2*S.iI:h,v=e.topOffset,g=e.widthFitContent,b=(0,f.useState)(!1),x=b[0],y=b[1],j=(0,f.useState)(!1),k=j[0],O=j[1],C=(d-m)/-2,w=s?$t:Jt,_=i?nr:er,P=(0,Z.jsx)(_,{block:c,href:"#",noHoverOutline:p,onClick:function(e){return e.preventDefault()},onMouseEnter:function(){return y(!0)},size:m,children:u});return(0,f.useEffect)((function(){var e=setInterval((function(){return O(!0)}),1e3);return x||clearInterval(e),function(){return clearInterval(e)}}),[O,x]),(0,Z.jsxs)(w,{onMouseLeave:function(){y(!1),O(!1)},size:m,children:[P,k&&(0,Z.jsx)(tr,{appearAbove:t,appearBefore:r,leftPosition:l?C:null,minWidth:o?d:null,rightPosition:n,size:m,topOffset:v,widthFitContent:g,children:a})]})},or=["autoWidth","children","default","description","inverted","keyboardShortcuts","label","maxWidth","muted","size","warning","widthFitContent"];function ir(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function cr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ir(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var lr=42*S.iI,ur=((0,k.css)(["position:relative;",""],(function(e){return e.size&&"\n    height: ".concat(e.size,"px;\n  ")})),(0,k.css)(["border-radius:","px;"," "," ",""],w.BG,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||C.Z.shadow).popup,";\n\n    background-color: ").concat((e.theme.background||C.Z.background).popup,";\n  ")}),(function(e){return e.width&&!(e.widthFitContent||e.autoWidth)&&"\n    width: ".concat(e.width,"px;\n  ")}),(function(e){return!e.width&&!(e.widthFitContent||e.autoWidth)&&"\n    width: ".concat(lr,"px;\n  ")}))),ar=k.default.div.withConfig({displayName:"Tooltip__LabelStyle",componentId:"sc-allmdq-0"})([""," padding:","px ","px;"],ur,.75*S.iI,1*S.iI),sr=k.default.div.withConfig({displayName:"Tooltip__DescriptionStyle",componentId:"sc-allmdq-1"})([""," padding:","px ","px;"],ur,1.5*S.iI,2*S.iI);var dr=function(e){var n=e.autoWidth,t=e.children,r=e.default,o=e.description,i=e.inverted,c=e.keyboardShortcuts,l=e.label,u=e.maxWidth,a=e.muted,s=e.size,d=void 0===s?2*S.iI:s,p=e.warning,h=e.widthFitContent,m=(0,Ee.Z)(e,or),v=o||l||"",g=o?sr:ar,b=Math.min(u||lr,v.length*S.Fo),x=[];null===c||void 0===c||c.forEach((function(e,n){n>=1&&x.push((0,Z.jsx)(O.ZP,{default:!0,children:"+"})),x.push(e)}));var y=x.map((function(e,n){var t="keyboard-shortcut-".concat(n);return"string"===typeof e?(0,Z.jsx)("span",{children:e},t):f.cloneElement(e,{key:t})}));return(0,Z.jsx)(rr,cr(cr({},m),{},{autoWidth:n,content:(0,Z.jsx)(g,{autoWidth:n,width:u,widthFitContent:h,children:(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(O.ZP,{whiteSpaceNormal:!0,children:v}),y.length>=1&&(0,Z.jsx)(O.ZP,{muted:!0,children:"\xa0\xa0\xa0\u2022\xa0\xa0\xa0"}),y.length>=1&&y]})}),minWidth:b,noHoverOutline:!!t,size:d,widthFitContent:h,children:t||(0,Z.jsx)(D.kI,{default:r,inverted:i,muted:a,size:d,warning:p})}))},fr=["bold","defaultColor","description","disableWordBreak","inputValue","inputWidth","invertedTheme","label","menuOpen","monospace","muted","onClick","notRequired","selectedTextProps","small","stacked","tooltipProps","value"];function pr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function hr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pr(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var mr=k.default.div.withConfig({displayName:"LabelWithValueClicker__LabelStyle",componentId:"sc-1hzpn4h-0"})(["margin-bottom:","px;"],.25*S.iI),vr=k.default.div.withConfig({displayName:"LabelWithValueClicker__DescriptionStyle",componentId:"sc-1hzpn4h-1"})([""]);var gr,br,xr=function(e){var n=e.bold,t=void 0===n||n,r=e.defaultColor,o=e.description,i=e.disableWordBreak,c=e.inputValue,l=e.inputWidth,u=e.invertedTheme,a=e.label,s=e.menuOpen,d=void 0!==s&&s,p=e.monospace,h=e.muted,m=e.onClick,v=e.notRequired,g=e.selectedTextProps,b=e.small,x=e.stacked,y=e.tooltipProps,k=e.value,C=(0,Ee.Z)(e,fr),w=(0,f.useRef)(null),_=(0,f.useState)(!1),P=_[0],I=_[1],E=(0,f.useState)(!1),S=E[0],T=E[1],A=a&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O.ZP,{bold:t,inverted:u,lineHeight:20,monospace:p,muted:h,small:b,children:a}),y&&(0,Z.jsx)(R.Z,{ml:1,children:(0,Z.jsx)(dr,hr({muted:!0},y))})]}),D=(0,Z.jsxs)(Z.Fragment,{children:[k&&(0,Z.jsx)(Et.Z,{block:!0,danger:null===g||void 0===g?void 0:g.danger,fullWidth:!0,muted:h,onClick:function(){m(),w.current&&w.current.focus(),I(!0)},preventDefault:!0,sameColorAsText:h||!(null!==g&&void 0!==g&&g.primary)&&!(null!==g&&void 0!==g&&g.danger)&&!(null!==g&&void 0!==g&&g.warning),underline:null===g||void 0===g?void 0:g.underline,warning:null===g||void 0===g?void 0:g.warning,children:(0,Z.jsx)(O.ZP,hr(hr({inverted:u,muted:h},g),{},{disableWordBreak:i,monospace:p,small:b,width:l,children:k}))}),(0,Z.jsx)(Xt.Z,hr(hr({},C),{},{basic:!0,defaultColor:r,invertedTheme:u,monospace:p,onBlur:function(e){I(!1),C.onBlur&&C.onBlur(e),S||T(!0)},onFocus:function(e){I(!0),C.onFocus&&C.onFocus(e)},ref:w,small:b,value:c,visible:!k}))]}),M=o&&(0,Z.jsx)(vr,{children:(0,Z.jsx)(O.ZP,{dangerouslySetInnerHTML:{__html:o},monospace:p,muted:!0,small:b})});return(0,Z.jsxs)(Z.Fragment,{children:[x&&(0,Z.jsxs)(Z.Fragment,{children:[A&&(0,Z.jsxs)(mr,{children:[(0,Z.jsx)(j.Z,{alignItems:"center",fullHeight:!1,fullWidth:!0,children:A}),M]}),D]}),!x&&(0,Z.jsxs)(j.Z,{alignItems:"center",fullWidth:!0,children:[A&&(0,Z.jsxs)(Z.Fragment,{children:[A,(0,Z.jsx)(R.Z,{ml:1})]}),(0,Z.jsx)(Se.Z,{flex:"1",children:D})]}),S&&!P&&!k&&!d&&!v&&(0,Z.jsx)(O.ZP,{danger:!0,small:b,children:"This field is required."})]})};!function(e){e.PYTHON="python",e.PYSPARK="pyspark"}(br||(br={}));var yr=(gr={},(0,u.Z)(gr,br.PYTHON,"python3"),(0,u.Z)(gr,br.PYSPARK,"pysparkkernel"),gr),jr=t(37391),kr=64*S.iI,Or=3*S.cd*S.iI,Cr=Or,wr=35*S.iI,Zr=.5*S.iI,_r=13*S.iI,Pr=3*S.cd*S.iI,Ir=6*S.iI,Er=(k.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-1lxpneo-0"})(["position:fixed;z-index:2;"," "," ",""],(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.monotone||C.Z.monotone).grey200,";\n  ")}),(function(e){return!e.beforeVisible&&"\n    width: 100%;\n  "}),(function(e){return e.beforeVisible&&"\n    left: ".concat(wr,"px;\n    width: calc(100% - ").concat(wr,"px);\n  ")})),k.default.div.withConfig({displayName:"indexstyle__TabStyle",componentId:"sc-1lxpneo-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;padding:","px ","px;position:relative;top:1px;"," "," ",""],w.n_,w.n_,1*S.iI,2*S.iI,(function(e){return"\n    border-left: 1px solid ".concat((e.theme.monotone||C.Z.monotone).grey200,";\n    border-right: 1px solid ").concat((e.theme.monotone||C.Z.monotone).grey200,";\n    border-top: 1px solid ").concat((e.theme.monotone||C.Z.monotone).grey200,";\n  ")}),(function(e){return!e.first&&"\n    margin-left: ".concat(1*S.iI,"px;\n  ")}),(function(e){return e.selected&&"\n    border-bottom: 1px solid ".concat((e.theme.monotone||C.Z.monotone).white,";\n  ")})),(0,k.css)(["height:calc(100% - ","px);position:fixed;top:","px;z-index:2;",""],Pr,Pr,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).panel,";\n  ")}))),Sr=(0,k.css)([""," height:100%;overflow:auto;position:relative;z-index:2;"],jr.w5),Tr=(0,k.css)(["height:calc(100% + ","px);position:absolute;top:-","px;width:","px;z-index:6;&:hover{","}"," ",""],Pr,Pr,Zr,(function(e){return!e.disabled&&"\n      border-color: ".concat((e.theme.text||C.Z.text).fileBrowser," !important;\n    ")}),(function(e){return!e.disabled&&"\n    cursor: col-resize;\n  "}),(function(e){return e.active&&!e.disabled&&"\n    border-color: ".concat((e.theme.text||C.Z.text).fileBrowser," !important;\n  ")})),Ar=k.default.div.withConfig({displayName:"indexstyle__AsideHeaderStyle",componentId:"sc-1lxpneo-2"})(["border-bottom:1px solid transparent;height:","px;position:fixed;top:0;z-index:4;"," "," ",""],Pr,(0,jr.y$)(),(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).panel,";\n  ")}),(function(e){return!e.visible&&"\n    border-color: ".concat((e.theme.borders||C.Z.borders).medium," !important;\n  ")})),Rr=k.default.div.withConfig({displayName:"indexstyle__AsideSubheaderStyle",componentId:"sc-1lxpneo-3"})(["border-bottom:1px solid transparent;height:","px;overflow-x:auto;"," "," ",""],Pr,(0,jr.y$)(),(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).table,";\n  ")}),(function(e){return!e.visible&&"\n    border-color: ".concat((e.theme.borders||C.Z.borders).medium," !important;\n  ")})),Dr=k.default.aside.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-1lxpneo-4"})([""," left:0;"],Er),Mr=k.default.div.withConfig({displayName:"indexstyle__BeforeInnerStyle",componentId:"sc-1lxpneo-5"})([""," overflow:hidden;&:hover{overflow:auto;}"],Sr),Fr=k.default.aside.withConfig({displayName:"indexstyle__AfterStyle",componentId:"sc-1lxpneo-6"})([""," right:0;"],Er),Br=k.default.div.withConfig({displayName:"indexstyle__AfterInnerStyle",componentId:"sc-1lxpneo-7"})(["",""],Sr),Nr=k.default.div.withConfig({displayName:"indexstyle__DraggableStyle",componentId:"sc-1lxpneo-8"})([""," "," ",""],Tr,(function(e){return"undefined"!==typeof e.left&&"\n    border-left: 1px solid transparent;\n    left: ".concat(e.left,"px;\n  ")}),(function(e){return"undefined"!==typeof e.right&&"\n    border-right: 1px solid transparent;\n    right: ".concat(e.right,"px;\n  ")})),Hr=k.default.div.withConfig({displayName:"indexstyle__MainWrapper",componentId:"sc-1lxpneo-9"})(["height:100%;position:fixed;z-index:1;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).codeArea,";\n  ")})),Lr=k.default.div.withConfig({displayName:"indexstyle__MainContentStyle",componentId:"sc-1lxpneo-10"})(["position:fixed;z-index:2;",""],(function(e){return"\n    height: calc(100% - ".concat(e.headerOffset||0,"px);\n    top: ").concat(e.headerOffset||0,"px;\n  ")})),zr=k.default.div.withConfig({displayName:"indexstyle__MainContentInnerStyle",componentId:"sc-1lxpneo-11"})([""," height:100%;overflow:auto;"],jr.w5),Ur=300,Wr=k.default.div.withConfig({displayName:"indexstyle__PipelineContainerStyle",componentId:"sc-1sv9513-0"})([".pipeline-detail-enter-active{opacity:1;transition:opacity ","ms linear;}.pipeline-detail-enter-done{opacity:0;transition:opacity ","ms linear;}"],Ur,Ur),Gr=k.default.div.withConfig({displayName:"indexstyle__OverlayStyle",componentId:"sc-1sv9513-1"})(["height:100vh;opacity:1;position:fixed;width:100vw;z-index:9999;",""],(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).codeArea,";\n  ")})),Kr=k.default.div.withConfig({displayName:"indexstyle__PipelineHeaderStyle",componentId:"sc-1sv9513-2"})(["height:","px;position:sticky;top:0;width:100%;z-index:5;",""],Pr,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).codeArea,";\n    border-bottom: 1px solid ").concat((e.theme.borders||C.Z.borders).light,";\n  ")})),Vr=k.default.div.withConfig({displayName:"indexstyle__FileTabStyle",componentId:"sc-1sv9513-3"})(["border-left:1px solid transparent;height:100%;padding:","px ","px;"," "," ",""],S.iI,S.cd*S.iI,(function(e){return"\n    &:hover {\n      cursor: default;\n\n      p {\n        color: ".concat((e.theme.content||C.Z.content).active," !important;\n        cursor: default;\n      }\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||C.Z.interactive).hoverBackground,";\n  ")}),(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||C.Z.borders).light," !important;\n  ")})),Qr=t(33766);var qr,Xr,Yr=function(e){var n=e.filePaths,t=e.filesTouched,r=e.isBusy,o=e.isPipelineUpdating,i=e.kernel,c=e.pipeline,l=e.pipelineContentTouched,u=e.pipelineLastSaved,a=(e.restartKernel,e.selectedFilePath),s=e.updatePipelineMetadata,d=(0,f.useContext)(k.ThemeContext),p=i||{},h=p.alive,v=(p.name,(0,f.useState)(!1)),g=v[0],b=v[1],x=(0,f.useState)(""),y=x[0],w=x[1],_=(0,f.useState)(!1),P=_[0],I=_[1],E=(0,f.useRef)(null);(0,f.useEffect)((function(){null!==c&&void 0!==c&&c.uuid&&w(c.uuid)}),[null===c||void 0===c?void 0:c.uuid]);var T,A=(0,f.useMemo)((function(){return n.map((function(e){return decodeURIComponent(e)}))}),[n]);T=l?"Unsaved changes":o?"Saving changes...":u?"Last saved ".concat((0,Ce.JX)(Number(u)/1e3)):"All changes saved";var M="KernelStatus",F=(0,L.y)(),B=F.registerOnKeyDown,H=F.unregisterOnKeyDown;(0,f.useEffect)((function(){return function(){H(M)}}),[H,M]),B(M,(function(e,n,t){g&&String(t[0])===String(N.Uq)&&String(t[1])!==String(N.zX)&&(s(y),b(!1))}),[g,y,b,s]);var z=(0,f.useMemo)((function(){return(0,Z.jsx)(xr,{bold:!1,inputValue:y,notRequired:!0,onBlur:function(){return setTimeout((function(){return b(!1)}),300)},onChange:function(e){w(e.target.value),e.preventDefault()},onClick:function(){return b(!0)},onFocus:function(){return b(!0)},stacked:!0,value:g?null:(null===c||void 0===c?void 0:c.uuid)||""})}),[g,y,c]),U=(0,f.useMemo)((function(){return(0,Z.jsxs)("div",{ref:E,style:{position:"relative"},children:[(0,Z.jsx)(Bt,{beforeElement:(0,Z.jsx)(Be,{color:r?(d||C.Z).borders.info:h?(d||C.Z).borders.success:(d||C.Z).borders.danger,size:S.iI}),blackBorder:!0,compact:!0,inline:!0,onClick:function(){return I(!0)},uuid:"Pipeline/KernelStatus/kernel",children:(null===c||void 0===c?void 0:c.type)||br.PYTHON}),(0,Z.jsx)(Ie.Z,{disableEscape:!0,onClickOutside:function(){return I(!1)},open:P,children:(0,Z.jsx)(G,{items:[{isGroupingTitle:!0,label:function(){return"Select kernel"},uuid:"select_kernel"}].concat((0,m.Z)(Object.keys(yr).filter((function(e){return(null===c||void 0===c?void 0:c.type)!=e})).map((function(e){return{label:function(){return e},onClick:function(){return s(null===c||void 0===c?void 0:c.name,e)},uuid:e}})))),onClickCallback:function(){return I(!1)},open:P,parentRef:E,uuid:"KernelStatus/select_kernel",width:25*S.iI})})]})}),[h,r,c,P,I,d]),W=(0,f.useMemo)((function(){return(0,Z.jsxs)(Se.Z,{alignItems:"center",children:[(0,Z.jsxs)(O.ZP,{children:["Pipeline:\xa0",a&&(null===c||void 0===c?void 0:c.uuid)]}),!a&&z,(0,Z.jsx)(R.Z,{mr:3})]})}),[h,r,c,z,a,d]);return(0,Z.jsx)(Kr,{children:(0,Z.jsxs)(j.Z,{alignItems:"center",fullHeight:!0,justifyContent:"space-between",children:[(0,Z.jsxs)(j.Z,{alignItems:"center",fullHeight:!0,justifyContent:"flex-start",children:[(0,Z.jsxs)(R.Z,{px:S.cd,children:[a&&(0,Z.jsx)(Et.Z,{noHoverUnderline:!0,noOutline:!0,onClick:a?function(){return(0,Qr.u)({file_path:null})}:null,preventDefault:!0,children:W}),!a&&(0,Z.jsxs)(j.Z,{alignItems:"center",children:[W,g&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(Et.Z,{onClick:function(){s(y),b(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update name"})]})]})]}),null===A||void 0===A?void 0:A.map((function(e){var n=a===encodeURIComponent(e);return(0,Z.jsx)(j.Z,{flexDirection:"column",fullHeight:!0,justifyContent:"flex-end",onClick:function(t){t.preventDefault(),n||(0,Qr.u)({file_path:encodeURIComponent(e)})},children:(0,Z.jsx)(Vr,{selected:n,children:(0,Z.jsxs)(j.Z,{alignItems:"center",fullHeight:!0,children:[!t[e]&&(0,Z.jsx)(D.iU,{muted:!n,size:1.5*S.iI}),t[e]&&(0,Z.jsx)(dr,{label:"Unsaved changes",size:null,widthFitContent:!0,children:(0,Z.jsx)("div",{style:{padding:1},children:(0,Z.jsx)(Be,{borderColor:(d||C.Z).borders.danger,size:1.25*S.iI})})}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(O.ZP,{muted:!n,children:e}),(0,Z.jsx)(R.Z,{mr:2}),n&&(0,Z.jsx)(dr,{label:"Close",size:null,widthFitContent:!0,children:(0,Z.jsx)(Et.Z,{autoHeight:!0,block:!0,noHoverUnderline:!0,noOutline:!0,onClick:function(){var n=(0,bn.Od)(A,(function(n){return n===e})).map((function(e){return encodeURIComponent(e)}));(0,Qr.u)({file_path:n[n.length-1]||null,"file_paths[]":n},{pushHistory:!0})},preventDefault:!0,children:(0,Z.jsx)(D.x8,{size:1.25*S.iI})})}),!n&&(0,Z.jsx)("div",{style:{width:1.25*S.iI}})]})})},e)}))]}),!a&&(0,Z.jsx)(R.Z,{px:S.cd,children:(0,Z.jsxs)(Se.Z,{alignItems:"center",children:[U,(0,Z.jsx)(R.Z,{ml:2}),(0,Z.jsx)(O.ZP,{muted:!0,children:T})]})})]})})};!function(e){e.BUSY="busy",e.IDLE="idle",e.QUEUED="queued"}(qr||(qr={})),function(e){e.IMAGE_PNG="image/png",e.TABLE="table",e.TEXT="text",e.TEXT_HTML="text/html",e.TEXT_PLAIN="text/plain"}(Xr||(Xr={}));var Jr,$r=[Xr.TEXT,Xr.TEXT_PLAIN];!function(e){e.DISPLAY_DATA="display_data",e.STATUS="status",e.STREAM="stream",e.STREAM_PIPELINE="stream_pipeline"}(Jr||(Jr={}));var eo=t(16910),no=["children","items","open","onClickCallback","onClickOutside","parentRef","uuid"];function to(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ro(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?to(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):to(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var oo,io,co,lo,uo,ao,so=function(e){var n=e.children,t=e.items,r=e.open,o=e.onClickCallback,i=e.onClickOutside,c=e.parentRef,l=e.uuid,u=(0,Ee.Z)(e,no),a=(0,Z.jsxs)("div",{style:{position:"relative",zIndex:i?3:2},children:[(0,Z.jsx)("div",{ref:c,children:n}),(0,Z.jsx)(G,ro(ro({},u),{},{items:t,onClickCallback:o,open:r,parentRef:c,uuid:l}))]});return i?(0,Z.jsx)(Ie.Z,{onClickOutside:i,open:!0,children:a}):a},fo=k.default.svg.withConfig({displayName:"Mage8Bit__SVGStyle",componentId:"sc-cj6ltf-0"})([""]),po=function(e){var n=e.size,t=void 0===n?20:n,r=e.viewBox,o=void 0===r?"0 0 20 20":r;return(0,Z.jsxs)(fo,{height:t,viewBox:o,width:t,children:[(0,Z.jsxs)("g",{clipPath:"url(#clip0_297_42814)",children:[(0,Z.jsx)("path",{d:"M13.334 0h1.66667v1.66667H13.334zM11.666 1.6665h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M10 1.6665h1.66667v1.66667H10z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M8.33398 1.6665h1.66667v1.66667H8.33398z",fill:"#AF93FF"}),(0,Z.jsx)("path",{d:"M8.33398 3.3335h1.66667v1.66667H8.33398z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M6.66602 3.3335h1.66667v1.66667H6.66602z",fill:"#AF93FF"}),(0,Z.jsx)("path",{d:"M3.33398 5h1.66667v1.66667H3.33398z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M5 5h1.66667v1.66667H5z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M6.66602 5h1.66667v1.66667H6.66602z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M6.66602 5h1.66667v1.66667H6.66602z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M6.66602 8.3335h1.66667v1.66667H6.66602z",fill:"#000"}),(0,Z.jsx)("path",{d:"M6.66602 6.6665h1.66667v1.66667H6.66602z",fill:"#AD8FFF"}),(0,Z.jsx)("path",{d:"M6.66602 10h1.66667v1.66667H6.66602z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M8.33398 6.6665h1.66667v1.66667H8.33398z",fill:"#AD8FFF"}),(0,Z.jsx)("path",{d:"M1.66602 13.3335h1.66667v1.66667H1.66602z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M1.66602 11.6665h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,Z.jsx)("path",{d:"M1.66602 10h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,Z.jsx)("path",{d:"M1.66602 8.3335h1.66667v1.66667H1.66602zM1.66602 6.6665h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,Z.jsx)("path",{d:"M1.66602 6.6665h1.66667v1.66667H1.66602zM0 0h1.66667v1.66667H0zM3.33398 1.6665h1.66667v1.66667H3.33398zM0 3.3335h1.66667v1.66667H0z",fill:"#2ECDF7"}),(0,Z.jsx)("path",{d:"M1.66602 16.6665h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,Z.jsx)("path",{d:"M1.66602 16.6665h1.66667v1.66667H1.66602zM1.66602 18.3335h1.66667v1.66667H1.66602z",fill:"#FFCC19"}),(0,Z.jsx)("path",{d:"M1.66602 15h1.66667v1.66667H1.66602zM3.33398 15h1.66667v1.66667H3.33398z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M3.33398 16.6665h1.66667v1.66667H3.33398z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M3.33398 13.3335h1.66667v1.66667H3.33398z",fill:"#AD8FFF"}),(0,Z.jsx)("path",{d:"M8.33398 8.3335h1.66667v1.66667H8.33398z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M10 6.6665h1.66667v1.66667H10z",fill:"#AD8FFF"}),(0,Z.jsx)("path",{d:"M10 10h1.66667v1.66667H10z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M11.666 6.6665h1.66667v1.66667H11.666z",fill:"#AD8FFF"}),(0,Z.jsx)("path",{d:"M11.666 8.3335h1.66667v1.66667H11.666z",fill:"#C9B6FF"}),(0,Z.jsx)("path",{d:"M8.33398 10h1.66667v1.66667H8.33398z",fill:"#FF8DA9"}),(0,Z.jsx)("path",{d:"M8.33398 11.6665h1.66667v1.66667H8.33398z",fill:"#FF8DA9"}),(0,Z.jsx)("path",{d:"M6.66602 11.6665h1.66667v1.66667H6.66602z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M6.66602 11.6665h1.66667v1.66667H6.66602z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M5 10h1.66667v1.66667H5z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M5 8.3335h1.66667v1.66667H5z",fill:"#232429"}),(0,Z.jsx)("path",{d:"M8.33398 11.6665h1.66667v1.66667H8.33398zM8.33398 13.3335h1.66667v1.66667H8.33398z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M10 11.6665h1.66667v1.66667H10z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M11.666 10h1.66667v1.66667H11.666zM13.334 6.6665h1.66667v1.66667H13.334zM13.334 8.3335h1.66667v1.66667H13.334z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M15 8.3335h1.66667v1.66667H15z",fill:"#757575"}),(0,Z.jsx)("path",{d:"M15 10h1.66667v1.66667H15z",fill:"#D9D9D9"}),(0,Z.jsx)("path",{d:"M10 8.3335h1.66667v1.66667H10z",fill:"#000"}),(0,Z.jsx)("path",{d:"M8.33398 5h1.66667v1.66667H8.33398zM11.666 5h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M13.334 10h1.66667v1.66667H13.334zM11.666 11.6665h1.66667v1.66667H11.666zM10 13.3335h1.66667v1.66667H10z",fill:"#501FD8"}),(0,Z.jsx)("path",{d:"M8.33398 15h1.66667v1.66667H8.33398zM6.66602 13.3335h1.66667v1.66667H6.66602zM15 11.6665h1.66667v1.66667H15z",fill:"#501FD8"}),(0,Z.jsx)("path",{d:"M16.666 11.6665h1.66667v1.66667H16.666zM16.666 13.3335h1.66667v1.66667H16.666z",fill:"#501FD8"}),(0,Z.jsx)("path",{d:"M15 13.3335h1.66667v1.66667H15z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M13.334 13.3335h1.66667v1.66667H13.334zM13.334 11.6665h1.66667v1.66667H13.334zM11.666 13.3335h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M11.666 15h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M10 15h1.66667v1.66667H10z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M8.33398 16.6665h1.66667v1.66667H8.33398z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M6.66602 15h1.66667v1.66667H6.66602z",fill:"#AF93FF"}),(0,Z.jsx)("path",{d:"M6.66602 16.6665h1.66667v1.66667H6.66602z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M5 16.6665h1.66667v1.66667H5z",fill:"#AF93FF"}),(0,Z.jsx)("path",{d:"M5 18.3335h1.66667v1.66667H5z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M6.66602 18.3335h1.66667v1.66667H6.66602zM8.33398 18.3335h1.66667v1.66667H8.33398z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M10 18.3335h1.66667v1.66667H10z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M11.666 18.3335h1.66667v1.66667H11.666zM13.334 18.3335h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M15 18.3335h1.66667v1.66667H15z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M16.666 18.3335h1.66667v1.66667H16.666z",fill:"#652EFF"}),(0,Z.jsx)("path",{d:"M3.33398 18.3335h1.66667v1.66667H3.33398zM10 16.6665h1.66667v1.66667H10z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M11.666 16.6665h1.66667v1.66667H11.666zM13.334 15h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M13.334 16.6665h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M15 16.6665h1.66667v1.66667H15z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M15 15h1.66667v1.66667H15z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M16.666 15h1.66667v1.66667H16.666zM18.334 16.6665h1.66667v1.66667H18.334zM18.334 18.3335h1.66667v1.66667H18.334z",fill:"#501FD8"}),(0,Z.jsx)("path",{d:"M16.666 16.6665h1.66667v1.66667H16.666z",fill:"#652EFF"}),(0,Z.jsx)("path",{d:"M13.334 5h1.66667v1.66667H13.334z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M15 5h1.66667v1.66667H15zM10 5h1.66667v1.66667H10z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M10 3.3335h1.66667v1.66667H10z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M11.666 3.3335h1.66667v1.66667H11.666z",fill:"#7949FF"}),(0,Z.jsx)("path",{d:"M11.666 0h1.66667v1.66667H11.666z",fill:"#AF93FF"})]}),(0,Z.jsx)("defs",{children:(0,Z.jsx)("clipPath",{id:"clip0_297_42814",children:(0,Z.jsx)("path",{d:"M0 0h20v20H0z",fill:"#fff"})})})]})},ho=t(80906),mo=(ho.Q0.AVERAGE,ho.Q0.CLEAN_COLUMN_NAME,ho.Q0.COUNT,ho.Q0.COUNT_DISTINCT,ho.Q0.CUSTOM,ho.Q0.DIFF,ho.Q0.FIRST,ho.Q0.FIX_SYNTAX_ERRORS,ho.Q0.IMPUTE,ho.Q0.LAST,ho.Q0.MAX,ho.Q0.MEDIAN,ho.Q0.MIN,ho.Q0.REFORMAT,ho.Q0.REMOVE,ho.Q0.REMOVE_OUTLIERS,ho.Q0.SELECT,ho.Q0.SHIFT_DOWN,ho.Q0.SHIFT_UP,ho.Q0.SUM,[ho.Q0.DROP_DUPLICATE,ho.Q0.FILTER,ho.Q0.SORT,ho.Q0.REMOVE]);!function(e){e.AGGREGATE="Aggregate",e.FORMATTING="Formatting",e.COLUMN_REMOVAL="Column removal",e.SHIFT_ROWS="Shift rows in a column",e.MISC="Miscellaneous"}(ao||(ao={}));var vo,go,bo,xo=(io={},(0,u.Z)(io,ho.qs.COLUMN,(oo={},(0,u.Z)(oo,ao.AGGREGATE,[ho.Q0.AVERAGE,ho.Q0.COUNT,ho.Q0.COUNT_DISTINCT,ho.Q0.FIRST,ho.Q0.LAST,ho.Q0.MAX,ho.Q0.MEDIAN,ho.Q0.MIN,ho.Q0.SUM]),(0,u.Z)(oo,ao.FORMATTING,[ho.Q0.CLEAN_COLUMN_NAME,ho.Q0.FIX_SYNTAX_ERRORS,ho.Q0.REFORMAT]),(0,u.Z)(oo,ao.COLUMN_REMOVAL,[ho.Q0.REMOVE,ho.Q0.SELECT]),(0,u.Z)(oo,ao.SHIFT_ROWS,[ho.Q0.SHIFT_DOWN,ho.Q0.SHIFT_UP]),(0,u.Z)(oo,ao.MISC,[ho.Q0.DIFF,ho.Q0.IMPUTE,ho.Q0.REMOVE_OUTLIERS]),oo)),(0,u.Z)(io,ho.qs.ROW,(0,u.Z)({},ao.MISC,[].concat(mo))),io),yo=Object.keys(xo[ho.qs.COLUMN]),jo=[ao.MISC],ko=(uo={},(0,u.Z)(uo,ho.qs.COLUMN,(co={},(0,u.Z)(co,ho.Q0.ADD,"Add column"),(0,u.Z)(co,ho.Q0.AVERAGE,"Aggregate by average value"),(0,u.Z)(co,ho.Q0.CLEAN_COLUMN_NAME,"Clean column name"),(0,u.Z)(co,ho.Q0.COUNT_DISTINCT,"Aggregate by distinct count"),(0,u.Z)(co,ho.Q0.COUNT,"Aggregate by total count"),(0,u.Z)(co,ho.Q0.DIFF,"Difference"),(0,u.Z)(co,ho.Q0.FIRST,"Aggregate by first value"),(0,u.Z)(co,ho.Q0.FIX_SYNTAX_ERRORS,"Fix syntax errors"),(0,u.Z)(co,ho.Q0.IMPUTE,"Fill in missing values"),(0,u.Z)(co,ho.Q0.LAST,"Aggregate by last value"),(0,u.Z)(co,ho.Q0.MAX,"Aggregate by maximum value"),(0,u.Z)(co,ho.Q0.MEDIAN,"Aggregate by median value"),(0,u.Z)(co,ho.Q0.MIN,"Aggregate by mininum value"),(0,u.Z)(co,ho.Q0.REFORMAT,"Reformat"),(0,u.Z)(co,ho.Q0.REMOVE_OUTLIERS,"Remove outliers"),(0,u.Z)(co,ho.Q0.REMOVE,"Remove column(s)"),(0,u.Z)(co,ho.Q0.SELECT,"Keep columns"),(0,u.Z)(co,ho.Q0.SHIFT_DOWN,"Shift rows down in a column"),(0,u.Z)(co,ho.Q0.SHIFT_UP,"Shift rows up in a column"),(0,u.Z)(co,ho.Q0.SUM,"Aggregate by sum of values"),co)),(0,u.Z)(uo,ho.qs.ROW,(lo={},(0,u.Z)(lo,ho.Q0.DROP_DUPLICATE,"Drop duplicates"),(0,u.Z)(lo,ho.Q0.FILTER,"Filter"),(0,u.Z)(lo,ho.Q0.SORT,"Sort"),(0,u.Z)(lo,ho.Q0.REMOVE,"Remove rows"),lo)),uo),Oo=S.cd*S.iI,Co=k.default.div.withConfig({displayName:"indexstyle__IconContainerStyle",componentId:"sc-oyfjzc-0"})(["align-items:center;border-radius:","px;border:1px solid transparent;display:flex;justify-content:center;"," "," "," "," "," ",""],w.BG,(function(e){return e.border&&"\n    border: 1px dotted ".concat((e.theme.content||C.Z.content).active,";\n  ")}),(function(e){return e.blue&&"\n    background-color: ".concat(un(i.DATA_LOADER,e).accent,";\n  ")}),(function(e){return e.purple&&"\n    background-color: ".concat(un(i.TRANSFORMER,e).accent,";\n  ")}),(function(e){return e.yellow&&"\n    background-color: ".concat(un(i.DATA_EXPORTER,e).accent,";\n  ")}),(function(e){return!e.compact&&"\n    height: ".concat(Oo+S.iI/2,"px;\n    width: ").concat(Oo+S.iI/2,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(Oo/2+S.iI,"px;\n    width: ").concat(Oo/2+S.iI,"px;\n  ")}));!function(e){e.API="api",e.BIGQUERY="bigquery",e.FILE="file",e.GENERIC="generic",e.POSTGRES="postgres",e.REDSHIFT="redshift",e.S3="s3",e.SNOWFLAKE="snowflake"}(bo||(bo={}));var wo=(vo={},(0,u.Z)(vo,bo.API,"API"),(0,u.Z)(vo,bo.BIGQUERY,"Google BigQuery"),(0,u.Z)(vo,bo.FILE,"Local file"),(0,u.Z)(vo,bo.GENERIC,"Generic (no template)"),(0,u.Z)(vo,bo.POSTGRES,"PostgreSQL"),(0,u.Z)(vo,bo.REDSHIFT,"Amazon Redshift"),(0,u.Z)(vo,bo.S3,"Amazon S3"),(0,u.Z)(vo,bo.SNOWFLAKE,"Snowflake"),vo),Zo=(go={},(0,u.Z)(go,i.DATA_LOADER,[bo.GENERIC,bo.FILE,bo.API,bo.BIGQUERY,bo.POSTGRES,bo.REDSHIFT,bo.S3,bo.SNOWFLAKE]),(0,u.Z)(go,i.DATA_EXPORTER,[bo.GENERIC,bo.FILE,bo.BIGQUERY,bo.POSTGRES,bo.REDSHIFT,bo.S3,bo.SNOWFLAKE]),(0,u.Z)(go,i.TRANSFORMER,[bo.BIGQUERY,bo.POSTGRES,bo.REDSHIFT,bo.SNOWFLAKE]),go),_o=bo,Po=function(e,n){return Zo[e].map((function(t){return{indent:e===i.TRANSFORMER,label:function(){return wo[t]},onClick:function(){n({config:{data_source:t===_o.GENERIC?null:t},type:e})},uuid:"".concat(e,"/").concat(t)}}))};function Io(e,n,t){return e.map((function(e){return{indent:!0,label:function(){return ko[n][e]},onClick:function(){t({config:{action_type:e,axis:n},type:i.TRANSFORMER})},uuid:"".concat(n,"_").concat(e)}})).sort((function(e,n){return e.label().localeCompare(n.label())}))}function Eo(e,n,t){var r=[];return e.forEach((function(e){if(e!==ao.MISC)r.push({indent:!0,items:Io(xo[n][e],n,t),label:function(){return e},uuid:"".concat(n,"_grouping_").concat((0,Ce.RA)(e))});else{var o=Io(xo[n][e],n,t);r.push.apply(r,(0,m.Z)(o))}})),r}function So(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function To(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?So(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):So(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ao=function(e){var n=e.addNewBlock,t=e.compact,r=e.blockIdx,o=e.setAddNewBlockMenuOpenIdx,c=e.setRecsWindowOpenBlockIdx,l=(0,f.useState)(null),u=l[0],a=l[1],s=(0,f.useRef)(null),d=(0,f.useRef)(null),p=(0,f.useRef)(null),h={compact:t,inline:!0},v=(0,f.useMemo)((function(){return Object.fromEntries(y.map((function(e){return[e,Po(e,n)]})))}),[n]),g=Eo(yo,ho.qs.COLUMN,n),b=Eo(jo,ho.qs.ROW,n),x=[{label:function(){return"Generic (no template)"},onClick:function(){n({type:i.TRANSFORMER})},uuid:"generic_transformer_action"},{isGroupingTitle:!0,label:function(){return"Data sources"},uuid:"data_sources_grouping"}].concat((0,m.Z)(v[i.TRANSFORMER]),[{isGroupingTitle:!0,label:function(){return"Column actions"},uuid:"column_actions_grouping"}],(0,m.Z)(g),[{isGroupingTitle:!0,label:function(){return"Row actions"},uuid:"row_actions_grouping"}],(0,m.Z)(b)),k=(0,f.useCallback)((function(){return a(null)}),[]),O=(0,f.useCallback)((function(){return null===o||void 0===o?void 0:o((function(e){return null===e?r:null}))}),[r,o]);return(0,Z.jsxs)(j.Z,{inline:!0,children:[(0,Z.jsx)(Ie.Z,{onClickOutside:k,open:!0,children:(0,Z.jsxs)(j.Z,{children:[(0,Z.jsx)(so,{items:v[i.DATA_LOADER],onClickCallback:k,open:0===u,parentRef:s,uuid:"data_loader_button",children:(0,Z.jsx)(Bt,To(To({},h),{},{beforeElement:(0,Z.jsx)(Co,{blue:!0,compact:t,children:(0,Z.jsx)(D.mm,{size:t?Oo/2:Oo})}),onClick:function(e){e.preventDefault(),a((function(e){return 0===e?null:0})),O()},uuid:"AddNewBlocks/Data_loader",children:"Data loader"}))}),(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(so,{items:x,onClickCallback:k,open:1===u,parentRef:d,uuid:"transformer_button",children:(0,Z.jsx)(Bt,To(To({},h),{},{beforeElement:(0,Z.jsx)(Co,{compact:t,purple:!0,children:(0,Z.jsx)(D.mm,{size:t?Oo/2:Oo})}),onClick:function(e){e.preventDefault(),a((function(e){return 1===e?null:1})),O()},uuid:"AddNewBlocks/Transformer",children:"Transformer"}))}),(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(so,{items:v[i.DATA_EXPORTER],onClickCallback:k,open:2===u,parentRef:p,uuid:"data_exporter_button",children:(0,Z.jsx)(Bt,To(To({},h),{},{beforeElement:(0,Z.jsx)(Co,{compact:t,yellow:!0,children:(0,Z.jsx)(D.mm,{inverted:!0,size:t?Oo/2:Oo})}),onClick:function(e){e.preventDefault(),a((function(e){return 2===e?null:2})),O()},uuid:"AddNewBlocks/Data_exporter",children:"Data exporter"}))})]})}),(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(Bt,To(To({},h),{},{beforeElement:(0,Z.jsx)(Co,{border:!0,compact:t,children:(0,Z.jsx)(D.mm,{size:t?Oo/2:Oo})}),onClick:function(e){e.preventDefault(),n({type:i.SCRATCHPAD})},uuid:"AddNewBlocks/Scratchpad",children:"Scratchpad"})),(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(Bt,To(To({},h),{},{beforeElement:(0,Z.jsx)(Co,{compact:t,children:(0,Z.jsx)(po,{size:Oo*(t?.75:1.25)})}),onClick:function(e){e.preventDefault(),c(r)},uuid:"AddNewBlocks/Recommendations",children:"Recs"}))]})},Ro=t(89565),Do=t.n(Ro),Mo=t(62976),Fo=k.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-n38rkq-0"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;overflow:hidden;"," ",""],an,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).table,";\n  ")}),(function(e){return!e.executedAndIdle&&"\n    border-bottom-left-radius: ".concat(w.n_,"px;\n    border-bottom-right-radius: ").concat(w.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),Bo=k.default.div.withConfig({displayName:"indexstyle__OutputRowStyle",componentId:"sc-n38rkq-1"})([""," "," ",""],(function(e){return e.first&&"\n    padding-top: ".concat(S.iI*S.cd,"px;\n  ")}),(function(e){return e.last&&"\n    padding-bottom: ".concat(S.iI*S.cd,"px;\n  ")}),(function(e){return e.contained&&"\n    padding-left: ".concat(68,"px;\n    padding-right: ").concat(S.iI*S.cd,"px;\n  ")})),No=k.default.div.withConfig({displayName:"indexstyle__HTMLOutputStyle",componentId:"sc-n38rkq-2"})(["table{border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;","}td,th{padding:0 8px;}a{","}"],an,(function(e){return"\n      color: ".concat((e.theme.interactive||C.Z.interactive).linkPrimary,";\n    ")})),Ho=k.default.div.withConfig({displayName:"indexstyle__ExtraInfoStyle",componentId:"sc-n38rkq-3"})([""," border-bottom-style:solid;border-bottom-width:2px;border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;",""],an,(function(e){return"\n    background-color: ".concat((e.theme.borders||C.Z.borders).light,";\n    border-bottom-left-radius: ").concat(w.n_,"px;\n    border-bottom-right-radius: ").concat(w.n_,"px;\n  ")})),Lo=k.default.div.withConfig({displayName:"indexstyle__ExtraInfoContentStyle",componentId:"sc-n38rkq-4"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],S.iI,68,S.iI*S.cd,S.iI),zo=k.default.div.withConfig({displayName:"indexstyle__ExtraInfoBorderStyle",componentId:"sc-n38rkq-5"})(["height:1px;width:100%;",""],(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||C.Z.borders).medium,";\n  ")}));function Uo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Wo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Uo(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Uo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Go(e){var n={},t={};return e.forEach((function(e){var r=e.content,o=e.outputs,i=e.uuid;o.length>=1&&(n[i]=o.map((function(e){var n=e||{},t=n.sample_data,r=n.shape,o=n.text_data,i=n.type;return t?{data:Wo({shape:r},t),type:i}:o&&(0,Ce.Pb)(o)?JSON.parse(o):o}))),t[i]=r})),{content:t,messages:n}}function Ko(e,n,t){e.forEach((function(e){(0,cn.t8)("".concat(t,"/").concat(e.uuid,"/codeCollapsed"),(0,cn.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed"))),(0,cn.t8)("".concat(t,"/").concat(e.uuid,"/outputCollapsed"),(0,cn.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed")))}))}function Vo(e){return"".concat(e,"/").concat(cn.kP)}function Qo(e){return(0,cn.U2)(Vo(e),[])}function qo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Xo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qo(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Yo=function(e){var n=e.block,t=e.collapsed,r=e.contained,o=void 0===r||r,i=e.hasError,c=e.hideExtraInfo,l=e.isInProgress,u=e.mainContainerWidth,a=e.messages,s=e.openSidekickView,d=e.pipeline,p=e.runCount,h=e.runEndTime,g=e.runStartTime,x=e.selected,y=e.setCollapsed,k=e.setOutputBlocks,C=e.setSelectedOutputBlock,w=n.status,_=n.type,P=(0,f.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)||0}),[a]),I=v.EXECUTED===w||!l&&0===p&&P>=1||!l&&p>=1&&h>=g,E=(0,f.useState)(),T=E[0],A=E[1],M=/\[__internal_output__\]/,F=function(e){return Array.isArray(e)?e.join("\n"):e},B=(0,f.useMemo)((function(){return a.reduce((function(e,n){var t=e.at(-1);return $r.includes(null===t||void 0===t?void 0:t.type)&&(null===t||void 0===t?void 0:t.type)===n.type&&!F(null===n||void 0===n?void 0:n.data).match(M)?t.data+=F(n.data):$r.includes(null===n||void 0===n?void 0:n.type)&&!F(null===n||void 0===n?void 0:n.data).match(M)?e.push(Xo(Xo({},n),{},{data:F(n.data)})):e.push(Xo({},n)),e}),[])}),[a]),N=(0,f.useMemo)((function(){var e=function(e,n){var t=e.columns,r=e.index,o=e.rows,i=e.shape,c=n.selected;return i&&A(i),o.length>=1&&(0,Z.jsx)(Mo.Z,{columns:t,disableScrolling:!c,index:r,maxHeight:60*S.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,rows:o,width:u-(2+S.cd*S.iI*2+2+jr.nn)})};return null===B||void 0===B?void 0:B.map((function(n,t){var r=n.data,i=n.type;if(r&&0!==(null===r||void 0===r?void 0:r.length)){var c=[],l=(c=(c=Array.isArray(r)?r:[r]).filter((function(e){return e}))).length,u=[];return c.forEach((function(n,r){var c,a={contained:o,first:0===t&&0===r,last:t===P-1&&r===l-1};if("string"===typeof n&&n.match(M)){var s=n.replace(M,"");if((0,Ce.Pb)(s)){var d=JSON.parse(s),f=d.data,p=d.type;Xr.TABLE===p&&(c=e(f,{selected:x}),!0)}}else i===Xr.TABLE?(c=e((0,Ce.Pb)(n)?JSON.parse(n):n,{selected:x}),!0):$r.includes(i)?c=(0,Z.jsx)(Bo,Xo(Xo({},a),{},{children:(0,Z.jsx)(O.ZP,{monospace:!0,preWrap:!0,children:(0,Z.jsx)(Do(),{children:n})})})):i===Xr.TEXT_HTML?c=(0,Z.jsx)(Bo,Xo(Xo({},a),{},{children:(0,Z.jsx)(No,{children:(0,Z.jsx)(O.ZP,{dangerouslySetInnerHTML:{__html:n},monospace:!0})})})):i===Xr.IMAGE_PNG&&(c=(0,Z.jsx)("div",{style:{backgroundColor:"white"},children:(0,Z.jsx)("img",{alt:"Image ".concat(t," from code output"),src:"data:image/png;base64, ".concat(n)})}));u.push((0,Z.jsx)("div",{children:c},"code-output-".concat(t,"-").concat(r)))})),u}}))}),[B,o,u,x]);return(0,Z.jsxs)(Z.Fragment,{children:[o&&(0,Z.jsx)(Fo,{blockType:_,executedAndIdle:I,hasError:i,selected:x,children:!t&&N}),!o&&N,I&&!c&&(0,Z.jsxs)(Ho,{blockType:_,hasError:i,selected:x,children:[(0,Z.jsx)(zo,{}),(0,Z.jsxs)(j.Z,{justifyContent:"space-between",children:[y&&(0,Z.jsx)(Se.Z,{alignItems:"center",px:1,children:(0,Z.jsx)(Pe.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return y(!t)},transparent:!0,children:t?(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(D._M,{muted:!0,size:2*S.iI}),"\xa0",(0,Z.jsx)(O.ZP,{default:!0,children:"Expand output"})]}):(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(D.Kh,{muted:!0,size:2*S.iI}),T&&(0,Z.jsx)(R.Z,{ml:2,children:(0,Z.jsx)(O.ZP,{children:"".concat(T[0]," rows x ").concat(T[1]," columns")})})]})})}),(0,Z.jsx)(Lo,{children:(0,Z.jsxs)(j.Z,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,Z.jsx)(dr,{appearAbove:!0,appearBefore:!0,block:!0,label:p>=1&&g?"Last run at ".concat(new Date(g.valueOf()).toLocaleString()):i?"Block executed with errors":"Block executed successfully",size:null,widthFitContent:!0,children:(0,Z.jsxs)(j.Z,{alignItems:"center",children:[p>=1&&Number(h)>Number(g)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(O.ZP,{small:!0,children:[(Number(h)-Number(g))/1e3,"s"]}),(0,Z.jsx)(R.Z,{mr:1})]}),!i&&(0,Z.jsx)(D.Jr,{size:2*S.iI,success:!0}),i&&(0,Z.jsx)(Be,{danger:!0,size:2*S.iI,children:(0,Z.jsx)(O.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})}),!i&&!b.includes(_)&&(0,Z.jsx)(R.Z,{pl:1,children:(0,Z.jsx)(Pe.Z,{afterIcon:(0,Z.jsx)(D.M0,{muted:!0,size:1.75*S.iI}),basic:!0,noPadding:!0,onClick:function(){!function(e,n){var t=Qo(e);t.includes(n)||(0,cn.t8)(Vo(e),[].concat((0,m.Z)(t),[n]))}(null===d||void 0===d?void 0:d.uuid,n.uuid),s($e.DATA),k((function(e){return e.find((function(e){return e.uuid===n.uuid}))?e:(C(n),e.concat(n))}))},transparent:!0,children:(0,Z.jsx)(O.ZP,{default:!0,children:"Expand table"})})})]})})]})]})]})},Jo=t(40656),$o=k.default.svg.withConfig({displayName:"Convert__SVGStyle",componentId:"sc-fmw0vr-0"})([""]),ei=function(e){var n=e.fill,t=e.opacity,r=e.size,o=void 0===r?Jo.C:r,i=e.style,c=e.viewBox,l=void 0===c?"0 0 12 12":c;return(0,Z.jsxs)($o,{fill:n,height:o,opacity:t,style:i,viewBox:l,width:o,children:[(0,Z.jsx)("path",{clipRule:"evenodd",d:"M2.5 1C1.67157 1 1 1.67157 1 2.5v.0625c0 .27614-.223858.5-.5.5s-.5-.22386-.5-.5V2.5C0 1.11929 1.11929 0 2.5 0h7C10.8807 0 12 1.11929 12 2.5v7c0 1.3807-1.1193 2.5-2.5 2.5h-7C1.11929 12 0 10.8807 0 9.5v-.0625c0-.27614.223858-.5.5-.5s.5.22386.5.5V9.5c0 .8284.67157 1.5 1.5 1.5h7c.8284 0 1.5-.6716 1.5-1.5v-7c0-.82843-.6716-1.5-1.5-1.5h-7z",fill:"url(#paint0_linear_1332_60037)",fillRule:"evenodd"}),(0,Z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.05806 3.55806c.24408-.24408.6398-.24408.88388 0l2 2c.24408.24408.24408.6398 0 .88388l-2 2c-.24408.24408-.6398.24408-.88388 0-.24408-.24408-.24408-.6398 0-.88388l.93306-.93306H1C.654822 6.625.375 6.34518.375 6s.279822-.625.625-.625h5.99112l-.93306-.93306c-.24408-.24408-.24408-.6398 0-.88388z",fill:"#fff"}),(0,Z.jsx)("defs",{children:(0,Z.jsxs)("linearGradient",{id:"paint0_linear_1332_60037",x1:"-.618557",y1:"-.000001",x2:"10.5709",y2:".83113",gradientUnits:"userSpaceOnUse",children:[(0,Z.jsx)("stop",{stopColor:"#FFCC19"}),(0,Z.jsx)("stop",{offset:".585938",stopColor:"#2ECDF7"}),(0,Z.jsx)("stop",{offset:"1",stopColor:"#9E7BFF"})]})})]})},ni=k.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-knskck-0"})(["border-radius:","px;margin-top:","px;padding:","px;position:absolute;right:-","px;z-index:11;",""],w.BG,1.5*S.iI,S.iI,S.iI/2,(function(e){return"\n    background-color: ".concat((e.theme.interactive||C.Z.interactive).defaultBackground,";\n  ")}));function ti(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ri(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ti(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ti(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var oi=function(e,n,t,r){var o=[],i=n.findIndex((function(n){return n.uuid===e.uuid})),c=n[i-1];return c&&o.push(c.uuid),y.map((function(n){return{label:function(){return"Convert to ".concat((0,Ce.wX)(x[n]))},onClick:function(){return r({block:ri(ri({},e),{},{type:n,upstream_blocks:o})})},uuid:"".concat(t,"/convert_to/").concat(n)}}))};var ii,ci=function(e){var n=e.addWidget,t=e.block,r=e.blocks,o=e.deleteBlock,c=e.executionState,l=e.interruptKernel,u=e.runBlock,a=e.setOutputCollapsed,s=e.updateBlock,d=t.all_upstream_blocks_executed,p=void 0===d||d,h=t.type,m=t.uuid,v=(0,f.useRef)(null),g=(0,f.useRef)(null),b=(0,f.useRef)(null),x=(0,f.useRef)(null),y=(0,f.useState)(!1),w=y[0],_=y[1],P=(0,f.useState)(!1),I=P[0],E=P[1],T=(0,f.useState)(!1),M=T[0],F=T[1],B=(0,f.useState)(!1),H=B[0],L=B[1],z=(0,f.useContext)(k.ThemeContext),U=qr.IDLE!==c,W=un(h,{theme:z}).accent,K=(0,f.useMemo)((function(){return oi(t,r,"CommandButtons",s)}),[t,r,s]);return(0,Z.jsx)(ni,{children:(0,Z.jsxs)(j.Z,{alignItems:"center",flexDirection:"column",children:[qr.QUEUED===c&&(0,Z.jsx)(Pt.Z,{color:(z||C.Z).content.active,type:"cylon"}),qr.BUSY===c&&(0,Z.jsx)(Pt.Z,{color:(z||C.Z).content.active}),!U&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(dr,{appearAbove:!0,appearBefore:!0,default:!0,label:(0,Z.jsxs)(O.ZP,{children:["Run block \xa0 \xa0",(0,Z.jsx)(A,{inline:!0,keyTextGroups:[[N.RJ,N.Lz]],monospace:!0,uuidForKey:m})]}),size:3*S.iI,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){p?u({block:t}):F(!0)},children:(0,Z.jsx)(Be,{color:W,size:3*S.iI,children:(0,Z.jsx)(D.Py,{black:!0,size:1.5*S.iI})})})}),(0,Z.jsx)(Ie.Z,{disableEscape:!0,onClickOutside:function(){return F(!1)},open:M,children:(0,Z.jsx)(G,{items:[{label:function(){return"Execute block"},onClick:function(){return u({block:t})},uuid:"execute_block"},{label:function(){return"Execute with upstream blocks"},onClick:function(){return u({block:t,runUpstream:!0})},uuid:"execute_upstream"}],left:25*-S.iI,onClickCallback:function(){return F(!1)},open:M,parentRef:b,topOffset:2*-S.iI,uuid:"execute_actions",width:25*S.iI})})]}),i.SCRATCHPAD===t.type&&(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(so,{items:K,left:22*-S.iI,onClickCallback:function(){return E(!1)},onClickOutside:function(){return E(!1)},open:I,parentRef:g,topOffset:3*-S.iI,uuid:"CommandButtons/convert_block",children:(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:(0,Z.jsx)(O.ZP,{children:"Convert block"}),size:2.5*S.iI,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return E(!I)},ref:g,children:(0,Z.jsx)(ei,{size:2.5*S.iI})})})})}),[i.DATA_LOADER,i.TRANSFORMER].includes(t.type)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(R.Z,{mt:S.cd,ref:v,children:(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:"Add chart",size:2.25*S.iI,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return _(!0)},children:(0,Z.jsx)(D.er,{size:2.25*S.iI})})})}),(0,Z.jsx)(Ie.Z,{disableEscape:!0,onClickOutside:function(){return _(!1)},open:w,children:(0,Z.jsx)(_e,{addWidget:n,block:t,left:25*-S.iI,onClickCallback:function(){return _(!1)},open:w,parentRef:v,runBlock:u,topOffset:6*S.iI})})]}),(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:(0,Z.jsxs)(O.ZP,{children:["Delete block and file \xa0 \xa0",(0,Z.jsx)(A,{inline:!0,keyTextGroups:[[N.jW],[N.jW]],monospace:!0,uuidForKey:m})]}),size:2.5*S.iI,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){o(t),a(!1)},children:(0,Z.jsx)(D.rF,{size:2.5*S.iI})})})}),U&&(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(dr,{appearAbove:!0,appearBefore:!0,default:!0,label:(0,Z.jsxs)(O.ZP,{children:["Interrupt kernel \xa0 \xa0",(0,Z.jsx)(A,{inline:!0,monospace:!0,keyTextGroups:[[N.kA],[N.kA]],uuidForKey:m})]}),size:2.5*S.iI,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return l()},children:(0,Z.jsx)(Be,{borderSize:1.5,size:2.5*S.iI,children:(0,Z.jsx)(D.x8,{size:1*S.iI})})})})}),(0,Z.jsx)("div",{ref:x,children:(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:(0,Z.jsx)(O.ZP,{children:"More actions"}),size:2.5*S.iI,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return L(!H)},children:(0,Z.jsx)(Be,{borderSize:1.5,size:2.5*S.iI,children:(0,Z.jsx)(D.mH,{size:S.iI})})})})})}),(0,Z.jsx)(Ie.Z,{disableEscape:!0,onClickOutside:function(){return L(!1)},open:H,children:(0,Z.jsx)(G,{items:[{label:function(){return"Execute with upstream blocks"},onClick:function(){return u({block:t,runUpstream:!0})},uuid:"execute_upstream"},{label:function(){return"Execute block and run tests"},onClick:function(){return u({block:t,runTests:!0})},uuid:"run_tests"}],left:25*-S.iI,onClickCallback:function(){return L(!1)},open:H,parentRef:x,topOffset:6*S.iI,uuid:"FileHeaderMenu/file_items",width:25*S.iI})})]})})};function li(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ui(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?li(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):li(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ai(e,n){var t=e;t.includes("__init__")||t.push("__init__");var r,o=t.length;return(0,bn.w6)(o).forEach((function(e,i){if(r)return r;var c=t.slice(0,o-i).join("/");r=n["".concat(c,".py")]})),r}function si(e,n,t){var r=function(e){var n=new RegExp("([\\w_]+)[ ]*=[ ]*([\\w_]+)","g");return(0,m.Z)(e.matchAll(n)).map((function(e){return{assignmentValue:e[2],variableName:e[1]}}))}(e),o=Un(e,n),i=r.find((function(e){var n=e.variableName;return o.match(new RegExp(n))}));if(i){var c=i.assignmentValue,u=zn(e)[c];if(u){var a,s=ai(u.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t),d=function(e,n){var t=e;n&&(t=t.split(" as ".concat(n))[0]);var r="[\\w.]+",o=["from ".concat(r," import (").concat(r,")"),"import (".concat(r,")")],i=new RegExp("(".concat(o.join("|"),")"),"g"),c=(0,m.Z)(t.matchAll(i))[0];if(c){var u=(0,l.Z)(c,4),a=u[2],s=u[3];return a||s}}(u,c);return null===s||void 0===s||null===(a=s.methods_for_class)||void 0===a?void 0:a[d]}}return[]}function di(e,n,t){var r,o,i;return((null===(r=t.outputs)||void 0===r||null===(o=r[0])||void 0===o||null===(i=o.sample_data)||void 0===i?void 0:i.columns)||[]).map((function(t){return{label:"".concat(t," column"),kind:e.languages.CompletionItemKind.Variable,insertText:"'".concat(t,"'"),range:n}}))}function fi(e,n){var t=e.word.split(""),r=new RegExp(t.reduce((function(e,n,r){var o=t[r+1],i=o?"^".concat(o):"";return e+"".concat(n,"[w ").concat(i,"]*")}),""));return n.reduce((function(e,n){return n.label.match(r)?e.concat(n):e}),[])}function pi(e){var n=e.autocompleteItems,t=e.block,r=e.blocks,o=e.pipeline,c=t.type,u=t.upstream_blocks,a=(0,bn.HK)(n,(function(e){return e.id}));return function(t){return function(s,d){var f=[],p=s.getValueInRange({endColumn:d.column,endLineNumber:d.lineNumber,startColumn:1,startLineNumber:1}),h=s.getWordUntilPosition(d),v=h.endColumn,g=h.startColumn,b={endColumn:v,endLineNumber:d.lineNumber,startColumn:g,startLineNumber:d.lineNumber},x=si(p,b,a);if((null===x||void 0===x?void 0:x.length)>=1){var y=fi(h,x.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Method,label:e,range:b}})));if(y.length>=1)return{suggestions:y}}var j=function(e,n,t){var r=Un(e,n);if(r=r.match(/([\w_]+)./)){var o=zn(e)[r[1]];if(o){var i=ai(o.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t);if(null!==i&&void 0!==i&&i.functions)return null===i||void 0===i?void 0:i.functions}}return[]}(p,b,a);if((null===j||void 0===j?void 0:j.length)>=1){var k=fi(h,j.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Function,label:e,range:b}})));if(k.length>=1)return{suggestions:k}}if((null===u||void 0===u?void 0:u.length)>=1){var O=new RegExp("\n@".concat(c));p.match(O)&&f.push.apply(f,(0,m.Z)(fi(h,function(e,n,t){var r=t.block,o=t.blocks,i=r.upstream_blocks,c=(0,bn.HK)(o,(function(e){return e.uuid}));return i.map((function(t,r){var o=c[t].type,i=0===r?"df":"args[".concat(r-1,"]");return{label:"df ".concat(t," ").concat(o," block"),kind:e.languages.CompletionItemKind.Variable,documentation:"Variable for ".concat(o," ").concat(t," data."),insertText:i,range:n}}))}(t,b,e))))}if(h.word.match(/i|f/)){var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=(arguments.length>2?arguments[2]:void 0).word,i=new Set,c={};e.forEach((function(e){var n=e.group,t=e.id,r=e.imports;if([ii.MAGE_LIBRARY,ii.USER_LIBRARY].includes(n)){var o=t;o.match(/__init__.py/)&&(o=o.replace(/\/__init__.py/,"")),o=o.split(".py")[0].replaceAll("/","."),c[o]=e}var l=t.replace(".py","").replace("/__init__","").split("/");if(1===l.length)i.add("import ".concat(l[0]));else if(l.length>=2){var u=l.slice(0,l.length-1).join(".");i.add("from ".concat(u," import ").concat(l[l.length-1]))}r.forEach((function(e){return i.add(e)}))}));var u,a="i"===o,s="f"===o,d=a?"import":s?"from":"",f=Un(n,r);if(a&&f.match(/from/)&&(u=f.match(/from ([A-Za-z0-9_.]+) /)[1]),u&&c[u]){var p=c[u],h=p.classes,v=p.constants,g=p.files,b=p.functions,x=[];return[[v,t.languages.CompletionItemKind.Constant],[h,t.languages.CompletionItemKind.Class],[b,t.languages.CompletionItemKind.Function]].forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],o=n[1];t.forEach((function(e){x.push({filterText:"import ".concat(e),insertText:"import ".concat(e),kind:o,label:e,range:r})}))})),g.forEach((function(e){var n=e.split("/"),o=n[n.length-1].split(".py")[0];x.push({filterText:"import ".concat(o),insertText:"import ".concat(o),kind:t.languages.CompletionItemKind.Variable,label:o,range:r})})),x}return(0,m.Z)(i).map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.File,label:e,range:r}})).concat(Object.entries(c).map((function(e){var n=(0,l.Z)(e,2),o=n[0];return n[1],{filterText:"".concat(d," ").concat(o),insertText:"".concat(d," ").concat(o," "),kind:t.languages.CompletionItemKind.File,label:"".concat(o),range:ui({},r)}})))}(n,p,h,t,b,e);f.push.apply(f,(0,m.Z)(C))}if(i.CHART===c||i.SCRATCHPAD===c){var w=[];if(i.CHART===c?u.forEach((function(e,n){w.push({block:r.find((function(n){var t=n.uuid;return e===t})),matchIndex:0,variableName:"df_".concat(n+1)})})):i.SCRATCHPAD===c&&function(e,n){return e.map((function(e){return{block:e,regex:new RegExp("([\\w_]+)[ ]*=[ ]*get_variable\\('".concat(n.uuid,"', '").concat(e.uuid,"', 'df'\\)"),"g")}}))}(r,o).forEach((function(e){var n=e.block,t=e.regex,r=p.matchAll(t);(0,m.Z)(r).forEach((function(e){var t=null===e||void 0===e?void 0:e.index,r=null===e||void 0===e?void 0:e[1];r&&w.push({block:n,matchIndex:t,variableName:r})}))})),w.length>=1){var Z,_=null===(Z=p.split("\n")[d.lineNumber-1])||void 0===Z?void 0:Z.slice(0,h.startColumn-1);if(_){var P=[];if(w.forEach((function(e){var n=e.block,r=e.matchIndex,o=e.variableName,i=new RegExp("".concat(o,"\\["));_.match(i)&&P.push({items:di(t,b,n),matchIndex:r})})),P.length>=1)return{suggestions:fi(h,(0,bn.YC)(P,"matchIndex",{ascending:!1})[0].items)}}}1===g&&(i.CHART===c?f.push.apply(f,(0,m.Z)(fi(h,u.map((function(e,n){var r="df_".concat(n+1);return{label:"".concat(r," ").concat(e," block"),kind:t.languages.CompletionItemKind.Snippet,insertText:r,range:b}}))))):i.SCRATCHPAD===c&&f.push.apply(f,(0,m.Z)(fi(h,function(e,n,t){var r=t.block,o=t.blocks,c=t.pipeline;return o.reduce((function(t,o){var l=o.type,u=o.uuid;return r.uuid!==u&&[i.DATA_LOADER,i.TRANSFORMER].includes(l)?t.concat({label:"df ".concat(u," ").concat(l," block"),kind:e.languages.CompletionItemKind.Snippet,documentation:"Get the data from ".concat(l," block ").concat(u,"."),insertText:"from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(c.uuid,"', '").concat(u,"', 'df')\n"),range:n}):t}),[])}(t,b,e)))))}var I=new Set;r.concat({content:p}).forEach((function(e){var n=e.content;(0,m.Z)(n.matchAll("([A-Za-z_0-9]+)","g")).forEach((function(e){return I.add(e[1])}))}));var E=(0,m.Z)(I);if(E.length){var S=E.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Variable,label:e,range:b}}));f.push.apply(f,(0,m.Z)(fi(h,S)))}return{suggestions:f}}}}function hi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function mi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?hi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function vi(e,n){var t,r=e.addNewBlock,o=e.addNewBlockMenuOpenIdx,c=e.addWidget,a=e.autocompleteItems,s=e.block,d=e.blockIdx,h=e.blockRefs,v=e.blocks,g=e.defaultValue,b=void 0===g?"":g,x=e.deleteBlock,y=e.executionState,C=e.fetchFileTree,w=e.fetchPipeline,_=e.height,P=e.interruptKernel,I=e.mainContainerRef,E=e.mainContainerWidth,T=e.messages,A=void 0===T?[]:T,M=e.noDivider,F=e.onChange,B=e.openSidekickView,H=e.pipeline,z=e.runBlock,U=e.runningBlocks,W=e.savePipelineContent,G=e.selected,K=e.setAddNewBlockMenuOpenIdx,V=e.setAnyInputFocused,Q=e.setEditingBlock,q=e.setOutputBlocks,X=e.setRecsWindowOpenBlockIdx,Y=e.setSelected,J=e.setSelectedOutputBlock,$=e.setTextareaFocused,ee=e.textareaFocused,ne=e.widgets,te=(0,f.useContext)(k.ThemeContext),re=(0,f.useState)(!1),oe=re[0],ie=re[1],ce=(0,f.useState)(null),le=ce[0],ue=ce[1],ae=(0,f.useState)(!1),se=ae[0],de=ae[1],fe=(0,f.useState)(!1),pe=fe[0],he=fe[1],me=(0,f.useState)(b),ve=me[0],ge=me[1],be=(0,f.useState)(null),xe=be[0],ye=be[1],je=(0,f.useState)(null),ke=je[0],Oe=je[1],we=(0,f.useState)(!1),Ze=we[0],_e=we[1],Ie=(0,f.useState)(s.uuid),Ee=Ie[0],Te=Ie[1],Ae=(0,f.useState)(!1),Re=Ae[0],De=Ae[1],Me=(0,f.useState)(0),Fe=Me[0],Ne=Me[1],He=(0,f.useState)(null),Le=He[0],ze=He[1],Ue=(0,f.useState)(null),We=Ue[0],Ge=Ue[1],Ke=(0,f.useMemo)((function(){return"".concat(null===H||void 0===H?void 0:H.uuid,"/").concat(null===s||void 0===s?void 0:s.uuid,"/codeCollapsed")}),[null===H||void 0===H?void 0:H.uuid,null===s||void 0===s?void 0:s.uuid]),Ve=(0,f.useMemo)((function(){return"".concat(null===H||void 0===H?void 0:H.uuid,"/").concat(null===s||void 0===s?void 0:s.uuid,"/outputCollapsed")}),[null===H||void 0===H?void 0:H.uuid,null===s||void 0===s?void 0:s.uuid]);(0,f.useEffect)((function(){he((0,cn.U2)(Ke,!1)),De((0,cn.U2)(Ve,!1))}),[]);var Qe=(0,f.useRef)(null),qe=(0,f.useMemo)((function(){return(0,bn.HK)(v,(function(e){return e.uuid}))}),[v]),Xe=(0,f.useMemo)((function(){return!!ne.find((function(e){return e.upstream_blocks.includes(s.uuid)}))}),[s,ne]),Ye=(0,f.useCallback)((function(e){var n=e||{},t=n.block,r=n.code,o=n.disableReset,i=n.runDownstream,c=n.runUpstream,l=n.runTests;z({block:t,code:r||ve,runDownstream:i||Xe,runUpstream:c||!1,runTests:l||!1}),o||(Ne(1+Number(Fe)),ze(null),De(!1))}),[ve,Xe,Fe,z,Ne,ze]),Je=!!U.find((function(e){return e.uuid===s.uuid}))||(null===A||void 0===A?void 0:A.length)>=1&&y!==qr.IDLE;(0,f.useEffect)((function(){Je&&Ge(Number(new Date))}),[Je,Ge]);var $e=(0,Rn.Z)(y);(0,f.useEffect)((function(){y===qr.IDLE&&y!==$e&&ze(Number(new Date))}),[y,$e,ze]);var en=(0,f.useCallback)((function(e){var n=e.editorRect,t=(n.height,n.top),r=e.position.lineNumber;if(null!==I&&void 0!==I&&I.current){var o=I.current.getBoundingClientRect().height,i=21*r;if(t+i>o){var c=I.current.scrollTop+(i-o+t);I.current.scrollTo(0,c)}else if(i+t<21){var l=I.current.scrollTop+(i+t-21);I.current.scrollTo(0,l)}}}),[I]),nn=(0,f.useMemo)((function(){return(null===ke||void 0===ke?void 0:ke.length)>=0?ke.map((function(e){return{data:e,execution_state:qr.IDLE,type:Xr.TEXT_PLAIN}})):A.filter((function(e){return null===e||void 0===e?void 0:e.type}))}),[ke,A]),tn=!!nn.find((function(e){return e.error})),rn=un(s.type,{theme:te}).accent,on=(null===s||void 0===s||null===(t=s.upstream_blocks)||void 0===t?void 0:t.length)||0,ln=(0,f.useMemo)((function(){return{blockType:s.type,hasError:tn,selected:G}}),[s.type,tn,G]),an=nn.length>=1,vn=(0,f.useCallback)((function(){G||(V(!1),Y(!0))}),[V,Y]),gn=(0,p.Db)(Nt.ZP.blocks.pipelines.useUpdate(null===H||void 0===H?void 0:H.uuid,s.uuid),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){_e(!1),w(),C(),ge(ve)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})},onError:function(e){var n=(0,Ht.qQ)(e).messages;Oe(n)}}),xn=(0,l.Z)(gn,1)[0],yn="CodeBlock/".concat(s.uuid),jn=(0,L.y)(),kn=jn.registerOnKeyDown,On=jn.unregisterOnKeyDown;(0,f.useEffect)((function(){return function(){On(yn)}}),[On,yn]),kn(yn,(function(e,n,t){Ze&&String(t[0])===String(N.Uq)&&String(t[1])!==String(N.zX)?xn({block:mi(mi({},s),{},{name:Ee})}):G&&(Lt([N.zX,N.Uq],n)||Lt([N.PQ,N.Uq],n)?Ye({block:s}):Lt([N.XR,N.Uq],n)&&(e.preventDefault(),r({type:s.type}),Ye({block:s})))}),[r,s,Ze,Ee,Ye,G,xn]),(0,f.useEffect)((function(){var e;return We&&(e=setInterval((function(){return ye(Number(new Date))}),1e3)),function(){return clearInterval(e)}}),[We]);var Cn=(0,f.useMemo)((function(){return(0,Z.jsx)(Gn,{autoHeight:!0,autocompleteProviders:le,height:_,onChange:function(e){ge(e),null===F||void 0===F||F(e)},onDidChangeCursorPosition:en,placeholder:"Start typing here...",selected:G,setSelected:Y,setTextareaFocused:$,shortcuts:[function(e,n){return function(e,n){return{contextMenuGroupId:"navigation",contextMenuOrder:1.5,id:"executeCode",keybindingContext:null,keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.Enter],label:"Run selected block",precondition:null,run:function(){return n()}}}(e,(function(){Ye({block:s,code:n.getValue()})}))}],textareaFocused:ee,value:ve,width:"100%"})}),[le,s,v,ve,_,H,G,ee]);(0,f.useEffect)((function(){ue({python:pi({autocompleteItems:a,block:s,blocks:v,pipeline:H})})}),[a,s,v,H]);var wn,Zn=(0,f.useMemo)((function(){return(0,Z.jsx)(Yo,mi(mi({},ln),{},{block:s,collapsed:Re,isInProgress:Je,mainContainerWidth:E,messages:nn,openSidekickView:B,pipeline:H,runCount:Fe,runEndTime:Le,runStartTime:We,selected:G,setCollapsed:function(e){De((function(){return(0,cn.t8)(Ve,e),e}))},setOutputBlocks:q,setSelectedOutputBlock:J}))}),[s,ln,Je,E,nn,Re,Fe,Le,We,G]),_n=(0,f.useCallback)((function(){return de(!1)}),[]);return(0,Z.jsxs)("div",{ref:n,style:{position:"relative",zIndex:d===o?11:null},children:[(0,Z.jsxs)(j.Z,{alignItems:"center",justifyContent:"space-between",style:{marginBottom:S.iI/2},children:[(0,Z.jsxs)(Se.Z,{alignItems:"center",flex:1,children:[(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(Be,{color:rn,size:1.5*S.iI,square:!0}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(so,{items:(wn=s,(0,u.Z)({},i.SCRATCHPAD,(0,m.Z)(oi(wn,v,"block_menu/scratchpad",xn)))[wn.type]),onClickCallback:_n,onClickOutside:_n,open:se,parentRef:Qe,uuid:"CodeBlock/block_menu",children:(0,Z.jsxs)(O.ZP,{color:rn,monospace:!0,children:[i.DATA_EXPORTER===s.type&&(0,Z.jsx)(Z.Fragment,{children:"DATA EXPORTER"}),i.DATA_LOADER===s.type&&(0,Z.jsx)(Z.Fragment,{children:"DATA LOADER\xa0"}),i.SCRATCHPAD===s.type&&(0,Z.jsx)(Z.Fragment,{children:"SCRATCHPAD\xa0"}),i.TRANSFORMER===s.type&&(0,Z.jsx)(Z.Fragment,{children:"TRANSFORMER\xa0"})]})}),i.SCRATCHPAD===s.type&&(0,Z.jsx)(Pe.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return de(!0)},transparent:!0,children:(0,Z.jsx)(D.K5,{muted:!0})}),(0,Z.jsx)(R.Z,{mr:1})]}),(0,Z.jsx)(R.Z,{mr:S.cd}),(0,Z.jsx)(D.iU,{size:1.5*S.iI}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(xr,{bold:!1,inputValue:Ee,monospace:!0,muted:!0,notRequired:!0,onBlur:function(){return setTimeout((function(){return _e(!1)}),300)},onChange:function(e){Te(e.target.value),e.preventDefault()},onClick:function(){V(!0),_e(!0)},onFocus:function(){V(!0),_e(!0)},stacked:!0,value:!Ze&&s.uuid}),Ze&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(Et.Z,{onClick:function(){return W({block:{name:Ee,uuid:s.uuid}}).then((function(){_e(!1),w(),C()}))},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update name"})]})]})]}),i.DATA_LOADER!==s.type&&i.SCRATCHPAD!==s.type&&(0,Z.jsx)(j.Z,{alignItems:"center",children:(0,Z.jsx)(dr,{appearBefore:!0,block:!0,label:"\n                ".concat((0,Ce._6)("parent block",on),". ").concat(0===on?"Click to select 1 or more blocks to depend on.":"Edit parent blocks.","\n              "),size:null,widthFitContent:!0,children:(0,Z.jsx)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var e;Y(!0),Q({upstreamBlocks:{block:s,values:null===(e=s.upstream_blocks)||void 0===e?void 0:e.map((function(e){return{uuid:e}}))}})},children:(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsxs)(O.ZP,{monospace:on>=1,underline:0===on,children:[0===on&&"Click to set parent blocks",on>=1&&(0,Ce._6)("parent block",on)]}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(D.Kq,{size:2*S.iI})]})})})}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(R.Z,{px:1,children:(0,Z.jsx)(Pe.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){he((function(e){return(0,cn.t8)(Ke,!e),!e})),pe||De((function(){return(0,cn.t8)(Ve,!0),!0}))},transparent:!0,children:pe?(0,Z.jsx)(D._M,{muted:!0,size:2*S.iI}):(0,Z.jsx)(D.Kh,{muted:!0,size:2*S.iI})})})]}),(G||Je)&&(0,Z.jsx)(ci,{addWidget:c,block:s,blocks:v,deleteBlock:x,executionState:y,interruptKernel:P,runBlock:Ye,setOutputCollapsed:De,updateBlock:xn}),(0,Z.jsxs)(sn,{onClick:function(){return vn()},children:[(0,Z.jsxs)(dn,mi(mi({},ln),{},{className:G&&ee?"selected":null,hasOutput:an,children:[s.upstream_blocks.length>=1&&!pe&&(0,Z.jsxs)(hn,{children:[(0,Z.jsx)(O.ZP,{small:!0,children:"Positional arguments for decorated function:"}),(0,Z.jsxs)(R.Z,{mt:1,children:[(0,Z.jsxs)(O.ZP,{monospace:!0,muted:!0,small:!0,children:[i.DATA_EXPORTER===s.type&&"@data_exporter",i.DATA_LOADER===s.type&&"@data_loader",i.TRANSFORMER===s.type&&"@transformer"]}),(0,Z.jsxs)(O.ZP,{monospace:!0,muted:!0,small:!0,children:["def ",(i.DATA_EXPORTER===s.type?"export_data":i.DATA_LOADER===s.type&&"load_data")||i.TRANSFORMER===s.type&&"transform_df","(",s.upstream_blocks.map((function(e,n){return"df_".concat(n+1)})).join(", "),"):"]}),s.upstream_blocks.map((function(e,n){var t=qe[e],r=un(null===t||void 0===t?void 0:t.type,{theme:te}).accent;return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(O.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0df",n>=1?"_".concat(n+1):null]})," ",(0,Z.jsx)(O.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"\u2192"})," ",(0,Z.jsx)(Et.Z,{color:r,onClick:function(){var e,n,r=null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e["".concat(null===t||void 0===t?void 0:t.type,"s/").concat(null===t||void 0===t?void 0:t.uuid,".py")];null===r||void 0===r||null===(n=r.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,Z.jsx)(O.ZP,{color:r,inline:!0,monospace:!0,small:!0,children:e})})]},e)}))]})]}),pe?(0,Z.jsx)(R.Z,{px:1,children:(0,Z.jsxs)(O.ZP,{monospace:!0,muted:!0,children:["(",(0,Ce._6)("line",null===ve||void 0===ve?void 0:ve.split(/\r\n|\r|\n/).length)," collapsed)"]})}):Cn,Je&&xe&&xe>We&&(0,Z.jsx)(mn,{children:(0,Z.jsxs)(O.ZP,{muted:!0,children:["".concat(Math.round((xe-We)/1e3)),"s"]})})]})),an&&Zn]}),!M&&(0,Z.jsxs)(fn,{onMouseEnter:function(){return ie(!0)},onMouseLeave:function(){ie(!1),K(null)},children:[oe&&(0,Z.jsx)(Ao,{addNewBlock:function(e){var n=e.content,t=e.upstream_blocks||[];return i.CHART!==s.type&&i.SCRATCHPAD!==s.type&&i.DATA_LOADER!==e.type&&i.CHART!==e.type&&i.SCRATCHPAD!==e.type&&t.push(s.uuid),[i.DATA_LOADER,i.TRANSFORMER].includes(s.type)&&i.SCRATCHPAD===e.type&&(n="from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(H.uuid,"', '").concat(s.uuid,"', 'df')\n")),r(mi(mi({},e),{},{content:n,upstream_blocks:t}))},blockIdx:d,compact:!0,setAddNewBlockMenuOpenIdx:K,setRecsWindowOpenBlockIdx:X}),(0,Z.jsx)(pn,{className:"block-divider-inner"})]})]})}!function(e){e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.MAGE_LIBRARY="mage_library",e.TRANSFORMER="transformer",e.USER_LIBRARY="user_library"}(ii||(ii={}));var gi=f.forwardRef(vi);function bi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function xi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?bi(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var yi=function(e){var n=e.addNewBlockAtIndex,t=e.addWidget,r=e.anyInputFocused,o=e.autocompleteItems,c=e.blockRefs,l=e.blocks,a=void 0===l?[]:l,s=e.deleteBlock,d=e.fetchFileTree,p=e.fetchPipeline,h=e.interruptKernel,m=(e.isPipelineUpdating,e.kernel,e.mainContainerRef),v=e.mainContainerWidth,g=e.messages,b=e.onChangeCodeBlock,x=e.openSidekickView,y=e.pipeline,j=e.pipelineContentTouched,k=(e.pipelineLastSaved,e.restartKernel),O=e.runBlock,C=e.runningBlocks,w=void 0===C?[]:C,_=e.savePipelineContent,P=e.selectedBlock,I=e.setAnyInputFocused,E=e.setEditingBlock,T=(e.setMessages,e.setOutputBlocks),A=e.setPipelineContentTouched,D=e.setRecsWindowOpenBlockIdx,M=(e.setRunningBlocks,e.setSelectedBlock),F=e.setSelectedOutputBlock,B=e.setTextareaFocused,H=e.textareaFocused,z=e.widgets,U=(0,f.useState)(!1),W=U[0],G=U[1],K=(0,f.useState)(!0),V=K[0],Q=K[1],q=(0,f.useState)(null),X=q[0],Y=q[1],J=(0,f.useMemo)((function(){return w.reduce((function(e,n,t){return xi(xi({},e),{},(0,u.Z)({},n.uuid,xi(xi({},n),{},{priority:t})))}),{})}),[w]),$=(0,Rn.Z)(P),ee=(0,f.useMemo)((function(){return a.length}),[a]),ne="PipelineDetail/index",te=(0,L.y)(),re=te.registerOnKeyDown,oe=te.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){oe(ne)}}),[oe,ne]),re(ne,(function(e,t,o){if(j&&Lt([N.zX,N.hS],t)){e.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else if(Lt([N.zX,N.Um],t))e.preventDefault(),_();else if(H)t[N.vP]?B(!1):j||N.Z1.find((function(e){return t[e]}))||A(!0);else{if(P){var c=a.findIndex((function(e){var n=e.uuid;return P.uuid===n}));t[N.vP]?(M(null),D(null)):o[0]===N.xD&&o[1]===N.xD?h():o[0]===N.l1&&o[1]===N.l1&&-1!==c?(s(P),setTimeout((function(){c===a.length-1?M(a[c-1]):a.length>=0?M(a[c+1]):M(null)}),100)):t[N.Bu]&&c>=1?M(a[c-1]):t[N.kD]&&c<=ee-2?M(a[c+1]):Lt([N.Uq],t)?B(!0):!r&&Lt([N.zH],t)?n({type:i.SCRATCHPAD},c,M):!r&&Lt([N.Fv],t)&&n({type:i.SCRATCHPAD},c+1,M)}else $&&t[N.Uq]&&M($);o[0]===N.OC&&o[1]===N.OC&&k()}}),[n,r,a,h,ee,j,k,_,P,$,A,M,B,H]),(0,f.useEffect)((function(){var e=setInterval((function(){j&&_()}),5e3);return function(){clearInterval(e)}}),[j,_]),(0,f.useEffect)((function(){setTimeout((function(){return G(!0)}),600)}),[y]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Wr,{children:V&&(0,Z.jsx)(eo.Z,{classNames:"pipeline-detail",in:W,onEntered:function(){return setTimeout((function(){return Q(!1)}),Ur)},timeout:1,children:(0,Z.jsx)(Gr,{})})}),(0,Z.jsxs)(R.Z,{mt:1,px:S.cd,children:[a.map((function(e,r){var i=e.type,l=e.uuid,u=(null===P||void 0===P?void 0:P.uuid)===l,j=J[l],k=j?0===j.priority?qr.BUSY:qr.QUEUED:qr.IDLE,C="".concat(i,"s/").concat(l,".py");return c.current[C]=(0,f.createRef)(),(0,Z.jsx)(gi,{addNewBlock:function(e){return B(!0),n(e,r+1,M)},addNewBlockMenuOpenIdx:X,addWidget:t,autocompleteItems:o,block:e,blockIdx:r,blockRefs:c,blocks:a,defaultValue:e.content,deleteBlock:function(e){s(e),I(!1)},executionState:k,fetchFileTree:d,fetchPipeline:p,interruptKernel:h,mainContainerRef:m,mainContainerWidth:v,messages:g[l],noDivider:r===ee-1,onChange:function(e){return b(l,e)},openSidekickView:x,pipeline:y,ref:c.current[C],runBlock:O,runningBlocks:w,savePipelineContent:_,selected:u,setAddNewBlockMenuOpenIdx:Y,setAnyInputFocused:I,setEditingBlock:E,setOutputBlocks:T,setRecsWindowOpenBlockIdx:D,setSelected:function(n){return M(!0===n?e:null)},setSelectedOutputBlock:F,setTextareaFocused:B,textareaFocused:u&&H,widgets:z},l)})),(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(Ao,{addNewBlock:function(e){var t=a[a.length-1],r=null,o=[];t&&(i.CHART!==t.type&&i.SCRATCHPAD!==t.type&&i.DATA_LOADER!==e.type&&i.CHART!==e.type&&i.SCRATCHPAD!==e.type&&o.push(t.uuid),[i.DATA_LOADER,i.TRANSFORMER].includes(t.type)&&i.SCRATCHPAD===e.type&&(r="from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(y.uuid,"', '").concat(t.uuid,"', 'df')\n"))),n(xi(xi({},e),{},{content:r,upstream_blocks:o}),ee,M),B(!0)},setRecsWindowOpenBlockIdx:D})})]})]})},ji=["beforeIcon","checked","disabled","errorMessage","label","labelDescription","large","meta","monospace","onClick","required","small","warning","xsmall"];function ki(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ki(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ki(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ci=k.default.div.withConfig({displayName:"Checkbox__CheckboxContainer",componentId:"sc-ujqx42-0"})(["display:inline-block;vertical-align:middle;cursor:pointer;"]),wi=k.default.div.withConfig({displayName:"Checkbox__ErrorContainer",componentId:"sc-ujqx42-1"})(["margin-top:4px;"]),Zi=k.default.input.withConfig({displayName:"Checkbox__HiddenCheckbox",componentId:"sc-ujqx42-2"})(["border:0;clip:rect(0 0 0 0);clippath:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;",""],(function(e){return e.notClickable&&"\n    background-color: ".concat((e.theme.content||C.Z.content).disabled,"\n    border-color: ").concat((e.theme.content||C.Z.content).disabled,"\n\n    &:hover {\n      cursor: not-allowed;\n    }\n  ")})),_i=k.default.div.withConfig({displayName:"Checkbox__StyledCheckbox",componentId:"sc-ujqx42-3"})(["border-radius:","px;height:","px;transition:all 150ms;width:","px;svg{position:relative;visibility:",";}"," "," "," "," input[disabled]{cursor:default;}"," ",""],.5*S.iI,2*S.iI,2*S.iI,(function(e){return e.checked||e.required?"visible":"hidden"}),(function(e){return e.large&&"\n    svg {\n      left: -4px;\n      top: -8px;\n    }\n  "}),(function(e){return!e.checked&&"\n    background-color: ".concat((e.theme.background||C.Z.background).popup,";\n    border: ").concat(w.PV,"px ").concat(w.M8," ").concat((e.theme.content||C.Z.content).muted,";\n  ")}),(function(e){return e.checked&&"\n    background-color: ".concat((e.theme.interactive||C.Z.interactive).checked,";\n    border: ").concat(w.YF,"px ").concat(w.M8," transparent;\n  ")}),(function(e){return e.required&&"\n    background-color: ".concat((e.theme.content||C.Z.content).disabled,";\n    border: ").concat(w.YF,"px ").concat(w.M8," transparent;\n  ")}),(function(e){return e.disabled&&"\n    background-color: ".concat((e.theme.content||C.Z.content).disabled,";\n    border-color: ").concat((e.theme.content||C.Z.content).disabled,";\n\n    &:hover {\n      cursor: not-allowed;\n    }\n  ")}),(function(e){return e.warning&&"\n    background-color: ".concat((e.theme.accent||C.Z.accent).warning,";\n    border-color: ").concat((e.theme.interactive||C.Z.interactive).defaultBorder,"\n  ")})),Pi=k.default.label.withConfig({displayName:"Checkbox__LabelStyle",componentId:"sc-ujqx42-4"})(["-ms-flex-direction:column;align-items:center;display:flex;flex-direction:column;flex-direction:row;&:hover{cursor:pointer;}"]),Ii=function(e){var n=e.beforeIcon,t=e.checked,r=e.disabled,o=e.errorMessage,i=e.label,c=e.labelDescription,l=e.large,u=e.meta,a=e.monospace,s=void 0!==a&&a,d=e.onClick,f=e.required,p=e.small,h=void 0!==p&&p,v=e.warning,g=e.xsmall,b=void 0!==g&&g,x=(0,Ee.Z)(e,ji),y=v||!!(o||u&&u.touched&&u.error);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Pi,{onClick:function(e){e.preventDefault(),d&&d(e)},children:[(0,Z.jsxs)(Ci,{children:[(0,Z.jsx)(Zi,Oi(Oi({},x),{},{disabled:r?"disabled":void 0,notClickable:r})),(0,Z.jsx)(_i,{checked:t,disabled:r,large:l,required:f,warning:y,children:(0,Z.jsx)(D.Jr,{inverted:t,size:S.iI*(l?3:2)})})]}),n&&(0,Z.jsx)(R.Z,{ml:1,children:(0,Z.jsx)(j.Z,{children:n})}),i&&(0,Z.jsxs)(R.Z,{pl:1,children:[(0,Z.jsx)(O.ZP,{disabled:r,lineThrough:r,monospace:s,small:h,xsmall:b,children:i}),c&&(0,Z.jsx)(O.ZP,{muted:!0,small:!0,children:c})]})]}),(o||u&&u.touched&&u.error)&&(0,Z.jsx)(wi,{children:(0,Z.jsx)(O.ZP,{small:!0,warning:!0,children:o?(0,m.Z)(o):u.error})})]})};var Ei=function(e){var n=e.last,t=e.suggestion,r=e.onClick,o=e.selected,i=t||{},c=i.action_payload,l=i.message,u=i.title,a=(null===c||void 0===c?void 0:c.action_arguments)||[];return(0,Z.jsx)(R.Z,{pb:n?0:2,children:(0,Z.jsxs)(j.Z,{alignItems:"flex-start",children:[(0,Z.jsx)(R.Z,{pr:2,pt:"4px",children:(0,Z.jsx)(Ii,{checked:o,onClick:r})}),(0,Z.jsxs)(Se.Z,{flexDirection:"column",children:[(0,Z.jsx)(O.ZP,{monospace:!0,children:u}),(0,Z.jsx)(O.ZP,{monospace:!0,secondary:!0,small:!0,children:l}),(0,Z.jsxs)(O.ZP,{muted:!0,small:!0,children:["Columns affected: ",a.join(", ")]})]})]})})},Si=t(55378),Ti=6.25*S.iI,Ai=100*S.iI,Ri=k.default.div.withConfig({displayName:"indexstyle__WindowContainerStyle",componentId:"sc-16gmugf-0"})(["border-radius:","px;width:100%;max-width:","px;z-index:101;position:absolute;overflow:hidden;top:50%;left:50%;transform:translate(-50%,-50%);",""],w.n_,Ai,(function(e){return"\n    box-shadow: ".concat((e.theme||C.Z).shadow.window,";\n    background-color: ").concat((e.theme||C.Z).background.panel,";\n  ")})),Di=(0,k.css)(["display:flex;align-items:center;justify-content:space-between;height:","px;padding:","px ","px;",""],Ti,S.iI,S.cd*S.iI,(function(e){return"\n    background-color: ".concat((e.theme||C.Z).background.output,";\n  ")})),Mi=k.default.div.withConfig({displayName:"indexstyle__WindowHeaderStyle",componentId:"sc-16gmugf-1"})([""," border-top-left-radius:","px;border-top-right-radius:","px;",""],Di,w.n_,w.n_,(function(e){return"\n    border-bottom: ".concat(w.YF,"px ").concat(w.M8," ").concat((e.theme||C.Z).borders.medium,";\n  ")})),Fi=k.default.div.withConfig({displayName:"indexstyle__WindowContentStyle",componentId:"sc-16gmugf-2"})([""," "," overflow:auto;padding:","px;"," ",""],(function(e){return e.minMaxHeight&&"\n    max-height: ".concat(7*S.iI,"px;\n  ")}),(function(e){return!e.minMaxHeight&&"\n    max-height: 75vh;\n  "}),S.cd*S.iI,jr.w5,(0,ln.eR)()),Bi=k.default.div.withConfig({displayName:"indexstyle__WindowFooterStyle",componentId:"sc-16gmugf-3"})([""," border-bottom-left-radius:","px;border-bottom-right-radius:","px;",""],Di,w.n_,w.n_,(function(e){return"\n    border-top: ".concat(w.YF,"px ").concat(w.M8," ").concat((e.theme||C.Z).borders.medium,";\n  ")}));function Ni(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Hi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ni(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ni(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Li=function(e){var n=e.addNewBlockAtIndex,t=e.blockInsertionIndex,r=e.blocks,o=void 0===r?[]:r,c=e.children,l=e.loading,u=e.selectedBlock,a=e.setRecsWindowOpenBlockIdx,s=e.setSelectedBlock,d=e.suggestions,p=(0,f.useState)(null),h=p[0],m=p[1],v=f.Children.count(c),g="undefined"===typeof t?o.length:t+1,b=null===u?"Select a block to view data cleaning recommendations.":"No recommendations available.";return(0,Z.jsxs)(Ri,{children:[(0,Z.jsxs)(Mi,{children:[(0,Z.jsxs)(Se.Z,{alignItems:"center",children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(po,{})}),(0,Z.jsx)(R.Z,{pr:1}),(0,Z.jsx)(O.ZP,{disableWordBreak:!0,monospace:!0,children:"Recommendations:\xa0"}),(0,Z.jsx)(Si.Z,{compact:!0,label:"Select block",monospace:!0,onChange:function(e){var n=e.target.value,t=o.find((function(e){return e.uuid===n}));s(t),m(null)},value:null===u||void 0===u?void 0:u.uuid,children:o.map((function(e){var n=e.uuid;return(0,Z.jsxs)("option",{value:n,children:[n,"\xa0"]},n)}))})]}),(0,Z.jsx)(Pe.Z,{iconOnly:!0,onClick:function(){return a(null)},children:(0,Z.jsx)(D.x8,{muted:!0})})]}),(0,Z.jsxs)(Fi,{minMaxHeight:0===v,children:[l&&(0,Z.jsx)(Pt.Z,{inverted:!0}),l||0!==v?f.Children.map(c,(function(e,n){return f.cloneElement(e,{key:n,last:n===v-1,onClick:function(){return m((function(e){return n===e?null:n}))},selected:n===h})})):(0,Z.jsx)(O.ZP,{children:b})]}),(0,Z.jsxs)(Bi,{children:[(0,Z.jsxs)(O.ZP,{default:!0,monospace:!0,children:[v," results"]}),(0,Z.jsx)(Pe.Z,{beforeIcon:(0,Z.jsx)(D.mm,{size:2*S.iI}),disabled:null===h,onClick:function(){var e=null===d||void 0===d?void 0:d[h];n({config:{suggested_action:Hi({},e)},type:i.TRANSFORMER},g,s)},secondaryGradient:null!==h,children:(0,Z.jsx)(O.ZP,{children:"Add selected code block"})})]})]})},zi=t(70001),Ui=t(47256),Wi=t(11754);var Gi=function(e){var n=e.afterWidth,t=e.features,r=e.insightsOverview,o=e.statistics,i=r.correlations,c=void 0===i?[]:i,u=n-(2*S.cd*S.iI+jr.nn),a=function(e){var n=[];return{heatmapData:null===e||void 0===e?void 0:e.map((function(e,t){var r=e.correlations,o=e.feature.uuid;n.push({label:o});var i=r[0].y.map((function(e){var n=e.value;return(0,Ce.QV)(n)}));return i.splice(t,0,1),i})),xyLabels:n}}(c),s=a.heatmapData,d=a.xyLabels,f=function(e,n){return(0,bn.YC)(null===e||void 0===e?void 0:e.map((function(e){return{feature:e,value:1-n["".concat(e.uuid,"/null_value_rate")]}})),"value")}(t,o),p=function(e,n){return(0,bn.YC)(null===e||void 0===e?void 0:e.map((function(e){return{feature:e,value:n["".concat(e.uuid,"/count_distinct")]}})),"value")}(t,o),h=function(e,n){return(0,bn.YC)(null===e||void 0===e?void 0:e.map((function(e){var t=Object.entries(n["".concat(e.uuid,"/value_counts")]||{})[0]||[],r=(0,l.Z)(t,2),o=r[0],i=r[1];return{feature:e,percentage:Number(i)/n.count,value:o}})),"percentage")}(t,o);return(0,Z.jsxs)(j.Z,{flexDirection:"column",children:[(null===f||void 0===f?void 0:f.length)>=1&&(0,Z.jsx)(Wi.Z,{headerTitle:"Data completion",width:u,children:(0,Z.jsx)(zi.Z,{data:f.map((function(e){var n=e.feature;return{x:e.value,y:n.uuid}})),height:Math.max(3*f.length*S.iI,50*S.iI),renderTooltipContent:function(e){var n=e.x;return"".concat((0,Ce.T3)(n)," of rows have a value")},xNumTicks:2,ySerialize:function(e){return e.y}})}),(null===p||void 0===p?void 0:p.length)>=1&&(0,Z.jsx)(Wi.Z,{headerTitle:"Number of unique values",width:u,children:(0,Z.jsx)(zi.Z,{data:p.map((function(e){var n=e.feature;return{x:e.value,y:n.uuid}})),height:Math.max(3*f.length*S.iI,50*S.iI),renderTooltipContent:function(e){var n=e.x;return"".concat(n," unique values")},xNumTicks:2,ySerialize:function(e){return e.y}})}),h.length>=1&&(0,Z.jsx)(Wi.Z,{headerTitle:"Distribution of values",width:u,children:(0,Z.jsx)(zi.Z,{data:h.map((function(e){var n=e.feature,t=e.percentage;return{feature:n,value:e.value,x:t,y:n.uuid}})),height:Math.max(3*h.length*S.iI,50*S.iI),renderTooltipContent:function(e){var n=e.value,t=e.x;return"".concat(n," is ").concat((0,Ce.T3)(t)," of all rows")},xNumTicks:2,ySerialize:function(e){return e.y}})}),c&&(null===s||void 0===s?void 0:s.length)>=1&&(0,Z.jsx)(Wi.Z,{headerTitle:"Correlations",children:(0,Z.jsx)(R.Z,{p:1,children:(0,Z.jsx)(Ui.Z,{countMidpoint:0,data:s,height:8*S.iI*d.length,minCount:-1,xLabels:d,yLabels:d})})})]})},Ki=t(92083),Vi=t.n(Ki),Qi=t(26226),qi=t(84969),Xi=t(90948),Yi=t(65743),Ji=t(39048),$i=t(79487),ec=t(29989),nc=t(59381),tc=t(9846),rc=t(65376),oc=t(52359),ic=t(48072),cc=t(24903),lc=t(98677),uc=t(84181);function ac(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function sc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ac(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ac(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var dc={bottom:S.iI*(3+S.cd),left:S.iI*S.cd,right:S.iI*S.cd,top:S.iI*S.cd};function fc(e,n){return Math.max.apply(Math,(0,m.Z)(e.map(n)))}function pc(e){var n=e.data,t=e.height,r=e.keyForYData,o=e.large,i=e.margin,c=void 0===i?{}:i,l=e.orientationVertical,u=void 0!==l&&l,a=e.showTooltip,s=e.width,d=e.yLabelFormat,p=(0,f.useContext)(k.ThemeContext),h=(0,f.useCallback)((function(e){return e[r]}),[r]),v=d;v||(v=function(e){return e.length>20?"".concat(e.substring(0,20),"..."):e});var g=o?Fn.iD:Fn.J5,b=sc(sc({},dc),c),x=n.slice(Math.max(0,n.length-50)),y=(0,f.useMemo)((function(){return Object.keys((null===x||void 0===x?void 0:x[0])||{}).filter((function(e){return e!==r}))}),[x,r]),j=(0,cc.Z)({domain:y,range:[It.a$,It.Ej,It.hM,It.ZA,It.$R,It.X_,It.er,It.hl,It.nQ]}),O=(0,f.useMemo)((function(){return x.map(h)}),[x,h]),w=(0,lc.Z)({domain:O,padding:.1}),Z=(0,lc.Z)({domain:y,padding:.1}),_=(0,uc.Z)({domain:[0,fc(x,(function(e){return fc(y,(function(n){return Number(e[n])}))}))]}),P={active:(null===p||void 0===p?void 0:p.content.default)||C.Z.content.default,backgroundPrimary:(null===p||void 0===p?void 0:p.chart.backgroundPrimary)||C.Z.chart.backgroundPrimary,backgroundSecondary:(null===p||void 0===p?void 0:p.chart.backgroundSecondary)||C.Z.chart.backgroundSecondary,muted:(null===p||void 0===p?void 0:p.content.muted)||C.Z.content.muted,primary:(null===p||void 0===p?void 0:p.chart.primary)||C.Z.chart.primary,tooltipBackground:(null===p||void 0===p?void 0:p.background.navigation)||C.Z.background.navigation},I=O;u&&(I=x.reduce((function(e,n){return e.concat(y.map((function(e){var t=n[e];return(0,Ce.kE)(t)?parseInt(String(t)):t})))}),[]));var E=Math.min(Math.max.apply(Math,(0,m.Z)(I.map((function(e){return String(e).length})))),20);b.left+=7*E;var S=s-(b.left+b.right),T=t-(b.top+b.bottom);u?(w.rangeRound([0,S]),_.rangeRound([T,0])):(w.rangeRound([T,0]),_.rangeRound([0,S])),Z.rangeRound([0,w.bandwidth()]);var A=x.map(h).length,R=0;u||(R=w(I[A-1]));var D=(0,f.useCallback)((function(e){var n=(0,ic.Z)(e)||{x:0,y:0},t=n.x,r=n.y,o=t-b.left,i=r-b.top,c=0;c=u?(o-R/2)/(S-R):1-(i-R/2)/(T-R);var l=Math.floor(c*A),s=x[l];"undefined"===typeof s&&(s=x[l-1]),u?o>R&&o<S+b.left-R&&a({tooltipData:s,tooltipLeft:t,tooltipTop:r}):i>R&&i<T-R&&a({tooltipData:s,tooltipLeft:t,tooltipTop:r})}),[x,A,b.left,b.top,u,a,R,S,T]);return{colorScale:j,colors:P,data:x,fontSize:g,handleTooltip:D,margin:b,tempScale:_,tickValues:I,xKeys:y,xMax:S,y1Scale:Z,yLabelFormat:v,yMax:T,yScale:w,ySerialize:h}}var hc=["height","width","xAxisLabel","yAxisLabel"];function mc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function vc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}S.iI,S.iI,S.iI;var gc=(0,nc.Z)((function(e){var n=e.data,t=e.height,r=e.hideTooltip,o=e.keyForYData,i=void 0===o?"__y":o,c=e.large,u=e.margin,a=void 0===u?{}:u,s=e.renderNoDataText,d=e.renderTooltipContent,f=e.showTooltip,p=e.tooltipData,h=e.tooltipLeft,m=e.tooltipOpen,v=e.tooltipTop,g=e.width,b=e.xAxisLabel,x=e.xNumTicks,y=e.yLabelFormat,j=pc({data:n,height:t,keyForYData:i,large:c,margin:a,showTooltip:f,width:g,yLabelFormat:y}),k=j.colorScale,C=j.colors,w=j.data,_=j.fontSize,P=j.handleTooltip,I=j.margin,E=j.tempScale,S=j.tickValues,T=j.xKeys,A=j.xMax,R=j.y1Scale,D=j.yLabelFormat,M=j.yMax,F=j.yScale,B=j.ySerialize;return g<10?null:(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("svg",{height:t,width:g,children:[s&&!(null!==w&&void 0!==w&&w.length)&&(0,Z.jsx)("text",{fill:C.active,dominantBaseline:"middle",textAnchor:"middle",fontFamily:Mn.ry,fontSize:_,x:"50%",y:"50%",children:s()}),(0,Z.jsx)(Yi.Z,{fill:"transparent",height:t-(I.top+I.bottom),onMouseLeave:function(){return r()},onMouseMove:P,onTouchMove:P,onTouchStart:P,rx:14,width:g-(I.left+I.right),x:I.left,y:I.top}),(null===w||void 0===w?void 0:w.length)&&(0,Z.jsxs)(ec.Z,{left:I.left,top:I.top,children:[(0,Z.jsx)(Ji.Z,{color:k,data:w,keys:T,width:A,xScale:E,y0:B,y0Scale:F,y1Scale:R,children:function(e){return e.map((function(e){return(0,Z.jsx)(ec.Z,{top:e.y0,children:e.bars.map((function(n){return(0,Z.jsx)("g",{children:(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("rect",{fill:n.color,height:n.height,pointerEvents:"none",rx:4,width:n.width,x:n.x,y:n.y})})},"".concat(e.index,"-").concat(n.index,"-").concat(n.key))}))},"bar-group-horizontal-".concat(e.index,"-").concat(e.y0))}))}}),(0,Z.jsx)(qi.Z,{hideTicks:!0,scale:F,stroke:C.muted,tickFormat:function(e){return D(e)},tickLabelProps:function(){return{fill:C.active,fontFamily:Mn.ry,fontSize:_,style:{width:"10px"},textAnchor:"end"}},tickStroke:C.muted,tickValues:S,top:2}),(0,Z.jsx)(Xi.Z,{label:b,labelProps:{fill:C.muted,fontFamily:Mn.ry,fontSize:_,textAnchor:"middle"},numTicks:x,scale:E,stroke:C.muted,tickLabelProps:function(){return{fill:C.active,fontFamily:Mn.ry,fontSize:_,textAnchor:"middle"}},tickStroke:C.muted,top:M})]}),p&&(0,Z.jsx)("g",{children:(0,Z.jsx)($i.Z,{from:{x:I.left,y:v},pointerEvents:"none",stroke:C.active,strokeDasharray:"5,2",strokeWidth:1,to:{x:A+I.left,y:v}})})]}),m&&p&&(0,Z.jsxs)(tc.Z,{left:h,style:vc(vc({},rc.j),{},{backgroundColor:C.tooltipBackground}),top:v,children:[d&&d(p),!d&&Object.entries(p).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];if(i!==t){var o=r;return(0,Ce.kE)(o)&&String(o).split(".").length>=2&&(o=o.toFixed(4)),(0,Z.jsxs)(O.ZP,{inverted:!0,small:!0,children:[t,": ",o]},t)}}))]})]})}));var bc=function(e){var n,t=e.height,r=e.width,o=e.xAxisLabel,i=e.yAxisLabel,c=(0,Ee.Z)(e,hc);return n="undefined"===typeof r?"100%":i?0===r?r:r-28:r,(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{style:{display:"flex",height:t,marginBottom:o?S.iI:null,width:"100%"},children:[i&&(0,Z.jsx)(j.Z,{alignItems:"center",fullHeight:!0,justifyContent:"center",width:28,children:(0,Z.jsx)(oc.Z,{children:(0,Z.jsx)(O.ZP,{center:!0,muted:!0,small:!0,children:i})})}),(0,Z.jsx)("div",{style:{height:t,width:n},children:(0,Z.jsx)(Qi.Z,{children:function(e){var n=e.width,t=e.height;return(0,Z.jsx)(gc,vc(vc({},c),{},{height:t,width:n}))}})})]}),o&&(0,Z.jsx)("div",{style:{paddingLeft:i?36:0,paddingTop:4},children:(0,Z.jsx)(O.ZP,{center:!0,muted:!0,small:!0,children:o})})]})},xc=t(95422),yc=["keyForYData"],jc=["height","width","xAxisLabel","yAxisLabel"];function kc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Cc=(0,nc.Z)((function(e){var n=e.keyForYData,t=void 0===n?"__y":n,r=(0,Ee.Z)(e,yc),o=r.height,i=r.hideTooltip,c=r.renderNoDataText,u=r.renderTooltipContent,a=r.tooltipData,s=r.tooltipLeft,d=r.tooltipOpen,f=r.tooltipTop,p=r.width,h=r.xLabelFormat,m=r.xNumTicks,v=r.yNumTicks,g=pc(Oc(Oc({},r),{},{keyForYData:t,orientationVertical:!0})),b=g.colorScale,x=g.colors,y=g.data,j=g.fontSize,k=g.handleTooltip,C=g.margin,w=g.tempScale,_=(g.tickValues,g.xKeys),P=(g.xMax,g.y1Scale),I=g.yLabelFormat,E=g.yMax,S=g.yScale,T=g.ySerialize;return p<10?null:(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("svg",{height:o,width:p,children:[c&&!(null!==y&&void 0!==y&&y.length)&&(0,Z.jsx)("text",{fill:x.active,dominantBaseline:"middle",textAnchor:"middle",fontFamily:Mn.ry,fontSize:j,x:"50%",y:"50%",children:c()}),(null===y||void 0===y?void 0:y.length)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Yi.Z,{fill:"transparent",height:o-(C.top+C.bottom),onMouseLeave:function(){return i()},onMouseMove:k,onTouchMove:k,onTouchStart:k,rx:14,width:p-(C.left+C.right),x:C.left,y:2*C.top}),(0,Z.jsxs)(ec.Z,{top:C.top,children:[(0,Z.jsx)(xc.Z,{color:b,data:y,height:E,keys:_,x0:T,x0Scale:S,x1Scale:P,yScale:w,children:function(e){return e.map((function(e){return(0,Z.jsx)(ec.Z,{left:e.x0+C.left,top:C.top,children:e.bars.map((function(n){return(0,Z.jsx)("g",{children:(0,Z.jsx)("rect",{fill:n.color,height:n.height,pointerEvents:"none",rx:4,width:n.width,x:n.x,y:n.y})},"".concat(e.index,"-").concat(n.index,"-").concat(n.key))}))},"bar-group-horizontal-".concat(e.index,"-").concat(e.x0))}))}}),(0,Z.jsx)(qi.Z,{left:C.left,numTicks:v,scale:w,stroke:x.muted,tickFormat:function(e){return I(e)},tickLabelProps:function(){return{fill:x.active,fontFamily:Mn.ry,fontSize:j,textAnchor:"end",transform:"translate(-2,2.5)"}},tickStroke:x.muted,top:C.top}),(0,Z.jsx)(Xi.Z,{hideTicks:!0,left:C.left,numTicks:m,scale:S,stroke:x.muted,tickFormat:h,tickLabelProps:function(){return{fill:x.active,fontFamily:Mn.ry,fontSize:j,textAnchor:"middle"}},tickStroke:x.muted,top:E+C.top})]})]}),a&&(0,Z.jsx)("g",{children:(0,Z.jsx)($i.Z,{from:{x:s,y:2*C.top},pointerEvents:"none",stroke:x.active,strokeDasharray:"5,2",strokeWidth:1,to:{x:s,y:E+2*C.top}})})]}),d&&a&&(0,Z.jsxs)(tc.Z,{left:s,style:Oc(Oc({},rc.j),{},{backgroundColor:x.tooltipBackground}),top:f,children:[u&&u(a),!u&&Object.entries(a).map((function(e){var n=(0,l.Z)(e,2),r=n[0],o=n[1];if(t!==r){var i=o;return(0,Ce.kE)(i)&&String(i).split(".").length>=2&&(i=i.toFixed(4)),(0,Z.jsxs)(O.ZP,{inverted:!0,small:!0,children:[r,": ",i]},r)}})),(0,Z.jsx)("br",{}),(0,Z.jsxs)(O.ZP,{inverted:!0,small:!0,children:[h&&h(T(a)),!h&&T(a)]})]})]})}));var wc=function(e){var n=e.height,t=e.width,r=e.xAxisLabel,o=e.yAxisLabel,i=(0,Ee.Z)(e,jc);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{style:{display:"flex",height:n,marginBottom:r?S.iI:null,width:"100%"},children:[o&&(0,Z.jsx)(j.Z,{alignItems:"center",fullHeight:!0,justifyContent:"center",width:28,children:(0,Z.jsx)(oc.Z,{children:(0,Z.jsx)(O.ZP,{center:!0,muted:!0,small:!0,children:o})})}),(0,Z.jsx)("div",{style:{height:n,width:o?0===t?t:t-28:t},children:(0,Z.jsx)(Qi.Z,{children:function(e){var n=e.height,t=e.width;return(0,Z.jsx)(Cc,Oc(Oc({},i),{},{height:n,width:t}))}})})]}),r&&(0,Z.jsx)("div",{style:{paddingLeft:o?36:0,paddingTop:4},children:(0,Z.jsx)(O.ZP,{center:!0,muted:!0,small:!0,children:r})})]})},Zc=t(66872),_c=t(68735),Pc=t(320),Ic=40*S.iI,Ec=k.default.div.withConfig({displayName:"indexstyle__ChartBlockStyle",componentId:"sc-1c3ufnj-0"})(["border-radius:","px;margin-left:","px;margin-right:","px;margin-top:","px;",""],w.n_,.5*S.iI,.5*S.iI,1*S.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).chartBlock,";\n  ")})),Sc=k.default.div.withConfig({displayName:"indexstyle__ConfigurationOptionsStyle",componentId:"sc-1c3ufnj-1"})(["flex:4;padding-left:","px;padding-right:","px;"],1*S.iI,1*S.iI),Tc=k.default.div.withConfig({displayName:"indexstyle__CodeStyle",componentId:"sc-1c3ufnj-2"})(["padding-top:","px;",""],S.iI/2,(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).codeTextarea,";\n  ")})),Ac=k.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-1c3ufnj-3"})(["margin-bottom:","px;padding-bottom:","px;padding-left:","px;",""],S.cd*S.iI,S.iI,S.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||C.Z.borders).medium,";\n  ")}));function Rc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Dc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Rc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Rc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Mc=function(e){var n,t=e.block,r=e.data,o=e.width,i=t.configuration,c=void 0===i?{}:i,a=c||{},s=a.chart_style,d=a.chart_type,f=a.y_sort_order,p=c.height||Ic,h=(null===c||void 0===c||null===(n=c.metrics)||void 0===n?void 0:n.map((function(e){return"".concat((n=e).aggregation,"(").concat(n.column,")");var n})))||[],m=Ce.n1,v=c.time_interval;if([se.HOUR,se.MINUTE,se.SECOND].includes(v)&&(m=Ce.OC),W.BAR_CHART===d||W.TIME_SERIES_BAR_CHART===d){var g=r.x,b=r.y,x=W.TIME_SERIES_BAR_CHART===d;if(g&&b&&Array.isArray(g)&&Array.isArray(b)){var y,j=null===(y=c.group_by)||void 0===y?void 0:y.join(", "),k=null===h||void 0===h?void 0:h.join(", ");h.length||h.push(re);var C=h[0],w=g.map((function(e,n){return Dc({__y:e},h.reduce((function(e,t,r){var o,i=null===b||void 0===b||null===(o=b[r])||void 0===o?void 0:o[n];return"undefined"===typeof i?e:Dc(Dc({},e),{},(0,u.Z)({},t,i))}),{}))}));ae.ASCENDING===f?w=(0,bn.YC)(w,(function(e){return e[C]}),{ascending:!1}):ae.DESCENDING===f&&(w=(0,bn.YC)(w,(function(e){return e[C]}),{ascending:!0}));var _={data:w,height:p,renderNoDataText:function(){return"No data matching query"},width:o,xNumTicks:3};return ce.HORIZONTAL===s?(0,Z.jsx)(bc,Dc(Dc({},_),{},{xAxisLabel:k||c.y,yAxisLabel:j||c.x})):(0,Z.jsx)(wc,Dc(Dc({},_),{},{xAxisLabel:j,xLabelFormat:function(e){return x?Vi()(1e3*e).format(Ce.n1):e},yAxisLabel:k,yNumTicks:3}))}}else if(W.HISTOGRAM===d){var P,I=r.x,E=r.y,T=null===(P=c.group_by)||void 0===P?void 0:P.join(", ");if(I&&E&&Array.isArray(I))return(0,Z.jsx)(Zc.Z,{data:I.map((function(e,n){var t,r=e.max,o=e.min;return[r,null===E||void 0===E||null===(t=E[n])||void 0===t?void 0:t.value,o]})),height:p,width:o,large:!0,margin:{left:5*S.iI,right:1*S.iI,top:3*S.iI},noPadding:!0,renderTooltipContent:function(e){var n=(0,l.Z)(e,3),t=n[0],r=n[1],o=n[2];return(0,Z.jsxs)(O.ZP,{inverted:!0,monospace:!0,small:!0,children:["Count : ",r,(0,Z.jsx)("br",{}),"Bucket: ",o,"-",t]})},showAxisLabels:!0,showYAxisLabels:!0,showZeroes:!0,sortData:function(e){return(0,bn.YC)(e,"[0]")},xAxisLabel:T||c.x,yAxisLabel:T?"count(".concat(T,")"):c.y})}else if(W.LINE_CHART===d||W.TIME_SERIES_LINE_CHART===d){var A=r.x,R=r.y,D=W.TIME_SERIES_LINE_CHART===d;if(A&&R&&Array.isArray(A)&&Array.isArray(R)&&Array.isArray(null===R||void 0===R?void 0:R[0])){var M,F=h;c.legend_labels&&(F=c.legend_labels.split(",").map((function(e){return e.trim()})));var B=A.map((function(e,n){return{x:e,y:(0,bn.w6)(R.length).map((function(e,t){var r=R[t][n];return"undefined"===typeof r||null===r?0:r}))}})),N=null===(M=c.group_by)||void 0===M?void 0:M.join(", "),H=h.join(", ");return(0,Z.jsx)(_c.Z,{data:B,height:p,lineLegendNames:F,margin:{bottom:8*S.iI,left:5*S.iI},noCurve:!0,renderXTooltipContent:function(e){e.index;var n=e.x,t=c.x,r=n;return c.group_by&&(t=c.group_by.map(String).join(", ")),D&&(r=Vi()(1e3*n).format(m)),(0,Z.jsxs)(O.ZP,{inverted:!0,small:!0,children:[t,": ",r]})},renderYTooltipContent:function(e,n){var t=e.y;return(0,Z.jsxs)(O.ZP,{inverted:!0,small:!0,children:[F&&F[n]&&"".concat(F[n],": "),t&&(0,Ce.x6)((0,Ce.QV)(t[n],4))]})},width:o?o-3*S.iI:o,xAxisLabel:N||String(c.x),xLabelFormat:function(e){return D?Vi()(1e3*e).format(Ce.n1):e},yAxisLabel:H||String(c.y),yLabelFormat:function(e){return e}})}}else if(W.PIE_CHART===d){var L,z=r[String(c.x)],U=null===(L=c.group_by)||void 0===L?void 0:L.join(", ");if(z)return(0,Z.jsx)(Pc.Z,{data:Object.entries(z),getX:function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return"".concat(t," (").concat((0,Ce.x6)(r),")")},getY:function(e){return(0,l.Z)(e,2)[1]},height:p,width:o,xAxisLabel:U||String(c.x)})}else if(W.TABLE===d){var G=r.index,K=r.x,V=r.y;return Array.isArray(K)&&Array.isArray(V)&&Array.isArray(V[0])&&(0,Z.jsx)(Mo.Z,{columns:K,index:G,height:c.height?null:p,maxHeight:c.height?p:null,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,rows:V,width:o})}return(0,Z.jsx)("div",{})},Fc=k.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," ",""],(function(e){return"\n    background-color: ".concat((e.theme.background||C.Z.background).popup,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((S.iI+Fn.Al)/2,"px;\n    height: ").concat(1.5*S.iI+Fn.Al,"px;\n    padding: ").concat(S.iI/1.5,"px ").concat(1.25*S.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((S.iI/2+Fn.Al)/2,"px;\n    height: ").concat(Fn.Al+S.iI/2,"px;\n    padding: ").concat(S.iI/4,"px ").concat(S.iI,"px;\n  ")})),Bc=function(e){var n=e.children,t=e.label,r=e.onClick,o=e.small;return(0,Z.jsx)(Fc,{small:o,children:(0,Z.jsx)(Pe.Z,{basic:!0,noPadding:!0,noBackground:!0,onClick:r,transparent:!0,children:(0,Z.jsxs)(j.Z,{alignItems:"center",children:[n,t&&(0,Z.jsx)(O.ZP,{small:o,children:t}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(D.x8,{muted:!0,size:o?S.iI:1.25*S.iI})]})})})},Nc=t(33591),Hc=["children","fullHeight","gutter","style"];function Lc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function zc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Lc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Uc=function(e){var n=e.children,t=e.fullHeight,r=e.gutter,o=e.style,i=void 0===o?{}:o,c=(0,Ee.Z)(e,Hc),l=zc({},i);return r&&(l.paddingLeft=r,l.paddingRight=l.paddingLeft),t&&(l.height="100%"),(0,Z.jsx)(Nc.Col,zc(zc({},c),{},{style:l,children:n}))};var Wc=function(e){var n=e.children,t=e.onChange,r=(0,f.useState)(f.Children.map(n,(function(){return null}))),o=r[0],i=r[1],c=(0,f.useState)(0),l=c[0],u=c[1];return(0,Z.jsx)(j.Z,{children:f.Children.map(n,(function(e,n){return(0,Z.jsx)(R.Z,{ml:n>=1?1:0,style:{display:"flex",flex:1},children:f.cloneElement(e,{onChange:function(e){i((function(r){return r[n]=e.target.value,t(r,{resetValues:function(){return u((function(e){return e+1}))},setValues:i}),r}))},value:o[n]})},"multi-select-child-".concat(n,"-").concat(l))}))})},Gc=t(7715);function Kc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Vc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Kc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Qc(e,n){var t,r,o,c=e.autocompleteItems,a=e.block,s=e.blockRefs,d=e.blocks,h=e.deleteWidget,m=e.executionState,g=e.fetchPipeline,b=e.fetchFileTree,x=e.messages,y=void 0===x?[]:x,w=e.onChangeContent,_=e.pipeline,P=e.runBlock,I=e.runningBlocks,E=e.savePipelineContent,T=e.selected,A=e.setAnyInputFocused,M=e.setSelectedBlock,F=e.setTextareaFocused,B=e.textareaFocused,H=e.updateWidget,z=e.width,U=(0,f.useRef)(null),G=(0,f.useContext)(k.ThemeContext),K=a.outputs,V=void 0===K?[]:K,Q=(0,f.useState)(null),q=Q[0],X=Q[1],Y=(0,f.useState)(null===(t=a.configuration)||void 0===t?void 0:t.chart_type),J=Y[0],$=Y[1],ee=(0,f.useState)(a.configuration),te=ee[0],re=ee[1],oe=(0,f.useState)(a.content),ce=oe[0],le=oe[1],ae=(0,f.useState)(!J||0===V.length),se=ae[0],de=ae[1],fe=(0,f.useState)(!1),pe=fe[0],he=fe[1],me=(0,f.useState)(null),ve=me[0],xe=me[1],Oe=(0,f.useState)(null===a||void 0===a?void 0:a.upstream_blocks),we=Oe[0],Ze=Oe[1],_e=(0,f.useState)((null===V||void 0===V?void 0:V.length)||0),Pe=_e[0],Ie=_e[1],Ee=(0,f.useState)(a.uuid),Te=Ee[0],Ae=Ee[1],Re=ye[J],De=je[J],Me=(0,f.useMemo)((function(){return null===d||void 0===d?void 0:d.filter((function(e){var n=e.type;return[i.DATA_LOADER,i.TRANSFORMER].includes(n)}))}),[d]),Fe=(0,f.useMemo)((function(){return(0,bn.HK)(Me,(function(e){return e.uuid}))}),[Me]),Be=!!I.find((function(e){return e.uuid===a.uuid}))||(null===y||void 0===y?void 0:y.length)>=1&&m!==qr.IDLE,Ne=(0,f.useMemo)((function(){return null===y||void 0===y?void 0:y.filter((function(e){return null===e||void 0===e?void 0:e.type}))}),[y]),He=!!Ne.find((function(e){return e.error})),Le=Ne.length>=1,ze=(un(a.type,{theme:G}).accent,(0,f.useMemo)((function(){return{blockType:a.type,hasError:He,selected:T}}),[a.type,He,T]));if(null!==Ne&&void 0!==Ne&&Ne.length){var Ue,We,Ge=Ne.length-1;o=null===Ne||void 0===Ne||null===(Ue=Ne[Ge])||void 0===Ue||null===(We=Ue.data)||void 0===We?void 0:We[0]}o?(o=(o=o.slice(1,o.length-1)).replaceAll('\\"','"').replaceAll("\\'","'"),(0,Ce.Pb)(o)&&(r=JSON.parse(o))):(null===V||void 0===V?void 0:V.length)>=1&&(r={},V.forEach((function(e){var n=e||{},t=n.text_data,o=n.type,i=n.variable_uuid;Xr.TEXT===o&&(0,Ce.Pb)(t)&&(r[i]=JSON.parse(t))})));var Ke=(0,f.useCallback)((function(e){var n=Vc(Vc(Vc({},a),e),{},{configuration:Vc(Vc({},a.configuration),e.configuration)});E().then((function(){P({block:n,code:ce,ignoreAlreadyRunning:!0,runUpstream:!!we.find((function(e){var n;return![v.EXECUTED,v.UPDATED].includes(null===(n=Fe[e])||void 0===n?void 0:n.status)}))})})),Ie((function(e){return e+1}))}),[a,Fe,ce,Ie,we]),Ve=(0,f.useCallback)((function(e){le(e),w(e)}),[w,le]),Qe=(0,f.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.autoRun;re((function(n){return Vc(Vc({},n),e)}));var r=Vc(Vc({},a),{},{configuration:Vc(Vc(Vc({},te),e),{},{chart_type:J})});H(r);Object.keys(e);Pe&&t&&Ke(r)}),[a,J,te,Pe,Ke,re,H]);(0,f.useEffect)((function(){X({python:pi({autocompleteItems:c,block:a,blocks:d,pipeline:_})})}),[c,a,d,_]);var qe=(0,f.useMemo)((function(){return(0,Z.jsx)(Gn,{autoHeight:!0,autocompleteProviders:q,onChange:Ve,selected:T,setSelected:function(e){return M(!0===e?a:null)},setTextareaFocused:F,showLineNumbers:!1,textareaFocused:B||W.TABLE===J&&!se,value:ce,width:"100%"})}),[q,J,ce,se,T,M,F,B,Ve]),Xe=(0,f.useMemo)((function(){return He&&Le&&(0,Z.jsx)(Yo,Vc(Vc({},ze),{},{block:a,contained:!1,hideExtraInfo:!0,isInProgress:Be,messages:Ne,selected:T}))}),[a,ze,He,Le,Be,Ne,T]),Ye=(0,Rn.Z)(se),Je=(0,Rn.Z)(z);(0,f.useEffect)((function(){var e,n=null===U||void 0===U||null===(e=U.current)||void 0===e?void 0:e.getBoundingClientRect();Ye!==se||Je!==z?xe(0):n&&xe(n.width)}),[se,Ye,U.current,xe,z,Je]);var $e=(0,f.useMemo)((function(){var e=[];return we.forEach((function(n,t){var r=Fe[n],o=un(null===r||void 0===r?void 0:r.type,{theme:G}).accent;e.push((0,Z.jsxs)(R.Z,{ml:2,children:[(0,Z.jsxs)(O.ZP,{bold:!0,inline:!0,monospace:!0,small:!0,children:["df_",t+1]})," ",(0,Z.jsx)(O.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"->"})," ",(0,Z.jsx)(Et.Z,{color:o,inline:!0,onClick:function(){var e,n,t=null===s||void 0===s||null===(e=s.current)||void 0===e?void 0:e["".concat(null===r||void 0===r?void 0:r.type,"s/").concat(null===r||void 0===r?void 0:r.uuid,".py")];null===t||void 0===t||null===(n=t.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,Z.jsx)(O.ZP,{color:o,monospace:!0,small:!0,children:n})})]},n))})),e}),[Fe,we]),en=(0,f.useMemo)((function(){var e,n=[],t=null===Re||void 0===Re||null===(e=Re.code)||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid;return ie.includes(t)?e.concat(t):e}),[]);null===t||void 0===t||t.length;return null===t||void 0===t||t.forEach((function(e,t){var r=te[e];if(r){var o,i,c=null===(o=ke[J])||void 0===o||null===(i=o[e])||void 0===i?void 0:i.call(o);n.push((0,Z.jsxs)(R.Z,{ml:2,children:[(0,Z.jsx)(O.ZP,{bold:!0,inline:!0,monospace:!0,small:!0,children:r})," ",c&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"->"})," ",(0,Z.jsx)(O.ZP,{default:!0,inline:!0,small:!0,children:c})]})]},r))}})),n}),[te,Re]),nn=(0,Rn.Z)(J),tn=(0,Rn.Z)(we);(0,f.useEffect)((function(){if((!nn&&J&&null!==we&&void 0!==we&&we.length||(null===tn||void 0===tn||!tn.length)&&(null===we||void 0===we?void 0:we.length)>=1&&J)&&!ce&&(0,Gc.Qr)(te)&&De){var e=Vc(Vc({},a),{},{upstream_blocks:we});De.configuration&&Qe(De.configuration(e)),De.content&&Ve(De.content(e))}}),[a,J,nn,te,ce,Qe,Ve,we,tn]);var rn=(0,f.useMemo)((function(){return te.width_percentage||1}),[te]),on=(0,f.useMemo)((function(){return Object.entries(Re||{}).reduce((function(e,n){var t=(0,l.Z)(n,2),r=t[0],o=t[1];return Vc(Vc({},e),{},(0,u.Z)({},r,o.map((function(e){var n,t=e.autoRun,r=e.label,o=e.monospace,i=e.options,c=e.settings,l=void 0===c?{}:c,s=e.type,d=e.uuid,f={fullWidth:!0,key:d,label:(0,Ce.kC)(r()),monospace:o,onBlur:function(){return M(a)},onChange:function(e){return Qe((0,u.Z)({},d,e.target.value),{autoRun:t})},onFocus:function(){return M(a)},value:(null===te||void 0===te?void 0:te[d])||""},p=we.reduce((function(e,n){var t=Fe[n];return t?e.concat(t):e}),[]),h=p.reduce((function(e,n){var t,r,o=n.outputs;return e.concat(null===o||void 0===o||null===(t=o[0])||void 0===t||null===(r=t.sample_data)||void 0===r?void 0:r.columns)}),[]);if(ge.COLUMNS===s){var m=te[d]||[];n=(0,Z.jsxs)(Z.Fragment,{children:[(!l.maxValues||m.length<l.maxValues)&&(0,Z.jsxs)(Si.Z,Vc(Vc({},f),{},{onChange:function(e){var n=te[d]||[],r=e.target.value;n.includes(r)?n=(0,bn.Od)(n,(function(e){return e===r})):n.push(r),Qe((0,u.Z)({},d,n),{autoRun:t})},value:null,children:[(0,Z.jsx)("option",{value:""}),(0,bn.YC)(h.filter((function(e){return!m.includes(e)})),(function(e){return e})).map((function(e){return(0,Z.jsx)("option",{value:e,children:e},e)}))]})),m.map((function(e){return(0,Z.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,Z.jsx)(Bc,{label:e,onClick:function(){Qe((0,u.Z)({},d,(0,bn.Od)(m,(function(n){return n===e}))),{autoRun:t})}})},e)}))]})}else if(ge.METRICS===s){var v=te[d]||[];n=(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O.ZP,{bold:!0,children:"Metrics"}),(0,Z.jsx)(O.ZP,{muted:!0,small:!0,children:"Select a column and an aggregation function."}),(0,Z.jsxs)(Wc,{onChange:function(e,n){var r=n.resetValues,o=n.setValues;2===e.filter((function(e){return!!e})).length&&(v.find((function(n){var t=n.aggregation;return n.column===e[1]&&t===e[0]}))||(Qe((0,u.Z)({},d,v.concat({aggregation:e[0],column:e[1]})),{autoRun:t}),o([null,null]),r()))},children:[(0,Z.jsxs)(Si.Z,Vc(Vc({},f),{},{label:"aggregation",children:[(0,Z.jsx)("option",{value:""}),(0,bn.YC)(be,(function(e){return e})).map((function(e){return(0,Z.jsx)("option",{value:e,children:e},e)}))]})),(0,Z.jsxs)(Si.Z,Vc(Vc({},f),{},{label:"column",children:[(0,Z.jsx)("option",{value:""}),(0,bn.YC)(h,(function(e){return e})).map((function(e){return(0,Z.jsx)("option",{value:e,children:e},e)}))]}))]}),v.map((function(e){var n=e.aggregation,r=e.column;return(0,Z.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,Z.jsx)(Bc,{label:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(O.ZP,{inline:!0,monospace:!0,children:[n,"("]}),r,(0,Z.jsx)(O.ZP,{inline:!0,monospace:!0,children:")"})]}),onClick:function(){Qe((0,u.Z)({},d,(0,bn.Od)(v,(function(e){var t=e.aggregation,o=e.column;return n===t&&r===o}))),{autoRun:t})}})},"".concat(n,"(").concat(r,")"))}))]})}else n=i?(0,Z.jsx)(Si.Z,Vc(Vc({},f),{},{children:i.map((function(e){return(0,Z.jsx)("option",{value:e,children:e},e)}))})):(0,Z.jsx)(Xt.Z,Vc(Vc({},f),{},{type:s}));return(0,Z.jsx)(R.Z,{mb:1,children:n},d)}))))}),{noCode:[]})}),[Fe,te,Re,M,Qe,we]),cn=on.code,ln=on.noCode,an=(0,p.Db)(Nt.ZP.widgets.pipelines.useUpdate(null===_||void 0===_?void 0:_.uuid,a.uuid),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){he(!1),g(),b()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})},onError:function(e){(0,Ht.qQ)(e).messages}}),sn=(0,l.Z)(an,1)[0],dn="ChartBlock/".concat(a.uuid),fn=(0,L.y)(),pn=fn.registerOnKeyDown,hn=fn.unregisterOnKeyDown;return(0,f.useEffect)((function(){return function(){hn(dn)}}),[hn,dn]),pn(dn,(function(e,n,t){pe&&String(t[0])===String(N.Uq)&&String(t[1])!==String(N.zX)&&sn({widget:Vc(Vc({},a),{},{name:Te})})}),[a,pe,Te,sn]),(0,Z.jsx)(Uc,{sm:12,md:12*rn,children:(0,Z.jsxs)(Ec,{ref:n,children:[(0,Z.jsx)(R.Z,{mt:1,px:1,children:(0,Z.jsxs)(j.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,Z.jsxs)(Se.Z,{flex:1,style:{position:"relative"},children:[(0,Z.jsx)(xr,{bold:!1,fullWidth:!0,inputValue:Te,notRequired:!0,onBlur:function(){return setTimeout((function(){return he(!1)}),300)},onChange:function(e){Ae(e.target.value),e.preventDefault()},onClick:function(){A(!0),he(!0)},onFocus:function(){A(!0),he(!0)},small:!0,stacked:!0,value:!pe&&a.uuid}),pe&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(Et.Z,{noWrapping:!0,onClick:function(){return sn({widget:Vc(Vc({},a),{},{name:Te})})},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Update chart name"})]})]}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(Si.Z,{compact:!0,onChange:function(e){var n=[e.target.value],t=Vc(Vc({},a),{},{upstream_blocks:n});H(t),Ke(t),Ze(n)},placeholder:"Source block",small:!0,value:(null===we||void 0===we?void 0:we[0])||"",children:null===Me||void 0===Me?void 0:Me.map((function(e){var n=e.uuid;return(0,Z.jsx)("option",{value:n,children:n},n)}))}),(0,Z.jsx)(R.Z,{mr:1}),!Be&&(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:"Run chart block",size:null,widthFitContent:!0,children:(0,Z.jsx)(Bt,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return Ke(a)},uuid:"ChartBlock/run/".concat(a.uuid),children:(0,Z.jsx)(D.Py,{size:2*S.iI})})}),qr.QUEUED===m&&(0,Z.jsx)(Pt.Z,{color:(G||C.Z).content.active,small:!0,type:"cylon"}),qr.BUSY===m&&(0,Z.jsx)(Pt.Z,{color:(G||C.Z).content.active,small:!0}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:"Edit chart",size:null,widthFitContent:!0,children:(0,Z.jsx)(Bt,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return de((function(e){return!e}))},selected:se,uuid:"ChartBlock/edit/".concat(a.uuid),children:(0,Z.jsx)(D.I8,{size:2*S.iI})})}),(0,Z.jsx)(R.Z,{mr:1}),(0,Z.jsx)(dr,{appearBefore:!0,default:!0,label:"Delete chart",size:null,widthFitContent:!0,children:(0,Z.jsx)(Bt,{blackBorder:!0,compact:!0,inline:!0,onClick:function(){return h(a)},uuid:"ChartBlock/delete/".concat(a.uuid),children:(0,Z.jsx)(D.rF,{size:2*S.iI})})})]})]})}),(0,Z.jsx)(R.Z,{mt:1}),(0,Z.jsxs)(j.Z,{justifyContent:"space-between",fullWidth:!0,children:[(0,Z.jsx)(Se.Z,{flex:6,ref:U,children:r&&!(0,Gc.Qr)(r)&&(0,Z.jsx)(R.Z,{pb:3,children:(0,Z.jsx)(Mc,{block:Vc(Vc({},a),{},{configuration:Vc(Vc({},a.configuration),te)}),data:r,width:ve})})}),se&&(0,Z.jsx)(Sc,{children:(0,Z.jsxs)(j.Z,{flexDirection:"column",fullWidth:!0,children:[(0,Z.jsx)(R.Z,{mb:1,children:(0,Z.jsx)(Si.Z,{onChange:function(e){var n=e.target.value,t=Vc(Vc({},a),{},{configuration:Vc(Vc({},te),{},{chart_type:n})});H(t),Ke(t),$(n)},placeholder:"Select chart type",value:J,children:ue.map((function(e){return(0,Z.jsx)("option",{value:e,children:(0,Ce.kC)(e)},e)}))})}),(0,Z.jsx)(R.Z,{mb:1,children:(0,Z.jsx)(Si.Z,{onChange:function(e){return Qe((0,u.Z)({},ne,e.target.value))},placeholder:"Chart width",value:(null===te||void 0===te?void 0:te.width_percentage)||1,children:[["1/2 width",.5],["full width",1]].map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1];return(0,Z.jsx)("option",{value:r,children:t},t)}))})}),ln]})})]}),se&&!(null===cn||void 0===cn||!cn.length)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(R.Z,{my:1,px:1,children:[(0,Z.jsx)(O.ZP,{bold:!0,children:"Custom chart code"}),(0,Z.jsxs)(O.ZP,{muted:!0,children:["Write custom logic mapping data to input values for your chart.",(0,Z.jsx)("br",{}),"This code is only executed if you don\u2019t have any columns or metrics selected."]})]}),(0,Z.jsxs)(Tc,{children:[we.length>=1&&(0,Z.jsxs)(Ac,{children:[(0,Z.jsxs)(O.ZP,{muted:!0,small:!0,children:["Variables you can use in your code: ",$e]}),(0,Z.jsxs)(O.ZP,{muted:!0,small:!0,children:["Variables that you must define: ",en]})]}),qe]})]}),Xe&&(0,Z.jsx)(R.Z,{px:1,children:Xe})]})})}var qc=f.forwardRef(Qc),Xc=["children","fullHeight","gutter","style"];function Yc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Jc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Yc(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $c=function(e){var n=e.children,t=e.fullHeight,r=e.gutter,o=e.style,i=void 0===o?{}:o,c=(0,Ee.Z)(e,Xc),l=Jc({},i);return r&&(l.marginLeft=-1*r,l.marginRight=l.marginLeft),t&&(l.height="100%"),(0,Z.jsx)(Nc.Row,Jc(Jc({},c),{},{style:l,children:f.Children.map(n,(function(e,n){return e&&f.cloneElement(e,{gutter:r,key:n})}))}))},el=["blockRefs","blocks","chartRefs","deleteWidget","messages","onChangeChartBlock","runBlock","runningBlocks","savePipelineContent","selectedBlock","setAnyInputFocused","setSelectedBlock","setTextareaFocused","textareaFocused","updateWidget","widgets","width"];function nl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function tl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nl(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var rl=function(e){var n=e.blockRefs,t=e.blocks,r=e.chartRefs,o=e.deleteWidget,i=e.messages,c=e.onChangeChartBlock,l=e.runBlock,a=e.runningBlocks,s=e.savePipelineContent,d=e.selectedBlock,p=e.setAnyInputFocused,h=e.setSelectedBlock,m=e.setTextareaFocused,v=e.textareaFocused,g=e.updateWidget,b=e.widgets,x=e.width,y=(0,Ee.Z)(e,el),k=(0,f.useMemo)((function(){return a.reduce((function(e,n,t){return tl(tl({},e),{},(0,u.Z)({},n.uuid,tl(tl({},n),{},{priority:t})))}),{})}),[a]);return(0,Z.jsxs)(j.Z,{flexDirection:"column",fullWidth:!0,children:[(0,Z.jsx)($c,{fullHeight:!0,style:{marginLeft:.5*S.iI,marginRight:.5*S.iI},children:null===b||void 0===b?void 0:b.map((function(e){var u=e.uuid,b=k[u],j=b?0===b.priority?qr.BUSY:qr.QUEUED:qr.IDLE;return r.current[u]=(0,f.createRef)(),(0,f.createElement)(qc,tl(tl({},y),{},{block:e,blockRefs:n,blocks:t,chartRefs:r,deleteWidget:o,executionState:j,key:u,messages:i[u],onChangeContent:function(e){return c(u,e)},ref:r.current[u],runBlock:l,runningBlocks:a,savePipelineContent:s,selected:(null===d||void 0===d?void 0:d.uuid)===u,setAnyInputFocused:p,setSelectedBlock:h,setTextareaFocused:m,textareaFocused:v,updateWidget:g,width:x}))}))}),(0,Z.jsx)("div",{style:{height:"80vh"}})]})},ol=t(51774),il=t.n(ol),cl=(S.iI,[i.DATA_EXPORTER]),ll=k.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div:only-child{","}",""],jr.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")})),ul=k.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border:2px solid transparent;border-radius:","px;min-width:fit-content;"," "," ",""],w.BG,(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.content||C.Z.content).active,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),(function(e){return e.disabled&&"\n    opacity: 0.5;\n\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}));var al=function(e){var n=e.block,t=e.children,r=e.disabled,o=e.hasFailed,i=e.isInProgress,c=e.isQueued,l=e.isSuccessful,u=(e.onClick,e.selected),a=(0,f.useContext)(k.ThemeContext),s=n.type,d=n.uuid,p=!(i||c||o||l),h=l&&!(i||c),m=o&&!(i||c),v="";return p?v="No status":h?v="Successful execution":m?v="Failed execution":i&&(v="Currently executiing"),(0,Z.jsx)(ul,{backgroundColor:un(s,{theme:a}).accent,disabled:r,selected:u,children:(0,Z.jsx)(R.Z,{p:1,children:(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsxs)(j.Z,{alignItems:"center",justifyContent:"center",style:{height:2*S.iI,width:2*S.iI},title:v,children:[i&&(0,Z.jsx)(Pt.Z,{color:(a||C.Z).content.active,small:!0}),h&&(0,Z.jsx)(D.Jr,{size:2*S.iI,success:!0}),m&&(0,Z.jsx)(D.x8,{danger:!0,size:1.5*S.iI}),p&&(0,Z.jsx)(Be,{borderSize:1,size:1*S.iI})]}),(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(j.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,Z.jsx)(O.ZP,{inverted:cl.includes(s),monospace:!0,small:!0,children:t})})]})})},d)};function sl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function dl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?sl(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fl=il()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Canvas);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),pl=il()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Node);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),hl=il()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Edge);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});il()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.MarkerArrow);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),il()((0,c.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.e(4434),t.e(5987),t.e(278)]).then(t.t.bind(t,74529,23));case 2:return n=e.sent,e.abrupt("return",n.Port);case 4:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});var ml=function(e){var n=e.blockRefs,t=e.editingBlock,r=e.fetchPipeline,o=e.height,c=e.pipeline,u=e.runningBlocks,a=e.selectedBlock,s=e.setEditingBlock,d=e.setSelectedBlock,h=(0,f.useContext)(k.ThemeContext),g=(null===t||void 0===t?void 0:t.upstreamBlocks)||{},b=g.block,x=g.values,y=void 0===x?[]:x,C=(0,f.useMemo)((function(){return y.length}),[y]),w=(0,f.useMemo)((function(){var e;return(null===c||void 0===c||null===(e=c.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return i.SCRATCHPAD!==n})))||[]}),[null===c||void 0===c?void 0:c.blocks]),_=(0,f.useMemo)((function(){return(0,bn.HK)(w,(function(e){return e.uuid}))}),[w]),P=((0,f.useMemo)((function(){return(0,bn.HK)(y,(function(e){return e.uuid}))}),[y]),(0,f.useMemo)((function(){return(0,bn.HK)(u,(function(e){return e.uuid}))}),[u])),I=(0,p.Db)(Nt.ZP.blocks.pipelines.useUpdate(null===c||void 0===c?void 0:c.uuid,null===b||void 0===b?void 0:b.uuid),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){s({upstreamBlocks:null}),r()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),E=(0,l.Z)(I,2),T=E[0],A=E[1].isLoading,D=(0,f.useCallback)((function(e){var t=e.type,r=e.uuid;if(d(e),null!==n&&void 0!==n&&n.current){var o,i=n.current["".concat(t,"s/").concat(r,".py")];null===i||void 0===i||null===(o=i.current)||void 0===o||o.scrollIntoView()}}),[n,d]),M=(0,f.useCallback)((function(e){s((function(n){var t=n.upstreamBlocks.values||[],r=t.findIndex((function(n){var t=n.uuid;return e.uuid===t}));return dl(dl({},n),{},{upstreamBlocks:dl(dl({},n.upstreamBlocks),{},{values:r>=0?(0,bn.oM)(t,r):t.concat(e)})})}))}),[s]),F=(0,f.useMemo)((function(){var e={};return w.forEach((function(n){n.upstream_blocks.forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))})),e}),[w]),B=(0,f.useMemo)((function(){var e=[],n=[];return w.forEach((function(t){var r=t.upstream_blocks,o=void 0===r?[]:r,i=t.uuid,c=F[i],l=[];c&&l.push.apply(l,(0,m.Z)(c.map((function(e){return{height:10,id:"".concat(i,"-").concat(e.uuid,"-from"),side:"SOUTH",width:10}})))),null===o||void 0===o||o.forEach((function(e){l.push({height:10,id:"".concat(e,"-").concat(i,"-to"),side:"NORTH",width:10}),n.push({from:e,fromPort:"".concat(e,"-").concat(i,"-from"),id:"".concat(e,"-").concat(i),to:i,toPort:"".concat(e,"-").concat(i,"-to")})})),e.push({data:{block:t},height:37,id:i,ports:l,width:t.uuid.length*S.KF+5*S.iI+((null===b||void 0===b?void 0:b.uuid)===t.uuid?19*S.KF:0)})})),{edges:n,nodes:e}}),[b,w]),N=B.edges,H=B.nodes;return(0,Z.jsxs)(Z.Fragment,{children:[b&&(0,Z.jsxs)(R.Z,{my:3,px:S.cd,children:[(0,Z.jsxs)(R.Z,{mb:S.cd,children:[(0,Z.jsxs)(O.ZP,{children:["Select parent block(s) for ",(0,Z.jsx)(O.ZP,{color:un(b.type,{theme:h}).accent,inline:!0,monospace:!0,children:b.uuid}),":"]}),(0,Z.jsx)(R.Z,{mt:1,children:y.map((function(e,n){var t,r=e.uuid;return(0,Z.jsxs)(O.ZP,{color:un(null===(t=_[r])||void 0===t?void 0:t.type,{theme:h}).accent,inline:!0,monospace:!0,children:[r,C>=2&&n<=C-2?(0,Z.jsx)(O.ZP,{inline:!0,children:",\xa0"}):null]},r)}))})]}),(0,Z.jsxs)(j.Z,{alignItems:"center",children:[(0,Z.jsx)(Bt,{compact:!0,inline:!0,loading:A,onClick:function(){return T({block:dl(dl({},b),{},{upstream_blocks:y.map((function(e){return e.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,Z.jsx)(R.Z,{ml:1}),(0,Z.jsx)(Bt,{compact:!0,inline:!0,noBackground:!0,onClick:function(){return s({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,Z.jsx)(ll,{height:o-10*S.iI,children:(0,Z.jsx)(fl,{arrow:null,disabled:!1,edge:function(e){var n,t=_[e.source];return(0,Z.jsx)(hl,dl(dl({},e),{},{style:{stroke:null===(n=un(null===t||void 0===t?void 0:t.type,{theme:h}))||void 0===n?void 0:n.accent}}))},edges:N,fit:!0,node:function(e){return(0,Z.jsx)(pl,dl(dl({},e),{},{linkable:!1,onClick:function(e,n){var t=n.data.block;(null===b||void 0===b?void 0:b.uuid)===t.uuid||(b?M(t):D(t))},port:null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(e){var n,t,r=e.node.data.block;return(0,Z.jsx)("foreignObject",{height:e.height,style:{pointerEvents:"none"},width:e.width,x:0,y:0,children:(0,Z.jsxs)(al,{block:r,disabled:(null===b||void 0===b?void 0:b.uuid)===r.uuid,hasFailed:v.FAILED===r.status,isInProgress:P[r.uuid]&&(null===(n=u[0])||void 0===n?void 0:n.uuid)===r.uuid,isQueued:P[r.uuid]&&(null===(t=u[0])||void 0===t?void 0:t.uuid)!==r.uuid,isSuccessful:v.EXECUTED===r.status,selected:b?(0,bn.sE)(y,(function(e){return e.uuid===r.uuid})):(null===a||void 0===a?void 0:a.uuid)===r.uuid,children:[r.uuid,(null===b||void 0===b?void 0:b.uuid)===r.uuid&&" (currently editing)"]},r.uuid)})}}))},nodes:H,zoomable:!0})})]})},vl=t(19537),gl=t(73199),bl=t.n(gl),xl=t(71735),yl=t(65292);var jl,kl=function(e){var n=e.language,t=e.maxWidth,r=e.showLineNumbers,o=e.small,i=e.source,c=e.wrapLines,l=(0,f.useContext)(k.ThemeContext);return(0,Z.jsx)(bl(),{source:i,renderers:{code:function(e){var i=e.value;return(0,Z.jsx)(xl.Z,{customStyle:{backgroundColor:(l.background||C.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:Mn.Vp,fontSize:o?12:14,marginBottom:0,marginTop:0,paddingBottom:2*S.iI,paddingTop:2*S.iI,maxWidth:t},lineNumberStyle:{color:(l.content||C.Z.content).muted},language:n,showLineNumbers:r,style:yl._4,useInlineStyles:!0,wrapLines:c,children:i})}}})},Ol=t(64866),Cl=t(21764);function wl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Zl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?wl(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(jl||(jl={}));var _l=function(e){var n,t=e.children,r=e.copiedText,o=e.iconPosition,i=void 0===o?jl.LEFT:o,c=e.inverted,l=e.linkProps,u=e.linkText,a=e.muted,s=e.small,d=e.toastMessage,f=e.withCopyIcon;return t?n=(0,Z.jsx)("span",{children:t}):f&&(n=(0,Z.jsx)(Et.Z,Zl(Zl({href:"#",inline:!0,muted:a,preventDefault:!0,sameColorAsText:!0,small:s},l),{},{children:(0,Z.jsxs)(j.Z,{alignItems:"center",children:[i===jl.LEFT&&(0,Z.jsx)(R.Z,{mr:1,children:(0,Z.jsx)(j.Z,{alignItems:"center",children:(0,Z.jsx)(D.CK,{inverted:c,muted:a})})}),u&&(0,Z.jsx)(O.ZP,{inverted:c,muted:a,small:s,children:u}),i===jl.RIGHT&&(0,Z.jsx)(R.Z,{ml:1,children:(0,Z.jsx)(j.Z,{alignItems:"center",children:(0,Z.jsx)(D.CK,{inverted:c,muted:a})})})]})}))),(0,Z.jsx)(Ol.CopyToClipboard,{onCopy:function(){return Cl.Am.success(d||"Successfully copied to clipboard.",{position:Cl.Am.POSITION.BOTTOM_RIGHT,toastId:r})},text:r,children:n})},Pl=function(e,n,t){return"\n    ".concat(t," = get_variable('").concat(e,"', '").concat(n,"', '").concat(t,"')\n")};var Il=function(e){var n=e.blockRefs,t=e.blocks,r=e.globalVariables,o=e.setSelectedBlock,c=(0,f.useContext)(k.ThemeContext),l=(0,f.useMemo)((function(){return(0,bn.HK)(t,(function(e){return e.uuid}))}),[t]);return(0,Z.jsxs)(R.Z,{p:S.cd,children:[(0,Z.jsx)(R.Z,{mb:S.cd,children:(0,Z.jsxs)(O.ZP,{children:["The variables listed below can be used in any ",(0,Z.jsx)(O.ZP,{bold:!0,inline:!0,monospace:!0,children:i.SCRATCHPAD})," block."]})}),(0,Z.jsx)(R.Z,{mb:S.cd,children:(0,Z.jsx)(O.ZP,{children:"To load the variable, use the following syntax:"})}),(0,Z.jsx)(kl,{language:"python",small:!0,source:"\n    from mage_ai.data_preparation.variable_manager import (\n        get_variable,\n    )\n\n\n    df = get_variable(\n        'pipeline_uuid',\n        'block_uuid',\n        'variable_name',\n    )\n"}),null===r||void 0===r?void 0:r.map((function(e){var t,r=e.block.uuid,u=e.pipeline,a=e.variables,s=l[r];if(s&&i.DATA_EXPORTER!==s.type&&i.SCRATCHPAD!==s.type){var d=un(s.type,{theme:c}).accent,f=null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t["".concat(s.type,"s/").concat(r,".py")];return(0,Z.jsxs)(R.Z,{mt:8,children:[(0,Z.jsx)(j.Z,{alignItems:"center",children:(0,Z.jsxs)(O.ZP,{children:["The following variables were defined in the block ",(0,Z.jsx)(Et.Z,{noHoverUnderline:!0,preventDefault:!0,onClick:function(){var e,n;o(s),null===f||void 0===f||null===(e=f.current)||void 0===e||null===(n=e.scrollIntoView)||void 0===n||n.call(e)},children:(0,Z.jsx)(O.ZP,{color:d,inline:!0,monospace:!0,children:r})}),":"]})}),null===a||void 0===a?void 0:a.map((function(e){return(0,Z.jsxs)(R.Z,{mt:2,children:[(0,Z.jsx)(kl,{language:"python",small:!0,source:Pl(u.uuid,r,e)}),(0,Z.jsx)(_l,{copiedText:(n=u.uuid,t=r,o=e,"from mage_ai.data_preparation.variable_manager import get_variable\n\n\n".concat(Pl(n,t,o).trim(),"\n")),linkText:"Copy code",muted:!0,small:!0,withCopyIcon:!0})]},"".concat(r,"-").concat(e));var n,t,o}))]},r)}}))]})},El=k.default.div.withConfig({displayName:"indexstyle__OutputContainerStyle",componentId:"sc-wkjnrg-0"})([""," overflow-y:scroll;"," ",""],jr.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return!e.height&&"\n    height: ".concat(300,"px;\n  ")})),Sl=t(28799);function Tl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Al(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Tl(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Rl=function(e){var n=e.pipeline,t=e.savePipelineContent,r=(0,f.useState)(!1),o=r[0],i=r[1],c=(0,f.useState)([]),l=c[0],u=c[1],a=(0,f.useMemo)((function(){return(null===l||void 0===l?void 0:l.length)||0}),[l]),s=(n||{}).uuid,p=(0,d.ZP)((0,Sl.Ib)(),{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),h=p.lastMessage,v=(p.readyState,p.sendMessage),g=(0,f.useCallback)((function(){t().then((function(){i(!0),u([]),v(JSON.stringify({execute_pipeline:!0,pipeline_uuid:s}))}))}),[s,t,v]);return(0,f.useEffect)((function(){if(h){var e=JSON.parse(h.data),n=e.execution_state,t=e.pipeline_uuid,r=e.msg_type;t===s&&r===Jr.STREAM_PIPELINE&&u((function(n){return[].concat((0,m.Z)(n),[e])})),qr.IDLE===n&&i(!1)}}),[h,u]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Pe.Z,{beforeIcon:(0,Z.jsx)(D.JM,{inverted:!0,size:2*S.iI}),loading:o,onClick:function(){return g()},success:!0,children:(0,Z.jsx)(O.ZP,{bold:!0,inverted:!0,primary:!1,children:"Execute pipeline"})}),(0,Z.jsx)(El,{noScrollbarTrackBackground:!0,children:(0,Z.jsx)(Fo,{executedAndIdle:!0,hasError:!1,selected:!0,children:l.map((function(e,n){var t=e.data,r=e.type,o=[],i=(o=(o=Array.isArray(t)?t:[t]).filter((function(e){return e}))).length;return o.map((function(e,t){var o,c={first:0===n&&0===t,last:n===a-1&&t===i-1};return $r.includes(r)?o=(0,Z.jsx)(Bo,Al(Al({},c),{},{children:(0,Z.jsx)(O.ZP,{monospace:!0,preWrap:!0,children:(0,Z.jsx)(Do(),{children:e})})})):r===Xr.IMAGE_PNG&&(o=(0,Z.jsx)("div",{style:{backgroundColor:"white"},children:(0,Z.jsx)("img",{alt:"Image ".concat(n," from code output"),src:"data:image/png;base64, ".concat(e)})})),(0,Z.jsx)("div",{children:o},"code-output-".concat(n,"-").concat(t))}))}))})})]})},Dl=t(92506),Ml=t(32151),Fl=(S.iI,Ml.O$+3*S.iI+Fn.dN),Bl=k.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-15ofupc-0"})(["height:calc(100vh - ","px - ","px);width:fit-content;",""],Pr,jr.nn,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),Nl=k.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-15ofupc-1"})(["padding:","px;",""],2*S.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "})),Hl=t(43313),Ll=t(84779);var zl=t(24141);var Ul=function(e){var n=e.activeView,t=e.afterWidth,r=e.autocompleteItems,o=e.blockRefs,i=e.blocks,c=e.chartRefs,l=e.deleteWidget,u=e.editingBlock,a=e.fetchFileTree,s=e.fetchPipeline,p=e.globalVariables,h=e.insights,m=e.messages,v=e.metadata,g=e.onChangeChartBlock,b=e.pipeline,x=e.runBlock,y=e.runningBlocks,k=e.sampleData,C=e.savePipelineContent,w=e.selectedBlock,_=e.setAnyInputFocused,P=e.setEditingBlock,I=e.setSelectedBlock,E=e.setTextareaFocused,T=e.statistics,A=e.textareaFocused,M=e.updateWidget,F=e.widgets,B=(0,zl.i)().height,N=Pr,H=null===b||void 0===b?void 0:b.uuid,L=(0,f.useState)(!1),z=(L[0],L[1],(0,f.useState)(null)),U=z[0],W=z[1],G=((null===u||void 0===u?void 0:u.upstreamBlocks)||{}).block,K=(null===k||void 0===k?void 0:k.columns)||[],V=(null===k||void 0===k?void 0:k.rows)||[],Q=(null===v||void 0===v?void 0:v.column_types)||{},q=null===K||void 0===K?void 0:K.map((function(e){return{columnType:Q[e],uuid:e}})),X=(null===h||void 0===h?void 0:h[1])||{},Y=(0,f.useMemo)((function(){return(0,bn.HK)((null===h||void 0===h?void 0:h[0])||[],(function(e){return e.feature.uuid}))}),[h]),J=function(e){var n=e.statistics,t=Object.keys(n),r=Array(Hl.Dy.length).fill(0);return 0===t.length?null:(t.forEach((function(e){if(Hl.Dy.includes(e)){var t=Hl.CC[e],o=n[e],i=o,c=!1,l=[2,3],u=Hl.Ub[e],a=Hl.oH[e],s=Hl.OD[e];if(Hl.y_.includes(e))c=!0,l=[2,1,2];else if(e in Hl.Sq){o=(0,Ll.Jw)(o,0);var d=Hl.Sq[e];i=n[d]}var f={columnFlexNumbers:l,name:t,progress:c,rate:i,successDirection:a,warning:s};Hl.y_.includes(e)||(f.value=o),r[u]=f}})),r)}({statistics:T}),$=function(e){var n=e.columnTypes,t=void 0===n?{}:n,r=e.statistics,o=Object.keys(r);if(0===o.length)return null;var i=Object.values(t),c=i.length,l=[];l.push({name:"Column count",successDirection:Hl.oH.column_count,value:(0,Ce.x6)(c)}),o.forEach((function(e){if(Hl.Zu.includes(e)){var n=Hl.CC[e],t=r[e],o=Hl.OD[e];l.push({name:n,successDirection:Hl.oH[e],value:(0,Ce.x6)(t),warning:o})}}));var u=(0,Ml.QO)(i),a=u.countCategory,s=u.countDatetime,d=u.countNumerical;return l.push({name:"Categorical Features",rate:a/c,value:(0,Ce.x6)(a)},{name:"Numerical Features",rate:d/c,value:(0,Ce.x6)(d)},{name:"Datetime Features",rate:s/c,value:(0,Ce.x6)(s)}),l}({columnTypes:Q,statistics:T}),ee=k&&h&&Object.keys(T).length>0,ne=(0,f.useCallback)((0,Ml.Fk)({columnTypes:Q,columns:K,insightsByFeatureUUID:Y,insightsOverview:X,noColumnLinks:!0,statistics:T}),[Q,K,Y,X,T]),te=(0,f.useMemo)((function(){return(0,Z.jsx)(Il,{blockRefs:o,blocks:i,globalVariables:p,setSelectedBlock:I})}),[null===o||void 0===o?void 0:o.current,i,p,I]),re=(0,d.ZP)((0,Sl.Ib)(),{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),oe=(re.lastMessage,re.readyState,re.sendMessage);return(0,f.useCallback)((function(){oe(JSON.stringify({execute_pipeline:!0,pipeline_uuid:H}))}),[H,oe]),(0,Z.jsxs)(Z.Fragment,{children:[n===$e.TREE&&(null===U||void 0===U?void 0:U.length)>=1&&(0,Z.jsxs)(R.Z,{mb:3,mt:2,mx:2,children:[(0,Z.jsxs)(j.Z,{justifyContent:"space-between",children:[(0,Z.jsx)(O.ZP,{bold:!0,danger:!0,children:"Errors"}),(0,Z.jsx)(Pe.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return W(null)},transparent:!0,children:(0,Z.jsx)(D.x8,{muted:!0})})]}),null===U||void 0===U?void 0:U.map((function(e){return(0,Z.jsx)(R.Z,{pb:1,children:(0,Z.jsx)(O.ZP,{monospace:!0,xsmall:!0,children:e})},e)}))]}),(0,Z.jsxs)(Bl,{fullWidth:nn.includes(n),children:[n===$e.TREE&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(ml,{blockRefs:o,editingBlock:u,fetchPipeline:s,height:B-N-300,pipeline:b,runningBlocks:y,selectedBlock:w,setEditingBlock:P,setSelectedBlock:I}),!G&&(0,Z.jsx)(R.Z,{p:2,children:(0,Z.jsx)(Rl,{pipeline:b,savePipelineContent:C})})]}),n===$e.DATA&&K.length>0&&(0,Z.jsx)(Mo.Z,{columnHeaderHeight:Fl,columns:K,height:B-N-Ir,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!0,renderColumnHeader:ne,rows:V,width:t}),n===$e.REPORTS&&(0,Z.jsx)(Nl,{noPadding:!w||!ee,children:(0,Z.jsxs)(j.Z,{flexDirection:"column",fullWidth:!0,children:[J&&(0,Z.jsx)(Dl.Z,{stats:J,title:"Quality metrics"}),$&&(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(Dl.Z,{stats:$,title:"Statistics"})}),q.length>0&&(0,Z.jsx)(R.Z,{mt:S.cd,children:(0,Z.jsx)(vl.Z,{features:q,statistics:T})})]})}),n===$e.GRAPHS&&(0,Z.jsx)(Nl,{noPadding:!w||!ee,children:(0,Z.jsx)(Gi,{afterWidth:t,features:q,insightsOverview:X,statistics:T})}),$e.VARIABLES===n&&p&&te,w&&ee||!w&&ee&&n===$e.DATA?null:tn.includes(n)&&(0,Z.jsx)(j.Z,{alignItems:"center",justifyContent:"center",verticalHeight:90,verticalHeightOffset:N,width:t,children:(0,Z.jsx)(O.ZP,{center:!0,default:!0,disableWordBreak:!0,large:!0,monospace:!0,children:w?!ee&&"No data or insights available":"Select a block for insights"})}),$e.CHARTS===n&&(0,Z.jsx)(rl,{autocompleteItems:r,blockRefs:o,blocks:i,chartRefs:c,deleteWidget:l,fetchFileTree:a,fetchPipeline:s,messages:m,onChangeChartBlock:g,pipeline:b,runBlock:x,runningBlocks:y,savePipelineContent:C,selectedBlock:w,setAnyInputFocused:_,setSelectedBlock:I,setTextareaFocused:E,textareaFocused:A,updateWidget:M,widgets:F,width:t})]})]})},Wl=t(1887),Gl=t.n(Wl),Kl=t(57639);var Vl=function(e){var n=e.after,t=e.afterHeader,r=e.afterHidden,o=e.afterMousedownActive,i=e.afterSubheader,c=e.afterWidth,l=e.before,u=e.beforeHeader,a=e.beforeHidden,s=e.beforeMousedownActive,d=e.beforeWidth,p=e.children,h=e.mainContainerHeader,m=e.mainContainerRef,v=e.setAfterHidden,g=e.setAfterMousedownActive,b=e.setAfterWidth,x=e.setBeforeHidden,y=e.setBeforeMousedownActive,k=e.setBeforeWidth,O=(0,zl.i)().width,C=(0,f.useRef)(null),w=(0,f.useRef)(null),_=(0,f.useRef)(null),P=(0,f.useRef)(null),I=(0,f.useCallback)((function(){var e=!r;v(e),(0,cn.t8)(cn.zg,e)}),[r,v]),E=(0,f.useCallback)((function(){var e=!a;x(e),(0,cn.t8)(cn.Uu,e)}),[a,x]);(0,f.useEffect)((function(){var e,n,t,r,o=function(e){var n,t;((null===_||void 0===_||null===(n=_.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).x;if(O){var r=e.x;r+_r>O-c&&(r=O-c-_r),k(Math.max(r,Cr))}},i=function(e){var n,t;e.offsetX>=e.target.offsetWidth-Zr&&e.offsetX<=e.target.offsetWidth+Zr&&(y(!0),e.preventDefault(),null===(n=document)||void 0===n||null===(t=n.addEventListener)||void 0===t||t.call(n,"mousemove",o,!1))},l=function(){var e,n;y(!1),null===(e=document)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousemove",o,!1)};return null===P||void 0===P||null===(e=P.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.addEventListener)||void 0===r||r.call(t,"mouseup",l,!1),function(){var e,n,t,r;null===P||void 0===P||null===(e=P.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.removeEventListener)||void 0===r||r.call(t,"mouseup",l,!1),l()}}),[c,_,P,y,k,O]),(0,f.useEffect)((function(){var e,n,t,r,o=function(e){var n,t;((null===C||void 0===C||null===(n=C.current)||void 0===n||null===(t=n.getBoundingClientRect)||void 0===t?void 0:t.call(n))||{}).x;if(O){var r=O-e.x;r+_r>O-d&&(r=O-d-_r),b(Math.max(r,Or))}},i=function(e){var n,t;e.offsetX>=-1*Zr&&e.offsetX<=Zr&&(g(!0),e.preventDefault(),null===(n=document)||void 0===n||null===(t=n.addEventListener)||void 0===t||t.call(n,"mousemove",o,!1))},c=function(){var e,n;g(!1),null===(e=document)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousemove",o,!1)};return null===w||void 0===w||null===(e=w.current)||void 0===e||null===(n=e.addEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.addEventListener)||void 0===r||r.call(t,"mouseup",c,!1),function(){var e,n,t,r;null===w||void 0===w||null===(e=w.current)||void 0===e||null===(n=e.removeEventListener)||void 0===n||n.call(e,"mousedown",i,!1),null===(t=document)||void 0===t||null===(r=t.removeEventListener)||void 0===r||r.call(t,"mouseup",c,!1),c()}}),[d,C,w,g,b,O]);var T=r?4*S.iI:c,A=a?4*S.iI:d;return(0,Z.jsxs)(Kl.Z,{children:[(o&&!r||s&&!a)&&(0,Z.jsx)(Gl(),{children:(0,Z.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n                body {\n                  cursor: col-resize;\n                }\n              "}})}),l&&(0,Z.jsxs)(Dr,{style:{width:A},children:[(0,Z.jsx)(Nr,{active:s,disabled:a,ref:P,right:0}),(0,Z.jsx)(Ar,{style:{width:A},visible:a,children:(0,Z.jsxs)(j.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,justifyContent:"space-between",children:[(0,Z.jsxs)(Se.Z,{children:[(0,Z.jsx)(R.Z,{pl:a?1:0}),!a&&u]}),(0,Z.jsxs)(Se.Z,{children:[(0,Z.jsx)(dr,{block:!0,label:a?"Show sidebar":"Hide sidebar",size:null,widthFitContent:!0,children:(0,Z.jsxs)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return E()},children:[a&&(0,Z.jsx)(D._Q,{neutral:!0,size:2*S.iI}),!a&&(0,Z.jsx)(D.s$,{neutral:!0,size:2*S.iI})]})},a?"before-is-hidden":"before-is-visible"),(0,Z.jsx)(R.Z,{pr:a?1:2})]})]})}),(0,Z.jsx)(Mr,{noScrollbarTrackBackground:!0,ref:_,children:!a&&l})]}),(0,Z.jsxs)(Hr,{style:{left:A,width:"calc(100% - ".concat(A+T,"px)")},children:[h,(0,Z.jsx)(Lr,{headerOffset:h?Pr:null,style:{width:"calc(100% - ".concat(A+T,"px)")},children:(0,Z.jsx)(zr,{noScrollbarTrackBackground:!0,ref:m,children:p})})]}),n&&(0,Z.jsxs)(Fr,{style:{width:T},children:[(0,Z.jsx)(Nr,{active:o,disabled:r,left:0,ref:w}),(0,Z.jsx)(Ar,{style:{width:T},visible:r,children:(0,Z.jsxs)(j.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:[(0,Z.jsxs)(Se.Z,{children:[(0,Z.jsx)(R.Z,{pl:r?1:2}),(0,Z.jsxs)(Pe.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return I()},children:[r&&(0,Z.jsx)(D.s$,{neutral:!0,size:2*S.iI}),!r&&(0,Z.jsx)(D._Q,{neutral:!0,size:2*S.iI})]})]}),!r&&t]})}),!r&&i&&(0,Z.jsx)(Rr,{style:{width:T},visible:r,children:i}),(0,Z.jsx)(Br,{noScrollbarTrackBackground:!0,ref:C,children:!r&&n})]})]})},Ql=t(59e3);function ql(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Xl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ql(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ql(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Yl(e){var n,t,r,o,c,a=e.pipeline,s=(0,h.useRouter)(),m=(0,zl.i)(),v=m.height,g=m.width,b=(0,f.useState)((0,cn.U2)(cn.L8,kr)),x=b[0],y=b[1],k=(0,f.useState)(null),O=k[0],C=k[1],w=(0,f.useState)((0,cn.U2)(cn.J3,wr)),_=w[0],P=w[1],I=(0,f.useState)(!!(0,cn.U2)(cn.zg)),E=I[0],T=I[1],A=(0,f.useState)(!!(0,cn.U2)(cn.Uu)),M=A[0],F=A[1],B=(0,f.useState)(!1),N=B[0],H=B[1],L=(0,f.useState)(!1),z=L[0],U=L[1],W=(0,f.useState)(null),G=W[0],K=W[1],V=(0,f.useState)(null),Q=V[0],q=V[1],X=(0,f.useState)([]),Y=X[0],J=X[1],$=(0,f.useState)(!1),ee=$[0],ne=$[1],te=(0,f.useState)({}),re=te[0],oe=te[1],ie=(0,f.useState)(!1),ce=ie[0],le=ie[1],ue=(0,f.useState)(!1),ae=ue[0],se=ue[1],de=(0,f.useState)(null),fe=de[0],pe=de[1],he=(0,f.useState)(!1),me=he[0],ve=he[1],ge=Nt.ZP.pipelines.list(),be=ge.data,xe=ge.mutate,ye=(0,f.useMemo)((function(){return null===be||void 0===be?void 0:be.pipelines}),[be]),je=(0,f.useMemo)((function(){return(null===ye||void 0===ye?void 0:ye.length)||0}),[ye]),ke=(0,Ql.iV)(),Oe=ke.sideview,we=ke.file_path,Ze=(0,f.useMemo)((function(){var e=ke["file_paths[]"]||[];return Array.isArray(e)||(e=[e]),e}),[ke]),Ee=(0,f.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,Ql.iV)().sideview!==e&&(0,Qr.u)((0,u.Z)({},en,e),{pushHistory:n})}),[]);(0,f.useEffect)((function(){Oe||Ee($e.TREE,!1)}),[Oe]);var Te=(0,f.useCallback)((function(e,n){Ee(e,n),T(!1)}),[Ee]),Ae=(0,f.useRef)(null),Re=(0,f.useRef)({}),De=(0,f.useRef)({}),Me=(0,f.useRef)({}),Fe=(0,f.useRef)({}),Be=(0,f.useRef)(null),Ne=a.uuid,He=(0,Rn.Z)(Ne),Le=(0,f.useCallback)((function(e){Me.current=Xl(Xl({},Me.current),e)}),[Me]),ze=(0,f.useCallback)((function(e,n){Le((0,u.Z)({},e,n)),ve(!0)}),[Le,ve]),Ue=(0,f.useCallback)((function(e){Fe.current=Xl(Xl({},Fe.current),e)}),[Fe]),We=(0,f.useCallback)((function(e,n){Ue((0,u.Z)({},e,n)),ve(!0)}),[Ue,ve]),Ge=(0,f.useState)(null),Ke=Ge[0],Ve=Ge[1];(0,f.useEffect)((function(){null===Be||void 0===Be||!Be.current||N||z||Ve(Be.current.getBoundingClientRect().width)}),[N,z,E,x,M,_,null===Be||void 0===Be?void 0:Be.current,Ve,g]),(0,f.useEffect)((function(){N||(C(x),(0,cn.t8)(cn.L8,x))}),[N,x,C]),(0,f.useEffect)((function(){z||(0,cn.t8)(cn.J3,_)}),[z,_]);var Qe=Nt.ZP.variables.pipelines.list(!E&&Ne),qe=Qe.data,Xe=Qe.mutate,Ye=null===qe||void 0===qe?void 0:qe.variables,Je=(0,f.useState)([]),nn=Je[0],tn=Je[1],ln=(0,f.useState)([]),un=ln[0],an=ln[1],sn=(0,f.useRef)({}),dn=(0,f.useCallback)((function(e){var n;ve(!0);var t=sn.current[e.uuid]||{},r=t.upstream_blocks;(null===e||void 0===e||null===(n=e.upstream_blocks)||void 0===n?void 0:n.length)>=1&&(r=e.upstream_blocks),sn.current[e.uuid]=Xl(Xl(Xl({},t),e),{},{configuration:Xl(Xl({},t.configuration),e.configuration),upstream_blocks:r})}),[ve,sn.current]),fn=(0,f.useState)({upstreamBlocks:null}),pn=fn[0],hn=fn[1],mn=(0,f.useState)([]),vn=mn[0],gn=mn[1],xn=(0,f.useState)(null),yn=xn[0],jn=xn[1],kn=(0,f.useState)(null),On=kn[0],Cn=kn[1],wn=function(e,n){var t=(0,bn.HK)(n,(function(e){return e.uuid}));return e.map((function(e){return t[e]})).filter((function(e){return!!e}))}(Qo(Ne),nn),Zn=(0,f.useState)(wn),In=Zn[0],En=Zn[1],Tn=(0,f.useState)(null),An=Tn[0],Dn=Tn[1],Mn=(0,Rn.Z)(In),Fn=(0,f.useCallback)((function(){hn({upstreamBlocks:{block:null,values:[]}}),it({}),ve(!1),pe(null),gn([]),jn(null)}),[]);(0,f.useEffect)((function(){Ne!==He&&(Me.current={})}),[Ne,He]);var Bn=Nt.ZP.blocks.pipelines.outputs.detail(!E&&Ne,(null===An||void 0===An?void 0:An.type)!==i.SCRATCHPAD&&(null===An||void 0===An?void 0:An.type)!==i.CHART&&(null===An||void 0===An?void 0:An.uuid)),Nn=Bn.data,Hn=Bn.mutate,Ln=null===Nn||void 0===Nn||null===(n=Nn.outputs)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.sample_data,zn=Nt.ZP.blocks.pipelines.analyses.detail(!E&&Ne,(null===An||void 0===An?void 0:An.type)!==i.SCRATCHPAD&&(null===An||void 0===An?void 0:An.type)!==i.CHART&&(null===An||void 0===An?void 0:An.uuid)),Un=zn.data,Wn=zn.mutate,Gn=(null===Un||void 0===Un||null===(r=Un.analyses)||void 0===r?void 0:r[0])||{},Kn=Gn.insights,Vn=Gn.metadata,Qn=Gn.statistics,qn=void 0===Qn?{}:Qn,Xn=Nt.ZP.blocks.pipelines.analyses.detail(Ne,(null===yn||void 0===yn?void 0:yn.type)!==i.CHART&&null!==On&&(null===yn||void 0===yn?void 0:yn.uuid)),Yn=Xn.data,Jn=(Xn.mutate,(null===Yn||void 0===Yn||null===(o=Yn.analyses)||void 0===o||null===(c=o[0])||void 0===c?void 0:c.suggestions)||[]);(0,f.useEffect)((function(){0===vn.length&&(Wn(),Hn(),Xe())}),[Wn,Hn,Xe,vn]),(0,f.useEffect)((function(){if(0===In.length)Dn(null);else if((null===Mn||void 0===Mn?void 0:Mn.length)!==(null===In||void 0===In?void 0:In.length)&&(null===In||void 0===In?void 0:In.length)<(null===Mn||void 0===Mn?void 0:Mn.length)){var e=Mn.findIndex((function(e){return e.uuid===(null===An||void 0===An?void 0:An.uuid)})),n=Mn.length-1===e?e-1:e+1;Dn(Mn[Math.max(0,n)])}}),[In,Mn,null===An||void 0===An?void 0:An.uuid]),(0,f.useEffect)((function(){var e;null!==(e=pn.upstreamBlocks)&&void 0!==e&&e.block&&(T(!1),Ee($e.TREE))}),[pn.upstreamBlocks]);var $n=Nt.ZP.autocomplete_items.list({},{refreshInterval:!1,revalidateOnFocus:!0}),et=$n.data,nt=$n.mutate,tt=null===et||void 0===et?void 0:et.autocomplete_items,rt=(0,f.useState)({}),ot=rt[0],it=rt[1],ct=Nt.ZP.pipelines.detail(Ne),lt=ct.data,ut=(ct.isLoading,ct.mutate),at=Nt.ZP.files.list(),st=at.data,dt=at.mutate,ft=null===lt||void 0===lt?void 0:lt.pipeline,pt=Nt.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),ht=pt.data,mt=pt.mutate,vt=null===ht||void 0===ht?void 0:ht.kernels,gt=(null===vt||void 0===vt?void 0:vt.find((function(e){return e.name===yr[null===ft||void 0===ft?void 0:ft.type]})))||(null===vt||void 0===vt?void 0:vt[0]),bt=(0,f.useCallback)((function(e){var n=encodeURIComponent(e),t=(0,Ql.iV)()["file_paths[]"]||[];Array.isArray(t)||(t=[t]),t.includes(n)||t.push(n),(0,Qr.u)({"file_paths[]":t,file_path:n})}),[]);(0,f.useEffect)((function(){q(we)}),[we]),(0,f.useEffect)((function(){(0,bn.fS)(Ze,Y)||J(Ze)}),[Ze]);var xt=(0,p.Db)(Nt.ZP.pipelines.useCreate(),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(e){var n=e.pipeline.uuid;s.push("/pipelines/[...slug]","/pipelines/".concat(n)),dt(),xe()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),yt=(0,l.Z)(xt,1)[0],jt=(0,p.Db)(Nt.ZP.pipelines.useUpdate(Ne,{update_content:!0}),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){return ve(!1)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),kt=(0,l.Z)(jt,2),Ot=kt[0],Ct=kt[1].isLoading,wt=(0,f.useCallback)((function(e){var n=e||{},t=n.block,r=n.pipeline,o=void 0===r?{}:r;return pe(new Date),Ot({pipeline:Xl(Xl(Xl({},ft),o),{},{blocks:nn.map((function(e){var n=Me.current[e.uuid];"undefined"===typeof n&&(n=e.content);var r=Xl(Xl({},e),{},{content:n,outputs:i.SCRATCHPAD===e.type&&ot[e.uuid]?ot[e.uuid].map((function(n,t){return{text_data:JSON.stringify(n),variable_uuid:"".concat(e.uuid,"_").concat(t)}})):e.outputs});return(null===t||void 0===t?void 0:t.uuid)===e.uuid&&Object.entries(t).forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],o=n[1];r[t]=o})),r})),widgets:un.map((function(e){var n=Fe.current[e.uuid],t=sn.current[e.uuid]||{};return"undefined"===typeof n&&(n=e.content),Xl(Xl(Xl({},e),t),{},{content:n,configuration:Xl(Xl({},e.configuration),t.configuration)})}))})})}),[nn,Me.current,Fe.current,ot,ft,pe,Ot,sn.current,un]),Zt=(0,f.useCallback)((function(e,n){return wt({pipeline:{name:e,type:n}}).then((function(e){var t=e.data.pipeline.uuid;dt(),n!==(null===ft||void 0===ft?void 0:ft.type)&&ut(),Ko(nn,Ne,t),s.push("/pipelines/".concat(t))}))}),[nn,dt,Ne,wt,Ko]),_t=(0,p.Db)((function(e){return Nt.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(e){e.pipeline.uuid===Ne&&function(e,n){var t="/pipelines/".concat(null===e||void 0===e?void 0:e[0]),r=n.query;(null===e||void 0===e?void 0:e.length)>=1&&n.push({pathname:t,query:r})}(ye,s),function(e,n){e.forEach((function(e){(0,cn.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed")),(0,cn.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed"))}))}(nn,Ne),dt(),xe()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Pt=(0,l.Z)(_t,1)[0],It=(0,p.Db)((function(e){var n=e.uuid;return Nt.ZP.blocks.pipelines.useDelete(Ne,n)()}),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(e){var n=e.block,t=n.type,r=n.uuid;tn((function(e){return(0,bn.oM)(e,e.findIndex((function(e){var n=e.uuid;return r===n})))})),ut(),jn(null),t===i.SCRATCHPAD&&dt()},onErrorCallback:function(e,n){var t=e.url_parameters,r=n.messages;it((function(e){return Xl(Xl({},e),{},(0,u.Z)({},t.block_uuid,r.map((function(e){return{data:"".concat(e,"\n"),error:"".concat(e,"\n"),type:Xr.TEXT_PLAIN}}))))}))}})}}),Et=(0,l.Z)(It,1)[0],St=(0,p.Db)((function(e){var n=e.uuid;return Nt.ZP.widgets.pipelines.useDelete(Ne,n)()}),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(e){var n=e.widget.uuid;an((function(e){return(0,bn.oM)(e,e.findIndex((function(e){var t=e.uuid;return n===t})))})),ut(),dt()},onErrorCallback:function(e,n){var t=e.url_parameters,r=n.messages;it((function(e){return Xl(Xl({},e),{},(0,u.Z)({},t.block_uuid,r.map((function(e){return{data:"".concat(e,"\n"),error:"".concat(e,"\n"),type:Xr.TEXT_PLAIN}}))))}))}})}}),Tt=(0,l.Z)(St,1)[0],At=(0,p.Db)((function(e){var n=e.type,t=e.uuid;return Nt.ZP.blocks.useDelete(encodeURIComponent("".concat(n,"/").concat(t)))()}),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){nt(),ut(),dt()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r),alert("Error deleting block file. Check that there are no downstream blocks, then try again.")}})}}),Rt=(0,l.Z)(At,1)[0],Dt=(0,p.Db)(Nt.ZP.restart.kernels.useCreate(null===gt||void 0===gt?void 0:gt.id),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(){return mt()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Mt=(0,l.Z)(Dt,1)[0],Ft=(0,p.Db)(Nt.ZP.interrupt.kernels.useCreate(null===gt||void 0===gt?void 0:gt.id),{onSuccess:function(e){return(0,Ht.wD)(e,{callback:function(e){},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Lt=(0,l.Z)(Ft,1)[0],zt=((0,f.useCallback)((function(){window.confirm("Do you want to restart the kernel? All variables will be cleared.")&&Mt()}),[Mt]),(0,p.Db)(Nt.ZP.blocks.pipelines.useCreate(Ne))),Ut=(0,l.Z)(zt,1)[0],Gt=(0,f.useCallback)((function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,Ce.Y6)();return Ut({block:Xl({name:r,priority:n},e)}).then((function(e){(0,Ht.wD)(e,{callback:function(){var r=e.data.block;tn((function(e){return(0,bn.Hk)(r,n,e)})),null===t||void 0===t||t(r),Cn(null),dt(),ut()},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}))}),[Ut,tn]),Kt=Nt.ZP.widgets.pipelines.list(!E&&Ne),Vt=(Kt.data,Kt.mutate,(0,p.Db)(Nt.ZP.widgets.pipelines.useCreate(Ne))),Xt=(0,l.Z)(Vt,1)[0],Yt=(0,f.useCallback)((function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,Ce.Y6)();return Xt({widget:Xl({name:r,priority:n,type:i.CHART},e)}).then((function(e){return(0,Ht.wD)(e,{callback:function(){var n=e.data.widget;null===t||void 0===t||t(n),dt(),ut(),Ee($e.CHARTS),K(n)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}))}),[Oe,De.current,Xt,Ee]);(0,f.useEffect)((function(){if(G){var e,n=null===(e=De.current[G.uuid])||void 0===e?void 0:e.current;n&&(n.scrollIntoView(),K(null))}}),[De.current[null===G||void 0===G?void 0:G.uuid],K]),(0,f.useEffect)((function(){He!==Ne&&(tn([]),an([]),En([]))}),[Ne,He]),(0,f.useEffect)((function(){"undefined"!==typeof(null===ft||void 0===ft?void 0:ft.blocks)&&tn(ft.blocks)}),[null===ft||void 0===ft?void 0:ft.blocks]),(0,f.useEffect)((function(){"undefined"!==typeof(null===ft||void 0===ft?void 0:ft.widgets)&&an(ft.widgets)}),[null===ft||void 0===ft?void 0:ft.widgets]),(0,f.useEffect)((function(){(null===wn||void 0===wn?void 0:wn.length)>0&&0===(null===In||void 0===In?void 0:In.length)&&(En(wn),Dn(wn[0]))}),[null===In||void 0===In?void 0:In.length,null===wn||void 0===wn?void 0:wn.length]);var Jt=(0,Rn.Z)(nn);(0,f.useEffect)((function(){if("undefined"!==typeof(null===ft||void 0===ft?void 0:ft.blocks)&&(!nn.length||(null===Jt||void 0===Jt?void 0:Jt.map((function(e){return e.uuid})).sort())!==(null===nn||void 0===nn?void 0:nn.map((function(e){return e.uuid})).sort()))){var e=Go(ft.blocks),n=e.content,t=e.messages;Me.current=n,it((function(e){return Xl(Xl({},t),e)}))}}),[nn,Jt,null===ft||void 0===ft?void 0:ft.blocks,tn,it]),(0,f.useEffect)((function(){if(!un.length&&"undefined"!==typeof(null===ft||void 0===ft?void 0:ft.widgets)){var e=Go(ft.widgets),n=e.content,t=e.messages;Fe.current=n,it((function(e){return Xl(Xl({},t),e)}))}}),[null===ft||void 0===ft?void 0:ft.widgets,tn,it,un]);var $t=(0,f.useCallback)((function(e,n,t){var r=nn.find((function(t){var r=t.type,o=t.uuid;return r===n&&o===e}));if(r){if(jn(r),null!==Re&&void 0!==Re&&Re.current){var o,c=Re.current["".concat(r.type,"s/").concat(r.uuid,".py")];null===c||void 0===c||null===(o=c.current)||void 0===o||o.scrollIntoView()}}else if(n===i.CHART){var l=un.find((function(n){return n.uuid===e}));if(l&&(jn(l),null!==De&&void 0!==De&&De.current)){var u,a=De.current[l.uuid];null===a||void 0===a||null===(u=a.current)||void 0===u||u.scrollIntoView()}}else bt(t)}),[nn]),er=(0,d.ZP)((0,Sl.Ib)(),{onOpen:function(){return console.log("socketUrlPublish opened")},shouldReconnect:function(e){return console.log("Attempting to reconnect..."),!0}}),nr=er.lastMessage,tr=(er.readyState,er.sendMessage);(0,f.useEffect)((function(){if(nr){var e=JSON.parse(nr.data),n=e.execution_state,t=e.uuid;it((function(n){var r=n[t]||[];return Xl(Xl({},n),{},(0,u.Z)({},t,r.concat(e)))})),qr.IDLE===n&&gn((function(e){return e.filter((function(e){var n=e.uuid;return t!==n}))})),ve(!0)}}),[nr,it,ve,gn]);var rr=(0,f.useCallback)((function(e){var n=e.block,t=e.code,r=e.ignoreAlreadyRunning,o=e.runDownstream,i=void 0!==o&&o,c=e.runUpstream,l=void 0!==c&&c,u=e.runTests,a=void 0!==u&&u,s=n.uuid;vn.find((function(e){var n=e.uuid;return s===n}))&&!r||(tr(JSON.stringify({code:t,pipeline_uuid:null===ft||void 0===ft?void 0:ft.uuid,type:n.type,uuid:s,run_downstream:i,run_upstream:l,run_tests:a})),it((function(e){return delete e[s],e})),le(!1),gn((function(e){return e.find((function(e){var n=e.uuid;return s===n}))?e:e.concat(n)})))}),[ut,ft,vn,tr,it,gn,le]),or=(0,f.useRef)(null),ir=(0,f.useMemo)((function(){return(0,Z.jsx)(Sn,{areaRef:or,createPipeline:yt,deleteBlockFile:Rt,deletePipeline:Pt,enableContextItem:!0,numPipelines:je,type:_n.FILE_BROWSER,children:(0,Z.jsx)(Pn,{files:null===st||void 0===st?void 0:st.files,onSelectBlockFile:$t,openFile:bt,openPipeline:function(e){Fn(),s.push("/pipelines/[...slug]","/pipelines/".concat(e))},openSidekickView:Te,ref:or})})}),[null===st||void 0===st?void 0:st.files,$t]),cr=(null===In||void 0===In?void 0:In.length)>0?rn:rn.filter((function(e){return e.key!==$e.DATA})),lr=(0,f.useMemo)((function(){return(0,Z.jsx)(Ul,{activeView:Oe,afterWidth:O,autocompleteItems:tt,blockRefs:Re,blocks:nn,chartRefs:De,deleteWidget:Tt,editingBlock:pn,fetchFileTree:dt,fetchPipeline:ut,globalVariables:Ye,insights:Kn,messages:ot,metadata:Vn,onChangeChartBlock:We,pipeline:ft,runBlock:rr,runningBlocks:vn,sampleData:Ln,savePipelineContent:wt,selectedBlock:yn,setAnyInputFocused:se,setEditingBlock:hn,setSelectedBlock:jn,setTextareaFocused:le,statistics:qn,textareaFocused:ce,updateWidget:dn,widgets:un})}),[Oe,O,tt,Re,nn,Tt,pn,dt,ut,Ye,Kn,ot,Vn,We,ft,rr,vn,Ln,wt,yn,se,hn,le,qn,ce,dn,un]),ur=(0,f.useMemo)((function(){return(0,Z.jsx)(yi,{addNewBlockAtIndex:Gt,addWidget:function(e,n){var t=n.onCreateCallback;return Yt(e,un.length,t)},anyInputFocused:ae,autocompleteItems:tt,blockRefs:Re,blocks:nn,deleteBlock:Et,fetchFileTree:dt,fetchPipeline:ut,interruptKernel:Lt,isPipelineUpdating:Ct,kernel:gt,mainContainerRef:Be,mainContainerWidth:Ke,messages:ot,onChangeCodeBlock:ze,openSidekickView:Te,pipeline:ft,pipelineContentTouched:me,pipelineLastSaved:fe,restartKernel:Mt,runBlock:rr,runningBlocks:vn,savePipelineContent:wt,selectedBlock:yn,setAnyInputFocused:se,setEditingBlock:hn,setMessages:it,setOutputBlocks:En,setPipelineContentTouched:ve,setRecsWindowOpenBlockIdx:Cn,setRunningBlocks:gn,setSelectedBlock:jn,setSelectedOutputBlock:Dn,setTextareaFocused:le,textareaFocused:ce,widgets:un})}),[Gt,Yt,ae,tt,Re,nn,Et,dt,ut,Lt,Ct,gt,Be,Ke,ot,ze,ft,me,fe,Mt,rr,vn,wt,yn,se,hn,it,ve,gn,jn,le,ce,un]),ar=(0,f.useMemo)((function(){return(0,Z.jsx)(Yr,{filePaths:Y,filesTouched:re,isBusy:vn.length>=1,isPipelineUpdating:Ct,kernel:gt,pipeline:ft,pipelineContentTouched:me,pipelineLastSaved:fe,restartKernel:Mt,selectedFilePath:Q,updatePipelineMetadata:Zt})}),[re,Ct,gt,ft,me,fe,Mt,vn,Q,Y,Zt]),sr=(0,f.useMemo)((function(){var e=nn.filter((function(e){var n=e.type;return i.SCRATCHPAD!==n}));return(0,Z.jsxs)(j.Z,{alignItems:"center",fullWidth:!0,justifyContent:"space-between",children:[(0,Z.jsx)(Se.Z,{children:cr.map((function(e){var n=e.key,t=e.label,r=n===Oe,o=on[n];return(0,Z.jsx)(R.Z,{pl:1,children:(0,Z.jsx)(Bt,{beforeElement:(0,Z.jsx)(o,{}),blackBorder:!0,compact:!0,onClick:function(){return Ee(n)},selected:r,uuid:n,children:t})},n)}))}),(0,Z.jsxs)(R.Z,{px:1,ref:Ae,style:{position:"relative"},children:[(0,Z.jsx)(Bt,{beforeElement:(0,Z.jsx)(D.mm,{}),blackBorder:!0,compact:!0,onClick:function(){return ne(!0)},primaryGradient:!0,uuid:"Pipeline/afterHeader/add_chart",children:"Add chart"}),(0,Z.jsx)(Ie.Z,{disableEscape:!0,onClickOutside:function(){return ne(!1)},open:ee,children:(0,Z.jsx)(_e,{addWidget:function(e,n){var t=n.onCreateCallback;return Yt(e,un.length,t)},block:e[e.length-1],onClickCallback:function(){return ne(!1)},open:ee,parentRef:Ae,rightOffset:2*S.iI,runBlock:rr})})]})]})}),[Yt,nn,cr,Ae,rr,ne,ee,un]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(qt.Z,{title:null===ft||void 0===ft?void 0:ft.name}),(0,Z.jsxs)(Vl,{after:lr,afterHeader:sr,afterHidden:E,afterMousedownActive:N,afterSubheader:(null===In||void 0===In?void 0:In.length)>0&&Oe===$e.DATA&&(0,Z.jsx)(j.Z,{alignItems:"center",fullHeight:!0,fullWidth:!0,children:In.map((function(e){var n=e.uuid,t=(null===An||void 0===An?void 0:An.uuid)===n;return(0,Z.jsx)(R.Z,{pl:1,children:(0,Z.jsx)(Bt,{afterElement:t?(0,Z.jsx)(Pe.Z,{basic:!0,highlightOnHover:!0,onClick:function(){!function(e,n){var t=Qo(e).filter((function(e){return e!==n}));(0,cn.t8)(Vo(e),t)}(Ne,e.uuid),En((function(e){return e.filter((function(e){return e.uuid!==n}))}))},padding:"2px",transparent:!0,children:(0,Z.jsx)(D.x8,{muted:!0,size:1.25*S.iI})}):null,blackBorder:!0,compact:!0,muted:!0,onClick:function(){return Dn(e)},selected:t,uuid:n,children:n})},n)}))}),afterWidth:x,before:ir,beforeHeader:(0,Z.jsx)(Qt,{createPipeline:yt,interruptKernel:Lt,restartKernel:Mt,savePipelineContent:wt,setMessages:it}),beforeHidden:M,beforeMousedownActive:z,beforeWidth:_,mainContainerHeader:ar,mainContainerRef:Be,setAfterHidden:T,setAfterMousedownActive:H,setAfterWidth:y,setBeforeHidden:F,setBeforeMousedownActive:U,setBeforeWidth:P,children:[!Q&&ur,null===Ze||void 0===Ze?void 0:Ze.map((function(e){return(0,Z.jsx)("div",{style:{display:Q===e?null:"none"},children:(0,Z.jsx)(Wt,{active:Q===e,addNewBlock:function(e){Gt(e,nn.length,jn,e.uuid),s.push("/pipelines/".concat(Ne))},filePath:e,pipeline:ft,setFilesTouched:oe})},e)})),(0,Z.jsx)(R.Z,{pb:Math.max(Math.floor(v/2/S.iI),0)})]}),null!==On&&(0,Z.jsx)(Li,{addNewBlockAtIndex:Gt,blockInsertionIndex:On,blocks:nn,loading:!Yn&&null!==yn,selectedBlock:yn,setRecsWindowOpenBlockIdx:Cn,setSelectedBlock:jn,suggestions:Jn,children:null===Jn||void 0===Jn?void 0:Jn.map((function(e,n){return(0,Z.jsx)(Ei,{suggestion:e},"".concat((0,Ce.RA)(e.title),"_").concat(n))}))})]})}Yl.getInitialProps=function(){var e=(0,c.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.slug,Array.isArray(t)&&(r=t[0]),e.abrupt("return",{pipeline:{uuid:r}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Jl=Yl},26039:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[...slug]",function(){return t(81617)}])}},function(e){e.O(0,[3662,4259,240,1125,5506,9668,8952,1374,9774,2888,179],(function(){return n=26039,e(e.s=n);var n}));var n=e.O();_N_E=n}]);