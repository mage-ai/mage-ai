(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{8916:function(e,n,t){"use strict";t.d(n,{FS:function(){return l},JZ:function(){return s},e7:function(){return d},wx:function(){return a}});var r=t(75582),i=t(82394),o=t(30229);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e){return"string"===typeof e?e:JSON.stringify(e)}function a(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return c(c({},e),{},{value:l(n)})}))}function s(e,n){return n===o.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===o.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function d(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,r.Z)(n,2),o=t[0],u=t[1],l=u;try{l=JSON.parse(u)}catch(a){}return c(c({},e),{},(0,i.Z)({},o,l))}),{}):e}},16488:function(e,n,t){"use strict";t.d(n,{IJ:function(){return g},M8:function(){return w},Vx:function(){return O},XM:function(){return P},_U:function(){return h},eI:function(){return j},gU:function(){return y},lO:function(){return I},ri:function(){return b},tL:function(){return x},vJ:function(){return Z},xH:function(){return m}});var r,i=t(82394),o=t(92083),u=t.n(o),c=t(3917),l=t(4383),a=t(30229),s=t(42122),d=t(86735);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function(e){return!!e&&!Object.values(a.U5).includes(e)};function g(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,o=n.started_at,c=n.status,l=null;o&&r&&(l=u()(r).valueOf()-u()(o).valueOf());return f(f({},e),{},(0,i.Z)({},t,{runtime:l,status:c}))}),{})}var v,b=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:a.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:a.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:a.Xm.API}];return e?n.slice(0,1):n};function m(e){var n=(0,s.gR)(e,[a.gm.INTERVAL,a.gm.TYPE]),t=e[a.gm.INTERVAL];t&&(n["schedule_interval[]"]=encodeURIComponent(t));var r=e[a.gm.TYPE];return r&&(n["schedule_type[]"]=r),n}function j(e){if(!e)return null;var n=new Date(u()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function O(e){return"string"!==typeof e?e:j(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(v||(v={}));var x=(r={},(0,i.Z)(r,v.DAY,86400),(0,i.Z)(r,v.HOUR,3600),(0,i.Z)(r,v.MINUTE,60),(0,i.Z)(r,v.SECOND,1),r);function y(e){var n=v.SECOND,t=e;return e%86400===0?(t/=86400,n=v.DAY):e%3600===0?(t/=3600,n=v.HOUR):e%60===0&&(t/=60,n=v.MINUTE),{time:t,unit:n}}function Z(e,n){return e*x[n]}function P(e,n,t){var r="".concat(e.toISOString().split("T")[0]," ").concat(null===n||void 0===n?void 0:n.hour,":").concat(null===n||void 0===n?void 0:n.minute);if(null!==t&&void 0!==t&&t.includeSeconds&&(r=r.concat(":00")),null!==t&&void 0!==t&&t.localTimezone){var i=u()(e);i.set("hour",+(null===n||void 0===n?void 0:n.hour)||0),i.set("minute",+(null===n||void 0===n?void 0:n.minute)||0),i.set("second",0),r=i.format(c.lE),null!==t&&void 0!==t&&t.convertToUtc&&(r=(0,c.d$)(r,{includeSeconds:null===t||void 0===t?void 0:t.includeSeconds,utcFormat:!0}))}return r}function w(e){var n,t="";return t="".concat(window.origin,"/api/pipeline_schedules/").concat(null===e||void 0===e?void 0:e.id,"/pipeline_runs"),null!==e&&void 0!==e&&e.token&&(t="".concat(t,"/").concat(e.token)),(n=window.location.port)&&(t=t.replace(n,l.QT)),t}function k(e,n,t){return e.match(/[*,-/]/)?{additionalOffset:0,cronValue:e}:function(e,n,t){var r=t.indexOf(e),i=0;if(n<0)for(var o=0;o>n;o--)0===r?(r=t.length-1,i-=1):r-=1;else if(n>0)for(var u=0;u<n;u++)r===t.length-1?(r=0,i+=1):r+=1;return{additionalOffset:i,cronValue:String(t[r]||e)}}(+e,n,t)}var _=(0,d.m5)(60),C=(0,d.m5)(24),S=(0,c.Cs)();function I(e,n){if(!e)return e;var t=u()().local().format("Z"),r=t.split(":"),i="-"===t[0],o=3===r[0].length?Number(r[0].slice(1)):Number(r[0]),c=Number(r[1]);(i&&!n||!i&&n)&&(o=-o,c=-c);var l=e.split(" "),a=l[0],s=l[1],d=l[2],p=k(a,c,_),f=k(s,o+p.additionalOffset,C);if(l[0]=p.cronValue,l[1]=f.cronValue,0!==(null===f||void 0===f?void 0:f.additionalOffset)){var h=k(d,f.additionalOffset,S);l[2]=h.cronValue}return l.join(" ")}},70320:function(e,n,t){"use strict";t.d(n,{h:function(){return u},q:function(){return o}});var r=t(78419),i=t(53808);function o(){return(0,i.U2)(r.am,null)||!1}function u(e){return"undefined"!==typeof e&&(0,i.t8)(r.am,e),e}},81066:function(e,n,t){"use strict";t.d(n,{B:function(){return p}});var r=t(82394),i=t(46732),o=t(93369),u=t(72473),c=t(8059),l=t(70515),a=t(28598);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={bold:!0,greyBorder:!0,paddingBottom:9,paddingTop:9};n.Z=function(e){var n=e.addButtonMenuOpen,t=e.addButtonMenuRef,r=e.isLoading,s=e.label,f=e.menuItems,h=e.onClick,g=e.onClickCallback;return(0,a.jsx)(i.Z,{disableKeyboardShortcuts:!0,items:f,onClickCallback:g,onClickOutside:g,open:n,parentRef:t,roundedStyle:!0,topOffset:1,uuid:"Table/Toolbar/NewItemMenu",children:(0,a.jsx)(o.ZP,d(d({},p),{},{background:c.eW,beforeElement:(0,a.jsx)(u.mm,{size:2.5*l.iI}),loading:r,onClick:function(e){e.preventDefault(),null===h||void 0===h||h()},uuid:"shared/AddButton/index",children:s}))})}},55072:function(e,n,t){"use strict";t.d(n,{Et:function(){return p},Q:function(){return d}});t(82684);var r=t(71180),i=t(55485),o=t(38276),u=t(31748),c=t(72473),l=t(79633),a=t(70515),s=t(28598),d=30,p=9;n.ZP=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,p=e.totalPages,f=[],h=t;if(h>p)f=Array.from({length:p},(function(e,n){return n}));else{var g=Math.floor(h/2),v=n-g;n+g>=p?(v=p-h+2,h-=2):n-g<=0?(v=0,h-=2):(h-=4,v=n-Math.floor(h/2)),f=Array.from({length:h},(function(e,n){return n+v}))}return(0,s.jsx)(s.Fragment,{children:p>0&&(0,s.jsxs)(i.ZP,{alignItems:"center",children:[(0,s.jsx)(r.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(c.Hd,{size:1.5*a.iI,stroke:u.Av})}),!f.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!f.includes(1)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),f.map((function(e){return(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{backgroundColor:e===n&&l.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!f.includes(p-1)&&(0,s.jsxs)(s.Fragment,{children:[!f.includes(p-2)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(p-1)},children:p})},p-1)]}),(0,s.jsx)(o.Z,{ml:1}),(0,s.jsx)(r.Z,{disabled:n===p-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(c.Kw,{size:1.5*a.iI,stroke:u.Av})})]})})}},83784:function(e,n,t){"use strict";t.d(n,{C:function(){return r}});var r="global"},82359:function(e,n,t){"use strict";var r,i;t.d(n,{d:function(){return r},k:function(){return i}}),function(e){e.ADD_NEW_BLOCK_V2="add_new_block_v2",e.LOCAL_TIMEZONE="display_local_timezone"}(r||(r={})),function(e){e.MAIN="main",e.STANDALONE="standalone",e.SUB="sub"}(i||(i={}))},46732:function(e,n,t){"use strict";var r=t(82394),i=t(26304),o=(t(82684),t(50724)),u=t(70374),c=t(28598),l=["children","items","open","onClickCallback","onClickOutside","parentRef","uuid","zIndex"];function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.children,t=e.items,r=e.open,a=e.onClickCallback,d=e.onClickOutside,p=e.parentRef,f=e.uuid,h=e.zIndex,g=(0,i.Z)(e,l),v=(0,c.jsxs)("div",{style:{position:"relative",zIndex:(d?3:2)+(h||0)},children:[(0,c.jsx)("div",{ref:p,children:n}),(0,c.jsx)(u.Z,s(s({},g),{},{items:t,onClickCallback:a,open:r,parentRef:p,uuid:f}))]});return d?(0,c.jsx)(o.Z,{onClickOutside:d,open:!0,children:v}):v}},65956:function(e,n,t){"use strict";var r=t(38626),i=t(55485),o=t(38276),u=t(30160),c=t(44897),l=t(42631),a=t(47041),s=t(70515),d=t(28598),p=(0,r.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*s.iI,1.5*s.iI,1.5*s.iI),f=r.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],l.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||c.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||c.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),h=r.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],l.n_,l.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||c.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),p,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),g=r.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*s.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*s.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),v=r.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],l.M8,l.YF,1.75*s.iI);n.Z=function(e){var n=e.borderless,t=e.children,r=e.containerRef,c=e.contentContainerRef,l=e.dark,a=e.footer,s=e.fullHeight,p=void 0===s||s,b=e.fullWidth,m=void 0===b||b,j=e.header,O=e.headerHeight,x=e.headerIcon,y=e.headerPaddingVertical,Z=e.headerTitle,P=e.maxHeight,w=e.maxWidth,k=e.minWidth,_=e.noPadding,C=e.overflowVisible,S=e.subtitle,I=e.success;return(0,d.jsxs)(f,{borderless:n,dark:l,fullHeight:p,fullWidth:m,maxHeight:P,maxWidth:w,minWidth:k,overflowVisible:C,ref:r,success:I,children:[(j||Z)&&(0,d.jsxs)(h,{headerPaddingVertical:y,height:O,children:[j&&j,Z&&(0,d.jsx)(i.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,d.jsxs)(i.ZP,{alignItems:"center",children:[x&&x,(0,d.jsx)(o.Z,{ml:x?1:0,children:(0,d.jsx)(u.ZP,{bold:!0,default:!0,children:Z})})]})})]}),(0,d.jsxs)(g,{maxHeight:P,noPadding:_,overflowVisible:C,ref:c,children:[S&&(0,d.jsx)(o.Z,{mb:2,children:(0,d.jsx)(u.ZP,{default:!0,children:S})}),t]}),a&&(0,d.jsx)(v,{children:a})]})}},72191:function(e,n,t){"use strict";t.d(n,{_k:function(){return o},bL:function(){return i},l2:function(){return u}});var r=t(70515),i=(r.iI,2*r.iI),o=2.5*r.iI,u=3*r.iI},23706:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return fe}});var r=t(77837),i=t(75582),o=t(82394),u=t(38860),c=t.n(u),l=t(12691),a=t.n(l),s=t(82684),d=t(69864),p=t(34376),f=t(17586),h=t(15338),g=t(48670),v=t(55072),b=t(75457),m=t(30229),j=t(93808),O=t(82359),x=t(71180),y=t(55485),Z=t(85854),P=t(65956),w=t(38276),k=t(75499),_=t(30160),C=t(35576),S=t(17488),I=t(69650),E=t(44897),D=t(38626),N=t(42631),T=t(70515),M=D.default.div.withConfig({displayName:"indexstyle__ToggleStyle",componentId:"sc-f9kt7n-0"})(["padding:","px ","px;border-radius:","px;",""],1.5*T.iI,2*T.iI,N.n_,(function(e){return"\n    border: 1px solid ".concat((e.theme||E.Z).borders.light,";\n    background-color: ").concat((e.theme||E.Z).background.popup,";\n  ")})),V=t(81728),A=t(8916),R=t(28598);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B="".concat(T.iI,"px ").concat(3*T.iI,"px");var U=function(e){var n=e.initialPipelineSchedulePayload,t=e.onCancel,r=e.onSuccess,u=e.variables,c=(0,s.useState)(!1),l=c[0],a=c[1],d=(0,s.useState)({}),p=d[0],f=d[1],h=(0,s.useState)(u||{}),g=h[0],v=h[1],b=(0,s.useMemo)((function(){return L(L({},n),{},{name:(0,V.Y6)(),variables:l?(0,A.e7)(g):null})}),[n,l,g]),m=function(e,n){var t={borderless:!0,key:"variable_uuid_input_".concat(e),monospace:!0,onChange:function(n){n.preventDefault(),v((function(t){return L(L({},t),{},(0,o.Z)({},e,n.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:n};return p[e]?(0,R.jsx)(C.Z,L(L({},t),{},{rows:1,value:n})):(0,R.jsx)(S.Z,L({},t))};return(0,s.useEffect)((function(){var e=Object.entries(g).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],u=t[1],c=(0,V.Pb)(u)&&"object"===typeof JSON.parse(u)&&!Array.isArray(JSON.parse(u))&&null!==JSON.parse(u);return L(L({},e),{},(0,o.Z)({},r,c))}),{});f(e)}),[]),(0,R.jsxs)(P.Z,{footer:(0,R.jsxs)(y.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,R.jsx)(x.Z,{onClick:function(){r({pipeline_schedule:b}),t()},padding:B,primaryAlternate:!0,children:"Run now"}),(0,R.jsx)(w.Z,{mr:1}),(0,R.jsx)(x.Z,{borderColor:E.Z.background.page,onClick:t,padding:B,secondary:!0,children:"Cancel"})]}),header:(0,R.jsx)(Z.Z,{level:5,children:"Run pipeline now"}),maxHeight:"90vh",minWidth:85*T.iI,subtitle:"Creates a new trigger and immediately runs the current pipeline once.",children:[(0,R.jsx)(M,{children:(0,R.jsxs)(y.ZP,{alignItems:"center",children:[(0,R.jsx)(w.Z,{mr:2,children:(0,R.jsx)(I.Z,{checked:l,onCheck:a})}),(0,R.jsx)(_.ZP,{bold:!0,large:!0,children:"Overwrite runtime variables"})]})}),l&&g&&Object.entries(g).length>0&&(0,R.jsx)(w.Z,{mt:2,children:(0,R.jsx)(k.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(g).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,R.jsx)(_.ZP,{default:!0,monospace:!0,children:t},"variable_".concat(t)),m(t,r)]}))})})]})},F=t(47041),W=D.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],E.Z.borders.medium,T.tr),Y=D.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],F.w5),X=D.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],E.Z.background.output,N.n_,T.iI,T.tr),z=t(79633);var J=function(e){var n=e.hasOverride,t=e.scheduleType,r=e.variables,o=e.variablesOverride,u=[];return Object.entries(r).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],c=null===o||void 0===o?void 0:o[t];u.push({uuid:t,value:(0,A.FS)(c||r)})})),(0,A.JZ)(u,t),(0,R.jsxs)(W,{children:[(0,R.jsx)(w.Z,{mb:2,children:(0,R.jsxs)(_.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,R.jsx)(Y,{noScrollbarTrackBackground:!0,children:r&&u.map((function(e){var n=e.uuid,t=e.value;return(0,R.jsxs)(X,{children:[(0,R.jsx)(_.ZP,{monospace:!0,small:!0,children:n}),(0,R.jsx)(_.ZP,{color:z.Or,monospace:!0,small:!0,children:(0,A.FS)(t)})]})}))})]})},Q=t(4190),q=t(85544),G=t(31743),K=t(35686),$=t(83784),ee=t(28795),ne=t(3917),te=t(69419),re=t(16488),ie=t(86735),oe=t(42122),ue=t(50178),ce=t(72619),le=t(70320),ae=t(89538);function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function de(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function pe(e){var n=e.pipeline,t=(0,p.useRouter)(),r=(0,ue.Ct)(),u=n.uuid,c=(0,s.useState)(null),l=c[0],j=c[1],x=K.ZP.projects.list().data,y=(0,s.useMemo)((function(){var e;return null===x||void 0===x||null===(e=x.projects)||void 0===e?void 0:e[0]}),[x]),Z=((0,s.useMemo)((function(){var e;return(0,le.h)(null===y||void 0===y||null===(e=y.features)||void 0===e?void 0:e[O.d.LOCAL_TIMEZONE])}),[null===y||void 0===y?void 0:y.features]),K.ZP.variables.pipelines.list(u,{global_only:!0},{revalidateOnFocus:!1}).data),P=null===Z||void 0===Z?void 0:Z.variables,k=(0,te.iV)(),C=(0,te.DQ)(k,[m.gm.INTERVAL,m.gm.STATUS,m.gm.TAG,m.gm.TYPE]),S=(0,re.xH)(C),I=null!==k&&void 0!==k&&k.page?k.page:0,E=K.ZP.pipeline_schedules.pipelines.list(u,de(de({},S),{},{_limit:v.Q,_offset:(null!==k&&void 0!==k&&k.page?k.page:0)*v.Q}),{refreshInterval:7500}),D=E.data,N=E.mutate,M=(0,s.useMemo)((function(){return(null===D||void 0===D?void 0:D.pipeline_schedules)||[]}),[D]),H=function(e){return(0,d.Db)(K.ZP.pipeline_schedules.pipelines.useCreate(u),{onSuccess:function(n){return(0,ce.wD)(n,{callback:function(n){var t=n.pipeline_schedule.id;null===e||void 0===e||e(t)},onErrorCallback:function(e,n){return j({errors:n,response:e})}})}})},L=H((function(e){return t.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(e,"/edit"))})),B=(0,i.Z)(L,2),F=B[0],W=B[1].isLoading,Y=H(N),X=(0,i.Z)(Y,2),z=X[0],se=X[1].isLoading,pe=(0,s.useMemo)((function(){var e;return null===(e=(0,A.wx)(P,(function(e){return e.uuid===$.C})))||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid,r=n.value;return de(de({},e),{},(0,o.Z)({},t,r))}),{})}),[P]),fe=(0,s.useMemo)((function(){return{name:(0,V.Y6)(),schedule_interval:m.U5.ONCE,schedule_type:m.Xm.TIME,start_time:(0,ne.d$)((new Date).toISOString(),{dayAgo:!0,utcFormat:!0}),status:m.fq.ACTIVE}}),[]),he=(0,ae.dd)((function(){return(0,R.jsx)(U,{initialPipelineSchedulePayload:fe,onCancel:be,onSuccess:z,variables:pe})}),{},[P,pe],{background:!0,uuid:"run_pipeline_now_popup"}),ge=(0,i.Z)(he,2),ve=ge[0],be=ge[1],me=(0,s.useState)(),je=me[0],Oe=me[1],xe=(0,s.useMemo)((function(){var e=null===je||void 0===je?void 0:je.variables,n=!(0,oe.Qr)(e),t=n?null===je||void 0===je?void 0:je.variables:(0,oe.Qr)(pe)?null:pe;return function(i){var o=i.height-(t?151:80);return(0,R.jsxs)(R.Fragment,{children:[t&&(0,R.jsx)(J,{hasOverride:n,scheduleType:null===je||void 0===je?void 0:je.schedule_type,variables:pe,variablesOverride:e}),!t&&(0,R.jsxs)(w.Z,{p:T.cd,children:[(0,R.jsx)(_.ZP,{children:"This pipeline has no runtime variables."}),!r&&(0,R.jsxs)(w.Z,{mt:1,children:[(0,R.jsx)(a(),{as:"/pipelines/".concat(u,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,R.jsx)(g.Z,{primary:!0,children:"Click here"})})," ",(0,R.jsx)(_.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,R.jsx)(f.Z,de(de({},i),{},{height:o,noStatus:!0}))]})}}),[r,u,null===je||void 0===je?void 0:je.schedule_type,null===je||void 0===je?void 0:je.variables,pe]),ye=(0,s.useMemo)((function(){var e;return(null===D||void 0===D||null===(e=D.metadata)||void 0===e?void 0:e.count)||[]}),[D]),Ze=K.ZP.pipeline_triggers.pipelines.list(u).data,Pe=(0,s.useMemo)((function(){return(0,ie.HK)((null===Ze||void 0===Ze?void 0:Ze.pipeline_triggers)||[],(function(e){return e.name}))}),[Ze]),we=K.ZP.tags.list().data,ke=(0,s.useMemo)((function(){return(0,ie.YC)((null===we||void 0===we?void 0:we.tags)||[],(function(e){return e.uuid}))}),[we]),_e=(0,s.useMemo)((function(){return(0,R.jsx)(q.Z,{addButtonProps:{isLoading:W,label:"New trigger",onClick:function(){return F({pipeline_schedule:{name:(0,V.Y6)()}})}},filterOptions:{frequency:Object.values(m.U5),status:Object.values(m.fq),tag:ke.map((function(e){return e.uuid})),type:Object.values(m.Xm)},filterValueLabelMapping:{tag:ke.reduce((function(e,n){var t=n.uuid;return de(de({},e),{},(0,o.Z)({},t,t))}),{}),type:m.Z4},onClickFilterDefaults:function(){t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(u,"/triggers"))},query:C,secondaryButtonProps:{disabled:r,isLoading:se,label:"Run @once",onClick:(0,oe.Qr)(pe)?function(){return z({pipeline_schedule:fe})}:ve,tooltip:"Creates an @once trigger and runs pipeline immediately"},showDivider:!0})}),[F,z,W,se,r,fe,u,C,t,ve,ke,pe]);return(0,R.jsxs)(b.Z,{breadcrumbs:[{label:function(){return"Triggers"}}],buildSidekick:xe,errors:l,pageName:ee.M.TRIGGERS,pipeline:n,setErrors:j,subheader:_e,title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(ee.M.TRIGGERS,"_").concat(u),children:[(0,R.jsx)(h.Z,{light:!0}),D?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(G.Z,{fetchPipelineSchedules:N,pipeline:n,pipelineSchedules:M,pipelineTriggersByName:Pe,selectedSchedule:je,setErrors:j,setSelectedSchedule:Oe}),(0,R.jsx)(w.Z,{p:2,children:(0,R.jsx)(v.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),r=de(de({},k),{},{page:n>=0?n:0});t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(u,"/triggers?").concat((0,te.uM)(r)))},page:Number(I),totalPages:Math.ceil(ye/v.Q)})})]}):(0,R.jsx)(w.Z,{m:2,children:(0,R.jsx)(Q.Z,{inverted:!0})})]})}pe.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var fe=(0,j.Z)(pe)},40183:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return t(23706)}])}},function(e){e.O(0,[844,9902,426,6358,9696,8264,5499,1845,5457,7586,1743,3951,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);