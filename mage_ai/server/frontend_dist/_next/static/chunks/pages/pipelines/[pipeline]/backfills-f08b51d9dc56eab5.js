(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return s},Vx:function(){return d},eI:function(){return f},gU:function(){return b},tL:function(){return p},vJ:function(){return v}});var r,i,u=t(82394),c=t(92083),o=t.n(c);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,i=n.started_at,c=n.status,l=null;i&&r&&(l=o()(r).valueOf()-o()(i).valueOf());return a(a({},e),{},(0,u.Z)({},t,{runtime:l,status:c}))}),{})}function f(e){if(!e)return null;var n=new Date(o()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function d(e){return"string"!==typeof e?e:f(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(i||(i={}));var p=(r={},(0,u.Z)(r,i.DAY,86400),(0,u.Z)(r,i.HOUR,3600),(0,u.Z)(r,i.MINUTE,60),(0,u.Z)(r,i.SECOND,1),r);function b(e){var n=i.SECOND,t=e;return e%86400===0?(t/=86400,n=i.DAY):e%3600===0?(t/=3600,n=i.HOUR):e%60===0&&(t/=60,n=i.MINUTE),{time:t,unit:n}}function v(e,n){return e*p[n]}},43526:function(e,n,t){"use strict";t.d(n,{I7:function(){return r},IB:function(){return l},VV:function(){return u},_7:function(){return c},rn:function(){return o}});var r,i=t(66050),u="datetime",c="code",o=i.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(r||(r={}));var l=[r.MINUTE,r.HOUR,r.DAY,r.WEEK,r.MONTH,r.YEAR,r.CUSTOM]},66050:function(e,n,t){"use strict";var r;t.d(n,{V:function(){return r}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running"}(r||(r={}))},47409:function(e,n,t){"use strict";t.d(n,{Az:function(){return o},BF:function(){return c},Do:function(){return a},VO:function(){return u},sZ:function(){return l}});var r,i=t(82394),u=t(66050).V,c=[u.INITIAL,u.RUNNING],o=[u.CANCELLED,u.COMPLETED,u.FAILED],l="__mage_variables",a=(r={},(0,i.Z)(r,u.CANCELLED,"Cancelled"),(0,i.Z)(r,u.COMPLETED,"Done"),(0,i.Z)(r,u.FAILED,"Failed"),(0,i.Z)(r,u.INITIAL,"Ready"),(0,i.Z)(r,u.RUNNING,"Running"),r)},30206:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(77837),i=t(75582),u=t(38860),c=t.n(u),o=t(82684),l=t(83455),a=t(34376),s=t(12691),f=t.n(s),d=t(43526),p=t(60328),b=t(10919),v=t(58180),O=t(19711),m=t(10503),h=t(47409),E=t(49125),g=t(19395),k=t(9736),_=t(28598);var j=function(e){var n=e.models,t=e.onClickRow,r=e.pipeline,i=e.selectedRow,u=(0,k.Ct)(),c=null===r||void 0===r?void 0:r.uuid,o=[{uuid:"Status"},{uuid:"Name"},{uuid:"Type"},{uuid:"Runs"},{uuid:"Backfill"},{uuid:"Started at"},{uuid:"Completed at"}];return u||o.push({label:function(){return""},uuid:"edit"}),(0,_.jsx)(v.Z,{columnFlex:[null,1,null,null,null,1,1,null],columns:o,isSelectedRow:function(e){return n[e].id===(null===i||void 0===i?void 0:i.id)},onClickRow:function(e){return t(n[e])},rows:n.map((function(e,n){var t=e.block_uuid,r=e.completed_at,i=e.end_datetime,o=e.id,l=e.name,a=e.start_datetime,s=e.started_at,v=e.status,k=e.total_run_count,j=[(0,_.jsx)(O.ZP,{default:!0,monospace:!0,children:v||"inactive"},"status"),(0,_.jsx)(f(),{as:"/pipelines/".concat(c,"/backfills/").concat(o),href:"/pipelines/[pipeline]/backfills/[...slug]",passHref:!0,children:(0,_.jsx)(b.Z,{bold:!0,sameColorAsText:!0,children:l})},"name"),(0,_.jsx)(O.ZP,{default:!0,monospace:!0,children:t?d._7:d.VV},"type"),(0,_.jsx)(O.ZP,{default:!0,monospace:!0,children:k||0},"runs"),(0,_.jsxs)(O.ZP,{default:!0,monospace:!0,children:[a&&i&&(0,_.jsxs)(_.Fragment,{children:[(0,g.Vx)(a),"\xa0-\xa0",(0,g.Vx)(i)]}),!(a&&i)&&"-"]},"backfill"),(0,_.jsx)(O.ZP,{default:!0,monospace:!0,children:s?(0,g.Vx)(s):"-"},"started_at"),(0,_.jsx)(O.ZP,{default:!0,monospace:!0,children:r?(0,g.Vx)(r):"-"},"completed_at")];return u||j.push((0,_.jsx)(p.Z,{default:!0,disabled:v===h.VO.COMPLETED,iconOnly:!0,linkProps:{as:"/pipelines/".concat(c,"/backfills/").concat(o,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noBackground:!0,title:"Edit",children:(0,_.jsx)(m.I8,{default:!0,size:2*E.iI})},"".concat(n,"_edit_button"))),j})),uuid:"pipeline-runs"})},P=t(11135),y=t(60547),w=t(41788),D=t(86673),N=t(82531),Z=t(59920),C=t(33766),I=t(96510),x=t(59e3),A=t(90211);function L(e){var n=e.pipeline,t=(0,a.useRouter)(),r=n.uuid,u=N.ZP.backfills.list({_limit:20,_offset:0,include_run_count:!0,pipeline_uuid:r},{refreshInterval:6e4}),c=u.data,s=(u.mutate,(0,o.useMemo)((function(){return(null===c||void 0===c?void 0:c.backfills)||[]}),[c])),f=(0,x.iV)(),d=(0,o.useState)(null),p=d[0],b=d[1],v=(0,o.useState)(null),h=v[0],g=v[1];(0,o.useEffect)((function(){null!==f&&void 0!==f&&f.backfill_id?b(null===s||void 0===s?void 0:s.find((function(e){return e.id===Number(f.backfill_id)}))):p&&b(null)}),[s,f,p]);var k=(0,o.useMemo)((function(){var e="/pipelines/".concat(r,"/backfills"),n=[{label:function(){return"Backfills"},linkProps:p?{as:e,href:"/pipelines/[pipeline]/backfills"}:null}];return p&&n.push({label:function(){return p.name}}),n}),[p]),w=(0,l.Db)(N.ZP.backfills.pipelines.useCreate(r),{onSuccess:function(e){return(0,I.wD)(e,{callback:function(e){var n=e.backfill.id;t.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(r,"/backfills/").concat(n,"/edit"))},onErrorCallback:function(e,n){return g({errors:n,response:e})}})}}),L=(0,i.Z)(w,2),S=L[0],T=L[1].isLoading;return(0,_.jsxs)(y.Z,{breadcrumbs:k,errors:h,pageName:Z.M.BACKFILLS,pipeline:n,setErrors:g,title:function(e){var n=e.name;return"".concat(n," backfills")},uuid:"".concat(Z.M.BACKFILLS,"_").concat(r),children:[(0,_.jsx)(D.Z,{p:E.cd,children:(0,_.jsx)(P.ZP,{beforeElement:(0,_.jsx)(m.mm,{size:2.5*E.iI}),blackBorder:!0,inline:!0,loading:T,noHoverUnderline:!0,onClick:function(){return S({backfill:{name:(0,A.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/Backfills/add_new_backfill",children:"Create new backfill"})}),s&&0===s.length&&(0,_.jsx)(D.Z,{p:E.cd,children:(0,_.jsx)(O.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No backfills available"})}),(null===s||void 0===s?void 0:s.length)>=1&&(0,_.jsx)(j,{models:s,onClickRow:function(e){var n=e.id;return(0,C.u7)({backfill_id:n})},pipeline:n,selectedRow:p})]})}L.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var S=(0,w.Z)(L)},33766:function(e,n,t){"use strict";t.d(n,{O2:function(){return f},g_:function(){return p},u7:function(){return d}});var r=t(75582),i=t(82394),u=t(34376),c=t.n(u),o=t(59e3),l=t(24224);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f="_offset";function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.preserveParams,i=n.pushHistory,u=n.replaceParams,l=(0,o.iV)(),a={};t&&t.forEach((function(e){l[e]&&(a[e]=l[e])}));var f,d=u?a:l;f=window.location.pathname;var p=i?c().push:c().replace,b=s(s({},d),e);Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];"undefined"!==typeof i&&null!==i||delete b[t]}));var v=(0,o.uM)(b);v.length>=1&&(v="?".concat(v));var O="".concat(f.split("?")[0]).concat(v);return p(c().router.pathname,O,{shallow:!0})}function p(e,n,t){var i=t.addingMultipleValues,u=t.isList,c=t.itemsPerPage,o=t.pushHistory,a=void 0!==o&&o,p=t.resetLimitParams,b=s({},e);i?Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];if(Array.isArray(i)){var u="".concat(t,"[]");b[u]=i.map(String)}})):u?Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],u=String(i),c="".concat(t,"[]"),o=b[c];o&&Array.isArray(o)?(o=o.map(String)).includes(u)?b[c]=(0,l.Od)(o,(function(e){return e===u})):b[c]=o.concat(u):b[c]=[u]})):b=s(s({},b),n),p&&(b._limit=c||20,b[f]=0),d(b,{pushHistory:a})}},37459:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills",function(){return t(30206)}])}},function(e){e.O(0,[844,7607,1424,1005,8180,547,9774,2888,179],(function(){return n=37459,e(e.s=n);var n}));var n=e.O();_N_E=n}]);