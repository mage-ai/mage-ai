(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6780],{28358:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(82684),r=t(60328),l=t(10919),s=t(86673),a=t(19711),c=t(10503),u=t(9518),o=t(23831),d=t(73942),p=t(49125),f=t(37391),v=u.default.div.withConfig({displayName:"indexstyle__ErrorPopupStyle",componentId:"sc-aqfw6f-0"})(["top:50%;left:50%;transform:translate(-50%,-50%);max-height:95vh;max-width:95vw;overflow:auto;padding:","px;position:fixed;z-index:9999;border-radius:","px;"," ",""],p.iI*p.cd,d.n_,(function(e){return"\n    background-color: ".concat((e.theme||o.Z).background.page,";\n    border: 1px solid ").concat((e.theme||o.Z).accent.negative,";\n    box-shadow: ").concat((e.theme||o.Z).shadow.window,";\n  ")}),f.w5),h=u.default.div.withConfig({displayName:"indexstyle__CloseButtonContainerStyle",componentId:"sc-aqfw6f-1"})(["display:flex;justify-content:flex-end;position:sticky;top:0;"]),b=t(28598);var m=function(e){var n,t,u=e.displayMessage,o=e.errors,d=e.links,p=e.onClose,f=e.response,m=(0,i.useState)(!1),j=m[0],x=m[1],g=(0,i.useState)(!1),Z=g[0],y=g[1],k=(o||{}).messages,O=(null===f||void 0===f?void 0:f.error)||{},_=O.errors,P=O.exception,w=O.message,I=u,S=k;return w?S=w.split("\n"):!I&&null!==(n=S)&&void 0!==n&&n[0]&&(I=S[0],S=null),(0,b.jsxs)(v,{children:[(0,b.jsx)(h,{children:(0,b.jsx)(r.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:p,title:"Close errors",children:(0,b.jsx)(c.x8,{})})}),(0,b.jsx)(a.ZP,{bold:!0,large:!0,children:"Error"}),I&&(0,b.jsx)(s.Z,{mt:1,children:(0,b.jsx)(a.ZP,{default:!0,children:I})}),P&&(0,b.jsx)(s.Z,{mt:1,children:(0,b.jsx)(a.ZP,{default:!0,disableWordBreak:!0,monospace:!0,children:P})}),(null===(t=S)||void 0===t?void 0:t.length)>0&&(0,b.jsxs)(s.Z,{mt:2,children:[(0,b.jsxs)(a.ZP,{bold:!0,large:!0,children:["Traceback (",(0,b.jsxs)(l.Z,{onClick:function(){return y((function(e){return!e}))},preventDefault:!0,warning:!0,children:[Z?"hide":"show"," traceback"]}),")"]}),Z&&(0,b.jsx)(s.Z,{mt:1,children:S.map((function(e){return(0,b.jsx)(a.ZP,{dangerouslySetInnerHTML:{__html:e.replaceAll(" ","&nbsp;")},default:!0,disableWordBreak:!0,monospace:!0},e)}))})]}),_&&(0,b.jsxs)(s.Z,{mt:2,children:[(0,b.jsxs)(a.ZP,{bold:!0,large:!0,children:["Stack trace (",(0,b.jsxs)(l.Z,{onClick:function(){return x((function(e){return!e}))},preventDefault:!0,warning:!0,children:[j?"hide":"show"," stack trace"]}),")"]}),j&&(0,b.jsx)(s.Z,{mt:1,children:_.map((function(e){return(0,b.jsx)(a.ZP,{dangerouslySetInnerHTML:{__html:e.replaceAll(" ","&nbsp;")},default:!0,disableWordBreak:!0,monospace:!0},e)}))})]}),null===d||void 0===d?void 0:d.map((function(e,n){var t=e.label,i=e.onClick;return(0,b.jsx)(s.Z,{mt:2,children:(0,b.jsx)(l.Z,{large:!0,onClick:i,underline:!0,warning:!0,children:t})},t)}))]})}},56681:function(e,n,t){"use strict";t.d(n,{G:function(){return g},Z:function(){return Z}});var i=t(75582),r=t(82394),l=t(26304),s=t(32316),a=t(22673),c=t(86532),u=t(86673),o=t(19711),d=t(87815),p=t(49125),f=t(19395),v=t(28598),h=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j={uuid:"Run details"},x={uuid:"Dependency tree"},g=[x,j];function Z(e){var n=e.height,t=e.heightOffset,r=e.pipeline,b=e.selectedRun,Z=e.selectedTab,y=e.setSelectedTab,k=m({},(0,l.Z)(e,h));b?k.blockStatus=(0,f.IJ)(null===b||void 0===b?void 0:b.block_runs):k.noStatus=!0;var O=(null===b||void 0===b?void 0:b.variables)||{};null!==b&&void 0!==b&&b.event_variables&&(O.event=b.event_variables);var _=[];O&&JSON.stringify(O,null,2).split("\n").forEach((function(e){_.push("    ".concat(e))}));var P=b&&[["Run ID",null===b||void 0===b?void 0:b.id],["Variables",(0,v.jsx)(a.Z,{language:"json",small:!0,source:_.join("\n")})]],w=b&&(0,v.jsx)(u.Z,{pb:p.cd,px:p.cd,children:(0,v.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:P.map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,v.jsx)(o.ZP,{monospace:!0,muted:!0,children:t}),(0,v.jsx)(o.ZP,{monospace:!0,textOverflow:!0,children:r})]})),uuid:"LogDetail"})}),I=Z&&y;return(0,v.jsxs)(v.Fragment,{children:[I&&(0,v.jsx)(u.Z,{py:p.cd,children:(0,v.jsx)(s.Z,{onClickTab:y,selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:g})}),(!I||x.uuid===(null===Z||void 0===Z?void 0:Z.uuid))&&(0,v.jsx)(c.Z,m(m({},k),{},{height:n,heightOffset:(t||0)+(I?76:0),pipeline:r})),j.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&w]})}},58122:function(e,n,t){"use strict";t.d(n,{CL:function(){return f},FS:function(){return v},JZ:function(){return b},e7:function(){return m},v0:function(){return p},wx:function(){return h}});var i=t(75582),r=t(82394),l=t(43313),s=t(93348),a=t(1286),c=t(90211),u=t(84779);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e){var n=e.statistics,t=Object.keys(n),i=Array(l.Dy.length).fill(0);return 0===t.length?null:(t.forEach((function(e){if(l.Dy.includes(e)){var t=l.CC[e],r=n[e],s=r,a=!1,c=[2,3],o=l.Ub[e],d=l.oH[e],p=l.OD[e];if(l.y_.includes(e))a=!0,c=[2,1,2];else if(e in l.Sq){r=(0,u.Jw)(r,0);var f=l.Sq[e];s=n[f]}var v={columnFlexNumbers:c,name:t,progress:a,rate:s,successDirection:d,warning:p};l.y_.includes(e)||(v.value=r),i[o]=v}})),i)}function f(e){var n=e.columnTypes,t=void 0===n?{}:n,i=e.statistics,r=Object.keys(i);if(0===r.length)return null;var s=Object.values(t),u=s.length,o=[];o.push({name:"Column count",successDirection:l.oH.column_count,value:(0,c.x6)(u)}),r.forEach((function(e){if(l.Zu.includes(e)){var n=l.CC[e],t=i[e],r=l.OD[e];o.push({name:n,successDirection:l.oH[e],value:(0,c.x6)(t),warning:r})}}));var d=(0,a.QO)(s),p=d.countCategory,f=d.countDatetime,v=d.countNumerical;return o.push({name:"Categorical Features",rate:p/u,value:(0,c.x6)(p)},{name:"Numerical Features",rate:v/u,value:(0,c.x6)(v)},{name:"Datetime Features",rate:f/u,value:(0,c.x6)(f)}),o}function v(e){return"string"===typeof e?e:JSON.stringify(e)}function h(e,n){var t,i;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(i=t.variables)||void 0===i?void 0:i.map((function(e){var n=e.value;return d(d({},e),{},{value:v(n)})}))}function b(e,n){return n===s.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===s.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function m(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,i.Z)(n,2),l=t[0],s=t[1],a=s;try{a=JSON.parse(s)}catch(c){}return d(d({},e),{},(0,r.Z)({},l,a))}),{}):e}},43526:function(e,n,t){"use strict";t.d(n,{I7:function(){return i},IB:function(){return c},VV:function(){return l},_7:function(){return s},rn:function(){return a}});var i,r=t(66050),l="datetime",s="code",a=r.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(i||(i={}));var c=[i.SECOND,i.MINUTE,i.HOUR,i.DAY,i.WEEK,i.MONTH,i.YEAR,i.CUSTOM]},22673:function(e,n,t){"use strict";var i=t(82684),r=t(73199),l=t.n(r),s=t(71593),a=t(9518),c=t(65292),u=t(23831),o=t(2005),d=t(49125),p=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,r=e.showLineNumbers,f=e.small,v=e.source,h=e.wrapLines,b=(0,i.useContext)(a.ThemeContext);return(0,p.jsx)(l(),{source:v,renderers:{code:function(e){var i=e.value;return(0,p.jsx)(s.Z,{customStyle:{backgroundColor:(b.background||u.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:o.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,paddingBottom:2*d.iI,paddingTop:2*d.iI,maxWidth:t},lineNumberStyle:{color:(b.content||u.Z.content).muted},language:n,showLineNumbers:r,style:c._4,useInlineStyles:!0,wrapLines:h,children:i})}}})}},12625:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return te}});var i=t(75582),r=t(77837),l=t(82394),s=t(38860),a=t.n(s),c=t(82684),u=t(83455),o=t(34376),d=t(43526),p=t(60328),f=t(34744),v=t(67971),h=t(87372),b=t(51099),m=t(2626),j=t(97496),x=t(47409),g=t(55378),Z=t(86673),y=t(87815),k=t(19711),O=t(82531),_=t(56681),P=t(10503),w=t(2850),I=t(49125),S=t(59920),D=t(90211),C=t(58122),E=t(33766),N=t(7715),T=t(96510),M=t(66653),L=t(59e3),A=t(28598);function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=function(e){var n=e.backfill,t=e.fetchBackfill,r=e.pipeline,l=e.variables,s=(0,o.useRouter)(),a=n||{},F=a.block_uuid,U=a.end_datetime,R=a.id,H=a.interval_type,V=a.interval_units,z=a.name,Y=a.pipeline_run_dates,W=a.start_datetime,q=a.status,J=a.total_run_count,G=a.variables,K=void 0===G?{}:G,X=r.uuid,Q=(0,L.iV)(),$={_limit:40,_offset:40*(null!==Q&&void 0!==Q&&Q.page?Q.page:0)};null!==Q&&void 0!==Q&&Q.status&&($.status=Q.status);var ee=O.ZP.pipeline_runs.list(B(B({},$),{},{backfill_id:R,order_by:["id DESC"]}),{refreshInterval:3e3,revalidateOnFocus:!0},{pauseFetch:!R}),ne=ee.data,te=ee.mutate,ie=!(W&&U&&H&&V),re=!q,le=(0,c.useMemo)((function(){return(re?Y:null===ne||void 0===ne?void 0:ne.pipeline_runs)||[]}),[ne,Y,re]),se=(0,c.useMemo)((function(){var e;return(null===ne||void 0===ne||null===(e=ne.metadata)||void 0===e?void 0:e.count)||[]}),[ne]),ae=(0,c.useState)(null),ce=ae[0],ue=ae[1],oe=(0,c.useMemo)((function(){var e=null!==Q&&void 0!==Q&&Q.page?Q.page:0;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.Z,{disableRowSelect:re,emptyMessage:null!==Q&&void 0!==Q&&Q.status?"No runs available":'No runs available. Please complete backfill configuration by clicking "Edit backfill" above.',fetchPipelineRuns:te,onClickRow:function(e){return ue((function(n){var t=le[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:le,selectedRun:ce}),(0,A.jsx)(Z.Z,{p:2,children:(0,A.jsx)(b.Z,{page:Number(e),maxPages:9,onUpdate:function(e){var n=Number(e),t=B(B({},Q),{},{page:n>=0?n:0});s.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(X,"/triggers/").concat(R,"?").concat((0,L.uM)(t)))},totalPages:Math.ceil(se/40)})})]})}),[te,r,le,ce]),de=(0,c.useState)(_.G[0]),pe=de[0],fe=de[1],ve=(0,u.Db)(O.ZP.backfills.useUpdate(R),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){t(),te()},onErrorCallback:function(e,n){return console.log(n,e)}})}}),he=(0,i.Z)(ve,2),be=he[0],me=he[1].isLoading,je=(0,c.useMemo)((function(){return!!q&&(d.rn.CANCELLED!==q&&d.rn.FAILED!==q)}),[q]),xe=(0,c.useMemo)((function(){return q&&d.rn.CANCELLED!==q&&d.rn.FAILED!==q&&d.rn.INITIAL!==q&&d.rn.RUNNING!==q}),[q]),ge=(0,c.useMemo)((function(){var e={default:!0,size:1.5*I.iI},n=[[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.VW,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Backfill type"})]},"backfill_type_label"),(0,A.jsx)(k.ZP,{monospace:!0,children:F?d._7:d.VV},"backfill_type")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.rs,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Status"})]},"backfill_status_label"),(0,A.jsx)(k.ZP,{danger:d.rn.CANCELLED===q||d.rn.FAILED==q,default:d.rn.INITIAL===q,monospace:!0,muted:!q,success:d.rn.RUNNING===q||d.rn.COMPLETED===q,children:q||"inactive"},"backfill_status")]];return F||n.push.apply(n,[[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.aw,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Start date and time"})]},"backfill_start_date_label"),(0,A.jsx)(k.ZP,{monospace:!0,children:W},"backfill_start_date")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.aw,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"End date and time"})]},"backfill_end_date_label"),(0,A.jsx)(k.ZP,{monospace:!0,children:U},"backfill_end_date")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.Pf,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Interval type"})]},"interval_type_label"),(0,A.jsx)(k.ZP,{monospace:!0,children:H&&(0,D.kC)(H)},"interval_type")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.Pf,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Interval units"})]},"interval_units_label"),(0,A.jsx)(k.ZP,{monospace:!0,children:V},"interval_units")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.qZ,B({},e)),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Total runs"})]},"total_runs_label"),(0,A.jsx)(k.ZP,{monospace:!0,children:J},"total_runs")]]),(0,A.jsx)(y.Z,{columnFlex:[null,1],rows:n})}),[F,U,H,V,je,W,q]),Ze=(0,c.useMemo)((function(){return K||{}}),[K]),ye=(0,c.useMemo)((function(){var e,n=[];return(0,N.Qr)(Ze)?n=(0,C.wx)(l,(function(e){return"global"===e.uuid})):Object.entries(Ze).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],l=t[1];n.push({uuid:r,value:(0,C.FS)(l)})})),"undefined"!==typeof n&&null!==(e=n)&&void 0!==e&&e.length?(0,A.jsx)(y.Z,{columnFlex:[null,1],rows:n.map((function(e){var n=e.uuid,t=e.value;return[(0,A.jsx)(k.ZP,{default:!0,monospace:!0,small:!0,children:n},"settings_variable_label_".concat(n)),(0,A.jsx)(k.ZP,{monospace:!0,small:!0,children:t},"settings_variable_".concat(n))]}))}):null}),[Ze,l]);return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(m.Z,{afterHidden:!ce,before:(0,A.jsxs)(w.M,{children:[(0,A.jsxs)(Z.Z,{mb:I.HN,pt:I.cd,px:I.cd,children:[(0,A.jsx)(Z.Z,{mb:I.cd,children:(0,A.jsx)(P.yg,{size:5*I.iI})}),(0,A.jsx)(h.Z,{children:z})]}),(0,A.jsx)(Z.Z,{px:I.cd,children:(0,A.jsx)(h.Z,{level:5,children:"Settings"})}),(0,A.jsx)(f.Z,{light:!0,mt:1,short:!0}),ge,ye&&(0,A.jsxs)(Z.Z,{my:I.HN,children:[(0,A.jsx)(Z.Z,{px:I.cd,children:(0,A.jsx)(h.Z,{level:5,children:"Runtime variables"})}),(0,A.jsx)(f.Z,{light:!0,mt:1,short:!0}),ye]})]}),beforeWidth:34*I.iI,breadcrumbs:[{label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(X,"/backfills"),href:"/pipelines/[pipeline]/backfills"}},{label:function(){return z},linkProps:{as:"/pipelines/".concat(X,"/backfills/").concat(R),href:"/pipelines/[pipeline]/backfills/[...slug]"}}],buildSidekick:function(e){return(0,_.Z)(B(B({},e),{},{selectedRun:ce,selectedTab:pe,setSelectedTab:fe}))},pageName:S.M.BACKFILLS,pipeline:r,subheader:(0,A.jsxs)(v.Z,{alignItems:"center",children:[!xe&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.Z,{beforeIcon:je?(0,A.jsx)(P.dz,{size:2*I.iI}):(0,A.jsx)(P.Py,{inverted:!(d.rn.CANCELLED===q||d.rn.FAILED===q),size:2*I.iI}),danger:je,disabled:ie,loading:me,onClick:function(e){(0,M.j)(e),be({backfill:{status:je?d.rn.CANCELLED:d.rn.INITIAL}})},outline:!0,success:!je&&!(d.rn.CANCELLED===q||d.rn.FAILED===q)&&!ie,children:je?"Cancel backfill":d.rn.CANCELLED===q||d.rn.FAILED===q?"Retry backfill":"Start backfill"}),(0,A.jsx)(Z.Z,{mr:I.cd})]}),q===x.V.COMPLETED?(0,A.jsx)(k.ZP,{bold:!0,default:!0,large:!0,children:"Filter runs by status:"}):(0,A.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat(X,"/backfills/").concat(R,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Edit backfill"}),(0,A.jsx)(Z.Z,{mr:I.cd}),!re&&(0,A.jsxs)(g.Z,{compact:!0,defaultColor:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?s.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(X,"/backfills/").concat(R)):(0,E.u)({page:0,status:e.target.value})},paddingRight:4*I.iI,placeholder:"Select run status",value:(null===Q||void 0===Q?void 0:Q.status)||"all",children:[(0,A.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),Object.values(x.V).map((function(e){return(0,A.jsx)("option",{value:e,children:x.D[e]},e)}))]})]}),title:function(){return z},uuid:"backfill/detail",children:[(0,A.jsx)(Z.Z,{mt:I.cd,px:I.cd,children:(0,A.jsx)(h.Z,{level:5,children:"Runs for this backfill"})}),(0,A.jsx)(f.Z,{light:!0,mt:I.cd,short:!0}),oe]})})},R=t(2713),H=t(47999),V=t(28358),z=t(93461),Y=t(82944),W=[{label:function(){return"Date and time window"},description:function(){return"Backfill between a date and time range."},uuid:d.VV}],q=t(18025),J=t(19395);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X=function(e){var n=e.backfill,t=e.fetchBackfill,r=e.pipeline,l=(e.variables,(0,o.useRouter)()),s=(0,c.useState)(),a=s[0],b=s[1],j=a||{},x=j.block_uuid,_=j.id,w=j.interval_type,E=j.interval_units,M=(j.end_datetime,j.start_datetime,j.name),L=r.uuid,F=(0,c.useState)(null),B=F[0],U=F[1],G=(0,c.useState)({}),X=G[0],Q=(G[1],(0,c.useState)(x?d._7:d.VV)),$=Q[0],ee=Q[1],ne=(0,c.useState)(!1),te=ne[0],ie=ne[1],re=(0,c.useState)(!1),le=re[0],se=re[1],ae=(0,c.useState)(null),ce=ae[0],ue=ae[1],oe=(0,c.useState)(null),de=oe[0],pe=oe[1],fe=(0,c.useState)({hour:"00",minute:"00"}),ve=fe[0],he=fe[1],be=(0,c.useState)({hour:"00",minute:"00"}),me=be[0],je=be[1];(0,c.useEffect)((function(){if(n){b(n);var e=n.start_datetime;if(e){var t=e.split(" ")[1];pe((0,J.eI)(e)),je({hour:t.substring(0,2),minute:t.substring(3,5)})}var i=n.end_datetime;if(i){var r=i.split(" ")[1];ue((0,J.eI)(i)),he({hour:r.substring(0,2),minute:r.substring(3,5)})}}}),[n]);var xe=(0,c.useMemo)((function(){var e=[[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.KJ,{default:!0,size:1.5*I.iI}),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Backfill name"})]},"model_name_detail"),(0,A.jsx)(Y.Z,{monospace:!0,onChange:function(e){e.preventDefault(),b((function(n){return K(K({},n),{},{name:e.target.value})}))},placeholder:"Name this backfill",value:M},"model_name_input_detail")]];return d.VV===$&&e.push.apply(e,[[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.aw,{default:!0,size:1.5*I.iI}),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Start date and time"})]},"start_time"),(0,A.jsxs)("div",{style:{minHeight:"".concat(5.75*I.iI,"px")},children:[!te&&(0,A.jsx)(Y.Z,{monospace:!0,onClick:function(){return ie((function(e){return!e}))},onFocus:function(){return ie(!0)},placeholder:"YYYY-MM-DD HH:MM",value:de?"".concat(de.toISOString().split("T")[0]," ").concat(null===me||void 0===me?void 0:me.hour,":").concat(null===me||void 0===me?void 0:me.minute):""}),(0,A.jsx)("div",{style:{width:"400px"},children:(0,A.jsx)(H.Z,{disableEscape:!0,onClickOutside:function(){return ie(!1)},open:te,style:{position:"relative"},children:(0,A.jsx)(R.Z,{selectedDate:de,selectedTime:me,setSelectedDate:pe,setSelectedTime:je,topPosition:!0})})})]},"start_time_input")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.aw,{default:!0,size:1.5*I.iI}),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"End date and time"})]},"end_time"),(0,A.jsxs)("div",{style:{minHeight:"".concat(5.75*I.iI,"px")},children:[!le&&(0,A.jsx)(Y.Z,{monospace:!0,onClick:function(){return se((function(e){return!e}))},onFocus:function(){return se(!0)},placeholder:"YYYY-MM-DD HH:MM",value:ce?"".concat(ce.toISOString().split("T")[0]," ").concat(null===ve||void 0===ve?void 0:ve.hour,":").concat(null===ve||void 0===ve?void 0:ve.minute):""}),(0,A.jsx)("div",{style:{width:"400px"},children:(0,A.jsx)(H.Z,{disableEscape:!0,onClickOutside:function(){return se(!1)},open:le,style:{position:"relative"},children:(0,A.jsx)(R.Z,{selectedDate:ce,selectedTime:ve,setSelectedDate:ue,setSelectedTime:he,topPosition:!0})})})]},"end_time_input")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.Pf,{default:!0,size:1.5*I.iI}),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Interval type"})]},"interval_type"),(0,A.jsxs)(g.Z,{monospace:!0,onChange:function(e){e.preventDefault(),b((function(n){return K(K({},n),{},{interval_type:e.target.value})}))},placeholder:"Time spacing between each backfill",value:w,children:[!w&&(0,A.jsx)("option",{value:""}),d.IB.map((function(e){return(0,A.jsx)("option",{value:e,children:(0,D.kC)(e)},e)}))]},"interval_type_input")],[(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(P.Pf,{default:!0,size:1.5*I.iI}),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(k.ZP,{default:!0,children:"Interval units"})]},"interval_units"),(0,A.jsx)(Y.Z,{disabled:!w,monospace:!0,onChange:function(e){e.preventDefault(),b((function(n){return K(K({},n),{},{interval_units:e.target.value})}))},placeholder:w?"Number of ".concat(w).concat(w!==d.I7.CUSTOM?"s":""," between each backfill"):"Interval type is required",type:"number",value:E},"interval_unit_input")]]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Z.Z,{mb:2,px:I.cd,children:(0,A.jsx)(h.Z,{children:"Settings"})}),(0,A.jsx)(f.Z,{light:!0,short:!0}),(0,A.jsx)(y.Z,{columnFlex:[null,1],rows:e})]})}),[ce,de,w,E,M,$,te,le,ve,me]),ge=(0,u.Db)(O.ZP.backfills.useUpdate(_),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){t(),l.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(L,"/backfills/").concat(_))},onErrorCallback:function(e,n){return U({errors:n,response:e})}})}}),Ze=(0,i.Z)(ge,2),ye=Ze[0],ke=Ze[1].isLoading,Oe=(0,c.useCallback)((function(){var e=K(K({},(0,N.GL)(a,["name"])),{},{end_datetime:null,interval_type:null,interval_units:null,start_datetime:null,variables:(0,C.e7)(X)});return d._7===$||(e.interval_type=w,e.interval_units=E,e.end_datetime=ce&&null!==ve&&void 0!==ve&&ve.hour&&null!==ve&&void 0!==ve&&ve.minute?"".concat(ce.toISOString().split("T")[0]," ").concat(null===ve||void 0===ve?void 0:ve.hour,":").concat(null===ve||void 0===ve?void 0:ve.minute,":00"):null,e.start_datetime=de&&null!==me&&void 0!==me&&me.hour&&null!==me&&void 0!==me&&me.minute?"".concat(de.toISOString().split("T")[0]," ").concat(null===me||void 0===me?void 0:me.hour,":").concat(null===me||void 0===me?void 0:me.minute,":00"):null),ye({backfill:e})}),[ce,de,w,E,a,X,$,ve,me]),_e=(0,c.useMemo)((function(){return d._7===$?!x:!(ce&&de&&w&&E)}),[x,ce,de,w,E,$,ve,me]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(m.Z,{breadcrumbs:[{label:function(){return"Backfills"},linkProps:{as:"/pipelines/".concat(L,"/backfills"),href:"/pipelines/[pipeline]/backfills"}},{label:function(){return null===a||void 0===a?void 0:a.name},linkProps:{as:"/pipelines/".concat(L,"/backfills/").concat(_),href:"/pipelines/[pipeline]/backfills/[...slug]"}}],pageName:S.M.BACKFILLS,pipeline:r,subheader:(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(p.Z,{disabled:_e,loading:ke,onClick:Oe,outline:!0,primary:!0,children:"Save changes"}),(0,A.jsx)(Z.Z,{mr:1}),(0,A.jsx)(p.Z,{linkProps:{href:"/pipelines/[pipeline]/backfills/[...slug]",as:"/pipelines/".concat(L,"/backfills/").concat(_)},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"})]}),title:function(){return"Edit ".concat(null===a||void 0===a?void 0:a.name)},uuid:"backfill/edit",children:[(0,A.jsxs)(Z.Z,{p:I.cd,children:[(0,A.jsxs)(Z.Z,{mb:2,children:[(0,A.jsx)(h.Z,{children:"Backfill type"}),(0,A.jsx)(k.ZP,{muted:!0,children:"How would you like this pipeline to be backfilled?"})]}),(0,A.jsx)(v.Z,{children:W.map((function(e){var n=e.label,t=e.description,i=e.uuid,r=$===i,l=$&&!r;return(0,A.jsx)(p.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){ee(i)},children:(0,A.jsx)(q.U,{selected:r,children:(0,A.jsxs)(v.Z,{alignItems:"center",children:[(0,A.jsx)(z.Z,{children:(0,A.jsx)("input",{checked:r,type:"radio"})}),(0,A.jsx)(Z.Z,{mr:I.cd}),(0,A.jsxs)(z.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,A.jsx)(h.Z,{bold:!0,default:!r&&!l,level:5,muted:!r&&l,children:n()}),(0,A.jsx)(k.ZP,{default:!r&&!l,leftAligned:!0,muted:l,children:t()})]})]})})},i)}))})]}),(0,A.jsx)(Z.Z,{mt:5,children:xe})]}),B&&(0,A.jsx)(H.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return U(null)},children:(0,A.jsx)(V.Z,K(K({},B),{},{onClose:function(){return U(null)}}))})]})},Q=t(41788);function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ne(e){var n=e.backfillId,t=e.pipelineUUID,i=e.subpath,r=O.ZP.variables.pipelines.list(t).data,l=(0,c.useMemo)((function(){return null===r||void 0===r?void 0:r.variables}),[r]),s=O.ZP.pipelines.detail(t,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,a=(0,c.useMemo)((function(){return ee(ee({},null===s||void 0===s?void 0:s.pipeline),{},{uuid:t})}),[s,t]),u=O.ZP.backfills.detail(n,{include_preview_runs:!0}),o=u.data,d=u.mutate,p=(0,c.useMemo)((function(){return null===o||void 0===o?void 0:o.backfill}),[o]);return"edit"===i?(0,A.jsx)(X,{backfill:p,fetchBackfill:d,pipeline:a,variables:l}):(0,A.jsx)(U,{backfill:p,fetchBackfill:d,pipeline:a,variables:l})}ne.getInitialProps=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r,l,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,r=t.pipeline,l=t.slug,!Array.isArray(l)){e.next=4;break}return s=(0,i.Z)(l,2),c=s[0],u=s[1],e.abrupt("return",{backfillId:c,pipelineUUID:r,subpath:u});case 4:return e.abrupt("return",{pipelineUUID:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var te=(0,Q.Z)(ne)},53664:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills/[...slug]",function(){return t(12625)}])}},function(e){e.O(0,[3850,2083,5896,4804,1774,5872,2524,4495,9767,6579,434,9898,1830,4463,6532,1286,4846,8961,9774,2888,179],(function(){return n=53664,e(e.s=n);var n}));var n=e.O();_N_E=n}]);