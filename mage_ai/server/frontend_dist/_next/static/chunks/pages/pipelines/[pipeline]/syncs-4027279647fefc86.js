(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7803],{1210:function(e,n,r){"use strict";r.d(n,{Z:function(){return I}});var t=r(82394),i=r(21831),o=r(82684),l=r(47999),c=r(49894),u=r(93461),s=r(57384),d=r(12344),a=r(72454),f=r(28598);function v(e,n){var r=e.children;return(0,f.jsx)(a.HS,{ref:n,children:r})}var p=o.forwardRef(v),m=r(32063),h=r(15270),b=r(82531),j=r(66166),x=r(3055),g=r(49125),Z=r(91427),y=r(24141);function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var I=function(e){var n,r=e.after,t=e.afterHidden,v=e.afterWidth,O=e.afterWidthOverride,I=e.before,P=e.beforeWidth,_=e.breadcrumbs,w=e.children,N=e.errors,E=e.headerMenuItems,M=e.navigationItems,S=e.setErrors,C=e.subheaderChildren,D=e.title,A=e.uuid,L=(0,y.i)().width,V="dashboard_after_width_".concat(A),R="dashboard_before_width_".concat(A),T=(0,o.useRef)(null),F=(0,o.useState)(O?v:(0,Z.U2)(V,v)),U=F[0],B=F[1],z=(0,o.useState)(!1),W=z[0],G=z[1],H=(0,o.useState)(I?Math.max((0,Z.U2)(R,P),13*g.iI):null),Y=H[0],J=H[1],X=(0,o.useState)(!1),q=X[0],K=X[1],Q=(0,o.useState)(null)[1],$=b.ZP.projects.list({},{revalidateOnFocus:!1}).data,ee=null===$||void 0===$?void 0:$.projects,ne=[];_?ne.push.apply(ne,(0,i.Z)(_)):(null===ee||void 0===ee?void 0:ee.length)>=1&&ne.push.apply(ne,[{label:function(){var e;return null===(e=ee[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return D}}]),(0,o.useEffect)((function(){null===T||void 0===T||!T.current||W||q||null===Q||void 0===Q||Q(T.current.getBoundingClientRect().width)}),[W,U,q,Y,T,Q,L]),(0,o.useEffect)((function(){W||(0,Z.t8)(V,U)}),[t,W,U,V]),(0,o.useEffect)((function(){q||(0,Z.t8)(R,Y)}),[q,Y,R]);var re=(0,j.Z)(v);return(0,o.useEffect)((function(){O&&re!==v&&B(v)}),[O,v,re]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:D}),(0,f.jsx)(d.Z,{breadcrumbs:ne,menuItems:E,project:null===ee||void 0===ee?void 0:ee[0],version:null===ee||void 0===ee||null===(n=ee[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(a.Nk,{children:[0!==(null===M||void 0===M?void 0:M.length)&&(0,f.jsx)(a.lm,{children:(0,f.jsx)(h.Z,{navigationItems:M})}),(0,f.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(m.Z,{after:r,afterHeightOffset:x.Mz,afterHidden:t,afterMousedownActive:W,afterWidth:U,before:I,beforeHeightOffset:x.Mz,beforeMousedownActive:q,beforeWidth:a.k1+(I?Y:0),hideAfterCompletely:!0,leftOffset:I?a.k1:null,mainContainerRef:T,setAfterMousedownActive:G,setAfterWidth:B,setBeforeMousedownActive:K,setBeforeWidth:J,children:[C&&(0,f.jsx)(p,{children:C}),w]})})]}),N&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===S||void 0===S?void 0:S(null)},children:(0,f.jsx)(c.Z,k(k({},N),{},{onClose:function(){return null===S||void 0===S?void 0:S(null)}}))})]})}},60547:function(e,n,r){"use strict";r.d(n,{Z:function(){return I}});var t=r(82394),i=r(21831),o=r(82684),l=r(47999),c=r(1210),u=r(34744),s=r(49894),d=r(67971),a=r(87372),f=r(86673),v=r(82531),p=r(9518),m=r(23831),h=r(73942),b=r(49125),j=p.default.div.withConfig({displayName:"indexstyle__BannerStyle",componentId:"sc-1te3pmf-0"})(["border-radius:","px;padding:","px;"," "," ",""],h.n_,3*b.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||m.Z.shadow).small,";\n  ")}),(function(e){return e.background&&"\n    background: ".concat(e.background,";\n  ")}),(function(e){return e.backgroundImage&&'\n    background-image: url("'.concat(e.backgroundImage,'");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  ')})),x=r(3055),g=r(95354),Z=r(24141),y=r(28598);function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var I=function(e){var n=e.after,r=e.afterHidden,t=e.afterWidth,p=e.before,m=e.beforeWidth,h=e.breadcrumbs,O=e.buildSidekick,I=e.children,P=e.errors,_=e.headline,w=e.pageName,N=e.pipeline,E=e.setErrors,M=e.subheader,S=e.subheaderBackground,C=e.subheaderBackgroundImage,D=e.subheaderButton,A=e.subheaderText,L=e.title,V=e.uuid,R=(0,Z.i)().height,T=N.uuid,F=v.ZP.pipelines.detail(T,{includes_outputs:!1},{revalidateOnFocus:!1}).data,U=null===F||void 0===F?void 0:F.pipeline,B=(0,o.useMemo)((function(){return n||(O?O({height:R,heightOffset:x.Mz,pipeline:U}):null)}),[n,O,R,U]),z=t||(B?50*b.iI:null),W=(0,o.useMemo)((function(){var e=[];return U&&(e.push.apply(e,[{label:function(){return"Pipelines"},linkProps:{href:"/pipelines"}}]),h?(e.push({label:function(){return U.uuid},linkProps:{as:"/pipelines/".concat(T,"/triggers"),href:"/pipelines/[pipeline]/triggers"}}),e.push.apply(e,(0,i.Z)(h)),e[e.length-1].bold=!0):e.push({bold:!0,label:function(){return U.name}})),e}),[h,U,T]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(c.Z,{after:B,afterHidden:r,afterWidth:z,before:p,beforeWidth:m,breadcrumbs:W,navigationItems:(0,g.H)(w,U),subheaderChildren:"undefined"!==typeof M&&M,title:U?L?L(U):U.name:null,uuid:V,children:[(D||A)&&(0,y.jsx)(f.Z,{mb:b.Mq,mt:b.cd,mx:b.cd,children:(0,y.jsx)(j,{background:S,backgroundImage:C,children:(0,y.jsxs)(d.Z,{alignItems:"center",children:[D,A&&(0,y.jsx)(f.Z,{ml:3}),A]})})}),_&&(0,y.jsx)(f.Z,{p:b.cd,children:(0,y.jsxs)(f.Z,{mt:b.cd,px:b.cd,children:[(0,y.jsx)(a.Z,{level:5,children:_}),(0,y.jsx)(u.Z,{light:!0,mt:b.cd,short:!0})]})}),I]}),P&&(0,y.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===E||void 0===E?void 0:E(null)},children:(0,y.jsx)(s.Z,k(k({},P),{},{onClose:function(){return null===E||void 0===E?void 0:E(null)}}))})]})}},66050:function(e,n,r){"use strict";var t;r.d(n,{V:function(){return t}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running"}(t||(t={}))},47409:function(e,n,r){"use strict";r.d(n,{D:function(){return l},V:function(){return o}});var t,i=r(82394),o=r(66050).V,l=(t={},(0,i.Z)(t,o.CANCELLED,"Cancelled"),(0,i.Z)(t,o.COMPLETED,"Done"),(0,i.Z)(t,o.FAILED,"Failed"),(0,i.Z)(t,o.INITIAL,"Ready"),(0,i.Z)(t,o.RUNNING,"Running"),t)},89745:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return oe}});var t=r(77837),i=r(38860),o=r.n(i),l=r(82684),c=r(60547),u=r(41788),s=r(75582),d=r(82394),a=r(93461),f=r(67971),v=r(87372),p=r(47409),m=r(86673),h=r(54283),b=r(19711),j=r(23831),x=r(10503),g=r(9518),Z=r(73942),y=r(2005),O=r(49125),k=r(31012),I=g.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-15svh8z-0"})(["border-radius:","px;margin:","px;overflow:hidden;"," "," "," "," "," "," &:hover{"," "," "," "," ","}"],Z.n_,O.cd*O.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||j.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.borders||j.Z.borders).dark,";\n\n    &:hover {\n      cursor: pointer;\n    }\n  ")}),(function(e){return e.selected&&e.danger&&"\n    border-color: ".concat((e.theme.accent||j.Z.accent).negative,";\n  ")}),(function(e){return e.selected&&e.primary&&"\n    border-color: ".concat((e.theme.interactive||j.Z.interactive).linkPrimary,";\n  ")}),(function(e){return e.selected&&e.default&&"\n    border-color: ".concat((e.theme.interactive||j.Z.interactive).focusBackground,";\n  ")}),(function(e){return e.selected&&e.success&&"\n    border-color: ".concat((e.theme.background||j.Z.background).success,";\n  ")}),(function(e){return e.selected&&e.warning&&"\n    border-color: ".concat((e.theme.accent||j.Z.accent).warning,";\n  ")}),(function(e){return e.danger&&"\n      border-color: ".concat((e.theme.accent||j.Z.accent).negative,";\n    ")}),(function(e){return e.primary&&"\n      border-color: ".concat((e.theme.interactive||j.Z.interactive).linkPrimary,";\n    ")}),(function(e){return e.default&&"\n      border-color: ".concat((e.theme.interactive||j.Z.interactive).focusBackground,";\n    ")}),(function(e){return e.success&&"\n      border-color: ".concat((e.theme.background||j.Z.background).success,";\n    ")}),(function(e){return e.warning&&"\n      border-color: ".concat((e.theme.accent||j.Z.accent).warning,";\n    ")})),P=(0,g.css)([""," "," "," "," ",""],(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.accent||j.Z.accent).negative,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.interactive||j.Z.interactive).linkPrimary,";\n  ")}),(function(e){return e.default&&"\n    background-color: ".concat((e.theme.interactive||j.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||j.Z.background).success,";\n  ")}),(function(e){return e.warning&&"\n    background-color: ".concat((e.theme.accent||j.Z.accent).warning,";\n  ")})),_=g.default.div.withConfig({displayName:"indexstyle__StatusStyle",componentId:"sc-15svh8z-1"})([""," ",";border-radius:","px;display:inline-block;font-family:",";padding:6px;"," "," "," "," "," ",""],P,k.iD,Z.D7,y.ry,(function(e){return e.danger&&"\n    color: ".concat((e.theme.content||j.Z.content).active,";\n  ")}),(function(e){return e.primary&&"\n    color: ".concat((e.theme.content||j.Z.content).active,";\n  ")}),(function(e){return(e.default||e.success)&&"\n  "}),(function(e){return e.default&&"\n    color: ".concat((e.theme.content||j.Z.content).default,";\n  ")}),(function(e){return e.success&&"\n    color: ".concat((e.theme.content||j.Z.content).inverted,";\n  ")}),(function(e){return e.warning&&"\n    color: ".concat((e.theme.content||j.Z.content).inverted,";\n  ")})),w=g.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-15svh8z-2"})([""," display:flex;height:auto;width:3px;",""],P,(function(e){return e.default&&"\n    background-color: ".concat((e.theme.interactive||j.Z.interactive).focusBackground,";\n  ")})),N=r(90211),E=r(92083),M=r.n(E),S=r(66050),C=r(24224);function D(e){var n;return Object.keys((null===e||void 0===e||null===(n=e.metrics)||void 0===n?void 0:n.blocks)||{}).sort()}function A(e){var n,r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null,o=null,l=null,c=null,u={},d=(null===e||void 0===e?void 0:e.block_runs)||[],a=(null===e||void 0===e||null===(n=e.metrics)||void 0===n?void 0:n.blocks)||{},f=(null===e||void 0===e||null===(r=e.metrics)||void 0===r?void 0:r.pipeline)||{},v=L(e);return Object.entries(a).forEach((function(e){var n,r=(0,s.Z)(e,2),d=r[0],a=r[1];if(!t||t===d){var p,m=a||{},h=m.destinations,b=void 0===h?{records_affected:null,records_inserted:null,records_updated:null}:h,j=m.sources,x=void 0===j?{records:null}:j,g=v[d]||[];if(t&&t===d&&g.every((function(e){var n=e.status;return S.V.COMPLETED===n}))&&null===i&&(i=0),null!==f&&void 0!==f&&null!==(n=f[d])&&void 0!==n&&n.record_counts)null===i&&(i=0),i+=Number(null===f||void 0===f||null===(p=f[d])||void 0===p?void 0:p.record_counts);else null!==x&&void 0!==x&&x.records&&(null===i&&(i=0),i+=Number(x.records));null!==b&&void 0!==b&&b.records_updated?(null===l&&(l=0),l+=Number(b.records_updated),null===c&&(c=0),c+=Number(b.records_updated)):null!==b&&void 0!==b&&b.records_inserted?(null===l&&(l=0),l+=Number(b.records_inserted),null===o&&(o=0),o+=Number(b.records_inserted)):null!==b&&void 0!==b&&b.records_affected&&(null===l&&(l=0),l+=Number(b.records_affected)),["destinations","sources"].forEach((function(e){var n=a[e]||{};null!==n&&void 0!==n&&n.error&&(u[d]||(u[d]={}),u[d][e]={error:null===n||void 0===n?void 0:n.error,errors:null===n||void 0===n?void 0:n.errors,message:null===n||void 0===n?void 0:n.message})}))}})),null===d||void 0===d||d.forEach((function(e){var n=e.block_uuid,r=e.metrics,t=e.status;if(S.V.FAILED===t&&null!==r&&void 0!==r&&r.error&&n){var i=n.split(":"),o=(0,s.Z)(i,3),l=(o[0],o[1]);o[2];u[l]||(u[l]={}),u[l][""]=r.error}})),{errors:u,records:i,recordsInserted:o,recordsProcessed:l,recordsUpdated:c}}function L(e){var n=e.block_runs,r={};return null===n||void 0===n||n.forEach((function(e){var n=e.block_uuid.split(":"),t=(0,s.Z)(n,3),i=(t[0],t[1]);t[2];r[i]||(r[i]=[]),r[i].push(e)})),r}function V(e){var n=L(e),r={};return Object.entries(n).forEach((function(e){var n=(0,s.Z)(e,2),t=n[0],i=n[1],o=i.filter((function(e){var n=e.status;return S.V.COMPLETED===n})),l=o.map((function(e){var n=e.completed_at,r=e.started_at,t=M().utc(n),i=M().utc(r);return t.diff(i,"second")})),c=o.length,u=i.length;r[t]={completed:c,runtime:l.length>=1?(0,C.Sm)(l)/l.length:null,total:u}})),r}function R(e){var n=e.block_runs,r=(null===n||void 0===n?void 0:n.length)||1,t=function(e){var n=(null===e||void 0===e?void 0:e.block_runs)||[];return null===n||void 0===n?void 0:n.filter((function(e){var n=e.status;return S.V.COMPLETED===n}))}(e).length||0;return t/r}function T(e){var n=e.completed_at,r=e.block_runs,t=void 0===r?[]:r,i=e.status;if(null===t||void 0===t||!t.length)return 0;var o=M().utc();if(n)o=M().utc(n);else if([p.V.CANCELLED,p.V.FAILED].includes(i)){var l=(0,C.YC)(t,(function(e){return e.started_at}),{ascending:!1})[0];o=M().utc(l.updated_at)}var c=M().utc(e.created_at);return o.diff(c,"second")}function F(e,n){var r,t,i,o,l,c=L(e),u=V(e),s=(null===e||void 0===e?void 0:e.metrics)||{blocks:null,pipeline:null},d=s.blocks||{},a=s.pipeline||{},f=(d[n],a[n],u[n]||{completed:null,total:null}),v=f.completed,p=f.total,m=v&&p?v/p:0,h=c[n]||[],b=h.every((function(e){var n=e.status;return S.V.COMPLETED===n})),j=(0,C.YC)(h,(function(e){return e.updated_at}),{ascending:!1})[0],x=null===(r=(0,C.YC)(h,(function(e){return e.started_at}),{ascending:!0})[0])||void 0===r?void 0:r.started_at;b?t=null===(l=(0,C.YC)(h,(function(e){return e.completed_at}),{ascending:!1})[0])||void 0===l?void 0:l.completed_at:j&&(o=null===j||void 0===j?void 0:j.updated_at);var g=b?M().utc(t||o):M().utc(),Z=M().utc(x);return{completed:v,completedAt:t,done:b,progress:m,runtime:i=g.diff(Z,"second"),startedAt:x,status:null===j||void 0===j?void 0:j.status,timeText:(0,N.zf)(i),total:p,updatedAt:o}}var U=r(28598);function B(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function z(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?B(Object(r),!0).forEach((function(n){(0,d.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var W=function(e){var n=e.onSelect,r=e.pipelineRun,t=e.selected,i=(r.block_runs,r.created_at),o=r.status,c=(0,l.useMemo)((function(){return(null===r||void 0===r?void 0:r.metrics)||{blocks:{},destination:null,pipeline:{},source:null}}),[r]),u=((0,l.useMemo)((function(){return c.blocks||{}}),[c]),(0,l.useMemo)((function(){return c.pipeline||{}}),[c])),d=c.destination,g=c.source,Z=(0,l.useMemo)((function(){return Object.keys(u).length}),[u]),y=(0,l.useMemo)((function(){return A(r)}),[r]),k=y.errors,P=y.records,E=y.recordsProcessed,M=(0,l.useMemo)((function(){return R(r)}),[r]),S=(0,l.useMemo)((function(){return[p.V.COMPLETED].includes(o)}),[o]),C=(0,l.useMemo)((function(){return{danger:p.V.FAILED===o,default:p.V.INITIAL===o,primary:p.V.RUNNING===o,success:S,warning:p.V.CANCELLED===o}}),[S,o]),D=(0,l.useMemo)((function(){if(r){var e=T(r);return(0,N.zf)(e)}}),[r]);return(0,U.jsx)(I,z(z({},C),{},{onClick:function(){return n(t?null:r.id)},selected:t,children:(0,U.jsxs)(f.Z,{fullHeight:!0,justifyContent:"space-between",children:[(0,U.jsx)(w,z({},C)),(0,U.jsx)(a.Z,{flex:1,flexDirection:"column",children:(0,U.jsxs)(m.Z,{ml:3,py:3,children:[(0,U.jsx)(v.Z,{bold:!0,level:5,monospace:!0,children:i}),(0,U.jsx)(m.Z,{fullWidth:!1,mt:2,children:(0,U.jsx)(_,z(z({},C),{},{children:(0,U.jsxs)(f.Z,{alignItems:"center",children:[S&&(0,U.jsx)(x.Jr,{inverted:!0,size:2*O.iI}),[p.V.INITIAL,p.V.RUNNING].includes(o)&&(0,U.jsx)(h.Z,{color:p.V.INITIAL!==o?j.Z.monotone.white:null,inverted:p.V.INITIAL===o,small:!0}),"\xa0",p.V.RUNNING===o&&(0,U.jsxs)(U.Fragment,{children:["\xa0",Math.round(100*M),"%"]}),![p.V.INITIAL,p.V.RUNNING].includes(o)&&p.D[o],p.V.INITIAL===o&&"Starting"]})}))}),Object.values(k).length>=1&&(0,U.jsx)(m.Z,{mt:1,children:Object.entries(k).map((function(e,n){var r=(0,s.Z)(e,2),t=r[0];r[1];return(0,U.jsxs)(b.ZP,{monospace:!0,muted:!0,small:!0,children:[t," stream failed"]},t)}))})]})}),(0,U.jsxs)(a.Z,{flex:1,children:[(0,U.jsx)(a.Z,{flex:1,flexDirection:"column",children:(0,U.jsxs)(m.Z,{ml:3,py:3,children:[(0,U.jsxs)(m.Z,{mb:1,children:[(0,U.jsx)(b.ZP,{bold:!0,muted:!0,small:!0,children:"Rows processed"}),(0,U.jsx)(b.ZP,{monospace:!0,children:E>=1?(0,N.x6)(E):"-"})]}),(0,U.jsxs)(m.Z,{mb:1,children:[(0,U.jsx)(b.ZP,{bold:!0,muted:!0,small:!0,children:"Rows remaining"}),(0,U.jsx)(b.ZP,{monospace:!0,children:P>=1&&P>=E?(0,N.x6)(P-E):"-"})]}),p.V.RUNNING!==o&&(0,U.jsxs)(m.Z,{mb:1,children:[(0,U.jsx)(b.ZP,{bold:!0,muted:!0,small:!0,children:"Runtime"}),(0,U.jsx)(b.ZP,{monospace:!0,children:D})]})]})}),(0,U.jsx)(a.Z,{flex:1,flexDirection:"column",children:(0,U.jsxs)(m.Z,{ml:3,py:3,children:[(0,U.jsxs)(m.Z,{mb:1,children:[(0,U.jsx)(b.ZP,{bold:!0,muted:!0,small:!0,children:"Source"}),(0,U.jsx)(b.ZP,{monospace:!0,children:g||"-"})]}),(0,U.jsxs)(m.Z,{mb:1,children:[(0,U.jsx)(b.ZP,{bold:!0,muted:!0,small:!0,children:"Destination"}),(0,U.jsx)(b.ZP,{monospace:!0,children:d||"-"})]}),(0,U.jsxs)(m.Z,{mb:1,children:[(0,U.jsx)(b.ZP,{bold:!0,muted:!0,small:!0,children:"Streams"}),(0,U.jsx)(b.ZP,{monospace:!0,children:Z>=1?(0,N.x6)(Z):"-"})]})]})})]})]})}))},G=r(89565),H=r.n(G),Y=r(34376),J=r(60328),X=r(10919),q=r(58180),K=g.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-1thr560-0"})(["display:flex;flex:1;"," "," ",""],(function(e){return e.even&&e.fill&&"\n    background-color: ".concat((e.theme.accent||j.Z.accent).cyan,";\n  ")}),(function(e){return e.even&&!e.fill&&"\n    background-color: ".concat((e.theme.accent||j.Z.accent).cyanTransparent,";\n  ")}),(function(e){return"\n    height: ".concat((e.small?1:2)*O.iI,"px;\n  ")})),Q=r(66653);var $=function(e){var n=e.onClickRow,r=e.pipelineRun,t=e.selectedStream,i=(0,Y.useRouter)(),o=(0,l.useState)(null),c=o[0],u=o[1],d=(0,l.useState)(null),a=d[0],h=d[1],j=(0,l.useMemo)((function(){return r?L(r):{}}),[r]),g=(0,l.useMemo)((function(){return r?V(r):{}}),[r]),Z=(0,l.useMemo)((function(){var e=0,n=[],r=[];if(Object.entries(g).forEach((function(t){var i=(0,s.Z)(t,2),o=(i[0],i[1]),l=o.completed,c=o.runtime,u=o.total;null===c?r.push(o):(n.push(c),e+=c*(u-l))})),0===n.length)return null;var t=(0,C.Sm)(n)/n.length;return r.forEach((function(n){var r=n.completed,i=n.total;e+=t*(i-r)})),e}),[g]),y=(0,l.useMemo)((function(){return t?g[t]:null}),[g,t]),k=(0,l.useMemo)((function(){if(t&&g){var e=g[t]||{},n=e.completed,i=e.total;if(i>=1)return n/i}else if(r)return R(r);return 0}),[y,r,t]),I=(0,l.useMemo)((function(){return(0,U.jsx)(f.Z,{children:(0,C.w6)(101).map((function(e,n){return(0,U.jsx)(K,{even:n%2===0,fill:k>0&&Math.round(100*k)>=n},n)}))})}),[k]),P=(0,l.useMemo)((function(){if(t){var e=j[t]||[],n=e.every((function(e){var n=e.status;return S.V.COMPLETED===n})),i=(0,C.YC)(e,(function(e){return e.updated_at}),{ascending:!1})[0],o=null===i||void 0===i?void 0:i.status,l=y||{},c=l.completed,u=l.runtime,s=l.total;if(n)return"Sync complete for ".concat(t);if([S.V.CANCELLED,S.V.FAILED].includes(o))return p.D[o];if(u&&s>=1){var d=Math.ceil(u*(s-c)/60);return"".concat((0,N._6)("minute",d,!0)," to completion")}return"Estimating time remaining for stream..."}if(p.V.COMPLETED===(null===r||void 0===r?void 0:r.status))return"Sync complete";if(r){if([p.V.CANCELLED,p.V.FAILED].includes(null===r||void 0===r?void 0:r.status))return p.D[null===r||void 0===r?void 0:r.status];if(p.V.INITIAL===(null===r||void 0===r?void 0:r.status))return"Initializing sync (this can take several minutes)";if(null===Z)return"Estimating time remaining...";var a=Math.ceil(Z/60);return"".concat((0,N._6)("minute",a,!0)," to completion")}return"Select a sync"}),[j,Z,y,r,t]),_=(0,l.useMemo)((function(){return r&&t?F(r,t):{completed:null,completedAt:null,done:null,progress:null,runtime:null,startedAt:null,status:null,timeText:null,total:null,updatedAt:null}}),[r,t]);(0,l.useEffect)((function(){var e;if(r){var n=T(r);u(n),e=setInterval((function(){return u((function(e){return e+1}))}),1e3)}return function(){return clearInterval(e)}}),[r]),(0,l.useEffect)((function(){var e;if(r&&t&&_){var n=(null===_||void 0===_?void 0:_.runtime)||0;h(n),e=setInterval((function(){return h((function(e){return e+1}))}),1e3)}return function(){return clearInterval(e)}}),[r,t,_]);var w=(0,l.useMemo)((function(){if(r){if(t)return null===_||void 0===_?void 0:_.timeText;var e=T(r);return(0,N.zf)(e)}}),[r,t,_]),E=(0,l.useMemo)((function(){var e=Math.floor(c%86400/3600),n=Math.floor(c%3600/60),r=Math.floor(c%60/1);return[e>=10?String(e):"0".concat(e),n>=10?String(n):"0".concat(n),r>=10?String(r):"0".concat(r)].join(":")}),[c]),M=(0,l.useMemo)((function(){var e=Math.floor(a%86400/3600),n=Math.floor(a%3600/60),r=Math.floor(a%60/1);return[e>=10?String(e):"0".concat(e),n>=10?String(n):"0".concat(n),r>=10?String(r):"0".concat(r)].join(":")}),[a]),B=(0,l.useMemo)((function(){return r?A(r):{errors:null,records:null,recordsInserted:null,recordsProcessed:null,recordsUpdated:null}}),[r]),z=B.errors,W=B.records,G=B.recordsInserted,$=B.recordsProcessed,ee=B.recordsUpdated,ne=(0,l.useMemo)((function(){return r&&t?A(r,t):{errors:null,records:null,recordsInserted:null,recordsProcessed:null,recordsUpdated:null}}),[r,t]),re=(0,l.useMemo)((function(){var e=t?null===ne||void 0===ne?void 0:ne.records:W,n=t?null===ne||void 0===ne?void 0:ne.recordsInserted:G,r=t?null===ne||void 0===ne?void 0:ne.recordsProcessed:$,i=t?null===ne||void 0===ne?void 0:ne.recordsUpdated:ee,o=[{label:"Rows fetched",value:null===e?"-":(0,N.x6)(e)}];return null===n&&null===i?o.push({label:"Rows processed",value:null===r?"-":(0,N.x6)(r)}):null!==n?o.push({label:"Rows inserted",value:(0,N.x6)(n)}):null!==i&&o.push({label:"Rows updated",value:(0,N.x6)(i)}),o.map((function(e){var n=e.label,r=e.value;return(0,U.jsxs)("div",{children:[(0,U.jsx)(b.ZP,{bold:!0,large:!0,muted:!0,children:n}),(0,U.jsx)(b.ZP,{headline:!0,children:r})]},n)}))}),[W,ne,G,$,ee,w,E,status]),te=(0,l.useMemo)((function(){if(!r)return(0,U.jsx)("div",{});var e=D(r);return(0,U.jsx)(q.Z,{columnFlex:[null,null,null,null,null,null],columns:[{uuid:"Stream"},{uuid:"Start"},{uuid:"End"},{uuid:"Time"},{uuid:"Progress"},{uuid:"Logs"}],isSelectedRow:function(n){return t&&t===e[n]},onClickRow:n,rows:e.map((function(e){var n=F(r,e),t=(n.completed,n.completedAt),o=n.done,l=n.progress,c=n.startedAt,u=n.status,s=n.timeText,d=(n.total,!!z[e]);return[(0,U.jsx)(b.ZP,{danger:d,default:!d,monospace:!0,children:e},"stream"),(0,U.jsx)(b.ZP,{default:!0,monospace:!0,children:c?c.split(".")[0]:"-"},"started_at"),(0,U.jsx)(b.ZP,{default:!0,monospace:!0,children:t?t.split(".")[0]:"-"},"completed_at"),(0,U.jsx)(b.ZP,{default:!0,children:[S.V.INITIAL,S.V.RUNNING].includes(u)?"-":s},"runtime"),(0,U.jsxs)("div",{children:[o&&(0,U.jsx)(x.Jr,{default:!0,size:2*O.iI}),!o&&(0,U.jsx)(f.Z,{children:(0,C.w6)(51).map((function(e,n){return(0,U.jsx)(K,{fill:l>0&&Math.round(50*l)>=n,even:n%2===0,small:!0},n)}))})]},"progress"),(0,U.jsx)(J.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(e){i.push("/pipelines/".concat(r.pipeline_uuid,"/logs?pipeline_run_id[]=").concat(r.id)),(0,Q.j)(e)},children:(0,U.jsx)(x.B4,{default:!0,size:2*O.iI})},"logs")]})),uuid:"".concat(null===r||void 0===r?void 0:r.id,"-streams-table")})}),[z,g,r,t]),ie=(0,l.useMemo)((function(){var e,n,i,o,l,c,u,d;if(r&&t){var a=(null===r||void 0===r?void 0:r.metrics)||{blocks:null,destination:null,pipeline:null,source:null},f=null===a||void 0===a||null===(e=a.pipeline)||void 0===e||null===(n=e[t])||void 0===n||null===(i=n.bookmarks)||void 0===i?void 0:i[t],v=null===a||void 0===a||null===(o=a.blocks)||void 0===o||null===(l=o[t])||void 0===l||null===(c=l.destinations)||void 0===c||null===(u=c.state)||void 0===u||null===(d=u.bookmarks)||void 0===d?void 0:d[t];if(f||v){var p=Array.from(new Set(Object.keys(f||{}).concat(Object.keys(v||{})))).sort(),m=[];p.forEach((function(e){var n=[(0,U.jsx)(b.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,children:e},e)];[f,v].forEach((function(r,t){r&&n.push((0,U.jsx)(b.ZP,{monospace:!0,small:!0,children:r[e]},"".concat(e,"-").concat(t)))})),m.push(n)}));var h=[{label:function(){return""},uuid:"column"}];return[[null===a||void 0===a?void 0:a.source,"source",f],[null===a||void 0===a?void 0:a.destination,"destination",v]].forEach((function(e){var n=(0,s.Z)(e,3),r=n[0],t=n[1];n[2]&&h.push({uuid:"".concat(r," (").concat(t,")")})})),(0,U.jsx)(q.Z,{columnFlex:[null,1,1],columns:h,rows:m,uuid:"".concat(t,"-bookmark-table")})}}}),[r,t]),oe=(0,l.useMemo)((function(){var e,n,i,o,l,c;if(r&&t){var u=(null===r||void 0===r?void 0:r.metrics)||{blocks:null,destination:null,pipeline:null,source:null},d=null===u||void 0===u||null===(e=u.blocks)||void 0===e||null===(n=e[t])||void 0===n||null===(i=n.sources)||void 0===i?void 0:i.record,a=null===u||void 0===u||null===(o=u.blocks)||void 0===o||null===(l=o[t])||void 0===l||null===(c=l.destinations)||void 0===c?void 0:c.record;if(d||a){var f=Object.keys(a||d||{}).sort(),v=[];f.forEach((function(e){var n=[(0,U.jsx)(b.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,children:e},e)];[d,a].forEach((function(r,t){if(r){var i=r[e],o="object"===typeof i;n.push((0,U.jsxs)(b.ZP,{monospace:!0,small:!0,textOverflow:!0,whiteSpaceNormal:!0,wordBreak:!0,children:[o&&(0,U.jsx)("pre",{children:JSON.stringify(i,null,2)}),!o&&i]},"".concat(e,"-").concat(t)))}})),v.push(n)}));var p=[{label:function(){return""},uuid:"column"}];return[[null===u||void 0===u?void 0:u.source,"source",d],[null===u||void 0===u?void 0:u.destination,"destination",a]].forEach((function(e){var n=(0,s.Z)(e,3),r=n[0],t=n[1];n[2]&&p.push({uuid:"".concat(r," (").concat(t,")")})})),(0,U.jsx)(q.Z,{columnFlex:[null,1,1],columns:p,rows:v.map((function(e){return e.map((function(e){return(0,U.jsx)(b.ZP,{default:!0,monospace:!0,children:e},e)}))})),uuid:"".concat(t,"-bookmark-table")})}}}),[r,t]),le=(0,l.useMemo)((function(){var e,n,i,o,l,c,u=null===r||void 0===r||null===(e=r.metrics)||void 0===e||null===(n=e.blocks)||void 0===n?void 0:n[t];return(null===u||void 0===u||null===(i=u.sources)||void 0===i||null===(o=i.block_tags)||void 0===o?void 0:o.destination_table)||(null===u||void 0===u||null===(l=u.destinations)||void 0===l||null===(c=l.block_tags)||void 0===c?void 0:c.destination_table)}),[r,t]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(m.Z,{p:3,children:[t&&(0,U.jsx)(m.Z,{mb:3,children:(0,U.jsxs)(f.Z,{alignItems:"center",children:[(0,U.jsx)(X.Z,{block:!0,onClick:function(){return i.push("/pipelines/".concat(r.pipeline_uuid,"/syncs?pipeline_run_id=").concat(r.id))},preventDefault:!0,children:(0,U.jsxs)(f.Z,{alignItems:"center",children:[(0,U.jsx)(x.Xd,{default:!0,size:1.5*O.iI}),(0,U.jsx)(m.Z,{mr:1}),(0,U.jsx)(b.ZP,{default:!0,children:"Syncs"})]})}),(0,U.jsx)(m.Z,{mx:1,children:(0,U.jsx)(b.ZP,{default:!0,monospace:!0,children:"/"})}),(0,U.jsx)(b.ZP,{bold:!0,monospace:!0,children:t})]})}),(0,U.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,U.jsx)(m.Z,{mr:2,my:1,children:(0,U.jsx)(v.Z,{level:5,muted:!r,children:P})}),r&&(0,U.jsx)(J.Z,{onClick:function(){return i.push("/pipelines/".concat(r.pipeline_uuid,"/logs?pipeline_run_id[]=").concat(r.id))},small:!0,children:"Logs"})]}),(0,U.jsx)(m.Z,{mt:2,children:I}),r&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.Z,{mt:3,children:(0,U.jsxs)(f.Z,{justifyContent:"space-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(b.ZP,{bold:!0,large:!0,muted:!0,children:"Runtime"}),(0,U.jsxs)(b.ZP,{headline:!0,children:[t&&[S.V.INITIAL,S.V.RUNNING].includes(null===_||void 0===_?void 0:_.status)&&M,t&&![S.V.INITIAL,S.V.RUNNING].includes(null===_||void 0===_?void 0:_.status)&&(null===_||void 0===_?void 0:_.timeText),!t&&[p.V.INITIAL,p.V.RUNNING].includes(null===r||void 0===r?void 0:r.status)&&E,!t&&![p.V.INITIAL,p.V.RUNNING].includes(null===r||void 0===r?void 0:r.status)&&w]})]}),re]})}),Object.values(z).length>=1&&(0,U.jsxs)(m.Z,{mt:3,children:[(0,U.jsx)(v.Z,{level:5,muted:!0,children:"Errors"}),Object.entries(z).map((function(e,n){var r=(0,s.Z)(e,2),i=r[0],o=r[1];return(!t||t===i)&&(0,U.jsx)(m.Z,{mt:n>=1?1:0,children:Object.entries(o).map((function(e){var n=(0,s.Z)(e,2),r=n[0],t=n[1],o=t.error,l=t.errors,c=t.message,u=Array.isArray(o)?o.join(" "):o;return(0,U.jsxs)("div",{children:[(0,U.jsx)(m.Z,{mb:c||(null===l||void 0===l?void 0:l.length)>=1?2:0,children:(0,U.jsxs)(b.ZP,{monospace:!0,preWrap:!0,textOverflow:!0,children:[i,!!r&&(0,U.jsxs)(b.ZP,{inline:!0,monospace:!0,muted:!0,children:["\xa0(",r,")"]}),": ",(0,U.jsx)(b.ZP,{default:!0,inline:!0,monospace:!0,children:u&&(0,U.jsx)(H(),{children:u})})]})}),(0,U.jsx)(b.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:c}),l.map((function(e){return(0,U.jsx)(b.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:e},e)}))]},"".concat(i,"-").concat(r))}))},i)}))]})]})]}),r&&!t&&(0,U.jsx)(m.Z,{my:3,children:te}),r&&t&&(0,U.jsxs)(U.Fragment,{children:[le&&(0,U.jsx)(m.Z,{my:3,children:(0,U.jsxs)(m.Z,{px:3,children:[(0,U.jsx)(v.Z,{level:5,children:"Table name"}),(0,U.jsx)(m.Z,{mt:1,children:(0,U.jsx)(b.ZP,{default:!0,monospace:!0,children:le})})]})}),ie&&(0,U.jsxs)(m.Z,{my:3,children:[(0,U.jsx)(m.Z,{px:3,children:(0,U.jsx)(v.Z,{level:5,children:"Bookmarks"})}),(0,U.jsx)(m.Z,{px:1,children:ie})]}),oe&&(0,U.jsxs)(m.Z,{my:3,children:[(0,U.jsx)(m.Z,{px:3,children:(0,U.jsx)(v.Z,{level:5,children:"Sample row"})}),(0,U.jsx)(m.Z,{px:1,children:oe})]})]})]})},ee=r(82531),ne=r(59920),re=r(33766),te=r(59e3);function ie(e){var n=e.pipeline,r=n.uuid,t=ee.ZP.pipeline_runs.list({_limit:20,_offset:0,pipeline_uuid:r},{refreshInterval:5e3}).data,i=(0,l.useMemo)((function(){return(null===t||void 0===t?void 0:t.pipeline_runs)||[]}),[t]),o=(0,te.iV)(),u=(0,l.useState)(null),s=u[0],d=u[1],a=(0,l.useState)(null),f=a[0],v=a[1];(0,l.useEffect)((function(){null!==o&&void 0!==o&&o.pipeline_run_id?v(null===i||void 0===i?void 0:i.find((function(e){return e.id===Number(o.pipeline_run_id)}))):f&&v(null),null!==o&&void 0!==o&&o.stream?d(o.stream):s&&d(null)}),[i,o,f,s]);var p=(0,l.useCallback)((function(){var e=f?D(f):[];return(0,U.jsx)($,{onClickRow:function(n){var r=e[n];(0,re.u7)({stream:s===r?null:r})},pipelineRun:f,selectedStream:s})}),[f,s]),m=(0,l.useMemo)((function(){var e="/pipelines/".concat(r,"/syncs");f&&(e="".concat(e,"?pipeline_run_id=").concat(f.id));var n=[{label:function(){return"Syncs"},linkProps:s?{as:e,href:"/pipelines/[pipeline]/syncs"}:null}];return s&&n.push({label:function(){return s}}),n}),[r,f,s]);return(0,U.jsx)(c.Z,{breadcrumbs:m,buildSidekick:p,pageName:ne.M.SYNCS,pipeline:n,title:function(e){var n=e.name;return"".concat(n," syncs")},uuid:"".concat(ne.M.SYNCS,"_").concat(r),children:i.map((function(e){var n=(null===f||void 0===f?void 0:f.id)===e.id;return(0,U.jsx)(W,{onSelect:function(e){return(0,re.u7)({pipeline_run_id:e,stream:null})},pipelineRun:e,selected:n},e.id)}))})}ie.getInitialProps=function(){var e=(0,t.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:r}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var oe=(0,u.Z)(ie)},33766:function(e,n,r){"use strict";r.d(n,{g_:function(){return f},u7:function(){return a}});var t=r(75582),i=r(82394),o=r(34376),l=r.n(o),c=r(59e3),u=r(24224);function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.replaceParams,o=r.pushHistory,u=i?{}:(0,c.iV)();n=window.location.pathname;var s=o?l().push:l().replace,a=d(d({},u),e);Object.entries(e).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],i=n[1];"undefined"!==typeof i&&null!==i||delete a[r]}));var f=(0,c.uM)(a);f.length>=1&&(f="?".concat(f));var v="".concat(n.split("?")[0]).concat(f);return s(l().router.pathname,v,{shallow:!0})}function f(e,n,r){var i=r.addingMultipleValues,o=r.isList,l=r.itemsPerPage,c=r.pushHistory,s=void 0!==c&&c,f=r.resetLimitParams,v=d({},e);i?Object.entries(n).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],i=n[1];if(Array.isArray(i)){var o="".concat(r,"[]");v[o]=i.map(String)}})):o?Object.entries(n).forEach((function(e){var n=(0,t.Z)(e,2),r=n[0],i=n[1],o=String(i),l="".concat(r,"[]"),c=v[l];c&&Array.isArray(c)?(c=c.map(String)).includes(o)?v[l]=(0,u.Od)(c,(function(e){return e===o})):v[l]=c.concat(o):v[l]=[o]})):v=d(d({},v),n),f&&(v._limit=l||20,v._offset=0),a(v,{pushHistory:s})}},59416:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/syncs",function(){return r(89745)}])}},function(e){e.O(0,[3850,2083,9565,2344,4506,6166,8180,6214,9774,2888,179],(function(){return n=59416,e(e.s=n);var n}));var n=e.O();_N_E=n}]);