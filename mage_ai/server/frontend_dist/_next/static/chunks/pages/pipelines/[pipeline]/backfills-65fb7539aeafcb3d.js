(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{1210:function(e,n,t){"use strict";t.d(n,{Z:function(){return w}});var r=t(82394),i=t(21831),u=t(82684),o=t(47999),c=t(49894),l=t(93461),a=t(57384),s=t(12344),d=t(72454),f=t(28598);function p(e,n){var t=e.children;return(0,f.jsx)(d.HS,{ref:n,children:t})}var b=u.forwardRef(p),h=t(32063),v=t(15270),O=t(82531),m=t(66166),g=t(3055),j=t(49125),k=t(91427),y=t(24141);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n,t=e.after,r=e.afterHidden,p=e.afterWidth,x=e.afterWidthOverride,w=e.before,Z=e.beforeWidth,E=e.breadcrumbs,_=e.children,C=e.errors,D=e.headerMenuItems,I=e.navigationItems,S=e.setErrors,N=e.subheaderChildren,M=e.title,A=e.uuid,R=(0,y.i)().width,H="dashboard_after_width_".concat(A),T="dashboard_before_width_".concat(A),L=(0,u.useRef)(null),U=(0,u.useState)(x?p:(0,k.U2)(H,p)),V=U[0],B=U[1],W=(0,u.useState)(!1),F=W[0],Y=W[1],z=(0,u.useState)(w?Math.max((0,k.U2)(T,Z),13*j.iI):null),K=z[0],q=z[1],G=(0,u.useState)(!1),J=G[0],X=G[1],Q=(0,u.useState)(null)[1],$=O.ZP.projects.list({},{revalidateOnFocus:!1}).data,ee=null===$||void 0===$?void 0:$.projects,ne=[];E?ne.push.apply(ne,(0,i.Z)(E)):(null===ee||void 0===ee?void 0:ee.length)>=1&&ne.push.apply(ne,[{label:function(){var e;return null===(e=ee[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return M}}]),(0,u.useEffect)((function(){null===L||void 0===L||!L.current||F||J||null===Q||void 0===Q||Q(L.current.getBoundingClientRect().width)}),[F,V,J,K,L,Q,R]),(0,u.useEffect)((function(){F||(0,k.t8)(H,V)}),[r,F,V,H]),(0,u.useEffect)((function(){J||(0,k.t8)(T,K)}),[J,K,T]);var te=(0,m.Z)(p);return(0,u.useEffect)((function(){x&&te!==p&&B(p)}),[x,p,te]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:M}),(0,f.jsx)(s.Z,{breadcrumbs:ne,menuItems:D,project:null===ee||void 0===ee?void 0:ee[0],version:null===ee||void 0===ee||null===(n=ee[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(d.Nk,{children:[0!==(null===I||void 0===I?void 0:I.length)&&(0,f.jsx)(d.lm,{children:(0,f.jsx)(v.Z,{navigationItems:I})}),(0,f.jsx)(l.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(h.Z,{after:t,afterHeightOffset:g.Mz,afterHidden:r,afterMousedownActive:F,afterWidth:V,before:w,beforeHeightOffset:g.Mz,beforeMousedownActive:J,beforeWidth:d.k1+(w?K:0),hideAfterCompletely:!0,leftOffset:w?d.k1:null,mainContainerRef:L,setAfterMousedownActive:Y,setAfterWidth:B,setBeforeMousedownActive:X,setBeforeWidth:q,children:[N&&(0,f.jsx)(b,{children:N}),_]})})]}),C&&(0,f.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===S||void 0===S?void 0:S(null)},children:(0,f.jsx)(c.Z,P(P({},C),{},{onClose:function(){return null===S||void 0===S?void 0:S(null)}}))})]})}},60547:function(e,n,t){"use strict";t.d(n,{Z:function(){return w}});var r=t(82394),i=t(21831),u=t(82684),o=t(47999),c=t(1210),l=t(34744),a=t(49894),s=t(67971),d=t(87372),f=t(86673),p=t(82531),b=t(9518),h=t(23831),v=t(73942),O=t(49125),m=b.default.div.withConfig({displayName:"indexstyle__BannerStyle",componentId:"sc-1te3pmf-0"})(["border-radius:","px;padding:","px;"," "," ",""],v.n_,3*O.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||h.Z.shadow).small,";\n  ")}),(function(e){return e.background&&"\n    background: ".concat(e.background,";\n  ")}),(function(e){return e.backgroundImage&&'\n    background-image: url("'.concat(e.backgroundImage,'");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  ')})),g=t(3055),j=t(95354),k=t(24141),y=t(28598);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n=e.after,t=e.afterHidden,r=e.afterWidth,b=e.before,h=e.beforeWidth,v=e.breadcrumbs,x=e.buildSidekick,w=e.children,Z=e.errors,E=e.headline,_=e.pageName,C=e.pipeline,D=e.setErrors,I=e.subheader,S=e.subheaderBackground,N=e.subheaderBackgroundImage,M=e.subheaderButton,A=e.subheaderText,R=e.title,H=e.uuid,T=(0,k.i)().height,L=C.uuid,U=p.ZP.pipelines.detail(L,{includes_outputs:!1},{revalidateOnFocus:!1}).data,V=null===U||void 0===U?void 0:U.pipeline,B=(0,u.useMemo)((function(){return n||(x?x({height:T,heightOffset:g.Mz,pipeline:V}):null)}),[n,x,T,V]),W=r||(B?50*O.iI:null),F=(0,u.useMemo)((function(){var e=[];return V&&(e.push.apply(e,[{label:function(){return"Pipelines"},linkProps:{href:"/pipelines"}}]),v?(e.push({label:function(){return V.uuid},linkProps:{as:"/pipelines/".concat(L,"/triggers"),href:"/pipelines/[pipeline]/triggers"}}),e.push.apply(e,(0,i.Z)(v)),e[e.length-1].bold=!0):e.push({bold:!0,label:function(){return V.name}})),e}),[v,V,L]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(c.Z,{after:B,afterHidden:t,afterWidth:W,before:b,beforeWidth:h,breadcrumbs:F,navigationItems:(0,j.H)(_,V),subheaderChildren:"undefined"!==typeof I&&I,title:V?R?R(V):V.name:null,uuid:H,children:[(M||A)&&(0,y.jsx)(f.Z,{mb:O.Mq,mt:O.cd,mx:O.cd,children:(0,y.jsx)(m,{background:S,backgroundImage:N,children:(0,y.jsxs)(s.Z,{alignItems:"center",children:[M,A&&(0,y.jsx)(f.Z,{ml:3}),A]})})}),E&&(0,y.jsx)(f.Z,{p:O.cd,children:(0,y.jsxs)(f.Z,{mt:O.cd,px:O.cd,children:[(0,y.jsx)(d.Z,{level:5,children:E}),(0,y.jsx)(l.Z,{light:!0,mt:O.cd,short:!0})]})}),w]}),Z&&(0,y.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===D||void 0===D?void 0:D(null)},children:(0,y.jsx)(a.Z,P(P({},Z),{},{onClose:function(){return null===D||void 0===D?void 0:D(null)}}))})]})}},19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return s},Vx:function(){return f},eI:function(){return d},gU:function(){return b},tL:function(){return p},vJ:function(){return h}});var r,i,u=t(82394),o=t(92083),c=t.n(o);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,i=n.started_at,o=n.status,l=null;i&&r&&(l=c()(r).valueOf()-c()(i).valueOf());return a(a({},e),{},(0,u.Z)({},t,{runtime:l,status:o}))}),{})}function d(e){if(!e)return null;var n=new Date(c()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function f(e){return d(e).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(i||(i={}));var p=(r={},(0,u.Z)(r,i.DAY,86400),(0,u.Z)(r,i.HOUR,3600),(0,u.Z)(r,i.MINUTE,60),(0,u.Z)(r,i.SECOND,1),r);function b(e){var n=i.SECOND,t=e;return e%86400===0?(t/=86400,n=i.DAY):e%3600===0?(t/=3600,n=i.HOUR):e%60===0&&(t/=60,n=i.MINUTE),{time:t,unit:n}}function h(e,n){return e*p[n]}},43526:function(e,n,t){"use strict";t.d(n,{I7:function(){return r},IB:function(){return l},VV:function(){return u},_7:function(){return o},rn:function(){return c}});var r,i=t(66050),u="datetime",o="code",c=i.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(r||(r={}));var l=[r.SECOND,r.MINUTE,r.HOUR,r.DAY,r.WEEK,r.MONTH,r.YEAR,r.CUSTOM]},66050:function(e,n,t){"use strict";var r;t.d(n,{V:function(){return r}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running"}(r||(r={}))},47409:function(e,n,t){"use strict";t.d(n,{D:function(){return o},V:function(){return u}});var r,i=t(82394),u=t(66050).V,o=(r={},(0,i.Z)(r,u.CANCELLED,"Cancelled"),(0,i.Z)(r,u.COMPLETED,"Done"),(0,i.Z)(r,u.FAILED,"Failed"),(0,i.Z)(r,u.INITIAL,"Ready"),(0,i.Z)(r,u.RUNNING,"Running"),r)},30206:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r=t(77837),i=t(75582),u=t(38860),o=t.n(u),c=t(82684),l=t(83455),a=t(34376),s=t(12691),d=t.n(s),f=t(43526),p=t(60328),b=t(10919),h=t(58180),v=t(19711),O=t(10503),m=t(47409),g=t(49125),j=t(19395),k=t(9736),y=t(28598);var x=function(e){var n=e.models,t=e.onClickRow,r=e.pipeline,i=e.selectedRow,u=(0,k.Ct)(),o=null===r||void 0===r?void 0:r.uuid,c=[{uuid:"Status"},{uuid:"Name"},{uuid:"Type"},{uuid:"Runs"},{uuid:"Backfill"},{uuid:"Started at"},{uuid:"Completed at"}];return u||c.push({label:function(){return""},uuid:"edit"}),(0,y.jsx)(h.Z,{columnFlex:[null,1,null,null,null,1,1,null],columns:c,isSelectedRow:function(e){return n[e].id===(null===i||void 0===i?void 0:i.id)},onClickRow:function(e){return t(n[e])},rows:n.map((function(e,n){var t=e.block_uuid,r=e.completed_at,i=e.end_datetime,c=e.id,l=e.name,a=e.start_datetime,s=e.started_at,h=e.status,k=e.total_run_count,x=[(0,y.jsx)(v.ZP,{default:!0,monospace:!0,children:h||"inactive"},"status"),(0,y.jsx)(d(),{as:"/pipelines/".concat(o,"/backfills/").concat(c),href:"/pipelines/[pipeline]/backfills/[...slug]",passHref:!0,children:(0,y.jsx)(b.Z,{bold:!0,sameColorAsText:!0,children:l})},"name"),(0,y.jsx)(v.ZP,{default:!0,monospace:!0,children:t?f._7:f.VV},"type"),(0,y.jsx)(v.ZP,{default:!0,monospace:!0,children:k||0},"runs"),(0,y.jsxs)(v.ZP,{default:!0,monospace:!0,children:[a&&i&&(0,y.jsxs)(y.Fragment,{children:[(0,j.Vx)(a),"\xa0-\xa0",(0,j.Vx)(i)]}),!(a&&i)&&"-"]},"backfill"),(0,y.jsx)(v.ZP,{default:!0,monospace:!0,children:s?(0,j.Vx)(s):"-"},"started_at"),(0,y.jsx)(v.ZP,{default:!0,monospace:!0,children:r?(0,j.Vx)(r):"-"},"completed_at")];return u||x.push((0,y.jsx)(p.Z,{default:!0,disabled:h===m.V.COMPLETED,iconOnly:!0,linkProps:{as:"/pipelines/".concat(o,"/backfills/").concat(c,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noBackground:!0,title:"Edit",children:(0,y.jsx)(O.I8,{default:!0,size:2*g.iI})},"".concat(n,"_edit_button"))),x})),uuid:"pipeline-runs"})},P=t(11135),w=t(60547),Z=t(41788),E=t(86673),_=t(82531),C=t(59920),D=t(33766),I=t(96510),S=t(59e3),N=t(90211);function M(e){var n=e.pipeline,t=(0,a.useRouter)(),r=n.uuid,u=_.ZP.backfills.list({_limit:20,_offset:0,include_run_count:!0,pipeline_uuid:r},{refreshInterval:6e4}),o=u.data,s=(u.mutate,(0,c.useMemo)((function(){return(null===o||void 0===o?void 0:o.backfills)||[]}),[o])),d=(0,S.iV)(),f=(0,c.useState)(null),p=f[0],b=f[1],h=(0,c.useState)(null),m=h[0],j=h[1];(0,c.useEffect)((function(){null!==d&&void 0!==d&&d.backfill_id?b(null===s||void 0===s?void 0:s.find((function(e){return e.id===Number(d.backfill_id)}))):p&&b(null)}),[s,d,p]);var k=(0,c.useMemo)((function(){var e="/pipelines/".concat(r,"/backfills"),n=[{label:function(){return"Backfills"},linkProps:p?{as:e,href:"/pipelines/[pipeline]/backfills"}:null}];return p&&n.push({label:function(){return p.name}}),n}),[p]),Z=(0,l.Db)(_.ZP.backfills.pipelines.useCreate(r),{onSuccess:function(e){return(0,I.wD)(e,{callback:function(e){var n=e.backfill.id;t.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(r,"/backfills/").concat(n,"/edit"))},onErrorCallback:function(e,n){return j({errors:n,response:e})}})}}),M=(0,i.Z)(Z,2),A=M[0],R=M[1].isLoading;return(0,y.jsxs)(w.Z,{breadcrumbs:k,errors:m,pageName:C.M.BACKFILLS,pipeline:n,setErrors:j,title:function(e){var n=e.name;return"".concat(n," backfills")},uuid:"".concat(C.M.BACKFILLS,"_").concat(r),children:[(0,y.jsx)(E.Z,{p:g.cd,children:(0,y.jsx)(P.ZP,{beforeElement:(0,y.jsx)(O.mm,{size:2.5*g.iI}),blackBorder:!0,inline:!0,loading:R,noHoverUnderline:!0,onClick:function(){return A({backfill:{name:(0,N.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/Backfills/add_new_backfill",children:"Create new backfill"})}),s&&0===s.length&&(0,y.jsx)(E.Z,{p:g.cd,children:(0,y.jsx)(v.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No backfills available"})}),(null===s||void 0===s?void 0:s.length)>=1&&(0,y.jsx)(x,{models:s,onClickRow:function(e){var n=e.id;return(0,D.u7)({backfill_id:n})},pipeline:n,selectedRow:p})]})}M.getInitialProps=function(){var e=(0,r.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var A=(0,Z.Z)(M)},33766:function(e,n,t){"use strict";t.d(n,{g_:function(){return f},u7:function(){return d}});var r=t(75582),i=t(82394),u=t(34376),o=t.n(u),c=t(59e3),l=t(24224);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.replaceParams,u=t.pushHistory,l=i?{}:(0,c.iV)();n=window.location.pathname;var a=u?o().push:o().replace,d=s(s({},l),e);Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];"undefined"!==typeof i&&null!==i||delete d[t]}));var f=(0,c.uM)(d);f.length>=1&&(f="?".concat(f));var p="".concat(n.split("?")[0]).concat(f);return a(o().router.pathname,p,{shallow:!0})}function f(e,n,t){var i=t.addingMultipleValues,u=t.isList,o=t.itemsPerPage,c=t.pushHistory,a=void 0!==c&&c,f=t.resetLimitParams,p=s({},e);i?Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];if(Array.isArray(i)){var u="".concat(t,"[]");p[u]=i.map(String)}})):u?Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],u=String(i),o="".concat(t,"[]"),c=p[o];c&&Array.isArray(c)?(c=c.map(String)).includes(u)?p[o]=(0,l.Od)(c,(function(e){return e===u})):p[o]=c.concat(u):p[o]=[u]})):p=s(s({},p),n),f&&(p._limit=o||20,p._offset=0),d(p,{pushHistory:a})}},37459:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills",function(){return t(30206)}])}},function(e){e.O(0,[3850,2083,2344,4506,6166,8180,6214,9774,2888,179],(function(){return n=37459,e(e.s=n);var n}));var n=e.O();_N_E=n}]);