(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{92709:function(e,n,t){"use strict";t.d(n,{IY:function(){return o},Jf:function(){return l},LR:function(){return i},NR:function(){return s},b7:function(){return r}});var r="edit",i="[ERR_BLOCK_EXISTS]",l={uuid:"All files"},o={uuid:"Files in pipeline"},s=[l,o]},74395:function(e,n,t){"use strict";t.d(n,{M:function(){return o},W:function(){return l}});var r=t(38626),i=t(46684),l=34*t(70515).iI,o=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},8955:function(e,n,t){"use strict";t.d(n,{G7:function(){return y},ZP:function(){return P},u$:function(){return x}});var r=t(75582),i=t(82394),l=t(26304),o=t(90299),s=t(9134),c=t(17586),u=t(38276),a=t(30160),d=t(75499),p=t(70515),f=t(16488),h=t(42122),m=t(28598),v=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=76,Z={uuid:"Run details"},b={uuid:"Dependency tree"},y=[b,Z];function P(e){var n=e.height,t=e.heightOffset,i=e.pipeline,g=e.selectedRun,P=e.selectedTab,_=e.setSelectedTab,O=j({},(0,l.Z)(e,v));g?O.blockStatus=(0,f.IJ)(null===g||void 0===g?void 0:g.block_runs):O.noStatus=!0;var S=(0,h.Kn)(null===g||void 0===g?void 0:g.variables)?j({},null===g||void 0===g?void 0:g.variables):(null===g||void 0===g?void 0:g.variables)||{},w=null===g||void 0===g?void 0:g.event_variables;if(w&&(0,h.Kn)(w)&&!(0,h.Qr)(w))if((0,h.Kn)(S)&&S.hasOwnProperty("event")){var I=(0,h.Kn)(S.event)?S.event:{};S.event=j(j({},I),w)}else S.event=j({},w);var k=[];S&&JSON.stringify(S,null,2).split("\n").forEach((function(e){k.push("    ".concat(e))}));var T=g&&[["Run ID",null===g||void 0===g?void 0:g.id],["Variables",(0,m.jsx)(s.Z,{language:"json",small:!0,source:k.join("\n")},"variable_value")]],E=g&&(0,m.jsx)(u.Z,{pb:p.cd,px:p.cd,children:(0,m.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:T.map((function(e,n){var t=(0,r.Z)(e,2),i=t[0],l=t[1];return[(0,m.jsx)(a.ZP,{monospace:!0,muted:!0,children:i},"key_".concat(n)),(0,m.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:l},"val_".concat(n))]})),uuid:"LogDetail"})}),C=P&&_;return(0,m.jsxs)(m.Fragment,{children:[C&&(0,m.jsx)(u.Z,{py:p.cd,children:(0,m.jsx)(o.Z,{onClickTab:_,selectedTabUUID:null===P||void 0===P?void 0:P.uuid,tabs:y})}),(!C||b.uuid===(null===P||void 0===P?void 0:P.uuid))&&(0,m.jsx)(c.Z,j(j({},O),{},{height:n,heightOffset:(t||0)+(C?x:0),pipeline:i})),Z.uuid===(null===P||void 0===P?void 0:P.uuid)&&E]})}},8916:function(e,n,t){"use strict";t.d(n,{FS:function(){return c},JZ:function(){return a},e7:function(){return d},wx:function(){return u}});var r=t(75582),i=t(82394),l=t(30229);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e){return"string"===typeof e?e:JSON.stringify(e)}function u(e,n){var t,r;return null===e||void 0===e||null===(t=e.find((function(e){var t=e.block;return n(t)})))||void 0===t||null===(r=t.variables)||void 0===r?void 0:r.map((function(e){var n=e.value;return s(s({},e),{},{value:c(n)})}))}function a(e,n){return n===l.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===l.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function d(e){return e?Object.entries(e).reduce((function(e,n){var t=(0,r.Z)(n,2),l=t[0],o=t[1],c=o;try{c=JSON.parse(o)}catch(u){}return s(s({},e),{},(0,i.Z)({},l,c))}),{}):e}},88785:function(e,n,t){"use strict";t.d(n,{J:function(){return c},U:function(){return s}});var r=t(38626),i=t(44897),l=t(42631),o=t(70515),s=r.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-m7tlau-0"})(["border-radius:","px;border-style:solid;border-width:2px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],l.TR,14*o.iI,o.cd*o.iI,o.cd*o.iI,40*o.iI,(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.interactive||i.Z.interactive).linkPrimary,";\n  ")})),c=r.default.div.withConfig({displayName:"indexstyle__DateSelectionContainer",componentId:"sc-m7tlau-1"})(["border-radius:","px;padding:","px;"," "," ",""],l.n_,o.tr,(function(e){return"\n    background-color: ".concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.absolute&&"\n    position: absolute;\n    z-index: 2;\n    right: 0;\n    top: ".concat(2.5*o.iI,"px;\n  ")}),(function(e){return e.topPosition&&"\n    top: -".concat(42*o.iI,"px;\n  ")}))},55072:function(e,n,t){"use strict";t.d(n,{Et:function(){return p},Q:function(){return d}});t(82684);var r=t(71180),i=t(55485),l=t(38276),o=t(31748),s=t(72473),c=t(79633),u=t(70515),a=t(28598),d=30,p=9;n.ZP=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,p=e.totalPages,f=[],h=t;if(h>p)f=Array.from({length:p},(function(e,n){return n}));else{var m=Math.floor(h/2),v=n-m;n+m>=p?(v=p-h+2,h-=2):n-m<=0?(v=0,h-=2):(h-=4,v=n-Math.floor(h/2)),f=Array.from({length:h},(function(e,n){return n+v}))}return(0,a.jsx)(a.Fragment,{children:p>0&&(0,a.jsxs)(i.ZP,{alignItems:"center",children:[(0,a.jsx)(r.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,a.jsx)(s.Hd,{size:1.5*u.iI,stroke:o.Av})}),!f.includes(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!f.includes(1)&&(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),f.map((function(e){return(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{backgroundColor:e===n&&c.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!f.includes(p-1)&&(0,a.jsxs)(a.Fragment,{children:[!f.includes(p-2)&&(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,a.jsx)(l.Z,{ml:1,children:(0,a.jsx)(r.Z,{borderLess:!0,noBackground:!0,onClick:function(){return d(p-1)},children:p})},p-1)]}),(0,a.jsx)(l.Z,{ml:1}),(0,a.jsx)(r.Z,{disabled:n===p-1,onClick:function(){return d(n+1)},children:(0,a.jsx)(s.Kw,{size:1.5*u.iI,stroke:o.Av})})]})})}},83784:function(e,n,t){"use strict";t.d(n,{C:function(){return r}});var r="global"},14805:function(e,n,t){"use strict";var r=t(82394),i=t(44495),l=t(55485),o=t(44085),s=t(38276),c=t(30160),u=t(88785),a=t(70515),d=t(86735),p=t(28598);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.selectedDate,t=e.selectedTime,r=e.setSelectedDate,f=e.setSelectedTime,m=e.topPosition;return(0,p.jsxs)(u.J,{absolute:!0,topPosition:m,children:[(0,p.jsx)(i.ZP,{onChange:r,value:n}),(0,p.jsx)(s.Z,{mb:2}),(0,p.jsxs)(l.ZP,{alignItems:"center",children:[(0,p.jsx)(c.ZP,{default:!0,large:!0,children:"Time (UTC):"}),(0,p.jsx)(s.Z,{pr:2}),(0,p.jsx)(o.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{hour:e.target.value})}))},paddingRight:5*a.iI,placeholder:"HH",value:null===t||void 0===t?void 0:t.hour,children:(0,d.m5)(24,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"hour_".concat(e))}))}),(0,p.jsx)(s.Z,{px:1,children:(0,p.jsx)(c.ZP,{bold:!0,large:!0,children:":"})}),(0,p.jsx)(o.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{minute:e.target.value})}))},paddingRight:5*a.iI,placeholder:"MM",value:null===t||void 0===t?void 0:t.minute,children:(0,d.m5)(60,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"minute_".concat(e))}))})]})]})}},9134:function(e,n,t){"use strict";var r=t(82684),i=t(68792),l=t(31811),o=t(38626),s=t(65292),c=t(44897),u=t(95363),a=t(70515),d=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,p=e.showLineNumbers,f=e.small,h=e.source,m=e.wrapLines,v=(0,r.useContext)(o.ThemeContext);function g(e){var r=e.value;return(0,d.jsx)(l.Z,{customStyle:{backgroundColor:(v.background||c.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:u.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,maxWidth:t,paddingBottom:2*a.iI,paddingTop:2*a.iI},language:n,lineNumberStyle:{color:(v.content||c.Z.content).muted},showLineNumbers:p,style:s._4,useInlineStyles:!0,wrapLines:m,children:r})}return(0,d.jsx)(i.D,{components:{code:function(e){var n=e.children;return(0,d.jsx)(g,{value:n})}},children:h})}},39457:function(e,n,t){"use strict";var r,i=t(82394),l=(t(82684),t(64866)),o=t(21764),s=t(55485),c=t(48670),u=t(38276),a=t(30160),d=t(12468),p=t(72473),f=t(70515),h=t(28598);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.LEFT="left",e.RIGHT="right"}(r||(r={})),n.Z=function(e){var n,t=e.children,i=e.copiedText,m=e.iconPosition,g=void 0===m?r.LEFT:m,j=e.inverted,x=e.linkProps,Z=e.linkText,b=e.monospace,y=e.muted,P=e.small,_=e.toastMessage,O=e.withCopyIcon;return t?n=(0,h.jsx)("span",{children:t}):O&&(n=(0,h.jsx)(c.Z,v(v({href:"#",inline:!0,muted:y,preventDefault:!0,sameColorAsText:!0,small:P},x),{},{children:(0,h.jsxs)(s.ZP,{alignItems:"center",children:[g===r.LEFT&&(0,h.jsx)(u.Z,{mr:Z?1:0,children:(0,h.jsx)(s.ZP,{alignItems:"center",children:(0,h.jsx)(p.CK,{inverted:j,muted:y,size:2*f.iI})})}),Z&&(0,h.jsx)(a.ZP,{inverted:j,monospace:b,muted:y,small:P,children:Z}),g===r.RIGHT&&(0,h.jsx)(u.Z,{ml:Z?1:0,children:(0,h.jsx)(s.ZP,{alignItems:"center",children:(0,h.jsx)(p.CK,{inverted:j,muted:y})})})]})}))),(0,h.jsx)(d.Z,{block:!0,label:"Copy",size:null,widthFitContent:!0,children:(0,h.jsx)(l.CopyToClipboard,{onCopy:function(){return o.Am.success(_||"Successfully copied to clipboard.",{position:o.Am.POSITION.BOTTOM_RIGHT,toastId:i})},text:i,children:n})})}},90299:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(82684),i=t(71180),l=t(55485),o=t(64888),s=t(38276),c=t(30160),u=t(8059),a=t(38626),d=t(70515),p=t(47041),f=a.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],d.cd*d.iI,d.cd*d.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),p.w5),h=t(3314),m=t(28598);var v=function(e){var n=e.allowScroll,t=e.compact,a=e.contained,p=e.noPadding,v=e.onClickTab,g=e.regularSizeText,j=e.selectedTabUUID,x=e.small,Z=e.tabs,b=(0,r.useMemo)((function(){var e=Z.length,n=[];return Z.forEach((function(r,a){var p=r.Icon,f=r.IconSelected,Z=r.label,b=r.uuid,y=b===j,P=y&&f||p,_=Z?Z():b,O=(0,m.jsxs)(l.ZP,{alignItems:"center",children:[P&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(P,{default:!y,size:2*d.iI}),(0,m.jsx)(s.Z,{mr:1})]}),(0,m.jsx)(c.ZP,{bold:!0,default:!y,noWrapping:!0,small:!g,children:_})]});a>=1&&e>=2&&n.push((0,m.jsx)("div",{style:{marginLeft:1.5*d.iI}},"spacing-".concat(b))),y?n.push((0,m.jsx)(o.Z,{backgroundGradient:u.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:t||x,onClick:function(e){(0,h.j)(e),v(r)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:x,children:O},b)):n.push((0,m.jsx)("div",{style:{padding:2},children:(0,m.jsx)(i.Z,{borderLess:!0,compact:t||x,default:!0,onClick:function(e){(0,h.j)(e),v(r)},outline:!0,small:x,children:O})},"button-tab-".concat(b)))})),n}),[t,v,j,x,Z]),y=(0,m.jsx)(l.ZP,{alignItems:"center",children:b});return a?y:(0,m.jsx)(f,{allowScroll:n,noPadding:p,children:y})}},666:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return qe}});var r,i=t(75582),l=t(77837),o=t(82394),s=t(38860),c=t.n(s),u=t(82684),a=t(83455),d=t(34376),p=t(71180),f=t(39457),h=t(15338),m=t(55485),v=t(85854),g=t(48670),j=t(55072),x=t(75457),Z=t(53943),b=t(44265),y=t(30229),P=t(83784),_=t(44085),O=t(38276),S=t(4190),w=t(75499),I=t(48381),k=t(30160),T=t(12468),E=t(35686),C=t(8955),M=t(74395),D=t(44425),N=t(72473),A=t(70515),H=t(28795),U=t(86735);!function(e){e.AWS="aws_event"}(r||(r={}));var F=[{label:function(){return"AWS"},uuid:r.AWS}],L=(0,U.HK)(F,(function(e){return e.uuid})),R=t(8916),W=t(16488),Y=t(3917),z=t(44375),q=t(15610),K=t(42122),V=t(50178),X=t(72619),B=t(3314),J=t(69419),G=t(28598);function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ee=function(e){var n=e.errors,t=e.fetchPipelineSchedule,r=e.pipeline,l=e.pipelineSchedule,o=e.setErrors,s=e.variables,c=(0,d.useRouter)(),F=(0,V.Ct)(),$=(r||{}).uuid,ee=l||{},ne=ee.description,te=ee.id,re=ee.event_matchers,ie=ee.name,le=ee.next_pipeline_run_date,oe=ee.schedule_interval,se=ee.schedule_type,ce=ee.settings,ue=ee.sla,ae=ee.start_time,de=ee.status,pe=ee.tags,fe=ee.variables,he=void 0===fe?{}:fe,me=(0,J.iV)(),ve={_limit:30,_offset:30*(null!==me&&void 0!==me&&me.page?me.page:0)};null!==me&&void 0!==me&&me.status&&(ve.status=me.status),null!==l&&void 0!==l&&l.global_data_product_uuid&&(ve.global_data_product_uuid=null===l||void 0===l?void 0:l.global_data_product_uuid);var ge=E.ZP.pipeline_runs.pipeline_schedules.list(te,ve,{refreshInterval:3e3,revalidateOnFocus:!0}),je=ge.data,xe=ge.mutate,Ze=(0,u.useMemo)((function(){return(null===je||void 0===je?void 0:je.pipeline_runs)||[]}),[je]),be=(0,u.useMemo)((function(){var e;return(null===je||void 0===je||null===(e=je.metadata)||void 0===e?void 0:e.count)||[]}),[je]),ye=(0,u.useState)(null),Pe=ye[0],_e=ye[1],Oe=(0,u.useMemo)((function(){var e=null!==me&&void 0!==me&&me.page?me.page:0;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Z.Z,{fetchPipelineRuns:xe,onClickRow:function(e){return _e((function(n){var t=Ze[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:Ze,selectedRun:Pe,setErrors:o}),(0,G.jsx)(O.Z,{p:2,children:(0,G.jsx)(j.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),t=Q(Q({},me),{},{page:n>=0?n:0});c.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat($,"/triggers/").concat(te,"?").concat((0,J.uM)(t)))},page:Number(e),totalPages:Math.ceil(be/30)})})]})}),[xe,Ze,te,$,me,c,Pe,o,be]),Se=(0,u.useState)(C.G7[0]),we=Se[0],Ie=Se[1],ke=(0,a.Db)((function(e){return E.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:(0,K.gR)(e,["id"])})}),{onSuccess:function(e){return(0,X.wD)(e,{callback:function(){t()},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),Te=(0,i.Z)(ke,2),Ee=Te[0],Ce=Te[1].isLoading,Me=E.ZP.pipeline_triggers.pipelines.list($),De=Me.data,Ne=Me.mutate,Ae=(0,u.useMemo)((function(){return(0,U.HK)((null===De||void 0===De?void 0:De.pipeline_triggers)||[],(function(e){return e.name}))}),[De]),He=(0,u.useMemo)((function(){return!(null===Ae||void 0===Ae||!Ae[null===l||void 0===l?void 0:l.name])}),[l,Ae]),Ue=(0,a.Db)(E.ZP.pipeline_triggers.pipelines.useCreate($),{onSuccess:function(e){return(0,X.wD)(e,{callback:function(){Ne()},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),Fe=(0,i.Z)(Ue,2),Le=Fe[0],Re=Fe[1].isLoading,We=(0,u.useMemo)((function(){return y.fq.ACTIVE===de}),[de]),Ye=(0,u.useMemo)((function(){var e,n,t={default:!0,size:1.5*A.iI},r=[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.VW,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger type"})]},"trigger_type_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:null===(e=y.Z4[se])||void 0===e?void 0:e.call(y.Z4)},"trigger_type")],[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.rs,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Status"})]},"trigger_status_label"),(0,G.jsx)(k.ZP,{danger:!We,monospace:!0,success:We,children:de},"trigger_status")]];if(ne&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.KJ,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Description"})]},"trigger_description_label"),(0,G.jsx)(k.ZP,{children:ne},"trigger_description")]),ue){var i=(0,W.gU)(ue),o=i.time,s=i.unit,c=1===o?s:"".concat(s,"s");r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.kI,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"SLA"})]},"trigger_sla_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:"".concat(o," ").concat(c)},"trigger_sla")])}if(oe&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Pf,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Frequency"})]},"trigger_frequency_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:oe.replace("@","")},"trigger_frequency")],[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Next run date"})]},"trigger_next_run_date_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:le?(0,Y.d$)(le,{includeSeconds:!0,utcFormat:!0}):"N/A"},"trigger_next_run_date")]),ae&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Start date"})]},"trigger_start_date_label"),(0,G.jsx)(k.ZP,{monospace:!0,children:ae},"trigger_start_date")]),y.Xm.API===se){var u=(0,W.M8)(l);r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Ae,Q({},t)),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"API endpoint"})]},"trigger_api_endpoint_label"),(0,G.jsx)(f.Z,{copiedText:u,children:(0,G.jsx)(k.ZP,{monospace:!0,small:!0,children:u})},"trigger_api_endpoint")])}if(null!==ce&&void 0!==ce&&ce.timeout){var a=(0,W.gU)(null===ce||void 0===ce?void 0:ce.timeout),d=a.time,p=a.unit,h=1===d?p:"".concat(p,"s");r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(T.Z,{default:!0,label:"Timeout set for runs of this trigger",size:1.5*A.iI,widthFitContent:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Timeout"})]},"trigger_timeout"),(0,G.jsx)(k.ZP,{monospace:!0,children:"".concat(d," ").concat(h)},"trigger_timeout_label")])}null!==ce&&void 0!==ce&&ce.skip_if_previous_running&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(T.Z,{default:!0,label:"Skip current run if any previous runs are still in progress",size:1.5*A.iI,widthFitContent:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Skip if running"})]},"trigger_skip_if_running"),(0,G.jsx)(k.ZP,{monospace:!0,children:null===(n=ce.skip_if_previous_running)||void 0===n?void 0:n.toString()},"trigger_skip_if_running_label")]);return null!==ce&&void 0!==ce&&ce.allow_blocks_to_fail&&r.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(T.Z,{default:!0,label:"Trigger runs will continue running blocks if other unrelated blocks fail",size:1.5*A.iI,widthFitContent:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Allow blocks to fail"})]},"trigger_allow_blocks_to_fail"),(0,G.jsx)(k.ZP,{monospace:!0,children:ce.allow_blocks_to_fail.toString()},"trigger_allow_blocks_to_fail_label")]),(0,G.jsx)(w.Z,{columnFlex:[null,1],rows:r})}),[ne,We,le,l,oe,se,ce,ue,ae,de]),ze=(0,u.useMemo)((function(){return he||{}}),[he]),qe=(0,u.useMemo)((function(){var e,n=[];return(0,K.Qr)(ze)?n=(0,R.wx)(s,(function(e){return e.uuid===P.C})):Object.entries(ze).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],l=t[1];b.sZ!==r&&n.push({uuid:r,value:(0,R.FS)(l)})})),"undefined"!==typeof(n=(0,R.JZ)(n||[],se))&&null!==(e=n)&&void 0!==e&&e.length?(0,G.jsx)(w.Z,{columnFlex:[null,1],rows:n.map((function(e){var n=e.uuid,t=e.value;return[(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:n},"settings_variable_label_".concat(n)),(0,G.jsx)(k.ZP,{monospace:!0,children:t},"settings_variable_".concat(n))]}))}):null}),[se,ze,s]),Ke=(0,u.useMemo)((function(){var e,n,t=[],i=null===ze||void 0===ze||null===(e=ze[b.sZ])||void 0===e?void 0:e.blocks;return null===r||void 0===r||null===(n=r.blocks)||void 0===n||n.forEach((function(e){var n=e.type,r=e.uuid;if(D.tf.DBT===n){var l,o=(null===i||void 0===i||null===(l=i[r])||void 0===l?void 0:l.configuration)||{},s=o.flags,c=o.prefix,u=o.suffix,a=(0,z.IU)(e).name;(s||c||u)&&t.push({flags:s,prefix:c,suffix:u,uuid:a})}})),"undefined"!==typeof t&&null!==t&&void 0!==t&&t.length?(0,G.jsx)(w.Z,{columnFlex:[1,null],rows:t.map((function(e){var n=e.flags,t=e.prefix,r=e.suffix,i=e.uuid;return[(0,G.jsxs)(k.ZP,{monospace:!0,small:!0,children:[t&&(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:t}),i,r&&(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:r})]},"settings_variable_label_".concat(i)),(0,G.jsx)(k.ZP,{monospace:!0,muted:!0,small:!0,children:n&&n.join(", ")},"settings_variable_".concat(i))]}))}):null}),[r,ze]),Ve=(0,u.useMemo)((function(){return(0,G.jsx)(w.Z,{columnFlex:[null,1],columns:[{uuid:"Provider"},{uuid:"Event"}],rows:null===re||void 0===re?void 0:re.map((function(e,n){var t=e.event_type,r=e.name;return[(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:L[t].label()},"".concat(t,"_").concat(n,"_label")),(0,G.jsx)(k.ZP,{monospace:!0,children:r},"".concat(t,"_").concat(n,"_name"))]}))})}),[re]);return(0,G.jsxs)(x.Z,{afterHidden:!Pe,before:(0,G.jsxs)(M.M,{children:[(0,G.jsxs)(O.Z,{mb:A.HN,pt:A.cd,px:A.cd,children:[(0,G.jsxs)(O.Z,{mb:A.cd,children:[y.Xm.TIME===se&&(0,G.jsx)(N.kO,{size:5*A.iI}),y.Xm.EVENT===se&&(0,G.jsx)(N.Jp,{size:5*A.iI}),y.Xm.API===se&&(0,G.jsx)(N.Bf,{size:5*A.iI}),!se&&(0,G.jsx)(N.VW,{size:5*A.iI})]}),(0,G.jsx)(v.Z,{children:ie})]}),(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),Ye,(null===re||void 0===re?void 0:re.length)>=1&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Events"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),Ve]}),qe&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Runtime variables"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),qe]}),Ke&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"dbt runtime settings"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),Ke]}),(null===pe||void 0===pe?void 0:pe.length)>=1&&(0,G.jsxs)(O.Z,{my:A.HN,children:[(0,G.jsx)(O.Z,{px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Tags"})}),(0,G.jsx)(h.Z,{light:!0,mt:1,short:!0}),(0,G.jsx)(O.Z,{mt:A.cd,px:A.cd,children:(0,G.jsx)(I.Z,{tags:null===pe||void 0===pe?void 0:pe.map((function(e){return{uuid:e}}))})})]}),(0,G.jsx)(O.Z,{my:A.HN,children:(0,G.jsxs)(O.Z,{px:A.cd,children:[(0,G.jsxs)(v.Z,{level:5,children:[He&&"Trigger exists in code",!He&&"Store trigger in code"]}),(0,G.jsx)(O.Z,{mt:1,children:(0,G.jsxs)(k.ZP,{default:!0,children:["Save or update the trigger and its settings in the pipeline\u2019s metadata and version control the trigger using Git. For more information, please read the ",(0,G.jsx)(g.Z,{href:"https://docs.mage.ai/guides/triggers/configure-triggers-in-code",openNewWindow:!0,children:"documentation"}),"."]})}),(0,G.jsxs)(O.Z,{mt:A.cd,children:[!De&&(0,G.jsx)(S.Z,{inverted:!0}),De&&(0,G.jsxs)(p.Z,{disabled:!(null!==l&&void 0!==l&&l.id),loading:Re,onClick:function(){Le({pipeline_trigger:{pipeline_schedule_id:null===l||void 0===l?void 0:l.id}})},secondary:!0,children:[He&&"Update trigger in code",!He&&"Save trigger in code"]})]})]})})]}),beforeWidth:M.W,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat($,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return ie},linkProps:{as:"/pipelines/".concat($,"/triggers/").concat(te),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],buildSidekick:function(e){return(0,C.ZP)(Q(Q({},e),{},{selectedRun:Pe,selectedTab:we,setSelectedTab:Ie}))},errors:n,pageName:H.M.TRIGGERS,pipeline:r,setErrors:o,subheader:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(p.Z,{beforeIcon:We?(0,G.jsx)(N.dz,{size:2*A.iI}):(0,G.jsx)(N.Py,{inverted:!F,size:2*A.iI}),danger:We&&!F,loading:Ce,onClick:function(e){(0,B.j)(e),Ee({id:te,status:We?y.fq.INACTIVE:y.fq.ACTIVE})},outline:!0,success:!We&&!F,children:We?"Pause trigger":"Start trigger"}),(0,G.jsx)(O.Z,{mr:A.cd}),!F&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat($,"/triggers/").concat(te,"/edit"),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Edit trigger"}),(0,G.jsx)(O.Z,{mr:A.cd})]}),(0,G.jsxs)(_.Z,{compact:!0,defaultColor:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?c.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat($,"/triggers/").concat(te)):(0,q.u7)({page:0,status:e.target.value})},paddingRight:4*A.iI,placeholder:"Select run status",value:(null===me||void 0===me?void 0:me.status)||"all",children:[(0,G.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),b.IK.map((function(e){return(0,G.jsx)("option",{value:e,children:b.Do[e]},e)}))]})]}),title:function(){return ie},uuid:"triggers/detail",children:[(0,G.jsx)(O.Z,{mt:A.cd,px:A.cd,children:(0,G.jsx)(v.Z,{level:5,children:"Runs for this trigger"})}),(0,G.jsx)(h.Z,{light:!0,mt:A.cd,short:!0}),Oe]})},ne=t(21831),te=t(20026),re=t.n(te),ie=t(92083),le=t.n(ie),oe=t(21764),se=t(14805),ce=t(70652),ue=t(50724),ae=t(9134),de=t(38626),pe=t(39867),fe=t(17488),he=t(55283);function me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?me(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ge=function(e){var n=e.blocks,t=e.updateVariables,r=e.variables,i=(0,u.useContext)(de.ThemeContext),l=(0,u.useCallback)((function(e,n){return t((function(){var t=(null===r||void 0===r?void 0:r.__mage_variables)||{},i=(null===t||void 0===t?void 0:t.blocks)||{},l=i[e]||{},s=(null===l||void 0===l?void 0:l.configuration)||{};return ve(ve({},r),{},{__mage_variables:ve(ve({},t),{},{blocks:ve(ve({},i),{},(0,o.Z)({},e,ve(ve({},l),{},{configuration:ve(ve({},s),n)})))})})}))}),[t,r]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(v.Z,{children:"dbt runtime settings"}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(w.Z,{columnFlex:[1,null,null,null],columns:[{uuid:"Block"},{uuid:"Flags"},{uuid:"Prefix"},{uuid:"Suffix"}],compact:!0,rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,o,s=e.type,c=e.uuid,u=(0,z.IU)(e).name,a=(0,he.qn)(s,{blockColor:e.color,theme:i}).accent,d=null===r||void 0===r||null===(n=r.__mage_variables)||void 0===n||null===(t=n.blocks)||void 0===t||null===(o=t[c])||void 0===o?void 0:o.configuration,p=d||{},f=p.prefix,h=p.suffix,v=(null===d||void 0===d?void 0:d.flags)||[],g=!(null===v||void 0===v||!v.includes(z.Dy));return[(0,G.jsx)(T.Z,{block:!0,label:(0,G.jsx)(k.ZP,{monospace:!0,small:!0,children:c}),size:null,widthFitContent:!0,children:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(pe.Z,{color:a,size:1.5*A.iI,square:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsxs)(k.ZP,{monospace:!0,small:!0,children:[f&&(0,G.jsx)(k.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:f}),u,h&&(0,G.jsx)(k.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:h})]})]})},"uuid-".concat(c)),(0,G.jsx)(m.ZP,{alignItems:"center",children:(0,G.jsx)(ce.Z,{checked:g,label:z.Dy,monospace:!0,onClick:function(){return l(c,{flags:g?(0,U.Od)(v,(function(e){return z.Dy===e})):v.concat(z.Dy)})},small:!0})},"flags-".concat(c)),(0,G.jsx)(fe.Z,{compact:!0,monospace:!0,onChange:function(e){return l(c,{prefix:e.target.value})},placeholder:"N+, +",small:!0,value:f,width:10*A.iI},"prefix-".concat(c)),(0,G.jsx)(fe.Z,{compact:!0,monospace:!0,onChange:function(e){return l(c,{suffix:e.target.value})},placeholder:"+, +N",small:!0,value:h,width:10*A.iI},"suffix-".concat(c))]}))})})]})},je=t(97618),xe=t(26304),Ze=t(44897),be=t(95363),ye=t(61896),Pe=["children","large","lineHeight","ordered"];function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Se=(0,de.css)([""," "," "," "," "," "," "," "," "," ",""],(function(e){return!e.muted&&"\n    color: ".concat((e.theme.content||Ze.Z.content).default,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.content||Ze.Z.content).muted,";\n  ")}),(function(e){return e.inverted&&"\n    color: ".concat((e.theme.content||Ze.Z.content).inverted,";\n  ")}),(function(e){return e.color&&"\n    color: ".concat(e.color,";\n  ")}),(function(e){return!e.monospace&&"\n    font-family: ".concat(be.ry,";\n  ")}),(function(e){return e.monospace&&"\n    font-family: ".concat(be.Vp,";\n  ")}),(function(e){return e.large&&"\n    ".concat(ye.x_,"\n  ")}),(function(e){return!e.large&&!e.small&&"\n    ".concat(ye.i3,"\n  ")}),(function(e){return e.small&&"\n    ".concat(ye.J5,"\n  ")}),(function(e){return e.lineHeight&&"\n    line-height: ".concat(e.lineHeight,"px !important;\n  ")})),we=de.default.ul.withConfig({displayName:"List__UnorderedListStyle",componentId:"sc-1f6yhbi-0"})(["",""],Se),Ie=de.default.ol.withConfig({displayName:"List__OrderedListStyle",componentId:"sc-1f6yhbi-1"})(["",""],Se),ke=de.default.li.withConfig({displayName:"List__ListItemStyle",componentId:"sc-1f6yhbi-2"})(["",""],(function(e){return e.large&&e.marginTop&&"\n    margin-top: ".concat(1*A.iI,"px;\n  ")}));var Te=function(e){var n=e.children,t=e.large,r=e.lineHeight,i=e.ordered,l=(0,xe.Z)(e,Pe),o=i?Ie:we;return(0,G.jsx)(o,Oe(Oe({large:t,lineHeight:r},l),{},{children:u.Children.map(n,(function(e,n){var r;return(0,G.jsx)(ke,Oe(Oe({large:t,marginTop:n>=1},l),{},{children:u.cloneElement(e)}),(null===(r=e.props)||void 0===r?void 0:r.key)||n)}))}))},Ee=t(57653),Ce=t(81334),Me=t(69650),De=t(88785),Ne=t(31098);function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function He(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ue=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:y.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:y.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:y.Xm.API}];return e?n.slice(0,1):n};var Fe=function(e){var n=e.errors,t=e.fetchPipelineSchedule,r=e.pipeline,l=e.pipelineSchedule,s=e.setErrors,c=e.variables,j=(0,d.useRouter)(),Z=null===r||void 0===r?void 0:r.uuid,S=null===l||void 0===l?void 0:l.id,I=(null===r||void 0===r?void 0:r.type)===Ee.qL.STREAMING,T=(0,u.useState)([]),C=T[0],M=T[1],L=(0,u.useState)(!1),Y=L[0],z=L[1],q=(0,u.useState)(!1),V=q[0],B=q[1],J=(0,u.useState)(),$=J[0],Q=J[1],ee=(0,u.useState)({}),te=ee[0],ie=ee[1],de=(0,u.useState)(null),pe=de[0],he=de[1],me=(0,u.useState)(!1),ve=me[0],xe=me[1],Ze=(0,u.useState)(null),be=Ze[0],ye=Ze[1],Pe=(0,u.useMemo)((function(){return(0,R.wx)(c,(function(e){return e.uuid===P.C}))}),[c]),_e=pe||{},Oe=_e.description,Se=_e.name,we=_e.schedule_interval,Ie=_e.schedule_type,ke=_e.settings,Ae=void 0===ke?{}:ke,Fe=(_e.sla,_e.start_time),Le=_e.tags,Re=_e.variables,We=void 0===Re?{}:Re;(0,u.useEffect)((function(){Ae&&Q(Ae)}),[Ae]);var Ye=(0,u.useState)(null),ze=Ye[0],qe=Ye[1],Ke=(0,u.useState)({hour:"00",minute:"00"}),Ve=Ke[0],Xe=Ke[1],Be=(0,u.useState)({dayOfMonth:null,dayOfWeek:null,hour:null,minute:null,second:null}),Je=Be[0],Ge=Be[1],$e=E.ZP.event_rules.detail(y.Xm.EVENT===Ie?"aws":null).data,Qe=(0,u.useMemo)((function(){var e;return(null===$e||void 0===$e||null===(e=$e.event_rule)||void 0===e?void 0:e.rules)||[]}),[$e]),en=(0,u.useMemo)((function(){return(0,U.HK)(Qe,(function(e){return e.name}))}),[Qe]),nn=(0,a.Db)(E.ZP.pipeline_schedules.useUpdate(S),{onSuccess:function(e){return(0,X.wD)(e,{callback:function(){t(),j.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(Z,"/triggers/").concat(S))},onErrorCallback:function(e,n){return s({errors:n,response:e})}})}}),tn=(0,i.Z)(nn,2),rn=tn[0],ln=tn[1].isLoading,on=(0,u.useMemo)((function(){return We||{}}),[We]);(0,u.useEffect)((function(){if(Fe){var e=Fe.split(" ")[1];qe((0,W.eI)(Fe)),Xe({hour:e.substring(0,2),minute:e.substring(3,5)});var n=le()(Fe).utc();Ge({dayOfMonth:n.date(),dayOfWeek:n.day(),hour:n.hours(),minute:n.minutes(),second:n.seconds()})}else{var t=new Date;qe(t),Xe({hour:String(t.getUTCHours()).padStart(2,"0"),minute:String(t.getUTCMinutes()).padStart(2,"0")})}}),[Fe]),(0,u.useEffect)((function(){on&&Object.keys(on).length>0&&z(!0)}),[on]),(0,u.useEffect)((function(){ie(Y?null===Pe||void 0===Pe?void 0:Pe.reduce((function(e,n){var t=n.uuid,r=n.value;return He(He({},e),{},(0,o.Z)({},t,on[t]||r))}),{}):null)}),[Pe,Y,on]);var sn=(0,u.useMemo)((function(){return we&&!Object.values(y.U5).includes(we)}),[we]),cn=(0,u.useMemo)((function(){return sn&&be?re().toString(be,{throwExceptionOnParseError:!1}):""}),[be,sn]),un=(0,u.useMemo)((function(){return null===cn||void 0===cn?void 0:cn.toLowerCase().includes("error")}),[cn]);(0,u.useEffect)((function(){if(l&&!pe){M(l.event_matchers),(null===l||void 0===l?void 0:l.schedule_interval)&&!Object.values(y.U5).includes(null===l||void 0===l?void 0:l.schedule_interval)?(ye(null===l||void 0===l?void 0:l.schedule_interval),he(He(He({},l),{},{schedule_interval:"custom"}))):he(I?He(He({},l),{},{schedule_interval:y.U5.ONCE}):l);var e=l.sla;if(e){B(!0);var n=(0,W.gU)(e),t=n.time,r=n.unit;he((function(e){return He(He({},e),{},{slaAmount:t,slaUnit:r})}))}}}),[I,l,pe,we]);var an=(0,u.useMemo)((function(){return!(null===$||void 0===$||!$.landing_time_enabled)}),[$]),dn=(0,u.useMemo)((function(){return y.Xm.TIME!==Ie||![y.U5.DAILY,y.U5.HOURLY,y.U5.MONTHLY,y.U5.WEEKLY].includes(we)}),[we,Ie]),pn=(0,u.useMemo)((function(){return an&&!dn}),[dn,an]),fn=(0,u.useCallback)((function(){var e=He(He({},(0,K.GL)(pe,["name","description","schedule_type","tags"])),{},{event_matchers:[],schedule_interval:null,start_time:null,variables:(0,R.e7)(te)});if(pn){var n=Je.dayOfMonth,t=Je.dayOfWeek,r=Je.hour,i=Je.minute,o=Je.second,s=le()("2023-07-01").utc();(0,Ne.HW)(n)&&(s=s.date(n)),(0,Ne.HW)(t)&&(s=s.day(t)),(0,Ne.HW)(r)&&(s=s.hours(r)),(0,Ne.HW)(i)&&(s=s.minutes(i)),(0,Ne.HW)(o)&&(s=s.seconds(o)),e.schedule_interval=sn?be:pe.schedule_interval,e.start_time=s.toISOString()}else y.Xm.EVENT===pe.schedule_type?e.event_matchers=C:(e.schedule_interval=sn?be:pe.schedule_interval,e.start_time=ze&&null!==Ve&&void 0!==Ve&&Ve.hour&&null!==Ve&&void 0!==Ve&&Ve.minute?"".concat(ze.toISOString().split("T")[0]," ").concat(null===Ve||void 0===Ve?void 0:Ve.hour,":").concat(null===Ve||void 0===Ve?void 0:Ve.minute,":00"):null);if(V){var c=null===pe||void 0===pe?void 0:pe.slaAmount,u=null===pe||void 0===pe?void 0:pe.slaUnit;if(!c||isNaN(c)||!u)return void oe.Am.error("Please enter a valid SLA",{position:oe.Am.POSITION.BOTTOM_RIGHT,toastId:"sla_error"});e.sla=(0,W.vJ)(c,u)}else null!==l&&void 0!==l&&l.sla&&(e.sla=0);e.settings=$,rn({pipeline_schedule:e})}),[be,ze,V,C,sn,Je,l,te,pe,$,pn,Ve,rn]),hn=(0,u.useMemo)((function(){if(null===l||void 0===l||!l.runtime_average)return"Trigger doesn\u2019t have enough history to estimate runtime.";var e=Number(null===l||void 0===l?void 0:l.runtime_average),n=Math.max(Math.floor(e/3600),0),t=Math.max(Math.floor((e-60*n*60)/60),0),r=Math.max(Math.floor(e-(60*n*60+60*t)),0),i=[];return n>=1&&i.push((0,Ne._6)("hour",n,!0)),t>=1&&i.push((0,Ne._6)("minute",t,!0)),r>=1&&i.push((0,Ne._6)("second",r,!0)),i.join(" ")}),[l]),mn=(0,u.useMemo)((function(){if(!pn)return null;var e=[(0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Minute"})}),(0,G.jsxs)(_.Z,{compact:!0,monospace:!0,onChange:function(e){Ge((function(n){return He(He({},n),{},{minute:e.target.value})}))},value:(null===Je||void 0===Je?void 0:Je.minute)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(60).map((function(e,n){return(0,G.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Minute"),(0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Second"})}),(0,G.jsxs)(_.Z,{compact:!0,monospace:!0,onChange:function(e){Ge((function(n){return He(He({},n),{},{second:e.target.value})}))},value:(null===Je||void 0===Je?void 0:Je.second)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(60).map((function(e,n){return(0,G.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Second")];return[y.U5.DAILY,y.U5.MONTHLY,y.U5.WEEKLY].includes(we)&&e.unshift((0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Hour"})}),(0,G.jsxs)(_.Z,{compact:!0,monospace:!0,onChange:function(e){Ge((function(n){return He(He({},n),{},{hour:e.target.value})}))},value:(null===Je||void 0===Je?void 0:Je.hour)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(24).map((function(e,n){return(0,G.jsx)("option",{value:n,children:n>=10?String(n):"0".concat(n)},n)}))]})]},"Hour")),y.U5.WEEKLY===we?e.unshift((0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Day of the week"})}),(0,G.jsxs)(_.Z,{compact:!0,monospace:!0,onChange:function(e){Ge((function(n){return He(He({},n),{},{dayOfWeek:e.target.value})}))},value:(null===Je||void 0===Je?void 0:Je.dayOfWeek)||"",children:[(0,G.jsx)("option",{value:""}),(0,G.jsx)("option",{value:6,children:"Sunday"}),(0,G.jsx)("option",{value:0,children:"Monday"}),(0,G.jsx)("option",{value:1,children:"Tuesday"}),(0,G.jsx)("option",{value:2,children:"Wednesday"}),(0,G.jsx)("option",{value:3,children:"Thursday"}),(0,G.jsx)("option",{value:4,children:"Friday"}),(0,G.jsx)("option",{value:5,children:"Saturday"})]})]},"Day of the week")):y.U5.MONTHLY===we&&e.unshift((0,G.jsxs)(O.Z,{mr:1,children:[(0,G.jsx)(O.Z,{mb:1,children:(0,G.jsx)(k.ZP,{bold:!0,default:!0,small:!0,children:"Day of the month"})}),(0,G.jsxs)(_.Z,{compact:!0,monospace:!0,onChange:function(e){Ge((function(n){return He(He({},n),{},{dayOfMonth:e.target.value})}))},value:(null===Je||void 0===Je?void 0:Je.dayOfMonth)||"",children:[(0,G.jsx)("option",{value:""}),(0,U.w6)(31).map((function(e,n){return(0,G.jsx)("option",{value:n+1,children:n+1>=10?String(n+1):"0".concat(n+1)},n+1)}))]})]},"Day of the month")),(0,G.jsx)(m.ZP,{children:e})}),[Je,we,pn]),vn=(0,u.useMemo)((function(){return[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.KJ,{default:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger name"})]},"trigger_name"),(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:Se},"trigger_name_input")]}),[Se]),gn=(0,u.useMemo)((function(){return[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.KJ,{default:!0}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Trigger description"})]},"trigger_description"),(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{description:e.target.value})}))},placeholder:"Description",value:Oe},"trigger_description_input")]}),[Oe]),jn=(0,u.useMemo)((function(){var e=[vn,gn,[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Pf,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,G.jsxs)("div",{children:[(0,G.jsxs)(_.Z,{monospace:!0,onChange:function(e){e.preventDefault();var n=e.target.value;he((function(e){return He(He({},e),{},{schedule_interval:n})}))},placeholder:"Choose the frequency to run",value:we,children:[Object.values(y.U5).map((function(e){return(0,G.jsx)("option",{value:e,children:e.substring(1)},e)})),(0,G.jsx)("option",{value:"custom",children:"custom"},"custom")]}),(0,G.jsx)(O.Z,{mt:1,p:1,children:(0,G.jsxs)(k.ZP,{muted:!0,small:!0,children:["If you don\u2019t see the frequency option you need, select ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:"custom"})," and enter CRON syntax."]})})]},"frequency_input")]];return e.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.rs,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Enable landing time"})]},"frequency"),(0,G.jsxs)("div",{children:[(0,G.jsx)(Me.Z,{checked:an,disabled:dn,onCheck:function(){Q((function(e){return He(He({},e),{},{landing_time_enabled:!an})}))}}),(0,G.jsxs)(O.Z,{mt:1,p:1,children:[dn&&(0,G.jsxs)(k.ZP,{muted:!0,small:!0,children:["In order to enable landing time, the trigger\u2019s frequency must be ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.HOURLY}),", ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.DAILY}),", ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.WEEKLY}),", or ",(0,G.jsx)(k.ZP,{inline:!0,monospace:!0,small:!0,children:y.U5.MONTHLY}),"."]}),!dn&&(0,G.jsx)(k.ZP,{muted:!0,small:!0,children:"Instead of starting at a specific time, this trigger will schedule pipeline runs at a time where it will finish by the specified time below."})]})]},"frequency_input")]),pn&&e.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.Pf,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Average runtime"})]},"runtime_average"),(0,G.jsx)(m.ZP,{alignItems:"center",style:{minHeight:"".concat(5.75*A.iI,"px")},children:(0,G.jsx)(k.ZP,{monospace:!0,children:hn})},"runtime_average_value")]),e.push([(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsxs)(k.ZP,{default:!0,children:[pn&&"Pipeline complete by",!pn&&"Start date and time"]})]},"start_time"),pn?mn:(0,G.jsxs)("div",{style:{minHeight:"".concat(5.75*A.iI,"px")},children:[!ve&&(0,G.jsx)(fe.Z,{monospace:!0,onClick:function(){return xe((function(e){return!e}))},placeholder:"YYYY-MM-DD HH:MM",value:ze?"".concat(ze.toISOString().split("T")[0]," ").concat(null===Ve||void 0===Ve?void 0:Ve.hour,":").concat(null===Ve||void 0===Ve?void 0:Ve.minute):""}),(0,G.jsx)("div",{style:{width:"400px"},children:(0,G.jsx)(ue.Z,{disableEscape:!0,onClickOutside:function(){return xe(!1)},open:ve,style:{position:"relative"},children:(0,G.jsx)(se.Z,{selectedDate:ze,selectedTime:Ve,setSelectedDate:qe,setSelectedTime:Xe,topPosition:!0})})})]},"start_time_input")]),I&&e.splice(2,2),sn&&e.splice(2,0,[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.EK,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"Cron expression"})]},"cron_expression"),(0,G.jsxs)("div",{children:[(0,G.jsx)(fe.Z,{monospace:!0,onChange:function(e){e.preventDefault(),ye(e.target.value)},placeholder:"* * * * *",value:be}),(0,G.jsxs)(O.Z,{mt:1,p:1,children:[(0,G.jsx)(k.ZP,{monospace:!0,xsmall:!0,children:"[minute] [hour] [day(month)] [month] [day(week)]"}),be?(0,G.jsx)(k.ZP,{danger:un,muted:!0,small:!0,children:un?"Invalid cron expression. Please check the cron syntax.":(0,G.jsxs)(G.Fragment,{children:['"',cn,'"']})}):null]})]},"cron_expression_input")]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{mb:2,px:A.cd,children:(0,G.jsx)(v.Z,{children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(0,G.jsx)(w.Z,{columnFlex:[null,1],rows:e})]})}),[un,be,ze,sn,I,dn,an,mn,cn,hn,we,ve,pn,Ve,vn,gn]),xn=(0,u.useCallback)((function(e,n){M((function(t){return Object.entries(n).forEach((function(n){var r=(0,i.Z)(n,2),l=r[0],o=r[1];t[e][l]=o})),(0,ne.Z)(t)}))}),[M]),Zn=(0,u.useMemo)((function(){return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{mb:A.cd,px:A.cd,children:(0,G.jsx)(v.Z,{children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(0,G.jsx)(w.Z,{columnFlex:[null,1],rows:[vn,gn]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Events"}),(0,G.jsxs)(k.ZP,{muted:!0,children:["Add 1 or more event that will trigger this pipeline to run.",(0,G.jsx)("br",{}),"If you add more than 1 event, this pipeline will trigger if any of the events are received."]}),(0,G.jsxs)(O.Z,{mt:A.Mq,children:[(0,G.jsx)(k.ZP,{bold:!0,large:!0,children:"AWS events"}),(0,G.jsxs)(k.ZP,{muted:!0,children:["In order to retrieve all the possible AWS events you can trigger your pipeline from,",(0,G.jsx)("br",{}),"you\u2019ll need to set 3 environment variables (",(0,G.jsx)(g.Z,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html",openNewWindow:!0,underline:!0,children:"more info here"}),"):"]}),(0,G.jsx)(O.Z,{mt:1,children:(0,G.jsxs)(Te,{monospace:!0,ordered:!0,children:[(0,G.jsx)(k.ZP,{monospace:!0,children:"AWS_REGION_NAME"}),(0,G.jsx)(k.ZP,{monospace:!0,children:"AWS_ACCESS_KEY_ID"}),(0,G.jsx)(k.ZP,{monospace:!0,children:"AWS_SECRET_ACCESS_KEY"})]})})]})]}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(null===C||void 0===C?void 0:C.length)>=1&&(0,G.jsx)(w.Z,{alignTop:!0,columnFlex:[1,1,2,null],columns:[{uuid:"Provider"},{uuid:"Event"},{uuid:"Pattern"},{label:function(){return""},uuid:"delete"}],rows:null===C||void 0===C?void 0:C.map((function(e,n){var t=e.event_type,r=e.name,i=e.pattern,l=e.id||"".concat(t,"-").concat(r,"-").concat(n,"-").concat(JSON.stringify(i)),o=[];return i&&JSON.stringify(i,null,2).split("\n").forEach((function(e){o.push("    ".concat(e))})),[(0,G.jsx)(_.Z,{monospace:!0,onChange:function(e){return xn(n,{event_type:e.target.value})},placeholder:"Event provider",value:t||"",children:F.map((function(e){var n=e.label,t=e.uuid;return(0,G.jsx)("option",{value:t,children:n()},t)}))},"event-provider-".concat(l)),(0,G.jsx)(_.Z,{monospace:!0,onChange:function(e){var t,r=e.target.value,i=null===(t=en[r])||void 0===t?void 0:t.event_pattern;xn(n,{name:r,pattern:i?JSON.parse(i):null})},placeholder:"Event name",value:r,children:Qe.map((function(e){var n=e.name;return(0,G.jsx)("option",{value:n,children:n},n)}))},"event-name-".concat(l)),i&&(0,G.jsx)(ae.Z,{language:"json",small:!0,source:o.join("\n")}),(0,G.jsx)(p.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return M((function(e){return(0,U.oM)(e,n)}))},children:(0,G.jsx)(N.rF,{default:!0,size:2*A.iI})},"remove_event")]}))}),(0,G.jsx)(O.Z,{p:A.cd,children:(0,G.jsx)(p.Z,{beforeIcon:(0,G.jsx)(N.mm,{size:2*A.iI}),onClick:function(){return M((function(e){return e.concat({})}))},outline:!0,children:"Add event matcher"})})]})}),[C,Qe,en,vn,gn,xn]),bn=(0,u.useMemo)((function(){var e=(0,W.M8)(l);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(O.Z,{mb:A.cd,px:A.cd,children:(0,G.jsx)(v.Z,{children:"Settings"})}),(0,G.jsx)(h.Z,{light:!0,short:!0}),(0,G.jsx)(w.Z,{columnFlex:[null,1],rows:[vn,gn]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Endpoint"}),(0,G.jsxs)(k.ZP,{muted:!0,children:["Make a ",(0,G.jsx)(k.ZP,{bold:!0,inline:!0,monospace:!0,children:"POST"})," request to the following endpoint:"]}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(f.Z,{copiedText:e,linkText:e,monospace:!0,withCopyIcon:!0})})]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Payload"}),(0,G.jsx)(k.ZP,{muted:!0,children:"You can optionally include runtime variables in your request payload. These runtime variables are accessible from within each pipeline block."}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(f.Z,{copiedText:'{\n  "pipeline_run": {\n    "variables": {\n      "key1": "value1",\n      "key2": "value2"\n    }\n  }\n}\n',withCopyIcon:!0,children:(0,G.jsx)(ae.Z,{language:"json",small:!0,source:'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\n'})})})]}),(0,G.jsxs)(O.Z,{mb:2,mt:5,px:A.cd,children:[(0,G.jsx)(v.Z,{children:"Sample cURL command"}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(ae.Z,{language:"bash",small:!0,source:"\n    curl -X POST ".concat(e,' \\\n      --header \'Content-Type: application/json\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n')})})]})]})}),[l,gn,vn]),yn=!Ie||y.Xm.TIME===Ie&&!(I&&ze||!I&&ze&&we)||y.Xm.EVENT===Ie&&(!(null!==C&&void 0!==C&&C.length)||!C.every((function(e){var n=e.event_type,t=e.name;return n&&t}))),Pn=(0,u.useMemo)((function(){var e;return(null===r||void 0===r||null===(e=r.blocks)||void 0===e?void 0:e.filter((function(e){var n=e.type;return D.tf.DBT===n})))||[]}),[r]),_n=(0,u.useMemo)((function(){return(0,G.jsxs)(O.Z,{p:A.cd,children:[(0,G.jsxs)(O.Z,{mb:A.HN,children:[(0,G.jsx)(v.Z,{children:"Run settings"}),(0,G.jsxs)(O.Z,{mt:A.Mq,children:[!I&&(0,G.jsxs)(O.Z,{mb:A.Mq,children:[(0,G.jsx)(k.ZP,{children:"Set a timeout for each run of this trigger (optional)"}),(0,G.jsx)(O.Z,{mb:1}),(0,G.jsx)(fe.Z,{label:"Timeout (in seconds)",onChange:function(e){return Q((function(n){return He(He({},n),{},{timeout:e.target.value})}))},primary:!0,setContentOnMount:!0,type:"number",value:null===$||void 0===$?void 0:$.timeout})]}),(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(O.Z,{mr:2,children:(0,G.jsx)(Me.Z,{checked:V,onCheck:function(e){B(e),e||he((function(e){return He(He({},e),{},{slaAmount:0})}))}})}),(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:"Configure trigger SLA"})]}),V&&(0,G.jsx)(w.Z,{columnFlex:[null,1],rows:[[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(N.aw,{default:!0,size:1.5*A.iI}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(k.ZP,{default:!0,children:"SLA"})]},"sla_detail"),(0,G.jsxs)(m.ZP,{children:[(0,G.jsx)(je.Z,{flex:1,children:(0,G.jsx)(fe.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{slaAmount:e.target.value})}))},placeholder:"Time",value:null===pe||void 0===pe?void 0:pe.slaAmount})}),(0,G.jsx)(je.Z,{flex:1,children:(0,G.jsx)(_.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),he((function(n){return He(He({},n),{},{slaUnit:e.target.value})}))},placeholder:"Select time unit",small:!0,value:null===pe||void 0===pe?void 0:pe.slaUnit,children:Object.keys(W.tL).map((function(e){return(0,G.jsx)("option",{value:e,children:"".concat(e,"(s)")},e)}))})})]},"sla_input_detail")]]})]}),(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(m.ZP,{alignItems:"center",children:(0,G.jsx)(ce.Z,{checked:null===$||void 0===$?void 0:$.allow_blocks_to_fail,label:"Keep running pipeline even if blocks fail",onClick:function(){return Q((function(e){return He(He({},e),{},{allow_blocks_to_fail:!(null!==$&&void 0!==$&&$.allow_blocks_to_fail)})}))}})})}),y.Xm.TIME===Ie&&(0,G.jsx)(O.Z,{mt:A.Mq,children:(0,G.jsx)(m.ZP,{alignItems:"center",children:(0,G.jsx)(ce.Z,{checked:null===$||void 0===$?void 0:$.skip_if_previous_running,label:"Skip run if previous run still in progress",onClick:function(){return Q((function(e){return He(He({},e),{},{skip_if_previous_running:!(null!==$&&void 0!==$&&$.skip_if_previous_running)})}))}})})})]}),(0,G.jsxs)(O.Z,{mb:A.HN,children:[(0,G.jsx)(v.Z,{children:"Runtime variables"}),!(0,K.Qr)(Pe)&&(0,G.jsxs)(O.Z,{mt:A.Mq,children:[(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(O.Z,{mr:2,children:(0,G.jsx)(Me.Z,{checked:Y,onCheck:z})}),(0,G.jsx)(k.ZP,{monospace:!0,muted:!0,children:"Overwrite global variables"})]}),Y&&te&&Object.entries(te).length>0&&(0,G.jsx)(O.Z,{mt:1,children:(0,G.jsx)(w.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(te).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],l=t[1];return b.sZ===r?e:e.concat([[(0,G.jsx)(k.ZP,{default:!0,monospace:!0,children:r},"variable_".concat(r)),(0,G.jsx)(fe.Z,{borderless:!0,monospace:!0,onChange:function(e){e.preventDefault(),ie((function(n){return He(He({},n),{},(0,o.Z)({},r,e.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:l},"variable_uuid_input_".concat(r))]])}),[])})})]})]}),(null===Pn||void 0===Pn?void 0:Pn.length)>=1&&(0,G.jsx)(O.Z,{mb:A.HN,children:(0,G.jsx)(ge,{blocks:Pn,updateVariables:ie,variables:He(He({},on),te)})})]})}),[Pn,V,Pe,I,Y,te,pe,Ie,on,B,z,ie,$]),On=E.ZP.tags.list().data,Sn=(0,u.useMemo)((function(){return((null===On||void 0===On?void 0:On.tags)||[]).filter((function(e){var n=e.uuid;return!(null!==Le&&void 0!==Le&&Le.includes(n))}))}),[On,Le]);return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(x.Z,{after:_n,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(Z,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return null===l||void 0===l?void 0:l.name},linkProps:{as:"/pipelines/".concat(Z,"/triggers/").concat(S),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],errors:n,pageName:H.M.TRIGGERS,pipeline:r,setErrors:s,subheader:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(p.Z,{disabled:yn,loading:ln,onClick:fn,outline:!0,primary:!0,children:"Save changes"}),(0,G.jsx)(O.Z,{mr:1}),(0,G.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat(Z,"/triggers/").concat(S),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"})]}),title:function(){return"Edit ".concat(null===l||void 0===l?void 0:l.name)},uuid:"triggers/edit",children:[(0,G.jsxs)(O.Z,{p:A.cd,children:[(0,G.jsxs)(O.Z,{mb:2,children:[(0,G.jsx)(v.Z,{children:"Trigger type"}),(0,G.jsx)(k.ZP,{muted:!0,children:"How would you like this pipeline to be triggered?"})]}),(0,G.jsx)(m.ZP,{children:Ue(I).map((function(e){var n=e.label,t=e.description,r=e.uuid,i=Ie===r,l=Ie&&!i;return(0,G.jsx)(p.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){y.Xm.EVENT!==r||null!==C&&void 0!==C&&C.length||M([{}]),he((function(e){return He(He({},e),{},{schedule_type:r})}))},children:(0,G.jsx)(De.U,{selected:i,children:(0,G.jsxs)(m.ZP,{alignItems:"center",children:[(0,G.jsx)(je.Z,{children:(0,G.jsx)("input",{checked:i,type:"radio"})}),(0,G.jsx)(O.Z,{mr:A.cd}),(0,G.jsxs)(je.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,G.jsx)(v.Z,{bold:!0,default:!i&&!l,level:5,muted:!i&&l,children:n()}),(0,G.jsx)(k.ZP,{default:!i&&!l,leftAligned:!0,muted:l,children:t()})]})]})})},r)}))})]}),(0,G.jsxs)(O.Z,{mt:A.HN,children:[y.Xm.TIME===Ie&&jn,y.Xm.EVENT===Ie&&Zn,y.Xm.API===Ie&&bn]}),(0,G.jsxs)(O.Z,{mt:A.HN,px:A.cd,children:[(0,G.jsxs)(O.Z,{mb:2,children:[(0,G.jsx)(v.Z,{children:"Tags"}),(0,G.jsx)(k.ZP,{muted:!0,children:"Add or remove tags from this trigger."})]}),(0,G.jsx)(Ce.Z,{removeTag:function(e){he((function(n){return He(He({},n),{},{tags:null===Le||void 0===Le?void 0:Le.filter((function(n){return n!==e.uuid}))})}))},selectTag:function(e){he((function(n){return He(He({},n),{},{tags:(0,U.$C)(e.uuid,Le,(function(n){return n===e.uuid}))})}))},selectedTags:null===Le||void 0===Le?void 0:Le.map((function(e){return{uuid:e}})),tags:Sn,uuid:"TagsAutocompleteInputField-trigger-".concat(S)})]})]})})},Le=t(93808),Re=t(92709);function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ze(e){var n=e.pipelineScheduleId,t=e.pipelineUUID,r=e.subpath,i=Re.b7===r,l=(0,u.useState)(null),o=l[0],s=l[1],c=E.ZP.variables.pipelines.list(t,{},{revalidateOnFocus:!1}).data,a=null===c||void 0===c?void 0:c.variables,d={};i&&(d._format="with_runtime_average");var p=E.ZP.pipeline_schedules.detail(n,d),f=p.data,h=p.mutate,m=null===f||void 0===f?void 0:f.pipeline_schedule,v=E.ZP.pipelines.detail(t,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,g=Ye(Ye({},null===v||void 0===v?void 0:v.pipeline),{},{uuid:t});return i?(0,G.jsx)(Fe,{errors:o,fetchPipelineSchedule:h,pipeline:g,pipelineSchedule:m,setErrors:s,variables:a}):(0,G.jsx)(ee,{errors:o,fetchPipelineSchedule:h,pipeline:g,pipelineSchedule:m,setErrors:s,variables:a})}ze.getInitialProps=function(){var e=(0,l.Z)(c().mark((function e(n){var t,r,l,o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,r=t.pipeline,l=t.slug,!Array.isArray(l)){e.next=4;break}return o=(0,i.Z)(l,2),s=o[0],u=o[1],e.abrupt("return",{pipelineScheduleId:s,pipelineUUID:r,subpath:u});case 4:return e.abrupt("return",{pipelineUUID:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var qe=(0,Le.Z)(ze)},3917:function(e,n,t){"use strict";t.d(n,{A5:function(){return x},AY:function(){return Z},BP:function(){return j},JX:function(){return g},OC:function(){return d},Pc:function(){return b},Ro:function(){return y},Tz:function(){return v},Y_:function(){return _},d$:function(){return m},jV:function(){return P},lJ:function(){return O},n1:function(){return f},s8:function(){return u},vk:function(){return l},yD:function(){return a}});var r,i,l,o=t(82394),s=t(92083),c=t.n(s);!function(e){e.TODAY="today",e.WEEK="week",e.MONTH="month"}(l||(l={}));var u=(r={},(0,o.Z)(r,l.TODAY,"today"),(0,o.Z)(r,l.WEEK,"last 7 days"),(0,o.Z)(r,l.MONTH,"last 30 days"),r),a=(i={},(0,o.Z)(i,l.TODAY,0),(0,o.Z)(i,l.WEEK,6),(0,o.Z)(i,l.MONTH,29),i),d="YYYY-MM-DD HH:mm:ss",p="YYYY-MM-DD HH:mm",f="YYYY-MM-DD",h="MMMM D, YYYY";function m(e,n){var t=n||{},r=t.dayAgo,i=t.includeSeconds,l=t.utcFormat,o=c()(e),s=p;return l&&(o=o.utc()),r&&(o=o.subtract(1,"days")),i&&(s=d),o.format(s)}function v(e){var n=m((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==e&&void 0!==e&&e.dateObj?new Date(n):n}function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c().unix(e).format(null!==n&&void 0!==n&&n.withSeconds?d:p)}function j(e,n,t){return c()(e).utc().hours(+n).minutes(+t).format()}function x(e){return c()(e).unix()}function Z(e,n,t,r){var i="".concat(e.toISOString().split("T")[0]," ").concat(n,":").concat(t);return r?"".concat(i,":").concat(r):i}function b(e){var n=c().unix(+e).utc();return{date:n.toDate(),hour:String(n.hour()),minute:String(n.minute())}}function y(e,n){var t=c().utc(),r=c().utc();null!==n&&void 0!==n&&n.localTime&&(t=c()().local(),r=c()().local());var i=(t=t.subtract(e,"days")).format(h),l=r.format(h);return null!==n&&void 0!==n&&n.endDateOnly?l:"".concat(i," - ").concat(l)}function P(e,n){var t=null!==n&&void 0!==n&&n.localTime?c()().local():c().utc();if(e===l.WEEK){var r=a[l.WEEK];t=t.subtract(r,"days")}else if(e===l.MONTH){var i=a[l.MONTH];t=t.subtract(i,"days")}return null!==n&&void 0!==n&&n.isoString?t.startOf("day").toISOString():t.startOf("day").format(d)}function _(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,n=new Date,t=[],r=0;r<e;r++)t.unshift(n.toISOString().split("T")[0]),n.setDate(n.getDate()-1);return t}function O(e){return e.padStart(2,"0")}},95488:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers/[...slug]",function(){return t(666)}])}},function(e){e.O(0,[844,9902,426,5264,7849,4495,9302,6358,9696,8264,5499,5347,5457,7586,3943,1334,9774,2888,179],(function(){return n=95488,e(e.s=n);var n}));var n=e.O();_N_E=n}]);