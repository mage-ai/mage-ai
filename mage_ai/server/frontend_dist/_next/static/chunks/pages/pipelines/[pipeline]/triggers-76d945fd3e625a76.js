(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{16488:function(e,n,t){"use strict";t.d(n,{IJ:function(){return v},M8:function(){return w},Vx:function(){return x},XM:function(){return P},_U:function(){return h},eI:function(){return O},gU:function(){return y},lO:function(){return S},ri:function(){return b},tL:function(){return j},vJ:function(){return Z},xH:function(){return m}});var r,i=t(82394),o=t(92083),u=t.n(o),c=t(3917),l=t(4383),a=t(30229),s=t(42122),d=t(86735);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h=function(e){return!!e&&!Object.values(a.U5).includes(e)};function v(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,o=n.started_at,c=n.status,l=null;o&&r&&(l=u()(r).valueOf()-u()(o).valueOf());return f(f({},e),{},(0,i.Z)({},t,{runtime:l,status:c}))}),{})}var g,b=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:a.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:a.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:a.Xm.API}];return e?n.slice(0,1):n};function m(e){var n=(0,s.gR)(e,[a.gm.INTERVAL,a.gm.TYPE]),t=e[a.gm.INTERVAL];t&&(n["schedule_interval[]"]=encodeURIComponent(t));var r=e[a.gm.TYPE];return r&&(n["schedule_type[]"]=r),n}function O(e){if(!e)return null;var n=new Date(u()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function x(e){return"string"!==typeof e?e:O(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(g||(g={}));var j=(r={},(0,i.Z)(r,g.DAY,86400),(0,i.Z)(r,g.HOUR,3600),(0,i.Z)(r,g.MINUTE,60),(0,i.Z)(r,g.SECOND,1),r);function y(e){var n=g.SECOND,t=e;return e%86400===0?(t/=86400,n=g.DAY):e%3600===0?(t/=3600,n=g.HOUR):e%60===0&&(t/=60,n=g.MINUTE),{time:t,unit:n}}function Z(e,n){return e*j[n]}function P(e,n,t){var r="".concat(e.toISOString().split("T")[0]," ").concat(null===n||void 0===n?void 0:n.hour,":").concat(null===n||void 0===n?void 0:n.minute);if(null!==t&&void 0!==t&&t.includeSeconds&&(r=r.concat(":00")),null!==t&&void 0!==t&&t.localTimezone){var i=u()(e);i.set("hour",+(null===n||void 0===n?void 0:n.hour)||0),i.set("minute",+(null===n||void 0===n?void 0:n.minute)||0),i.set("second",0),r=i.format(c.lE),null!==t&&void 0!==t&&t.convertToUtc&&(r=(0,c.d$)(r,{includeSeconds:null===t||void 0===t?void 0:t.includeSeconds,utcFormat:!0}))}return r}function w(e){var n,t="";return t="".concat(window.origin,"/api/pipeline_schedules/").concat(null===e||void 0===e?void 0:e.id,"/pipeline_runs"),null!==e&&void 0!==e&&e.token&&(t="".concat(t,"/").concat(e.token)),(n=window.location.port)&&(t=t.replace(n,l.QT)),t}function k(e,n,t){return e.match(/[*,-/]/)?{additionalOffset:0,cronValue:e}:function(e,n,t){var r=t.indexOf(e),i=0;if(n<0)for(var o=0;o>n;o--)0===r?(r=t.length-1,i-=1):r-=1;else if(n>0)for(var u=0;u<n;u++)r===t.length-1?(r=0,i+=1):r+=1;return{additionalOffset:i,cronValue:String(t[r]||e)}}(+e,n,t)}var C=(0,d.m5)(60),I=(0,d.m5)(24),_=(0,c.Cs)();function S(e,n){if(!e)return e;var t=u()().local().format("Z"),r=t.split(":"),i="-"===t[0],o=3===r[0].length?Number(r[0].slice(1)):Number(r[0]),c=Number(r[1]);(i&&!n||!i&&n)&&(o=-o,c=-c);var l=e.split(" "),a=l[0],s=l[1],d=l[2],p=k(a,c,C),f=k(s,o+p.additionalOffset,I);if(l[0]=p.cronValue,l[1]=f.cronValue,0!==(null===f||void 0===f?void 0:f.additionalOffset)){var h=k(d,f.additionalOffset,_);l[2]=h.cronValue}return l.join(" ")}},81066:function(e,n,t){"use strict";t.d(n,{B:function(){return p}});var r=t(82394),i=t(46732),o=t(93369),u=t(72473),c=t(8059),l=t(70515),a=t(28598);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={bold:!0,greyBorder:!0,paddingBottom:9,paddingTop:9};n.Z=function(e){var n=e.addButtonMenuOpen,t=e.addButtonMenuRef,r=e.isLoading,s=e.label,f=e.menuItems,h=e.onClick,v=e.onClickCallback;return(0,a.jsx)(i.Z,{disableKeyboardShortcuts:!0,items:f,onClickCallback:v,onClickOutside:v,open:n,parentRef:t,roundedStyle:!0,topOffset:1,uuid:"Table/Toolbar/NewItemMenu",children:(0,a.jsx)(o.ZP,d(d({},p),{},{background:c.eW,beforeElement:(0,a.jsx)(u.mm,{size:2.5*l.iI}),loading:r,onClick:function(e){e.preventDefault(),null===h||void 0===h||h()},uuid:"shared/AddButton/index",children:s}))})}},44265:function(e,n,t){"use strict";t.d(n,{Az:function(){return l},BF:function(){return c},Do:function(){return s},IK:function(){return u},VO:function(){return o},sZ:function(){return a}});var r,i=t(82394),o=t(41143).V,u=[o.FAILED,o.COMPLETED,o.RUNNING,o.CANCELLED,o.INITIAL],c=[o.INITIAL,o.RUNNING],l=[o.CANCELLED,o.COMPLETED,o.FAILED],a="__mage_variables",s=(r={},(0,i.Z)(r,o.CANCELLED,"Cancelled"),(0,i.Z)(r,o.COMPLETED,"Done"),(0,i.Z)(r,o.FAILED,"Failed"),(0,i.Z)(r,o.INITIAL,"Ready"),(0,i.Z)(r,o.RUNNING,"Running"),r)},46732:function(e,n,t){"use strict";var r=t(82394),i=t(26304),o=(t(82684),t(50724)),u=t(70374),c=t(28598),l=["children","items","open","onClickCallback","onClickOutside","parentRef","uuid","zIndex"];function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.children,t=e.items,r=e.open,a=e.onClickCallback,d=e.onClickOutside,p=e.parentRef,f=e.uuid,h=e.zIndex,v=(0,i.Z)(e,l),g=(0,c.jsxs)("div",{style:{position:"relative",zIndex:(d?3:2)+(h||0)},children:[(0,c.jsx)("div",{ref:p,children:n}),(0,c.jsx)(u.Z,s(s({},v),{},{items:t,onClickCallback:a,open:r,parentRef:p,uuid:f}))]});return d?(0,c.jsx)(o.Z,{onClickOutside:d,open:!0,children:g}):g}},65956:function(e,n,t){"use strict";var r=t(38626),i=t(55485),o=t(38276),u=t(30160),c=t(44897),l=t(42631),a=t(47041),s=t(70515),d=t(28598),p=(0,r.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*s.iI,1.5*s.iI,1.5*s.iI),f=r.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],l.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||c.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||c.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),h=r.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],l.n_,l.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||c.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),p,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),v=r.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*s.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*s.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),g=r.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],l.M8,l.YF,1.75*s.iI);n.Z=function(e){var n=e.borderless,t=e.children,r=e.containerRef,c=e.contentContainerRef,l=e.dark,a=e.footer,s=e.fullHeight,p=void 0===s||s,b=e.fullWidth,m=void 0===b||b,O=e.header,x=e.headerHeight,j=e.headerIcon,y=e.headerPaddingVertical,Z=e.headerTitle,P=e.maxHeight,w=e.maxWidth,k=e.minWidth,C=e.noPadding,I=e.overflowVisible,_=e.subtitle,S=e.success;return(0,d.jsxs)(f,{borderless:n,dark:l,fullHeight:p,fullWidth:m,maxHeight:P,maxWidth:w,minWidth:k,overflowVisible:I,ref:r,success:S,children:[(O||Z)&&(0,d.jsxs)(h,{headerPaddingVertical:y,height:x,children:[O&&O,Z&&(0,d.jsx)(i.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,d.jsxs)(i.ZP,{alignItems:"center",children:[j&&j,(0,d.jsx)(o.Z,{ml:j?1:0,children:(0,d.jsx)(u.ZP,{bold:!0,default:!0,children:Z})})]})})]}),(0,d.jsxs)(v,{maxHeight:P,noPadding:C,overflowVisible:I,ref:c,children:[_&&(0,d.jsx)(o.Z,{mb:2,children:(0,d.jsx)(u.ZP,{default:!0,children:_})}),t]}),a&&(0,d.jsx)(g,{children:a})]})}},72191:function(e,n,t){"use strict";t.d(n,{_k:function(){return o},bL:function(){return i},l2:function(){return u}});var r=t(70515),i=(r.iI,2*r.iI),o=2.5*r.iI,u=3*r.iI},23706:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return me}});var r=t(77837),i=t(75582),o=t(82394),u=t(38860),c=t.n(u),l=t(12691),a=t.n(l),s=t(82684),d=t(69864),p=t(34376),f=t(17586),h=t(15338),v=t(93369),g=t(48670),b=t(55072),m=t(75457),O=t(30229),x=t(93808),j=t(82359),y=t(71180),Z=t(55485),P=t(85854),w=t(65956),k=t(38276),C=t(75499),I=t(30160),_=t(35576),S=t(17488),E=t(69650),N=t(44897),D=t(38626),T=t(42631),M=t(70515),R=D.default.div.withConfig({displayName:"indexstyle__ToggleStyle",componentId:"sc-f9kt7n-0"})(["padding:","px ","px;border-radius:","px;",""],1.5*M.iI,2*M.iI,T.n_,(function(e){return"\n    border: 1px solid ".concat((e.theme||N.Z).borders.light,";\n    background-color: ").concat((e.theme||N.Z).background.popup,";\n  ")})),L=t(81728),A=t(8916),V=t(28598);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U="".concat(M.iI,"px ").concat(3*M.iI,"px");var W=function(e){var n=e.initialPipelineSchedulePayload,t=e.onCancel,r=e.onSuccess,u=e.variables,c=(0,s.useState)(!1),l=c[0],a=c[1],d=(0,s.useState)({}),p=d[0],f=d[1],h=(0,s.useState)(u||{}),v=h[0],g=h[1],b=(0,s.useMemo)((function(){return F(F({},n),{},{name:(0,L.Y6)(),variables:l?(0,A.e7)(v):null})}),[n,l,v]),m=function(e,n){var t={borderless:!0,key:"variable_uuid_input_".concat(e),monospace:!0,onChange:function(n){n.preventDefault(),g((function(t){return F(F({},t),{},(0,o.Z)({},e,n.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:n};return p[e]?(0,V.jsx)(_.Z,F(F({},t),{},{rows:1,value:n})):(0,V.jsx)(S.Z,F({},t))};return(0,s.useEffect)((function(){var e=Object.entries(v).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],u=t[1],c=(0,L.Pb)(u)&&"object"===typeof JSON.parse(u)&&!Array.isArray(JSON.parse(u))&&null!==JSON.parse(u);return F(F({},e),{},(0,o.Z)({},r,c))}),{});f(e)}),[]),(0,V.jsxs)(w.Z,{footer:(0,V.jsxs)(Z.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,V.jsx)(y.Z,{onClick:function(){r({pipeline_schedule:b}),t()},padding:U,primaryAlternate:!0,children:"Run now"}),(0,V.jsx)(k.Z,{mr:1}),(0,V.jsx)(y.Z,{borderColor:N.Z.background.page,onClick:t,padding:U,secondary:!0,children:"Cancel"})]}),header:(0,V.jsx)(P.Z,{level:5,children:"Run pipeline now"}),maxHeight:"90vh",minWidth:85*M.iI,subtitle:"Creates a new trigger and immediately runs the current pipeline once.",children:[(0,V.jsx)(R,{children:(0,V.jsxs)(Z.ZP,{alignItems:"center",children:[(0,V.jsx)(k.Z,{mr:2,children:(0,V.jsx)(E.Z,{checked:l,onCheck:a})}),(0,V.jsx)(I.ZP,{bold:!0,large:!0,children:"Overwrite runtime variables"})]})}),l&&v&&Object.entries(v).length>0&&(0,V.jsx)(k.Z,{mt:2,children:(0,V.jsx)(C.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(v).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,V.jsx)(I.ZP,{default:!0,monospace:!0,children:t},"variable_".concat(t)),m(t,r)]}))})})]})},B=t(47041),Y=D.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],N.Z.borders.medium,M.tr),G=D.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],B.w5),Q=D.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],N.Z.background.output,T.n_,M.iI,M.tr),X=t(79633);var z=function(e){var n=e.hasOverride,t=e.scheduleType,r=e.variables,o=e.variablesOverride,u=[];return Object.entries(r).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],c=null===o||void 0===o?void 0:o[t];u.push({uuid:t,value:(0,A.FS)(c||r)})})),(0,A.JZ)(u,t),(0,V.jsxs)(Y,{children:[(0,V.jsx)(k.Z,{mb:2,children:(0,V.jsxs)(I.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,V.jsx)(G,{noScrollbarTrackBackground:!0,children:r&&u.map((function(e){var n=e.uuid,t=e.value;return(0,V.jsxs)(Q,{children:[(0,V.jsx)(I.ZP,{monospace:!0,small:!0,children:n}),(0,V.jsx)(I.ZP,{color:X.Or,monospace:!0,small:!0,children:(0,A.FS)(t)})]})}))})]})},J=t(4190),q=t(12717),K=t(85544),$=t(31743),ee=t(35686),ne=t(83784),te=t(72473),re=t(28795),ie=t(81066),oe=t(24944),ue=t(3917),ce=t(69419),le=t(16488),ae=t(86735),se=t(42122),de=t(50178),pe=t(72619),fe=t(70320),he=t(89538);function ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function be(e){var n=e.pipeline,t=(0,p.useRouter)(),r=(0,de.Ct)(),u=n.uuid,c=(0,s.useState)(null),l=c[0],x=c[1],y=(0,s.useState)(!1),Z=y[0],P=y[1],w=ee.ZP.projects.list().data,C=(0,s.useMemo)((function(){var e;return null===w||void 0===w||null===(e=w.projects)||void 0===e?void 0:e[0]}),[w]),_=((0,s.useMemo)((function(){var e;return(0,fe.h)(null===C||void 0===C||null===(e=C.features)||void 0===e?void 0:e[j.d.LOCAL_TIMEZONE])}),[null===C||void 0===C?void 0:C.features]),(0,s.useMemo)((function(){var e;return!(null===C||void 0===C||null===(e=C.features)||void 0===e||!e[j.d.INTERACTIONS])}),[null===C||void 0===C?void 0:C.features])),S=ee.ZP.variables.pipelines.list(u,{global_only:!0},{revalidateOnFocus:!1}).data,E=null===S||void 0===S?void 0:S.variables,N=(0,ce.iV)(),D=(0,ce.DQ)(N,[O.gm.INTERVAL,O.gm.STATUS,O.gm.TAG,O.gm.TYPE]),T=(0,le.xH)(D),R=null!==N&&void 0!==N&&N.page?N.page:0,H=ee.ZP.pipeline_schedules.pipelines.list(u,ge(ge({},T),{},{_limit:b.Q,_offset:(null!==N&&void 0!==N&&N.page?N.page:0)*b.Q}),{refreshInterval:7500}),F=H.data,U=H.mutate,B=(0,s.useMemo)((function(){return(null===F||void 0===F?void 0:F.pipeline_schedules)||[]}),[F]),Y=function(e){return(0,d.Db)(ee.ZP.pipeline_schedules.pipelines.useCreate(u),{onSuccess:function(n){return(0,pe.wD)(n,{callback:function(n){var t=n.pipeline_schedule.id;null===e||void 0===e||e(t)},onErrorCallback:function(e,n){return x({errors:n,response:e})}})}})},G=Y((function(e){return t.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(e,"/edit"))})),Q=(0,i.Z)(G,2),X=Q[0],ve=Q[1].isLoading,be=Y(U),me=(0,i.Z)(be,2),Oe=me[0],xe=me[1].isLoading,je=(0,s.useMemo)((function(){var e;return null===(e=(0,A.wx)(E,(function(e){return e.uuid===ne.C})))||void 0===e?void 0:e.reduce((function(e,n){var t=n.uuid,r=n.value;return ge(ge({},e),{},(0,o.Z)({},t,r))}),{})}),[E]),ye=(0,L.Y6)(),Ze=(0,s.useMemo)((function(){return{name:ye,schedule_interval:O.U5.ONCE,schedule_type:O.Xm.TIME,start_time:(0,ue.d$)((new Date).toISOString(),{dayAgo:!0,utcFormat:!0}),status:O.fq.ACTIVE}}),[ye]),Pe=(0,he.dd)((function(){return(0,V.jsx)(W,{initialPipelineSchedulePayload:Ze,onCancel:Ce,onSuccess:Oe,variables:je})}),{},[E,je],{background:!0,uuid:"run_pipeline_now_popup"}),we=(0,i.Z)(Pe,2),ke=we[0],Ce=we[1],Ie=(0,s.useState)(),_e=Ie[0],Se=Ie[1],Ee=(0,s.useMemo)((function(){var e=null===_e||void 0===_e?void 0:_e.variables,n=!(0,se.Qr)(e),t=n?null===_e||void 0===_e?void 0:_e.variables:(0,se.Qr)(je)?null:je;return function(i){var o=i.height-(t?151:80);return(0,V.jsxs)(V.Fragment,{children:[t&&(0,V.jsx)(z,{hasOverride:n,scheduleType:null===_e||void 0===_e?void 0:_e.schedule_type,variables:je,variablesOverride:e}),!t&&(0,V.jsxs)(k.Z,{p:M.cd,children:[(0,V.jsx)(I.ZP,{children:"This pipeline has no runtime variables."}),!r&&(0,V.jsxs)(k.Z,{mt:1,children:[(0,V.jsx)(a(),{as:"/pipelines/".concat(u,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,V.jsx)(g.Z,{primary:!0,children:"Click here"})})," ",(0,V.jsx)(I.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,V.jsx)(f.Z,ge(ge({},i),{},{height:o,noStatus:!0}))]})}}),[r,u,null===_e||void 0===_e?void 0:_e.schedule_type,null===_e||void 0===_e?void 0:_e.variables,je]),Ne=(0,s.useMemo)((function(){var e;return(null===F||void 0===F||null===(e=F.metadata)||void 0===e?void 0:e.count)||[]}),[F]),De=ee.ZP.pipeline_triggers.pipelines.list(u).data,Te=(0,s.useMemo)((function(){return(0,ae.HK)((null===De||void 0===De?void 0:De.pipeline_triggers)||[],(function(e){return e.name}))}),[De]),Me=ee.ZP.tags.list().data,Re=(0,s.useMemo)((function(){return(0,ae.YC)((null===Me||void 0===Me?void 0:Me.tags)||[],(function(e){return e.uuid}))}),[Me]),Le=ee.ZP.pipeline_interactions.detail(_&&u,{filter_for_permissions:1}),Ae=Le.data,Ve=(Le.mutate,ee.ZP.interactions.pipeline_interactions.list(_&&u)),He=Ve.data,Fe=(Ve.mutate,ee.ZP.pipelines.detail(_&&u).data),Ue=(0,s.useMemo)((function(){return(null===Ae||void 0===Ae?void 0:Ae.pipeline_interaction)||{}}),[Ae]),We=((0,s.useMemo)((function(){return(null===He||void 0===He?void 0:He.interactions)||[]}),[He]),(0,s.useMemo)((function(){var e;return _&&(null===(e=Object.keys((null===Ue||void 0===Ue?void 0:Ue.blocks)||{}))||void 0===e?void 0:e.length)>=1}),[_,Ue])),Be=(0,s.useMemo)((function(){return We&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(k.Z,{ml:"12px"}),(0,V.jsx)(oe.lZ,{}),(0,V.jsx)(k.Z,{ml:"12px"}),(0,V.jsx)(v.ZP,ge(ge({},ie.B),{},{Icon:te.yd,inline:!0,onClick:function(){return P(!0)},uuid:"Create trigger with no-code",children:"Create trigger with no-code"}))]})}),[We,P]),Ye=(0,s.useMemo)((function(){return(0,V.jsx)(K.Z,{addButtonProps:{isLoading:ve,label:"New trigger",onClick:function(){return X({pipeline_schedule:{name:(0,L.Y6)()}})}},filterOptions:{frequency:Object.values(O.U5),status:Object.values(O.fq),tag:Re.map((function(e){return e.uuid})),type:Object.values(O.Xm)},filterValueLabelMapping:{tag:Re.reduce((function(e,n){var t=n.uuid;return ge(ge({},e),{},(0,o.Z)({},t,t))}),{}),type:O.Z4},onClickFilterDefaults:function(){t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(u,"/triggers"))},query:D,secondaryButtonProps:{disabled:r,isLoading:xe,label:"Run @once",onClick:(0,se.Qr)(je)?function(){return Oe({pipeline_schedule:Ze})}:ke,tooltip:"Creates an @once trigger and runs pipeline immediately"},showDivider:!0,children:Be})}),[X,Oe,ve,xe,r,Be,Ze,u,D,t,ke,Re,je]),Ge=(0,s.useMemo)((function(){var e=[];return Z?e.push.apply(e,[{label:function(){return"Triggers"},onClick:function(){return P(!1)}},{bold:!0,label:function(){return"New trigger"}}]):e.push({label:function(){return"Triggers"}}),e}),[Z,P]);return(0,V.jsxs)(m.Z,{breadcrumbs:Ge,buildSidekick:!Z&&Ee,errors:l,pageName:re.M.TRIGGERS,pipeline:n,setErrors:x,subheader:!Z&&Ye,title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(re.M.TRIGGERS,"_").concat(u),children:[Z&&(0,V.jsx)(q.Z,{creatingWithLimitation:!0,errors:l,onCancel:function(){return P(!1)},pipeline:null===Fe||void 0===Fe?void 0:Fe.pipeline,project:C,setErrors:x,useCreateScheduleMutation:Y}),!Z&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(h.Z,{light:!0}),F?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)($.Z,{fetchPipelineSchedules:U,pipeline:n,pipelineSchedules:B,pipelineTriggersByName:Te,selectedSchedule:_e,setErrors:x,setSelectedSchedule:Se}),(0,V.jsx)(k.Z,{p:2,children:(0,V.jsx)(b.ZP,{maxPages:9,onUpdate:function(e){var n=Number(e),r=ge(ge({},N),{},{page:n>=0?n:0});t.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(u,"/triggers?").concat((0,ce.uM)(r)))},page:Number(R),totalPages:Math.ceil(Ne/b.Q)})})]}):(0,V.jsx)(k.Z,{m:2,children:(0,V.jsx)(J.Z,{inverted:!0})})]})]})}be.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var me=(0,x.Z)(be)},40183:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return t(23706)}])}},function(e){e.O(0,[844,2083,2851,2369,341,9161,4495,9302,8013,600,9696,8264,4666,5499,4839,5457,7055,1769,1743,6333,3951,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);