(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{90659:function(e,n,t){"use strict";var r=t(67403),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,n){var t,o,l,c,s,u,a=!1;n||(n={}),t=n.debug||!1;try{if(l=r(),c=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(r){if(r.stopPropagation(),n.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=i[n.format]||i.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(n.format,e);n.onCopy&&(r.preventDefault(),n.onCopy(r.clipboardData))})),document.body.appendChild(u),c.selectNodeContents(u),s.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");a=!0}catch(d){t&&console.error("unable to copy using execCommand: ",d),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),a=!0}catch(d){t&&console.error("unable to copy using clipboardData: ",d),t&&console.error("falling back to prompt"),o=function(e){var n=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)}("message"in n?n.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(c):s.removeAllRanges()),u&&document.body.removeChild(u),l()}return a}},11984:function(e,n,t){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.CopyToClipboard=void 0;var i=c(t(82684)),o=c(t(90659)),l=["text","onCopy","options","children"];function c(e){return e&&e.__esModule?e:{default:e}}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){j(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function d(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function p(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,n){return f=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},f(e,n)}function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=v(e);if(n){var i=v(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m(this,t)}}function m(e,n){if(n&&("object"===r(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var x=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&f(e,n)}(s,e);var n,t,r,c=h(s);function s(){var e;d(this,s);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return j(g(e=c.call.apply(c,[this].concat(t))),"onClick",(function(n){var t=e.props,r=t.text,l=t.onCopy,c=t.children,s=t.options,u=i.default.Children.only(c),a=(0,o.default)(r,s);l&&l(r,a),u&&u.props&&"function"===typeof u.props.onClick&&u.props.onClick(n)})),e}return n=s,(t=[{key:"render",value:function(){var e=this.props,n=(e.text,e.onCopy,e.options,e.children),t=a(e,l),r=i.default.Children.only(n);return i.default.cloneElement(r,u(u({},t),{},{onClick:this.onClick}))}}])&&p(n.prototype,t),r&&p(n,r),Object.defineProperty(n,"prototype",{writable:!1}),s}(i.default.PureComponent);n.CopyToClipboard=x,j(x,"defaultProps",{onCopy:void 0,options:void 0})},64866:function(e,n,t){"use strict";var r=t(11984).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},67403:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,t=[],r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach((function(n){e.addRange(n)})),n&&n.focus()}}},2850:function(e,n,t){"use strict";t.d(n,{M:function(){return c},W:function(){return l}});var r=t(9518),i=t(23831),o=t(3055),l=34*t(49125).iI,c=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);",""],o.Mz,(function(e){return"\n    border-left: 1px solid ".concat((e.theme.borders||i.Z.borders).medium,";\n  ")}))},60547:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(82394),i=t(21831),o=t(82684),l=t(47999),c=t(1210),s=t(34744),u=t(49894),a=t(67971),d=t(87372),p=t(86673),f=t(82531),h=t(9518),m=t(23831),g=t(73942),v=t(49125),j=h.default.div.withConfig({displayName:"indexstyle__BannerStyle",componentId:"sc-1te3pmf-0"})(["border-radius:","px;padding:","px;"," "," ",""],g.n_,3*v.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||m.Z.shadow).small,";\n  ")}),(function(e){return e.background&&"\n    background: ".concat(e.background,";\n  ")}),(function(e){return e.backgroundImage&&'\n    background-image: url("'.concat(e.backgroundImage,'");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  ')})),x=t(3055),b=t(95354),y=t(24141),Z=t(28598);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=function(e){var n=e.after,t=e.afterHidden,r=e.afterWidth,h=e.before,m=e.beforeWidth,g=e.breadcrumbs,_=e.buildSidekick,P=e.children,w=e.errors,S=e.headline,k=e.pageName,I=e.pipeline,C=e.setErrors,E=e.subheader,D=e.subheaderBackground,T=e.subheaderBackgroundImage,M=e.subheaderButton,N=e.subheaderText,A=e.title,R=e.uuid,U=(0,y.i)().height,F=I.uuid,H=f.ZP.pipelines.detail(F,{includes_outputs:!1},{revalidateOnFocus:!1}).data,z=null===H||void 0===H?void 0:H.pipeline,W=(0,o.useMemo)((function(){return n||(_?_({height:U,heightOffset:x.Mz,pipeline:z}):null)}),[n,_,U,z]),q=r||(W?50*v.iI:null),L=(0,o.useMemo)((function(){var e=[];return z&&(e.push.apply(e,[{label:function(){return"Pipelines"},linkProps:{href:"/pipelines"}}]),g?(e.push({label:function(){return z.uuid},linkProps:{as:"/pipelines/".concat(F,"/triggers"),href:"/pipelines/[pipeline]/triggers"}}),e.push.apply(e,(0,i.Z)(g)),e[e.length-1].bold=!0):e.push({bold:!0,label:function(){return z.name}})),e}),[g,z,F]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.Z,{after:W,afterHidden:t,afterWidth:q,before:h,beforeWidth:m,breadcrumbs:L,navigationItems:(0,b.H)(k,z),subheaderChildren:"undefined"!==typeof E&&E,title:z?A?A(z):z.name:null,uuid:R,children:[(M||N)&&(0,Z.jsx)(p.Z,{mb:v.Mq,mt:v.cd,mx:v.cd,children:(0,Z.jsx)(j,{background:D,backgroundImage:T,children:(0,Z.jsxs)(a.Z,{alignItems:"center",children:[M,N&&(0,Z.jsx)(p.Z,{ml:3}),N]})})}),S&&(0,Z.jsx)(p.Z,{p:v.cd,children:(0,Z.jsxs)(p.Z,{mt:v.cd,px:v.cd,children:[(0,Z.jsx)(d.Z,{level:5,children:S}),(0,Z.jsx)(s.Z,{light:!0,mt:v.cd,short:!0})]})}),P]}),w&&(0,Z.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===C||void 0===C?void 0:C(null)},children:(0,Z.jsx)(u.Z,O(O({},w),{},{onClose:function(){return null===C||void 0===C?void 0:C(null)}}))})]})}},56681:function(e,n,t){"use strict";t.d(n,{G:function(){return b},Z:function(){return y}});var r=t(75582),i=t(82394),o=t(26304),l=t(32316),c=t(22673),s=t(86532),u=t(86673),a=t(19711),d=t(58180),p=t(49125),f=t(19395),h=t(28598),m=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j={uuid:"Run details"},x={uuid:"Dependency tree"},b=[x,j];function y(e){var n=e.height,t=e.heightOffset,i=e.pipeline,g=e.selectedRun,y=e.selectedTab,Z=e.setSelectedTab,_=v({},(0,o.Z)(e,m));g?_.blockStatus=(0,f.IJ)(null===g||void 0===g?void 0:g.block_runs):_.noStatus=!0;var O=(null===g||void 0===g?void 0:g.variables)||{};null!==g&&void 0!==g&&g.event_variables&&(O.event=g.event_variables);var P=[];O&&JSON.stringify(O,null,2).split("\n").forEach((function(e){P.push("    ".concat(e))}));var w=g&&[["Run ID",null===g||void 0===g?void 0:g.id],["Variables",(0,h.jsx)(c.Z,{language:"json",small:!0,source:P.join("\n")})]],S=g&&(0,h.jsx)(u.Z,{pb:p.cd,px:p.cd,children:(0,h.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:w.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return[(0,h.jsx)(a.ZP,{monospace:!0,muted:!0,children:t}),(0,h.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:i})]})),uuid:"LogDetail"})}),k=y&&Z;return(0,h.jsxs)(h.Fragment,{children:[k&&(0,h.jsx)(u.Z,{py:p.cd,children:(0,h.jsx)(l.Z,{onClickTab:Z,selectedTabUUID:null===y||void 0===y?void 0:y.uuid,tabs:b})}),(!k||x.uuid===(null===y||void 0===y?void 0:y.uuid))&&(0,h.jsx)(s.Z,v(v({},_),{},{height:n,heightOffset:(t||0)+(k?76:0),pipeline:i})),j.uuid===(null===y||void 0===y?void 0:y.uuid)&&S]})}},18025:function(e,n,t){"use strict";t.d(n,{J:function(){return s},U:function(){return c}});var r=t(9518),i=t(23831),o=t(73942),l=t(49125),c=r.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-m7tlau-0"})(["border-radius:","px;border-style:solid;border-width:2px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],o.TR,14*l.iI,l.cd*l.iI,l.cd*l.iI,40*l.iI,(function(e){return!e.selected&&"\n    border-color: ".concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.selected&&"\n    border-color: ".concat((e.theme.interactive||i.Z.interactive).linkPrimary,";\n  ")})),s=r.default.div.withConfig({displayName:"indexstyle__DateSelectionContainer",componentId:"sc-m7tlau-1"})(["border-radius:","px;padding:","px;"," "," ",""],o.n_,l.tr,(function(e){return"\n    background-color: ".concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.absolute&&"\n    position: absolute;\n    z-index: 2;\n    right: 0;\n    top: ".concat(2.5*l.iI,"px;\n  ")}),(function(e){return e.topPosition&&"\n    top: -".concat(42*l.iI,"px;\n  ")}))},2713:function(e,n,t){"use strict";var r=t(82394),i=t(44495),o=t(67971),l=t(55378),c=t(86673),s=t(19711),u=t(18025),a=t(49125),d=t(24224),p=t(28598);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.selectedDate,t=e.selectedTime,r=e.setSelectedDate,f=e.setSelectedTime,m=e.topPosition;return(0,p.jsxs)(u.J,{absolute:!0,topPosition:m,children:[(0,p.jsx)(i.ZP,{onChange:r,value:n}),(0,p.jsx)(c.Z,{mb:2}),(0,p.jsxs)(o.Z,{alignItems:"center",children:[(0,p.jsx)(s.ZP,{default:!0,large:!0,children:"Time (UTC):"}),(0,p.jsx)(c.Z,{pr:2}),(0,p.jsx)(l.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{hour:e.target.value})}))},paddingRight:5*a.iI,placeholder:"HH",value:null===t||void 0===t?void 0:t.hour,children:(0,d.m5)(24,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"hour_".concat(e))}))}),(0,p.jsx)(c.Z,{px:1,children:(0,p.jsx)(s.ZP,{bold:!0,large:!0,children:":"})}),(0,p.jsx)(l.Z,{compact:!0,monospace:!0,onChange:function(e){e.preventDefault(),f((function(n){return h(h({},n),{},{minute:e.target.value})}))},paddingRight:5*a.iI,placeholder:"MM",value:null===t||void 0===t?void 0:t.minute,children:(0,d.m5)(60,0).map((function(e){return String(e).padStart(2,"0")})).map((function(e){return(0,p.jsx)("option",{value:e,children:e},"minute_".concat(e))}))})]})]})}},54183:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ie}});var r,i=t(75582),o=t(77837),l=t(82394),c=t(38860),s=t.n(c),u=t(82684),a=t(83455),d=t(34376),p=t(60328),f=t(34744),h=t(67971),m=t(87372),g=t(51099),v=t(60547),j=t(97496),x=t(47409),b=t(93348),y=t(55378),Z=t(86673),_=t(58180),O=t(19711),P=t(46261),w=t(82531),S=t(56681),k=t(2850),I=t(10503),C=t(49125),E=t(59920),D=t(24224);!function(e){e.AWS="aws_event"}(r||(r={}));var T=[{label:function(){return"AWS"},uuid:r.AWS}],M=(0,D.HK)(T,(function(e){return e.uuid})),N=t(66050),A=t(58122),R=t(19395),U=t(33766),F=t(7715),H=t(9736),z=t(96510),W=t(66653),q=t(59e3),L=t(28598);function V(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?V(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B=function(e){var n=e.fetchPipelineSchedule,t=e.pipeline,r=e.pipelineSchedule,o=e.variables,l=(0,d.useRouter)(),c=(0,H.Ct)(),s=(0,u.useState)(null),D=s[0],T=s[1],V=(t||{}).uuid,B=r||{},J=B.id,G=B.event_matchers,K=B.name,Y=B.schedule_interval,Q=B.schedule_type,$=B.settings,ee=B.sla,ne=B.start_time,te=B.status,re=B.variables,ie=void 0===re?{}:re,oe=(0,q.iV)(),le={_limit:30,_offset:30*(null!==oe&&void 0!==oe&&oe.page?oe.page:0)};null!==oe&&void 0!==oe&&oe.status&&(le.status=oe.status);var ce=w.ZP.pipeline_runs.pipeline_schedules.list(J,le,{refreshInterval:3e3,revalidateOnFocus:!0}),se=ce.data,ue=ce.mutate,ae=(0,u.useMemo)((function(){return(null===se||void 0===se?void 0:se.pipeline_runs)||[]}),[se]),de=(0,u.useMemo)((function(){var e;return(null===se||void 0===se||null===(e=se.metadata)||void 0===e?void 0:e.count)||[]}),[se]),pe=(0,u.useState)(null),fe=pe[0],he=pe[1],me=(0,u.useMemo)((function(){var e=null!==oe&&void 0!==oe&&oe.page?oe.page:0;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(j.Z,{fetchPipelineRuns:ue,onClickRow:function(e){return he((function(n){var t=ae[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipelineRuns:ae,selectedRun:fe}),(0,L.jsx)(Z.Z,{p:2,children:(0,L.jsx)(g.Z,{page:Number(e),maxPages:9,onUpdate:function(e){var n=Number(e),t=X(X({},oe),{},{page:n>=0?n:0});l.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(V,"/triggers/").concat(J,"?").concat((0,q.uM)(t)))},totalPages:Math.ceil(de/30)})})]})}),[ue,t,ae,fe]),ge=(0,u.useState)(S.G[0]),ve=ge[0],je=ge[1],xe=(0,a.Db)((function(e){return w.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:(0,F.gR)(e,["id"])})}),{onSuccess:function(e){return(0,z.wD)(e,{callback:function(){n()},onErrorCallback:function(e,n){return T({errors:n,response:e})}})}}),be=(0,i.Z)(xe,2),ye=be[0],Ze=be[1].isLoading,_e=(0,u.useMemo)((function(){return b.fq.ACTIVE===te}),[te]),Oe=(0,u.useMemo)((function(){var e,n,t={default:!0,size:1.5*C.iI},r=[[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.VW,X({},t)),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Trigger type"})]},"trigger_type_label"),(0,L.jsx)(O.ZP,{monospace:!0,children:null===(e=b.Z4[Q])||void 0===e?void 0:e.call(b.Z4)},"trigger_type")],[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.rs,X({},t)),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Status"})]},"trigger_status_label"),(0,L.jsx)(O.ZP,{danger:!_e,monospace:!0,success:_e,children:te},"trigger_status")]];if(ee){var i=(0,R.gU)(ee),o=i.time,l=i.unit,c=1===o?l:"".concat(l,"s");r.push([(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.kI,X({},t)),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"SLA"})]},"trigger_sla_label"),(0,L.jsx)(O.ZP,{monospace:!0,children:"".concat(o," ").concat(c)},"trigger_sla")])}(Y&&r.push([(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.Pf,X({},t)),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Frequency"})]},"trigger_frequency_label"),(0,L.jsx)(O.ZP,{monospace:!0,children:Y.replace("@","")},"trigger_frequency")]),ne&&r.push([(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.aw,X({},t)),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Start date"})]},"trigger_start_date_label"),(0,L.jsx)(O.ZP,{monospace:!0,children:ne},"trigger_start_date")]),null!==$&&void 0!==$&&$.skip_if_previous_running)&&r.push([(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(P.Z,{default:!0,label:"Skip current run if any previous runs are still in progress",size:1.5*C.iI,widthFitContent:!0}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Skip if running"})]},"trigger_skip_if_running"),(0,L.jsx)(O.ZP,{monospace:!0,children:null===(n=$.skip_if_previous_running)||void 0===n?void 0:n.toString()},"trigger_skip_if_running_label")]);return null!==$&&void 0!==$&&$.allow_blocks_to_fail&&r.push([(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(P.Z,{default:!0,label:"Trigger runs will continue running blocks if other unrelated blocks fail",size:1.5*C.iI,widthFitContent:!0}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Allow blocks to fail"})]},"trigger_allow_blocks_to_fail"),(0,L.jsx)(O.ZP,{monospace:!0,children:$.allow_blocks_to_fail.toString()},"trigger_allow_blocks_to_fail_label")]),(0,L.jsx)(_.Z,{columnFlex:[null,1],rows:r})}),[_e,Y,$,ee,ne,Q]),Pe=(0,u.useMemo)((function(){return ie||{}}),[ie]),we=(0,u.useMemo)((function(){var e,n=[];return(0,F.Qr)(Pe)?n=(0,A.wx)(o,(function(e){return"global"===e.uuid})):Object.entries(Pe).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],o=t[1];n.push({uuid:r,value:(0,A.FS)(o)})})),"undefined"!==typeof(n=(0,A.JZ)(n||[],Q))&&null!==(e=n)&&void 0!==e&&e.length?(0,L.jsx)(_.Z,{columnFlex:[null,1],rows:n.map((function(e){var n=e.uuid,t=e.value;return[(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:n},"settings_variable_label_".concat(n)),(0,L.jsx)(O.ZP,{monospace:!0,small:!0,children:t},"settings_variable_".concat(n))]}))}):null}),[Q,ie,o]),Se=(0,u.useMemo)((function(){return(0,L.jsx)(_.Z,{columnFlex:[null,1],columns:[{uuid:"Provider"},{uuid:"Event"}],rows:null===G||void 0===G?void 0:G.map((function(e,n){var t=e.event_type,r=e.name;return[(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:M[t].label()},"".concat(t,"_").concat(n,"_label")),(0,L.jsx)(O.ZP,{monospace:!0,children:r},"".concat(t,"_").concat(n,"_name"))]}))})}),[G]);return(0,L.jsxs)(v.Z,{afterHidden:!fe,before:(0,L.jsxs)(k.M,{children:[(0,L.jsxs)(Z.Z,{mb:C.HN,pt:C.cd,px:C.cd,children:[(0,L.jsxs)(Z.Z,{mb:C.cd,children:[b.Xm.TIME===Q&&(0,L.jsx)(I.kO,{size:5*C.iI}),b.Xm.EVENT===Q&&(0,L.jsx)(I.Jp,{size:5*C.iI}),!Q&&(0,L.jsx)(I.VW,{size:5*C.iI})]}),(0,L.jsx)(m.Z,{children:K})]}),(0,L.jsx)(Z.Z,{px:C.cd,children:(0,L.jsx)(m.Z,{level:5,children:"Settings"})}),(0,L.jsx)(f.Z,{light:!0,mt:1,short:!0}),Oe,(null===G||void 0===G?void 0:G.length)>=1&&(0,L.jsxs)(Z.Z,{my:C.HN,children:[(0,L.jsx)(Z.Z,{px:C.cd,children:(0,L.jsx)(m.Z,{level:5,children:"Events"})}),(0,L.jsx)(f.Z,{light:!0,mt:1,short:!0}),Se]}),we&&(0,L.jsxs)(Z.Z,{my:C.HN,children:[(0,L.jsx)(Z.Z,{px:C.cd,children:(0,L.jsx)(m.Z,{level:5,children:"Runtime variables"})}),(0,L.jsx)(f.Z,{light:!0,mt:1,short:!0}),we]})]}),beforeWidth:k.W,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(V,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return K},linkProps:{as:"/pipelines/".concat(V,"/triggers/").concat(J),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],buildSidekick:function(e){return(0,S.Z)(X(X({},e),{},{selectedRun:fe,selectedTab:ve,setSelectedTab:je}))},errors:D,pageName:E.M.TRIGGERS,pipeline:t,setErrors:T,subheader:(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(p.Z,{beforeIcon:_e?(0,L.jsx)(I.dz,{size:2*C.iI}):(0,L.jsx)(I.Py,{inverted:!c,size:2*C.iI}),danger:_e&&!c,loading:Ze,onClick:function(e){(0,W.j)(e),ye({id:J,status:_e?b.fq.INACTIVE:b.fq.ACTIVE})},outline:!0,success:!_e&&!c,children:_e?"Pause trigger":"Start trigger"}),(0,L.jsx)(Z.Z,{mr:C.cd}),!c&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{linkProps:{as:"/pipelines/".concat(V,"/triggers/").concat(J,"/edit"),href:"/pipelines/[pipeline]/triggers/[...slug]"},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Edit trigger"}),(0,L.jsx)(Z.Z,{mr:C.cd})]}),(0,L.jsxs)(y.Z,{compact:!0,defaultColor:!0,onChange:function(e){e.preventDefault(),"all"===e.target.value?l.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(V,"/triggers/").concat(J)):(0,U.u7)({page:0,status:e.target.value})},paddingRight:4*C.iI,placeholder:"Select run status",value:(null===oe||void 0===oe?void 0:oe.status)||"all",children:[(0,L.jsx)("option",{value:"all",children:"All statuses"},"all_statuses"),Object.values(N.V).map((function(e){return(0,L.jsx)("option",{value:e,children:x.D[e]},e)}))]})]}),title:function(){return K},uuid:"triggers/detail",children:[(0,L.jsx)(Z.Z,{mt:C.cd,px:C.cd,children:(0,L.jsx)(m.Z,{level:5,children:"Runs for this trigger"})}),(0,L.jsx)(f.Z,{light:!0,mt:C.cd,short:!0}),me]})},J=t(21831),G=t(21764),K=t(2713),Y=t(38341),Q=t(47999),$=t(22673),ee=t(65730),ne=t(93461),te=t(10919),re=t(26304),ie=t(9518),oe=t(23831),le=t(2005),ce=t(31012),se=["children","large","lineHeight","ordered"];function ue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ue(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=(0,ie.css)([""," "," "," "," "," "," "," "," "," ",""],(function(e){return!e.muted&&"\n    color: ".concat((e.theme.content||oe.Z.content).default,";\n  ")}),(function(e){return e.muted&&"\n    color: ".concat((e.theme.content||oe.Z.content).muted,";\n  ")}),(function(e){return e.inverted&&"\n    color: ".concat((e.theme.content||oe.Z.content).inverted,";\n  ")}),(function(e){return e.color&&"\n    color: ".concat(e.color,";\n  ")}),(function(e){return!e.monospace&&"\n    font-family: ".concat(le.ry,";\n  ")}),(function(e){return e.monospace&&"\n    font-family: ".concat(le.Vp,";\n  ")}),(function(e){return e.large&&"\n    ".concat(ce.x_,"\n  ")}),(function(e){return!e.large&&!e.small&&"\n    ".concat(ce.i3,"\n  ")}),(function(e){return e.small&&"\n    ".concat(ce.J5,"\n  ")}),(function(e){return e.lineHeight&&"\n    line-height: ".concat(e.lineHeight,"px !important;\n  ")})),pe=ie.default.ul.withConfig({displayName:"List__UnorderedListStyle",componentId:"sc-1f6yhbi-0"})(["",""],de),fe=ie.default.ol.withConfig({displayName:"List__OrderedListStyle",componentId:"sc-1f6yhbi-1"})(["",""],de),he=ie.default.li.withConfig({displayName:"List__ListItemStyle",componentId:"sc-1f6yhbi-2"})(["",""],(function(e){return e.large&&e.marginTop&&"\n    margin-top: ".concat(1*C.iI,"px;\n  ")}));var me=function(e){var n=e.children,t=e.large,r=e.lineHeight,i=e.ordered,o=(0,re.Z)(e,se),l=i?fe:pe;return(0,L.jsx)(l,ae(ae({large:t,lineHeight:r},o),{},{children:u.Children.map(n,(function(e,n){return(0,L.jsx)(he,ae(ae({large:t,marginTop:n>=1},o),{},{children:u.cloneElement(e)}),e.props.key)}))}))},ge=t(98781),ve=t(82944),je=t(70902),xe=t(18025);function be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?be(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze=function(e){var n=[{description:function(){return"This pipeline will run continuously on an interval or just once."},label:function(){return"Schedule"},uuid:b.Xm.TIME},{description:function(){return"This pipeline will run when a specific event occurs."},label:function(){return"Event"},uuid:b.Xm.EVENT},{description:function(){return"Run this pipeline when you make an API call."},label:function(){return"API"},uuid:b.Xm.API}];return e?n.slice(0,1):n};var _e=function(e){var n=e.fetchPipelineSchedule,t=e.pipeline,r=e.pipelineSchedule,o=e.variables,c=(0,d.useRouter)(),s=null===t||void 0===t?void 0:t.uuid,g=null===r||void 0===r?void 0:r.id,j=(null===t||void 0===t?void 0:t.type)===ge.qL.STREAMING,x=(0,u.useState)(null),P=x[0],S=x[1],k=(0,u.useState)([]),M=k[0],N=k[1],U=(0,u.useState)(!1),H=U[0],W=U[1],q=(0,u.useState)(!1),V=q[0],X=q[1],B=(0,u.useState)(),re=B[0],ie=B[1],oe=(0,u.useState)({}),le=oe[0],ce=oe[1],se=(0,u.useState)(r),ue=se[0],ae=se[1],de=(0,u.useState)(!1),pe=de[0],fe=de[1],he=(0,u.useState)(null),be=he[0],_e=he[1],Oe=(0,u.useMemo)((function(){return(0,A.wx)(o,(function(e){return"global"===e.uuid}))}),[o]),Pe=ue||{},we=Pe.name,Se=Pe.schedule_interval,ke=Pe.schedule_type,Ie=Pe.settings,Ce=void 0===Ie?{}:Ie,Ee=Pe.sla,De=Pe.start_time,Te=(Pe.token,Pe.variables),Me=void 0===Te?{}:Te;(0,u.useEffect)((function(){Ce&&ie(Ce)}),[Ce]);var Ne=(0,u.useState)(null),Ae=Ne[0],Re=Ne[1],Ue=(0,u.useState)({hour:"00",minute:"00"}),Fe=Ue[0],He=Ue[1],ze=w.ZP.event_rules.detail("aws").data,We=(0,u.useMemo)((function(){var e;return(null===ze||void 0===ze||null===(e=ze.event_rule)||void 0===e?void 0:e.rules)||[]}),[ze]),qe=(0,u.useMemo)((function(){return(0,D.HK)(We,(function(e){return e.name}))}),[We]),Le=(0,a.Db)(w.ZP.pipeline_schedules.useUpdate(g),{onSuccess:function(e){return(0,z.wD)(e,{callback:function(){n(),c.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(s,"/triggers/").concat(g))},onErrorCallback:function(e,n){return S({errors:n,response:e})}})}}),Ve=(0,i.Z)(Le,2),Xe=Ve[0],Be=Ve[1].isLoading,Je=(0,u.useMemo)((function(){return Me||{}}),[Me]);(0,u.useEffect)((function(){if(De){var e=De.split(" ")[1];Re((0,R.eI)(De)),He({hour:e.substring(0,2),minute:e.substring(3,5)})}else{var n=new Date;Re(n),He({hour:String(n.getUTCHours()).padStart(2,"0"),minute:String(n.getUTCMinutes()).padStart(2,"0")})}}),[De]),(0,u.useEffect)((function(){Je&&Object.keys(Je).length>0&&W(!0)}),[Je]),(0,u.useEffect)((function(){ce(H?null===Oe||void 0===Oe?void 0:Oe.reduce((function(e,n){var t=n.uuid,r=n.value;return ye(ye({},e),{},(0,l.Z)({},t,Je[t]||r))}),{}):null)}),[Oe,H]),(0,u.useEffect)((function(){if(r&&(N(r.event_matchers),Ke?(ae(ye(ye({},r),{},{schedule_interval:"custom"})),_e(Se)):ae(j?ye(ye({},r),{},{schedule_interval:b.U5.ONCE}):r),r.sla)){X(!0);var e=(0,R.gU)(Ee),n=e.time,t=e.unit;ae((function(e){return ye(ye({},e),{},{slaAmount:n,slaUnit:t})}))}}),[r]);var Ge=(0,u.useCallback)((function(){var e=ye(ye({},(0,F.GL)(ue,["name","schedule_type"])),{},{event_matchers:[],schedule_interval:null,start_time:null,variables:(0,A.e7)(le)});if(b.Xm.EVENT===ue.schedule_type?e.event_matchers=M:(e.schedule_interval=Ke?be:ue.schedule_interval,e.start_time=Ae&&null!==Fe&&void 0!==Fe&&Fe.hour&&null!==Fe&&void 0!==Fe&&Fe.minute?"".concat(Ae.toISOString().split("T")[0]," ").concat(null===Fe||void 0===Fe?void 0:Fe.hour,":").concat(null===Fe||void 0===Fe?void 0:Fe.minute,":00"):null),V){var n=null===ue||void 0===ue?void 0:ue.slaAmount,t=null===ue||void 0===ue?void 0:ue.slaUnit;if(!n||isNaN(n)||!t)return void G.Am.error("Please enter a valid SLA",{position:G.Am.POSITION.BOTTOM_RIGHT,toastId:"sla_error"});e.sla=(0,R.vJ)(n,t)}else null!==r&&void 0!==r&&r.sla&&(e.sla=0);e.settings=re,Xe({pipeline_schedule:e})}),[be,Ae,V,M,r,le,ue,re,Fe,Xe]),Ke=(0,u.useMemo)((function(){return Se&&!Object.values(b.U5).includes(Se)}),[Se]),Ye=(0,u.useMemo)((function(){var e=[[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.KJ,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Trigger name"})]},"trigger_name_detail"),(0,L.jsx)(ve.Z,{monospace:!0,onChange:function(e){e.preventDefault(),ae((function(n){return ye(ye({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:we},"trigger_name_input_detail")],[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.Pf,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Frequency"})]},"frequency"),(0,L.jsxs)("div",{children:[(0,L.jsxs)(y.Z,{monospace:!0,onChange:function(e){e.preventDefault();var n=e.target.value;ae((function(e){return ye(ye({},e),{},{schedule_interval:n})}))},placeholder:"Choose the frequency to run",value:Se,children:[!Se&&(0,L.jsx)("option",{value:""}),Object.values(b.U5).map((function(e){return(0,L.jsx)("option",{value:e,children:e.substring(1)},e)})),(0,L.jsx)("option",{value:"custom",children:"custom"},"custom")]}),(0,L.jsx)(Z.Z,{mt:1,p:1,children:(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["If you don\u2019t see the frequency option you need, select ",(0,L.jsx)(O.ZP,{inline:!0,monospace:!0,small:!0,children:"custom"})," and enter CRON syntax."]})})]},"frequency_input")],[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.aw,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Start date and time"})]},"start_time"),(0,L.jsxs)("div",{style:{minHeight:"".concat(5.75*C.iI,"px")},children:[!pe&&(0,L.jsx)(ve.Z,{monospace:!0,onClick:function(){return fe((function(e){return!e}))},placeholder:"YYYY-MM-DD HH:MM",value:Ae?"".concat(Ae.toISOString().split("T")[0]," ").concat(null===Fe||void 0===Fe?void 0:Fe.hour,":").concat(null===Fe||void 0===Fe?void 0:Fe.minute):""}),(0,L.jsx)("div",{style:{width:"400px"},children:(0,L.jsx)(Q.Z,{disableEscape:!0,onClickOutside:function(){return fe(!1)},open:pe,style:{position:"relative"},children:(0,L.jsx)(K.Z,{selectedDate:Ae,selectedTime:Fe,setSelectedDate:Re,setSelectedTime:He,topPosition:!0})})})]},"start_time_input")]];return j&&e.splice(1,1),Ke&&e.splice(2,0,[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.EK,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Cron expression"})]},"cron_expression"),(0,L.jsxs)("div",{children:[(0,L.jsx)(ve.Z,{monospace:!0,onChange:function(e){e.preventDefault(),_e(e.target.value)},placeholder:"* * * * *",value:be}),(0,L.jsxs)(Z.Z,{mt:1,p:1,children:[(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["If you want this pipeline to trigger every 1 minute, the CRON syntax is ",(0,L.jsx)(O.ZP,{inline:!0,monospace:!0,small:!0,children:"*/1 * * * *"}),"."]}),(0,L.jsxs)(O.ZP,{muted:!0,small:!0,children:["For more CRON syntax examples, check out this ",(0,L.jsx)(te.Z,{href:"https://crontab.guru/",openNewWindow:!0,small:!0,children:"resource"}),"."]})]})]},"cron_expression_input")]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Z,{mb:2,px:C.cd,children:(0,L.jsx)(m.Z,{children:"Settings"})}),(0,L.jsx)(f.Z,{light:!0,short:!0}),(0,L.jsx)(_.Z,{columnFlex:[null,1],rows:e})]})}),[be,Ae,Ke,j,we,Se,pe,Fe]),Qe=(0,u.useCallback)((function(e,n){N((function(t){return Object.entries(n).forEach((function(n){var r=(0,i.Z)(n,2),o=r[0],l=r[1];t[e][o]=l})),(0,J.Z)(t)}))}),[N]),$e=(0,u.useMemo)((function(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Z,{mb:C.cd,px:C.cd,children:(0,L.jsx)(m.Z,{children:"Settings"})}),(0,L.jsx)(f.Z,{light:!0,short:!0}),(0,L.jsx)(_.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.KJ,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Trigger name"})]},"trigger_name_event"),(0,L.jsx)(ve.Z,{monospace:!0,onChange:function(e){e.preventDefault(),ae((function(n){return ye(ye({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:we},"trigger_name_input_event")]]}),(0,L.jsxs)(Z.Z,{mb:2,mt:5,px:C.cd,children:[(0,L.jsx)(m.Z,{children:"Events"}),(0,L.jsxs)(O.ZP,{muted:!0,children:["Add 1 or more event that will trigger this pipeline to run.",(0,L.jsx)("br",{}),"If you add more than 1 event, this pipeline will trigger if any of the events are received."]}),(0,L.jsxs)(Z.Z,{mt:C.Mq,children:[(0,L.jsx)(O.ZP,{bold:!0,large:!0,children:"AWS events"}),(0,L.jsxs)(O.ZP,{muted:!0,children:["In order to retrieve all the possible AWS events you can trigger your pipeline from,",(0,L.jsx)("br",{}),"you\u2019ll need to set 3 environment variables (",(0,L.jsx)(te.Z,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html",openNewWindow:!0,underline:!0,children:"more info here"}),"):"]}),(0,L.jsx)(Z.Z,{mt:1,children:(0,L.jsxs)(me,{monospace:!0,ordered:!0,children:[(0,L.jsx)(O.ZP,{monospace:!0,children:"AWS_REGION_NAME"}),(0,L.jsx)(O.ZP,{monospace:!0,children:"AWS_ACCESS_KEY_ID"}),(0,L.jsx)(O.ZP,{monospace:!0,children:"AWS_SECRET_ACCESS_KEY"})]})})]})]}),(0,L.jsx)(f.Z,{light:!0,short:!0}),(null===M||void 0===M?void 0:M.length)>=1&&(0,L.jsx)(_.Z,{alignTop:!0,columnFlex:[1,1,2,null],columns:[{uuid:"Provider"},{uuid:"Event"},{uuid:"Pattern"},{label:function(){return""},uuid:"delete"}],rows:null===M||void 0===M?void 0:M.map((function(e,n){var t=e.event_type,r=e.name,i=e.pattern,o=e.id||"".concat(t,"-").concat(r,"-").concat(n,"-").concat(JSON.stringify(i)),l=[];return i&&JSON.stringify(i,null,2).split("\n").forEach((function(e){l.push("    ".concat(e))})),[(0,L.jsxs)(y.Z,{monospace:!0,onChange:function(e){return Qe(n,{event_type:e.target.value})},placeholder:"Event provider",value:t||"",children:[!t&&(0,L.jsx)("option",{value:""}),T.map((function(e){var n=e.label,t=e.uuid;return(0,L.jsx)("option",{value:t,children:n()},t)}))]},"event-provider-".concat(o)),(0,L.jsxs)(y.Z,{monospace:!0,onChange:function(e){var t,r=e.target.value,i=null===(t=qe[r])||void 0===t?void 0:t.event_pattern;Qe(n,{name:r,pattern:i?JSON.parse(i):null})},placeholder:"Event name",value:r,children:[!r&&(0,L.jsx)("option",{value:""}),We.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))]},"event-name-".concat(o)),i&&(0,L.jsx)($.Z,{language:"json",small:!0,source:l.join("\n")}),(0,L.jsx)(p.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return N((function(e){return(0,D.oM)(e,n)}))},children:(0,L.jsx)(I.rF,{default:!0,size:2*C.iI})},"remove_event")]}))}),(0,L.jsx)(Z.Z,{p:C.cd,children:(0,L.jsx)(p.Z,{beforeIcon:(0,L.jsx)(I.mm,{size:2*C.iI}),onClick:function(){return N((function(e){return e.concat({})}))},outline:!0,children:"Add event matcher"})})]})}),[M,We,we]),en=(0,u.useMemo)((function(){var e,n="";return n="".concat(window.origin,"/api/pipeline_schedules/").concat(null===r||void 0===r?void 0:r.id,"/pipeline_runs"),null!==r&&void 0!==r&&r.token&&(n="".concat(n,"/").concat(r.token)),(e=window.location.port)&&(n=n.replace(e,"6789")),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Z,{mb:C.cd,px:C.cd,children:(0,L.jsx)(m.Z,{children:"Settings"})}),(0,L.jsx)(f.Z,{light:!0,short:!0}),(0,L.jsx)(_.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.KJ,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"Trigger name"})]},"trigger_name_api"),(0,L.jsx)(ve.Z,{monospace:!0,onChange:function(e){e.preventDefault(),ae((function(n){return ye(ye({},n),{},{name:e.target.value})}))},placeholder:"Name this trigger",value:we},"trigger_name_input_api")]]}),(0,L.jsxs)(Z.Z,{mb:2,mt:5,px:C.cd,children:[(0,L.jsx)(m.Z,{children:"Endpoint"}),(0,L.jsxs)(O.ZP,{muted:!0,children:["Make a ",(0,L.jsx)(O.ZP,{bold:!0,inline:!0,monospace:!0,children:"POST"})," request to the following endpoint:"]}),(0,L.jsx)(Z.Z,{mt:C.Mq,children:(0,L.jsx)(ee.Z,{copiedText:n,linkText:n,monospace:!0,withCopyIcon:!0})})]}),(0,L.jsxs)(Z.Z,{mb:2,mt:5,px:C.cd,children:[(0,L.jsx)(m.Z,{children:"Payload"}),(0,L.jsx)(O.ZP,{muted:!0,children:"You can optionally include runtime variables in your request payload. These runtime variables are accessible from within each pipeline block."}),(0,L.jsx)(Z.Z,{mt:C.Mq,children:(0,L.jsx)(ee.Z,{withCopyIcon:!0,copiedText:'{\n  "pipeline_run": {\n    "variables": {\n      "key1": "value1",\n      "key2": "value2"\n    }\n  }\n}\n',children:(0,L.jsx)($.Z,{language:"json",small:!0,source:'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\n'})})})]}),(0,L.jsxs)(Z.Z,{mb:2,mt:5,px:C.cd,children:[(0,L.jsx)(m.Z,{children:"Sample cURL command"}),(0,L.jsx)(Z.Z,{mt:C.Mq,children:(0,L.jsx)($.Z,{language:"bash",small:!0,source:"\n    curl -X POST ".concat(n,' \\\n      --header \'Content-Type: application/json\' \\\n      --data \'\n    {\n      "pipeline_run": {\n        "variables": {\n          "key1": "value1",\n          "key2": "value2"\n        }\n      }\n    }\'\n')})})]})]})}),[we,r,"object"]),nn=!ke||b.Xm.TIME===ke&&!(j&&Ae||!j&&Ae&&Se)||b.Xm.EVENT===ke&&(!(null!==M&&void 0!==M&&M.length)||!M.every((function(e){var n=e.event_type,t=e.name;return n&&t}))),tn=(0,u.useMemo)((function(){return(0,L.jsxs)(Z.Z,{p:C.cd,children:[!(0,F.Qr)(Oe)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(Z.Z,{mr:2,children:(0,L.jsx)(je.Z,{checked:H,onCheck:W})}),(0,L.jsx)(O.ZP,{monospace:!0,muted:!0,children:"Overwrite global variables"})]}),H&&le&&Object.entries(le).length>0&&(0,L.jsx)(Z.Z,{mt:2,children:(0,L.jsx)(_.Z,{columnFlex:[null,1],columns:[{uuid:"Variable"},{uuid:"Value"}],rows:Object.entries(le).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:t},"variable_".concat(t)),(0,L.jsx)(ve.Z,{borderless:!0,monospace:!0,onChange:function(e){e.preventDefault(),ce((function(n){return ye(ye({},n),{},(0,l.Z)({},t,e.target.value))}))},paddingHorizontal:0,placeholder:"Variable value",value:r},"variable_uuid_input_".concat(t))]}))})})]}),(0,L.jsxs)(Z.Z,{mt:2,children:[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(Z.Z,{mr:2,children:(0,L.jsx)(je.Z,{checked:V,onCheck:function(e){X(e),e||ae((function(e){return ye(ye({},e),{},{slaAmount:0})}))}})}),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:"Configure trigger SLA"})]}),V&&(0,L.jsx)(Z.Z,{mt:2,children:(0,L.jsx)(_.Z,{columnFlex:[null,1],rows:[[(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(I.aw,{default:!0,size:1.5*C.iI}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(O.ZP,{default:!0,children:"SLA"})]},"sla_detail"),(0,L.jsxs)(h.Z,{children:[(0,L.jsx)(ne.Z,{flex:1,children:(0,L.jsx)(ve.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),ae((function(n){return ye(ye({},n),{},{slaAmount:e.target.value})}))},placeholder:"Time",value:null===ue||void 0===ue?void 0:ue.slaAmount})}),(0,L.jsx)(ne.Z,{flex:1,children:(0,L.jsx)(y.Z,{fullWidth:!0,monospace:!0,noBorder:!0,onChange:function(e){e.preventDefault(),ae((function(n){return ye(ye({},n),{},{slaUnit:e.target.value})}))},placeholder:"Select time unit",small:!0,value:null===ue||void 0===ue?void 0:ue.slaUnit,children:Object.keys(R.tL).map((function(e){return(0,L.jsx)("option",{value:e,children:"".concat(e,"(s)")},e)}))})})]},"sla_input_detail")]]})}),(0,L.jsxs)(Z.Z,{mt:2,children:[(0,L.jsx)(m.Z,{level:5,monospace:!0,children:"Additional settings"}),b.Xm.TIME===ke&&(0,L.jsx)(Z.Z,{mt:2,children:(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(Y.Z,{checked:null===re||void 0===re?void 0:re.skip_if_previous_running,onClick:function(){return ie((function(e){return ye(ye({},e),{},{skip_if_previous_running:!(null!==re&&void 0!==re&&re.skip_if_previous_running)})}))}}),(0,L.jsx)(Z.Z,{ml:2}),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:"Skip run if previous run still in progress"})]})}),(0,L.jsx)(Z.Z,{mt:2,children:(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(Y.Z,{checked:null===re||void 0===re?void 0:re.allow_blocks_to_fail,onClick:function(){return ie((function(e){return ye(ye({},e),{},{allow_blocks_to_fail:!(null!==re&&void 0!==re&&re.allow_blocks_to_fail)})}))}}),(0,L.jsx)(Z.Z,{ml:2}),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,small:!0,children:"Keep running pipeline even if blocks fail"})]})})]})]})]})}),[V,Oe,H,le,ue,X,W,re]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(v.Z,{after:tn,breadcrumbs:[{label:function(){return"Triggers"},linkProps:{as:"/pipelines/".concat(s,"/triggers"),href:"/pipelines/[pipeline]/triggers"}},{label:function(){return null===r||void 0===r?void 0:r.name},linkProps:{as:"/pipelines/".concat(s,"/triggers/").concat(g),href:"/pipelines/[pipeline]/triggers/[...slug]"}}],errors:P,pageName:E.M.TRIGGERS,pipeline:t,setErrors:S,subheader:(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(p.Z,{disabled:nn,loading:Be,onClick:Ge,outline:!0,primary:!0,children:"Save changes"}),(0,L.jsx)(Z.Z,{mr:1}),(0,L.jsx)(p.Z,{linkProps:{href:"/pipelines/[pipeline]/triggers/[...slug]",as:"/pipelines/".concat(s,"/triggers/").concat(g)},noHoverUnderline:!0,outline:!0,sameColorAsText:!0,children:"Cancel"})]}),title:function(){return"Edit ".concat(null===r||void 0===r?void 0:r.name)},uuid:"triggers/edit",children:[(0,L.jsxs)(Z.Z,{p:C.cd,children:[(0,L.jsxs)(Z.Z,{mb:2,children:[(0,L.jsx)(m.Z,{children:"Trigger type"}),(0,L.jsx)(O.ZP,{muted:!0,children:"How would you like this pipeline to be triggered?"})]}),(0,L.jsx)(h.Z,{children:Ze(j).map((function(e){var n=e.label,t=e.description,r=e.uuid,i=ke===r,o=ke&&!i;return(0,L.jsx)(p.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){b.Xm.EVENT!==r||null!==M&&void 0!==M&&M.length||N([{}]),ae((function(e){return ye(ye({},e),{},{schedule_type:r})}))},children:(0,L.jsx)(xe.U,{selected:i,children:(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(ne.Z,{children:(0,L.jsx)("input",{checked:i,type:"radio"})}),(0,L.jsx)(Z.Z,{mr:C.cd}),(0,L.jsxs)(ne.Z,{alignItems:"flex-start",flexDirection:"column",children:[(0,L.jsx)(m.Z,{bold:!0,default:!i&&!o,level:5,muted:!i&&o,children:n()}),(0,L.jsx)(O.ZP,{default:!i&&!o,leftAligned:!0,muted:o,children:t()})]})]})})},r)}))})]}),(0,L.jsxs)(Z.Z,{mt:5,children:[b.Xm.TIME===ke&&Ye,b.Xm.EVENT===ke&&$e,b.Xm.API===ke&&en]})]})})},Oe=t(41788),Pe=t(70543);function we(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?we(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):we(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ke(e){var n=e.pipelineScheduleId,t=e.pipelineUUID,r=e.subpath,i=w.ZP.variables.pipelines.list(t).data,o=null===i||void 0===i?void 0:i.variables,l=w.ZP.pipeline_schedules.detail(n),c=l.data,s=l.mutate,u=null===c||void 0===c?void 0:c.pipeline_schedule,a=w.ZP.pipelines.detail(t,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,d=Se(Se({},null===a||void 0===a?void 0:a.pipeline),{},{uuid:t});return Pe.b7===r?(0,L.jsx)(_e,{fetchPipelineSchedule:s,pipeline:d,pipelineSchedule:u,variables:o}):(0,L.jsx)(B,{fetchPipelineSchedule:s,pipeline:d,pipelineSchedule:u,variables:o})}ke.getInitialProps=function(){var e=(0,o.Z)(s().mark((function e(n){var t,r,o,l,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.query,r=t.pipeline,o=t.slug,!Array.isArray(o)){e.next=4;break}return l=(0,i.Z)(o,2),c=l[0],u=l[1],e.abrupt("return",{pipelineScheduleId:c,pipelineUUID:r,subpath:u});case 4:return e.abrupt("return",{pipelineUUID:r});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Ie=(0,Oe.Z)(ke)},95488:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers/[...slug]",function(){return t(54183)}])}},function(e){e.O(0,[3850,5716,5896,4804,1774,5872,2524,4495,2344,4506,6166,8180,6214,6532,1286,4741,3688,9774,2888,179],(function(){return n=95488,e(e.s=n);var n}));var n=e.O();_N_E=n}]);