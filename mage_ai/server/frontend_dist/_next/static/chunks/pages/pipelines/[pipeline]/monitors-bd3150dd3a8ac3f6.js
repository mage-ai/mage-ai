(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7713],{87465:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});t(82684);var r=t(34376),i=t(87372),u=t(60547),o=t(86673),c=t(19711),l=t(2850),s=t(38626),a=t(23831),p=t(49125),d=s.default.div.withConfig({displayName:"indexstyle__LinkStyle",componentId:"sc-1in9sst-0"})(["padding:","px ","px;"," ",""],p.iI,p.tr,(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.interactive||a.Z.interactive).checked,";\n  ")}),(function(e){return!e.selected&&"\n    cursor: pointer;\n  "})),f=t(92953),v=t(59920),h=t(28598);var m=function(e){var n=e.breadcrumbs,t=e.children,s=e.errors,a=e.monitorType,m=e.pipeline,E=e.setErrors,b=e.subheader,O=(0,r.useRouter)();return(0,h.jsx)(u.Z,{before:(0,h.jsxs)(l.M,{children:[(0,h.jsx)(o.Z,{p:p.cd,children:(0,h.jsx)(i.Z,{level:4,muted:!0,children:"Insights"})}),(0,h.jsx)(d,{onClick:function(e){e.preventDefault(),O.push("/pipelines/[pipeline]/monitors","/pipelines/".concat(null===m||void 0===m?void 0:m.uuid,"/monitors"))},selected:f.a_.PIPELINE_RUNS==a,children:(0,h.jsx)(c.ZP,{children:"Pipeline runs"})}),(0,h.jsx)(d,{onClick:function(e){e.preventDefault(),O.push("/pipelines/[pipeline]/monitors/block-runs","/pipelines/".concat(null===m||void 0===m?void 0:m.uuid,"/monitors/block-runs"))},selected:f.a_.BLOCK_RUNS==a,children:(0,h.jsx)(c.ZP,{children:"Block runs"})}),(0,h.jsx)(d,{onClick:function(e){e.preventDefault(),O.push("/pipelines/[pipeline]/monitors/block-runtime","/pipelines/".concat(null===m||void 0===m?void 0:m.uuid,"/monitors/block-runtime"))},selected:f.a_.BLOCK_RUNTIME==a,children:(0,h.jsx)(c.ZP,{children:"Block runtime"})})]}),breadcrumbs:n,errors:s,pageName:v.M.MONITOR,pipeline:m,setErrors:E,subheader:b,uuid:"pipeline/monitor",children:t})}},2850:function(e,n,t){"use strict";t.d(n,{M:function(){return o},W:function(){return u}});var r=t(38626),i=t(3055),u=34*t(49125).iI,o=r.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},17150:function(e,n,t){"use strict";t.d(n,{i:function(){return d},p:function(){return s}});var r=t(82394),i=t(75582),u=t(3645),o=t(98781);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var s=function(e,n){if(!e)return[];var t=Object.entries(e).reduce((function(e,n){var t=(0,i.Z)(n,2),r=(t[0],t[1].data),u={};return Object.entries(r).forEach((function(n){var t=(0,i.Z)(n,2),r=t[0],o=t[1],c={};r in e&&(c=e[r]);var s={};Object.entries(o).forEach((function(e){var n,t=(0,i.Z)(e,2),r=t[0],u=t[1],o=null!==(n=c)&&void 0!==n&&n[r]?c[r]:0;s[r]=o+u})),u[r]=l(l({},c),s)})),l(l({},e),u)}),{});return n.map((function(e){return l({date:e},t[e]||{})}))},a=u.E.reduce((function(e,n){return l(l({},e),{},(0,r.Z)({},n,0))}),{}),p=new Set(u.E),d=function(e,n){var t;if(!e)return{groupedPipelineRunData:[],pipelineRunCountByPipelineType:{},totalPipelineRunCount:0,ungroupedPipelineRunData:[]};var u=(t={},(0,r.Z)(t,o.qL.INTEGRATION,l({},a)),(0,r.Z)(t,o.qL.PYSPARK,{}),(0,r.Z)(t,o.qL.PYTHON,l({},a)),(0,r.Z)(t,o.qL.STREAMING,l({},a)),t),c=0,s=Object.entries(e).reduce((function(e,n){var t=(0,i.Z)(n,2),r=(t[0],t[1].data),o={},s={};return Object.entries(r).forEach((function(n){var t=(0,i.Z)(n,2),r=t[0],a=t[1],d={},f={};r in e.grouped?(d=l({},e.grouped[r]),o[r]=l({},d)):o[r]={},r in e.ungrouped&&(f=l({},e.ungrouped[r]));var v={},h={};Object.entries(a).forEach((function(n){var t=(0,i.Z)(n,2),a=t[0],m=t[1];"null"===a||null===a||(r in e.grouped&&a in e.grouped[r]&&(d[a]=l({},e.grouped[r][a])),v[a]={},Object.entries(m).forEach((function(e){var n,t,r,o=(0,i.Z)(e,2),l=o[0],s=o[1],m=null!==(n=d)&&void 0!==n&&null!==(t=n[a])&&void 0!==t&&t[l]?d[a][l]:0;v[a][l]=m+s;var E=null!==(r=f)&&void 0!==r&&r[l]?f[l]:0;h[l]=E+s,p.has(l)&&(u[a][l]=(u[a][l]||0)+s),c+=s})),o[r][a]=l(l({},d[a]),v[a]),s[r]=l(l({},f),h))}))})),{grouped:l(l({},e.grouped),o),ungrouped:l(l({},e.ungrouped),s)}}),{grouped:{},ungrouped:{}}),d=[],f=[];return n.forEach((function(e){d.push(l({date:e},s.grouped[e]||{})),f.push(l({date:e},s.ungrouped[e]||{}))})),{groupedPipelineRunData:d,pipelineRunCountByPipelineType:u,totalPipelineRunCount:c,ungroupedPipelineRunData:f}}},66050:function(e,n,t){"use strict";var r;t.d(n,{V:function(){return r}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running",e.UPSTREAM_FAILED="upstream_failed",e.CONDITION_FAILED="condition_failed"}(r||(r={}))},3645:function(e,n,t){"use strict";t.d(n,{E:function(){return u},h:function(){return r}});t(98781);var r,i=t(66050);!function(e){e.BLOCK_RUN_COUNT="block_run_count",e.BLOCK_RUN_TIME="block_run_time",e.PIPELINE_RUN_COUNT="pipeline_run_count",e.PIPELINE_RUN_TIME="pipeline_run_time"}(r||(r={}));var u=[i.V.RUNNING,i.V.COMPLETED,i.V.FAILED]},93348:function(e,n,t){"use strict";t.d(n,{TR:function(){return p},U5:function(){return l},Xm:function(){return u},Z4:function(){return a},fq:function(){return c},kJ:function(){return s}});var r,i,u,o=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var c,l,s,a=(r={},(0,o.Z)(r,u.API,(function(){return"API"})),(0,o.Z)(r,u.EVENT,(function(){return"event"})),(0,o.Z)(r,u.TIME,(function(){return"schedule"})),r);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(c||(c={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(l||(l={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var p=(i={},(0,o.Z)(i,s.CREATED_AT,"Created at"),(0,o.Z)(i,s.NAME,"Name"),(0,o.Z)(i,s.PIPELINE,"Pipeline"),(0,o.Z)(i,s.STATUS,"Status"),(0,o.Z)(i,s.TYPE,"Type"),i)},67400:function(e,n,t){"use strict";t.r(n);var r=t(77837),i=t(75582),u=t(82394),o=t(38860),c=t.n(o),l=t(82684),s=t(12691),a=t.n(s),p=t(92083),d=t.n(p),f=t(38626),v=t(21679),h=t(67971),m=t(87372),E=t(10919),b=t(87465),O=t(41788),g=t(86673),_=t(19711),j=t(82531),P=t(92953),Z=t(10503),N=t(93348),I=t(49125),y=t(90211),x=t(17150),T=t(42305),C=t(28598);function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=f.default.div.withConfig({displayName:"monitors__GradientTextStyle",componentId:"sc-1is2m2l-0"})(["background:linear-gradient(90deg,#7D55EC 28.12%,#2AB2FE 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent;"]);function M(e){var n=e.pipeline.uuid,t=(0,l.useState)(null),r=t[0],o=t[1],c=j.ZP.pipeline_schedules.pipelines.list(n).data,s=(0,l.useMemo)((function(){return null===c||void 0===c?void 0:c.pipeline_schedules}),[c]),p=(0,l.useMemo)((function(){return null===s||void 0===s?void 0:s.reduce((function(e,n){return L(L({},e),{},(0,u.Z)({},null===n||void 0===n?void 0:n.id,n))}),{})}),[s]),f=j.ZP.pipelines.detail(n,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,O=(0,l.useMemo)((function(){return L(L({},null===f||void 0===f?void 0:f.pipeline),{},{uuid:n})}),[f,n]),D=j.ZP.monitor_stats.detail("pipeline_run_count",{pipeline_uuid:null===O||void 0===O?void 0:O.uuid}).data,M=((null===D||void 0===D?void 0:D.monitor_stat)||{}).stats,R=(0,l.useMemo)((function(){return(0,T.Y_)()}),[]),w=(0,l.useMemo)((function(){return(0,x.p)(M,R)}),[R,M]),A=(0,l.useMemo)((function(){if(M)return Object.entries(M).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],o=t[1].data,c=R.map((function(e){return L({date:e},o[e]||{})}));return L(L({},e),{},(0,u.Z)({},r,c))}),{})}),[R,M]),S=(0,l.useMemo)((function(){var e=[];return e.push({bold:!0,label:function(){return"Monitors"}}),e}),[]);return(0,C.jsx)(b.Z,{breadcrumbs:S,errors:r,monitorType:P.a_.PIPELINE_RUNS,pipeline:O,setErrors:o,children:(0,C.jsxs)(g.Z,{mt:2,mx:2,children:[(0,C.jsx)(g.Z,{ml:1,children:(0,C.jsx)(k,{children:(0,C.jsx)(m.Z,{children:"All pipeline runs"})})}),(0,C.jsx)(g.Z,{mt:1,children:(0,C.jsx)(v.Z,{colors:P.NU,data:w,getXValue:function(e){return e.date},height:200,keys:P.hu,margin:{bottom:30,left:35,right:0,top:10},tooltipLeftOffset:P.CD,xLabelFormat:function(e){return d()(e).format("MMM DD")}})}),A&&Object.entries(A).map((function(e){var t,r=(0,i.Z)(e,2),u=r[0],o=r[1],c=null===p||void 0===p?void 0:p[u];return(0,C.jsxs)(g.Z,{mt:3,children:[(0,C.jsxs)(h.Z,{alignItems:"center",children:[(0,C.jsx)(g.Z,{mx:1,children:(0,C.jsx)(k,{children:(0,C.jsx)(_.ZP,{bold:!0,large:!0,children:(0,y.kC)(null===(t=N.Z4[null===c||void 0===c?void 0:c.schedule_type])||void 0===t?void 0:t.call(N.Z4))})})}),(0,C.jsx)(a(),{as:"/pipelines/".concat(n,"/triggers/").concat(null===c||void 0===c?void 0:c.id),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,C.jsx)(E.Z,{children:(0,C.jsxs)(h.Z,{alignItems:"center",children:[(0,C.jsx)(m.Z,{level:5,children:(null===c||void 0===c?void 0:c.name)||u}),(0,C.jsx)(g.Z,{ml:1}),(0,C.jsx)(Z._Q,{default:!0,size:2*I.iI})]})})})]}),(0,C.jsx)(g.Z,{mt:1,children:(0,C.jsx)(v.Z,{colors:P.NU,data:o,getXValue:function(e){return e.date},height:200,keys:P.hu,margin:{bottom:30,left:35,right:0,top:10},tooltipLeftOffset:P.CD,xLabelFormat:function(e){return d()(e).format("MMM DD")}})})]},u)}))]})})}M.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.default=(0,O.Z)(M)},89677:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/monitors",function(){return t(67400)}])}},function(e){e.O(0,[844,7607,5896,2714,1424,1005,547,3431,9774,2888,179],(function(){return n=89677,e(e.s=n);var n}));var n=e.O();_N_E=n}]);