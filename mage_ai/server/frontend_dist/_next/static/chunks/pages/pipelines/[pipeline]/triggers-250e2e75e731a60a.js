(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{58122:function(e,n,r){"use strict";r.d(n,{CL:function(){return f},FS:function(){return g},JZ:function(){return v},e7:function(){return b},v0:function(){return p},wx:function(){return h}});var i=r(12757),t=r(82394),u=r(43313),c=r(93348),l=r(32151),o=r(5679),s=r(84779);function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e){var n=e.statistics,r=Object.keys(n),i=Array(u.Dy.length).fill(0);return 0===r.length?null:(r.forEach((function(e){if(u.Dy.includes(e)){var r=u.CC[e],t=n[e],c=t,l=!1,o=[2,3],a=u.Ub[e],d=u.oH[e],p=u.OD[e];if(u.y_.includes(e))l=!0,o=[2,1,2];else if(e in u.Sq){t=(0,s.Jw)(t,0);var f=u.Sq[e];c=n[f]}var g={columnFlexNumbers:o,name:r,progress:l,rate:c,successDirection:d,warning:p};u.y_.includes(e)||(g.value=t),i[a]=g}})),i)}function f(e){var n=e.columnTypes,r=void 0===n?{}:n,i=e.statistics,t=Object.keys(i);if(0===t.length)return null;var c=Object.values(r),s=c.length,a=[];a.push({name:"Column count",successDirection:u.oH.column_count,value:(0,o.x6)(s)}),t.forEach((function(e){if(u.Zu.includes(e)){var n=u.CC[e],r=i[e],t=u.OD[e];a.push({name:n,successDirection:u.oH[e],value:(0,o.x6)(r),warning:t})}}));var d=(0,l.QO)(c),p=d.countCategory,f=d.countDatetime,g=d.countNumerical;return a.push({name:"Categorical Features",rate:p/s,value:(0,o.x6)(p)},{name:"Numerical Features",rate:g/s,value:(0,o.x6)(g)},{name:"Datetime Features",rate:f/s,value:(0,o.x6)(f)}),a}function g(e){return"string"===typeof e?e:JSON.stringify(e)}function h(e,n){var r,i;return null===e||void 0===e||null===(r=e.find((function(e){var r=e.block;return n(r)})))||void 0===r||null===(i=r.variables)||void 0===i?void 0:i.map((function(e){var n=e.value;return d(d({},e),{},{value:g(n)})}))}function v(e,n){return n===c.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===c.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function b(e){return e?Object.entries(e).reduce((function(e,n){var r=(0,i.Z)(n,2),u=r[0],c=r[1],l=c;try{l=JSON.parse(c)}catch(o){}return d(d({},e),{},(0,t.Z)({},u,l))}),{}):e}},93348:function(e,n,r){"use strict";r.d(n,{U5:function(){return l},Xm:function(){return t},Z4:function(){return o},fq:function(){return c}});var i,t,u=r(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(t||(t={}));var c,l,o=(i={},(0,u.Z)(i,t.API,(function(){return"API"})),(0,u.Z)(i,t.EVENT,(function(){return"event"})),(0,u.Z)(i,t.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(c||(c={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(l||(l={}))},1410:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Q}});var i=r(77837),t=r(82394),u=r(12757),c=r(38860),l=r.n(c),o=r(12691),s=r.n(o),a=r(82684),d=r(83455),p=r(34376),f=r(60328),g=r(47999),h=r(86532),v=r(34744),b=r(67971),m=r(87372),j=r(31866),x=r(10919),y=r(38965),O=r(93348),Z=r(62609),_=r(86673),P=r(19711),w=r(46313),C=r(23831),k=r(73942),E=r(49125),I=r(37391),T=w.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],C.Z.borders.medium,E.tr),D=w.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],I.w5),S=w.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],C.Z.background.output,k.n_,E.iI,E.tr),N=r(73899),A=r(58122),q=r(28598);var V=function(e){var n=e.hasOverride,r=e.scheduleType,i=e.variables,t=[];return Object.entries(i).forEach((function(e){var n=(0,u.Z)(e,2),r=n[0],i=n[1];t.push({uuid:r,value:(0,A.FS)(i)})})),(0,A.JZ)(t,r),(0,q.jsxs)(T,{children:[(0,q.jsx)(_.Z,{mb:2,children:(0,q.jsxs)(P.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,q.jsx)(D,{noScrollbarTrackBackground:!0,children:i&&t.map((function(e){var n=e.uuid,r=e.value;return(0,q.jsxs)(S,{children:[(0,q.jsx)(P.ZP,{monospace:!0,small:!0,children:n}),(0,q.jsx)(P.ZP,{color:N.Or,monospace:!0,small:!0,children:(0,A.FS)(r)})]})}))})]})},F=r(17903),B=r(41374),R=r(10503),H=r(59920),M=r(7715),z=r(96510),L=r(66653),J=r(5679),U=r(24141);function X(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function Y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?X(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function G(e){var n=e.pipeline,r=(0,p.useRouter)(),i=n.uuid,c=(0,a.useState)(null),l=c[0],o=c[1],w=(0,U.i)().height,C=B.ZP.variables.pipelines.list(i).data,k=null===C||void 0===C?void 0:C.variables,I=B.ZP.pipeline_schedules.pipelines.list(i),T=I.data,D=I.mutate,S=(0,a.useMemo)((function(){return(null===T||void 0===T?void 0:T.pipeline_schedules)||[]}),[T]),N=(0,d.Db)(B.ZP.pipeline_schedules.pipelines.useCreate(i),{onSuccess:function(e){return(0,z.wD)(e,{callback:function(e){var i=e.pipeline_schedule.id;return r.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(i,"/edit"))},onErrorCallback:function(e){var n=e.error,r=n.errors,i=n.message;console.log(r,i)}})}}),X=(0,u.Z)(N,2),G=X[0],Q=X[1].isLoading,K=(0,d.Db)((function(e){return B.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,z.wD)(e,{callback:function(){D()},onErrorCallback:function(e){var n=e.error,r=n.errors,i=n.message;console.log(r,i)}})}}),W=(0,u.Z)(K,1)[0],$=(0,d.Db)((function(e){return B.ZP.pipeline_schedules.useDelete(e)()}),{onSuccess:function(e){return(0,z.wD)(e,{callback:function(){D(),r.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(i,"/triggers"))}})}}),ee=(0,u.Z)($,1)[0],ne=(0,a.useState)(),re=ne[0],ie=ne[1],te=(0,a.useMemo)((function(){var e,n=null===(e=(0,A.wx)(k,(function(e){return"global"===e.uuid})))||void 0===e?void 0:e.reduce((function(e,n){var r=n.uuid,i=n.value;return Y(Y({},e),{},(0,t.Z)({},r,i))}),{}),r=null===re||void 0===re?void 0:re.variables,u=!(0,M.Qr)(r),c=u?null===re||void 0===re?void 0:re.variables:(0,M.Qr)(n)?null:n;return function(e){var n=e.height-(c?151:0);return(0,q.jsxs)(q.Fragment,{children:[c&&(0,q.jsx)(V,{hasOverride:u,scheduleType:null===re||void 0===re?void 0:re.schedule_type,variables:c}),!c&&(0,q.jsxs)(_.Z,{p:E.cd,children:[(0,q.jsx)(P.ZP,{children:"This pipeline has no runtime variables."}),(0,q.jsxs)(_.Z,{mt:1,children:[(0,q.jsx)(s(),{as:"/pipelines/".concat(i,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,q.jsx)(x.Z,{children:"Click here"})})," ",(0,q.jsx)(P.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,q.jsx)(h.Z,Y(Y({},e),{},{height:n,noStatus:!0}))]})}}),[k,re]);return(0,q.jsxs)(y.Z,{breadcrumbs:[{label:function(){return"Triggers"}}],buildSidekick:te,pageName:H.M.TRIGGERS,pipeline:n,subheaderBackgroundImage:"/images/banner-shape-purple-peach.jpg",subheaderButton:(0,q.jsx)(j.ZP,{beforeElement:(0,q.jsx)(R.mm,{size:2.5*E.iI}),blackBorder:!0,inline:!0,loading:Q,noHoverUnderline:!0,onClick:function(){return G({pipeline_schedule:{name:(0,J.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/add_new_schedule",children:"Create"}),subheaderText:(0,q.jsx)(P.ZP,{bold:!0,large:!0,children:"Set up a new trigger for this pipeline."}),title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(H.M.TRIGGERS,"_").concat(i),children:[(0,q.jsx)(_.Z,{mt:E.cd,px:E.cd,children:(0,q.jsx)(m.Z,{level:5,children:"Pipeline triggers"})}),(0,q.jsx)(v.Z,{light:!0,mt:E.cd,short:!0}),(0,q.jsx)(F.Z,{columnFlex:[null,1,1,3,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:"Status"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Logs"},{label:function(){return""},uuid:"edit/delete"}],isSelectedRow:function(e){return S[e].id===(null===re||void 0===re?void 0:re.id)},onClickRow:function(e){return ie(S[e])},rows:S.map((function(e){var n,t=e.id,u=e.pipeline_runs_count,c=e.name,a=e.schedule_interval,d=e.status;return[(0,q.jsx)(f.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,L.j)(n),W({id:e.id,status:O.fq.ACTIVE===d?O.fq.INACTIVE:O.fq.ACTIVE})},children:O.fq.ACTIVE===d?(0,q.jsx)(R.dz,{muted:!0,size:2*E.iI}):(0,q.jsx)(R.Py,{default:!0,size:2*E.iI})},"toggle_trigger"),(0,q.jsx)(P.ZP,{default:O.fq.INACTIVE===d,monospace:!0,success:O.fq.ACTIVE===d,children:d},"trigger_status"),(0,q.jsx)(P.ZP,{default:!0,monospace:!0,children:null===(n=O.Z4[e.schedule_type])||void 0===n?void 0:n.call(O.Z4)},"trigger_type"),(0,q.jsx)(s(),{as:"/pipelines/".concat(i,"/triggers/").concat(t),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,q.jsx)(x.Z,{bold:!0,onClick:function(e){(0,L.j)(e),r.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(i,"/triggers/").concat(t))},sameColorAsText:!0,children:c})},"trigger_name"),(0,q.jsx)(P.ZP,{default:!0,monospace:!0,children:a},"trigger_frequency"),(0,q.jsx)(P.ZP,{default:!0,monospace:!0,children:u},"trigger_run_count"),(0,q.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return r.push("/pipelines/".concat(i,"/logs?pipeline_schedule_id[]=").concat(t))},children:(0,q.jsx)(R.B4,{default:!0,size:2*E.iI})},"logs_button"),(0,q.jsxs)(b.Z,{children:[(0,q.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return r.push("/pipelines/".concat(i,"/triggers/").concat(t,"/edit"))},title:"Edit",children:(0,q.jsx)(R.I8,{default:!0,size:2*E.iI})}),(0,q.jsx)(_.Z,{mr:1}),(0,q.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return o(t)},title:"Delete",children:(0,q.jsx)(R.rF,{default:!0,size:2*E.iI})}),(0,q.jsx)(g.Z,{onClickOutside:function(){return o(null)},open:l===t,children:(0,q.jsx)(Z.Z,{danger:!0,onCancel:function(){return o(null)},onClick:function(){return ee(t)},right:2*E.iI,title:"Are you sure you want to delete the trigger ".concat(c,"?"),top:w/2-16*E.iI,width:40*E.iI})})]},"edit_delete_buttons")]})),uuid:"pipeline-triggers"})]})}G.getInitialProps=function(){var e=(0,i.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:r}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Q=G},40183:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return r(1410)}])}},function(e){e.O(0,[4259,2212,7689,6674,1774,4804,3668,1374,5763,7369,1404,8965,2151,5703,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);