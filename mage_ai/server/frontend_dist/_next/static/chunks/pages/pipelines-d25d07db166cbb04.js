(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var u;i.d(n,{b:function(){return u}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(u||(u={}))},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Me}});var u=i(77837),t=i(75582),l=i(21831),r=i(82394),o=i(38860),c=i.n(o),s=i(12691),a=i.n(s),d=i(82684),p=i(83455),f=i(34376),v=i(52749),h=i(60523),m=i(71180),b=i(90299),g=i(31882),C=i(76111),_=i(94629),Z=i(97618),j=i(55485),x=i(68562),P=i(65956),T=i(38276),k=i(30160),I=i(35576),y=i(17488),S=i(28598);var w=function(e){var n=e.description,i=e.isLoading,u=e.maxWidth,t=e.minWidth,l=e.noEmptyValue,r=e.onClose,o=e.onSave,c=e.textArea,s=e.title,a=e.value,p=(0,d.useRef)(null),f=(0,d.useState)(a),v=f[0],h=f[1],b=c?I.Z:y.Z;return(0,d.useEffect)((function(){var e;null==p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,S.jsxs)(P.Z,{maxWidth:u,minWidth:t,children:[(0,S.jsx)(k.ZP,{bold:!0,children:s}),(0,S.jsx)(T.Z,{mt:1,children:(0,S.jsx)(b,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,S.jsx)(T.Z,{mt:2,children:(0,S.jsx)(k.ZP,{muted:!0,small:!0,children:n})}),(0,S.jsx)(T.Z,{mt:3,children:(0,S.jsxs)(j.ZP,{children:[(0,S.jsx)(x.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===a||l&&!v?r():o(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,S.jsx)(T.Z,{ml:1}),(0,S.jsx)(m.ZP,{onClick:r,children:"Cancel"})]})})]})},O=i(48670),E=i(55072),A=i(57653),D=i(55729),M=i(93808),R=i(82359),G=i(44085),$=i(4190),U=i(75499),L=i(48381),B=i(85544),N=i(70026),H=i(35686),F=i(44897),Y=i(77417),Q=i(42631),z=i(44425),V=i(72473),q=i(23780),K=i(8666),W=i(46684),X=i(53808),J="pipeline_list_filters",ee="pipeline_list_group_bys",ne="pipeline_list_sort_column_index",ie="pipeline_list_sort_direction",ue="pipeline_list_selected_tab_uuid";function te(e){return(0,X.t8)(J,e),e}function le(e){return(0,X.t8)(ee,e),e}var re=i(11498),oe=i(32929),ce=i(44898),se=i(70515),ae=i(30229),de=i(81655),pe=i(31608),fe=i(81728),ve=i(3917),he=i(72619),me=i(69419),be=i(65458),ge=i(15610),Ce=i(42122),_e=i(95924),Ze=i(86735),je=i(70320),xe=i(89538),Pe=i(44952),Te=i(43613);function ke(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);n&&(u=u.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,u)}return i}function Ie(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ke(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ke(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var ye={Icon:V.Schedule,label:function(){return"Recently viewed"},uuid:"recent"},Se={Icon:V.PipelineV3,label:function(e){return null!=e&&e.count?"All pipelines › ".concat((null==e?void 0:e.count)||0):"All pipelines"},uuid:"all"},we=[Se,ye],Oe="tab",Ee=[A.$1.SEARCH],Ae={borderRadius:"".concat(Q.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function De(){var e,n=(0,f.useRouter)(),i=(0,d.useRef)(null),u=(0,d.useRef)(null),o=(0,d.useRef)(null),c=(0,d.useRef)(null),s=(0,Y.Z)(),x=s.fetchProjects,P=s.project,I=(0,d.useState)(null),y=I[0],M=I[1],Q=(0,d.useState)(null),ke=Q[0],De=Q[1],Me=(0,d.useState)(null),Re=Me[0],Ge=Me[1],$e=(0,d.useCallback)((function(e){Ge(e),clearTimeout(c.current),c.current=setTimeout((function(){var n;return(0,ge.u)((n={},(0,r.Z)(n,re.$D.OFFSET,0),(0,r.Z)(n,A.$1.SEARCH,e),n))}),500)}),[Ge]),Ue=(0,d.useState)({}),Le=Ue[0],Be=Ue[1],Ne=(0,d.useState)(null),He=Ne[0],Fe=Ne[1],Ye=(0,me.iV)(),Qe=Ie({},(0,me.DQ)(Ye,[A.$1.SEARCH,A.$1.STATUS,A.$1.TAG,A.$1.TYPE].concat((0,l.Z)(re.RG)))),ze=(0,d.useMemo)((function(){return null==Ye?void 0:Ye[Oe]}),[Ye]);(0,d.useEffect)((function(){var e;M(null==i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Ye,i]);var Ve=(0,d.useMemo)((function(){var e;return(0,je.hY)(null==P||null===(e=P.features)||void 0===e?void 0:e[R.d.LOCAL_TIMEZONE])}),[null==P?void 0:P.features]),qe=(0,d.useMemo)((function(){var e;return null==P||null===(e=P.features)||void 0===e?void 0:e[R.d.OPERATION_HISTORY]}),[P]),Ke=(0,d.useMemo)((function(){return Ve?de.O$:{}}),[Ve]),We=H.ZP.pipelines.list(Ie(Ie({},Qe),{},{include_schedules:1}),{revalidateOnFocus:!1}),Xe=We.data,Je=We.mutate,en=(0,d.useMemo)((function(){return(null==Ye?void 0:Ye[A.$1.HISTORY_DAYS])||7}),[Ye]),nn=H.ZP.pipelines.list(Ie(Ie({},Qe),{},(e={},(0,r.Z)(e,A.$1.HISTORY_DAYS,(0,fe.HW)(en)?Number(en):en),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!qe||!ze||ye.uuid!==ze}),un=nn.data,tn=nn.mutate,ln=(0,d.useCallback)((function(e){return e}),[]),rn=(0,d.useMemo)((function(){var e=ln((null==Xe?void 0:Xe.pipelines)||[]);if(null!=Ye&&Ye[A.$1.TAG]){var n=Ye[A.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(A.$1.NO_TAGS)}))}return e}),[Xe,ln,Ye]),on=(0,d.useMemo)((function(){return ln((null==un?void 0:un.pipelines)||[])}),[un,ln]),cn=(0,d.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),sn=null==Ye?void 0:Ye[de.lG.SORT_COL_IDX],an=null==Ye?void 0:Ye[de.lG.SORT_DIRECTION],dn=(0,d.useMemo)((function(){return sn?{columnIndex:+sn,sortDirection:an||de.sh.ASC}:void 0}),[sn,an]),pn=null==Ye?void 0:Ye[A.$1.GROUP],fn=(0,p.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,u=void 0!==i&&i;return H.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:u}})}),{onSuccess:function(e){return(0,he.wD)(e,{callback:function(){var n=e.data.download.token;(0,Pe.K)(n)},onErrorCallback:function(e,n){return Fe({errors:n,response:e})}})}}),vn=(0,t.Z)(fn,1)[0];(0,d.useEffect)((function(){null!=Qe&&Qe[A.$1.SEARCH]&&null===Re&&Ge(null==Qe?void 0:Qe[A.$1.SEARCH])}),[Qe,Re,Ge]),(0,d.useEffect)((function(){var e,n={};if(!sn){var i=(0,X.U2)(ne,null),u=(0,X.U2)(ie,de.sh.ASC);null!==i&&(n[de.lG.SORT_COL_IDX]=i,n[de.lG.SORT_DIRECTION]=u)}qe&&(ze?(0,X.t8)(ue,ze):n[Oe]=(0,X.U2)(ue,null==we||null===(e=we[0])||void 0===e?void 0:e.uuid));if(pn)le((0,r.Z)({},pn,!0));else{var l,o=(0,X.U2)(ee,{});o&&Object.entries(o).forEach((function(e){var n=(0,t.Z)(e,2),i=n[0],u=n[1];!l&&u&&(l=i)})),l&&(n[A.$1.GROUP]=l)}if((0,Ce.Qr)(Qe)){var c=(0,r.Z)({},re.$D.LIMIT,E.Q),s=(0,X.U2)(J,{});s&&Object.entries(s).forEach((function(e){var n=(0,t.Z)(e,2),i=n[0],u=n[1];null!=u&&(re.RG.includes(i)||Ee.includes(i)?c[i]=u:(c[i]=[],Object.entries(u).forEach((function(e){var n=(0,t.Z)(e,2),u=n[0];n[1]&&c[i].push(u)}))))})),(0,Ce.Qr)(c)||(n={},Object.entries(Ie(Ie({},n),c)||{}).forEach((function(e){var i=(0,t.Z)(e,2),u=i[0],l=i[1];null!=l&&(n[u]=l)})))}else{var a={};Object.entries(Qe).forEach((function(e){var n=(0,t.Z)(e,2),i=n[0],u=n[1];a[i]={};var l,r=u;null!=u&&(re.RG.includes(i)||Ee.includes(i)?a[i]=r:(Array.isArray(r)||(r=[r]),r&&Array.isArray(r)&&(null===(l=r)||void 0===l||l.forEach((function(e){a[i][e]=!0})))))})),te((0,Ce.hB)(a))}(0,Ce.Qr)(n)||(0,ge.u)((0,Ce.hB)(n),{pushHistory:!1})}),[pn,qe,Qe,ze,cn,sn,an]),(0,d.useEffect)((function(){(0,he.bB)(Xe,Fe)}),[Xe]);var hn=function(e){return(0,p.Db)(H.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,he.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null==e||e(i)},onErrorCallback:function(e,n){return Fe({errors:n,response:e})}})}})},mn=hn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),bn=(0,t.Z)(mn,2),gn=bn[0],Cn=bn[1].isLoading,_n=hn((function(){null==Je||Je(),null==tn||tn()})),Zn=(0,t.Z)(_n,2),jn=Zn[0],xn=Zn[1].isLoading,Pn=(0,p.Db)((function(e){return H.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,he.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},n,!1))})),Je(),null==tn||tn(),null==Un||Un(),De(null)},onErrorCallback:function(e,n){var i,u=null==e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},u,!1))})),Fe({errors:n,response:e})}})}}),Tn=(0,t.Z)(Pn,2),kn=Tn[0],In=Tn[1].isLoading,yn=(0,p.Db)((function(e){return H.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,he.wD)(e,{callback:function(){null==Je||Je(),null==tn||tn()},onErrorCallback:function(e,n){return Fe({errors:n,response:e})}})}}),Sn=(0,t.Z)(yn,2),wn=Sn[0],On=Sn[1].isLoading,En=(0,xe.dd)((function(e){var n=e.pipelineType;return(0,S.jsx)(C.Z,{onClose:Mn,onSave:function(e){var i=e.name,u=e.description,t=e.tags;gn({pipeline:{description:u,name:i,tags:t,type:n}})},pipelineType:n})}),{},[gn],{background:!0,disableEscape:!0,uuid:"overview/create_pipeline"}),An=(0,t.Z)(En,2),Dn=An[0],Mn=An[1],Rn=(0,xe.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,u=e.pipelineName;return(0,S.jsx)(w,{isLoading:In,minWidth:55*se.iI,noEmptyValue:!!u,onClose:Un,onSave:function(e){var i=n||ke;if(i){var t=i.uuid,l={uuid:t};u?l.name=e:l.description=e,Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},t,!0))})),kn(l)}},textArea:!u,title:u?"Rename pipeline":"Edit description for ".concat(null==n?void 0:n.uuid),value:u||i})}),{},[In,ke],{background:!0,uuid:"rename_pipeline_and_save"}),Gn=(0,t.Z)(Rn,2),$n=Gn[0],Un=Gn[1],Ln=(0,xe.dd)((function(){return(0,S.jsx)(N.Z,{fetchPipelines:Je,onCancel:Hn})}),{},[Je],{background:!0,uuid:"upload_pipeline"}),Bn=(0,t.Z)(Ln,2),Nn=Bn[0],Hn=Bn[1],Fn=(0,xe.dd)((function(){return(0,S.jsx)(q.BC,{children:(0,S.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){gn({pipeline:{custom_template_uuid:null==e?void 0:e.template_uuid,name:(0,fe.Y6)()}}).then((function(){zn()}))},showBreadcrumbs:!0,tabs:[oe.A2]})})}),{},[gn],{background:!0,uuid:"browse_templates"}),Yn=(0,t.Z)(Fn,2),Qn=Yn[0],zn=Yn[1],Vn=(0,xe.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),u=e.onSaveSuccess;return(0,S.jsx)(q.BC,{children:(0,S.jsx)(D.Z,{cancelButtonText:n,contained:!0,header:(0,S.jsx)(Te.Z,{}),onCancel:function(){null==i||i(),Wn()},onSaveSuccess:function(e){x(),Wn(),null==u||u(e)}})})}),{},[x],{background:!0,uuid:"configure_project"}),qn=(0,t.Z)(Vn,2),Kn=qn[0],Wn=qn[1],Xn=(0,xe.dd)((function(){return(0,S.jsx)(q.BC,{children:(0,S.jsx)(v.Z,{createPipeline:gn,isLoading:Cn,onClose:ni})})}),{},[gn,Cn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),Jn=(0,t.Z)(Xn,2),ei=Jn[0],ni=Jn[1],ii=(0,d.useMemo)((function(){return(0,be.d)(gn,{showAIModal:function(){null!=P&&P.openai_api_key?ei():Kn({onSaveSuccess:function(){ei()}})},showBrowseTemplates:Qn,showCreatePipelineModal:Dn,showImportPipelineModal:Nn})}),[gn,P,ei,Qn,Kn,Dn,Nn]),ui=H.ZP.tags.list().data,ti=(0,d.useMemo)((function(){return(0,Ze.YC)((null==ui?void 0:ui.tags)||[],(function(e){return e.uuid}))}),[ui]),li=(0,d.useMemo)((function(){return(0,S.jsx)(B.Z,{addButtonProps:{isLoading:Cn,label:"New",menuItems:ii},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:On,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null==ke?void 0:ke.uuid,"?"))&&wn(null==ke?void 0:ke.uuid)}},extraActionButtonProps:{Icon:V.Clone,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null==ke?void 0:ke.uuid,"?"),isLoading:xn,onClick:function(){return jn({pipeline:{clone_pipeline_uuid:null==ke?void 0:ke.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:A.kA,tag:[A.$1.NO_TAGS].concat((0,l.Z)(ti.map((function(e){return e.uuid})))),type:Object.values(A.qL)},filterValueLabelMapping:{status:A.kA.reduce((function(e,n){return Ie(Ie({},e),{},(0,r.Z)({},n,(0,fe.J3)((0,fe.kC)(n))))}),{}),tag:Ie((0,r.Z)({},A.$1.NO_TAGS,"No tags"),ti.reduce((function(e,n){var i=n.uuid;return Ie(Ie({},e),{},(0,r.Z)({},i,i))}),{})),type:A.G7},groupButtonProps:{groupByLabel:pn,menuItems:[{beforeIcon:pn===A.r0.STATUS?(0,S.jsx)(V.Check,{fill:F.Z.content.default,size:1.5*se.iI}):(0,S.jsx)(V.Circle,{muted:!0,size:1.5*se.iI}),label:function(){return(0,fe.kC)(A.r0.STATUS)},onClick:function(){var e=pn===A.r0.STATUS?null:A.r0.STATUS;e||le({}),(0,ge.u)((0,r.Z)({},A.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:pn===A.r0.TAG?(0,S.jsx)(V.Check,{fill:F.Z.content.default,size:1.5*se.iI}):(0,S.jsx)(V.Circle,{muted:!0,size:1.5*se.iI}),label:function(){return(0,fe.kC)(A.r0.TAG)},onClick:function(){var e=pn===A.r0.TAG?null:A.r0.TAG;e||le({}),(0,ge.u)((0,r.Z)({},A.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:pn===A.r0.TYPE?(0,S.jsx)(V.Check,{fill:F.Z.content.default,size:1.5*se.iI}):(0,S.jsx)(V.Circle,{muted:!0,size:1.5*se.iI}),label:function(){return(0,fe.kC)(A.r0.TYPE)},onClick:function(){var e=pn===A.r0.TYPE?null:A.r0.TYPE;e||le({}),(0,ge.u)((0,r.Z)({},A.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return $n({pipelineName:null==ke?void 0:ke.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return $n({pipeline:ke,pipelineDescription:null==ke?void 0:ke.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){te({}),Ge(""),null==Je||Je().then((function(){var e;(0,ge.u)((e={},(0,r.Z)(e,re.$D.LIMIT,(null==Qe?void 0:Qe[re.$D.LIMIT])||E.Q),(0,r.Z)(e,A.$1.SEARCH,""),e),{replaceParams:!0})}))},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!=e&&e.length)}))&&te({})},query:Qe,resetLimitOnFilterApply:!0,searchProps:{onChange:$e,value:Re},selectedRowId:null==ke?void 0:ke.uuid,setSelectedRow:De})}),[jn,wn,Je,pn,xn,Cn,On,ii,Qe,Re,ke,$e,$n,ti]),ri=(0,d.useCallback)((function(e){var n={};null==e||e.forEach((function(e,i){var u=null==e?void 0:e[pn];if(A.r0.STATUS===pn){var t=(e||{}).schedules,l=void 0===t?[]:t,r=l.length;u=l.find((function(e){var n=e.status;return ae.fq.ACTIVE===n}))?A.QK.ACTIVE:r>=1?A.QK.INACTIVE:A.QK.NO_SCHEDULES}else if(A.r0.TAG===pn){u=(null==e?void 0:e.tags)?(0,Ze.YC)(e.tags,(function(e){return e})).join(", "):""}n[u]||(n[u]=[]),n[u].push(i)}));var i=[],u=[];A.r0.STATUS===pn?Object.values(A.QK).forEach((function(e){i.push(n[e]),u.push((0,fe.vg)(e))})):A.r0.TAG===pn?(0,Ze.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?u.push(e.split(", ").map((function(e,n){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,S.jsx)(g.Z,{small:!0,children:(0,S.jsx)(k.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):u.push("No tags")})):A.r0.TYPE===pn&&Object.values(A.qL).forEach((function(e){i.push(n[e]),u.push(A.G7[e])}));var t=[],l=[];return null==i||i.forEach((function(e,n){null!=e&&(null==e?void 0:e.length)>=1&&(l.push(e),t.push(null==u?void 0:u[n]))})),{rowGroupHeaders:t,rowsGroupedByIndex:l}}),[pn]),oi=(0,d.useMemo)((function(){return ri(rn)}),[ri,rn]),ci=oi.rowGroupHeaders,si=oi.rowsGroupedByIndex,ai=(0,d.useMemo)((function(){return ri(on)}),[ri,on]),di=ai.rowGroupHeaders,pi=ai.rowsGroupedByIndex,fi=(0,d.useCallback)((function(e,i,t){return(0,S.jsx)(U.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,fe.kC)(A.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,fe.kC)(A.r0.TYPE)},Ie(Ie({},Ke),{},{uuid:"Updated at"}),Ie(Ie({},Ke),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],isSelectedRow:function(n){var i;return(null===(i=e[n])||void 0===i?void 0:i.uuid)===(null==ke?void 0:ke.uuid)},localStorageKeySortColIdx:ne,localStorageKeySortDirection:ie,onClickRow:function(n){return De((function(i){var u=e[n];return(null==i?void 0:i.uuid)!==(null==u?void 0:u.uuid)?u:null}))},onDoubleClickRow:function(i){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e[i].uuid,"/edit"))},ref:u,renderRightClickMenuItems:function(i){var u=e[i];return[{label:function(){return"Edit description"},onClick:function(){return $n({pipeline:u,pipelineDescription:null==u?void 0:u.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return $n({pipeline:u,pipelineName:null==u?void 0:u.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return jn({pipeline:{clone_pipeline_uuid:null==u?void 0:u.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){vn({filesOnly:!1,pipelineUUID:null==u?void 0:u.uuid})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){vn({filesOnly:!0,pipelineUUID:null==u?void 0:u.uuid})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null==u?void 0:u.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(ce.R,"&new=1&pipeline_uuid=").concat(null==u?void 0:u.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(K.b.PIPELINE,"&new=1&object_uuid=").concat(null==u?void 0:u.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null==u?void 0:u.uuid,"?"))&&wn(null==u?void 0:u.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*se.iI,rowGroupHeaders:i,rows:null==e?void 0:e.map((function(e,i){var u=e.blocks,t=e.created_at,l=e.description,o=e.schedules,c=e.tags,s=e.type,d=e.updated_at,p=e.uuid,f=u.filter((function(e){var n=e.type;return z.tf.SCRATCHPAD!==n})).length,v=o.length,h=o.find((function(e){var n=e.status;return ae.fq.ACTIVE===n})),b=s===A.ad,g=(0,S.jsx)("div",{children:(0,S.jsx)(L.Z,{tags:null==c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||Le[p]?(0,S.jsx)(m.ZP,{iconOnly:!0,loading:!!Le[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,_e.j)(n),Be((function(e){return Ie(Ie({},e),{},(0,r.Z)({},p,!0))})),kn(Ie(Ie({},e),{},{status:h?ae.fq.INACTIVE:ae.fq.ACTIVE}))},children:h?(0,S.jsx)(V.Pause,{muted:!0,size:2*se.iI}):(0,S.jsx)(V.PlayButtonFilled,{default:!0,size:2*se.iI})}):null,(0,S.jsx)(k.ZP,{default:!h,monospace:!0,success:!!h,children:h?ae.fq.ACTIVE:v>=1?ae.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,S.jsx)(a(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,S.jsx)(O.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,S.jsx)(k.ZP,{default:!0,preWrap:!0,title:l,children:l},"pipeline_description_".concat(i)),(0,S.jsx)(k.ZP,{bold:b,danger:b,children:b?(0,fe.kC)(A.ad):A.G7[s]},"pipeline_type_".concat(i)),(0,S.jsx)(k.ZP,{monospace:!0,small:!0,title:d?(0,ve._6)(d):null,children:d?(0,ve.XG)((0,ve.d$)(d,{includeSeconds:!0,utcFormat:!0}),Ve):(0,S.jsx)(S.Fragment,{children:"—"})},"pipeline_updated_at_".concat(i)),(0,S.jsx)(k.ZP,{monospace:!0,small:!0,title:t?(0,ve._6)(t):null,children:t?(0,ve.XG)(t.slice(0,19),Ve):(0,S.jsx)(S.Fragment,{children:"—"})},"pipeline_created_at_".concat(i)),g,(0,S.jsx)(k.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,S.jsx)(k.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,S.jsxs)(Z.Z,{flex:1,justifyContent:"flex-end",children:[(0,S.jsx)(m.ZP,Ie(Ie({},Ae),{},{onClick:function(){vn({pipelineUUID:p})},title:"Download (keep folder structure)",children:(0,S.jsx)(V.Save,{default:!0,size:2*se.iI})})),(0,S.jsx)(T.Z,{mr:1}),(0,S.jsx)(m.ZP,Ie(Ie({},Ae),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,S.jsx)(V.Open,{default:!0,size:2*se.iI})})),(0,S.jsx)(T.Z,{mr:1}),(0,S.jsx)(m.ZP,Ie(Ie({},Ae),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,S.jsx)(V.File,{default:!0,size:2*se.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:t,sortableColumnIndexes:cn,sortedColumn:dn,stickyHeader:!0,uuid:"pipelines_table"})}),[jn,wn,vn,Ve,Le,n,ke,Be,De,$n,cn,dn,Ke,kn]),vi=(0,d.useMemo)((function(){return fi(rn,ci,si)}),[rn,fi,ci,si]),hi=(0,d.useMemo)((function(){return fi(on,di,pi)}),[on,fi,di,pi]),mi=(0,d.useMemo)((function(){return(null==rn?void 0:rn.length)||0}),[rn]),bi=(0,d.useMemo)((function(){return(null==on?void 0:on.length)||0}),[on]),gi=(0,d.useMemo)((function(){return(!qe||Se.uuid===ze)&&!mi||qe&&ye.uuid===ze&&!bi}),[qe,mi,bi,ze]),Ci=(0,d.useMemo)((function(){var e=null==Qe?void 0:Qe[re.$D.LIMIT];return(0,S.jsxs)(j.ZP,{alignItems:"center",children:[(0,S.jsx)(k.ZP,{muted:!0,small:!0,children:"Per page"}),(0,S.jsx)(T.Z,{mr:1}),(0,S.jsxs)(G.Z,{compact:!0,onChange:function(e){var n;return(0,ge.u)((n={},(0,r.Z)(n,re.$D.LIMIT,e.target.value),(0,r.Z)(n,re.$D.OFFSET,0),n),{pushHistory:!0})},small:!0,value:e,children:[e&&(e>5*E.Q||e%E.Q)&&(0,S.jsx)("option",{value:e,children:e}),(0,Ze.w6)(5).map((function(e,n){var i=(n+1)*E.Q;return(0,S.jsx)("option",{value:i,children:i},i)}))]})]})}),[Qe]),_i=(0,d.useMemo)((function(){var e,n,i=Xe;qe&&ye.uuid===ze&&(i=un);var u=(null===(e=i)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.count)||0,t=(null==Qe?void 0:Qe[re.$D.LIMIT])||E.Q,l=(null==Qe?void 0:Qe[re.$D.OFFSET])||0,o=Math.ceil(u/t);return(0,S.jsx)(T.Z,{p:se.cd,children:(0,S.jsx)(E.ZP,{maxPages:E.Et,onUpdate:function(e){var n=Number(e);(0,ge.u)((0,r.Z)({},re.$D.OFFSET,n*t))},page:Math.floor(l/t),totalPages:o})})}),[Xe,un,qe,Qe,ze]);return(0,S.jsxs)(_.Z,{errors:He,setErrors:Fe,subheaderChildren:(0,S.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[li,Ci]}),title:"Pipelines",uuid:"pipelines/index",children:[qe&&(0,S.jsx)(T.Z,{px:se.cd,ref:i,children:(0,S.jsx)(b.Z,{noPadding:!0,onClickTab:function(e){var n,i=e.uuid;return(0,ge.u)((n={},(0,r.Z)(n,Oe,i),(0,r.Z)(n,re.$D.OFFSET,0),n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:ze,tabs:we.map((function(e){var n=e.Icon,i=e.label;return{Icon:n,label:function(){var e;return i({count:null==Xe||null===(e=Xe.metadata)||void 0===e?void 0:e.count})},uuid:e.uuid}})),underlineStyle:!0})}),gi?(0,S.jsx)(T.Z,{p:se.Mq,children:Xe?(0,S.jsx)(k.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,S.jsx)($.Z,{inverted:!0,large:!0})}):null,(0,S.jsxs)(pe.cl,{hide:gi,includePadding:!!pn,maxHeight:"calc(100vh - ".concat(W.Mz+74+(y||44)+68,"px)"),children:[(!qe||Se.uuid===ze)&&vi,qe&&ye.uuid===ze&&hi]}),(0,S.jsx)("div",{ref:o,children:_i})]})}De.getInitialProps=(0,u.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Me=(0,M.Z)(De)},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])},80022:function(e,n,i){"use strict";function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(n,{Z:function(){return u}})},15544:function(e,n,i){"use strict";function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}i.d(n,{Z:function(){return u}})},13692:function(e,n,i){"use strict";i.d(n,{Z:function(){return t}});var u=i(61049);function t(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,u.Z)(e,n)}},93189:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var u=i(12539),t=i(80022);function l(e,n){if(n&&("object"===u(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,t.Z)(e)}}},function(e){e.O(0,[449,4241,5544,523,3548,5627,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);