(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2344],{53795:function(e,n,r){"use strict";r.r(n);var s=r(77837),t=r(75582),o=r(38860),i=r.n(o),u=r(21764),c=r(82684),a=r(83455),l=r(34376),d=r(71180),p=r(15338),f=r(55485),h=r(48670),m=r(63637),x=r(93808),j=r(17022),k=r(28274),w=r(38276),Z=r(75499),b=r(30160),g=r(12468),_=r(35686),v=r(70515),C=r(24755),P=r(3917),I=r(76417),T=r(72619),A=r(95924),O=r(28598);function E(){var e=(0,l.useRouter)(),n=(0,c.useState)(!1),r=n[0],s=n[1],o=_.ZP.roles.list().data,i=(0,c.useMemo)((function(){return(null==o?void 0:o.roles)||[]}),[o]),x=[{bold:!r,label:function(){return"Roles"}}];r?(x[0].onClick=function(){return s(!1)},x.push({bold:!0,label:function(){return"New role"}})):x[0].linkProps={href:"/settings/workspace/roles"};var E=(0,a.Db)(_.ZP.seeds.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){u.Am.success("Started creating default roles and permissions. Check back later to see the roles.",{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:"seed-create-success"})},onErrorCallback:function(e){var n=e.error,r=n.errors,s=n.exception,t=n.message,o=n.type;u.Am.error((null==r?void 0:r.error)||s||t,{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:o})}})}}),N=(0,t.Z)(E,2),S=N[0],R=N[1].isLoading;return(0,O.jsxs)(k.Z,{appendBreadcrumbs:!0,breadcrumbs:x,title:"Roles",uuidItemSelected:C.B2.ROLES,uuidWorkspaceSelected:C.Pl.USER_MANAGEMENT,children:[r&&(0,O.jsx)(j.Z,{contained:!0,onCancel:function(){return s(!1)}}),!r&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w.Z,{p:v.cd,children:(0,O.jsxs)(f.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,O.jsx)(d.ZP,{beforeIcon:(0,O.jsx)(m.Z,{}),onClick:function(){return s(!0)},primary:!0,children:"Add new role"}),(0,O.jsx)(w.Z,{mr:v.cd}),(0,O.jsx)(g.Z,{appearBefore:!0,fullSize:!0,description:(0,O.jsxs)(b.ZP,{default:!0,children:["This will create 6 roles and 100s of permissions",(0,O.jsx)("br",{}),"that Mage normally uses when user defined",(0,O.jsx)("br",{}),"permissions isnâ€™t turned on."]}),lightBackground:!0,widthFitContent:!0,children:(0,O.jsx)(d.ZP,{compact:!0,loading:R,onClick:function(){return S({seed:{permissions:!0,roles:!0}})},secondary:!0,small:!0,children:"Create default roles and permissions"})})]})}),(0,O.jsx)(p.Z,{light:!0}),(0,O.jsx)(Z.Z,{columnFlex:[1,1,1,null],columns:[{uuid:"Role"},{uuid:"Created by"},{uuid:"Last updated"},{rightAligned:!0,uuid:"Created at"}],onClickRow:function(n){var r,s=null===(r=i[n])||void 0===r?void 0:r.id;e.push("/settings/workspace/roles/".concat(s))},rows:null==i?void 0:i.map((function(n){var r=n.created_at,s=(n.id,n.name),t=n.updated_at,o=n.user;return[(0,O.jsx)(b.ZP,{children:s},"name"),o?(0,O.jsx)(h.Z,{default:!0,onClick:function(n){(0,A.j)(n),e.push("/settings/workspace/users/".concat(null==o?void 0:o.id))},children:(0,I.s)(o)}):(0,O.jsx)("div",{},"user"),(0,O.jsx)(b.ZP,{monospace:!0,default:!0,children:t&&(0,P.d$)(t)},"updatedAt"),(0,O.jsx)(b.ZP,{monospace:!0,default:!0,rightAligned:!0,children:r&&(0,P.d$)(r)},"createdAt")]})),uuid:"roles"})]})]})}E.getInitialProps=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,x.Z)(E)},8619:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/workspace/roles",function(){return r(53795)}])}},function(e){e.O(0,[1557,5699,1376,9774,2888,179],(function(){return n=8619,e(e.s=n);var n}));var n=e.O();_N_E=n}]);