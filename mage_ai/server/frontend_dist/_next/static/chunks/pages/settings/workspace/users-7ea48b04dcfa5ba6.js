(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{2850:function(e,r,n){"use strict";n.d(r,{M:function(){return o},W:function(){return u}});var t=n(9518),i=n(3055),u=34*n(49125).iI,o=t.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},79585:function(e,r,n){"use strict";n.d(r,{DQ:function(){return l},HY:function(){return o},SA:function(){return a},WH:function(){return u},eC:function(){return s},fF:function(){return c},tC:function(){return d}});var t=n(81132),i=n(9736),u="Workspace",o="Preferences",c="Git settings",s="Users",d="Account",l="Profile",a=function(e){var r=e.owner,n=e.roles,a=e.project_access,f=[{linkProps:{href:"/settings/workspace/preferences"},uuid:o}];(r||n===t.No.ADMIN||0!==(2&a))&&f.push({linkProps:{href:"/settings/workspace/users"},uuid:s}),(!(0,i.YB)()||n<=t.No.EDITOR)&&f.push({linkProps:{href:"/settings/workspace/sync-data"},uuid:c});var p=[{items:f,uuid:u}];return(0,i.YB)()?p.concat([{items:[{linkProps:{href:"/settings/account/profile"},uuid:l}],uuid:d}]):p}},30775:function(e,r,n){"use strict";n.d(r,{Z:function(){return P}});var t=n(1210),i=n(82394),u=n(12691),o=n.n(u),c=n(10919),s=n(86673),d=n(19711),l=n(9518),a=n(23831),f=n(49125),p=n(90880),v=(f.iI,l.default.div.withConfig({displayName:"indexstyle__SectionTitleStyle",componentId:"sc-1y8dyue-0"})(["padding:","px ","px;"],1*f.iI,2.5*f.iI)),h=l.default.div.withConfig({displayName:"indexstyle__ItemStyle",componentId:"sc-1y8dyue-1"})([""," padding:","px ","px;"," ",""],(0,p.eR)(),1.5*f.iI,2.5*f.iI,(function(e){return!e.selected&&"\n    &:hover {\n      background-color: ".concat((e.theme.background||a.Z.background).codeArea,";\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||a.Z.background).codeTextarea,";\n  ")})),O=n(28598),b=n(82684);function j(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function m(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?j(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var y=function(e){var r=e.isItemSelected,n=e.sections;return(0,O.jsx)(s.Z,{py:f.Gg,children:null===n||void 0===n?void 0:n.map((function(e){var n=e.items,t=e.title,i=e.uuid;return(0,O.jsxs)(s.Z,{children:[(0,O.jsx)(v,{children:(0,O.jsx)(d.ZP,{bold:!0,muted:!0,small:!0,uppercase:!0,children:t?t():i})}),null===n||void 0===n?void 0:n.map((function(e){var n=e.label,t=e.linkProps,u=e.onClick,s=e.uuid,d=n?n():s,l=(0,O.jsx)(h,{selected:null===r||void 0===r?void 0:r(m(m({},e),{},{uuidWorkspace:i})),children:d});return t?(0,b.createElement)(o(),m(m({},t),{},{key:s,passHref:!0}),(0,O.jsx)(c.Z,{block:!0,noHoverUnderline:!0,noOutline:!0,sameColorAsText:!0,children:l})):(0,O.jsx)(c.Z,{block:!0,noHoverUnderline:!0,noOutline:!0,onClick:u,preventDefault:!0,sameColorAsText:!0,children:l},s)}))]},i)}))})},w=n(2850),g=n(79585),_=n(9736);var P=function(e){var r=e.after,n=e.afterHidden,i=e.children,u=e.uuidItemSelected,o=e.uuidWorkspaceSelected,c=(0,_.PR)()||{};return(0,O.jsx)(t.Z,{after:r,afterHidden:!r||n,afterWidth:r?50*f.iI:0,afterWidthOverride:!0,before:(0,O.jsx)(w.M,{children:(0,O.jsx)(y,{isItemSelected:function(e){var r=e.uuid,n=e.uuidWorkspace;return o===n&&u===r},sections:(0,g.SA)(c)})}),beforeWidth:w.W,title:"Settings",uuid:"settings/index",children:i})}},60921:function(e,r,n){"use strict";n.r(r);var t=n(77837),i=n(82394),u=n(38860),o=n.n(u),c=n(82684),s=n(34376),d=n(60328),l=n(87372),a=n(41788),f=n(30775),p=n(86673),v=n(58180),h=n(19711),O=n(20582),b=n(82531),j=n(66166),m=n(10503),y=n(49125),w=n(79585),g=n(63153),_=n(9736),P=n(33766),x=n(7715),k=n(59e3),Z=n(28598);function S(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?S(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function I(){var e=(0,s.useRouter)(),r=(0,_.PR)()||{},n=r.id,t=r.owner,i=(0,c.useState)(null),u=i[0],o=i[1],a=b.ZP.users.list({},{revalidateOnFocus:!1}),S=a.data,I=a.mutate,D=(0,c.useMemo)((function(){return(null===S||void 0===S?void 0:S.users)||[]}),[null===S||void 0===S?void 0:S.users]),C=b.ZP.users.detail(null===u||void 0===u?void 0:u.user_id,{},{revalidateOnFocus:!1}),A=C.data,H=C.mutate,W=null===A||void 0===A?void 0:A.user,N=(0,k.iV)(),M=(0,j.Z)(N);(0,c.useEffect)((function(){var e=N.add_new_user,r=N.user_id;if(!(0,x.Xy)(N,M)){var n=E(E({},M),N);r?n.user_id=r:delete n.user_id,e?n.add_new_user=e:delete n.add_new_user,o(n)}}),[N,M]);var R=null===u||void 0===u?void 0:u.add_new_user,T=(0,c.useMemo)((function(){return R?(0,Z.jsx)(p.Z,{p:y.cd,children:(0,Z.jsx)(O.Z,{newUser:!0,onSaveSuccess:function(){(0,P.u7)({add_new_user:null,user_id:null}),I()},title:"Add new user",user:{}})}):W?(0,Z.jsx)(p.Z,{p:y.cd,children:(0,Z.jsx)(O.Z,{hideFields:[g.s7],onDeleteSuccess:function(){(0,P.u7)({add_new_user:null,user_id:null}),I()},onSaveSuccess:function(){(0,P.u7)({add_new_user:null,user_id:null}),H(),I()},showDelete:!0,title:"Edit user",user:W})}):null}),[H,I,R,W]);return(0,Z.jsxs)(f.Z,{after:T,afterHidden:!W&&!R,uuidItemSelected:w.eC,uuidWorkspaceSelected:w.WH,children:[t&&(0,Z.jsx)(p.Z,{p:y.cd,children:(0,Z.jsx)(d.Z,{beforeIcon:(0,Z.jsx)(m.mm,{}),onClick:function(){return(0,P.u7)({add_new_user:1,user_id:null})},primary:!0,children:"Add new user"})}),(0,Z.jsx)(p.Z,{p:y.cd,children:(0,Z.jsx)(l.Z,{children:"Users"})}),(0,Z.jsx)(v.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var r;return(null===(r=D[e])||void 0===r?void 0:r.id)===(null===W||void 0===W?void 0:W.id)},onClickRow:function(r){var t,i=null===(t=D[r])||void 0===t?void 0:t.id;i===n?e.push("/settings/account/profile"):+(null===u||void 0===u?void 0:u.user_id)===i?(0,P.u7)({user_id:null}):(0,P.u7)({add_new_user:null,user_id:i})},rows:D.map((function(e){var r=e.email,n=e.roles_display,t=e.roles_new,i=e.username,u=t||[];return u.sort((function(e,r){return e.id-r.id})),[(0,Z.jsx)(h.ZP,{bold:!0,children:i},"username"),(0,Z.jsx)(h.ZP,{default:!0,children:r},"email"),(0,Z.jsx)(h.ZP,{default:!0,children:u.length>0?u[0].name:n},"roles")]})),uuid:"pipeline-runs"})]})}I.getInitialProps=(0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),r.default=(0,a.Z)(I)},33766:function(e,r,n){"use strict";n.d(r,{O2:function(){return a},g_:function(){return p},u7:function(){return f}});var t=n(75582),i=n(82394),u=n(34376),o=n.n(u),c=n(59e3),s=n(24224);function d(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?d(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var a="_offset";function f(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.preserveParams,i=r.pushHistory,u=r.replaceParams,s=(0,c.iV)(),d={};n&&n.forEach((function(e){s[e]&&(d[e]=s[e])}));var a,f=u?d:s;a=window.location.pathname;var p=i?o().push:o().replace,v=l(l({},f),e);Object.entries(e).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0],i=r[1];"undefined"!==typeof i&&null!==i||delete v[n]}));var h=(0,c.uM)(v);h.length>=1&&(h="?".concat(h));var O="".concat(a.split("?")[0]).concat(h);return p(o().router.pathname,O,{shallow:!0})}function p(e,r,n){var i=n.addingMultipleValues,u=n.isList,o=n.itemsPerPage,c=n.pushHistory,d=void 0!==c&&c,p=n.resetLimitParams,v=l({},e);i?Object.entries(r).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0],i=r[1];if(Array.isArray(i)){var u="".concat(n,"[]");v[u]=i.map(String)}})):u?Object.entries(r).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0],i=r[1],u=String(i),o="".concat(n,"[]"),c=v[o];c&&Array.isArray(c)?(c=c.map(String)).includes(u)?v[o]=(0,s.Od)(c,(function(e){return e===u})):v[o]=c.concat(u):v[o]=[u]})):v=l(l({},v),r),p&&(v._limit=o||20,v[a]=0),f(v,{pushHistory:d})}},48673:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/workspace/users",function(){return n(60921)}])}},function(e){e.O(0,[844,7607,1424,1005,8180,3883,9774,2888,179],(function(){return r=48673,e(e.s=r);var r}));var r=e.O();_N_E=r}]);