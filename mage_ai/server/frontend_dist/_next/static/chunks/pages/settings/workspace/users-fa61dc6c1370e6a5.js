(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{55072:function(e,n,r){"use strict";r.d(n,{Et:function(){return f},Q:function(){return d}});r(82684);var t=r(71180),s=r(55485),i=r(38276),u=r(31748),o=r(72473),a=r(79633),c=r(70515),l=r(28598),d=30,f=9;n.ZP=function(e){var n=e.page,r=e.maxPages,d=e.onUpdate,f=e.totalPages,h=[],p=r;if(p>f)h=Array.from({length:f},(function(e,n){return n}));else{var g=Math.floor(p/2),j=n-g;n+g>=f?(j=f-p+2,p-=2):n-g<=0?(j=0,p-=2):(p-=4,j=n-Math.floor(p/2)),h=Array.from({length:p},(function(e,n){return n+j}))}return(0,l.jsx)(l.Fragment,{children:f>0&&(0,l.jsxs)(s.ZP,{alignItems:"center",children:[(0,l.jsx)(t.ZP,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,l.jsx)(o.PaginateArrowLeft,{size:1.5*c.iI,stroke:u.Av})}),!h.includes(0)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{ml:1,children:(0,l.jsx)(t.ZP,{borderLess:!0,noBackground:!0,onClick:function(){return d(0)},children:1})},0),!h.includes(1)&&(0,l.jsx)(i.Z,{ml:1,children:(0,l.jsx)(t.ZP,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0)]}),h.map((function(e){return(0,l.jsx)(i.Z,{ml:1,children:(0,l.jsx)(t.ZP,{backgroundColor:e===n&&a.a$,borderLess:!0,noBackground:!0,notClickable:e===n,onClick:function(){e!==n&&d(e)},children:e+1})},e)})),!h.includes(f-1)&&(0,l.jsxs)(l.Fragment,{children:[!h.includes(f-2)&&(0,l.jsx)(i.Z,{ml:1,children:(0,l.jsx)(t.ZP,{noBackground:!0,noPadding:!0,notClickable:!0,children:"..."})},0),(0,l.jsx)(i.Z,{ml:1,children:(0,l.jsx)(t.ZP,{borderLess:!0,noBackground:!0,onClick:function(){return d(f-1)},children:f})},f-1)]}),(0,l.jsx)(i.Z,{ml:1}),(0,l.jsx)(t.ZP,{disabled:n===f-1,onClick:function(){return d(n+1)},children:(0,l.jsx)(o.PaginateArrowRight,{size:1.5*c.iI,stroke:u.Av})})]})})}},87992:function(e,n,r){"use strict";r.r(n);var t=r(77837),s=r(82394),i=r(38860),u=r.n(i),o=r(82684),a=r(34376),c=r(71180),l=r(15338),d=r(55072),f=r(93808),h=r(28274),p=r(38276),g=r(75499),j=r(30160),m=r(37361),P=r(35686),x=r(72473),b=r(11498),Z=r(70515),k=r(24755),v=r(3917),w=r(50178),O=r(69419),_=r(28598);function y(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function C(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?y(Object(r),!0).forEach((function(n){(0,s.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function E(){var e,n=(0,a.useRouter)(),r=(0,o.useState)(!1),t=r[0],i=r[1],u=(0,w.PR)(null==n?void 0:n.basePath)||{},f=(u.id,u.owner),y=(0,O.iV)(),E=null!=y&&y.page?y.page:0,A=(e={},(0,s.Z)(e,b.$D.LIMIT,d.Q),(0,s.Z)(e,b.$D.OFFSET,E*d.Q),e),N=P.ZP.users.list(A,{revalidateOnFocus:!1}).data,F=(0,o.useMemo)((function(){return(null==N?void 0:N.users)||[]}),[null==N?void 0:N.users]),S=(0,o.useMemo)((function(){var e;return(null==N||null===(e=N.metadata)||void 0===e?void 0:e.count)||[]}),[N]),M=[{bold:!t,label:function(){return"Users"}}];return t?(M[0].onClick=function(){return i(!1)},M.push({bold:!0,label:function(){return"New user"}})):M[0].linkProps={href:"/settings/workspace/users"},(0,_.jsxs)(h.Z,{appendBreadcrumbs:!0,breadcrumbs:M,title:"Users",uuidItemSelected:k.B2.USERS,uuidWorkspaceSelected:k.Pl.USER_MANAGEMENT,children:[t&&(0,_.jsx)(m.Z,{contained:!0,onCancel:function(){return i(!1)}}),!t&&(0,_.jsxs)(_.Fragment,{children:[f&&(0,_.jsx)(p.Z,{p:Z.cd,children:(0,_.jsx)(c.ZP,{beforeIcon:(0,_.jsx)(x.AddUserSmileyFace,{}),onClick:function(){return i(!0)},primary:!0,children:"Add new user"})}),(0,_.jsx)(l.Z,{light:!0}),(0,_.jsx)(g.Z,{columnFlex:[null,1,1,1,1,null,null],columns:[{label:function(){return""},uuid:"avatar"},{uuid:"Username"},{uuid:"First name"},{uuid:"Last name"},{uuid:"Email"},{uuid:"Role"},{rightAligned:!0,uuid:"Created"}],onClickRow:function(e){var r,t=null===(r=F[e])||void 0===r?void 0:r.id;n.push("/settings/workspace/users/".concat(t))},rows:F.map((function(e){var n=e.avatar,r=e.created_at,t=e.email,s=e.first_name,i=e.last_name,u=e.roles_display,o=e.roles_new,a=e.username,c=o||[];return c.sort((function(e,n){return e.id-n.id})),[(0,_.jsx)(j.ZP,{large:!0,rightAligned:!0,children:n},"avatar"),(0,_.jsx)(j.ZP,{children:a||"-"},"username"),(0,_.jsx)(j.ZP,{default:!0,children:s||"-"},"firstName"),(0,_.jsx)(j.ZP,{default:!0,children:i||"-"},"lastName"),(0,_.jsx)(j.ZP,{default:!0,children:t},"email"),(0,_.jsx)(j.ZP,{default:!0,children:c.length>0?c[0].name:u},"roles"),(0,_.jsx)(j.ZP,{default:!0,monospace:!0,children:r&&(0,v.d$)(r)},"created")]})),uuid:"pipeline-runs"}),(0,_.jsx)(p.Z,{p:2,children:(0,_.jsx)(d.ZP,{maxPages:9,onUpdate:function(e){var r=Number(e),t=C(C({},y),{},{page:r>=0?r:0});n.push("/settings/workspace/users","/settings/workspace/users?".concat((0,O.uM)(t)))},page:Number(E),totalPages:Math.ceil(S/d.Q)})})]})]})}E.getInitialProps=(0,t.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,f.Z)(E)},48673:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/workspace/users",function(){return r(87992)}])}},function(e){e.O(0,[449,5699,3958,9774,2888,179],(function(){return n=48673,e(e.s=n);var n}));var n=e.O();_N_E=n}]);