(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{74395:function(e,n,r){"use strict";r.d(n,{M:function(){return o},W:function(){return u}});var t=r(38626),i=r(46684),u=34*r(70515).iI,o=t.default.div.withConfig({displayName:"indexstyle__BeforeStyle",componentId:"sc-12ee2ib-0"})(["min-height:calc(100vh - ","px);"],i.Mz)},92066:function(e,n,r){"use strict";r.d(n,{DQ:function(){return l},HY:function(){return o},SA:function(){return a},WH:function(){return u},eC:function(){return c},fF:function(){return s},tC:function(){return d}});var t=r(19452),i=r(50178),u="Workspace",o="Preferences",s="Git settings",c="Users",d="Account",l="Profile",a=function(e){var n=e.owner,r=e.roles,a=e.project_access,f=[{linkProps:{href:"/settings/workspace/preferences"},uuid:o}];(n||r===t.No.ADMIN||0!==(2&a))&&f.push({linkProps:{href:"/settings/workspace/users"},uuid:c}),(!(0,i.YB)()||r<=t.No.EDITOR)&&f.push({linkProps:{href:"/settings/workspace/sync-data"},uuid:s});var p=[{items:f,uuid:u}];return(0,i.YB)()?p.concat([{items:[{linkProps:{href:"/settings/account/profile"},uuid:l}],uuid:d}]):p}},28274:function(e,n,r){"use strict";r.d(n,{Z:function(){return x}});var t=r(94629),i=r(82394),u=r(12691),o=r.n(u),s=r(48670),c=r(38276),d=r(30160),l=r(38626),a=r(44897),f=r(70515),p=r(91437),v=(f.iI,l.default.div.withConfig({displayName:"indexstyle__SectionTitleStyle",componentId:"sc-1y8dyue-0"})(["padding:","px ","px;"],1*f.iI,2.5*f.iI)),h=l.default.div.withConfig({displayName:"indexstyle__ItemStyle",componentId:"sc-1y8dyue-1"})([""," padding:","px ","px;"," ",""],(0,p.eR)(),1.5*f.iI,2.5*f.iI,(function(e){return!e.selected&&"\n    &:hover {\n      background-color: ".concat((e.theme.background||a.Z.background).codeArea,";\n    }\n  ")}),(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||a.Z.background).codeTextarea,";\n  ")})),_=r(28598),m=r(82684);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var w=function(e){var n=e.isItemSelected,r=e.sections;return(0,_.jsx)(c.Z,{py:f.Gg,children:null===r||void 0===r?void 0:r.map((function(e){var r=e.items,t=e.title,i=e.uuid;return(0,_.jsxs)(c.Z,{children:[(0,_.jsx)(v,{children:(0,_.jsx)(d.ZP,{bold:!0,muted:!0,small:!0,uppercase:!0,children:t?t():i})}),null===r||void 0===r?void 0:r.map((function(e){var r=e.label,t=e.linkProps,u=e.onClick,c=e.uuid,d=r?r():c,l=(0,_.jsx)(h,{selected:null===n||void 0===n?void 0:n(b(b({},e),{},{uuidWorkspace:i})),children:d});return t?(0,m.createElement)(o(),b(b({},t),{},{key:c,passHref:!0}),(0,_.jsx)(s.Z,{block:!0,noHoverUnderline:!0,noOutline:!0,sameColorAsText:!0,children:l})):(0,_.jsx)(s.Z,{block:!0,noHoverUnderline:!0,noOutline:!0,onClick:u,preventDefault:!0,sameColorAsText:!0,children:l},c)}))]},i)}))})},O=r(74395),y=r(92066),g=r(50178);var x=function(e){var n=e.after,r=e.afterHidden,i=e.children,u=e.uuidItemSelected,o=e.uuidWorkspaceSelected,s=(0,g.PR)()||{};return(0,_.jsx)(t.Z,{after:n,afterHidden:!n||r,afterWidth:n?50*f.iI:0,afterWidthOverride:!0,before:(0,_.jsx)(O.M,{children:(0,_.jsx)(w,{isItemSelected:function(e){var n=e.uuid,r=e.uuidWorkspace;return o===r&&u===n},sections:(0,y.SA)(s)})}),beforeWidth:O.W,title:"Settings",uuid:"settings/index",children:i})}},87992:function(e,n,r){"use strict";r.r(n);var t=r(77837),i=r(82394),u=r(38860),o=r.n(u),s=r(82684),c=r(34376),d=r(71180),l=r(85854),a=r(93808),f=r(28274),p=r(38276),v=r(75499),h=r(30160),_=r(36043),m=r(35686),j=r(98464),b=r(72473),w=r(70515),O=r(92066),y=r(14875),g=r(50178),x=r(15610),k=r(42122),P=r(69419),Z=r(28598);function S(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?S(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function C(){var e=(0,c.useRouter)(),n=(0,g.PR)()||{},r=n.id,t=n.owner,i=(0,s.useState)(null),u=i[0],o=i[1],a=m.ZP.users.list({},{revalidateOnFocus:!1}),S=a.data,C=a.mutate,D=(0,s.useMemo)((function(){return(null===S||void 0===S?void 0:S.users)||[]}),[null===S||void 0===S?void 0:S.users]),E=m.ZP.users.detail(null===u||void 0===u?void 0:u.user_id,{},{revalidateOnFocus:!1}),W=E.data,N=E.mutate,A=null===W||void 0===W?void 0:W.user,H=(0,P.iV)(),R=(0,j.Z)(H);(0,s.useEffect)((function(){var e=H.add_new_user,n=H.user_id;if(!(0,k.Xy)(H,R)){var r=I(I({},R),H);n?r.user_id=n:delete r.user_id,e?r.add_new_user=e:delete r.add_new_user,o(r)}}),[H,R]);var T=null===u||void 0===u?void 0:u.add_new_user,M=(0,s.useMemo)((function(){return T?(0,Z.jsx)(p.Z,{p:w.cd,children:(0,Z.jsx)(_.Z,{newUser:!0,onSaveSuccess:function(){(0,x.u7)({add_new_user:null,user_id:null}),C()},title:"Add new user",user:{}})}):A?(0,Z.jsx)(p.Z,{p:w.cd,children:(0,Z.jsx)(_.Z,{hideFields:[y.s7],onDeleteSuccess:function(){(0,x.u7)({add_new_user:null,user_id:null}),C()},onSaveSuccess:function(){(0,x.u7)({add_new_user:null,user_id:null}),N(),C()},showDelete:!0,title:"Edit user",user:A})}):null}),[N,C,T,A]);return(0,Z.jsxs)(f.Z,{after:M,afterHidden:!A&&!T,uuidItemSelected:O.eC,uuidWorkspaceSelected:O.WH,children:[t&&(0,Z.jsx)(p.Z,{p:w.cd,children:(0,Z.jsx)(d.Z,{beforeIcon:(0,Z.jsx)(b.mm,{}),onClick:function(){return(0,x.u7)({add_new_user:1,user_id:null})},primary:!0,children:"Add new user"})}),(0,Z.jsx)(p.Z,{p:w.cd,children:(0,Z.jsx)(l.Z,{children:"Users"})}),(0,Z.jsx)(v.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var n;return(null===(n=D[e])||void 0===n?void 0:n.id)===(null===A||void 0===A?void 0:A.id)},onClickRow:function(n){var t,i=null===(t=D[n])||void 0===t?void 0:t.id;i===r?e.push("/settings/account/profile"):+(null===u||void 0===u?void 0:u.user_id)===i?(0,x.u7)({user_id:null}):(0,x.u7)({add_new_user:null,user_id:i})},rows:D.map((function(e){var n=e.email,r=e.roles_display,t=e.roles_new,i=e.username,u=t||[];return u.sort((function(e,n){return e.id-n.id})),[(0,Z.jsx)(h.ZP,{bold:!0,children:i},"username"),(0,Z.jsx)(h.ZP,{default:!0,children:n},"email"),(0,Z.jsx)(h.ZP,{default:!0,children:u.length>0?u[0].name:r},"roles")]})),uuid:"pipeline-runs"})]})}C.getInitialProps=(0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,a.Z)(C)},48673:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/workspace/users",function(){return r(87992)}])}},function(e){e.O(0,[844,9902,6358,9696,8264,5499,2536,9774,2888,179],(function(){return n=48673,e(e.s=n);var n}));var n=e.O();_N_E=n}]);