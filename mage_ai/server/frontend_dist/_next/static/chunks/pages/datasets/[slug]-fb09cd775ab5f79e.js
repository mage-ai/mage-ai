(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{3382:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var i=n(9499),o=n(6835),l=n(7294),u=n(1163),r=n.n(u),a=n(5278),s=n(1180),c=n(2125),d=n(1757),v=n(7618),m=n(5485),p=n(160),f=n(2631),x=n(9633),_=n(515),h=n(3918),g=n(5893),j=c.ZP.div.withConfig({displayName:"FeatureProfiles__ContainerStyle",componentId:"sc-178fdg7-0"})(["border:1px solid ",";border-radius:","px;"],x.Wd,f.TR),y=c.ZP.div.withConfig({displayName:"FeatureProfiles__HeaderStyle",componentId:"sc-178fdg7-1"})(["background:",";padding:","px;border-bottom:1px solid ",";border-top-left-radius:","px;border-top-right-radius:","px;"],x.Uq,_.tr,x.Wd,f.TR,f.TR),b=c.ZP.div.withConfig({displayName:"FeatureProfiles__FeatureProfileStyle",componentId:"sc-178fdg7-2"})(["border-bottom:1px solid ",";"],x.Wd),Z=c.ZP.div.withConfig({displayName:"FeatureProfiles__BodyStyle",componentId:"sc-178fdg7-3"})(["height:500px;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:scroll;"],f.TR,f.TR),w=c.ZP.div.withConfig({displayName:"FeatureProfiles__CellStyle",componentId:"sc-178fdg7-4"})([""," padding:","px;"],(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),_.iI);function O(e){var t=e.feature,n=e.statistics,i=t.columnType,o=t.uuid,l=null===n||void 0===n?void 0:n["".concat(o,"/count")],u=null===n||void 0===n?void 0:n["".concat(o,"/count_distinct")],r=null===n||void 0===n?void 0:n["".concat(o,"/null_value_count")],a=null===n||void 0===n?void 0:n["".concat(o,"/max")],s=null===n||void 0===n?void 0:n["".concat(o,"/min")],c=null===n||void 0===n?void 0:n["".concat(o,"/average")],f=null===n||void 0===n?void 0:n["".concat(o,"/median")],_=null===n||void 0===n?void 0:n["".concat(o,"/mode")],j=null===n||void 0===n?void 0:n["".concat(o,"/invalid_value_count")],y=[];return y=d.HE.includes(i)?[["Type","Count","Unique","Missing"],[d.Rp[i]||i,l,u,r],[i===d.Rx?"Median":"Mean","Minimum","Maximum","Invalid"],[i===d.Rx?f:(0,h.QV)(c,3),"string"===typeof s?s:(0,h.QV)(s,3),"string"===typeof a?a:(0,h.QV)(a,3),j]]:[["Type","Count","Unique"],[d.Rp[i]||i,l,u],["Missing","Mode","Invalid"],[r,_,j]],(0,g.jsxs)(m.Z,{children:[(0,g.jsx)(v.Z,{flex:1,children:(0,g.jsx)(w,{children:(0,g.jsx)(p.ZP,{backgroundColor:x.AU,bold:!0,color:x.a$,monospace:!0,children:o})})}),y.map((function(e){return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(v.Z,{flex:1,flexDirection:"column",children:e.map((function(e,t){return(0,g.jsx)(w,{backgroundColor:t%2===0?x.Cj:x.rp,children:(0,g.jsx)(p.ZP,{children:e})},t)}))})})}))]})}var P=function(e){var t=e.features,n=e.statistics;return(0,g.jsxs)(j,{children:[(0,g.jsx)(y,{children:(0,g.jsx)(p.ZP,{bold:!0,children:"Feature Profiles"})}),(0,g.jsx)(Z,{children:t.map((function(e,t){return(0,g.jsx)(b,{children:(0,g.jsx)(O,{feature:e,statistics:n})},t)}))})]})},C=n(3481),S=n(862),N=n(4085),D=n(8293),F=n(8276),I=n(1487),M=n(1743),k=n(4019),E=n(8302);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(){var e,t,n,i,c,d,f=(0,u.useRouter)().query.slug,x=E.ZP.feature_sets.detail(f).data,h=(0,l.useMemo)((function(){var e;return(null===x||void 0===x||null===(e=x.sample_data)||void 0===e?void 0:e.columns)||[]}),[null===x||void 0===x||null===(e=x.sample_data)||void 0===e?void 0:e.columns]),j=(0,l.useMemo)((function(){var e;return(null===x||void 0===x||null===(e=x.sample_data)||void 0===e?void 0:e.rows)||[]}),[null===x||void 0===x||null===(t=x.sample_data)||void 0===t?void 0:t.rows]),y=(0,l.useMemo)((function(){var e;return(null===x||void 0===x||null===(e=x.metadata)||void 0===e?void 0:e.column_types)||[]}),[null===x||void 0===x||null===(n=x.metadata)||void 0===n?void 0:n.column_types]),b=(0,l.useMemo)((function(){return(null===x||void 0===x?void 0:x.statistics)||[]}),[null===x||void 0===x?void 0:x.statistics]),Z=((0,l.useMemo)((function(){return(null===x||void 0===x?void 0:x.suggestions)||[]}),[null===x||void 0===x?void 0:x.suggestions]),(0,l.useMemo)((function(){var e;return(null===x||void 0===x||null===(e=x.pipeline)||void 0===e?void 0:e.actions)||[]}),[null===x||void 0===x||null===(i=x.pipeline)||void 0===i?void 0:i.actions])),w=Object.entries((null===x||void 0===x||null===(c=x.metadata)||void 0===c?void 0:c.column_types)||{}).map((function(e){var t=(0,o.Z)(e,2),n=t[0];return{columnType:t[1],uuid:n}})),O=(0,l.useState)([]),T=O[0],V=O[1],A=(0,l.useState)(),H=A[0],q=A[1],J=(0,l.useState)(),Q=J[0],U=J[1],B=(0,l.useState)([]),G=(B[0],B[1],(0,l.useState)(Z)),W=(G[0],G[1],(0,l.useState)([])),z=(W[0],W[1],(0,l.useState)()),X=z[0],K=z[1],$=["avg_null_value_count","avg_invalid_value_count","duplicate_row_count","completeness","validity"],L=["count","empty_column_count"],Y=["category","category_high_cardinality","true_or_false"],ee=["datetime"],te=["number","number_with_decimals"],ne=["completeness","validity"],ie={avg_invalid_value_count:"Invalid values",avg_null_value_count:"Missing values",completeness:"Completeness",count:"Row count",duplicate_row_count:"Duplicate values",empty_column_count:"Empty features",validity:"Validity"},oe={avg_invalid_value_count:3,avg_null_value_count:2,completeness:1,duplicate_row_count:4,validity:0};(0,l.useEffect)((function(){var e=[];h.map((function(t){e.push({label:t})})),V(e)}),[h]),(0,l.useEffect)((function(){var e=[];j.map((function(t){e.push({columnValues:t})})),K({rowData:e})}),[j]),(0,l.useEffect)((function(){var e=Object.keys(b),t=Array($.length).fill(0);e.map((function(e){if($.includes(e)){var n=b[e].toPrecision(2),i=ie[e],o=oe[e];ne.includes(e)&&(n="".concat(n*=100,"%")),t[o]={columnValues:[i,n]}}})),q({rowData:t})}),[b]),(0,l.useEffect)((function(){var e=Object.keys(b),t=Object.values(y),n=[];n.push({columnValues:["Column count",t.length]}),e.map((function(e){if(L.includes(e)){var t=ie[e];n.push({columnValues:[t,b[e]]})}}));var i=0,o=0,l=0;t.map((function(e){Y.includes(e)?i+=1:te.includes(e)?o+=1:ee.includes(e)&&(l+=1)})),n.push({columnValues:["Categorical Features",i]},{columnValues:["Numerical Features",o]},{columnValues:["Time series Features",l]}),U({rowData:n})}),[b]);var le=(0,l.useState)("data"),ue=le[0],re=le[1],ae=(0,g.jsx)(m.Z,{alignItems:"justify-right",flexDirection:"row-reverse",children:(0,g.jsx)(s.Z,{onClick:function(e){var t,n,i=null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.pathname;e.preventDefault(),r().push("".concat(i,"/features"))},children:(0,g.jsx)(p.ZP,{bold:!0,children:" Column view "})})}),se=(D.Z,Array(T.length).fill(1),D.Z,D.Z,(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(m.Z,{justifyContent:"center",children:[(0,g.jsx)(v.Z,{flex:1,children:(0,g.jsx)(D.Z,{columnFlexNumbers:[1,1],columnHeaders:[{label:"Quality Metrics"}],rowGroupData:H&&[H]})}),(0,g.jsx)(F.Z,{ml:8}),(0,g.jsx)(v.Z,{flex:1,children:(0,g.jsx)(D.Z,{columnFlexNumbers:[1,1,1],columnHeaders:[{label:"Statistics"}],rowGroupData:Q&&[Q]})})]}),(0,g.jsx)(F.Z,{my:8,children:(0,g.jsx)(P,{features:w,statistics:b})})]})),ce=(null===x||void 0===x||null===(d=x.insights)||void 0===d?void 0:d[1])||{},de=(0,g.jsxs)(M.Z,{bold:!0,defaultKey:ue,large:!0,noBottomBorder:!1,onChange:function(e){return re(e)},children:[(0,g.jsxs)(M.O,{label:"Data",children:[(0,g.jsx)(F.Z,{mb:3,mt:3}),(0,g.jsx)(D.Z,{columnFlexNumbers:Array(T.length).fill(1),columnHeaders:T,rowGroupData:X&&[X]})]},"data"),(0,g.jsxs)(M.O,{label:"Reports",children:[(0,g.jsx)(F.Z,{mb:3,mt:3}),se]},"reports"),(0,g.jsxs)(M.O,{label:"Visualizations",children:[(0,g.jsx)(F.Z,{mb:3,mt:3}),(0,g.jsx)(S.ZP,{features:w,insightsOverview:ce,statistics:b})]},"visualizations")]}),ve=(0,l.useState)(),me=ve[0],pe=ve[1],fe=null===me||void 0===me?void 0:me.action_type;return(0,g.jsxs)(C.Z,{centerAlign:!0,footer:(0,g.jsx)(F.Z,{mt:_.iI}),children:[(0,g.jsxs)(F.Z,{mt:_.iI,children:[fe&&(0,g.jsx)(a.Z,{actionType:fe,axis:null===me||void 0===me?void 0:me.axis,features:h.map((function(e){return{uuid:e}})),onSave:function(){return function(e){var t={action_payload:R(R({},e),{},{action_type:fe})};alert(JSON.stringify(t))}(me)},payload:me,setPayload:pe}),(0,g.jsx)(F.Z,{mt:5,children:(0,g.jsxs)(N.Z,{compact:!0,onChange:function(e){return pe(JSON.parse(e.target.value))},value:fe,width:20*_.iI,children:[(0,g.jsx)("option",{value:"",children:"New action"}),Object.entries(k.Z.rows).map((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];return(0,g.jsx)("option",{value:JSON.stringify({action_type:n,axis:"row"}),children:i.title},n)})),Object.entries(k.Z.columns).map((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];return i.multiColumns&&(0,g.jsx)("option",{value:JSON.stringify({action_type:n,axis:"column"}),children:i.title},n)}))]})})]}),(0,g.jsx)(F.Z,{mt:_.iI}),ae,(0,g.jsx)(F.Z,{mt:2}),(0,g.jsx)(I.Z,{featureSet:x,featureSetId:f}),(0,g.jsx)(F.Z,{mt:4}),de]})}},8786:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datasets/[slug]",function(){return n(3382)}])}},function(e){e.O(0,[885,195,733,410,493,882,774,888,179],(function(){return t=8786,e(e.s=t);var t}));var t=e.O();_N_E=t}]);