(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{1028:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return U}});var i=t(9499),o=t(6835),l=t(7294),a=t(1163),r=t.n(a),u=t(2013),c=t(8777),s=t(5278),d=(t(9521),t(1868),t(160)),v=t(2631),m=t(2125),p=t(987),f=t(515),x=(m.ZP.div.withConfig({displayName:"Tablestyle__TableStyle",componentId:"sc-y7klk2-0"})(["position:relative;width:100%;max-width:100vw;height:100%;max-height:100vh;overflow:auto;"," "," ",""],(function(e){return e.table&&"\n    background-color: ".concat((e.theme.background||p.Z.background).page,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.flex&&"\n    flex: 1;\n  "})),m.ZP.div.withConfig({displayName:"Tablestyle__ColumnHeaderRowStyle",componentId:"sc-y7klk2-1"})(["position:relative;z-index:2;min-width:44px;min-height:20px;",""],(function(e){return"\n    background-color: ".concat((e.theme.interactive||p.Z.interactive).hoverBackground,";\n    border: 1px solid ").concat((e.theme.interative||p.Z.interactive).defaultBorder,";\n  ")})),m.ZP.div.withConfig({displayName:"Tablestyle__ColumnHeaderCellStyle",componentId:"sc-y7klk2-2"})(["max-width:44px;max-height:44px;"," ",""],(function(e){return!e.small&&"\n    padding: ".concat(2*f.iI,"px;\n  ")}),(function(e){return e.small&&"\n    padding: ".concat(1.5*f.iI,"px;\n  ")})),m.ZP.div.withConfig({displayName:"Tablestyle__RowCellStyle",componentId:"sc-y7klk2-3"})(["min-width:250px;max-height:80px;flex-shrink:0;"," "," ",""],(function(e){return!e.first&&"\n    border-left: 1px solid ".concat((e.theme.background||p.Z.background).page,";\n  ")}),(function(e){return!e.small&&"\n    padding: ".concat(2*f.iI,"px;\n  ")}),(function(e){return e.small&&"\n    padding: ".concat(1.5*f.iI,"px;\n  ")})),m.ZP.div.withConfig({displayName:"Tablestyle__CellStyled",componentId:"sc-y7klk2-4"})([""," flex-shrink:0;margin:0;position:relative;z-index:3;white-space:nowrap;*{color:var(--cell-text-color)}padding:","px;"],(function(e){return e.onClick&&"cursor: pointer;"}),2*f.iI),t(5893));var h=t(1180),g=t(1757),y=t(7618),_=t(5485),j=t(9633),b=t(3918),Z=m.ZP.div.withConfig({displayName:"FeatureProfiles__ContainerStyle",componentId:"sc-178fdg7-0"})(["border:1px solid ",";border-radius:","px;"],j.Wd,v.TR),w=m.ZP.div.withConfig({displayName:"FeatureProfiles__HeaderStyle",componentId:"sc-178fdg7-1"})(["background:",";padding:","px;border-bottom:1px solid ",";border-top-left-radius:","px;border-top-right-radius:","px;"],j.Uq,f.tr,j.Wd,v.TR,v.TR),C=m.ZP.div.withConfig({displayName:"FeatureProfiles__FeatureProfileStyle",componentId:"sc-178fdg7-2"})(["border-bottom:1px solid ",";"],j.Wd),k=m.ZP.div.withConfig({displayName:"FeatureProfiles__BodyStyle",componentId:"sc-178fdg7-3"})(["height:500px;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:scroll;"],v.TR,v.TR),P=m.ZP.div.withConfig({displayName:"FeatureProfiles__CellStyle",componentId:"sc-178fdg7-4"})([""," padding:","px;"],(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")}),f.iI);function O(e){var n=e.feature,t=e.statistics,i=n.columnType,o=n.uuid,l=null===t||void 0===t?void 0:t["".concat(o,"/count")],a=null===t||void 0===t?void 0:t["".concat(o,"/count_distinct")],r=null===t||void 0===t?void 0:t["".concat(o,"/null_value_count")],u=null===t||void 0===t?void 0:t["".concat(o,"/max")],c=null===t||void 0===t?void 0:t["".concat(o,"/min")],s=null===t||void 0===t?void 0:t["".concat(o,"/average")],v=null===t||void 0===t?void 0:t["".concat(o,"/median")],m=null===t||void 0===t?void 0:t["".concat(o,"/mode")],p=null===t||void 0===t?void 0:t["".concat(o,"/invalid_value_count")],f=[];return f=g.HE.includes(i)?[["Type","Count","Unique","Missing"],[g.Rp[i]||i,l,a,r],[i===g.Rx?"Median":"Mean","Minimum","Maximum","Invalid"],[i===g.Rx?v:(0,b.QV)(s,3),"string"===typeof c?c:(0,b.QV)(c,3),"string"===typeof u?u:(0,b.QV)(u,3),p]]:[["Type","Count","Unique"],[g.Rp[i]||i,l,a],["Missing","Mode","Invalid"],[r,m,p]],(0,x.jsxs)(_.Z,{children:[(0,x.jsx)(y.Z,{flex:1,children:(0,x.jsx)(P,{children:(0,x.jsx)(d.ZP,{backgroundColor:j.AU,bold:!0,color:j.a$,monospace:!0,children:o})})}),f.map((function(e){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(y.Z,{flex:1,flexDirection:"column",children:e.map((function(e,n){return(0,x.jsx)(P,{backgroundColor:n%2===0?j.Cj:j.rp,children:(0,x.jsx)(d.ZP,{children:e})},n)}))})})}))]})}var S=function(e){var n=e.features,t=e.statistics;return(0,x.jsxs)(Z,{children:[(0,x.jsx)(w,{children:(0,x.jsx)(d.ZP,{bold:!0,children:"Feature Profiles"})}),(0,x.jsx)(k,{children:n.map((function(e,n){return(0,x.jsx)(C,{children:(0,x.jsx)(O,{feature:e,statistics:t})},n)}))})]})},I=t(3481),N=t(8670),F=t(862),T=t(4085),D=t(992),M=t(8276),R=t(5009),E=t(6833),V=t(1743),H=t(4019),A=t(8302);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=function(){var e,n,t,i,v,m,p=(0,a.useRouter)().query.slug,g=A.ZP.feature_sets.detail(p).data,j=(0,l.useMemo)((function(){var e;return(null===g||void 0===g||null===(e=g.sample_data)||void 0===e?void 0:e.columns)||[]}),[null===g||void 0===g||null===(e=g.sample_data)||void 0===e?void 0:e.columns]),b=(0,l.useMemo)((function(){var e;return(null===g||void 0===g||null===(e=g.sample_data)||void 0===e?void 0:e.rows)||[]}),[null===g||void 0===g||null===(n=g.sample_data)||void 0===n?void 0:n.rows]),Z=(0,l.useMemo)((function(){var e;return(null===g||void 0===g||null===(e=g.metadata)||void 0===e?void 0:e.column_types)||[]}),[null===g||void 0===g||null===(t=g.metadata)||void 0===t?void 0:t.column_types]),w=(0,l.useMemo)((function(){return(null===g||void 0===g?void 0:g.statistics)||[]}),[null===g||void 0===g?void 0:g.statistics]),C=((0,l.useMemo)((function(){return(null===g||void 0===g?void 0:g.suggestions)||[]}),[null===g||void 0===g?void 0:g.suggestions]),(0,l.useMemo)((function(){var e;return(null===g||void 0===g||null===(e=g.pipeline)||void 0===e?void 0:e.actions)||[]}),[null===g||void 0===g||null===(i=g.pipeline)||void 0===i?void 0:i.actions])),k=Object.entries((null===g||void 0===g||null===(v=g.metadata)||void 0===v?void 0:v.column_types)||{}).map((function(e){var n=(0,o.Z)(e,2),t=n[0];return{columnType:n[1],uuid:t}})),P=(0,l.useState)([]),O=P[0],z=P[1],U=(0,l.useState)(),q=U[0],J=U[1],Q=(0,l.useState)(),G=Q[0],W=Q[1],X=(0,l.useState)([]),K=X[0],$=(X[1],(0,l.useState)(C)),L=$[0],Y=($[1],(0,l.useState)([])),ee=(Y[0],Y[1],(0,l.useState)()),ne=ee[0],te=ee[1],ie=["avg_null_value_count","avg_invalid_value_count","duplicate_row_count","completeness","validity"],oe=["count","empty_column_count"],le=["category","category_high_cardinality","true_or_false"],ae=["datetime"],re=["number","number_with_decimals"],ue=["completeness","validity"],ce={avg_invalid_value_count:"Invalid values",avg_null_value_count:"Missing values",completeness:"Completeness",count:"Row count",duplicate_row_count:"Duplicate values",empty_column_count:"Empty features",validity:"Validity"},se={avg_invalid_value_count:3,avg_null_value_count:2,completeness:1,duplicate_row_count:4,validity:0};(0,l.useEffect)((function(){var e=[];j.map((function(n){e.push({label:n})})),z(e)}),[j]),(0,l.useEffect)((function(){var e=[];b.map((function(n){e.push({columnValues:n})})),te({rowData:e})}),[b]),(0,l.useEffect)((function(){var e=Object.keys(w),n=Array(ie.length).fill(0);e.map((function(e){if(ie.includes(e)){var t=w[e].toPrecision(2),i=ce[e],o=se[e];ue.includes(e)&&(t="".concat(t*=100,"%")),n[o]={columnValues:[i,t]}}})),J({rowData:n})}),[w]),(0,l.useEffect)((function(){var e=Object.keys(w),n=Object.values(Z),t=[];t.push({columnValues:["Column count",n.length]}),e.map((function(e){if(oe.includes(e)){var n=ce[e];t.push({columnValues:[n,w[e]]})}}));var i=0,o=0,l=0;n.map((function(e){le.includes(e)?i+=1:re.includes(e)?o+=1:ae.includes(e)&&(l+=1)})),t.push({columnValues:["Categorical Features",i]},{columnValues:["Numerical Features",o]},{columnValues:["Time series Features",l]}),W({rowData:t})}),[w]);var de=(0,l.useState)("data"),ve=de[0],me=de[1],pe=(0,x.jsx)(_.Z,{alignItems:"justify-right",flexDirection:"row-reverse",children:(0,x.jsx)(h.Z,{onClick:function(e){var n,t,i=null===(n=window)||void 0===n||null===(t=n.location)||void 0===t?void 0:t.pathname;e.preventDefault(),r().push("".concat(i,"/features"))},children:(0,x.jsx)(d.ZP,{bold:!0,children:" Column view "})})}),fe=function(e){var n=e.idx,t=e.link,i=e.name,o=e.numFeatures,l=e.onClose,a=e.showIdx;return(0,x.jsxs)(R.Z,{columnFlexNumbers:[.5,.5,12],children:[t&&(0,x.jsx)(N.Z,{bold:!0,noHoverUnderline:!0,onClick:t,children:"Apply"}),a&&(0,x.jsx)(d.ZP,{children:n+1}),(0,x.jsxs)(_.Z,{children:[(0,x.jsxs)(d.ZP,{children:[i,","]}),(0,x.jsx)(M.Z,{mr:1}),(0,x.jsx)(d.ZP,{secondary:!0,children:pluralize("feature",o)})]}),(0,x.jsx)(_.Z,{children:(0,x.jsx)(h.Z,{basic:!0,iconOnly:!0,onClick:l,padding:"0px",transparent:!0,children:(0,x.jsx)(Close,{muted:!0})})})]})},xe=(L.map((function(e,n){var t=e.suggestions,i=t.title,o=t.action_payload.action_arguments.length;return(0,x.jsx)(fe,{idx:n,name:i,numFeatures:o,onClose:function(){return removeAction(n)},showIdx:!0},"".concat(n,"-").concat(i))})),u.Z,c.Z,"".concat(K.length," suggested actions"),K.length>0?K.map((function(e,n){var t=e.action_payload.action_arguments.length;return(0,x.jsx)(fe,{idx:n,link:function(){return addAction(n)},name:e.title,numFeatures:t,onClose:function(){return removeSuggestion(n)}},"".concat(n,"-").concat(e.title))})):x.Fragment,D.Z,D.Z,(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(_.Z,{justifyContent:"center",children:[(0,x.jsx)(y.Z,{flex:1,children:(0,x.jsx)(D.Z,{columnFlexNumbers:[1,1],columnHeaders:[{label:"Quality Metrics"}],rowGroupData:q&&[q]})}),(0,x.jsx)(M.Z,{ml:8}),(0,x.jsx)(y.Z,{flex:1,children:(0,x.jsx)(D.Z,{columnFlexNumbers:[1,1,1],columnHeaders:[{label:"Statistics"}],rowGroupData:G&&[G]})})]}),(0,x.jsx)(M.Z,{my:8,children:(0,x.jsx)(S,{features:k,statistics:w})})]})),he=(null===g||void 0===g||null===(m=g.insights)||void 0===m?void 0:m[1])||{},ge=(0,x.jsxs)(V.Z,{bold:!0,defaultKey:ve,large:!0,noBottomBorder:!1,onChange:function(e){return me(e)},children:[(0,x.jsxs)(V.O,{label:"Data",children:[(0,x.jsx)(M.Z,{mb:3,mt:3}),(0,x.jsx)(D.Z,{columnFlexNumbers:Array(O.length).fill(1),columnHeaders:O,rowGroupData:ne&&[ne]})]},"data"),(0,x.jsxs)(V.O,{label:"Reports",children:[(0,x.jsx)(M.Z,{mb:3,mt:3}),xe]},"reports"),(0,x.jsxs)(V.O,{label:"Visualizations",children:[(0,x.jsx)(M.Z,{mb:3,mt:3}),(0,x.jsx)(F.ZP,{features:k,insightsOverview:he,statistics:w})]},"visualizations")]}),ye=(0,l.useState)(),_e=ye[0],je=ye[1],be=null===_e||void 0===_e?void 0:_e.action_type;return(0,x.jsxs)(I.Z,{centerAlign:!0,footer:(0,x.jsx)(M.Z,{mt:f.iI}),children:[(0,x.jsxs)(M.Z,{mt:f.iI,children:[be&&(0,x.jsx)(s.Z,{actionType:be,axis:null===_e||void 0===_e?void 0:_e.axis,features:j.map((function(e){return{uuid:e}})),onSave:function(){return function(e){var n={action_payload:B(B({},e),{},{action_type:be})};alert(JSON.stringify(n))}(_e)},payload:_e,setPayload:je}),(0,x.jsx)(M.Z,{mt:5,children:(0,x.jsxs)(T.Z,{compact:!0,onChange:function(e){return je(JSON.parse(e.target.value))},value:be,width:20*f.iI,children:[(0,x.jsx)("option",{value:"",children:"New action"}),Object.entries(H.Z.rows).map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1];return(0,x.jsx)("option",{value:JSON.stringify({action_type:t,axis:"row"}),children:i.title},t)})),Object.entries(H.Z.columns).map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1];return i.multiColumns&&(0,x.jsx)("option",{value:JSON.stringify({action_type:t,axis:"column"}),children:i.title},t)}))]})})]}),(0,x.jsx)(M.Z,{mt:f.iI}),pe,(0,x.jsx)(M.Z,{mt:2}),(0,x.jsx)(E.Z,{featureSet:g,featureSetId:p}),(0,x.jsx)(M.Z,{mt:4}),ge]})}},8786:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datasets/[slug]",function(){return t(1028)}])}},function(e){e.O(0,[885,195,733,410,521,493,589,774,888,179],(function(){return n=8786,e(e.s=n);var n}));var n=e.O();_N_E=n}]);