(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{94629:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var r=t(82394),o=t(21831),i=t(82684),l=t(50724),s=t(82555),c=t(97618),u=t(70613),a=t(31557),d=t(68899),h=t(28598);function f(e,n){var t=e.children,r=e.noPadding;return(0,h.jsx)(d.HS,{noPadding:r,ref:n,children:t})}var m=i.forwardRef(f),j=t(62547),p=t(82571),x=t(77417),v=t(46684),b=t(75375);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,r=e.afterHeader,i=e.afterHidden,f=e.afterWidth,Z=e.afterWidthOverride,y=e.appendBreadcrumbs,C=e.before,P=e.beforeHeader,_=e.beforeWidth,w=e.breadcrumbs,O=e.children,k=e.contained,I=e.errors,M=e.headerMenuItems,S=e.headerOffset,H=e.hideAfterCompletely,A=e.mainContainerHeader,E=e.navigationItems,R=e.setAfterHidden,D=e.setAfterWidth,F=e.setBeforeWidth,B=e.setErrors,N=e.subheaderChildren,U=e.subheaderNoPadding,V=e.title,T=e.uuid,L=(0,b.Z)(T,{beforeResizeOffset:b.H,setWidthAfter:D,setWidthBefore:F,widthAfter:f,widthBefore:_,widthOverrideAfter:Z}),q=L.mainContainerRef,G=L.mousedownActiveAfter,z=L.mousedownActiveBefore,W=L.setMousedownActiveAfter,Q=L.setMousedownActiveBefore,K=L.setWidthAfter,Y=L.setWidthBefore,X=L.widthAfter,J=L.widthBefore,$=(0,x.Z)().project,ee=[];return w&&ee.push.apply(ee,(0,o.Z)(w)),null!=w&&w.length&&!y||!$||null!=w&&w.length||ee.unshift({bold:!y,label:function(){return V}}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Z,{title:V}),(0,h.jsx)(a.Z,{breadcrumbs:ee,menuItems:M}),(0,h.jsxs)(d.Nk,{ref:n,children:[0!==(null==E?void 0:E.length)&&(0,h.jsx)(d.lm,{showMore:!0,children:(0,h.jsx)(p.Z,{navigationItems:E,showMore:!0})}),(0,h.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,h.jsxs)(j.Z,{after:t,afterHeader:r,afterHeightOffset:v.Mz,afterHidden:i,afterMousedownActive:G,afterWidth:X,before:C,beforeHeader:P,beforeHeightOffset:v.Mz,beforeMousedownActive:z,beforeWidth:C?J:d.k1,contained:k,headerOffset:S,hideAfterCompletely:!t||H,leftOffset:C?d.k1:null,mainContainerHeader:A,mainContainerRef:q,setAfterHidden:R,setAfterMousedownActive:W,setAfterWidth:K,setBeforeMousedownActive:Q,setBeforeWidth:Y,children:[N&&(0,h.jsx)(m,{noPadding:U,children:N}),O]})})]}),I&&(0,h.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null==B?void 0:B(null)},children:(0,h.jsx)(s.Z,g(g({},I),{},{onClose:function(){return null==B?void 0:B(null)}}))})]})}var C=i.forwardRef(y)},93808:function(e,n,t){"use strict";t.d(n,{Z:function(){return O}});var r=t(77837),o=t(26304),i=t(62243),l=t(29385),s=t(80022),c=t(13692),u=t(93189),a=t(15544),d=t(82394),h=t(38860),f=t.n(h),m=t(82684),j=t(56663),p=t.n(j),x=t(40761),v=t(34661),b=t(36105),Z=t(50178),g=t(69419),y=t(28598),C=["auth"];function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function w(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.Z)(e);if(n){var o=(0,a.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,u.Z)(this,t)}}function O(e){return function(n){(0,c.Z)(a,n);var t,u=w(a);function a(){var e;(0,i.Z)(this,a);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e=u.call.apply(u,[this].concat(t)),(0,d.Z)((0,s.Z)(e),"state",{auth:new x.Z(e.props.token)}),e}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){this.setState({auth:new x.Z(this.props.token)})}},{key:"render",value:function(){var n=this.props,t=(n.auth,(0,o.Z)(n,C));return(0,y.jsx)(e,_({auth:this.state.auth},t))}}],[{key:"getInitialProps",value:(t=(0,r.Z)(f().mark((function n(t){var r,o,i,l,s,c,u,a,d;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=p()(t),o=(0,Z.ex)(t),i=o.id,l=r[v.Mv],s=r[b.qt],c=new x.Z(l),u=_(_({},t),{},{auth:c,currentGroupId:i,theme:s}),(0,Z.YB)(t)&&c.isExpired&&(console.log("OAuth token has expired."),a=_(_({},t.query),{},{redirect_url:t.asPath}),(0,g.nL)("/sign-in?".concat((0,g.uM)(a)),t.res)),!e.getInitialProps){n.next=12;break}return n.next=10,e.getInitialProps(u);case 10:return d=n.sent,n.abrupt("return",_(_({},d),{},{auth:c,currentGroupId:i,theme:s}));case 12:return n.abrupt("return",u);case 13:case"end":return n.stop()}}),n)}))),function(e){return t.apply(this,arguments)})}]),a}(m.Component)}},91769:function(e,n,t){"use strict";t.d(n,{f:function(){return v},h:function(){return p}});var r=t(82394),o=t(82684),i=t(34376),l=t(68562),s=t(72473),c=t(70515),u=t(69419),a=t(53808),d=t(28598);var h=function(e){var n=e.oauthResponse,t=(0,i.useRouter)(),r=(0,o.useMemo)((function(){return n||{}}),[n]),h=r.url,f=r.redirect_query_params,m=void 0===f?{}:f;return(0,d.jsx)(d.Fragment,{children:h&&(0,d.jsx)(l.ZP,{beforeElement:(0,d.jsx)(s.GoogleIcon,{size:2*c.iI}),bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(h).state;(0,a.t8)(e,m),t.push(h)},uuid:"SignForm/google",children:"Sign in with Google"})})};var f=function(e){var n=e.oauthResponse,t=(0,i.useRouter)(),r=(0,o.useMemo)((function(){return n||{}}),[n]),h=r.url,f=r.redirect_query_params,m=void 0===f?{}:f;return(0,d.jsx)(d.Fragment,{children:h&&(0,d.jsx)(l.ZP,{beforeElement:(0,d.jsx)(s.MicrosoftIcon,{size:2*c.iI}),bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(h).state;m&&(0,a.t8)(e,m),t.push(h)},uuid:"SignForm/active_directory",children:"Sign in with Microsoft"})})};var m=function(e){var n=e.oauthResponse,t=(0,i.useRouter)(),r=(0,o.useMemo)((function(){return n||{}}),[n]),s=r.url,c=r.redirect_query_params,h=void 0===c?{}:c;return(0,d.jsx)(d.Fragment,{children:s&&(0,d.jsx)(l.ZP,{bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(s).state;(0,a.t8)(e,h),t.push(s)},uuid:"SignForm/oidc_generic",children:"Sign in with OIDC"})})};var j,p,x=function(e){var n=e.oauthResponse,t=(0,i.useRouter)(),r=(0,o.useMemo)((function(){return n||{}}),[n]),s=r.url,c=r.redirect_query_params,h=void 0===c?{}:c;return(0,d.jsx)(d.Fragment,{children:s&&(0,d.jsx)(l.ZP,{bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(s).state;(0,a.t8)(e,h),t.push(s)},uuid:"SignForm/okta",children:"Sign in with Okta"})})};!function(e){e.ACTIVE_DIRECTORY="active_directory",e.AZURE_DEVOPS="azure_devops",e.BITBUCKET="bitbucket",e.GITHUB="github",e.GITLAB="gitlab",e.GOOGLE="google",e.OIDC_GENERIC="oidc_generic",e.OKTA="okta"}(p||(p={}));var v=(j={},(0,r.Z)(j,p.ACTIVE_DIRECTORY,f),(0,r.Z)(j,p.GOOGLE,h),(0,r.Z)(j,p.OIDC_GENERIC,m),(0,r.Z)(j,p.OKTA,x),j)},37520:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ve}});var r=t(77837),o=t(38860),i=t.n(o),l=t(93808),s=t(82394),c=t(75582),u=t(82684),a=t(83455),d=t(71180),h=t(15338),f=t(55485),m=t(85854),j=t(44085),p=t(38276),x=t(4190),v=t(30160),b=t(35576),Z=t(17488),g=t(12468),y=t(35686),C=t(72473),P="clone",_="delete",w="fetch",O="merge",k="pull",I="push",M="rebase",S="reset --hard",H=(0,s.Z)({},w,["prune"]),A="git_remote_name",E="git_repository_name",R={uuid:"Branches"},D={uuid:"Commit"},F={uuid:"Push & Pull Requests"},B={uuid:"Remote & Auth"},N=[B,R,D,F],U=t(70515),V=t(81728),T=t(72619),L=t(28598);var q=function(e){var n=e.actionRemoteName,t=e.branch,r=e.branches,o=e.fetchBranch,i=e.fetchBranches,l=e.remotes,s=e.setActionRemoteName,P=e.showError,w=(0,u.useState)(""),k=w[0],I=w[1],S=(0,u.useState)(null),H=S[0],A=S[1],E=(0,u.useState)(null),R=E[0],F=E[1],N=(0,u.useState)(null),q=N[0],G=N[1],z=(0,u.useState)(""),W=z[0],Q=z[1],K=(0,u.useMemo)((function(){return null==l?void 0:l.find((function(e){return e.name===n}))}),[n,l]),Y=(0,u.useMemo)((function(){return(null==r?void 0:r.concat((null==K?void 0:K.refs)||[]))||[]}),[r,K]),X=(0,a.Db)(y.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){o(),i(),Q("")},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}}),J=(0,c.Z)(X,2),$=J[0],ee=J[1].isLoading,ne=(0,a.Db)(y.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){o(),window.location.reload()},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}}),te=(0,c.Z)(ne,2),re=te[0],oe=te[1].isLoading,ie=(0,a.Db)(y.ZP.git_custom_branches.useUpdate(encodeURIComponent(null==t?void 0:t.name)),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){var n=e.git_custom_branch.progress;o(),I(""),A(""),F(n),G("")},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}}),le=(0,c.Z)(ie,2),se=le[0],ce=le[1].isLoading;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsxs)(m.Z,{children:["Branches",r?" (".concat(null==r?void 0:r.length,")"):""]}),(0,L.jsx)(p.Z,{mt:U.Mq,children:(0,L.jsxs)(f.ZP,{children:[(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,L.jsx)(j.Z,{beforeIcon:(0,L.jsx)(C.MultiShare,{}),beforeIconSize:1.5*U.iI,monospace:!0,onChange:function(e){return s(e.target.value)},placeholder:"Choose a remote",value:n||"",children:null==l?void 0:l.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,L.jsxs)(f.ZP,{alignItems:"center",children:[(0,L.jsx)(g.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,L.jsx)(j.Z,{beforeIcon:(0,L.jsx)(C.Branch,{muted:!1}),beforeIconSize:2*U.iI,monospace:!0,onChange:function(e){return re({git_custom_branch:{name:e.target.value,remote:n}})},value:null==t?void 0:t.name,children:(null==t?void 0:t.name)&&(null==Y?void 0:Y.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)})))})}),(0,L.jsx)(p.Z,{mr:U.cd}),oe&&(0,L.jsx)(x.Z,{inverted:!0})]})]})]})}),(0,L.jsx)(p.Z,{mt:U.Mq,children:(0,L.jsxs)(f.ZP,{alignItems:"center",children:[(0,L.jsx)(Z.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return Q(null==e||null===(n=e.target)||void 0===n?void 0:n.value)},value:W||""}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.Add,{size:2*U.iI}),disabled:!W,loading:ee,onClick:function(){$({git_custom_branch:{name:W}})},primary:!0,children:"Create new branch"})]})})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(m.Z,{children:"Actions"}),(0,L.jsxs)(p.Z,{mt:U.Mq,children:[(0,L.jsxs)(p.Z,{mb:U.Mq,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null==t?void 0:t.name)&&(0,L.jsx)(v.ZP,{monospace:!0,children:null==t?void 0:t.name})]}),(0,L.jsxs)(f.ZP,{alignItems:"center",children:[(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,L.jsx)(j.Z,{beforeIcon:(0,L.jsx)(C.Branch,{}),beforeIconSize:1.5*U.iI,monospace:!0,onChange:function(e){return G(e.target.value)},placeholder:"Choose a branch",value:q,children:null==Y?void 0:Y.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,L.jsxs)(j.Z,{onChange:function(e){return A(e.target.value)},placeholder:"Choose action",value:H||"",children:[(0,L.jsx)("option",{value:O,children:(0,V.vg)(O)}),(0,L.jsx)("option",{value:M,children:(0,V.vg)(M)}),(0,L.jsx)("option",{value:_,children:(0,V.vg)(_)})]})]})]}),H&&[O,M].includes(H)&&(0,L.jsxs)(p.Z,{mt:U.cd,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsxs)(v.ZP,{bold:!0,muted:!0,children:["Message for ",H]})}),(0,L.jsx)(b.Z,{monospace:!0,onChange:function(e){return I(e.target.value)},value:k||""})]}),(0,L.jsxs)(p.Z,{mt:U.cd,children:[(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.Lightning,{size:2*U.iI}),disabled:!H||!q,loading:ce,onClick:function(){(_!==H||"undefined"!=typeof location&&window.confirm("Are you sure you want to delete branch ".concat(q,"?")))&&se({git_custom_branch:{action_payload:{base_branch:q},action_type:H,message:k}})},primary:!0,children:H?(0,V.vg)(H):"Execute action"}),R&&(0,L.jsx)(p.Z,{mt:U.cd,children:(0,L.jsx)(v.ZP,{default:!0,monospace:!0,preWrap:!0,children:R})})]})]})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsx)(h.Z,{light:!0})}),(0,L.jsxs)(f.ZP,{children:[(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.PaginateArrowLeft,{}),linkProps:{href:"/version-control?tab=".concat(encodeURIComponent(B.uuid))},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:B.uuid}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)(d.ZP,{afterIcon:(0,L.jsx)(C.PaginateArrowRight,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",D.uuid]})]})]})]})},G=t(90299),z=t(32013),W=t(98777),Q=t(48670),K=t(75499);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var J={base_branch:null,body:null,compare_branch:null,repository:null,title:null};var $=function(e){var n=e.actionRemoteName,t=e.branch,r=e.branches,o=e.fetchBranch,i=e.loading,l=e.remotes,s=e.repositories,g=e.repositoryName,P=e.setActionRemoteName,_=e.setRepositoryName,w=e.showError,O=(0,u.useState)((null==t?void 0:t.name)||""),k=O[0],M=O[1],S=(0,u.useState)(null),H=S[0],A=S[1],E=(0,u.useState)(null),R=E[0],F=E[1],B=(0,u.useState)(J),N=B[0],q=B[1],G=(0,a.Db)(y.ZP.git_custom_branches.useUpdate(encodeURIComponent(null==t?void 0:t.name)),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){var n=e.git_custom_branch,t=n.error,r=n.progress;t?(A(t),F(null)):(o(),A(null),F(r))},onErrorCallback:function(e,n){return w({errors:n,response:e})}})}}),Y=(0,c.Z)(G,2),$=Y[0],ee=Y[1].isLoading,ne=(0,u.useMemo)((function(){var e;return null==s||null===(e=s.find((function(e){return e.name===g})))||void 0===e?void 0:e.url}),[s,g]),te=y.ZP.pull_requests.list({remote_url:ne,repository:g},{},{pauseFetch:!g}),re=te.data,oe=te.mutate,ie=(0,u.useMemo)((function(){return(null==re?void 0:re.pull_requests)||[]}),[re]),le=(0,u.useMemo)((function(){return(0,L.jsx)(K.Z,{columnFlex:[null,null,null,null],columns:[{uuid:"Title"},{uuid:"Author"},{uuid:"Created"},{uuid:"Last modified"}],onClickRow:function(e){var n,t=null==ie||null===(n=ie[e])||void 0===n?void 0:n.url;t&&window.open(t,"_blank")},rows:null==ie?void 0:ie.map((function(e){var n=e.created_at,t=e.last_modified,r=e.title,o=e.url,i=e.user;return[(0,L.jsx)(Q.Z,{default:!0,href:o,monospace:!0,openNewWindow:!0,small:!0,children:r},"title"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:i},"user"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:n},"createdAt"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:t||"-"},"lastModified")]})),uuid:"pull-requests"})}),[ie]),se=y.ZP.git_custom_branches.list({remote_url:ne,repository:g},{},{pauseFetch:!g}).data,ce=(0,u.useMemo)((function(){return(null==se?void 0:se.git_custom_branches)||[]}),[se]);(0,u.useEffect)((function(){null!=N&&N.compare_branch||null==ce||!ce.find((function(e){return e.name===(null==t?void 0:t.name)}))||q((function(e){return X(X({},e),{},{compare_branch:null==t?void 0:t.name})}))}),[t,ce,N]);var ue=(0,a.Db)(y.ZP.pull_requests.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){oe(),q(J)},onErrorCallback:function(e,n){return w({errors:n,response:e})}})}}),ae=(0,c.Z)(ue,2),de=ae[0],he=ae[1].isLoading;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(m.Z,{children:(0,V.vg)(I)})}),(0,L.jsxs)(p.Z,{mt:U.Mq,children:[(0,L.jsxs)(f.ZP,{children:[(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Remote"})}),i&&(0,L.jsx)(x.Z,{inverted:!0}),!i&&(0,L.jsx)(j.Z,{beforeIcon:(0,L.jsx)(C.MultiShare,{}),beforeIconSize:1.5*U.iI,monospace:!0,onChange:function(e){return P(e.target.value)},placeholder:"Choose remote",value:n||"",children:null==l?void 0:l.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,L.jsxs)(j.Z,{beforeIcon:(0,L.jsx)(C.Branch,{}),beforeIconSize:1.5*U.iI,monospace:!0,onChange:function(e){return M(e.target.value)},placeholder:"Choose branch",value:k||"",children:[(0,L.jsx)("option",{value:""}),null==r?void 0:r.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,L.jsx)(p.Z,{mt:U.cd,children:(0,L.jsxs)(d.ZP,{beforeIcon:(0,L.jsx)(C.Lightning,{size:2*U.iI}),disabled:!n||!k,loading:ee,onClick:function(){F(null),$({git_custom_branch:{action_payload:{branch:k,remote:n},action_type:I}})},primary:!0,children:[(0,V.vg)(I)," ",n," ",n&&k]})}),(R||H)&&(0,L.jsx)(p.Z,{mt:U.cd,children:(0,L.jsx)(v.ZP,{danger:!!H,default:!!R,monospace:!0,preWrap:!0,children:R||H})})]})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(m.Z,{children:"Create pull request"})}),(0,L.jsxs)(p.Z,{mt:U.Mq,children:[i&&(0,L.jsx)(x.Z,{inverted:!0}),!i&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(f.ZP,{children:[(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Repository"})}),(0,L.jsx)(j.Z,{monospace:!0,onChange:function(e){return _(e.target.value)},placeholder:"Choose repository",value:g||"",children:null==s?void 0:s.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Base branch"})}),g&&!se&&(0,L.jsx)(x.Z,{inverted:!0}),(!g||se)&&(0,L.jsx)(j.Z,{beforeIcon:(0,L.jsx)(C.Branch,{}),beforeIconSize:1.5*U.iI,disabled:!g,monospace:!0,onChange:function(e){return q((function(n){return X(X({},n),{},{base_branch:e.target.value})}))},placeholder:"Choose branch",value:(null==N?void 0:N.base_branch)||"",children:null==ce?void 0:ce.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)("div",{children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),g&&!se&&(0,L.jsx)(x.Z,{inverted:!0}),(!g||se||(null==N?void 0:N.compare_branch))&&(0,L.jsxs)(j.Z,{beforeIcon:(0,L.jsx)(C.Branch,{}),beforeIconSize:1.5*U.iI,disabled:!g,monospace:!0,onChange:function(e){return q((function(n){return X(X({},n),{},{compare_branch:e.target.value})}))},placeholder:"Choose branch",value:(null==N?void 0:N.compare_branch)||"",children:[!(null!=ce&&ce.length)&&(null==N?void 0:N.compare_branch)&&(0,L.jsx)("option",{value:null==N?void 0:N.compare_branch,children:null==N?void 0:N.compare_branch}),null==ce?void 0:ce.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsx)(Z.Z,{label:"Title",monospace:!0,onChange:function(e){return q((function(n){return X(X({},n),{},{title:e.target.value})}))},value:(null==N?void 0:N.title)||""})}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsx)(b.Z,{label:"Description",monospace:!0,onChange:function(e){return q((function(n){return X(X({},n),{},{body:e.target.value})}))},value:(null==N?void 0:N.body)||""})}),(0,L.jsx)(p.Z,{mt:U.cd,children:(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.Lightning,{size:2*U.iI}),disabled:!(g&&null!=N&&N.title&&null!=N&&N.base_branch&&null!=N&&N.compare_branch),loading:he,onClick:function(){de({pull_request:X(X({},N),{},{remote_url:ne,repository:g})})},primary:!0,children:"Create new pull request"})})]})]}),(0,L.jsx)(p.Z,{mt:U.Mq,children:(0,L.jsx)(z.Z,{visibleMapping:{0:!g},children:(0,L.jsxs)(W.Z,{noPaddingContent:!0,title:re?"Pull requests (".concat(null==ie?void 0:ie.length,")"):"Pull requests",children:[!g&&(0,L.jsx)(p.Z,{p:U.cd,children:(0,L.jsx)(v.ZP,{muted:!0,children:"Please select a repository to view open pull requests."})}),g&&(0,L.jsxs)(L.Fragment,{children:[!re&&(0,L.jsx)(p.Z,{p:U.cd,children:(0,L.jsx)(x.Z,{inverted:!0})}),re&&le]})]})})})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsx)(h.Z,{light:!0})}),(0,L.jsx)(f.ZP,{children:(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.PaginateArrowLeft,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:D.uuid})})]})]})},ee=t(94629),ne=t(78650),te=t(70652),re=t(97618),oe=t(9518),ie=oe.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*U.iI),le=t(42122);function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ue,ae=function(e){var n=e.branch,t=e.fetchBranch,r=e.modifiedFiles,o=e.setSelectedFilePath,i=e.showError,l=e.stagedFiles,s=e.untrackedFiles,j=(0,u.useRef)(null),Z=(0,u.useState)(""),g=Z[0],P=Z[1],_=(0,u.useState)({}),w=_[0],O=_[1],k=(0,u.useState)({}),I=k[0],M=k[1],S=(0,u.useMemo)((function(){return Object.keys(r).concat(Object.keys(s)).sort()}),[r,s]),H=(0,u.useMemo)((function(){return Object.keys(l||{})}),[l]),A=(0,u.useMemo)((function(){return H.length}),[H]),E=(0,u.useMemo)((function(){return Object.keys(w).length===(null==S?void 0:S.length)}),[w,S]),D=(0,u.useMemo)((function(){return Object.keys(I).length===(null==H?void 0:H.length)}),[I,H]),B=(0,u.useMemo)((function(){return{onErrorCallback:function(e,n){return i({errors:n,response:e})}}}),[i]),N=(0,u.useMemo)((function(){return{onSuccess:function(e){return(0,T.wD)(e,ce({callback:function(){t(),O({})}},B))}}}),[t,B]),q=(0,u.useMemo)((function(){return y.ZP.git_custom_branches.useUpdate(null==n?void 0:n.name)}),[n]),G=(0,a.Db)(q,N),Y=(0,c.Z)(G,2),X=Y[0],J=Y[1].isLoading,$=(0,a.Db)(q,N),ee=(0,c.Z)($,2),ne=ee[0],oe=ee[1].isLoading,se=(0,a.Db)(q,{onSuccess:function(e){return(0,T.wD)(e,ce({callback:function(){t(),M({})}},B))}}),ue=(0,c.Z)(se,2),ae=ue[0],de=ue[1].isLoading,he=(0,u.useCallback)((function(e,n,t,r,o){var i=(null==e?void 0:e.length)>=1;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Q.Z,{block:!0,noHoverUnderline:!0,onClick:function(){t(o?{}:r)},preventDefault:!0,children:(0,L.jsxs)(f.ZP,{alignItems:"center",flexDirection:"row",children:[(0,L.jsx)(te.Z,{checked:i&&o,disabled:!i}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(v.ZP,{bold:!0,children:i&&o?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,L.jsx)(ie,{children:(0,L.jsx)(Q.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return t((function(n){var t=ce({},n);return!(null!=t&&t[e])?t[e]=!0:delete t[e],t}))},preventDefault:!0,children:(0,L.jsxs)(f.ZP,{alignItems:"center",flexDirection:"row",children:[(0,L.jsx)(te.Z,{checked:!(null==n||!n[e])}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),fe=(0,u.useMemo)((function(){return(0,le.Qr)(w)}),[w]),me=y.ZP.git_custom_branches.detail("with_logs",{_format:"with_logs"}),je=me.data,pe=me.mutate,xe=(0,u.useMemo)((function(){var e;return(null==je||null===(e=je.git_custom_branch)||void 0===e?void 0:e.logs)||[]}),[je]),ve=(0,a.Db)(y.ZP.git_custom_branches.useUpdate(null==n?void 0:n.name),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){pe(),t(),P("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),be=(0,c.Z)(ve,2),Ze=be[0],ge=be[1].isLoading,ye=(0,u.useMemo)((function(){return(0,L.jsx)(K.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:xe.map((function(e){var n=e.author,t=e.date,r=e.message;return[(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:null==n?void 0:n.name},"author"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:t},"date"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:r},"message")]})),uuid:"git-branch-logs"})}),[xe]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsxs)(f.ZP,{children:[(0,L.jsxs)(re.Z,{flex:1,flexDirection:"column",children:[(0,L.jsxs)(m.Z,{children:["Not staged ",(null==S?void 0:S.length)>=1&&"(".concat(null==S?void 0:S.length,")")]}),(0,L.jsx)(p.Z,{my:U.cd,children:(0,L.jsx)(h.Z,{light:!0})}),(0,L.jsx)(p.Z,{mb:U.cd,children:(0,L.jsxs)(f.ZP,{flexDirection:"row",children:[(0,L.jsx)(d.ZP,{compact:!0,disabled:fe||de||oe,loading:J,onClick:function(){X({git_custom_branch:{action_type:"add",files:Object.keys(w)}}).then((function(e){var n,t=e.data;null!=t&&t.git_custom_branch&&(null==j||null===(n=j.current)||void 0===n||n.focus())}))},primary:!0,children:"Add files"}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(d.ZP,{compact:!0,disabled:fe||J||de,loading:oe,noBackground:!0,onClick:function(){"undefined"!=typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&ne({git_custom_branch:{action_type:"checkout",files:Object.keys(w)}})},children:"Checkout files"})]})}),he(S,w,O,ce(ce({},r),s),E)]}),(0,L.jsx)(p.Z,{mr:U.cd}),(0,L.jsxs)(re.Z,{flex:1,flexDirection:"column",children:[(0,L.jsxs)(m.Z,{children:["Staged files ",(null==H?void 0:H.length)>=1&&"(".concat(null==H?void 0:H.length,")")]}),(0,L.jsx)(p.Z,{my:U.cd,children:(0,L.jsx)(h.Z,{light:!0})}),(0,L.jsx)(p.Z,{mb:U.cd,children:(0,L.jsx)(f.ZP,{flexDirection:"row",children:(0,L.jsx)(d.ZP,{compact:!0,disabled:(0,le.Qr)(I)||J||oe,loading:de,onClick:function(){ae({git_custom_branch:{action_type:"reset",files:Object.keys(I)}})},secondary:!0,children:"Reset files"})})}),he(H,I,M,l,D)]})]})}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(m.Z,{children:"Commit"})}),(0,L.jsx)(p.Z,{mb:U.cd,children:(0,L.jsx)(z.Z,{children:(0,L.jsx)(W.Z,{noPaddingContent:!0,title:A>=1?"Staged files (".concat(A,")"):"No staged files",children:null==H?void 0:H.map((function(e){return(0,L.jsx)(p.Z,{my:1,px:U.cd,children:(0,L.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,L.jsx)(Q.Z,{default:!0,monospace:!0,onClick:function(){return o((function(n){return n===e?null:e}))},warning:null==r?void 0:r[e],children:e}),(0,L.jsx)(p.Z,{mr:1}),(null==r?void 0:r[e])&&(0,L.jsx)(v.ZP,{warning:!0,children:"Modified after staging"})]})},e)}))})})}),(0,L.jsx)(b.Z,{label:"Commit message",monospace:!0,onChange:function(e){return P(e.target.value)},ref:j,value:g||""}),(0,L.jsx)(p.Z,{mt:U.cd,children:(0,L.jsxs)(f.ZP,{alignItems:"center",children:[(0,L.jsxs)(d.ZP,{disabled:0===A||!((null==g?void 0:g.length)>=1),loading:ge,onClick:function(){Ze({git_custom_branch:{action_type:"commit",message:g}})},primary:!0,children:["Commit ",(0,V._6)("file",A,!0)," with message"]}),0===A&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(v.ZP,{danger:!0,small:!0,children:"Please stage at least 1 file before committing."})]})]})})]}),(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsx)(z.Z,{children:(0,L.jsxs)(W.Z,{noPaddingContent:!0,title:"Logs",children:[!je&&(0,L.jsx)(p.Z,{p:U.cd,children:(0,L.jsx)(x.Z,{inverted:!0})}),je&&ye]})})}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsx)(h.Z,{light:!0})}),(0,L.jsxs)(f.ZP,{children:[(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.PaginateArrowLeft,{}),linkProps:{href:"/version-control?tab=".concat(R.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:R.uuid}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)(d.ZP,{afterIcon:(0,L.jsx)(C.PaginateArrowRight,{}),linkProps:fe?{href:"/version-control?tab=".concat(encodeURIComponent(F.uuid))}:null,noHoverUnderline:!0,primary:fe,sameColorAsText:!0,secondary:!fe,children:["Next: ",F.uuid]})]})]})]})},de=t(23531),he=t(12691),fe=t.n(he),me=t(34376),je=t(63403),pe=oe.default.svg.withConfig({displayName:"BitbucketWithText__SVGStyle",componentId:"sc-wdje9z-0"})([""]),xe=function(e){var n=e.fill,t=e.opacity,r=e.size,o=void 0===r?je.C:r,i=e.style,l=e.viewBox,s=void 0===l?"0 0 299 42":l;return(0,L.jsxs)(pe,{fill:n,height:o,opacity:t,style:i,viewBox:s,width:o,children:[(0,L.jsx)("path",{d:"M63.3372 2.9978H79.5353C87.4335 2.9978 91.2488 6.77741 91.2488 12.8379C91.2488 17.3994 89.1068 20.2016 84.756 21.179C90.4455 22.0914 93.3237 25.1542 93.3237 30.4978C93.3237 36.4931 89.1737 40.6637 80.4724 40.6637H63.3372V2.9978ZM68.625 19.0939H78.799C83.8191 19.0939 85.894 16.8782 85.894 13.2289C85.894 9.57954 83.6852 7.82008 78.799 7.82008H68.625V19.0939ZM68.625 23.7206V35.4504H80.673C85.7601 35.4504 88.036 33.6909 88.036 29.9113C88.036 25.871 85.827 23.7206 80.5393 23.7206H68.625Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M101.958 0.977783C104.033 0.977783 105.506 2.21592 105.506 4.43157C105.506 6.58205 104.033 7.88536 101.958 7.88536C99.8833 7.88536 98.4106 6.6472 98.4106 4.43157C98.4106 2.21592 99.8833 0.977783 101.958 0.977783ZM99.3478 11.9907H104.435V40.6638H99.3478V11.9907Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M123.779 36.0376C124.984 36.0376 126.055 35.7769 126.992 35.6466V40.4037C126.121 40.6643 125.117 40.8599 123.578 40.8599C117.286 40.8599 114.207 37.2756 114.207 31.9321V16.5529H109.455V11.9912H114.207V5.93091H119.16V11.9912H126.992V16.5529H119.16V31.7367C119.093 34.2781 120.633 36.0376 123.779 36.0376Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M138.504 35.5806V40.5982H133.417V0H138.504V17.1386C140.378 13.359 143.926 11.4039 148.477 11.4039C156.309 11.4039 160.258 17.8554 160.258 26.3271C160.258 34.4076 156.108 41.25 147.875 41.25C143.524 41.25 140.244 39.3602 138.504 35.5806ZM147.072 16.0309C142.52 16.0309 138.504 18.8329 138.504 25.2191V27.5001C138.504 33.8863 142.186 36.6883 146.536 36.6883C152.226 36.6883 155.171 33.0392 155.171 26.3921C155.171 19.4194 152.36 16.0309 147.072 16.0309Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M165.546 11.991H170.633V29.3252C170.633 34.4733 172.775 36.7541 177.594 36.7541C182.279 36.7541 185.559 33.6913 185.559 27.8915V11.991H190.647V40.664H185.559V35.972C183.685 39.3607 180.204 41.2505 176.255 41.2505C169.495 41.2505 165.613 36.6888 165.613 28.8039V11.991H165.546Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M219.027 39.8814C217.287 40.7938 214.542 41.1847 211.864 41.1847C201.355 41.1847 196.469 34.9941 196.469 26.1967C196.469 17.5296 201.355 11.3389 211.864 11.3389C214.542 11.3389 216.55 11.6647 218.892 12.7072V17.2689C217.019 16.4218 215.011 15.9006 212.266 15.9006C204.636 15.9006 201.49 20.5924 201.49 26.1967C201.49 31.8009 204.702 36.4929 212.401 36.4929C215.412 36.4929 217.287 36.1018 219.092 35.4502V39.8814H219.027Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M224.783 40.6635V0H229.87V25.4147L242.52 11.9904H249.147L235.29 26.0664L249.681 40.6635H242.789L229.802 27.2392V40.6635H224.783Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M266.483 41.2506C255.437 41.2506 250.619 35.0599 250.619 26.2624C250.619 17.5954 255.572 11.4045 264.541 11.4045C273.644 11.4045 277.259 17.5302 277.259 26.2624V28.4781H255.773C256.51 33.3655 259.722 36.4935 266.684 36.4935C270.096 36.4935 272.974 35.8418 275.652 34.9296V39.4911C273.175 40.7944 269.494 41.2506 266.483 41.2506ZM255.706 24.2423H272.172C271.904 18.8987 269.427 15.9012 264.34 15.9012C258.919 15.9012 256.242 19.2897 255.706 24.2423Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M294.929 36.0376C296.134 36.0376 297.205 35.7769 298.142 35.6466V40.4037C297.272 40.6643 296.267 40.8599 294.728 40.8599C288.437 40.8599 285.359 37.2756 285.359 31.9321V16.5529H280.606V11.9912H285.359V5.93091H290.311V11.9912H298.142V16.5529H290.311V31.7367C290.245 34.2781 291.784 36.0376 294.929 36.0376Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M1.36497 4.1062C0.556341 4.1062 -0.117513 4.82301 0.0172582 5.605L5.74501 39.1654C5.87979 40.0127 6.62103 40.6642 7.56442 40.6642H34.9903C35.6641 40.6642 36.2032 40.208 36.338 39.5565L42.0658 5.605C42.2006 4.82301 41.594 4.1062 40.718 4.1062H1.36497ZM25.4889 28.3479H16.7288L14.3704 16.3573H27.6453L25.4889 28.3479Z",fill:n||"white"}),(0,L.jsx)("path",{d:"M40.2462 16.3572H27.5775L25.4886 28.3478H16.7286L6.3512 40.2079C6.3512 40.2079 6.82289 40.6641 7.56413 40.6641H34.99C35.6639 40.6641 36.2029 40.2079 36.3377 39.5562L40.2462 16.3572Z",fill:"url(#paint0_linear_13549_1163)"}),(0,L.jsx)("defs",{children:(0,L.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_13549_1163",x1:"43.1513",x2:"22.7826",y1:"19.7256",y2:"36.1667",children:[(0,L.jsx)("stop",{offset:"0.176",stopColor:"#0052CC"}),(0,L.jsx)("stop",{offset:"1",stopColor:"#2684FF"})]})})]})},ve=t(91769),be=t(69419),Ze=t(53808),ge=(ue={},(0,s.Z)(ue,ve.h.AZURE_DEVOPS,C.DevOpsWithText),(0,s.Z)(ue,ve.h.BITBUCKET,xe),(0,s.Z)(ue,ve.h.GITHUB,C.GitHubWithTextIcon),(0,s.Z)(ue,ve.h.GITLAB,C.GitLabWithTextIcon),ue);function ye(e){var n=e.isLoadingCreateOauth,t=e.oauth,r=e.provider,o=e.showError,i=(0,me.useRouter)(),l=(0,a.Db)(y.ZP.oauths.useUpdate(r),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){return window.location.href=window.location.href.split("?")[0]},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),s=(0,c.Z)(l,2),u=s[0],h=s[1].isLoading,m=ge[r];return(0,L.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,L.jsx)(re.Z,{children:(0,L.jsx)(m,{size:12*U.iI})}),(0,L.jsx)(re.Z,{alignItems:"center",children:null!=t&&t.authenticated?(0,L.jsx)(d.ZP,{loading:h,onClick:function(){return u({oauth:{action_type:"reset"}})},warning:!0,children:"Reset"}):(0,L.jsx)(d.ZP,{loading:n,onClick:function(){var e=null==t?void 0:t.url,n=(0,be.iV)(e).state;(0,Ze.t8)(n,(null==t?void 0:t.redirect_query_params)||{}),i.push(e)},primary:!0,children:"Authenticate"})})]})}var Ce=function(e){var n=e.branch,t=e.isLoadingCreateOauth,r=e.showError,o=y.ZP.oauths.list({type:"git",redirect_uri:encodeURIComponent(window.location.href)}),i=o.data,l=(o.mutate,y.ZP.oauths.detail(ve.h.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)})),s=l.data,a=(l.mutate,(0,u.useMemo)((function(){return(null==s?void 0:s.oauth)||{}}),[s])),f=(0,u.useMemo)((function(){return null==n?void 0:n.access_token_exists}),[n]),j=(0,u.useMemo)((function(){var e,n=(null==i||null===(e=i.oauths)||void 0===e?void 0:e.reduce((function(e,n){return e[n.provider]=n,e}),{}))||{};return a&&(n[ve.h.GITHUB]=a),n}),[i,a]),x=(0,u.useMemo)((function(){return Object.values(j).some((function(e){return null==e?void 0:e.authenticated}))}),[j]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(m.Z,{children:"Authentication"}),(0,L.jsxs)(p.Z,{mt:U.Mq,children:[f&&!x&&(0,L.jsxs)(p.Z,{mb:2,children:[(0,L.jsx)(d.ZP,{disabled:!0,children:"Using access token from Git Settings"}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsx)(v.ZP,{muted:!0,children:"Some features may not work unless you authenticate with a Git client."})})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:U.Mq,children:(0,L.jsx)(v.ZP,{muted:!0,children:"Authenticating with the apps below will allow you to easily pull, push, and create pull requests."})}),(0,L.jsxs)(p.Z,{mb:U.Mq,style:{maxWidth:"600px"},children:[(0,L.jsx)(h.Z,{muted:!0}),Object.entries(j||{}).map((function(e){var n=(0,c.Z)(e,2),o=n[0],i=n[1];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ye,{isLoadingCreateOauth:t,oauth:i,provider:o,showError:r},o),(0,L.jsx)(h.Z,{muted:!0})]})}))]})]})]})]})},Pe=t(77417);var _e=function(e){var n,t,r,o,i,l=e.actionRemoteName,s=e.branch,b=e.fetchBranch,g=e.loading,_=e.remotes,O=e.setActionRemoteName,I=e.showError,M=(0,me.useRouter)(),A=(0,Pe.Z)().project,E=(0,u.useRef)(null),D=(0,u.useState)(null),F=D[0],B=D[1],N=(0,u.useState)(null),q=N[0],G=N[1],Y=(0,u.useState)(null),X=Y[0],J=Y[1],$=(0,u.useState)(null),ee=$[0],ne=$[1],te=(0,u.useState)(null),oe=te[0],ie=te[1],le=(0,u.useState)(!1),se=le[0],ce=le[1],ue=(0,u.useState)(null),ae=ue[0],de=ue[1],he=(0,u.useState)(""),je=he[0],pe=he[1],xe=(0,u.useState)(""),Ze=xe[0],ge=xe[1],ye=(0,u.useState)(null),_e=ye[0],we=ye[1],Oe=(0,u.useMemo)((function(){return!(null==s||!s.name)}),[s]);(0,u.useEffect)((function(){var e,n;!_e&&(null!=s&&null!==(e=s.sync_config)&&void 0!==e&&e.repo_path||null!=A&&A.repo_path)&&we((null==s||null===(n=s.sync_config)||void 0===n?void 0:n.repo_path)||(null==A?void 0:A.repo_path))}),[s,A,_e]);var ke=(0,u.useMemo)((function(){var e,n;return null==_||null===(e=_.find((function(e){return e.name===l})))||void 0===e||null===(n=e.refs)||void 0===n?void 0:n.map((function(e){return{name:e.name.substring(l.length+1)}}))}),[l,_]),Ie=(0,a.Db)(y.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){b(),ce(!1)},onErrorCallback:function(e,n){return I({errors:n,response:e})}})}}),Me=(0,c.Z)(Ie,2),Se=Me[0],He=Me[1].isLoading,Ae=(0,a.Db)(y.ZP.git_custom_branches.useUpdate(encodeURIComponent(null==s?void 0:s.name)),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(e){var n=e.git_custom_branch,t=n.error,r=n.progress;t?(G(t),ne(null)):(b(),B(null),G(null),J(null),ne(r))},onErrorCallback:function(e,n){return I({errors:n,response:e})}})}}),Ee=(0,c.Z)(Ae,2),Re=Ee[0],De=Ee[1].isLoading,Fe=(0,a.Db)(y.ZP.git_custom_branches.useUpdate(encodeURIComponent(null==s?void 0:s.name)),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){b(),pe(""),ge("")},onErrorCallback:function(e,n){return I({errors:n,response:e})}})}}),Be=(0,c.Z)(Fe,2),Ne=Be[0],Ue=Be[1].isLoading,Ve=(0,a.Db)(y.ZP.git_custom_branches.useUpdate(encodeURIComponent(null==s?void 0:s.name)),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){b(),de(null)},onErrorCallback:function(e,n){de(null),I({errors:n,response:e})}})}}),Te=(0,c.Z)(Ve,2),Le=Te[0],qe=Te[1].isLoading,Ge=(0,a.Db)(y.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,T.wD)(e,{callback:function(){return window.location.href="".concat(M.basePath,"/version-control")},onErrorCallback:function(e,n){I({errors:n,response:e})}})}}),ze=(0,c.Z)(Ge,2),We=ze[0],Qe=ze[1].isLoading,Ke=(0,be.iV)()||{},Ye=Ke.access_token,Xe=Ke.provider,Je=Ke.refresh_token,$e=Ke.expires_in;(0,u.useEffect)((function(){Ye&&We({oauth:{expires_in:$e,provider:Xe||ve.h.GITHUB,refresh_token:Je,token:Ye}})}),[Ye,We,$e,Xe,Je]);var en=(0,u.useMemo)((function(){return null==_?void 0:_.map((function(e){var n=e.name,t=e.refs,r=e.urls;return(0,L.jsxs)(p.Z,{mt:U.Mq,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsxs)(f.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,L.jsxs)(re.Z,{alignItems:"center",children:[(0,L.jsx)(v.ZP,{bold:!0,children:n}),(0,L.jsx)(p.Z,{mx:1,children:(0,L.jsx)(C.ChevronRight,{muted:!0})}),null==r?void 0:r.map((function(e){return(0,L.jsx)(p.Z,{mr:1,children:(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(d.ZP,{compact:!0,disabled:qe&&ae!==n,iconOnly:!0,loading:qe&&ae===n,noBackground:!0,onClick:function(){"undefined"!=typeof location&&window.confirm("Are you sure you want to remove remote ".concat(n,"?"))&&(de(n),Le({git_custom_branch:{action_type:"remove_remote",action_payload:{name:n}}}).then((function(){l===n&&O(null)})))},small:!0,title:"Remote remote ".concat(n),children:(0,L.jsx)(C.Trash,{})})]})}),(0,L.jsx)(z.Z,{children:(0,L.jsxs)(W.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null==t?void 0:t.length,")"),children:[0===(null==t?void 0:t.length)&&(0,L.jsx)(p.Z,{p:U.cd,children:(0,L.jsx)(v.ZP,{muted:!0,children:"This remote has no refs."})}),(null==t?void 0:t.length)>=1&&(0,L.jsx)(K.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:t.map((function(e){var n,t=e.commit,r=e.name;return[(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:r},"ref-name"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:null==t||null===(n=t.author)||void 0===n?void 0:n.name},"author"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:null==t?void 0:t.date},"date"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,small:!0,children:null==t?void 0:t.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,L.jsx)(p.Z,{mt:U.Mq,children:(0,L.jsx)(h.Z,{light:!0})})]},n)}))}),[qe,ae,_,Le]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(m.Z,{children:"Setup"}),(0,L.jsxs)(p.Z,{mt:U.Mq,children:[(0,L.jsxs)(p.Z,{mb:1,children:[(0,L.jsx)(v.ZP,{bold:!0,large:!0,children:Oe?"Git init directory":"Initialize Git directory"}),!Oe&&(0,L.jsxs)(v.ZP,{muted:!0,children:["Enter the directory you want to initialize git in.",(0,L.jsx)("br",{}),"The current project directoy is filled in for you. If you want to use that, click the save button."]}),Oe&&(0,L.jsxs)(v.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,L.jsx)("br",{}),"If git hasn’t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,L.jsxs)(f.ZP,{alignItems:"center",children:[(0,L.jsx)(Z.Z,{disabled:Oe&&!se,fullWidth:!0,label:"Git directory",maxWidth:400,monospace:!0,onChange:function(e){return we(e.target.value)},ref:E,value:_e||""}),(0,L.jsx)(p.Z,{mr:1}),(!Oe||se)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.ZP,{compact:!0,disabled:!Oe&&!_e,loading:He,onClick:function(){Se({sync:{repo_path:_e}})},primary:!0,small:!0,children:"Save"}),Oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(Q.Z,{onClick:function(){return ce(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]})]}),Oe&&!se&&(0,L.jsx)(Q.Z,{onClick:function(){ce(!0),setTimeout((function(){var e;return null==E||null===(e=E.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsx)(Ce,{branch:s,isLoadingCreateOauth:Qe,showError:I})}),Oe&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsxs)(m.Z,{children:["Remotes",!g&&_?" (".concat(null==_?void 0:_.length,")"):""]}),g&&(0,L.jsx)(p.Z,{mt:U.Mq,children:(0,L.jsx)(x.Z,{inverted:!0})}),!g&&en,(0,L.jsx)(p.Z,{mt:U.Mq,children:(0,L.jsxs)(f.ZP,{alignItems:"flex-start",children:[(0,L.jsx)(Z.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return pe(null==e||null===(n=e.target)||void 0===n?void 0:n.value)},value:je||""}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsxs)(f.ZP,{flexDirection:"column",children:[(0,L.jsx)(Z.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return ge(null==e||null===(n=e.target)||void 0===n?void 0:n.value)},value:Ze||""}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsxs)(v.ZP,{muted:!0,small:!0,children:["Use the https URL if you",(0,L.jsx)("br",{}),"authenticated with GitHub above."]})})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.Add,{size:2*U.iI}),disabled:!je||!Ze,loading:Ue,onClick:function(){Ne({git_custom_branch:{action_type:"add_remote",action_payload:{name:je,url:Ze}}})},primary:!0,children:"Create new remote"})]})})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(m.Z,{children:"Actions"}),(0,L.jsxs)(p.Z,{mt:U.Mq,children:[(0,L.jsxs)(p.Z,{mb:U.Mq,children:[(0,L.jsx)(p.Z,{mb:1,children:(0,L.jsx)(v.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null==s?void 0:s.name)&&(0,L.jsxs)(f.ZP,{alignItems:"center",children:[(0,L.jsx)(v.ZP,{monospace:!0,children:null==s?void 0:s.name}),(0,L.jsx)(p.Z,{mr:U.cd}),(0,L.jsx)(fe(),{href:"/version-control?tab=".concat(R.uuid),passHref:!0,children:(0,L.jsx)(Q.Z,{small:!0,children:"Switch branch"})})]})]}),(0,L.jsxs)(f.ZP,{children:[(0,L.jsxs)(j.Z,{onChange:function(e){return J(e.target.value)},placeholder:"Action",value:X||"",children:[(0,L.jsx)("option",{value:w,children:(0,V.vg)(w)}),(0,L.jsx)("option",{value:k,children:(0,V.vg)(k)}),(0,L.jsx)("option",{value:"reset",children:(0,V.vg)(S)}),(0,L.jsx)("option",{value:P,children:(0,V.vg)(P)})]}),(0,L.jsx)(p.Z,{mr:1}),(0,L.jsx)(j.Z,{beforeIcon:(0,L.jsx)(C.MultiShare,{}),beforeIconSize:1.5*U.iI,monospace:!0,onChange:function(e){return O(e.target.value)},placeholder:"Remote",value:l||"",children:null==_?void 0:_.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))}),[k,S].includes(X)&&(0,L.jsx)(p.Z,{ml:1,children:(0,L.jsxs)(j.Z,{beforeIcon:(0,L.jsx)(C.Branch,{}),beforeIconSize:1.5*U.iI,monospace:!0,onChange:function(e){return B(e.target.value)},value:F||"",children:[(0,L.jsx)("option",{value:"",children:"All branches"}),null==ke?void 0:ke.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))]})}),H[X]&&(0,L.jsx)(p.Z,{ml:1,children:(0,L.jsx)(j.Z,{label:"Additional argument",monospace:!0,onChange:function(e){return ie(e.target.value)},value:oe||"",children:null===(n=H[X])||void 0===n?void 0:n.map((function(e){return(0,L.jsx)("option",{value:e,children:(0,V.vg)(e)},e)}))})})]}),P===X&&(0,L.jsxs)(p.Z,{mt:U.cd,children:[(0,L.jsxs)(v.ZP,{muted:!0,small:!0,children:["Cloning a branch will copy all the files and folders from the remote repository and put them into the Git directory configured above:",(0,L.jsx)("br",{}),(0,L.jsx)(v.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null==s||null===(t=s.sync_config)||void 0===t?void 0:t.repo_path}),"."]}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsx)(v.ZP,{muted:!0,small:!0,children:"Cloning won’t automatically create a folder that is named after the remote repository."})}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsxs)(v.ZP,{muted:!0,small:!0,children:["For example, if you have a file named ",(0,L.jsx)(v.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"magic.py"})," in a remote repository named ",(0,L.jsx)(v.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"project_romeo"}),(0,L.jsx)("br",{}),"then that file will be cloned here ",(0,L.jsxs)(v.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:[null==s||null===(r=s.sync_config)||void 0===r?void 0:r.repo_path,"/magic.py"]}),(0,L.jsx)("br",{}),"as opposed to ",(0,L.jsxs)(v.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:[null==s||null===(o=s.sync_config)||void 0===o?void 0:o.repo_path,"/project_romeo/magic.py"]}),"."]})}),(0,L.jsx)(p.Z,{mt:1,children:(0,L.jsxs)(v.ZP,{muted:!0,small:!0,children:["If you want to clone the content of a remote repository into a folder named after the remote repository, then change the Git init directoy above to",(0,L.jsx)("br",{}),(0,L.jsxs)(v.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:[null==s||null===(i=s.sync_config)||void 0===i?void 0:i.repo_path,"/",(0,L.jsx)(v.ZP,{inline:!0,monospace:!0,small:!0,children:"[remote repository name]"})]})]})})]}),(0,L.jsxs)(p.Z,{mt:U.cd,children:[(0,L.jsx)(d.ZP,{beforeIcon:(0,L.jsx)(C.Lightning,{size:2*U.iI}),disabled:!X||!l,loading:De,onClick:function(){ne(null),(X!==P||"undefined"!=typeof location&&window.confirm("Are you sure you want to clone remote ".concat(l,"? This will ")+"overwrite all your local changes and may reset any settings you may have configured for your local Git repo. This action cannot be undone."))&&Re({git_custom_branch:{action_payload:{arg:oe,branch:F,remote:l},action_type:X}})},primary:!0,children:X?(0,V.vg)(X):"Execute action"}),(ee||q)&&(0,L.jsx)(p.Z,{mt:U.cd,children:(0,L.jsx)(v.ZP,{danger:!!q,default:!!ee,monospace:!0,preWrap:!0,children:ee||q})})]})]})]}),(0,L.jsxs)(p.Z,{mb:U.HN,children:[(0,L.jsx)(p.Z,{mb:U.HN,children:(0,L.jsx)(h.Z,{light:!0})}),(0,L.jsx)(f.ZP,{children:(0,L.jsxs)(d.ZP,{afterIcon:(0,L.jsx)(C.PaginateArrowRight,{}),linkProps:{href:"/version-control?tab=".concat(R.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",R.uuid]})})]})]})]})},we=t(93528),Oe=t(98464),ke=t(46684),Ie=t(53005),Me=t(15610),Se=(t(17717),t(74401)),He=t(86735);function Ae(e,n){var t=(0,Se.a9)(e),r=Object.keys(n)||[];return null==r?void 0:r.find((function(e){return null==t?void 0:t.endsWith(e)}))}var Ee=t(23780);function Re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function De(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Re(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Fe="version_control/index",Be=30*U.iI;var Ne=function(){var e=(0,u.useRef)(null),n=(0,u.useRef)(null),t=(0,Ee.VI)(null,{},[],{uuid:"VersionControlPage"}),r=(0,c.Z)(t,1)[0],o=(0,u.useState)(!0),i=o[0],l=o[1],d=(0,u.useState)(Be),f=d[0],m=d[1],b="layout_before_".concat(Fe,"_width"),Z=(0,Ze.U2)(b,Be),C=(0,u.useState)(Z),P=C[0],_=C[1],w=(0,u.useState)({}),O=w[0],k=w[1],I=(0,u.useState)(null),M=I[0],S=I[1],H=(0,u.useState)(null),V=H[0],T=H[1],z=(0,u.useState)(N[0]),W=z[0],Q=z[1],K=(0,u.useState)({"All projects":{uuid:"All projects"},"Git directory":{uuid:"Git directory"}}),Y=K[0],X=K[1],J=(0,be.iV)();(0,u.useEffect)((function(){null!=J&&J.tab&&Q(N.find((function(e){return e.uuid===(null==J?void 0:J.tab)})))}),[J]);var te=y.ZP.git_custom_branches.list(),re=te.data,oe=te.mutate,ie=(0,u.useMemo)((function(){return null==re?void 0:re.git_custom_branches}),[re]);(0,u.useEffect)((function(){var e,n;!M&&(null==ie?void 0:ie.length)>=1&&null!==(e=ie[0])&&void 0!==e&&e.name&&S(null===(n=ie[0])||void 0===n?void 0:n.name)}),[M,ie]);var se=y.ZP.git_custom_branches.detail("current",{_format:"with_files"}),ce=se.data,ue=se.mutate,he=(0,u.useMemo)((function(){return(null==ce?void 0:ce.git_custom_branch)||{}}),[ce]),fe=(0,u.useMemo)((function(){return(null==he?void 0:he.files)||[]}),[he]),me=y.ZP.git_custom_branches.detail("with_remotes",{_format:"with_remotes"}),je=me.data,pe=me.mutate,xe=(0,u.useMemo)((function(){return null==je?void 0:je.git_custom_branch}),[je]),ve=(0,u.useMemo)((function(){return(null==xe?void 0:xe.remotes)||[]}),[xe]),ge=(0,u.useState)(null),ye=ge[0],Ce=ge[1],Pe=(0,u.useCallback)((function(e){(0,Ze.t8)(A,e),Ce(e)}),[]);(0,u.useEffect)((function(){var e=(0,Ze.U2)(A,null);if(je&&e){var n=null==ve?void 0:ve.find((function(n){return n.name===e}));Pe(n?null==n?void 0:n.name:null)}}),[je,ve,Pe]);var Se=(0,u.useState)((0,Ze.U2)(E,"")),Re=Se[0],Ne=Se[1],Ue=(0,u.useCallback)((function(e){(0,Ze.t8)(E,e),Ne(e)}),[]),Ve=(0,u.useMemo)((function(){return(0,He.Tw)(ve.reduce((function(e,n){var t;return e.concat((null==n||null===(t=n.repository_names)||void 0===t?void 0:t.map((function(e){var t;return{name:e,url:null==n||null===(t=n.urls)||void 0===t?void 0:t[0]}})))||[])}),[]),(function(e){return e.name}))}),[ve]);(0,u.useEffect)((function(){var e=(0,Ze.U2)(E,null);if(je&&e){var n=null==Ve?void 0:Ve.find((function(n){return n.name===e}));Ue(n?null==n?void 0:n.name:null)}}),[je,Ve,Ue]);var Te=y.ZP.git_files.detail(V?encodeURIComponent(V):null,{base_branch:M}),Le=Te.data,qe=Te.mutate,Ge=(0,u.useMemo)((function(){return null==Le?void 0:Le.git_file}),[Le]),ze=(0,Oe.Z)(Ge);(0,u.useEffect)((function(){if(Ge!==ze){var e,n=null==he||null===(e=he.files_absolute_path)||void 0===e?void 0:e[V];k((function(e){var t;return De(De({},e),{},(0,s.Z)({},n,De(De({},Ge),{},{fullPath:n,relativePath:V,repoPath:null==he||null===(t=he.sync_config)||void 0===t?void 0:t.repo_path})))}))}}),[he,Ge,ze]),(0,u.useEffect)((function(){M&&qe()}),[M,qe]),(0,u.useEffect)((function(){null!=Le&&Le.error&&r({errors:null==Le?void 0:Le.error,response:Le})}),[Le,r]);var We=(0,u.useMemo)((function(){var e,n,t;return{modifiedFiles:null==he||null===(e=he.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return De(De({},e),{},(0,s.Z)({},n,!0))}),{}),stagedFiles:null==he||null===(n=he.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return De(De({},e),{},(0,s.Z)({},n,!0))}),{}),untrackedFiles:null==he||null===(t=he.untracked_files)||void 0===t?void 0:t.reduce((function(e,n){return De(De({},e),{},(0,s.Z)({},n,!0))}),{})}}),[he]),Qe=We.modifiedFiles,Ke=void 0===Qe?{}:Qe,Ye=We.stagedFiles,Xe=void 0===Ye?{}:Ye,Je=We.untrackedFiles,$e=void 0===Je?{}:Je;(0,u.useEffect)((function(){V&&(0,le.Qr)(Ke)&&(0,le.Qr)(Xe)&&(0,le.Qr)($e)&&T(null)}),[Ke,V,Xe,$e]);var en=(0,u.useMemo)((function(){return(null==fe?void 0:fe.length)>=1?(0,L.jsx)(ne.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFiles:ue,files:fe,isFileDisabled:function(){return!1},onClickFile:function(e,t){T((function(t){if(!t||t!==e){var r;if(!M)null==n||null===(r=n.current)||void 0===r||r.focus();return e}return null})),qe()},ref:e,renderAfterContent:function(e){var n,t,r=e.children,o=(null==r?void 0:r.length)>=1,i=(0,Ie.a9)(e);o&&(i="".concat(i,"/"));var l={};return Ae(e,Ke)?(n="M",t="Modified",l.warning=!0):Ae(e,$e)?(n="U",t="Untracked",l.danger=!0):Ae(e,Xe)&&(n="S",t="Staged",l.success=!0),o&&!n?null:(0,L.jsx)(p.Z,{mx:1,children:(0,L.jsx)(g.Z,{appearBefore:!0,label:t,widthFitContent:!0,children:(0,L.jsx)(v.ZP,De(De({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0,uuid:"pages/VersionControl"}):(0,L.jsx)(p.Z,{p:U.cd,children:(0,L.jsx)(v.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[M,ue,qe,e,fe,Ke,n,T,Xe,$e]),nn=((0,u.useMemo)((function(){return!Le||!Ge||V&&(null==Ge?void 0:Ge.filename)!==V}),[Le,Ge,V]),(0,u.useMemo)((function(){return ce&&null!=he&&he.name?N:N.slice(0,1)}),[he,ce])),tn=(0,u.useMemo)((function(){return(0,L.jsxs)("div",{style:{marginTop:5},children:[(0,L.jsx)(G.Z,{onClickTab:function(e){var n=e.uuid;(0,Me.u)({tab:n})},selectedTabUUID:null==W?void 0:W.uuid,tabs:nn,underlineStyle:!0}),(0,L.jsx)(h.Z,{light:!0})]})}),[W,nn]),rn=(0,u.useMemo)((function(){return(0,L.jsx)(_e,{actionRemoteName:ye,branch:he,fetchBranch:function(){ue(),pe()},loading:!je,remotes:ve,setActionRemoteName:Pe,showError:r})}),[ye,he,je,ue,pe,ve,Pe,r]),on=(0,u.useMemo)((function(){return(0,L.jsx)(q,{actionRemoteName:ye,branch:he,branches:ie,fetchBranch:ue,fetchBranches:oe,remotes:ve,setActionRemoteName:Pe,showError:r})}),[ye,he,ie,ue,oe,ve,Pe,r]),ln=(0,u.useMemo)((function(){return(0,L.jsx)(ae,{branch:he,fetchBranch:ue,modifiedFiles:Ke,setSelectedFilePath:T,showError:r,stagedFiles:Xe,untrackedFiles:$e})}),[he,ue,Ke,T,r,Xe,$e]),sn=(0,u.useMemo)((function(){return(0,L.jsx)($,{actionRemoteName:ye,branch:he,branches:ie,fetchBranch:ue,loading:!je,modifiedFiles:Ke,remotes:ve,repositories:Ve,repositoryName:Re,setActionRemoteName:Pe,setRepositoryName:Ue,showError:r,stagedFiles:Xe})}),[ye,he,ie,je,ue,Ke,ve,Ve,Re,Pe,Ue,r,Xe]),cn=(0,u.useMemo)((function(){return(0,L.jsx)(G.Z,{allowScroll:!0,onClickTab:function(e){X((function(n){return De(De({},(0,le.gR)(n,[null==e?void 0:e.uuid])),null!=n&&n[null==e?void 0:e.uuid]?{}:(0,s.Z)({},null==e?void 0:e.uuid,e))}))},selectedTabUUIDs:Y,tabs:[{uuid:"All projects"},{uuid:"Git directory"}],underlineStyle:!0})}),[Y]),un=(0,u.useCallback)((function(){qe()}),[qe]),an=(0,u.useCallback)((function(){ue()}),[ue]),dn=(0,u.useMemo)((function(){var e;if(V)return null==he||null===(e=he.files_absolute_path)||void 0===e?void 0:e[V]}),[he,V]),hn=(0,u.useCallback)((function(e){k((function(n){return(0,le.gR)(n,[e])}))}),[]),fn=(0,we.ZP)({codeEditorMaximumHeightOffset:2*ke.Mz+10,onClickTabClose:hn,onCreateFile:an,onUpdateFileSuccess:un,originalContent:O,selectedFilePath:dn,showHiddenFilesSetting:!0,uuid:"pages/VersionControlPage"}),mn=fn.browser,jn=fn.controller,pn=fn.filePaths,xn=(fn.menu,fn.selectedFilePath),vn=fn.tabs,bn=(0,a.Db)((function(e){var n=e.filePath,t=e.query;return y.ZP.git_files.detailAsync(encodeURIComponent(n),t)})),Zn=(0,c.Z)(bn,2),gn=Zn[0];Zn[1].isLoading,(0,u.useEffect)((function(){xn&&gn({filePath:xn,query:{base_branch:M,derive:!0}}).then((function(e){return k((function(n){var t;return De(De({},n),{},(0,s.Z)({},xn,null==e||null===(t=e.data)||void 0===t?void 0:t.git_file))}))}))}),[xn]),(0,u.useEffect)((function(){(null==pn?void 0:pn.length)>=1&&l(!1)}),[pn]);var yn=(0,u.useMemo)((function(){var e=[];return"All projects"in Y&&e.push([{render:function(e){var n=e.columnWidth;return(0,L.jsx)("div",{style:{width:"".concat(n,"px")},children:mn})}}]),"Git directory"in Y&&e.push([{render:function(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{p:1,children:(0,L.jsx)(j.Z,{compact:!0,label:"Base branch",onChange:function(e){return S(e.target.value)},ref:n,small:!0,value:M||"",children:null==ie?void 0:ie.map((function(e){var n=e.name;return(0,L.jsx)("option",{value:n,children:n},n)}))})}),en]})}}]),(0,L.jsx)(de.Z,{columnsOfItems:e,fullHeight:!0,heightOffset:2*ke.Mz,uuid:"version-control-all-modified-files",width:P})}),[M,ie,mn,P,en,Y]);return(0,L.jsx)(ee.Z,{after:jn,afterHeader:vn,afterHidden:i,afterWidth:f,before:yn,beforeHeader:cn,beforeWidth:P,mainContainerHeader:tn,setAfterHidden:l,setAfterWidth:m,setBeforeWidth:_,title:"Version control",uuid:Fe,children:(0,L.jsxs)(p.Z,{p:U.cd,children:[!ce&&(0,L.jsx)(x.Z,{inverted:!0}),ce&&(0,L.jsxs)(L.Fragment,{children:[B.uuid===(null==W?void 0:W.uuid)&&rn,R.uuid===(null==W?void 0:W.uuid)&&on,D.uuid===(null==W?void 0:W.uuid)&&ln,F.uuid===(null==W?void 0:W.uuid)&&sn]})]})})};function Ue(){return(0,L.jsx)(Ne,{})}Ue.getInitialProps=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Ve=(0,l.Z)(Ue)},75302:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return t(37520)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(61049);function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(12539),o=t(80022);function i(e,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(e)}}},function(e){e.O(0,[1557,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);