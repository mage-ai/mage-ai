"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4241],{84649:function(e,n,t){t.d(n,{EN:function(){return C},FX:function(){return I},HS:function(){return j},Nk:function(){return m},Rd:function(){return f},SL:function(){return w},Tj:function(){return _},UE:function(){return Z},Yf:function(){return v},ZG:function(){return d},bC:function(){return h},n5:function(){return p},n8:function(){return k},w5:function(){return y},wj:function(){return b},wl:function(){return g},ze:function(){return x}});var o=t(25976),i=t(44897),r=t(42631),u=t(46684),a=t(70515),l=t(91437),c=t(47041),d=2.5*a.iI,s=40*a.iI,p=10*a.iI,f=o.default.div.withConfig({displayName:"indexstyle__ContainedStyle",componentId:"sc-8sk2qr-0"})([""," overflow:auto;"," "," ",""],c.w5,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).page,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-p,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width-p,"px;\n  ")})),m=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-8sk2qr-1"})(["height:100%;position:relative;"]),h=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-8sk2qr-2"})(["position:fixed;width:","px;z-index:1;"," "," ",""],s,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-p,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "})),v=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-8sk2qr-3"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;",""],1*a.iI,a.cd*a.iI,a.cd*a.iI,1*a.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),g=o.default.div.withConfig({displayName:"indexstyle__LinksContainerStyle",componentId:"sc-8sk2qr-4"})([""," overflow:auto;position:fixed;width:","px;",""],c.w5,s,(function(e){return"\n    height: calc(100% - ".concat(55+(null!==e&&void 0!==e&&e.contained?p:u.Mz)+((null===e||void 0===e?void 0:e.heightOffset)||0),"px);\n  ")})),b=o.default.div.withConfig({displayName:"indexstyle__NavLinkStyle",componentId:"sc-8sk2qr-5"})([""," padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;&:hover{cursor:pointer;}",""],(0,l.eR)(),1*a.iI,a.cd*a.iI,a.cd*a.iI,1*a.iI,(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")})),x=o.default.div.withConfig({displayName:"indexstyle__IconStyle",componentId:"sc-8sk2qr-6"})([""," border-radius:","px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],(0,l.eR)(),r.n_,5*a.iI,1.25*a.iI,1.25*a.iI,5*a.iI,(function(e){return!e.backgroundColor&&"\n    background-color: ".concat((e.theme.background||i.Z.background).chartBlock,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")})),y=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-8sk2qr-7"})(["margin-left:","px;"],s),j=o.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-8sk2qr-8"})(["padding:","px;",""],a.cd*a.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")})),k=o.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-8sk2qr-9"})(["display:flex;flex-wrap:wrap;padding:","px;"],.75*a.iI),Z=o.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-8sk2qr-10"})(["border-radius:","px;margin:","px;padding:","px;width:","px;&:hover{cursor:pointer;}",""],r.n_,.75*a.iI,2.5*a.iI,50*a.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.background||i.Z.background).chartBlock,";\n    box-shadow: ").concat((e.theme.shadow||i.Z.shadow).frame,";\n  ")})),_=o.default.div.withConfig({displayName:"indexstyle__CardTitleStyle",componentId:"sc-8sk2qr-11"})(["height:","px;"],2.5*a.iI),w=o.default.div.withConfig({displayName:"indexstyle__CardDescriptionStyle",componentId:"sc-8sk2qr-12"})(["height:","px;margin-top:","px;"],2.5*a.iI*2,1*a.iI),C=o.default.div.withConfig({displayName:"indexstyle__TagsStyle",componentId:"sc-8sk2qr-13"})(["height:","px;margin-top:","px;overflow:hidden;"],3.5*a.iI,.5*a.iI),I=o.default.div.withConfig({displayName:"indexstyle__BreadcrumbsStyle",componentId:"sc-8sk2qr-14"})(["padding-bottom:","px;padding-top:","px;",""],1*a.iI,1*a.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}))},88328:function(e,n,t){t.d(n,{Z:function(){return A}});var o=t(82394),i=t(75582),r=t(12691),u=t.n(r),a=t(21764),l=t(82684),c=t(69864),d=t(34376),s=t(71180),p=t(90299),f=t(44898),m=t(24138),h=t(97618),v=t(55485),g=t(48670),b=t(38276),x=t(30160),y=t(35576),j=t(17488),k=t(62547),Z=t(35686),_=t(94777),w=t(98464),C=t(46684),I={uuid:"Define"},O={uuid:"Document"},P=[I,O],S=t(70515),D=t(11302),M=t(68899),U=t(72619),N=t(23780),T=t(19183),R=t(28598);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=function(e){var n=e.defaultTab,t=e.onMutateSuccess,o=e.pipelineUUID,r=e.template,E=e.templateAttributes,A=e.templateUUID,L=(0,T.i)().height,B=(C.Mz,(0,d.useRouter)()),F=(0,N.VI)(null,{},[],{uuid:"CustomTemplates/PipelineTemplateDetail"}),W=(0,i.Z)(F,1)[0],Y=(0,l.useState)(!1),H=Y[0],z=Y[1],K=(0,l.useState)(!1),G=K[0],V=K[1],X=(0,l.useState)(E),J=X[0],Q=X[1],$=(0,l.useCallback)((function(e){V(!0),Q(e)}),[]),ee=(0,w.Z)(r);(0,l.useEffect)((function(){(null===ee||void 0===ee?void 0:ee.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)&&Q(r)}),[r,ee]);var ne=Z.ZP.pipelines.detail(o).data,te=(0,l.useMemo)((function(){return(null===r||void 0===r?void 0:r.pipeline)||(null===ne||void 0===ne?void 0:ne.pipeline)}),[ne,r]),oe=(0,l.useMemo)((function(){return(null===te||void 0===te?void 0:te.blocks)||[]}),[te]),ie=(0,l.useMemo)((function(){return!r&&!A}),[r,A]),re=(0,l.useState)(n?P.find((function(e){return e.uuid===(null===n||void 0===n?void 0:n.uuid)})):P[0]),ue=re[0],ae=re[1],le=(0,l.useMemo)((function(){return!!ie&&!(null!==J&&void 0!==J&&J.template_uuid)}),[ie,J]),ce=(0,l.useState)(!1),de=ce[0],se=ce[1],pe=(0,l.useState)(ie?400:300),fe=pe[0],me=pe[1],he=(0,c.Db)(Z.ZP.custom_templates.useCreate(),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(e){var n=e.custom_template;t&&(null===t||void 0===t||t()),z(!0),setTimeout((function(){B.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid),"?object_type=").concat(f.R))}),1)},onErrorCallback:function(e,n){return W({errors:n,response:e})}})}}),ve=(0,i.Z)(he,2),ge=ve[0],be=ve[1].isLoading,xe=(0,c.Db)(Z.ZP.custom_templates.useUpdate(r?encodeURIComponent(null===r||void 0===r?void 0:r.template_uuid):A&&encodeURIComponent(A),{object_type:f.R}),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(e){var n=e.custom_template;t&&(null===t||void 0===t||t()),null!==r&&void 0!==r&&r.template_uuid&&(null===n||void 0===n?void 0:n.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)||A&&(null===n||void 0===n?void 0:n.template_uuid)!==A?B.replace("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid),"?object_type=").concat(f.R)):(Q(n),V(!1),a.Am.success("Template successfully saved.",{position:a.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_pipeline_template"}))},onErrorCallback:function(e,n){return W({errors:n,response:e})}})}}),ye=(0,i.Z)(xe,2),je=ye[0],ke=ye[1].isLoading,Ze=(0,l.useCallback)((function(){var e={custom_template:q(q({},J),{},{object_type:f.R})};ie?ge(q(q({},e),{},{custom_template:q(q({},null===e||void 0===e?void 0:e.custom_template),{},{pipeline_uuid:o})})):je(e)}),[ge,ie,o,J,je]),_e=(0,l.useMemo)((function(){return(0,R.jsxs)(v.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,R.jsx)(D.Yf,{children:(0,R.jsx)(p.Z,{noPadding:!0,onClickTab:function(e){ae(e)},selectedTabUUID:null===ue||void 0===ue?void 0:ue.uuid,tabs:P})}),(0,R.jsxs)(h.Z,{flexDirection:"column",children:[I.uuid===(null===ue||void 0===ue?void 0:ue.uuid)&&(0,R.jsxs)(R.Fragment,{children:[o&&(0,R.jsx)(b.Z,{mt:S.cd,px:S.cd,children:(0,R.jsxs)(x.ZP,{default:!0,children:["This pipeline template will be based off the pipeline ",(0,R.jsx)(u(),{as:"/pipelines/".concat(o),href:"/pipelines/[pipeline]",passHref:!0,children:(0,R.jsx)(g.Z,{bold:!0,default:!0,inline:!0,monospace:!0,openNewWindow:!0,children:o})}),"."]})}),(0,R.jsxs)(b.Z,{mt:S.cd,px:S.cd,children:[(0,R.jsxs)(b.Z,{mb:1,children:[(0,R.jsx)(x.ZP,{bold:!0,children:"Template UUID"}),(0,R.jsx)(x.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,R.jsx)(j.Z,{monospace:!0,onChange:function(e){return $((function(n){return q(q({},n),{},{template_uuid:e.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===J||void 0===J?void 0:J.template_uuid)||""})]})]}),O.uuid===(null===ue||void 0===ue?void 0:ue.uuid)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(b.Z,{mt:S.cd,px:S.cd,children:[(0,R.jsxs)(b.Z,{mb:1,children:[(0,R.jsx)(x.ZP,{bold:!0,children:"Name"}),(0,R.jsx)(x.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,R.jsx)(j.Z,{onChange:function(e){return $((function(n){return q(q({},n),{},{name:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===J||void 0===J?void 0:J.name)||""})]}),(0,R.jsx)(b.Z,{mt:S.cd,px:S.cd,children:(0,R.jsx)(y.Z,{label:"Description",onChange:function(e){return $((function(n){return q(q({},n),{},{description:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===J||void 0===J?void 0:J.description)||""})})]})]}),(0,R.jsx)(D.ig,{children:(0,R.jsx)(b.Z,{p:S.cd,children:(0,R.jsx)(v.ZP,{children:(0,R.jsxs)(s.ZP,{disabled:le,fullWidth:!0,loading:be||ke,onClick:function(){return Ze()},primary:!0,children:[!ie&&"Save template",ie&&"Create new template"]})})})})]})}),[le,be,ke,ie,o,Ze,null===ue||void 0===ue?void 0:ue.uuid,$,J]),we=(0,_.Z)({shouldWarn:!H&&G,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,R.jsxs)(k.Z,{before:_e,beforeHidden:de,beforeWidth:fe,leftOffset:M.k1,setBeforeHidden:se,setBeforeWidth:me,children:[(0,R.jsx)(we,{}),(0,R.jsx)(m.ZP,{blocks:oe,height:L,heightOffset:C.Mz,noStatus:!0,pipeline:te})]})}},11302:function(e,n,t){t.d(n,{Nk:function(){return l},Yf:function(){return d},bC:function(){return c},ig:function(){return s},w5:function(){return p}});var o=t(25976),i=t(44897),r=t(70515),u=t(84649),a=(r.iI,40*r.iI),l=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-axgvn9-0"})(["height:100%;position:relative;"]),c=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-axgvn9-1"})(["overflow:auto;position:fixed;width:","px;z-index:1;"," "," ",""],a,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-u.n5,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "})),d=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-axgvn9-2"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;width:100%;",""],1*r.iI,r.cd*r.iI,r.cd*r.iI,1*r.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__ButtonsStyle",componentId:"sc-axgvn9-3"})(["margin-top:","px;width:100%;",""],r.cd*r.iI,(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-axgvn9-4"})(["margin-left:","px;"],a)},5755:function(e,n,t){t.d(n,{Z:function(){return z}});var o=t(82394),i=t(75582),r=t(56085),u=t(82684),a=t(65701),l=t(1254),c=t(21764),d=t(69864),s=t(34376),p=t(40761),f=t(71180),m=t(90299),h=t(30352),v=t(44898),g=t(97618),b=t(55485),x=t(38276),y=t(44085),j=t(30160),k=t(35576),Z=t(17488),_=t(35686),w=t(94777),C=t(98464),I=t(44425),O=t(11302),P=t(48339),S=t(39643),D={uuid:"Define"},M={uuid:"Document"},U=[D,M],N=t(11498),T=t(70515),R=t(57653),E=t(4383),q=t(72619),A=t(42041),L=t(23780),B=t(44688),F=t(19183),W=t(28598);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=function(e){var n=e.contained,t=e.defaultTab,Y=e.heightOffset,z=e.onCancel,K=e.onCreateCustomTemplate,G=e.onMutateSuccess,V=e.template,X=e.templateAttributes,J=e.templateUUID,Q=(0,F.i)().height,$=(0,s.useRouter)(),ee=(0,L.VI)(null,{},[],{uuid:"CustomTemplates/TemplateDetail"}),ne=(0,i.Z)(ee,1)[0],te=(0,u.useState)(Number(new Date)),oe=te[0],ie=te[1],re=(0,u.useState)(!1),ue=re[0],ae=re[1],le=(0,u.useState)(!1),ce=le[0],de=le[1],se=(0,u.useState)(t?U.find((function(e){return e.uuid===(null===t||void 0===t?void 0:t.uuid)})):U[0]),pe=se[0],fe=se[1],me=(0,u.useState)(!1),he=me[0],ve=me[1],ge=(0,u.useState)(X),be=ge[0],xe=ge[1],ye=(0,u.useCallback)((function(e){ve(!0),xe(e)}),[]),je=_.ZP.custom_templates.detail(!V&&J&&encodeURIComponent(J),{object_type:v.Z}).data,ke=(0,u.useMemo)((function(){return V||(null===je||void 0===je?void 0:je.custom_template)}),[je,V]),Ze=(0,C.Z)(ke);(0,u.useEffect)((function(){(null===Ze||void 0===Ze?void 0:Ze.template_uuid)!==(null===ke||void 0===ke?void 0:ke.template_uuid)&&(ie(Number(new Date)),xe(ke),de(!0))}),[ke,Ze]);var _e=(0,d.Db)(_.ZP.custom_templates.useCreate(),{onSuccess:function(e){return(0,q.wD)(e,{callback:function(e){var n=e.custom_template;G&&(null===G||void 0===G||G()),K?null===K||void 0===K||K(n):(ae(!0),setTimeout((function(){$.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid)))}),1))},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),we=(0,i.Z)(_e,2),Ce=we[0],Ie=we[1].isLoading,Oe=(0,d.Db)(_.ZP.custom_templates.useUpdate(V?encodeURIComponent(null===V||void 0===V?void 0:V.template_uuid):J&&encodeURIComponent(J),{object_type:v.Z}),{onSuccess:function(e){return(0,q.wD)(e,{callback:function(e){var n=e.custom_template;G&&(null===G||void 0===G||G()),xe(n),ve(!1),c.Am.success("Template successfully saved.",{position:c.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_block_template"})},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Pe=(0,i.Z)(Oe,2),Se=Pe[0],De=Pe[1].isLoading,Me=(0,u.useMemo)((function(){return I.tf.MARKDOWN===(null===be||void 0===be?void 0:be.block_type)}),[null===be||void 0===be?void 0:be.block_type]),Ue=!V&&!J,Ne=(0,u.useMemo)((function(){return!!Ue&&(!(null!==be&&void 0!==be&&be.template_uuid)||!(null!==be&&void 0!==be&&be.block_type)||!Me&&!(null!==be&&void 0!==be&&be.language))}),[Me,Ue,be]),Te=_.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),Re=Te.data,Ee=Te.mutate,qe=null===Re||void 0===Re?void 0:Re.kernels,Ae=(null===qe||void 0===qe?void 0:qe.find((function(e){return e.name===R.a_[R.qL.PYTHON]})))||(null===qe||void 0===qe?void 0:qe[0]),Le=(0,d.Db)(_.ZP.kernels.useUpdate(null===Ae||void 0===Ae?void 0:Ae.id),{onSuccess:function(e){return(0,q.wD)(e,{callback:function(){return Ee()},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Be=(0,i.Z)(Le,1)[0],Fe=(0,u.useCallback)((function(){Be({kernel:{action_type:"interrupt"}}),Ge([])}),[Be]),We=(0,u.useState)({}),Ye=We[0],He=We[1],ze=(0,u.useState)([]),Ke=ze[0],Ge=ze[1],Ve=(0,u.useMemo)((function(){return{language:null===be||void 0===be?void 0:be.language,name:null===be||void 0===be?void 0:be.name,type:null===be||void 0===be?void 0:be.block_type,uuid:null===be||void 0===be?void 0:be.template_uuid}}),[be]),Xe=(0,u.useMemo)((function(){return new p.Z}),[]),Je=(0,u.useMemo)((function(){return{api_key:N.lG,token:Xe.decodedToken.token}}),[Xe]),Qe=(0,r.ZP)((0,E.Ib)(),{onClose:function(){return console.log("socketUrlPublish closed")},onMessage:function(e){if(e){var n=JSON.parse(e.data),t=n.execution_state,i=n.uuid;if(!i)return;He((function(e){var t=e[i]||[];return H(H({},e),{},(0,o.Z)({},i,t.concat(n)))})),P.uF.BUSY===t?Ge((function(e){return e.find((function(e){var n=e.uuid;return i===n}))||!Ve?e:e.concat(Ve)})):P.uF.IDLE===t&&Ge((function(e){return e.filter((function(e){var n=e.uuid;return i!==n}))}))}},onOpen:function(){return console.log("socketUrlPublish opened")},reconnectAttempts:10,reconnectInterval:3e3,shouldReconnect:function(){return console.log("Attempting to reconnect..."),!0}}).sendMessage,$e=(0,u.useCallback)((function(e){var n=e.block,t=e.code,o=e.ignoreAlreadyRunning,i=e.runDownstream,r=void 0!==i&&i,u=e.runIncompleteUpstream,a=void 0!==u&&u,l=e.runSettings,c=void 0===l?{}:l,d=e.runTests,s=void 0!==d&&d,p=e.runUpstream,f=n.extension_uuid,m=n.upstream_blocks,h=n.uuid;Ke.find((function(e){var n=e.uuid;return h===n}))&&!o||(Qe(JSON.stringify(H(H({},Je),{},{code:t,extension_uuid:f,run_downstream:r,run_incomplete_upstream:a,run_settings:c,run_tests:s,run_upstream:p,type:n.type,upstream_blocks:m,uuid:h}))),He((function(e){return delete e[h],e})),Ge((function(e){return e.find((function(e){var n=e.uuid;return h===n}))?e:e.concat(n)})))}),[Ke,Qe,He,Ge,Je]),en=(0,u.useMemo)((function(){return Ke.reduce((function(e,n,t){return H(H({},e),{},(0,o.Z)({},n.uuid,H(H({},n),{},{priority:t})))}),{})}),[Ke]),nn=(0,u.useMemo)((function(){if(!ce)return(0,W.jsx)("div",{});var e=en[null===Ve||void 0===Ve?void 0:Ve.uuid],n=e?0===e.priority?P.uF.BUSY:P.uF.QUEUED:P.uF.IDLE;return(0,W.jsx)(h.Z,{block:Ve,defaultValue:null===be||void 0===be?void 0:be.content,disableDrag:!0,executionState:n,hideExtraCommandButtons:!0,hideExtraConfiguration:!0,hideHeaderInteractiveInformation:!0,interruptKernel:Fe,messages:null===Ye||void 0===Ye?void 0:Ye[null===Ve||void 0===Ve?void 0:Ve.uuid],noDivider:!0,onChange:function(e){return ye((function(n){return H(H({},n),{},{content:e})}))},runBlock:$e,runningBlocks:Ke,selected:!0,setErrors:ne,textareaFocused:!0},String(oe))}),[Ve,oe,Fe,Ye,ce,$e,Ke,en,ye,ne,be]),tn=(0,u.useCallback)((function(){var e={custom_template:H(H({},be),{},{language:Me?I.t6.MARKDOWN:null===be||void 0===be?void 0:be.language,object_type:v.Z})};Ue?Ce(e):Se(e)}),[Ce,Me,Ue,be,Se]),on="CustomTemplates/TemplateDetail",rn=(0,B.y)(),un=rn.registerOnKeyDown,an=rn.unregisterOnKeyDown;(0,u.useEffect)((function(){return function(){an(on)}}),[an,on]),un(on,(function(e,n){if(he&&(0,A.y)([S.zX,S.hS],n)){e.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else((0,A.y)([S.zX,S.Um],n)||(0,A.y)([S.PQ,S.Um],n))&&(e.preventDefault(),tn())}),[tn,he]);var ln=(0,u.useMemo)((function(){return Q-Y}),[Q,Y]),cn=(0,w.Z)({shouldWarn:!ue&&he,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,W.jsxs)(O.Nk,{children:[(0,W.jsx)(cn,{}),(0,W.jsx)(O.bC,{height:n?ln:null,children:(0,W.jsxs)(b.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,W.jsx)(O.Yf,{children:(0,W.jsx)(m.Z,{noPadding:!0,onClickTab:function(e){fe(e)},selectedTabUUID:null===pe||void 0===pe?void 0:pe.uuid,tabs:Ue?U.slice(0,1):U})}),(0,W.jsxs)(g.Z,{flexDirection:"column",children:[D.uuid===(null===pe||void 0===pe?void 0:pe.uuid)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(x.Z,{mt:T.cd,px:T.cd,children:[(0,W.jsxs)(x.Z,{mb:1,children:[(0,W.jsx)(j.ZP,{bold:!0,children:"Template UUID"}),(0,W.jsx)(j.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,W.jsx)(Z.Z,{monospace:!0,onChange:function(e){return ye((function(n){return H(H({},n),{},{template_uuid:e.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.template_uuid)||""})]}),(0,W.jsx)(x.Z,{mt:T.cd,px:T.cd,children:(0,W.jsx)(y.Z,{label:"Block type",onChange:function(e){return ye((function(n){return H(H({},n),{},{block_type:e.target.value,language:I.tf.MARKDOWN===e.target.value?I.t6.MARKDOWN:null===n||void 0===n?void 0:n.language})}))},primary:!0,value:(null===be||void 0===be?void 0:be.block_type)||"",children:Object.values(I.tf).map((function(e){return(0,W.jsx)("option",{value:e,children:I.V4[e]},e)}))})}),!Me&&(0,W.jsx)(x.Z,{mt:T.cd,px:T.cd,children:(0,W.jsx)(y.Z,{label:"Language",onChange:function(e){return ye((function(n){return H(H({},n),{},{language:e.target.value})}))},primary:!0,value:(null===be||void 0===be?void 0:be.language)||"",children:Object.values(I.t6).map((function(e){return(0,W.jsx)("option",{value:e,children:I.LE[e]},e)}))})})]}),M.uuid===(null===pe||void 0===pe?void 0:pe.uuid)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(x.Z,{mt:T.cd,px:T.cd,children:[(0,W.jsxs)(x.Z,{mb:1,children:[(0,W.jsx)(j.ZP,{bold:!0,children:"Name"}),(0,W.jsx)(j.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,W.jsx)(Z.Z,{onChange:function(e){return ye((function(n){return H(H({},n),{},{name:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.name)||""})]}),(0,W.jsx)(x.Z,{mt:T.cd,px:T.cd,children:(0,W.jsx)(k.Z,{label:"Description",onChange:function(e){return ye((function(n){return H(H({},n),{},{description:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.description)||""})})]})]}),(0,W.jsx)(O.ig,{children:(0,W.jsx)(x.Z,{p:T.cd,children:(0,W.jsxs)(b.ZP,{children:[(0,W.jsxs)(f.ZP,{disabled:Ne,fullWidth:!0,loading:Ie||De,onClick:function(){return tn()},primary:!0,children:[!Ue&&"Save template",Ue&&"Create new template"]}),z&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(x.Z,{mr:1}),(0,W.jsx)(f.ZP,{onClick:z,secondary:!0,children:"Cancel"})]})]})})})]})}),(0,W.jsx)(O.w5,{children:(0,W.jsx)(x.Z,{p:T.cd,children:(0,W.jsx)(a.W,{backend:l.PD,children:nn})})})]})}},93808:function(e,n,t){t.d(n,{Z:function(){return I}});var o=t(77837),i=t(26304),r=t(62243),u=t(29385),a=t(80022),l=t(13692),c=t(93189),d=t(15544),s=t(82394),p=t(38860),f=t.n(p),m=t(82684),h=t(56663),v=t.n(h),g=t(40761),b=t(34661),x=t(36105),y=t(50178),j=t(69419),k=t(28598),Z=["auth"];function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,o=(0,d.Z)(e);if(n){var i=(0,d.Z)(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return(0,c.Z)(this,t)}}function I(e){return function(n){(0,l.Z)(c,n);var t=C(c);function c(){var e;(0,r.Z)(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,s.Z)((0,a.Z)(e),"state",{auth:new g.Z(e.props.token)}),e}return(0,u.Z)(c,[{key:"componentDidMount",value:function(){this.setState({auth:new g.Z(this.props.token)})}},{key:"render",value:function(){var n=this.props,t=(n.auth,(0,i.Z)(n,Z));return(0,k.jsx)(e,w({auth:this.state.auth},t))}}],[{key:"getInitialProps",value:function(){var n=(0,o.Z)(f().mark((function n(t){var o,i,r,u,a,l,c,d,s;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=v()(t),i=(0,y.ex)(t),r=i.id,u=o[b.Mv],a=o[x.qt],l=new g.Z(u),c=w(w({},t),{},{auth:l,currentGroupId:r,theme:a}),(0,y.YB)(t)&&l.isExpired&&(console.log("OAuth token has expired."),d=w(w({},t.query),{},{redirect_url:t.asPath}),(0,j.nL)("/sign-in?".concat((0,j.uM)(d)),t.res)),!e.getInitialProps){n.next=12;break}return n.next=10,e.getInitialProps(c);case 10:return s=n.sent,n.abrupt("return",w(w({},s),{},{auth:l,currentGroupId:r,theme:a}));case 12:return n.abrupt("return",c);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}]),c}(m.Component)}},44898:function(e,n,t){t.d(n,{R:function(){return i},Z:function(){return o}});var o="blocks",i="pipelines"},94777:function(e,n,t){var o=t(75582),i=t(82684),r=t(34376),u=t(71180),a=t(55485),l=t(65956),c=t(38276),d=t(30160),s=t(89538),p=t(28598);n.Z=function(e){var n=e.shouldWarn,t=e.warningMessage,f=(0,r.useRouter)(),m=(0,i.useState)(!1),h=m[0],v=m[1],g=(0,i.useState)({isModalOpen:!1,nextRoute:null}),b=g[0],x=g[1];(0,i.useEffect)((function(){var e=function(e){if(n)return e.preventDefault(),(e||window.event).returnValue="Are you sure you want to leave?"};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[n]),(0,i.useEffect)((function(){var e=function(e){if(n&&!h)throw x({isModalOpen:!0,nextRoute:e}),f.events.emit("routeChangeError"),"navigation aborted"};f.events.on("routeChangeStart",e);var t=function(){return f.events.off("routeChangeStart",e)};if(h){if(!b.nextRoute)return;return f.push(b.nextRoute),t}return t}),[b,h,f,n]);var y=(0,s.dd)((function(){return(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(d.ZP,{children:t}),(0,p.jsx)(c.Z,{mt:2,children:(0,p.jsxs)(a.ZP,{alignItems:"center",children:[(0,p.jsx)(u.ZP,{onClick:function(){return v(!0)},primary:!0,children:"Leave"}),(0,p.jsx)(c.Z,{mr:1}),(0,p.jsx)(u.ZP,{onClick:function(){x({isModalOpen:!1,nextRoute:null})},secondary:!0,children:"Cancel"})]})})]})}),{},[t],{background:!0,hideCallback:function(){x({isModalOpen:!1,nextRoute:null})},uuid:"stale_pipeline_message"}),j=(0,o.Z)(y,2),k=j[0],Z=j[1];(0,i.useEffect)((function(){b.isModalOpen?k():Z()}),[Z,b.isModalOpen,k]);return{ConfirmLeaveModal:function(){return(0,p.jsx)("div",{})}}}}}]);