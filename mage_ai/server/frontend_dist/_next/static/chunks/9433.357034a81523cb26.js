"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9433],{52097:function(e,t,i){e.exports=i.p+"static/media/MagicPython.tmLanguage.c9ce5464.json"},66547:function(e,t,i){e.exports=i.p+"static/media/MagicRegExp.tmLanguage.d57a0961.json"},36959:function(e,t,i){e.exports=i.p+"static/media/language-configuration.d030e510.json"},63651:function(e,t,i){e.exports=i.p+"static/media/package.3fcb4206.json"},19136:function(e,t,i){e.exports=i.p+"static/media/package.nls.3296e3ec.json"},79433:function(e,t,i){var n;i.r(t),i.d(t,{whenReady:function(){return TQ}}),function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(n||(n={}));const s=o("instantiationService");function o(e){if(n.serviceIds.has(e))return n.serviceIds.get(e);const t=function(e,i,s){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,i){t[n.DI_TARGET]===t?t[n.DI_DEPENDENCIES].push({id:e,index:i}):(t[n.DI_DEPENDENCIES]=[{id:e,index:i}],t[n.DI_TARGET]=t)}(t,e,s)};return t.toString=()=>e,n.serviceIds.set(e,t),t}const r=o("extensionService");let a="undefined"!=typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function l(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,((e,i)=>{const n=i[0],s=t[n];let o=e;return"string"==typeof s?o=s:"number"!=typeof s&&"boolean"!=typeof s&&null!=s||(o=String(s)),o})),a&&(i="［"+i.replace(/[aouei]/g,"$&$&")+"］"),i}let h,c=!1,d={};function u(e,t,i,...n){c=!0;const s="object"==typeof t?t.key:t;return l((d[e]??{})[s]??i,n)}function g(e,t,i,...n){c=!0;const s="object"==typeof t?t.key:t;return{value:l((d[e]??{})[s]??i,n),original:l(i,n)}}var p=i(554);const f="en";let m,b,v=!1,w=!1,_=!1,y=!1,C=!1,S=!1,k=!1,x=!1,E=f,D=null;const L=globalThis;let I;void 0!==L.vscode&&void 0!==L.vscode.process?I=L.vscode.process:void 0!==p&&"string"==typeof p?.versions?.node&&(I=p);const T="string"==typeof I?.versions?.electron&&"renderer"===I?.type;if("object"==typeof I){v="win32"===I.platform,w="darwin"===I.platform,_="linux"===I.platform,k=!!I.env.CI||!!I.env.BUILD_ARTIFACTSTAGINGDIRECTORY,m=f,E=f;const e=I.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),i=t.availableLanguages["*"];m=t.locale,D=t.osLocale,E=i||f}catch(Om){}y=!0}else if("object"!=typeof navigator||T)console.error("Unable to resolve platform.");else{b=navigator.userAgent,v=b.indexOf("Windows")>=0,w=b.indexOf("Macintosh")>=0,S=(b.indexOf("Macintosh")>=0||b.indexOf("iPad")>=0||b.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_=b.indexOf("Linux")>=0,x=b?.indexOf("Mobi")>=0,C=!0;m=h||f,E=m,D=navigator.language}let N=0;w?N=1:v?N=3:_&&(N=2);const A=v,M=w,R=_,O=y,F=C,P=C&&"function"==typeof L.importScripts?L.origin:void 0,B=S,z=x,W=N,H=b,V=E;var U;!function(e){e.value=function(){return V},e.isDefaultVariant=function(){return 2===V.length?"en"===V:V.length>=3&&("e"===V[0]&&"n"===V[1]&&"-"===V[2])},e.isDefault=function(){return"en"===V}}(U||(U={}));const K="function"==typeof L.postMessage&&!L.importScripts,q=(()=>{if(K){const e=[];L.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=e.length;i<n;i++){const n=e[i];if(n.id===t.data.vscodeScheduleAsyncWork)return e.splice(i,1),void n.callback()}}));let t=0;return i=>{const n=++t;e.push({id:n,callback:i}),L.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})(),$=w||S?2:v?1:3;let j=!0,G=!1;const Y=!!(H&&H.indexOf("Chrome")>=0),X=!!(H&&H.indexOf("Firefox")>=0),Q=!!(!Y&&H&&H.indexOf("Safari")>=0),Z=!!(H&&H.indexOf("Edg/")>=0);H&&H.indexOf("Android");var J=i(554);let ee;const te=globalThis.vscode;if(void 0!==te&&void 0!==te.process){const e=te.process;ee={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else ee=void 0!==J?{get platform(){return J.platform},get arch(){return J.arch},get env(){return J.env},cwd(){return J.env.VSCODE_CWD||J.cwd()}}:{get platform(){return A?"win32":M?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const ie=ee.cwd,ne=ee.env,se=ee.platform,oe=ee.arch,re=46,ae=47,le=92,he=58;class ce extends Error{constructor(e,t,i){let n;"string"==typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";const s=-1!==e.indexOf(".")?"property":"argument";let o=`The "${e}" ${s} ${n} of type ${t}`;o+=". Received type "+typeof i,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function de(e,t){if("string"!=typeof e)throw new ce(t,"string",e)}const ue="win32"===se;function ge(e){return e===ae||e===le}function pe(e){return e===ae}function fe(e){return e>=65&&e<=90||e>=97&&e<=122}function me(e,t,i,n){let s="",o=0,r=-1,a=0,l=0;for(let h=0;h<=e.length;++h){if(h<e.length)l=e.charCodeAt(h);else{if(n(l))break;l=ae}if(n(l)){if(r===h-1||1===a);else if(2===a){if(s.length<2||2!==o||s.charCodeAt(s.length-1)!==re||s.charCodeAt(s.length-2)!==re){if(s.length>2){const e=s.lastIndexOf(i);-1===e?(s="",o=0):(s=s.slice(0,e),o=s.length-1-s.lastIndexOf(i)),r=h,a=0;continue}if(0!==s.length){s="",o=0,r=h,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",o=2)}else s.length>0?s+=`${i}${e.slice(r+1,h)}`:s=e.slice(r+1,h),o=h-r-1;r=h,a=0}else l===re&&-1!==a?++a:a=-1}return s}function be(e,t){!function(e,t){if(null===e||"object"!=typeof e)throw new ce(t,"Object",e)}(t,"pathObject");const i=t.dir||t.root,n=t.base||`${t.name||""}${t.ext||""}`;return i?i===t.root?`${i}${n}`:`${i}${e}${n}`:n}const ve={resolve(...e){let t="",i="",n=!1;for(let s=e.length-1;s>=-1;s--){let o;if(s>=0){if(o=e[s],de(o,"path"),0===o.length)continue}else 0===t.length?o=ie():(o=ne[`=${t}`]||ie(),(void 0===o||o.slice(0,2).toLowerCase()!==t.toLowerCase()&&o.charCodeAt(2)===le)&&(o=`${t}\\`));const r=o.length;let a=0,l="",h=!1;const c=o.charCodeAt(0);if(1===r)ge(c)&&(a=1,h=!0);else if(ge(c))if(h=!0,ge(o.charCodeAt(1))){let e=2,t=e;for(;e<r&&!ge(o.charCodeAt(e));)e++;if(e<r&&e!==t){const i=o.slice(t,e);for(t=e;e<r&&ge(o.charCodeAt(e));)e++;if(e<r&&e!==t){for(t=e;e<r&&!ge(o.charCodeAt(e));)e++;e!==r&&e===t||(l=`\\\\${i}\\${o.slice(t,e)}`,a=e)}}}else a=1;else fe(c)&&o.charCodeAt(1)===he&&(l=o.slice(0,2),a=2,r>2&&ge(o.charCodeAt(2))&&(h=!0,a=3));if(l.length>0)if(t.length>0){if(l.toLowerCase()!==t.toLowerCase())continue}else t=l;if(n){if(t.length>0)break}else if(i=`${o.slice(a)}\\${i}`,n=h,h&&t.length>0)break}return i=me(i,!n,"\\",ge),n?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){de(e,"path");const t=e.length;if(0===t)return".";let i,n=0,s=!1;const o=e.charCodeAt(0);if(1===t)return pe(o)?"\\":e;if(ge(o))if(s=!0,ge(e.charCodeAt(1))){let s=2,o=s;for(;s<t&&!ge(e.charCodeAt(s));)s++;if(s<t&&s!==o){const r=e.slice(o,s);for(o=s;s<t&&ge(e.charCodeAt(s));)s++;if(s<t&&s!==o){for(o=s;s<t&&!ge(e.charCodeAt(s));)s++;if(s===t)return`\\\\${r}\\${e.slice(o)}\\`;s!==o&&(i=`\\\\${r}\\${e.slice(o,s)}`,n=s)}}}else n=1;else fe(o)&&e.charCodeAt(1)===he&&(i=e.slice(0,2),n=2,t>2&&ge(e.charCodeAt(2))&&(s=!0,n=3));let r=n<t?me(e.slice(n),!s,"\\",ge):"";return 0!==r.length||s||(r="."),r.length>0&&ge(e.charCodeAt(t-1))&&(r+="\\"),void 0===i?s?`\\${r}`:r:s?`${i}\\${r}`:`${i}${r}`},isAbsolute(e){de(e,"path");const t=e.length;if(0===t)return!1;const i=e.charCodeAt(0);return ge(i)||t>2&&fe(i)&&e.charCodeAt(1)===he&&ge(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let t,i;for(let n=0;n<e.length;++n){const s=e[n];de(s,"path"),s.length>0&&(void 0===t?t=i=s:t+=`\\${s}`)}if(void 0===t)return".";let n=!0,s=0;if("string"==typeof i&&ge(i.charCodeAt(0))){++s;const e=i.length;e>1&&ge(i.charCodeAt(1))&&(++s,e>2&&(ge(i.charCodeAt(2))?++s:n=!1))}if(n){for(;s<t.length&&ge(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return ve.normalize(t)},relative(e,t){if(de(e,"from"),de(t,"to"),e===t)return"";const i=ve.resolve(e),n=ve.resolve(t);if(i===n)return"";if((e=i.toLowerCase())===(t=n.toLowerCase()))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===le;)s++;let o=e.length;for(;o-1>s&&e.charCodeAt(o-1)===le;)o--;const r=o-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===le;)a++;let l=t.length;for(;l-1>a&&t.charCodeAt(l-1)===le;)l--;const h=l-a,c=r<h?r:h;let d=-1,u=0;for(;u<c;u++){const i=e.charCodeAt(s+u);if(i!==t.charCodeAt(a+u))break;i===le&&(d=u)}if(u!==c){if(-1===d)return n}else{if(h>c){if(t.charCodeAt(a+u)===le)return n.slice(a+u+1);if(2===u)return n.slice(a+u)}r>c&&(e.charCodeAt(s+u)===le?d=u:2===u&&(d=3)),-1===d&&(d=0)}let g="";for(u=s+d+1;u<=o;++u)u!==o&&e.charCodeAt(u)!==le||(g+=0===g.length?"..":"\\..");return a+=d,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===le&&++a,n.slice(a,l))},toNamespacedPath(e){if("string"!=typeof e||0===e.length)return e;const t=ve.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===le){if(t.charCodeAt(1)===le){const e=t.charCodeAt(2);if(63!==e&&e!==re)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(fe(t.charCodeAt(0))&&t.charCodeAt(1)===he&&t.charCodeAt(2)===le)return`\\\\?\\${t}`;return e},dirname(e){de(e,"path");const t=e.length;if(0===t)return".";let i=-1,n=0;const s=e.charCodeAt(0);if(1===t)return ge(s)?e:".";if(ge(s)){if(i=n=1,ge(e.charCodeAt(1))){let s=2,o=s;for(;s<t&&!ge(e.charCodeAt(s));)s++;if(s<t&&s!==o){for(o=s;s<t&&ge(e.charCodeAt(s));)s++;if(s<t&&s!==o){for(o=s;s<t&&!ge(e.charCodeAt(s));)s++;if(s===t)return e;s!==o&&(i=n=s+1)}}}}else fe(s)&&e.charCodeAt(1)===he&&(i=t>2&&ge(e.charCodeAt(2))?3:2,n=i);let o=-1,r=!0;for(let i=t-1;i>=n;--i)if(ge(e.charCodeAt(i))){if(!r){o=i;break}}else r=!1;if(-1===o){if(-1===i)return".";o=i}return e.slice(0,o)},basename(e,t){void 0!==t&&de(t,"ext"),de(e,"path");let i,n=0,s=-1,o=!0;if(e.length>=2&&fe(e.charCodeAt(0))&&e.charCodeAt(1)===he&&(n=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let r=t.length-1,a=-1;for(i=e.length-1;i>=n;--i){const l=e.charCodeAt(i);if(ge(l)){if(!o){n=i+1;break}}else-1===a&&(o=!1,a=i+1),r>=0&&(l===t.charCodeAt(r)?-1==--r&&(s=i):(r=-1,s=a))}return n===s?s=a:-1===s&&(s=e.length),e.slice(n,s)}for(i=e.length-1;i>=n;--i)if(ge(e.charCodeAt(i))){if(!o){n=i+1;break}}else-1===s&&(o=!1,s=i+1);return-1===s?"":e.slice(n,s)},extname(e){de(e,"path");let t=0,i=-1,n=0,s=-1,o=!0,r=0;e.length>=2&&e.charCodeAt(1)===he&&fe(e.charCodeAt(0))&&(t=n=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(ge(t)){if(!o){n=a+1;break}}else-1===s&&(o=!1,s=a+1),t===re?-1===i?i=a:1!==r&&(r=1):-1!==i&&(r=-1)}return-1===i||-1===s||0===r||1===r&&i===s-1&&i===n+1?"":e.slice(i,s)},format:be.bind(null,"\\"),parse(e){de(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.length;let n=0,s=e.charCodeAt(0);if(1===i)return ge(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(ge(s)){if(n=1,ge(e.charCodeAt(1))){let t=2,s=t;for(;t<i&&!ge(e.charCodeAt(t));)t++;if(t<i&&t!==s){for(s=t;t<i&&ge(e.charCodeAt(t));)t++;if(t<i&&t!==s){for(s=t;t<i&&!ge(e.charCodeAt(t));)t++;t===i?n=t:t!==s&&(n=t+1)}}}}else if(fe(s)&&e.charCodeAt(1)===he){if(i<=2)return t.root=t.dir=e,t;if(n=2,ge(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;n=3}}n>0&&(t.root=e.slice(0,n));let o=-1,r=n,a=-1,l=!0,h=e.length-1,c=0;for(;h>=n;--h)if(s=e.charCodeAt(h),ge(s)){if(!l){r=h+1;break}}else-1===a&&(l=!1,a=h+1),s===re?-1===o?o=h:1!==c&&(c=1):-1!==o&&(c=-1);return-1!==a&&(-1===o||0===c||1===c&&o===a-1&&o===r+1?t.base=t.name=e.slice(r,a):(t.name=e.slice(r,o),t.base=e.slice(r,a),t.ext=e.slice(o,a))),t.dir=r>0&&r!==n?e.slice(0,r-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},we=(()=>{if(ue){const e=/\\/g;return()=>{const t=ie().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>ie()})(),_e={resolve(...e){let t="",i=!1;for(let n=e.length-1;n>=-1&&!i;n--){const s=n>=0?e[n]:we();de(s,"path"),0!==s.length&&(t=`${s}/${t}`,i=s.charCodeAt(0)===ae)}return t=me(t,!i,"/",pe),i?`/${t}`:t.length>0?t:"."},normalize(e){if(de(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===ae,i=e.charCodeAt(e.length-1)===ae;return 0===(e=me(e,!t,"/",pe)).length?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return de(e,"path"),e.length>0&&e.charCodeAt(0)===ae},join(...e){if(0===e.length)return".";let t;for(let i=0;i<e.length;++i){const n=e[i];de(n,"path"),n.length>0&&(void 0===t?t=n:t+=`/${n}`)}return void 0===t?".":_e.normalize(t)},relative(e,t){if(de(e,"from"),de(t,"to"),e===t)return"";if((e=_e.resolve(e))===(t=_e.resolve(t)))return"";const i=e.length,n=i-1,s=t.length-1,o=n<s?n:s;let r=-1,a=0;for(;a<o;a++){const i=e.charCodeAt(1+a);if(i!==t.charCodeAt(1+a))break;i===ae&&(r=a)}if(a===o)if(s>o){if(t.charCodeAt(1+a)===ae)return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else n>o&&(e.charCodeAt(1+a)===ae?r=a:0===a&&(r=0));let l="";for(a=1+r+1;a<=i;++a)a!==i&&e.charCodeAt(a)!==ae||(l+=0===l.length?"..":"/..");return`${l}${t.slice(1+r)}`},toNamespacedPath(e){return e},dirname(e){if(de(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===ae;let i=-1,n=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===ae){if(!n){i=t;break}}else n=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&de(t,"ext"),de(e,"path");let i,n=0,s=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let r=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){const l=e.charCodeAt(i);if(l===ae){if(!o){n=i+1;break}}else-1===a&&(o=!1,a=i+1),r>=0&&(l===t.charCodeAt(r)?-1==--r&&(s=i):(r=-1,s=a))}return n===s?s=a:-1===s&&(s=e.length),e.slice(n,s)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===ae){if(!o){n=i+1;break}}else-1===s&&(o=!1,s=i+1);return-1===s?"":e.slice(n,s)},extname(e){de(e,"path");let t=-1,i=0,n=-1,s=!0,o=0;for(let r=e.length-1;r>=0;--r){const a=e.charCodeAt(r);if(a!==ae)-1===n&&(s=!1,n=r+1),a===re?-1===t?t=r:1!==o&&(o=1):-1!==t&&(o=-1);else if(!s){i=r+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===i+1?"":e.slice(t,n)},format:be.bind(null,"/"),parse(e){de(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.charCodeAt(0)===ae;let n;i?(t.root="/",n=1):n=0;let s=-1,o=0,r=-1,a=!0,l=e.length-1,h=0;for(;l>=n;--l){const t=e.charCodeAt(l);if(t!==ae)-1===r&&(a=!1,r=l+1),t===re?-1===s?s=l:1!==h&&(h=1):-1!==s&&(h=-1);else if(!a){o=l+1;break}}if(-1!==r){const n=0===o&&i?1:o;-1===s||0===h||1===h&&s===r-1&&s===o+1?t.base=t.name=e.slice(n,r):(t.name=e.slice(n,s),t.base=e.slice(n,r),t.ext=e.slice(s,r))}return o>0?t.dir=e.slice(0,o-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};_e.win32=ve.win32=ve,_e.posix=ve.posix=_e;const ye=ue?ve.normalize:_e.normalize,Ce=ue?ve.isAbsolute:_e.isAbsolute,Se=ue?ve.join:_e.join,ke=ue?ve.resolve:_e.resolve,xe=ue?ve.relative:_e.relative,Ee=ue?ve.dirname:_e.dirname,De=ue?ve.basename:_e.basename,Le=ue?ve.extname:_e.extname,Ie=(ue?ve.parse:_e.parse,ue?ve.sep:_e.sep),Te=(ue?ve.delimiter:_e.delimiter,/^\w[\w\d+.-]*$/),Ne=/^\//,Ae=/^\/\//;const Me="",Re="/",Oe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Fe{static isUri(e){return e instanceof Fe||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}constructor(e,t,i,n,s,o=!1){"object"==typeof e?(this.scheme=e.scheme||Me,this.authority=e.authority||Me,this.path=e.path||Me,this.query=e.query||Me,this.fragment=e.fragment||Me):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||Me,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Re&&(t=Re+t):t=Re}return t}(this.scheme,i||Me),this.query=n||Me,this.fragment=s||Me,function(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!Te.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!Ne.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Ae.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}get fsPath(){return Ve(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:s,fragment:o}=e;return void 0===t?t=this.scheme:null===t&&(t=Me),void 0===i?i=this.authority:null===i&&(i=Me),void 0===n?n=this.path:null===n&&(n=Me),void 0===s?s=this.query:null===s&&(s=Me),void 0===o?o=this.fragment:null===o&&(o=Me),t===this.scheme&&i===this.authority&&n===this.path&&s===this.query&&o===this.fragment?this:new Be(t,i,n,s,o)}static parse(e,t=!1){const i=Oe.exec(e);return i?new Be(i[2]||Me,$e(i[4]||Me),$e(i[5]||Me),$e(i[7]||Me),$e(i[9]||Me),t):new Be(Me,Me,Me,Me,Me)}static file(e){let t=Me;if(A&&(e=e.replace(/\\/g,Re)),e[0]===Re&&e[1]===Re){const i=e.indexOf(Re,2);-1===i?(t=e.substring(2),e=Re):(t=e.substring(2,i),e=e.substring(i)||Re)}return new Be("file",t,e,Me,Me)}static from(e,t){return new Be(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return i=A&&"file"===e.scheme?Fe.file(ve.join(Ve(e,!0),...t)).path:_e.join(e.path,...t),e.with({path:i})}toString(e=!1){return Ue(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Fe)return e;{const t=new Be(e);return t._formatted=e.external??null,t._fsPath=e._sep===Pe?e.fsPath??null:null,t}}return e}}const Pe=A?1:void 0;class Be extends Fe{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Ve(this,!1)),this._fsPath}toString(e=!1){return e?Ue(this,!0):(this._formatted||(this._formatted=Ue(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Pe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const ze={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function We(e,t,i){let n,s=-1;for(let o=0;o<e.length;o++){const r=e.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||45===r||46===r||95===r||126===r||t&&47===r||i&&91===r||i&&93===r||i&&58===r)-1!==s&&(n+=encodeURIComponent(e.substring(s,o)),s=-1),void 0!==n&&(n+=e.charAt(o));else{void 0===n&&(n=e.substr(0,o));const t=ze[r];void 0!==t?(-1!==s&&(n+=encodeURIComponent(e.substring(s,o)),s=-1),n+=t):-1===s&&(s=o)}}return-1!==s&&(n+=encodeURIComponent(e.substring(s))),void 0!==n?n:e}function He(e){let t;for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);35===n||63===n?(void 0===t&&(t=e.substr(0,i)),t+=ze[n]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}function Ve(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,A&&(i=i.replace(/\//g,"\\")),i}function Ue(e,t){const i=t?He:We;let n="",{scheme:s,authority:o,path:r,query:a,fragment:l}=e;if(s&&(n+=s,n+=":"),(o||"file"===s)&&(n+=Re,n+=Re),o){let e=o.indexOf("@");if(-1!==e){const t=o.substr(0,e);o=o.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=i(t,!1,!1):(n+=i(t.substr(0,e),!1,!1),n+=":",n+=i(t.substr(e+1),!1,!0)),n+="@"}o=o.toLowerCase(),e=o.lastIndexOf(":"),-1===e?n+=i(o,!1,!0):(n+=i(o.substr(0,e),!1,!0),n+=o.substr(e))}if(r){if(r.length>=3&&47===r.charCodeAt(0)&&58===r.charCodeAt(2)){const e=r.charCodeAt(1);e>=65&&e<=90&&(r=`/${String.fromCharCode(e+32)}:${r.substr(3)}`)}else if(r.length>=2&&58===r.charCodeAt(1)){const e=r.charCodeAt(0);e>=65&&e<=90&&(r=`${String.fromCharCode(e+32)}:${r.substr(2)}`)}n+=i(r,!0,!1)}return a&&(n+="?",n+=i(a,!1,!1)),l&&(n+="#",n+=t?l:We(l,!1,!1)),n}function Ke(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+Ke(e.substr(3)):e}}const qe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function $e(e){return e.match(qe)?e.replace(qe,(e=>Ke(e))):e}const je=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack){if(st.isErrorNoTelemetry(e))throw new st(e.message+"\n\n"+e.stack);throw new Error(e.message+"\n\n"+e.stack)}throw e}),0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach((t=>{t(e)}))}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function Ge(e){Qe(e)||je.onUnexpectedError(e)}function Ye(e){if(e instanceof Error){const{name:t,message:i}=e;return{$isError:!0,name:t,message:i,stack:e.stacktrace||e.stack,noTelemetry:st.isErrorNoTelemetry(e)}}return e}const Xe="Canceled";function Qe(e){return e instanceof Ze||e instanceof Error&&e.name===Xe&&e.message===Xe}class Ze extends Error{constructor(){super(Xe),this.name=this.message}}function Je(){const e=new Error(Xe);return e.name=e.message,e}function et(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function tt(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}TypeError;function it(e){return e?e.message?e.message:e.stack?e.stack.split("\n")[0]:String(e):"Error"}Error;class nt extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class st extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof st)return e;const t=new st;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return"CodeExpectedError"===e.name}}class ot extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,ot.prototype)}}function rt(e,t=0){return e[e.length-(1+t)]}function at(e,t,i=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!i(e[n],t[n]))return!1;return!0}function lt(e){return e.filter((e=>!!e))}function ht(e){return Array.isArray(e)&&e.length>0}function ct(e,t=(e=>e)){const i=new Set;return e.filter((e=>{const n=t(e);return!i.has(n)&&(i.add(n),!0)}))}function dt(e,t){return e.length>0?e[0]:t}function ut(e,t){let i="number"==typeof t?e:0;"number"==typeof t?i=e:(i=0,t=e);const n=[];if(i<=t)for(let e=i;e<t;e++)n.push(e);else for(let e=i;e>t;e--)n.push(e);return n}function gt(e,t){return e.push(t),()=>function(e,t){const i=e.indexOf(t);if(i>-1)return e.splice(i,1),t;return}(e,t)}function pt(e,t,i){const n=e.slice(0,t),s=e.slice(t);return n.concat(i,s)}function ft(e,t){let i;if("number"==typeof t){let e=t;i=()=>{const t=179426549*Math.sin(e++);return t-Math.floor(t)}}else i=Math.random;for(let t=e.length-1;t>0;t-=1){const n=Math.floor(i()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}}function mt(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))}function bt(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))}function vt(e,t){for(const i of t)e.push(i)}function wt(e,t,i,n){const s=_t(e,t);let o=e.splice(s,i);return void 0===o&&(o=[]),function(e,t,i){const n=_t(e,t),s=e.length,o=i.length;e.length=s+o;for(let t=s-1;t>=n;t--)e[t+o]=e[t];for(let t=0;t<o;t++)e[t+n]=i[t]}(e,s,n),o}function _t(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}var yt;function Ct(e,t){return(i,n)=>t(e(i),e(n))}!function(e){e.isLessThan=function(e){return e<0},e.isLessThanOrEqual=function(e){return e<=0},e.isGreaterThan=function(e){return e>0},e.isNeitherLessOrGreaterThan=function(e){return 0===e},e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(yt||(yt={}));const St=(e,t)=>e-t;class kt{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(0!==this.length)return this.items[this.firstIdx]}peekLast(){if(0!==this.length)return this.items[this.lastIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){const e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class xt{static{this.empty=new xt((e=>{}))}constructor(e){this.iterate=e}forEach(e){this.iterate((t=>(e(t),!0)))}toArray(){const e=[];return this.iterate((t=>(e.push(t),!0))),e}filter(e){return new xt((t=>this.iterate((i=>!e(i)||t(i)))))}map(e){return new xt((t=>this.iterate((i=>t(e(i))))))}some(e){let t=!1;return this.iterate((i=>(t=e(i),!t))),t}findFirst(e){let t;return this.iterate((i=>!e(i)||(t=i,!1))),t}findLast(e){let t;return this.iterate((i=>(e(i)&&(t=i),!0))),t}findLastMaxBy(e){let t,i=!0;return this.iterate((n=>((i||yt.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0))),t}}var Et,Dt,Lt,It;function Tt(e,t,i){let n=e.get(t);return void 0===n&&(n=i,e.set(t,n)),n}class Nt{constructor(e,t){this.uri=e,this.value=t}}class At{static{this.defaultToKey=e=>e.toString()}constructor(e,t){if(this[Et]="ResourceMap",e instanceof At)this.map=new Map(e.map),this.toKey=t??At.defaultToKey;else if(function(e){return Array.isArray(e)}(e)){this.map=new Map,this.toKey=t??At.defaultToKey;for(const[t,i]of e)this.set(t,i)}else this.map=new Map,this.toKey=e??At.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Nt(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(const[t,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Et=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}class Mt{constructor(e,t){this[Dt]="ResourceSet",e&&"function"!=typeof e?(this._map=new At(t),e.forEach(this.add,this)):this._map=new At(e)}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach(((i,n)=>e.call(t,n,n,this)))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Dt=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}class Rt{constructor(){this[Lt]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,0!==i&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:case 2:default:this.addItemLast(n);break;case 1:this.addItemFirst(n)}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.key,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.value,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:[i.key,i.value],done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}[(Lt=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,i)=>{e.push([i,t])})),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class Ot extends Rt{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class Ft extends Ot{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class Pt{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return void 0!==t&&(this._m1.delete(e),this._m2.delete(t),!0)}forEach(e,t){this._m1.forEach(((i,n)=>{e.call(t,i,n,this)}))}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Bt{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}function zt(e,t){const i=this;let n,s=!1;return function(){if(s)return n;if(s=!0,t)try{n=e.apply(i,arguments)}finally{t()}else n=e.apply(i,arguments);return n}}!function(e){function t(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=t;const i=Object.freeze([]);function*n(e){yield e}e.empty=function(){return i},e.single=n,e.wrap=function(e){return t(e)?e:n(e)},e.from=function(e){return e||i},e.reverse=function*(e){for(let t=e.length-1;t>=0;t--)yield e[t]},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const i of e)if(t(i))return!0;return!1},e.find=function(e,t){for(const i of e)if(t(i))return i},e.filter=function*(e,t){for(const i of e)t(i)&&(yield i)},e.map=function*(e,t){let i=0;for(const n of e)yield t(n,i++)},e.concat=function*(...e){for(const t of e)yield*t},e.reduce=function(e,t,i){let n=i;for(const i of e)n=t(n,i);return n},e.slice=function*(e,t,i=e.length){for(t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]},e.consume=function(t,i=Number.POSITIVE_INFINITY){const n=[];if(0===i)return[n,t];const s=t[Symbol.iterator]();for(let t=0;t<i;t++){const t=s.next();if(t.done)return[n,e.empty()];n.push(t.value)}return[n,{[Symbol.iterator](){return s}}]},e.asyncToArray=async function(e){const t=[];for await(const i of e)t.push(i);return Promise.resolve(t)}}(It||(It={}));let Wt=null;class Ht{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let t=this.livingDisposables.get(e);return t||(t={parent:null,source:null,isSingleton:!1,value:e,idx:Ht.idx++},this.livingDisposables.set(e,t)),t}trackDisposable(e){const t=this.getDisposableData(e);t.source||(t.source=(new Error).stack)}setParent(e,t){this.getDisposableData(e).parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){const i=t.get(e);if(i)return i;const n=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,n),n}getTrackedDisposables(){const e=new Map;return[...this.livingDisposables.entries()].filter((([,t])=>null!==t.source&&!this.getRootParent(t,e).isSingleton)).flatMap((([e])=>e))}computeLeakingDisposables(e=10,t){let i;if(t)i=t;else{const e=new Map,t=[...this.livingDisposables.values()].filter((t=>null!==t.source&&!this.getRootParent(t,e).isSingleton));if(0===t.length)return;const n=new Set(t.map((e=>e.value)));if(i=t.filter((e=>!(e.parent&&n.has(e.parent)))),0===i.length)throw new Error("There are cyclic diposable chains!")}if(!i)return;function n(e){const t=e.source.split("\n").map((e=>e.trim().replace("at ",""))).filter((e=>""!==e));return function(e,t){for(;e.length>0&&t.some((t=>"string"==typeof t?t===e[0]:e[0].match(t)));)e.shift()}(t,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),t.reverse()}const s=new SetMap;for(const e of i){const t=n(e);for(let i=0;i<=t.length;i++)s.add(t.slice(0,i).join("\n"),e)}i.sort(compareBy((e=>e.idx),numberComparator));let o="",r=0;for(const t of i.slice(0,e)){r++;const e=n(t),a=[];for(let t=0;t<e.length;t++){let o=e[t];o=`(shared with ${s.get(e.slice(0,t+1).join("\n")).size}/${i.length} leaks) at ${o}`;const r=s.get(e.slice(0,t).join("\n")),l=groupBy([...r].map((e=>n(e)[t])),(e=>e));delete l[e[t]];for(const[e,t]of Object.entries(l))a.unshift(`    - stacktraces of ${t.length} other leaks continue with ${e}`);a.unshift(o)}o+=`\n\n\n==================== Leaking disposable ${r}/${i.length}: ${t.value.constructor.name} ====================\n${a.join("\n")}\n============================================================\n\n`}return i.length>e&&(o+=`\n\n\n... and ${i.length-e} more leaking disposables\n\n`),{leaks:i,details:o}}}function Vt(e){return Wt?.trackDisposable(e),e}function Ut(e){Wt?.markAsDisposed(e)}function Kt(e,t){Wt?.setParent(e,t)}function qt(e){return Wt?.markAsSingleton(e),e}function $t(e){return"object"==typeof e&&null!==e&&"function"==typeof e.dispose&&0===e.dispose.length}function jt(e){if(It.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(e){t.push(e)}if(1===t.length)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function Gt(...e){const t=Yt((()=>jt(e)));return function(e,t){if(Wt)for(const i of e)Wt.setParent(i,t)}(e,t),t}function Yt(e){const t=Vt({dispose:zt((()=>{Ut(t),e()}))});return t}class Xt{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this._toDispose=new Set,this._isDisposed=!1,Vt(this)}dispose(){this._isDisposed||(Ut(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{jt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Kt(e,this),this._isDisposed?Xt.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Kt(e,null))}}class Qt{static{this.None=Object.freeze({dispose(){}})}constructor(){this._store=new Xt,Vt(this),Kt(this._store,this)}dispose(){Ut(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}class Zt{constructor(){this._isDisposed=!1,Vt(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&Kt(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,Ut(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&Kt(e,null),e}}class Jt{constructor(e){this.object=e}dispose(){}}class ei{constructor(){this._store=new Map,this._isDisposed=!1,Vt(this)}dispose(){Ut(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{jt(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,i=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}}class ti{static{this.Undefined=new ti(void 0)}constructor(e){this.element=e,this.next=ti.Undefined,this.prev=ti.Undefined}}class ii{constructor(){this._first=ti.Undefined,this._last=ti.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===ti.Undefined}clear(){let e=this._first;for(;e!==ti.Undefined;){const t=e.next;e.prev=ti.Undefined,e.next=ti.Undefined,e=t}this._first=ti.Undefined,this._last=ti.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new ti(e);if(this._first===ti.Undefined)this._first=i,this._last=i;else if(t){const e=this._last;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==ti.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ti.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ti.Undefined&&e.next!==ti.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===ti.Undefined&&e.next===ti.Undefined?(this._first=ti.Undefined,this._last=ti.Undefined):e.next===ti.Undefined?(this._last=this._last.prev,this._last.next=ti.Undefined):e.prev===ti.Undefined&&(this._first=this._first.next,this._first.prev=ti.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ti.Undefined;)yield e.element,e=e.next}}const ni=globalThis.performance&&"function"==typeof globalThis.performance.now;class si{static create(e){return new si(e)}constructor(e){this._now=ni&&!1===e?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}var oi;!function(e){function t(e){return(t,i=null,n)=>{let s,o=!1;return s=e((e=>{if(!o)return s?s.dispose():o=!0,t.call(i,e)}),null,n),o&&s.dispose(),s}}function i(e,t,i){return s(((i,n=null,s)=>e((e=>i.call(n,t(e))),null,s)),i)}function n(e,t,i){return s(((i,n=null,s)=>e((e=>t(e)&&i.call(n,e)),null,s)),i)}function s(e,t){let i;const n=new ui({onWillAddFirstListener(){i=e(n.fire,n)},onDidRemoveLastListener(){i?.dispose()}});return t?.add(n),n.event}function o(e,t,i=100,n=!1,s=!1,o,r){let a,l,h,c,d=0;const u=new ui({leakWarningThreshold:o,onWillAddFirstListener(){a=e((e=>{d++,l=t(l,e),n&&!h&&(u.fire(l),l=void 0),c=()=>{const e=l;l=void 0,h=void 0,(!n||d>1)&&u.fire(e),d=0},"number"==typeof i?(clearTimeout(h),h=setTimeout(c,i)):void 0===h&&(h=0,queueMicrotask(c))}))},onWillRemoveListener(){s&&d>0&&c?.()},onDidRemoveLastListener(){c=void 0,a.dispose()}});return r?.add(u),u.event}e.None=()=>Qt.None,e.defer=function(e,t){return o(e,(()=>{}),0,void 0,!0,void 0,t)},e.once=t,e.map=i,e.forEach=function(e,t,i){return s(((i,n=null,s)=>e((e=>{t(e),i.call(n,e)}),null,s)),i)},e.filter=n,e.signal=function(e){return e},e.any=function(...e){return(t,i=null,n)=>{const s=Gt(...e.map((e=>e((e=>t.call(i,e))))));return function(e,t){t instanceof Array?t.push(e):t&&t.add(e);return e}(s,n)}},e.reduce=function(e,t,n,s){let o=n;return i(e,(e=>(o=t(o,e),o)),s)},e.debounce=o,e.accumulate=function(t,i=0,n){return e.debounce(t,((e,t)=>e?(e.push(t),e):[t]),i,void 0,!0,void 0,n)},e.latch=function(e,t=((e,t)=>e===t),i){let s,o=!0;return n(e,(e=>{const i=o||!t(e,s);return o=!1,s=e,i}),i)},e.split=function(t,i,n){return[e.filter(t,i,n),e.filter(t,(e=>!i(e)),n)]},e.buffer=function(e,t=!1,i=[],n){let s=i.slice(),o=e((e=>{s?s.push(e):a.fire(e)}));n&&n.add(o);const r=()=>{s?.forEach((e=>a.fire(e))),s=null},a=new ui({onWillAddFirstListener(){o||(o=e((e=>a.fire(e))),n&&n.add(o))},onDidAddFirstListener(){s&&(t?setTimeout(r):r())},onDidRemoveLastListener(){o&&o.dispose(),o=null}});return n&&n.add(a),a.event},e.chain=function(e,t){return(i,n,s)=>{const o=t(new a);return e((function(e){const t=o.evaluate(e);t!==r&&i.call(n,t)}),void 0,s)}};const r=Symbol("HaltChainable");class a{constructor(){this.steps=[]}map(e){return this.steps.push(e),this}forEach(e){return this.steps.push((t=>(e(t),t))),this}filter(e){return this.steps.push((t=>e(t)?t:r)),this}reduce(e,t){let i=t;return this.steps.push((t=>(i=e(i,t),i))),this}latch(e=((e,t)=>e===t)){let t,i=!0;return this.steps.push((n=>{const s=i||!e(n,t);return i=!1,t=n,s?n:r})),this}evaluate(e){for(const t of this.steps)if((e=t(e))===r)break;return e}}e.fromNodeEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>s.fire(i(...e)),s=new ui({onWillAddFirstListener:()=>e.on(t,n),onDidRemoveLastListener:()=>e.removeListener(t,n)});return s.event},e.fromDOMEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>s.fire(i(...e)),s=new ui({onWillAddFirstListener:()=>e.addEventListener(t,n),onDidRemoveLastListener:()=>e.removeEventListener(t,n)});return s.event},e.toPromise=function(e){return new Promise((i=>t(e)(i)))},e.fromPromise=function(e){const t=new ui;return e.then((e=>{t.fire(e)}),(()=>{t.fire(void 0)})).finally((()=>{t.dispose()})),t.event},e.runAndSubscribe=function(e,t,i){return t(i),e((e=>t(e)))};class l{constructor(e,t){this._observable=e,this._counter=0,this._hasChanged=!1;const i={onWillAddFirstListener:()=>{e.addObserver(this)},onDidRemoveLastListener:()=>{e.removeObserver(this)}};this.emitter=new ui(i),t&&t.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}e.fromObservable=function(e,t){return new l(e,t).emitter.event},e.fromObservableLight=function(e){return(t,i,n)=>{let s=0,o=!1;const r={beginUpdate(){s++},endUpdate(){s--,0===s&&(e.reportChanges(),o&&(o=!1,t.call(i)))},handlePossibleChange(){},handleChange(){o=!0}};e.addObserver(r),e.reportChanges();const a={dispose(){e.removeObserver(r)}};return n instanceof Xt?n.add(a):Array.isArray(n)&&n.push(a),a}}}(oi||(oi={}));class ri{static{this.all=new Set}static{this._idPool=0}constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${ri._idPool++}`,ri.all.add(this)}start(e){this._stopWatch=new si,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}let ai=-1;class li{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){let e;this._warnCountdown=.5*i;let n=0;for(const[t,i]of this._stacks)(!e||n<i)&&(e=t,n=i);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${n}):`),console.warn(e)}return()=>{const t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}}class hi{static create(){return new hi((new Error).stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}let ci=0;class di{constructor(e){this.value=e,this.id=ci++}}class ui{constructor(e){this._size=0,this._options=e,this._leakageMon=ai>0||this._options?.leakWarningThreshold?new li(this._options?.leakWarningThreshold??ai):void 0,this._perfMon=this._options?._profName?new ri(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,i)=>{if(this._leakageMon&&this._size>3*this._leakageMon.threshold)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Qt.None;if(this._disposed)return Qt.None;t&&(e=e.bind(t));const n=new di(e);let s;this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(n.stack=hi.create(),s=this._leakageMon.check(n.stack,this._size+1)),this._listeners?this._listeners instanceof di?(this._deliveryQueue??=new gi,this._listeners=[this._listeners,n]):this._listeners.push(n):(this._options?.onWillAddFirstListener?.(this),this._listeners=n,this._options?.onDidAddFirstListener?.(this)),this._size++;const o=Yt((()=>{s?.(),this._removeListener(n)}));return i instanceof Xt?i.add(o):Array.isArray(i)&&i.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(1===this._size)return this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),void(this._size=0);const t=this._listeners,i=t.indexOf(e);if(-1===i)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const n=this._deliveryQueue.current===this;if(2*this._size<=t.length){let e=0;for(let i=0;i<t.length;i++)t[i]?t[e++]=t[i]:n&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=e}}_deliver(e,t){if(!e)return;const i=this._options?.onListenerError||Ge;if(i)try{e.value(t)}catch(e){i(e)}else e.value(t)}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof di)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}else;this._perfMon?.stop()}hasListeners(){return this._size>0}}class gi{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class pi extends ui{get isPaused(){return 0!==this._isPaused}constructor(e){super(e),this._isPaused=0,this._eventQueue=new ii,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0==--this._isPaused)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class fi extends pi{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout((()=>{this._handle=void 0,this.resume()}),this._delay)),super.fire(e)}}class mi extends ui{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),1===this._queuedEvents.length&&queueMicrotask((()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach((e=>super.fire(e))),this._queuedEvents=[]})))}}class bi{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e((e=>{const n=this.buffers[this.buffers.length-1];n?n.push((()=>t.call(i,e))):t.call(i,e)}),void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach((e=>e())),i}}class vi{constructor(){this.listening=!1,this.inputEvent=oi.None,this.inputEventListener=Qt.None,this.emitter=new ui({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class wi{static const(e){return new _i(e)}constructor(e){this._value=e,this._onDidChange=new ui,this.onDidChange=this._onDidChange.event}get value(){return this._value}set value(e){e!==this._value&&(this._value=e,this._onDidChange.fire(void 0))}}class _i{constructor(e){this.value=e,this.onDidChange=oi.None}}const yi=Object.freeze((function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}));var Ci;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof Si||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:oi.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:yi})}(Ci||(Ci={}));class Si{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?yi:(this._emitter||(this._emitter=new ui),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class ki{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Si),this._token}cancel(){this._token?this._token instanceof Si&&this._token.cancel():this._token=Ci.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Si&&this._token.dispose():this._token=Ci.None}}function xi(e){return e}class Ei{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,"function"==typeof e?(this._fn=e,this._computeKey=xi):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class Di{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,"function"==typeof e?(this._fn=e,this._computeKey=xi):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class Li{constructor(e){this.executor=e,this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}const Ii=/{(\d+)}/g;function Ti(e,...t){return 0===t.length?e:e.replace(Ii,(function(e,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=t.length?e:t[n]}))}function Ni(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}function Ai(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Mi(e,t){if(!e||!t)return e;const i=t.length;if(0===i||0===e.length)return e;let n=0;for(;e.indexOf(t,n)===n;)n+=i;return e.substring(n)}function Ri(e,t){if(!e||!t)return e;const i=t.length,n=e.length;if(0===i||0===n)return e;let s=n,o=-1;for(;o=e.lastIndexOf(t,s-1),-1!==o&&o+i===s;){if(0===o)return"";s=o}return e.substring(0,s)}function Oi(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Ai(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let n="";return i.global&&(n+="g"),i.matchCase||(n+="i"),i.multiline&&(n+="m"),i.unicode&&(n+="u"),new RegExp(e,n)}function Fi(e){return e.split(/\r\n|\r|\n/)}function Pi(e){for(let t=0,i=e.length;t<i;t++){const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1}function Bi(e,t=e.length-1){for(let i=t;i>=0;i--){const t=e.charCodeAt(i);if(32!==t&&9!==t)return i}return-1}function zi(e,t){return e<t?-1:e>t?1:0}function Wi(e,t,i=0,n=e.length,s=0,o=t.length){for(;i<n&&s<o;i++,s++){const n=e.charCodeAt(i),o=t.charCodeAt(s);if(n<o)return-1;if(n>o)return 1}const r=n-i,a=o-s;return r<a?-1:r>a?1:0}function Hi(e,t){return Vi(e,t,0,e.length,0,t.length)}function Vi(e,t,i=0,n=e.length,s=0,o=t.length){for(;i<n&&s<o;i++,s++){let r=e.charCodeAt(i),a=t.charCodeAt(s);if(r===a)continue;if(r>=128||a>=128)return Wi(e.toLowerCase(),t.toLowerCase(),i,n,s,o);Ui(r)&&(r-=32),Ui(a)&&(a-=32);const l=r-a;if(0!==l)return l}const r=n-i,a=o-s;return r<a?-1:r>a?1:0}function Ui(e){return e>=97&&e<=122}function Ki(e){return e>=65&&e<=90}function qi(e,t){return e.length===t.length&&0===Vi(e,t)}function $i(e,t){const i=t.length;return!(t.length>e.length)&&0===Vi(e,t,0,i)}function ji(e){return 55296<=e&&e<=56319}function Gi(e){return 56320<=e&&e<=57343}function Yi(e,t){return t-56320+(e-55296<<10)+65536}function Xi(e,t,i){const n=e.charCodeAt(i);if(ji(n)&&i+1<t){const t=e.charCodeAt(i+1);if(Gi(t))return Yi(n,t)}return n}class Qi{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=function(e,t){const i=e.charCodeAt(t-1);if(Gi(i)&&t>1){const n=e.charCodeAt(t-2);if(ji(n))return Yi(n,i)}return i}(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=Xi(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class Zi{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Qi(e,t)}nextGraphemeLength(){const e=un.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const i=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(dn(n,s)){t.setOffset(i);break}n=s}return t.offset-i}prevGraphemeLength(){const e=un.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const i=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(dn(s,n)){t.setOffset(i);break}n=s}return i-t.offset}eol(){return this._iterator.eol()}}function Ji(e,t){return new Zi(e,t).nextGraphemeLength()}function en(e,t){t>0&&Gi(e.charCodeAt(t))&&t--;const i=t+Ji(e,t),n=i-function(e,t){return new Zi(e,t).prevGraphemeLength()}(e,i);return[n,i]}let tn;function nn(e){return tn||(tn=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),tn.test(e)}const sn=/^[\t\n\r\x20-\x7E]*$/;function on(e){return sn.test(e)}const rn=/[\u2028\u2029]/;function an(e){return rn.test(e)}function ln(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}const hn=String.fromCharCode(65279);function cn(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function dn(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}class un{static{this._INSTANCE=null}static getInstance(){return un._INSTANCE||(un._INSTANCE=new un),un._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n*=2;else{if(!(e>t[3*n+1]))return t[3*n+2];n=2*n+1}return 0}}class gn{static{this.ambiguousCharacterData=new Li((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')))}static{this.cache=new Ei({getCacheKey:JSON.stringify},(e=>{function t(e){const t=new Map;for(let i=0;i<e.length;i+=2)t.set(e[i],e[i+1]);return t}function i(e,t){if(!e)return t;const i=new Map;for(const[n,s]of e)t.has(n)&&i.set(n,s);return i}const n=this.ambiguousCharacterData.value;let s,o=e.filter((e=>!e.startsWith("_")&&e in n));0===o.length&&(o=["_default"]);for(const e of o){s=i(s,t(n[e]))}const r=function(e,t){const i=new Map(e);for(const[e,n]of t)i.set(e,n);return i}(t(n._common),s);return new gn(r)}))}static getInstance(e){return gn.cache.get(Array.from(e))}static{this._locales=new Li((()=>Object.keys(gn.ambiguousCharacterData.value).filter((e=>!e.startsWith("_")))))}static getLocales(){return gn._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}class pn{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(pn.getRawData())),this._data}static isInvisibleCharacter(e){return pn.getData().has(e)}static get codePoints(){return pn.getData()}}const fn="vs/platform/extensionManagement/common/extensionManagement";new RegExp("^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$");var mn,bn;!function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.Delete="Delete",e.Rename="Rename",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.Signature="Signature",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"}(mn||(mn={}));Error;!function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed"}(bn||(bn={}));Error;g(fn,0,"Extensions"),g(fn,1,"Preferences");var vn;function wn(e,t){return Fe.isUri(e)?qi(e.scheme,t):$i(e,t+":")}function _n(e,...t){return t.some((t=>wn(e,t)))}!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompreBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting"}(vn||(vn={}));const yn=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=function(e,t){return _e.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return _e.join(this._serverRootPath,vn.vscodeRemoteResource)}set(e,t,i){this._hosts[e]=t,this._ports[e]=i}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(t){return Ge(t),e}const t=e.authority;let i=this._hosts[t];i&&-1!==i.indexOf(":")&&-1===i.indexOf("[")&&(i=`[${i}]`);const n=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return"string"==typeof s&&(o+=`&tkn=${encodeURIComponent(s)}`),Fe.from({scheme:F?this._preferredWebSchema:vn.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:o})}};class Cn{constructor(){this.staticBrowserUris=new At,this.appResourcePathUrls=new Map,this.moduleContentProvider=new Map}static{this.FALLBACK_AUTHORITY="vscode-app"}registerModuleContentProvider(e,t){this.moduleContentProvider.set(e,t)}toModuleContent(e){return this.moduleContentProvider.get(e)()}registerAppResourcePathUrl(e,t){this.appResourcePathUrls.set(e,t)}toUrl(e){let t=this.appResourcePathUrls.get(e);return"function"==typeof t&&(t=t()),new URL(t??e,globalThis.location?.href??"file:///home/runner/work/mage-ai/mage-ai/mage_ai/frontend/node_modules/@codingame/monaco-vscode-python-default-extension/node_modules/vscode/vscode/src/vs/base/common/network.js").toString()}asBrowserUri(e){const t=this.toUri(e,{toUrl:this.toUrl.bind(this)});return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===vn.vscodeRemote?yn.rewrite(e):e.scheme!==vn.file||!O&&P!==`${vn.vscodeFileResource}://${Cn.FALLBACK_AUTHORITY}`?this.staticBrowserUris.get(e)??e:e.with({scheme:vn.vscodeFileResource,authority:e.authority||Cn.FALLBACK_AUTHORITY,query:null,fragment:null})}asFileUri(e){const t=this.toUri(e,{toUrl:this.toUrl.bind(this)});return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===vn.vscodeFileResource?e.with({scheme:vn.file,authority:e.authority!==Cn.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){return Fe.isUri(e)?e:Fe.parse(t.toUrl(e))}registerStaticBrowserUri(e,t){return this.staticBrowserUris.set(e,t),Yt((()=>{this.staticBrowserUris.get(e)===t&&this.staticBrowserUris.delete(e)}))}getRegisteredBrowserUris(){return this.staticBrowserUris.keys()}}const Sn=new Cn;var kn;!function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";e.getHeadersFromQuery=function(e){let n;"string"==typeof e?n=new URL(e).searchParams:e instanceof URL?n=e.searchParams:Fe.isUri(e)&&(n=new URL(e.toString(!0)).searchParams);const s=n?.get(i);if(s)return t.get(s)},e.addSearchParam=function(e,t,n){if(!globalThis.crossOriginIsolated)return;const s=t&&n?"3":n?"2":"1";e instanceof URLSearchParams?e.set(i,s):e[i]=s}}(kn||(kn={}));const xn="undefined_publisher";class En{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(null==e)return null==t;if(null==t)return!1;if("string"==typeof e||"string"==typeof t){return qi("string"==typeof e?e:e.value,"string"==typeof t?t:t.value)}return e._lower===t._lower}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}}class Dn{constructor(){this._map=new Map}clear(){this._map.clear()}delete(e){this._map.delete(En.toKey(e))}get(e){return this._map.get(En.toKey(e))}has(e){return this._map.has(En.toKey(e))}set(e,t){this._map.set(En.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}}function Ln(e){return"string"==typeof e}function In(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function Tn(e){const t=Object.getPrototypeOf(Uint8Array);return"object"==typeof e&&e instanceof t}function Nn(e){return"number"==typeof e&&!isNaN(e)}function An(e){return!!e&&"function"==typeof e[Symbol.iterator]}function Mn(e){return void 0===e}function Rn(e){return Mn(e)||null===e}function On(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function Fn(e){if(Rn(e))throw new Error("Assertion Failed: argument is undefined or null");return e}const Pn=Object.prototype.hasOwnProperty;function Bn(e){if(!In(e))return!1;for(const t in e)if(Pn.call(e,t))return!1;return!0}function zn(e){return"function"==typeof e}function Wn(e,t){if(Ln(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(zn(t)){try{if(e instanceof t)return}catch{}if(!Rn(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Hn(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach((([e,i])=>{t[e]=i&&"object"==typeof i?Hn(i):i})),t}const Vn=Object.prototype.hasOwnProperty;function Un(e,t){return Kn(e,t,new Set)}function Kn(e,t,i){if(Rn(e))return e;const n=t(e);if(void 0!==n)return n;if(Array.isArray(e)){const n=[];for(const s of e)n.push(Kn(s,t,i));return n}if(In(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const n={};for(const s in e)Vn.call(e,s)&&(n[s]=Kn(e[s],t,i));return i.delete(e),n}return e}function qn(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!qn(e[i],t[i]))return!1}else{const s=[];for(n in e)s.push(n);s.sort();const o=[];for(n in t)o.push(n);if(o.sort(),!qn(s,o))return!1;for(i=0;i<s.length;i++)if(!qn(e[s[i]],t[s[i]]))return!1}return!0}function $n(e,t){const i=Object.create(null);if(!e||!t)return i;return Object.keys(t).forEach((n=>{const s=e[n],o=t[n];qn(s,o)||(i[n]=o)})),i}function jn(e){const t=[];for(const i of function(e){let t=[];for(;Object.prototype!==e;)t=t.concat(Object.getOwnPropertyNames(e)),e=Object.getPrototypeOf(e);return t}(e))"function"==typeof e[i]&&t.push(i);return t}class Gn{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}}new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function Yn(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id||0===Hi(e.id,t.id)}const Xn=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/;class Qn{static create(e){const t=e.manifest?e.manifest.version:e.version,i=e.manifest?e.targetPlatform:e.properties.targetPlatform;return new Qn(e.identifier,t,i)}static parse(e){const t=Xn.exec(e);return t&&t[1]&&t[2]?new Qn({id:t[1]},t[2],t[4]||void 0):null}constructor(e,t,i="undefined"){this.version=t,this.targetPlatform=i,this.id=e.id}toString(){return`${this.id}-${this.version}${"undefined"!==this.targetPlatform?`-${this.targetPlatform}`:""}`}equals(e){return e instanceof Qn&&(Yn(this,e)&&this.version===e.version&&this.targetPlatform===e.targetPlatform)}}function Zn(e,t){return`${e}.${t}`}function Jn(e){return e.toLowerCase()}new En("pprice.better-merge");async function es(e,t){const i=await async function(e,t){if(!R)return!1;let i;try{i=(await e.readFile(Fe.file("/etc/os-release"))).value.toString()}catch(n){try{i=(await e.readFile(Fe.file("/usr/lib/os-release"))).value.toString()}catch(e){t.debug("Error while getting the os-release file.",it(e))}}return!!i&&"alpine"===(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]}(e,t),n=function(e,t){switch(e){case 3:return"x64"===t?"win32-x64":"arm64"===t?"win32-arm64":"unknown";case 2:return"x64"===t?"linux-x64":"arm64"===t?"linux-arm64":"arm"===t?"linux-armhf":"unknown";case"alpine":return"x64"===t?"alpine-x64":"arm64"===t?"alpine-arm64":"unknown";case 1:return"x64"===t?"darwin-x64":"arm64"===t?"darwin-arm64":"unknown";case 0:return"web"}}(i?"alpine":W,oe);return t.debug("ComputeTargetPlatform:",n),n}function ts(e){return 47===e||92===e}function is(e){return e.replace(/[\\/]/g,_e.sep)}function ns(e,t=_e.sep){if(!e)return"";const i=e.length,n=e.charCodeAt(0);if(ts(n)){if(ts(e.charCodeAt(1))&&!ts(e.charCodeAt(2))){let n=3;const s=n;for(;n<i&&!ts(e.charCodeAt(n));n++);if(s!==n&&!ts(e.charCodeAt(n+1)))for(n+=1;n<i;n++)if(ts(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}return t}if(os(n)&&58===e.charCodeAt(1))return ts(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<i;s++)if(ts(e.charCodeAt(s)))return e.slice(0,s+1);return""}function ss(e,t,i,n=Ie){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(i){if(!$i(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===n&&i--,e.charAt(i)===n}return t.charAt(t.length-1)!==n&&(t+=n),0===e.indexOf(t)}function os(e){return e>=65&&e<=90||e>=97&&e<=122}function rs(e,t=A){return function(e,t=A){return!!t&&os(e.charCodeAt(0))&&58===e.charCodeAt(1)}(e,t)?e[0]:void 0}function as(e){return Ve(e,!0)}class ls{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:zi(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===vn.file)return ss(as(e),as(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(ys(e.authority,t.authority))return ss(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Fe.joinPath(e,...t)}basenameOrAuthority(e){return gs(e)||e.authority}basename(e){return _e.basename(e.path)}extname(e){return _e.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===vn.file?t=Fe.file(Ee(as(e))).path:(t=_e.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===vn.file?Fe.file(ye(as(e))).path:_e.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!ys(e.authority,t.authority))return;if(e.scheme===vn.file){const i=xe(as(e),as(t));return A?is(i):i}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(i.length,n.length);e<t&&(i.charCodeAt(e)===n.charCodeAt(e)||i.charAt(e).toLowerCase()===n.charAt(e).toLowerCase());e++);i=n.substr(0,e)+i.substr(e)}return _e.relative(i,n)}resolvePath(e,t){if(e.scheme===vn.file){const i=Fe.file(ke(as(e),t));return e.with({authority:i.authority,path:i.path})}var i;return-1===(i=t).indexOf("/")&&(i=is(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),t=i,e.with({path:_e.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&qi(e,t)}hasTrailingPathSeparator(e,t=Ie){if(e.scheme===vn.file){const i=as(e);return i.length>ns(i).length&&i[i.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Ie){return Cs(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Ie){let i=!1;if(e.scheme===vn.file){const n=as(e);i=void 0!==n&&n.length===ns(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=1===n.length&&47===n.charCodeAt(n.length-1)}return i||Cs(e,t)?e:e.with({path:e.path+"/"})}}const hs=new ls((()=>!1)),cs=(new ls((e=>e.scheme!==vn.file||!R)),new ls((e=>!0))),ds=hs.isEqual.bind(hs),us=hs.isEqualOrParent.bind(hs);hs.getComparisonKey.bind(hs);hs.basenameOrAuthority.bind(hs);const gs=hs.basename.bind(hs),ps=hs.extname.bind(hs),fs=hs.dirname.bind(hs),ms=hs.joinPath.bind(hs),bs=hs.normalizePath.bind(hs),vs=hs.relativePath.bind(hs),ws=hs.resolvePath.bind(hs),_s=hs.isAbsolutePath.bind(hs),ys=hs.isEqualAuthority.bind(hs),Cs=hs.hasTrailingPathSeparator.bind(hs);hs.removeTrailingPathSeparator.bind(hs),hs.addTrailingPathSeparator.bind(hs);var Ss,ks;function xs(e,t,i){if(t){let n=e.path;return n&&n[0]!==_e.sep&&(n=_e.sep+n),e.with({scheme:i,authority:t,path:n})}return e.with({scheme:i})}!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,n]=e.split(":");t&&n&&i.set(t,n)}));const n=t.path.substring(0,t.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}}(Ss||(Ss={})),function(e){e[e.LocalProcess=1]="LocalProcess",e[e.LocalWebWorker=2]="LocalWebWorker",e[e.Remote=3]="Remote"}(ks||(ks={}));const Es=o("environmentService"),Ds=Es;var Ls;function Is(e,t=!1){let i=0;const n=e.length;let s="",o=0,r=16,a=0;function l(t){let n=0,s=0;for(;n<t;){const t=e.charCodeAt(i);if(t>=48&&t<=57)s=16*s+t-48;else if(t>=65&&t<=70)s=16*s+t-65+10;else{if(!(t>=97&&t<=102))break;s=16*s+t-97+10}i++,n++}return n<t&&(s=-1),s}function h(){if(s="",a=0,o=i,i>=n)return o=n,r=17;let t=e.charCodeAt(i);if(Ts(t)){do{i++,s+=String.fromCharCode(t),t=e.charCodeAt(i)}while(Ts(t));return r=15}if(Ns(t))return i++,s+=String.fromCharCode(t),13===t&&10===e.charCodeAt(i)&&(i++,s+="\n"),r=14;switch(t){case 123:return i++,r=1;case 125:return i++,r=2;case 91:return i++,r=3;case 93:return i++,r=4;case 58:return i++,r=6;case 44:return i++,r=5;case 34:return i++,s=function(){let t="",s=i;for(;;){if(i>=n){t+=e.substring(s,i),a=2;break}const o=e.charCodeAt(i);if(34===o){t+=e.substring(s,i),i++;break}if(92!==o){if(o>=0&&o<=31){if(Ns(o)){t+=e.substring(s,i),a=2;break}a=6}i++}else{if(t+=e.substring(s,i),i++,i>=n){a=2;break}switch(e.charCodeAt(i++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:{const e=l(4);e>=0?t+=String.fromCharCode(e):a=4;break}default:a=5}s=i}}return t}(),r=10;case 47:{const o=i-1;if(47===e.charCodeAt(i+1)){for(i+=2;i<n&&!Ns(e.charCodeAt(i));)i++;return s=e.substring(o,i),r=12}if(42===e.charCodeAt(i+1)){i+=2;const t=n-1;let l=!1;for(;i<t;){if(42===e.charCodeAt(i)&&47===e.charCodeAt(i+1)){i+=2,l=!0;break}i++}return l||(i++,a=1),s=e.substring(o,i),r=13}return s+=String.fromCharCode(t),i++,r=16}case 45:if(s+=String.fromCharCode(t),i++,i===n||!As(e.charCodeAt(i)))return r=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=function(){const t=i;if(48===e.charCodeAt(i))i++;else for(i++;i<e.length&&As(e.charCodeAt(i));)i++;if(i<e.length&&46===e.charCodeAt(i)){if(i++,!(i<e.length&&As(e.charCodeAt(i))))return a=3,e.substring(t,i);for(i++;i<e.length&&As(e.charCodeAt(i));)i++}let n=i;if(i<e.length&&(69===e.charCodeAt(i)||101===e.charCodeAt(i)))if(i++,(i<e.length&&43===e.charCodeAt(i)||45===e.charCodeAt(i))&&i++,i<e.length&&As(e.charCodeAt(i))){for(i++;i<e.length&&As(e.charCodeAt(i));)i++;n=i}else a=3;return e.substring(t,n)}(),r=11;default:for(;i<n&&c(t);)i++,t=e.charCodeAt(i);if(o!==i){switch(s=e.substring(o,i),s){case"true":return r=8;case"false":return r=9;case"null":return r=7}return r=16}return s+=String.fromCharCode(t),i++,r=16}}function c(e){if(Ts(e)||Ns(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){i=e,s="",o=0,r=16,a=0},getPosition:()=>i,scan:t?function(){let e;do{e=h()}while(e>=12&&e<=15);return e}:h,getToken:()=>r,getTokenValue:()=>s,getTokenOffset:()=>o,getTokenLength:()=>i-o,getTokenError:()=>a}}function Ts(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function Ns(e){return 10===e||13===e||8232===e||8233===e}function As(e){return e>=48&&e<=57}function Ms(e,t=[],i=Ls.DEFAULT){let n=null,s=[];const o=[];function r(e){Array.isArray(s)?s.push(e):null!==n&&(s[n]=e)}return Rs(e,{onObjectBegin:()=>{const e={};r(e),o.push(s),s=e,n=null},onObjectProperty:e=>{n=e},onObjectEnd:()=>{s=o.pop()},onArrayBegin:()=>{const e=[];r(e),o.push(s),s=e,n=null},onArrayEnd:()=>{s=o.pop()},onLiteralValue:r,onError:(e,i,n)=>{t.push({error:e,offset:i,length:n})}},i),s[0]}function Rs(e,t,i=Ls.DEFAULT){const n=Is(e,!1);function s(e){return e?()=>e(n.getTokenOffset(),n.getTokenLength()):()=>!0}function o(e){return e?t=>e(t,n.getTokenOffset(),n.getTokenLength()):()=>!0}const r=s(t.onObjectBegin),a=o(t.onObjectProperty),l=s(t.onObjectEnd),h=s(t.onArrayBegin),c=s(t.onArrayEnd),d=o(t.onLiteralValue),u=o(t.onSeparator),g=s(t.onComment),p=o(t.onError),f=i&&i.disallowComments,m=i&&i.allowTrailingComma;function b(){for(;;){const e=n.scan();switch(n.getTokenError()){case 4:v(14);break;case 5:v(15);break;case 3:v(13);break;case 1:f||v(11);break;case 2:v(12);break;case 6:v(16)}switch(e){case 12:case 13:f?v(10):g();break;case 16:v(1);break;case 15:case 14:break;default:return e}}}function v(e,t=[],i=[]){if(p(e),t.length+i.length>0){let e=n.getToken();for(;17!==e;){if(-1!==t.indexOf(e)){b();break}if(-1!==i.indexOf(e))break;e=b()}}}function w(e){const t=n.getTokenValue();return e?d(t):a(t),b(),!0}function _(){switch(n.getToken()){case 3:return function(){h(),b();let e=!1;for(;4!==n.getToken()&&17!==n.getToken();){if(5===n.getToken()){if(e||v(4,[],[]),u(","),b(),4===n.getToken()&&m)break}else e&&v(6,[],[]);_()||v(4,[],[4,5]),e=!0}return c(),4!==n.getToken()?v(8,[4],[]):b(),!0}();case 1:return function(){r(),b();let e=!1;for(;2!==n.getToken()&&17!==n.getToken();){if(5===n.getToken()){if(e||v(4,[],[]),u(","),b(),2===n.getToken()&&m)break}else e&&v(6,[],[]);(10!==n.getToken()?(v(3,[],[2,5]),0):(w(!1),6===n.getToken()?(u(":"),b(),_()||v(4,[],[2,5])):v(5,[],[2,5]),1))||v(4,[],[2,5]),e=!0}return l(),2!==n.getToken()?v(7,[2],[]):b(),!0}();case 10:return w(!0);default:return function(){switch(n.getToken()){case 11:{let e=0;try{e=JSON.parse(n.getTokenValue()),"number"!=typeof e&&(v(2),e=0)}catch(e){v(2)}d(e);break}case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return b(),!0}()}}return b(),17===n.getToken()?!!i.allowEmptyContent||(v(4,[],[]),!1):_()?(17!==n.getToken()&&v(9,[],[]),!0):(v(4,[],[]),!1)}function Os(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}!function(e){e.DEFAULT={allowTrailingComma:!0}}(Ls||(Ls={}));const Fs=o("fileService"),Ps=(o("extensionGalleryService"),o("extensionManagementService"),o("IGlobalExtensionEnablementService"),o("IExtensionTipsService"),o("extensionManagementServerService"),o("extensionEnablementService"));o("IWebExtensionsScannerService");function Bs(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r}function zs(e,t){return function(i,n){t(i,n,e)}}const Ws="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";const Hs=function(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of Ws)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}();function Vs(e){let t=Hs;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}const Us=new ii;function Ks(e,t,i,n,s){if(t=Vs(t),s||(s=It.first(Us)),i.length>s.maxLen){let o=e-s.maxLen/2;return o<0?o=0:n+=o,Ks(e,t,i=i.substring(o,e+s.maxLen/2),n,s)}const o=Date.now(),r=e-1-n;let a=-1,l=null;for(let e=1;!(Date.now()-o>=s.timeBudget);e++){const n=r-s.windowSize*e;t.lastIndex=Math.max(0,n);const o=qs(t,i,r,a);if(!o&&l)break;if(l=o,n<=0)break;a=n}if(l){const e={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return t.lastIndex=0,e}return null}function qs(e,t,i,n){let s;for(;s=e.exec(t);){const t=s.index||0;if(t<=i&&e.lastIndex>=i)return s;if(n>0&&t>n)return null}return null}var $s;Us.unshift({maxLen:1e3,windowSize:15,timeBudget:150}),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}($s||($s={}));class js{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++){switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(0===e.getTokenCount())return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const e=String.fromCharCode(i);if(!this.open.includes(e)&&!this.close.includes(e))return e}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class Gs{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Ys(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Ys(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Ys(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Ys(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),1===t.close.length&&1===t.open.length&&Ys(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Ys(e,t,i){e.has(t)?e.get(t).push(i):e.set(t,[i])}class Xs{static{this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n\t"}static{this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n\t"}static{this.DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=" \n\t"}constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map((e=>new js(e))):e.brackets?this._autoClosingPairs=e.brackets.map((e=>new js({open:e[0],close:e[1]}))):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new js({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes="string"==typeof e.autoCloseBefore?e.autoCloseBefore:Xs.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets="string"==typeof e.autoCloseBefore?e.autoCloseBefore:Xs.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}function Qs(e){return!!(3&e)}function Zs(e){const t=e;return!!t&&[t.on,t.pause,t.resume,t.destroy].every((e=>"function"==typeof e))}function Js(e){const t=e;return!!t&&(Zs(t.stream)&&Array.isArray(t.buffer)&&"boolean"==typeof t.ended)}function eo(e,t){return new to(e,t)}class to{constructor(e,t){this.reducer=e,this.options=t,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed)if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),"number"==typeof this.options?.highWaterMark&&this.buffer.data.length>this.options.highWaterMark)return new Promise((e=>this.pendingWritePromises.push(e)))}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(void 0!==e&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach((t=>t(e)))}emitError(e){0===this.listeners.error.length?Ge(e):this.listeners.error.slice(0).forEach((t=>t(e)))}emitEnd(){this.listeners.end.slice(0).forEach((e=>e()))}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors()}}removeListener(e,t){if(this.state.destroyed)return;let i;switch(e){case"data":i=this.listeners.data;break;case"end":i=this.listeners.end;break;case"error":i=this.listeners.error}if(i){const e=i.indexOf(t);e>=0&&i.splice(e,1)}}flowData(){if(this.buffer.data.length>0){const e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;const t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach((e=>e()))}}flowErrors(){if(this.listeners.error.length>0){for(const e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return!!this.state.ended&&(this.emitEnd(),this.listeners.end.length>0)}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function io(e,t){return new Promise(((i,n)=>{const s=[];no(e,{onData:e=>{t&&s.push(e)},onError:e=>{t?n(e):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})}))}function no(e,t,i){e.on("error",(e=>{i?.isCancellationRequested||t.onError(e)})),e.on("end",(()=>{i?.isCancellationRequested||t.onEnd()})),e.on("data",(e=>{i?.isCancellationRequested||t.onData(e)}))}var so=i(80365).lW;const oo=void 0!==so,ro=new Li((()=>new Uint8Array(256)));let ao,lo;class ho{static alloc(e){return new ho(oo?so.allocUnsafe(e):new Uint8Array(e))}static wrap(e){return oo&&!so.isBuffer(e)&&(e=so.from(e.buffer,e.byteOffset,e.byteLength)),new ho(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&oo?new ho(so.from(e)):(ao||(ao=new TextEncoder),new ho(ao.encode(e)))}static fromByteArray(e){const t=ho.alloc(e.length);for(let i=0,n=e.length;i<n;i++)t.buffer[i]=e[i];return t}static concat(e,t){if(void 0===t){t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].byteLength}const i=ho.alloc(t);let n=0;for(let t=0,s=e.length;t<s;t++){const s=e[t];i.set(s,n),n+=s.byteLength}return i}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){const e=ho.alloc(this.byteLength);return e.set(this),e}toString(){return oo?this.buffer.toString():(lo||(lo=new TextDecoder),lo.decode(this.buffer))}slice(e,t){return new ho(this.buffer.subarray(e,t))}set(e,t){if(e instanceof ho)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else{if(!ArrayBuffer.isView(e))throw new Error("Unknown argument 'array'");this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t)}}readUInt32BE(e){return go(this.buffer,e)}writeUInt32BE(e,t){po(this.buffer,e,t)}readUInt32LE(e){return function(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}(this.buffer,e)}writeUInt32LE(e,t){!function(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t,t>>>=8,e[i+2]=255&t,t>>>=8,e[i+3]=255&t}(this.buffer,e,t)}readUInt8(e){return fo(this.buffer,e)}writeUInt8(e,t){mo(this.buffer,e,t)}indexOf(e,t=0){return function(e,t,i=0){const n=t.byteLength,s=e.byteLength;if(0===n)return 0;if(1===n)return e.indexOf(t[0]);if(n>s-i)return-1;const o=ro.value;o.fill(t.length);for(let e=0;e<t.length;e++)o[t[e]]=t.length-e-1;let r=i+t.length-1,a=r,l=-1;for(;r<s;)if(e[r]===t[a]){if(0===a){l=r;break}r--,a--}else r+=Math.max(t.length-a,o[e[r]]),a=t.length-1;return l}(this.buffer,e instanceof ho?e.buffer:e,t)}}function co(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0}function uo(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t}function go(e,t){return e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3]}function po(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function fo(e,t){return e[t]}function mo(e,t,i){e[i]=t}function bo(e){return function(e){let t=!1;return{read:()=>t?null:(t=!0,e)}}(e)}function vo(e){return io(e,(e=>ho.concat(e)))}function wo(e){return function(e,t){const i=eo(t);return i.end(e),i}(e,(e=>ho.concat(e)))}const _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";let Co,So,ko;function xo(){return Co||(Co=new TextDecoder("UTF-16LE")),Co}function Eo(){return ko||(ko=function(){if(!G){G=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);j=513===t[0]}return j}()?xo():(So||(So=new TextDecoder("UTF-16BE")),So)),ko}function Do(e,t,i){const n=new Uint16Array(e.buffer,t,i);return i>0&&(65279===n[0]||65534===n[0])?function(e,t,i){const n=[];let s=0;for(let o=0;o<i;o++){const i=co(e,t);t+=2,n[s++]=String.fromCharCode(i)}return n.join("")}(e,t,i):xo().decode(n)}class Lo{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Lo(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Lo.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Lo.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return Lo.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){const i=0|e.lineNumber,n=0|t.lineNumber;if(i===n){return(0|e.column)-(0|t.column)}return i-n}clone(){return new Lo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Lo(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}class Io{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return Io.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Io.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<=e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>=e.endColumn))}containsRange(e){return Io.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}strictContainsRange(e){return Io.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}plusRange(e){return Io.plusRange(this,e)}static plusRange(e,t){let i,n,s,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new Io(i,n,s,o)}intersectRanges(e){return Io.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,o=e.endColumn;const r=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,h=t.endColumn;return i<r?(i=r,n=a):i===r&&(n=Math.max(n,a)),s>l?(s=l,o=h):s===l&&(o=Math.min(o,h)),i>s||i===s&&n>o?null:new Io(i,n,s,o)}equalsRange(e){return Io.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Io.getEndPosition(this)}static getEndPosition(e){return new Lo(e.endLineNumber,e.endColumn)}getStartPosition(){return Io.getStartPosition(this)}static getStartPosition(e){return new Lo(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Io(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Io(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Io.collapseToStart(this)}static collapseToStart(e){return new Io(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Io.collapseToEnd(this)}static collapseToEnd(e){return new Io(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Io(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Io(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Io(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){const i=0|e.startColumn,n=0|t.startColumn;if(i===n){const i=0|e.endLineNumber,n=0|t.endLineNumber;if(i===n){return(0|e.endColumn)-(0|t.endColumn)}return i-n}return i-n}return i-n}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}class To{constructor(e,t,i,n,s,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=s,this.reversedRegex=o,this._openSet=To._toSet(this.open),this._closeSet=To._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}class No{constructor(e,t){this._richEditBracketsBrand=void 0;const i=function(e){const t=e.length;e=e.map((e=>[e[0].toLowerCase(),e[1].toLowerCase()]));const i=[];for(let e=0;e<t;e++)i[e]=e;const n=(e,t)=>{const[i,n]=e,[s,o]=t;return i===s||i===o||n===s||n===o},s=(e,n)=>{const s=Math.min(e,n),o=Math.max(e,n);for(let e=0;e<t;e++)i[e]===o&&(i[e]=s)};for(let o=0;o<t;o++){const r=e[o];for(let a=o+1;a<t;a++)n(r,e[a])&&s(i[o],i[a])}const o=[];for(let n=0;n<t;n++){const s=[],r=[];for(let o=0;o<t;o++)if(i[o]===n){const[t,i]=e[o];s.push(t),r.push(i)}s.length>0&&o.push({open:s,close:r})}return o}(t);this.brackets=i.map(((t,n)=>new To(e,n,t.open,t.close,function(e,t,i,n){let s=[];s=s.concat(e),s=s.concat(t);for(let e=0,t=s.length;e<t;e++)Ao(s[e],i,n,s);return s=Ro(s),s.sort(Mo),s.reverse(),Fo(s)}(t.open,t.close,i,n),function(e,t,i,n){let s=[];s=s.concat(e),s=s.concat(t);for(let e=0,t=s.length;e<t;e++)Ao(s[e],i,n,s);return s=Ro(s),s.sort(Mo),s.reverse(),Fo(s.map(Po))}(t.open,t.close,i,n)))),this.forwardRegex=function(e){let t=[];for(const i of e){for(const e of i.open)t.push(e);for(const e of i.close)t.push(e)}return t=Ro(t),Fo(t)}(this.brackets),this.reversedRegex=function(e){let t=[];for(const i of e){for(const e of i.open)t.push(e);for(const e of i.close)t.push(e)}return t=Ro(t),Fo(t.map(Po))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const e of this.brackets){for(const t of e.open)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,t.length);for(const t of e.close)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,t.length)}}}function Ao(e,t,i,n){for(let s=0,o=t.length;s<o;s++){if(s===i)continue;const o=t[s];for(const t of o.open)t.indexOf(e)>=0&&n.push(t);for(const t of o.close)t.indexOf(e)>=0&&n.push(t)}}function Mo(e,t){return e.length-t.length}function Ro(e){if(e.length<=1)return e;const t=[],i=new Set;for(const n of e)i.has(n)||(t.push(n),i.add(n));return t}function Oo(e){const t=/^[\w ]+$/.test(e);return e=Ai(e),t?`\\b${e}\\b`:e}function Fo(e){return Oi(`(${e.map(Oo).join(")|(")})`,!0)}const Po=function(){let e=null,t=null;return function(i){return e!==i&&(e=i,t=function(e){const t=new Uint16Array(e.length);let i=0;for(let n=e.length-1;n>=0;n--)t[i++]=e.charCodeAt(n);return Eo().decode(t)}(e)),t}}();class Bo{static _findPrevBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const o=i.length-(s.index||0),r=s[0].length,a=n+o;return new Io(t,a-r+1,t,a+1)}static findPrevBracketInRange(e,t,i,n,s){const o=Po(i).substring(i.length-s,i.length-n);return this._findPrevBracketInText(e,t,o,n)}static findNextBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const o=s.index||0,r=s[0].length;if(0===r)return null;const a=n+o;return new Io(t,a+1,t,a+1+r)}static findNextBracketInRange(e,t,i,n,s){const o=i.substring(n,s);return this.findNextBracketInText(e,t,o,n)}}class zo{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const t=i.charAt(i.length-1);e.push(t)}return ct(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;const n=t.findTokenIndexAtOffset(i-1);if(Qs(t.getStandardTokenType(n)))return null;const s=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,r=Bo.findPrevBracketInRange(s,1,o,0,o.length);if(!r)return null;const a=o.substring(r.startColumn-1,r.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[a])return null;const l=t.getActualLineContentBefore(r.startColumn-1);return/^\s*$/.test(l)?{matchOpenBracket:a}:null}}function Wo(e){return e.global&&(e.lastIndex=0),!0}class Ho{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Wo(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Wo(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Wo(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Wo(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Vo{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const t=Vo._createOpenBracketRegExp(e[0]),i=Vo._createCloseBracketRegExp(e[1]);t&&i&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:i})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let e=0,s=this._regExpRules.length;e<s;e++){const s=this._regExpRules[e];if([{reg:s.beforeText,text:i},{reg:s.afterText,text:n},{reg:s.previousLineText,text:t}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)))))return s.action}if(e>=2&&i.length>0&&n.length>0)for(let e=0,t=this._brackets.length;e<t;e++){const t=this._brackets[e];if(t.openRegExp.test(i)&&t.closeRegExp.test(n))return{indentAction:$s.IndentOutdent}}if(e>=2&&i.length>0)for(let e=0,t=this._brackets.length;e<t;e++){if(this._brackets[e].openRegExp.test(i))return{indentAction:$s.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ai(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Vo._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ai(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,Vo._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(e){return Ge(e),null}}}const Uo=o("configurationService"),Ko=o("languageService");class qo{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const $o=[];function jo(e,t,i){t instanceof qo||(t=new qo(t,[],Boolean(i))),$o.push([e,t])}function Go(){return $o}function Yo(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function Xo(e,t="Unreachable"){throw new Error(t)}function Qo(e){e()||(e(),Ge(new ot("Assertion Failed")))}function Zo(e,t){let i=0;for(;i<e.length-1;){if(!t(e[i],e[i+1]))return!1;i++}return!0}const Jo=new class{constructor(){this.data=new Map}add(e,t){Yo(Ln(e)),Yo(In(t)),Yo(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}},er=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const tr=/^(.+)\/(.+?)(;.+)?$/;function ir(e,t){const i=tr.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}function nr(e,t){const i=Object.create(null);for(const n in e)sr(i,n,e[n],t);return i}function sr(e,t,i,n){const s=t.split("."),o=s.pop();let r=e;for(let e=0;e<s.length;e++){const i=s[e];let o=r[i];switch(typeof o){case"undefined":o=r[i]=Object.create(null);break;case"object":if(null===o)return void n(`Ignoring ${t} as ${s.slice(0,e+1).join(".")} is null`);break;default:return void n(`Ignoring ${t} as ${s.slice(0,e+1).join(".")} is ${JSON.stringify(o)}`)}r=o}if("object"==typeof r&&null!==r)try{r[o]=i}catch(e){n(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(r)}`)}function or(e,t){rr(e,t.split("."))}function rr(e,t){const i=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(i)){const n=e[i];"object"!=typeof n||Array.isArray(n)||(rr(n,t),0===Object.keys(n).length&&delete e[i])}}else delete e[i]}function ar(e,t,i){const n=function(e,t){let i=e;for(const e of t){if("object"!=typeof i||null===i)return;i=i[e]}return i}(e,t.split("."));return void 0===n?i:n}const lr="base.contributions.json";const hr=new class{constructor(){this._onDidChangeSchema=new ui,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}};Jo.add(lr,hr);const cr="vs/platform/configuration/common/configurationRegistry";var dr;!function(e){e.Multiline="multilineText",e.Singleline="singlelineText"}(dr||(dr={}));const ur="base.contributions.configuration";var gr;!function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"}(gr||(gr={}));const pr={properties:{},patternProperties:{}},fr={properties:{},patternProperties:{}},mr={properties:{},patternProperties:{}},br={properties:{},patternProperties:{}},vr={properties:{},patternProperties:{}},wr={properties:{},patternProperties:{}},_r="vscode://schemas/settings/resourceLanguage",yr=Jo.as(lr);const Cr="\\[([^\\]]+)\\]",Sr=new RegExp(Cr,"g"),kr=`^(${Cr})+$`,xr=new RegExp(kr);function Er(e){const t=[];if(xr.test(e)){let i=Sr.exec(e);for(;i?.length;){const n=i[1].trim();n&&t.push(n),i=Sr.exec(e)}}return ct(t)}const Dr=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new ui,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new ui,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:u(cr,0,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},yr.registerSchema(_r,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),yr.registerSchema(_r,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.doDeregisterConfigurations(e,t),yr.registerSchema(_r,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.doDeregisterConfigurations(t,i),this.doRegisterConfigurations(e,!1,i),yr.registerSchema(_r,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){const i=[];for(const{overrides:n,source:s}of e)for(const e in n)if(t.add(e),xr.test(e)){const t=this.configurationDefaultsOverrides.get(e),o=t?.valuesSources??new Map;if(s)for(const t of Object.keys(n[e]))o.set(t,s);const r={...t?.value||{},...n[e]};this.configurationDefaultsOverrides.set(e,{source:s,value:r,valuesSources:o});const a=e.replace(/[\[\]]/g,""),l={type:"object",default:r,description:u(cr,1,"Configure settings to be overridden for the {0} language.",a),$ref:_r,defaultDefaultValue:r,source:Ln(s)?void 0:s,defaultValueSource:s};i.push(...Er(e)),this.configurationProperties[e]=l,this.defaultLanguageConfigurationOverridesNode.properties[e]=l}else{this.configurationDefaultsOverrides.set(e,{value:n[e],source:s});const t=this.configurationProperties[e];t&&(this.updatePropertyDefaultValue(e,t),this.updateSchema(e,t))}this.doRegisterOverrideIdentifiers(i)}deregisterDefaultConfigurations(e){const t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(const{overrides:i,source:n}of e)for(const e in i){const i=this.configurationDefaultsOverrides.get(e);if((Ln(n)?n:n?.id)===(Ln(i?.source)?i?.source:i?.source?.id))if(t.add(e),this.configurationDefaultsOverrides.delete(e),xr.test(e))delete this.configurationProperties[e],delete this.defaultLanguageConfigurationOverridesNode.properties[e];else{const t=this.configurationProperties[e];t&&(this.updatePropertyDefaultValue(e,t),this.updateSchema(e,t))}}this.updateOverridePropertyPatternKey()}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,i),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach((e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,i),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}))}doDeregisterConfigurations(e,t){const i=e=>{if(e.properties)for(const i in e.properties){t.add(i);const n=this.configurationProperties[i];n?.policy?.name&&this.policyConfigurations.delete(n.policy.name),delete this.configurationProperties[i],this.removeFromSchema(i,e.properties[i])}e.allOf?.forEach((e=>i(e)))};for(const t of e){i(t);const e=this.configurationContributors.indexOf(t);-1!==e&&this.configurationContributors.splice(e,1)}}validateAndRegisterProperties(e,t=!0,i,n,s=3,o){s=Rn(e.scope)?s:e.scope;const r=e.properties;if(r)for(const e in r){const a=r[e];t&&Lr(e,a)?delete r[e]:(a.source=i,a.defaultDefaultValue=r[e].default,this.updatePropertyDefaultValue(e,a),xr.test(e)?a.scope=void 0:(a.scope=Rn(a.scope)?s:a.scope,a.restricted=Rn(a.restricted)?!!n?.includes(e):a.restricted),!r[e].hasOwnProperty("included")||r[e].included?(this.configurationProperties[e]=r[e],r[e].policy?.name&&this.policyConfigurations.set(r[e].policy.name,e),!r[e].deprecationMessage&&r[e].markdownDeprecationMessage&&(r[e].deprecationMessage=r[e].markdownDeprecationMessage),o.add(e)):(this.excludedConfigurationProperties[e]=r[e],delete r[e]))}const a=e.allOf;if(a)for(const e of a)this.validateAndRegisterProperties(e,t,i,n,s,o)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(e){const t=e=>{const i=e.properties;if(i)for(const e in i)this.updateSchema(e,i[e]);const n=e.allOf;n?.forEach(t)};t(e)}updateSchema(e,t){switch(pr.properties[e]=t,t.scope){case 1:fr.properties[e]=t;break;case 2:mr.properties[e]=t;break;case 6:br.properties[e]=t;break;case 3:vr.properties[e]=t;break;case 4:wr.properties[e]=t;break;case 5:wr.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}removeFromSchema(e,t){switch(delete pr.properties[e],t.scope){case 1:delete fr.properties[e];break;case 2:delete mr.properties[e];break;case 6:delete br.properties[e];break;case 3:delete vr.properties[e];break;case 4:case 5:delete wr.properties[e],delete this.resourceLanguageSettingsSchema.properties[e]}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:u(cr,2,"Configure editor settings to be overridden for a language."),errorMessage:u(cr,3,"This setting does not support per-language configuration."),$ref:_r};this.updatePropertyDefaultValue(t,i),pr.properties[t]=i,fr.properties[t]=i,mr.properties[t]=i,br.properties[t]=i,vr.properties[t]=i,wr.properties[t]=i}}registerOverridePropertyPatternKey(){const e={type:"object",description:u(cr,2,"Configure editor settings to be overridden for a language."),errorMessage:u(cr,3,"This setting does not support per-language configuration."),$ref:_r};pr.patternProperties[kr]=e,fr.patternProperties[kr]=e,mr.patternProperties[kr]=e,br.patternProperties[kr]=e,vr.patternProperties[kr]=e,wr.patternProperties[kr]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let n=i?.value,s=i?.source;Mn(n)&&(n=t.defaultDefaultValue,s=void 0),Mn(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n,t.defaultValueSource=s}};function Lr(e,t){return e.trim()?xr.test(e)?u(cr,5,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==Dr.getConfigurationProperties()[e]?u(cr,6,"Cannot register '{0}'. This property is already registered.",e):t.policy?.name&&void 0!==Dr.getPolicyConfigurations().get(t.policy?.name)?u(cr,7,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,t.policy?.name,Dr.getPolicyConfigurations().get(t.policy?.name)):null:u(cr,4,"Cannot register an empty property")}Jo.add(ur,Dr);const Ir=new class{constructor(){this._onDidChangeLanguages=new ui,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e)return void this._languages.splice(t,1)}}}getLanguages(){return this._languages}};Jo.add("editor.modesRegistry",Ir);const Tr="plaintext",Nr=".txt";Ir.registerLanguage({id:Tr,extensions:[Nr],aliases:[u("vs/editor/common/languages/modesRegistry",0,"Plain Text"),"text"],mimetypes:[er.text]}),Jo.as(ur).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class Ar{constructor(e,t){this.languageId=e;const i=t.brackets?Mr(t.brackets):[],n=new Di((e=>{const t=new Set;return{info:new Or(this,e,t),closing:t}})),s=new Di((e=>{const t=new Set,i=new Set;return{info:new Fr(this,e,t,i),opening:t,openingColorized:i}}));for(const[e,t]of i){const i=n.get(e),o=s.get(t);i.closing.add(o.info),o.opening.add(i.info)}const o=t.colorizedBracketPairs?Mr(t.colorizedBracketPairs):i.filter((e=>!("<"===e[0]&&">"===e[1])));for(const[e,t]of o){const i=n.get(e),o=s.get(t);i.closing.add(o.info),o.openingColorized.add(i.info),o.opening.add(i.info)}this._openingBrackets=new Map([...n.cachedValues].map((([e,t])=>[e,t.info]))),this._closingBrackets=new Map([...s.cachedValues].map((([e,t])=>[e,t.info])))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function Mr(e){return e.filter((([e,t])=>""!==e&&""!==t))}class Rr{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class Or extends Rr{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class Fr extends Rr{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config===this.config&&this.openingBrackets.has(e)}closesColorized(e){return e.config===this.config&&this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}class Pr{constructor(e){this.languageId=e}affects(e){return!this.languageId||this.languageId===e}}const Br=o("languageConfigurationService");let zr=class extends Qt{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new $r),this.onDidChangeEmitter=this._register(new ui),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(Wr));this._register(this.configurationService.onDidChangeConfiguration((e=>{const t=e.change.keys.some((e=>i.has(e))),n=e.change.overrides.filter((([e,t])=>t.some((e=>i.has(e))))).map((([e])=>e));if(t)this.configurations.clear(),this.onDidChangeEmitter.fire(new Pr(void 0));else for(const e of n)this.languageService.isRegisteredLanguageId(e)&&(this.configurations.delete(e),this.onDidChangeEmitter.fire(new Pr(e)))}))),this._register(this._registry.onDidChange((e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new Pr(e.languageId))})))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=function(e,t,i,n){let s=t.getLanguageConfiguration(e);if(!s){if(!n.isRegisteredLanguageId(e))return new jr(e,{});s=new jr(e,{})}const o=function(e,t){const i=t.getValue(Wr.brackets,{overrideIdentifier:e}),n=t.getValue(Wr.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:Hr(i),colorizedBracketPairs:Hr(n)}}(s.languageId,i),r=Ur([s.underlyingConfig,o]);return new jr(s.languageId,r)}(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};zr=Bs([zs(0,Uo),zs(1,Ko)],zr);const Wr={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Hr(e){if(Array.isArray(e))return e.map((e=>{if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]})).filter((e=>!!e))}class Vr{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new Kr(e,t,++this._order);return this._entries.push(i),this._resolved=null,Yt((()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===i){this._entries.splice(e,1),this._resolved=null;break}}))}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new jr(this.languageId,e))}return this._resolved}_resolve(){return 0===this._entries.length?null:(this._entries.sort(Kr.cmp),Ur(this._entries.map((e=>e.configuration))))}}function Ur(e){let t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const i of e)t={comments:i.comments||t.comments,brackets:i.brackets||t.brackets,wordPattern:i.wordPattern||t.wordPattern,indentationRules:i.indentationRules||t.indentationRules,onEnterRules:i.onEnterRules||t.onEnterRules,autoClosingPairs:i.autoClosingPairs||t.autoClosingPairs,surroundingPairs:i.surroundingPairs||t.surroundingPairs,autoCloseBefore:i.autoCloseBefore||t.autoCloseBefore,folding:i.folding||t.folding,colorizedBracketPairs:i.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:i.__electricCharacterSupport||t.__electricCharacterSupport};return t}class Kr{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class qr{constructor(e){this.languageId=e}}class $r extends Qt{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new ui),this.onDidChange=this._onDidChange.event,this._register(this.register(Tr,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new Vr(e),this._entries.set(e,n));const s=n.register(t,i);return this._onDidChange.fire(new qr(e)),Yt((()=>{s.dispose(),this._onDidChange.fire(new qr(e))}))}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}class jr{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Vo(this.underlyingConfig):null,this.comments=jr._handleComments(this.underlyingConfig),this.characterPair=new Xs(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Hs,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Ho(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Ar(e,this.underlyingConfig)}getWordDefinition(){return Vs(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new No(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new zo(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new Gs(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[e,n]=t.blockComment;i.blockCommentStartToken=e,i.blockCommentEndToken=n}return i}}jo(Br,zr,1);const Gr=window;class Yr{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new ui,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new ui,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}static{this.INSTANCE=new Yr}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;const i=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(i,e),this._onDidChangeZoomLevel.fire(i)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}setFullscreen(e,t){if(this.isFullscreen(t)===e)return;const i=this.getWindowId(t);this.mapWindowIdToFullScreen.set(i,e),this._onDidChangeFullscreen.fire(i)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}}function Xr(e,t,i){"string"==typeof t&&(t=e.matchMedia(t)),t.addEventListener("change",i)}Yr.INSTANCE.onDidChangeFullscreen;const Qr=navigator.userAgent,Zr=Qr.indexOf("Firefox")>=0,Jr=Qr.indexOf("AppleWebKit")>=0,ea=Qr.indexOf("Chrome")>=0,ta=!ea&&Qr.indexOf("Safari")>=0,ia=!ea&&!ta&&Jr;Qr.indexOf("Electron/");Qr.indexOf("Android");let na=!1;if("function"==typeof Gr.matchMedia){const e=Gr.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=Gr.matchMedia("(display-mode: fullscreen)");na=e.matches,Xr(Gr,e,(({matches:e})=>{na&&t.matches||(na=e)}))}O||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText,O||navigator&&navigator.clipboard&&navigator.clipboard.readText,O||na||navigator.keyboard,"ontouchstart"in Gr||navigator.maxTouchPoints;const sa=Gr.PointerEvent&&("ontouchstart"in Gr||navigator.maxTouchPoints>0);class oa{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const ra=new oa,aa=new oa,la=new oa,ha=new Array(230),ca={},da=[],ua=Object.create(null),ga=Object.create(null),pa=[],fa=[];for(let e=0;e<=193;e++)pa[e]=-1;for(let e=0;e<=132;e++)fa[e]=-1;var ma;function ba(e,t){if("number"==typeof e){if(0===e)return null;const i=(65535&e)>>>0,n=(4294901760&e)>>>16;return new _a(0!==n?[va(i,t),va(n,t)]:[va(i,t)])}{const i=[];for(let n=0;n<e.length;n++)i.push(va(e[n],t));return new _a(i)}}function va(e,t){const i=!!(2048&e),n=!!(256&e);return new wa(2===t?n:i,!!(1024&e),!!(512&e),2===t?i:n,255&e)}!function(){const e="",t=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[1,1,"Hyper",0,e,0,e,e,e],[1,2,"Super",0,e,0,e,e,e],[1,3,"Fn",0,e,0,e,e,e],[1,4,"FnLock",0,e,0,e,e,e],[1,5,"Suspend",0,e,0,e,e,e],[1,6,"Resume",0,e,0,e,e,e],[1,7,"Turbo",0,e,0,e,e,e],[1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[1,9,"WakeUp",0,e,0,e,e,e],[0,10,"KeyA",31,"A",65,"VK_A",e,e],[0,11,"KeyB",32,"B",66,"VK_B",e,e],[0,12,"KeyC",33,"C",67,"VK_C",e,e],[0,13,"KeyD",34,"D",68,"VK_D",e,e],[0,14,"KeyE",35,"E",69,"VK_E",e,e],[0,15,"KeyF",36,"F",70,"VK_F",e,e],[0,16,"KeyG",37,"G",71,"VK_G",e,e],[0,17,"KeyH",38,"H",72,"VK_H",e,e],[0,18,"KeyI",39,"I",73,"VK_I",e,e],[0,19,"KeyJ",40,"J",74,"VK_J",e,e],[0,20,"KeyK",41,"K",75,"VK_K",e,e],[0,21,"KeyL",42,"L",76,"VK_L",e,e],[0,22,"KeyM",43,"M",77,"VK_M",e,e],[0,23,"KeyN",44,"N",78,"VK_N",e,e],[0,24,"KeyO",45,"O",79,"VK_O",e,e],[0,25,"KeyP",46,"P",80,"VK_P",e,e],[0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[0,27,"KeyR",48,"R",82,"VK_R",e,e],[0,28,"KeyS",49,"S",83,"VK_S",e,e],[0,29,"KeyT",50,"T",84,"VK_T",e,e],[0,30,"KeyU",51,"U",85,"VK_U",e,e],[0,31,"KeyV",52,"V",86,"VK_V",e,e],[0,32,"KeyW",53,"W",87,"VK_W",e,e],[0,33,"KeyX",54,"X",88,"VK_X",e,e],[0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[0,36,"Digit1",22,"1",49,"VK_1",e,e],[0,37,"Digit2",23,"2",50,"VK_2",e,e],[0,38,"Digit3",24,"3",51,"VK_3",e,e],[0,39,"Digit4",25,"4",52,"VK_4",e,e],[0,40,"Digit5",26,"5",53,"VK_5",e,e],[0,41,"Digit6",27,"6",54,"VK_6",e,e],[0,42,"Digit7",28,"7",55,"VK_7",e,e],[0,43,"Digit8",29,"8",56,"VK_8",e,e],[0,44,"Digit9",30,"9",57,"VK_9",e,e],[0,45,"Digit0",21,"0",48,"VK_0",e,e],[1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,e,0,e,e,e],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[1,64,"F1",59,"F1",112,"VK_F1",e,e],[1,65,"F2",60,"F2",113,"VK_F2",e,e],[1,66,"F3",61,"F3",114,"VK_F3",e,e],[1,67,"F4",62,"F4",115,"VK_F4",e,e],[1,68,"F5",63,"F5",116,"VK_F5",e,e],[1,69,"F6",64,"F6",117,"VK_F6",e,e],[1,70,"F7",65,"F7",118,"VK_F7",e,e],[1,71,"F8",66,"F8",119,"VK_F8",e,e],[1,72,"F9",67,"F9",120,"VK_F9",e,e],[1,73,"F10",68,"F10",121,"VK_F10",e,e],[1,74,"F11",69,"F11",122,"VK_F11",e,e],[1,75,"F12",70,"F12",123,"VK_F12",e,e],[1,76,"PrintScreen",0,e,0,e,e,e],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",e,e],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[1,80,"Home",14,"Home",36,"VK_HOME",e,e],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[1,83,"End",13,"End",35,"VK_END",e,e],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",e,e],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",e,e],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",e,e],[1,94,"NumpadEnter",3,e,0,e,e,e],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",e,e],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",e,e],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",e,e],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",e,e],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",e,e],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",e,e],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",e,e],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",e,e],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",e,e],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",e,e],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",e,e],[1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[1,108,"Power",0,e,0,e,e,e],[1,109,"NumpadEqual",0,e,0,e,e,e],[1,110,"F13",71,"F13",124,"VK_F13",e,e],[1,111,"F14",72,"F14",125,"VK_F14",e,e],[1,112,"F15",73,"F15",126,"VK_F15",e,e],[1,113,"F16",74,"F16",127,"VK_F16",e,e],[1,114,"F17",75,"F17",128,"VK_F17",e,e],[1,115,"F18",76,"F18",129,"VK_F18",e,e],[1,116,"F19",77,"F19",130,"VK_F19",e,e],[1,117,"F20",78,"F20",131,"VK_F20",e,e],[1,118,"F21",79,"F21",132,"VK_F21",e,e],[1,119,"F22",80,"F22",133,"VK_F22",e,e],[1,120,"F23",81,"F23",134,"VK_F23",e,e],[1,121,"F24",82,"F24",135,"VK_F24",e,e],[1,122,"Open",0,e,0,e,e,e],[1,123,"Help",0,e,0,e,e,e],[1,124,"Select",0,e,0,e,e,e],[1,125,"Again",0,e,0,e,e,e],[1,126,"Undo",0,e,0,e,e,e],[1,127,"Cut",0,e,0,e,e,e],[1,128,"Copy",0,e,0,e,e,e],[1,129,"Paste",0,e,0,e,e,e],[1,130,"Find",0,e,0,e,e,e],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",e,e],[1,136,"KanaMode",0,e,0,e,e,e],[0,137,"IntlYen",0,e,0,e,e,e],[1,138,"Convert",0,e,0,e,e,e],[1,139,"NonConvert",0,e,0,e,e,e],[1,140,"Lang1",0,e,0,e,e,e],[1,141,"Lang2",0,e,0,e,e,e],[1,142,"Lang3",0,e,0,e,e,e],[1,143,"Lang4",0,e,0,e,e,e],[1,144,"Lang5",0,e,0,e,e,e],[1,145,"Abort",0,e,0,e,e,e],[1,146,"Props",0,e,0,e,e,e],[1,147,"NumpadParenLeft",0,e,0,e,e,e],[1,148,"NumpadParenRight",0,e,0,e,e,e],[1,149,"NumpadBackspace",0,e,0,e,e,e],[1,150,"NumpadMemoryStore",0,e,0,e,e,e],[1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[1,152,"NumpadMemoryClear",0,e,0,e,e,e],[1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",e,e],[1,156,"NumpadClearEntry",0,e,0,e,e,e],[1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[1,0,e,6,"Alt",18,"VK_MENU",e,e],[1,0,e,57,"Meta",91,"VK_COMMAND",e,e],[1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[1,165,"BrightnessUp",0,e,0,e,e,e],[1,166,"BrightnessDown",0,e,0,e,e,e],[1,167,"MediaPlay",0,e,0,e,e,e],[1,168,"MediaRecord",0,e,0,e,e,e],[1,169,"MediaFastForward",0,e,0,e,e,e],[1,170,"MediaRewind",0,e,0,e,e,e],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",e,e],[1,174,"Eject",0,e,0,e,e,e],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[1,180,"SelectTask",0,e,0,e,e,e],[1,181,"LaunchScreenSaver",0,e,0,e,e,e],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[1,189,"ZoomToggle",0,e,0,e,e,e],[1,190,"MailReply",0,e,0,e,e,e],[1,191,"MailForward",0,e,0,e,e,e],[1,192,"MailSend",0,e,0,e,e,e],[1,0,e,114,"KeyInComposition",229,e,e,e],[1,0,e,116,"ABNT_C2",194,"VK_ABNT_C2",e,e],[1,0,e,96,"OEM_8",223,"VK_OEM_8",e,e],[1,0,e,0,e,0,"VK_KANA",e,e],[1,0,e,0,e,0,"VK_HANGUL",e,e],[1,0,e,0,e,0,"VK_JUNJA",e,e],[1,0,e,0,e,0,"VK_FINAL",e,e],[1,0,e,0,e,0,"VK_HANJA",e,e],[1,0,e,0,e,0,"VK_KANJI",e,e],[1,0,e,0,e,0,"VK_CONVERT",e,e],[1,0,e,0,e,0,"VK_NONCONVERT",e,e],[1,0,e,0,e,0,"VK_ACCEPT",e,e],[1,0,e,0,e,0,"VK_MODECHANGE",e,e],[1,0,e,0,e,0,"VK_SELECT",e,e],[1,0,e,0,e,0,"VK_PRINT",e,e],[1,0,e,0,e,0,"VK_EXECUTE",e,e],[1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[1,0,e,0,e,0,"VK_HELP",e,e],[1,0,e,0,e,0,"VK_APPS",e,e],[1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[1,0,e,0,e,0,"VK_PACKET",e,e],[1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[1,0,e,0,e,0,"VK_ATTN",e,e],[1,0,e,0,e,0,"VK_CRSEL",e,e],[1,0,e,0,e,0,"VK_EXSEL",e,e],[1,0,e,0,e,0,"VK_EREOF",e,e],[1,0,e,0,e,0,"VK_PLAY",e,e],[1,0,e,0,e,0,"VK_ZOOM",e,e],[1,0,e,0,e,0,"VK_NONAME",e,e],[1,0,e,0,e,0,"VK_PA1",e,e],[1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]],i=[],n=[];for(const e of t){const[t,s,o,r,a,l,h,c,d]=e;if(n[s]||(n[s]=!0,da[s]=o,ua[o]=s,ga[o.toLowerCase()]=s,t&&(pa[s]=r,0!==r&&3!==r&&5!==r&&4!==r&&6!==r&&57!==r&&(fa[r]=s))),!i[r]){if(i[r]=!0,!a)throw new Error(`String representation missing for key code ${r} around scan code ${o}`);ra.define(r,a),aa.define(r,c||a),la.define(r,d||c||a)}l&&(ha[l]=r),h&&(ca[h]=r)}fa[3]=46}(),function(e){e.toString=function(e){return ra.keyCodeToStr(e)},e.fromString=function(e){return ra.strToKeyCode(e)},e.toUserSettingsUS=function(e){return aa.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return la.keyCodeToStr(e)},e.fromUserSettings=function(e){return aa.strToKeyCode(e)||la.strToKeyCode(e)},e.toElectronAccelerator=function(e){if(e>=98&&e<=113)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return ra.keyCodeToStr(e)}}(ma||(ma={}));class wa{constructor(e,t,i,n,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=s}equals(e){return e instanceof wa&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`K${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}toKeybinding(){return new _a([this])}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}class _a{constructor(e){if(0===e.length)throw et("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)0!==t&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(null===e)return!1;if(this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}}class ya{constructor(e,t,i,n,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=s,this.keyAriaLabel=o}}class Ca{}const Sa=M?256:2048,ka=M?2048:256;class xa{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return ma.fromString(t)}const t=e.keyCode;if(3===t)return 7;if(Zr)switch(t){case 59:return 85;case 60:if(R)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(M)return 57}else if(Jr){if(M&&93===t)return 57;if(!M&&92===t)return 57}return ha[t]||0}(t),this.code=t.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Sa),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=ka),t|=e,t}_computeKeyCodeChord(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new wa(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Ea=new WeakMap;function Da(e){if(!e.parent||e.parent===e)return null;try{const t=e.location,i=e.parent.location;if("null"!==t.origin&&"null"!==i.origin&&t.origin!==i.origin)return null}catch(e){return null}return e.parent}class La{static getSameOriginWindowChain(e){let t=Ea.get(e);if(!t){t=[],Ea.set(e,t);let i,n=e;do{i=Da(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i}while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0;const s=this.getSameOriginWindowChain(e);for(const e of s){const s=e.window.deref();if(i+=s?.scrollY??0,n+=s?.scrollX??0,s===t)break;if(!e.iframeElement)break;const o=e.iframeElement.getBoundingClientRect();i+=o.top,n+=o.left}return{top:i,left:n}}}class Ia{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"==typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=La.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Ta{constructor(e,t=0,i=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(ea){const e=navigator.userAgent.match(/Chrome\/(\d+)/);n=(e?parseInt(e[1]):123)<=122}if(e){const t=e,i=e,s=e.view?.devicePixelRatio||1;if(void 0!==t.wheelDeltaY)this.deltaY=n?t.wheelDeltaY/(120*s):t.wheelDeltaY/120;else if(void 0!==i.VERTICAL_AXIS&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaY=Zr&&!M?-e.deltaY/3:-e.deltaY:this.deltaY=-e.deltaY/40}if(void 0!==t.wheelDeltaX)this.deltaX=ta&&A?-t.wheelDeltaX/120:n?t.wheelDeltaX/(120*s):t.wheelDeltaX/120;else if(void 0!==i.HORIZONTAL_AXIS&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaX=Zr&&!M?-e.deltaX/3:-e.deltaX:this.deltaX=-e.deltaX/40}0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=n?e.wheelDelta/(120*s):e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}const Na=Symbol("MicrotaskDelay");function Aa(e){return!!e&&"function"==typeof e.then}function Ma(e){const t=new ki,i=e(t.token),n=new Promise(((e,n)=>{const s=t.token.onCancellationRequested((()=>{s.dispose(),n(new Ze)}));Promise.resolve(i).then((i=>{s.dispose(),t.dispose(),e(i)}),(e=>{s.dispose(),t.dispose(),n(e)}))}));return new class{cancel(){t.cancel(),t.dispose()}then(e,t){return n.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return n.finally(e)}}}function Ra(e,t,i){return new Promise(((n,s)=>{const o=t.onCancellationRequested((()=>{o.dispose(),n(i)}));e.then(n,s).finally((()=>o.dispose()))}))}class Oa{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{if(this.queuedPromise=null,this.isDisposed)return;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise((t=>{this.activePromise.then(e,e).then(t)}))}return new Promise(((e,t)=>{this.queuedPromise.then(e,t)}))}return this.activePromise=e(),new Promise(((e,t)=>{this.activePromise.then((t=>{this.activePromise=null,e(t)}),(e=>{this.activePromise=null,t(e)}))}))}dispose(){this.isDisposed=!0}}class Fa{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})));const i=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===Na?(e=>{let t=!0;return queueMicrotask((()=>{t&&(t=!1,e())})),{isTriggered:()=>t,dispose:()=>{t=!1}}})(i):((e,t)=>{let i=!0;const n=setTimeout((()=>{i=!1,t()}),e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(n),i=!1}}})(t,i),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Ze),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class Pa{constructor(e){this.delayer=new Fa(e),this.throttler=new Oa}trigger(e,t){return this.delayer.trigger((()=>this.throttler.queue(e)),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}class Ba{constructor(){this._isOpen=!1,this._promise=new Promise(((e,t)=>{this._completePromise=e}))}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}function za(e,t){return t?new Promise(((i,n)=>{const s=setTimeout((()=>{o.dispose(),i()}),e),o=t.onCancellationRequested((()=>{clearTimeout(s),o.dispose(),n(new Ze)}))})):Ma((t=>za(e,t)))}function Wa(e,t=0,i){const n=setTimeout((()=>{e(),i&&s.dispose()}),t),s=Yt((()=>{clearTimeout(n),i?.deleteAndLeak(s)}));return i?.add(s),s}class Ha{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new ui}whenIdle(){return this.size>0?oi.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise(((t,i)=>{this.outstandingPromises.push({factory:e,c:t,e:i}),this.consume()}))}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then((()=>this.consumed()),(()=>this.consumed()))}}consumed(){this._isDisposed||(this.runningPromises--,0==--this._size&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}}class Va extends Ha{constructor(){super(1)}}class Ua{constructor(){this.queues=new Map,this.drainers=new Set,this.drainListeners=void 0,this.drainListenerCount=0}async whenDrained(){if(this.isDrained())return;const e=new Za;return this.drainers.add(e),e.p}isDrained(){for(const[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e,t=hs){const i=t.getComparisonKey(e);return this.queues.get(i)?.size??0}queueFor(e,t,i=hs){const n=i.getComparisonKey(e);let s=this.queues.get(n);if(!s){s=new Va;const e=this.drainListenerCount++,t=oi.once(s.onDrained)((()=>{s?.dispose(),this.queues.delete(n),this.onDidQueueDrain(),this.drainListeners?.deleteAndDispose(e),0===this.drainListeners?.size&&(this.drainListeners.dispose(),this.drainListeners=void 0)}));this.drainListeners||(this.drainListeners=new ei),this.drainListeners.set(e,t),this.queues.set(n,s)}return s.queue(t)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(const e of this.drainers)e.complete();this.drainers.clear()}dispose(){for(const[,e]of this.queues)e.dispose();this.queues.clear(),this.releaseDrainers(),this.drainListeners?.dispose()}}class Ka{constructor(e,t){this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}class qa{constructor(){this.disposable=void 0}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){this.cancel();const n=i.setInterval((()=>{e()}),t);this.disposable=Yt((()=>{i.clearInterval(n),this.disposable=void 0}))}dispose(){this.cancel()}}class $a{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}let ja,Ga;Ga="function"!=typeof globalThis.requestIdleCallback||"function"!=typeof globalThis.cancelIdleCallback?(e,t)=>{q((()=>{if(i)return;const e=Date.now()+15,n={didTimeout:!0,timeRemaining(){return Math.max(0,e-Date.now())}};t(Object.freeze(n))}));let i=!1;return{dispose(){i||(i=!0)}}}:(e,t,i)=>{const n=e.requestIdleCallback(t,"number"==typeof i?{timeout:i}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(n))}}},ja=e=>Ga(globalThis,e);class Ya{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=Ga(e,(()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Xa extends Ya{constructor(e){super(globalThis,e)}}class Qa{isRunning(e){return"number"==typeof e?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,i){return this._running={taskId:e,cancel:()=>i?.(),promise:t},t.then((()=>this.doneRunning(e)),(()=>this.doneRunning(e))),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){const e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{const{promise:t,resolve:i,reject:n}=function(){let e,t;return{promise:new Promise(((i,n)=>{e=i,t=n})),resolve:e,reject:t}}();this._queued={run:e,promise:t,promiseResolve:i,promiseReject:n}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}}class Za{get isRejected(){return 1===this.outcome?.outcome}get isResolved(){return 0===this.outcome?.outcome}get isSettled(){return!!this.outcome}get value(){return 0===this.outcome?.outcome?this.outcome?.value:void 0}constructor(){this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}complete(e){return new Promise((t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()}))}error(e){return new Promise((t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()}))}cancel(){return this.error(new Ze)}}var Ja;!function(e){e.settled=async function(e){let t;const i=await Promise.all(e.map((e=>e.then((e=>e),(e=>{t||(t=e)})))));if(void 0!==t)throw t;return i},e.withAsyncBody=function(e){return new Promise((async(t,i)=>{try{await e(t,i)}catch(e){i(e)}}))}}(Ja||(Ja={}));class el{static fromArray(e){return new el((t=>{t.emitMany(e)}))}static fromPromise(e){return new el((async t=>{t.emitMany(await e)}))}static fromPromises(e){return new el((async t=>{await Promise.all(e.map((async e=>t.emitOne(await e))))}))}static merge(e){return new el((async t=>{await Promise.all(e.map((async e=>{for await(const i of e)t.emitOne(i)})))}))}static{this.EMPTY=el.fromArray([])}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new ui,queueMicrotask((async()=>{const t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{await Promise.resolve(e(t)),this.resolve()}catch(e){this.reject(e)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:async()=>{for(;;){if(2===this._state)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(1===this._state)return{done:!0,value:void 0};await oi.toPromise(this._onStateChanged.event)}},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new el((async i=>{for await(const n of e)i.emitOne(t(n))}))}map(e){return el.map(this,e)}static filter(e,t){return new el((async i=>{for await(const n of e)t(n)&&i.emitOne(n)}))}filter(e){return el.filter(this,e)}static coalesce(e){return el.filter(e,(e=>!!e))}coalesce(){return el.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return el.toPromise(this)}emitOne(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){0===this._state&&(this._state=1,this._onStateChanged.fire())}reject(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}const{entries:tl,setPrototypeOf:il,isFrozen:nl,getPrototypeOf:sl,getOwnPropertyDescriptor:ol}=Object;let{freeze:rl,seal:al,create:ll}=Object,{apply:hl,construct:cl}="undefined"!=typeof Reflect&&Reflect;hl||(hl=function(e,t,i){return e.apply(t,i)}),rl||(rl=function(e){return e}),al||(al=function(e){return e}),cl||(cl=function(e,t){return new e(...t)});const dl=Sl(Array.prototype.forEach),ul=Sl(Array.prototype.pop),gl=Sl(Array.prototype.push),pl=Sl(String.prototype.toLowerCase),fl=Sl(String.prototype.toString),ml=Sl(String.prototype.match),bl=Sl(String.prototype.replace),vl=Sl(String.prototype.indexOf),wl=Sl(String.prototype.trim),_l=Sl(RegExp.prototype.test),yl=(Cl=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return cl(Cl,t)});var Cl;function Sl(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return hl(e,t,n)}}function kl(e,t,i){var n;i=null!==(n=i)&&void 0!==n?n:pl,il&&il(e,null);let s=t.length;for(;s--;){let n=t[s];if("string"==typeof n){const e=i(n);e!==n&&(nl(t)||(t[s]=e),n=e)}e[n]=!0}return e}function xl(e){const t=ll(null);for(const[i,n]of tl(e))t[i]=n;return t}function El(e,t){for(;null!==e;){const i=ol(e,t);if(i){if(i.get)return Sl(i.get);if("function"==typeof i.value)return Sl(i.value)}e=sl(e)}return function(e){return console.warn("fallback value for",e),null}}const Dl=rl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ll=rl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Il=rl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Tl=rl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nl=rl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Al=rl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ml=rl(["#text"]),Rl=rl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ol=rl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fl=rl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pl=rl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Bl=al(/\{\{[\w\W]*|[\w\W]*\}\}/gm),zl=al(/<%[\w\W]*|[\w\W]*%>/gm),Wl=al(/\${[\w\W]*}/gm),Hl=al(/^data-[\-\w.\u00B7-\uFFFF]/),Vl=al(/^aria-[\-\w]+$/),Ul=al(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Kl=al(/^(?:\w+script|data):/i),ql=al(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$l=al(/^html$/i);var jl=Object.freeze({__proto__:null,MUSTACHE_EXPR:Bl,ERB_EXPR:zl,TMPLIT_EXPR:Wl,DATA_ATTR:Hl,ARIA_ATTR:Vl,IS_ALLOWED_URI:Ul,IS_SCRIPT_OR_DATA:Kl,ATTR_WHITESPACE:ql,DOCTYPE_NAME:$l});const Gl=()=>"undefined"==typeof window?null:window;var Yl=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gl();const i=t=>e(t);if(i.version="3.0.5",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;const n=t.document,s=n.currentScript;let{document:o}=t;const{DocumentFragment:r,HTMLTemplateElement:a,Node:l,Element:h,NodeFilter:c,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:g,trustedTypes:p}=t,f=h.prototype,m=El(f,"cloneNode"),b=El(f,"nextSibling"),v=El(f,"childNodes"),w=El(f,"parentNode");if("function"==typeof a){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let _,y="";const{implementation:C,createNodeIterator:S,createDocumentFragment:k,getElementsByTagName:x}=o,{importNode:E}=n;let D={};i.isSupported="function"==typeof tl&&"function"==typeof w&&C&&void 0!==C.createHTMLDocument;const{MUSTACHE_EXPR:L,ERB_EXPR:I,TMPLIT_EXPR:T,DATA_ATTR:N,ARIA_ATTR:A,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:R}=jl;let{IS_ALLOWED_URI:O}=jl,F=null;const P=kl({},[...Dl,...Ll,...Il,...Nl,...Ml]);let B=null;const z=kl({},[...Rl,...Ol,...Fl,...Pl]);let W=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,V=null,U=!0,K=!0,q=!1,$=!0,j=!1,G=!1,Y=!1,X=!1,Q=!1,Z=!1,J=!1,ee=!0,te=!1,ie=!0,ne=!1,se={},oe=null;const re=kl({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ae=null;const le=kl({},["audio","video","img","source","image","track"]);let he=null;const ce=kl({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",ue="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let pe=ge,fe=!1,me=null;const be=kl({},[de,ue,ge],fl);let ve;const we=["application/xhtml+xml","text/html"];let _e,ye=null;const Ce=o.createElement("form"),Se=function(e){return e instanceof RegExp||e instanceof Function},ke=function(e){if(!ye||ye!==e){if(e&&"object"==typeof e||(e={}),e=xl(e),ve=ve=-1===we.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,_e="application/xhtml+xml"===ve?fl:pl,F="ALLOWED_TAGS"in e?kl({},e.ALLOWED_TAGS,_e):P,B="ALLOWED_ATTR"in e?kl({},e.ALLOWED_ATTR,_e):z,me="ALLOWED_NAMESPACES"in e?kl({},e.ALLOWED_NAMESPACES,fl):be,he="ADD_URI_SAFE_ATTR"in e?kl(xl(ce),e.ADD_URI_SAFE_ATTR,_e):ce,ae="ADD_DATA_URI_TAGS"in e?kl(xl(le),e.ADD_DATA_URI_TAGS,_e):le,oe="FORBID_CONTENTS"in e?kl({},e.FORBID_CONTENTS,_e):re,H="FORBID_TAGS"in e?kl({},e.FORBID_TAGS,_e):{},V="FORBID_ATTR"in e?kl({},e.FORBID_ATTR,_e):{},se="USE_PROFILES"in e&&e.USE_PROFILES,U=!1!==e.ALLOW_ARIA_ATTR,K=!1!==e.ALLOW_DATA_ATTR,q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,$=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,j=e.SAFE_FOR_TEMPLATES||!1,G=e.WHOLE_DOCUMENT||!1,Q=e.RETURN_DOM||!1,Z=e.RETURN_DOM_FRAGMENT||!1,J=e.RETURN_TRUSTED_TYPE||!1,X=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=e.SANITIZE_NAMED_PROPS||!1,ie=!1!==e.KEEP_CONTENT,ne=e.IN_PLACE||!1,O=e.ALLOWED_URI_REGEXP||Ul,pe=e.NAMESPACE||ge,W=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),j&&(K=!1),Z&&(Q=!0),se&&(F=kl({},[...Ml]),B=[],!0===se.html&&(kl(F,Dl),kl(B,Rl)),!0===se.svg&&(kl(F,Ll),kl(B,Ol),kl(B,Pl)),!0===se.svgFilters&&(kl(F,Il),kl(B,Ol),kl(B,Pl)),!0===se.mathMl&&(kl(F,Nl),kl(B,Fl),kl(B,Pl))),e.ADD_TAGS&&(F===P&&(F=xl(F)),kl(F,e.ADD_TAGS,_e)),e.ADD_ATTR&&(B===z&&(B=xl(B)),kl(B,e.ADD_ATTR,_e)),e.ADD_URI_SAFE_ATTR&&kl(he,e.ADD_URI_SAFE_ATTR,_e),e.FORBID_CONTENTS&&(oe===re&&(oe=xl(oe)),kl(oe,e.FORBID_CONTENTS,_e)),ie&&(F["#text"]=!0),G&&kl(F,["html","head","body"]),F.table&&(kl(F,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw yl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw yl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=e.TRUSTED_TYPES_POLICY,y=_.createHTML("")}else void 0===_&&(_=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+s+" could not be created."),null}}(p,s)),null!==_&&"string"==typeof y&&(y=_.createHTML(""));rl&&rl(e),ye=e}},xe=kl({},["mi","mo","mn","ms","mtext"]),Ee=kl({},["foreignobject","desc","title","annotation-xml"]),De=kl({},["title","style","font","a","script"]),Le=kl({},Ll);kl(Le,Il),kl(Le,Tl);const Ie=kl({},Nl);kl(Ie,Al);const Te=function(e){gl(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Ne=function(e,t){try{gl(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){gl(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!B[e])if(Q||Z)try{Te(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ae=function(e){let t,i;if(X)e="<remove></remove>"+e;else{const t=ml(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===ve&&pe===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const n=_?_.createHTML(e):e;if(pe===ge)try{t=(new g).parseFromString(n,ve)}catch(e){}if(!t||!t.documentElement){t=C.createDocument(pe,"template",null);try{t.documentElement.innerHTML=fe?y:n}catch(e){}}const s=t.body||t.documentElement;return e&&i&&s.insertBefore(o.createTextNode(i),s.childNodes[0]||null),pe===ge?x.call(t,G?"html":"body")[0]:G?t.documentElement:s},Me=function(e){return S.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Re=function(e){return"object"==typeof l?e instanceof l:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Oe=function(e,t,n){D[e]&&dl(D[e],(e=>{e.call(i,t,n,ye)}))},Fe=function(e){let t;if(Oe("beforeSanitizeElements",e,null),(n=e)instanceof u&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof d)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return Te(e),!0;var n;const s=_e(e.nodeName);if(Oe("uponSanitizeElement",e,{tagName:s,allowedTags:F}),e.hasChildNodes()&&!Re(e.firstElementChild)&&(!Re(e.content)||!Re(e.content.firstElementChild))&&_l(/<[/\w]/g,e.innerHTML)&&_l(/<[/\w]/g,e.textContent))return Te(e),!0;if(!F[s]||H[s]){if(!H[s]&&Be(s)){if(W.tagNameCheck instanceof RegExp&&_l(W.tagNameCheck,s))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(s))return!1}if(ie&&!oe[s]){const t=w(e)||e.parentNode,i=v(e)||e.childNodes;if(i&&t){for(let n=i.length-1;n>=0;--n)t.insertBefore(m(i[n],!0),b(e))}}return Te(e),!0}return e instanceof h&&!function(e){let t=w(e);t&&t.tagName||(t={namespaceURI:pe,tagName:"template"});const i=pl(e.tagName),n=pl(t.tagName);return!!me[e.namespaceURI]&&(e.namespaceURI===ue?t.namespaceURI===ge?"svg"===i:t.namespaceURI===de?"svg"===i&&("annotation-xml"===n||xe[n]):Boolean(Le[i]):e.namespaceURI===de?t.namespaceURI===ge?"math"===i:t.namespaceURI===ue?"math"===i&&Ee[n]:Boolean(Ie[i]):e.namespaceURI===ge?!(t.namespaceURI===ue&&!Ee[n])&&!(t.namespaceURI===de&&!xe[n])&&!Ie[i]&&(De[i]||!Le[i]):!("application/xhtml+xml"!==ve||!me[e.namespaceURI]))}(e)?(Te(e),!0):"noscript"!==s&&"noembed"!==s&&"noframes"!==s||!_l(/<\/no(script|embed|frames)/i,e.innerHTML)?(j&&3===e.nodeType&&(t=e.textContent,t=bl(t,L," "),t=bl(t,I," "),t=bl(t,T," "),e.textContent!==t&&(gl(i.removed,{element:e.cloneNode()}),e.textContent=t)),Oe("afterSanitizeElements",e,null),!1):(Te(e),!0)},Pe=function(e,t,i){if(ee&&("id"===t||"name"===t)&&(i in o||i in Ce))return!1;if(K&&!V[t]&&_l(N,t));else if(U&&_l(A,t));else if(!B[t]||V[t]){if(!(Be(e)&&(W.tagNameCheck instanceof RegExp&&_l(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&_l(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&_l(W.tagNameCheck,i)||W.tagNameCheck instanceof Function&&W.tagNameCheck(i))))return!1}else if(he[t]);else if(_l(O,bl(i,R,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==vl(i,"data:")||!ae[e]){if(q&&!_l(M,bl(i,R,"")));else if(i)return!1}else;return!0},Be=function(e){return e.indexOf("-")>0},ze=function(e){let t,n,s,o;Oe("beforeSanitizeAttributes",e,null);const{attributes:r}=e;if(!r)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B};for(o=r.length;o--;){t=r[o];const{name:l,namespaceURI:h}=t;if(n="value"===l?t.value:wl(t.value),s=_e(l),a.attrName=s,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,Oe("uponSanitizeAttribute",e,a),n=a.attrValue,a.forceKeepAttr)continue;if(Ne(l,e),!a.keepAttr)continue;if(!$&&_l(/\/>/i,n)){Ne(l,e);continue}j&&(n=bl(n,L," "),n=bl(n,I," "),n=bl(n,T," "));const c=_e(e.nodeName);if(Pe(c,s,n)){if(!te||"id"!==s&&"name"!==s||(Ne(l,e),n="user-content-"+n),_&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(h);else switch(p.getAttributeType(c,s)){case"TrustedHTML":n=_.createHTML(n);break;case"TrustedScriptURL":n=_.createScriptURL(n)}try{h?e.setAttributeNS(h,l,n):e.setAttribute(l,n),ul(i.removed)}catch(e){}}}Oe("afterSanitizeAttributes",e,null)},We=function e(t){let i;const n=Me(t);for(Oe("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)Oe("uponSanitizeShadowNode",i,null),Fe(i)||(i.content instanceof r&&e(i.content),ze(i));Oe("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){let t,s,o,a,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(fe=!e,fe&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw yl("toString is not a function");if("string"!=typeof(e=e.toString()))throw yl("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Y||ke(h),i.removed=[],"string"==typeof e&&(ne=!1),ne){if(e.nodeName){const t=_e(e.nodeName);if(!F[t]||H[t])throw yl("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)t=Ae("\x3c!----\x3e"),s=t.ownerDocument.importNode(e,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?t=s:t.appendChild(s);else{if(!Q&&!j&&!G&&-1===e.indexOf("<"))return _&&J?_.createHTML(e):e;if(t=Ae(e),!t)return Q?null:J?y:""}t&&X&&Te(t.firstChild);const c=Me(ne?e:t);for(;o=c.nextNode();)Fe(o)||(o.content instanceof r&&We(o.content),ze(o));if(ne)return e;if(Q){if(Z)for(a=k.call(t.ownerDocument);t.firstChild;)a.appendChild(t.firstChild);else a=t;return(B.shadowroot||B.shadowrootmode)&&(a=E.call(n,a,!0)),a}let d=G?t.outerHTML:t.innerHTML;return G&&F["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&_l($l,t.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+d),j&&(d=bl(d,L," "),d=bl(d,I," "),d=bl(d,T," ")),_&&J?_.createHTML(d):d},i.setConfig=function(e){ke(e),Y=!0},i.clearConfig=function(){ye=null,Y=!1},i.isValidAttribute=function(e,t,i){ye||ke({});const n=_e(e),s=_e(t);return Pe(n,s,i)},i.addHook=function(e,t){"function"==typeof t&&(D[e]=D[e]||[],gl(D[e],t))},i.removeHook=function(e){if(D[e])return ul(D[e])},i.removeHooks=function(e){D[e]&&(D[e]=[])},i.removeAllHooks=function(){D={}},i}();const Xl=Yl.sanitize,Ql=Yl.addHook,Zl=Yl.removeHook;function Jl(e){return eh(e,0)}function eh(e,t){switch(typeof e){case"object":return null===e?th(349,t):Array.isArray(e)?(i=e,n=th(104579,n=t),i.reduce(((e,t)=>eh(t,e)),n)):function(e,t){return t=th(181387,t),Object.keys(e).sort().reduce(((t,i)=>(t=ih(i,t),eh(e[i],t))),t)}(e,t);case"string":return ih(e,t);case"boolean":return function(e,t){return th(e?433:863,t)}(e,t);case"number":return th(e,t);case"undefined":return th(937,t);default:return th(617,t)}var i,n}function th(e,t){return(t<<5)-t+e|0}function ih(e,t){t=th(149417,t);for(let i=0,n=e.length;i<n;i++)t=th(e.charCodeAt(i),t);return t}function nh(e,t,i=32){const n=i-t;return(e<<t|(~((1<<n)-1)&e)>>>n)>>>0}function sh(e,t=0,i=e.byteLength,n=0){for(let s=0;s<i;s++)e[t+s]=n}function oh(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""):function(e,t,i="0"){for(;e.length<t;)e=i+e;return e}((e>>>0).toString(16),t/4)}class rh{static{this._bigBlock32=new DataView(new ArrayBuffer(320))}constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(0===t)return;const i=this._buff;let n,s,o=this._buffLen,r=this._leftoverHighSurrogate;for(0!==r?(n=r,s=-1,r=0):(n=e.charCodeAt(0),s=0);;){let a=n;if(ji(n)){if(!(s+1<t)){r=n;break}{const t=e.charCodeAt(s+1);Gi(t)?(s++,a=Yi(n,t)):a=65533}}else Gi(n)&&(a=65533);if(o=this._push(i,o,a),s++,!(s<t))break;n=e.charCodeAt(s)}this._buffLen=o,this._leftoverHighSurrogate=r}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(1984&i)>>>6,e[t++]=128|(63&i)>>>0):i<65536?(e[t++]=224|(61440&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0):(e[t++]=240|(1835008&i)>>>18,e[t++]=128|(258048&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),oh(this._h0)+oh(this._h1)+oh(this._h2)+oh(this._h3)+oh(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,sh(this._buff,this._buffLen),this._buffLen>56&&(this._step(),sh(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=rh._bigBlock32,t=this._buffDV;for(let i=0;i<64;i+=4)e.setUint32(i,t.getUint32(i,!1),!1);for(let t=64;t<320;t+=4)e.setUint32(t,nh(e.getUint32(t-12,!1)^e.getUint32(t-32,!1)^e.getUint32(t-56,!1)^e.getUint32(t-64,!1),1),!1);let i,n,s,o=this._h0,r=this._h1,a=this._h2,l=this._h3,h=this._h4;for(let t=0;t<80;t++)t<20?(i=r&a|~r&l,n=1518500249):t<40?(i=r^a^l,n=1859775393):t<60?(i=r&a|r&l|a&l,n=2400959708):(i=r^a^l,n=3395469782),s=nh(o,5)+i+h+n+e.getUint32(4*t,!1)&4294967295,h=l,l=a,a=nh(r,30),r=o,o=s;this._h0=this._h0+o&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+l&4294967295,this._h4=this._h4+h&4294967295}}const{registerWindow:ah,getWindow:lh,getDocument:hh,getWindows:ch,getWindowsCount:dh,getWindowId:uh,getWindowById:gh,hasWindow:ph,onDidRegisterWindow:fh,onWillUnregisterWindow:mh,onDidUnregisterWindow:bh}=function(){const e=new Map;!function(e,t){const i=e;"number"!=typeof i.vscodeWindowId&&Object.defineProperty(i,"vscodeWindowId",{get:()=>t})}(Gr,1);const t={window:Gr,disposables:new Xt};e.set(Gr.vscodeWindowId,t);const i=new ui,n=new ui,s=new ui;return{onDidRegisterWindow:i.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(t){if(e.has(t.vscodeWindowId))return Qt.None;const o=new Xt,r={window:t,disposables:o.add(new Xt)};return e.set(t.vscodeWindowId,r),o.add(Yt((()=>{e.delete(t.vscodeWindowId),n.fire(t)}))),o.add(_h(t,rc.BEFORE_UNLOAD,(()=>{s.fire(t)}))),i.fire(r),o},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(e){return e.vscodeWindowId},hasWindow(t){return e.has(t)},getWindowById:function(i,n){return("number"==typeof i?e.get(i):void 0)??(n?t:void 0)},getWindow(e){const t=e;if(t?.ownerDocument?.defaultView)return t.ownerDocument.defaultView.window;const i=e;return i?.view?i.view.window:Gr},getDocument(e){return lh(e).document}}}();function vh(e){for(;e.firstChild;)e.firstChild.remove()}class wh{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function _h(e,t,i,n){return new wh(e,t,i,n)}function yh(e,t){return function(i){return t(new Ia(e,i))}}const Ch=function(e,t,i,n){let s=i;return"click"===t||"mousedown"===t?s=yh(lh(e),i):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(s=function(e){return function(t){return e(new xa(t))}}(i)),_h(e,t,s,n)};let Sh,kh;class xh extends qa{constructor(e){super(),this.defaultTarget=e&&lh(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class Eh{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ge(e)}}static sort(e,t){return t.priority-e.priority}}!function(){const e=new Map,t=new Map,i=new Map,n=new Map;kh=(s,o,r=0)=>{const a=uh(s),l=new Eh(o,r);let h=e.get(a);return h||(h=[],e.set(a,h)),h.push(l),i.get(a)||(i.set(a,!0),s.requestAnimationFrame((()=>(s=>{i.set(s,!1);const o=e.get(s)??[];for(t.set(s,o),e.set(s,[]),n.set(s,!0);o.length>0;)o.sort(Eh.sort),o.shift().execute();n.set(s,!1)})(a)))),l},Sh=(e,i,s)=>{const o=uh(e);if(n.get(o)){const e=new Eh(i,s);let n=t.get(o);return n||(n=[],t.set(o,n)),n.push(e),e}return kh(e,i,s)}}();function Dh(e){return lh(e).getComputedStyle(e,null)}function Lh(e,t){const i=lh(e),n=i.document;if(e!==n.body)return new Th(e.clientWidth,e.clientHeight);if(B&&i?.visualViewport)return new Th(i.visualViewport.width,i.visualViewport.height);if(i?.innerWidth&&i.innerHeight)return new Th(i.innerWidth,i.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Th(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Th(n.documentElement.clientWidth,n.documentElement.clientHeight);if(t)return Lh(t);throw new Error("Unable to figure out browser width and height")}class Ih{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const n=Dh(e),s=n?n.getPropertyValue(t):"0";return Ih.convertToPixels(e,s)}static getBorderLeftWidth(e){return Ih.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Ih.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Ih.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Ih.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Ih.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Ih.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Ih.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Ih.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Ih.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Ih.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Ih.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Ih.getDimension(e,"margin-bottom","marginBottom")}}class Th{static{this.None=new Th(0,0)}constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Th(e,t):this}static is(e){return"object"==typeof e&&"number"==typeof e.height&&"number"==typeof e.width}static lift(e){return e instanceof Th?e:new Th(e.width,e.height)}static equals(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}}function Nh(e){let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==e.ownerDocument.body&&e!==e.ownerDocument.documentElement;){i-=e.scrollTop;const s=Wh(e)?null:Dh(e);s&&(n-="rtl"!==s.direction?e.scrollLeft:-e.scrollLeft),e===t&&(n+=Ih.getBorderLeftWidth(e),i+=Ih.getBorderTopWidth(e),i+=e.offsetTop,n+=e.offsetLeft,t=e.offsetParent)}return{left:n,top:i}}function Ah(e){const t=e.getBoundingClientRect(),i=lh(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}function Mh(e){let t=e,i=1;do{const e=Dh(t).zoom;null!=e&&"1"!==e&&(i*=e),t=t.parentElement}while(null!==t&&t!==t.ownerDocument.documentElement);return i}function Rh(e){const t=Ih.getMarginLeft(e)+Ih.getMarginRight(e);return e.offsetWidth+t}function Oh(e){const t=Ih.getBorderLeftWidth(e)+Ih.getBorderRightWidth(e),i=Ih.getPaddingLeft(e)+Ih.getPaddingRight(e);return e.offsetWidth-t-i}function Fh(e){const t=Ih.getBorderTopWidth(e)+Ih.getBorderBottomWidth(e),i=Ih.getPaddingTop(e)+Ih.getPaddingBottom(e);return e.offsetHeight-t-i}function Ph(e){const t=Ih.getMarginTop(e)+Ih.getMarginBottom(e);return e.offsetHeight+t}function Bh(e,t){return Boolean(t?.contains(e))}function zh(e,t,i){return!!function(e,t,i){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(i)if("string"==typeof i){if(e.classList.contains(i))return null}else if(e===i)return null;e=e.parentNode}return null}(e,t,i)}function Wh(e){return e&&!!e.host&&!!e.mode}function Hh(e){return!!Vh(e)}function Vh(e){for(;e.parentNode;){if(e===e.ownerDocument?.body)return null;e=e.parentNode}return Wh(e)?e:null}function Uh(){let e=$h().activeElement;for(;e?.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Kh(e){return Uh()===e}function qh(e){return Bh(Uh(),e)}function $h(){if(dh()<=1)return Gr.document;return Array.from(ch()).map((({window:e})=>e.document)).find((e=>e.hasFocus()))??Gr.document}function jh(){const e=$h();return e.defaultView?.window??Gr}const Gh=new Map;function Yh(e=Gr.document.head,t,i){const n=document.createElement("style");if(n.type="text/css",n.media="screen",t?.(n),e.appendChild(n),i&&i.add(Yt((()=>e.removeChild(n)))),e===Gr.document.head){const e=new Set;Gh.set(n,e);for(const{window:t,disposables:s}of ch()){if(t===Gr)continue;const o=s.add(Xh(n,e,t));i?.add(o)}}return n}function Xh(e,t,i){const n=new Xt,s=e.cloneNode(!0);i.document.head.appendChild(s),n.add(Yt((()=>i.document.head.removeChild(s))));for(const t of ec(e))s.sheet?.insertRule(t.cssText,s.sheet?.cssRules.length);return n.add(Qh.observe(e,n,{childList:!0})((()=>{s.textContent=e.textContent}))),t.add(s),n.add(Yt((()=>t.delete(s)))),n}const Qh=new class{constructor(){this.mutationObservers=new Map}observe(e,t,i){let n=this.mutationObservers.get(e);n||(n=new Map,this.mutationObservers.set(e,n));const s=Jl(i);let o=n.get(s);if(o)o.users+=1;else{const r=new ui,a=new MutationObserver((e=>r.fire(e)));a.observe(e,i);const l=o={users:1,observer:a,onDidMutate:r.event};t.add(Yt((()=>{l.users-=1,0===l.users&&(r.dispose(),a.disconnect(),n?.delete(s),0===n?.size&&this.mutationObservers.delete(e))}))),n.set(s,o)}return o.onDidMutate}};let Zh=null;function Jh(){return Zh||(Zh=Yh()),Zh}function ec(e){return e?.sheet?.rules?e.sheet.rules:e?.sheet?.cssRules?e.sheet.cssRules:[]}function tc(e,t,i=Jh()){if(i&&t){i.sheet?.insertRule(`${e} {${t}}`,0);for(const n of Gh.get(i)??[])tc(e,t,n)}}function ic(e,t=Jh()){if(!t)return;const i=ec(t),n=[];for(let t=0;t<i.length;t++){const s=i[t];nc(s)&&-1!==s.selectorText.indexOf(e)&&n.push(t)}for(let e=n.length-1;e>=0;e--)t.sheet?.deleteRule(n[e]);for(const i of Gh.get(t)??[])ic(e,i)}function nc(e){return"string"==typeof e.selectorText}function sc(e){return e instanceof MouseEvent||e instanceof lh(e).MouseEvent}function oc(e){return e instanceof KeyboardEvent||e instanceof lh(e).KeyboardEvent}const rc={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Jr?"webkitAnimationStart":"animationstart",ANIMATION_END:Jr?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Jr?"webkitAnimationIteration":"animationiteration"};function ac(e){const t=e;return!(!t||"function"!=typeof t.preventDefault||"function"!=typeof t.stopPropagation)}const lc=(e,t)=>(e.preventDefault(),t&&e.stopPropagation(),e);class hc extends Qt{static hasFocusWithin(e){if(e instanceof HTMLElement){const t=Vh(e);return Bh(t?t.activeElement:e.ownerDocument.activeElement,e)}{const t=e;return Bh(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new ui),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ui),this.onDidBlur=this._onDidBlur.event;let t=hc.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,(e instanceof HTMLElement?lh(e):e).setTimeout((()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{hc.hasFocusWithin(e)!==t&&(t?s():n())},this._register(_h(e,rc.FOCUS,n,!0)),this._register(_h(e,rc.BLUR,s,!0)),e instanceof HTMLElement&&(this._register(_h(e,rc.FOCUS_IN,(()=>this._refreshStateHandler()))),this._register(_h(e,rc.FOCUS_OUT,(()=>this._refreshStateHandler()))))}refreshState(){this._refreshStateHandler()}}function cc(e){return new hc(e)}function dc(e,...t){if(e.append(...t),1===t.length&&"string"!=typeof t[0])return t[0]}function uc(e,t){return e.insertBefore(t,e.firstChild),t}function gc(e,...t){e.innerText="",dc(e,...t)}const pc=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var fc;function mc(e,t,i,...n){const s=pc.exec(t);if(!s)throw new Error("Bad use of emmet");const o=s[1]||"div";let r;return r=e!==fc.HTML?document.createElementNS(e,o):document.createElement(o),s[3]&&(r.id=s[3]),s[4]&&(r.className=s[4].replace(/\./g," ").trim()),i&&Object.entries(i).forEach((([e,t])=>{void 0!==t&&(/^on\w+$/.test(e)?r[e]=t:"selected"===e?t&&r.setAttribute(e,"true"):r.setAttribute(e,t))})),r.append(...n),r}function bc(e,t,...i){return mc(fc.HTML,e,t,...i)}function vc(...e){for(const t of e)t.style.display="",t.removeAttribute("aria-hidden")}function wc(...e){for(const t of e)t.style.display="none",t.setAttribute("aria-hidden","true")}function _c(e){Gr.open(e,"_blank","noopener")}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.SVG="http://www.w3.org/2000/svg"}(fc||(fc={})),bc.SVG=function(e,t,...i){return mc(fc.SVG,e,t,...i)};function yc(e){return e?`url('${Sn.uriToBrowserUri(e).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function Cc(e){return`'${e.replace(/'/g,"%27")}'`}function Sc(e,t){if(void 0!==e){const i=e.match(/^\s*var\((.+)\)$/);if(i){const e=i[1].split(",",2);return 2===e.length&&(t=Sc(e[1].trim(),t)),`var(${e[0]}, ${t})`}return e}return t}var kc;function xc(e,t=!1){const i=document.createElement("a");return Ql("afterSanitizeAttributes",(n=>{for(const s of["href","src"])if(n.hasAttribute(s)){const o=n.getAttribute(s);if("href"===s&&o.startsWith("#"))continue;if(i.href=o,!e.includes(i.protocol.replace(/:$/,""))){if(t&&"src"===s&&i.href.startsWith("data:"))continue;n.removeAttribute(s)}}})),Yt((()=>{Zl("afterSanitizeAttributes")}))}yn.setPreferredWebSchema(/^https:/.test(Gr.location.href)?"https":"http"),function(e){e[e.DOCUMENT=1]="DOCUMENT",e[e.BROWSER=2]="BROWSER"}(kc||(kc={}));vn.http,vn.https,vn.command;const Ec=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});class Dc extends ui{constructor(){super(),this._subscriptions=new Xt,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(oi.runAndSubscribe(fh,(({window:e,disposables:t})=>this.registerListeners(e,t)),{window:Gr,disposables:this._subscriptions}))}registerListeners(e,t){t.add(_h(e,"keydown",(e=>{if(e.defaultPrevented)return;const t=new xa(e);if(6!==t.keyCode||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}}),!0)),t.add(_h(e,"keyup",(e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))}),!0)),t.add(_h(e.document.body,"mousedown",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),t.add(_h(e.document.body,"mouseup",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),t.add(_h(e.document.body,"mousemove",(e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)}),!0)),t.add(_h(e,"blur",(()=>{this.resetKeyStatus()})))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Dc.instance||(Dc.instance=new Dc),Dc.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}const Lc=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Ic(e,...t){let i,n;Array.isArray(t[0])?(i={},n=t[0]):(i=t[0]||{},n=t[1]);const s=Lc.exec(e);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElement(o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const e of s.groups.class.split("."))""!==e&&a.push(e);if(void 0!==i.className)for(const e of i.className.split("."))""!==e&&a.push(e);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),n)for(const e of n)e instanceof HTMLElement?r.appendChild(e):"string"==typeof e?r.append(e):"root"in e&&(Object.assign(l,e),r.appendChild(e.root));for(const[e,t]of Object.entries(i))if("className"!==e)if("style"===e)for(const[e,i]of Object.entries(t))r.style.setProperty(Tc(e),"number"==typeof i?i+"px":""+i);else"tabIndex"===e?r.tabIndex=t:r.setAttribute(Tc(e),t.toString());return l.root=r,l}function Tc(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var Nc,Ac,Mc;!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(Nc||(Nc={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(Ac||(Ac={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(Mc||(Mc={}));class Rc{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|e.tabSize),"tabSize"===e.indentSize?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|e.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&qn(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Oc{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}class Fc{constructor(e,t,i,n,s,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=s,this._isTracked=o}}class Pc{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Bc{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function zc(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}const Wc=o("themeService");let Hc=class extends Qt{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new ui),this.onWillCreateCodeEditor=this._onWillCreateCodeEditor.event,this._onCodeEditorAdd=this._register(new ui),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ui),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new ui),this.onWillCreateDiffEditor=this._onWillCreateDiffEditor.event,this._onDiffEditorAdd=this._register(new ui),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new ui),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._onDidChangeTransientModelProperty=this._register(new ui),this.onDidChangeTransientModelProperty=this._onDidChangeTransientModelProperty.event,this._onDecorationTypeRegistered=this._register(new ui),this.onDecorationTypeRegistered=this._onDecorationTypeRegistered.event,this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._codeEditorOpenHandlers=new ii,this._transientWatchers={},this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=this._createGlobalStyleSheet()),this._globalStyleSheet}_createGlobalStyleSheet(){return new Kc(Yh())}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!Hh(t))return this._getOrCreateGlobalStyleSheet();const i=e.getId();if(!this._editorStyleSheets.has(i)){const e=new Uc(this,i,Yh(t));this._editorStyleSheets.set(i,e)}return this._editorStyleSheets.get(i)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,i,n,s){let o=this._decorationOptionProviders.get(t);if(!o){const r=this._getOrCreateStyleSheet(s),a={styleSheet:r,key:t,parentTypeKey:n,options:i||Object.create(null)};o=n?new qc(this._themeService,r,a):new $c(e,this._themeService,r,a),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}return o.refCount++,{dispose:()=>{this.removeDecorationType(t)}}}listDecorationTypes(){return Array.from(this._decorationOptionProviders.keys())}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((t=>t.removeDecorationsByType(e)))))}resolveDecorationOptions(e,t){const i=this._decorationOptionProviders.get(e);if(!i)throw new Error("Unknown decoration type key: "+e);return i.getOptions(this,t)}resolveDecorationCSSRules(e){const t=this._decorationOptionProviders.get(e);return t?t.resolveDecorationCSSRules():null}setModelProperty(e,t,i){const n=e.toString();let s;this._modelProperties.has(n)?s=this._modelProperties.get(n):(s=new Map,this._modelProperties.set(n,s)),s.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i)){return this._modelProperties.get(i).get(t)}}setTransientModelProperty(e,t,i){const n=e.uri.toString();let s;this._transientWatchers.hasOwnProperty(n)?s=this._transientWatchers[n]:(s=new Vc(n,e,this),this._transientWatchers[n]=s);s.get(t)!==i&&(s.set(t,i),this._onDidChangeTransientModelProperty.fire(e))}getTransientModelProperty(e,t){const i=e.uri.toString();if(this._transientWatchers.hasOwnProperty(i))return this._transientWatchers[i].get(t)}getTransientModelProperties(e){const t=e.uri.toString();if(this._transientWatchers.hasOwnProperty(t))return this._transientWatchers[t].keys().map((e=>[e,this._transientWatchers[t].get(e)]))}_removeWatcher(e){delete this._transientWatchers[e.uri]}async openCodeEditor(e,t,i){for(const n of this._codeEditorOpenHandlers){const s=await n(e,t,i);if(null!==s)return s}return null}registerCodeEditorOpenHandler(e){return Yt(this._codeEditorOpenHandlers.unshift(e))}};Hc=Bs([zs(0,Wc)],Hc);class Vc{constructor(e,t,i){this.uri=e,this._values={},t.onWillDispose((()=>i._removeWatcher(this)))}set(e,t){this._values[e]=t}get(e){return this._values[e]}keys(){return Object.keys(this._values)}}class Uc{get sheet(){return this._styleSheet.sheet}constructor(e,t,i){this._parent=e,this._editorId=t,this._styleSheet=i,this._refCount=0}ref(){this._refCount++}unref(){this._refCount--,0===this._refCount&&(this._styleSheet.parentNode?.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){tc(e,t,this._styleSheet)}removeRulesContainingSelector(e){ic(e,this._styleSheet)}}class Kc{get sheet(){return this._styleSheet.sheet}constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){tc(e,t,this._styleSheet)}removeRulesContainingSelector(e){ic(e,this._styleSheet)}}class qc{constructor(e,t,i){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=i.parentTypeKey,this.refCount=0,this._beforeContentRules=new Gc(3,i,e),this._afterContentRules=new Gc(4,i,e)}getOptions(e,t){const i=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(i.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(i.afterContentClassName=this._afterContentRules.className),i}resolveDecorationCSSRules(){return this._styleSheet.sheet.cssRules}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class $c{constructor(e,t,i,n){this._disposables=new Xt,this.description=e,this._styleSheet=i,this._styleSheet.ref(),this.refCount=0;const s=e=>{const i=new Gc(e,n,t);if(this._disposables.add(i),i.hasContent)return i.className},o=e=>{const i=new Gc(e,n,t);return this._disposables.add(i),i.hasContent?{className:i.className,hasLetterSpacing:i.hasLetterSpacing}:null};this.className=s(0);const r=o(1);if(r&&(this.inlineClassName=r.className,this.inlineClassNameAffectsLetterSpacing=r.hasLetterSpacing),this.beforeContentClassName=s(3),this.afterContentClassName=s(4),n.options.beforeInjectedText&&n.options.beforeInjectedText.contentText){const e=o(5);this.beforeInjectedText={content:n.options.beforeInjectedText.contentText,inlineClassName:e?.className,inlineClassNameAffectsLetterSpacing:e?.hasLetterSpacing||n.options.beforeInjectedText.affectsLetterSpacing}}if(n.options.afterInjectedText&&n.options.afterInjectedText.contentText){const e=o(6);this.afterInjectedText={content:n.options.afterInjectedText.contentText,inlineClassName:e?.className,inlineClassNameAffectsLetterSpacing:e?.hasLetterSpacing||n.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=s(2);const a=n.options;this.isWholeLine=Boolean(a.isWholeLine),this.stickiness=a.rangeBehavior;const l=a.light&&a.light.overviewRulerColor||a.overviewRulerColor,h=a.dark&&a.dark.overviewRulerColor||a.overviewRulerColor;void 0===l&&void 0===h||(this.overviewRuler={color:l||h,darkColor:h||l,position:a.overviewRulerLane||Nc.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}resolveDecorationCSSRules(){return this._styleSheet.sheet.rules}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const jc={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class Gc{constructor(e,t,i){this._theme=i.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let n=Yc.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(n=n+" "+Yc.getClassName(this._providerArgs.parentTypeKey,e)),this._className=n,this._unThemedSelector=Yc.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=i.onDidColorThemeChange((e=>{this._theme=i.getColorTheme(),this._removeCSS(),this._buildCSS()})):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,i,n;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),i=this.getCSSTextForModelDecorationClassName(e.light),n=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),i=this.getCSSTextForModelDecorationInlineClassName(e.light),n=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const s=this._providerArgs.styleSheet;let o=!1;t.length>0&&(s.insertRule(this._unThemedSelector,t),o=!0),i.length>0&&(s.insertRule(`.vs${this._unThemedSelector}, .hc-light${this._unThemedSelector}`,i),o=!0),n.length>0&&(s.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector}`,n),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(void 0!==e){if(this.collectBorderSettingsCSSText(e,t),void 0!==e.contentIconPath&&t.push(Ti(jc.contentIconPath,yc(Fe.revive(e.contentIconPath)))),"string"==typeof e.contentText){const i=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(Ti(jc.contentText,i))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return void 0!==e.gutterIconPath&&(t.push(Ti(jc.gutterIconPath,yc(Fe.revive(e.gutterIconPath)))),void 0!==e.gutterIconSize&&t.push(Ti(jc.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return!!this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)&&(t.push(Ti("box-sizing: border-box;")),!0)}collectCSSText(e,t,i){const n=i.length;for(const n of t){const t=this.resolveValue(e[n]);"string"==typeof t&&i.push(Ti(jc[n],t))}return i.length!==n}resolveValue(e){if((t=e)&&"string"==typeof t.id){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}var t;return e}}class Yc{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,i){let n=".monaco-editor ."+this.getClassName(e,i);return t&&(n=n+"."+this.getClassName(t,i)),3===i?n+="::before":4===i&&(n+="::after"),n}}const Xc=o("codeEditorService"),Qc=o("contextKeyService");let Zc=class extends Hc{constructor(e,t){super(t),this._register(this.onCodeEditorAdd((()=>this._checkContextKey()))),this._register(this.onCodeEditorRemove((()=>this._checkContextKey()))),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler((async(e,t,i)=>t?this.doOpenEditor(t,e):null)))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const i=t.resource.scheme;if(i===vn.http||i===vn.https)return _c(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if("number"==typeof i.endLineNumber&&"number"==typeof i.endColumn)e.setSelection(i),e.revealRangeInCenter(i,1);else{const t={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};Zc=Bs([zs(0,Qc),zs(1,Wc)],Zc),jo(Xc,Zc,0);const Jc=o("layoutService");let ed=class{get mainContainer(){return dt(this._codeEditorService.listCodeEditors())?.getContainerDomNode()??Gr.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return e?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return Lh(this.mainContainer)}get activeContainerDimension(){return Lh(this.activeContainer)}get containers(){return lt(this._codeEditorService.listCodeEditors().map((e=>e.getContainerDomNode())))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=oi.None,this.onDidLayoutActiveContainer=oi.None,this.onDidLayoutContainer=oi.None,this.onDidChangeActiveContainer=oi.None,this.onDidAddContainer=oi.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};ed=Bs([zs(0,Xc)],ed);let td=class extends ed{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};var id;td=Bs([zs(1,Xc)],td),jo(Jc,ed,1),function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(id||(id={})),function(e){const t="error",i="warning",n="info";e.fromValue=function(s){return s?qi(t,s)?e.Error:qi(i,s)||qi("warn",s)?e.Warning:qi(n,s)?e.Info:e.Ignore:e.Ignore},e.toString=function(s){switch(s){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return"ignore"}}}(id||(id={}));var nd=id;const sd=o("dialogService"),od=o("fileDialogService"),rd=o("notificationService");class ad{constructor(e,t){this.resource=e,this.elements=t}}class ld{static{this._ID=0}constructor(){this.id=ld._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}static{this.None=new ld}}class hd{static{this._ID=0}constructor(){this.id=hd._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}static{this.None=new hd}}const cd=o("undoRedoService"),dd="vs/platform/undoRedo/common/undoRedoService";function ud(e){return e.scheme===vn.file?e.fsPath:e.path}let gd=0;class pd{constructor(e,t,i,n,s,o,r){this.id=++gd,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=s,this.sourceId=o,this.sourceOrder=r,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class fd{constructor(e,t){this.resourceLabel=e,this.reason=t}}class md{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements){(0===i.reason?e:t).push(i.resourceLabel)}const i=[];return e.length>0&&i.push(u(dd,0,"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(u(dd,1,"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class bd{constructor(e,t,i,n,s,o,r){this.id=++gd,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=s,this.sourceId=o,this.sourceOrder=r,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"==typeof this.actual.split}removeResource(e,t,i){this.removedResources||(this.removedResources=new md),this.removedResources.has(t)||this.removedResources.set(t,new fd(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new md),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new fd(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class vd{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}setElementsIsValid(e){for(const t of this._past)1===t.type?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e);for(const t of this._future)1===t.type?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e)}_setElementValidFlag(e,t){1===e.type?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let e=0,i=this._past.length;e<i;e++)t.push(this._past[e].id);for(let e=this._future.length-1;e>=0;e--)t.push(this._future[e].id);return new ad(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,s=-1;for(let o=0,r=this._past.length;o<r;o++,n++){const r=this._past[o];i&&(n>=t||r.id!==e.elements[n])&&(i=!1,s=0),i||1!==r.type||r.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let s=this._future.length-1;s>=0;s--,n++){const r=this._future[s];i&&(n>=t||r.id!==e.elements[n])&&(i=!1,o=s),i||1!==r.type||r.removeResource(this.resourceLabel,this.strResource,0)}-1!==s&&(this._past=this._past.slice(0,s)),-1!==o&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const t of this._past)e.push(t.actual);for(const e of this._future)t.push(e.actual);return{past:e,future:t}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class wd{constructor(e){this.editStacks=e,this._versionIds=[];for(let e=0,t=this.editStacks.length;e<t;e++)this._versionIds[e]=this.editStacks[e].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const _d=new vd("","");_d.locked=!0;let yd=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}registerUriComparisonKeyComputer(e,t){return this._uriComparisonKeyComputers.push([e,t]),{dispose:()=>{for(let e=0,i=this._uriComparisonKeyComputers.length;e<i;e++)if(this._uriComparisonKeyComputers[e][1]===t)return void this._uriComparisonKeyComputers.splice(e,1)}}}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const e of this._editStacks)t.push(e[1].toString());console.log(t.join("\n"))}pushElement(e,t=ld.None,i=hd.None){if(0===e.type){const n=ud(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new pd(e,n,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,s=[],o=[];for(const t of e.resources){const e=ud(t),i=this.getUriComparisonKey(t);n.has(i)||(n.add(i),s.push(e),o.push(i))}1===s.length?this._pushElement(new pd(e,s[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new bd(e,s,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const i=e.resourceLabels[t],n=e.strResources[t];let s;this._editStacks.has(n)?s=this._editStacks.get(n):(s=new vd(i,n),this._editStacks.set(n,s)),s.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const e=this._editStacks.get(t);if(e.hasFutureElements())return null;const i=e.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const e of i){const t=ud(e.resource),i=this.getUriComparisonKey(e.resource),s=new pd(e,t,i,0,0,0,0);n.set(s.strResource,s)}for(const i of e.strResources){if(t&&t.has(i))continue;this._editStacks.get(i).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const e of i){const t=ud(e.resource),i=this.getUriComparisonKey(e.resource),s=new pd(e,t,i,0,0,0,0);n.set(s.strResource,s)}for(const i of e.strResources){if(t&&t.has(i))continue;this._editStacks.get(i).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t="string"==typeof e?e:this.getUriComparisonKey(e);if(this._editStacks.has(t)){this._editStacks.get(t).dispose(),this._editStacks.delete(t)}}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);if(this._editStacks.has(n)){this._editStacks.get(n).setElementsValidFlag(t,i)}}hasElements(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const e=this._editStacks.get(t);return e.hasPastElements()||e.hasFutureElements()}return!1}createSnapshot(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).createSnapshot(e)}return new ad(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),i.hasPastElements()||i.hasFutureElements()||(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).getElements()}return{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const o=s.getClosestPastElement();o&&(o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=n))}return[t,i]}canUndo(e){if(e instanceof hd){const[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasPastElements()}return!1}_onError(e,t){Ge(e);for(const e of t.strResources)this.removeElements(e);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,s){const o=this._acquireLocks(i);let r;try{r=t()}catch(t){return o(),n.dispose(),this._onError(t,e)}return r?r.then((()=>(o(),n.dispose(),s())),(t=>(o(),n.dispose(),this._onError(t,e)))):(o(),n.dispose(),s())}async _invokeWorkspacePrepare(e){if(void 0===e.actual.prepareUndoRedo)return Qt.None;const t=e.actual.prepareUndoRedo();return void 0===t?Qt.None:t}_invokeResourcePrepare(e,t){if(1!==e.actual.type||void 0===e.actual.prepareUndoRedo)return t(Qt.None);const i=e.actual.prepareUndoRedo();return i?$t(i)?t(i):i.then((e=>t(e))):t(Qt.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||_d);return new wd(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new Cd(this._undo(e,0,!0));for(const e of t.strResources)this.removeElements(e);return this._notificationService.warn(n),new Cd}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,u(dd,2,"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,u(dd,2,"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const e of i.editStacks)e.getClosestPastElement()!==t&&s.push(e.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,u(dd,3,"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const e of i.editStacks)e.locked&&o.push(e.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,u(dd,4,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,u(dd,5,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,n,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let s;!function(e){e[e.All=0]="All",e[e.This=1]="This",e[e.Cancel=2]="Cancel"}(s||(s={}));const{result:o}=await this._dialogService.prompt({type:nd.Info,message:u(dd,6,"Would you like to undo '{0}' across all files?",t.label),buttons:[{label:u(dd,7,"&&Undo in {0} Files",i.editStacks.length),run:()=>s.All},{label:u(dd,8,"Undo this &&File"),run:()=>s.This}],cancelButton:{run:()=>s.Cancel}});if(o===s.Cancel)return;if(o===s.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const r=this._checkWorkspaceUndo(e,t,i,!1);if(r)return r.returnValue;n=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return s.dispose(),o.returnValue;for(const e of i.editStacks)e.moveBackward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.undo()),i,s,(()=>this._continueUndoInGroup(t.groupId,n)))}_resourceUndo(e,t,i){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,(()=>t.actual.undo()),new wd([e]),n,(()=>this._continueUndoInGroup(t.groupId,i))))));{const e=u(dd,9,"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const o=s.getClosestPastElement();o&&(o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=n))}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);return i?this._undo(i,0,t):void 0}undo(e){if(e instanceof hd){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return"string"==typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),s=n.getClosestPastElement();if(!s)return;if(s.groupId){const[e,n]=this._findClosestUndoElementInGroup(s.groupId);if(s!==e&&n)return this._undo(n,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return 1===s.type?this._workspaceUndo(e,s,i):this._resourceUndo(n,s,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:u(dd,10,"Would you like to undo '{0}'?",i.label),primaryButton:u(dd,11,"&&Yes"),cancelButton:u(dd,12,"No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const o=s.getClosestFutureElement();o&&(o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=n))}return[t,i]}canRedo(e){if(e instanceof hd){const[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasFutureElements()}return!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new Cd(this._redo(e));for(const e of t.strResources)this.removeElements(e);return this._notificationService.warn(n),new Cd}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,u(dd,13,"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,u(dd,13,"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const e of i.editStacks)e.getClosestFutureElement()!==t&&s.push(e.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,u(dd,14,"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const o=[];for(const e of i.editStacks)e.locked&&o.push(e.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,u(dd,15,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,u(dd,16,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}const s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return n.dispose(),s.returnValue;for(const e of i.editStacks)e.moveForward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.redo()),i,n,(()=>this._continueRedoInGroup(t.groupId)))}_resourceRedo(e,t){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(i=>(e.moveForward(t),this._safeInvokeWithLocks(t,(()=>t.actual.redo()),new wd([e]),i,(()=>this._continueRedoInGroup(t.groupId))))));{const e=u(dd,17,"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const o=s.getClosestFutureElement();o&&(o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=n))}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);return t?this._redo(t):void 0}redo(e){if(e instanceof hd){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return"string"==typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[e,t]=this._findClosestRedoElementInGroup(i.groupId);if(i!==e&&t)return this._redo(t)}try{return 1===i.type?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};yd=Bs([zs(0,sd),zs(1,rd)],yd);class Cd{constructor(e){this.returnValue=e}}function Sd(e,t,i){return Math.min(Math.max(e,t),i)}jo(cd,yd,1);class kd{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class xd{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const Ed=o("logService"),Dd=(o("loggerService"),o("ILanguageFeatureDebounceService"));var Ld;!function(e){const t=new WeakMap;let i=0;e.of=function(e){let n=t.get(e);return void 0===n&&(n=++i,t.set(e,n)),n}}(Ld||(Ld={}));class Id{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class Td{constructor(e,t,i,n,s,o){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=s,this._max=o,this._cache=new Ft(50,.7)}_key(e){return e.id+this._registry.all(e).reduce(((e,t)=>eh(Ld.of(t),e)),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?Sd(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new xd(6),this._cache.set(i,n));const s=Sd(n.update(t),this._min,this._max);return wn(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new kd;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){return Sd(0|this._overall()||this._default,this._min,this._max)}}let Nd=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const n=i?.min??50,s=i?.max??n**2,o=i?.key??void 0,r=`${Ld.of(e)},${n}${o?","+o:""}`;let a=this._data.get(r);return a||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),a=new Id(1.5*n)):a=new Td(this._logService,t,e,0|this._overallAverage()||1.5*n,n,s),this._data.set(r,a)),a}_overallAverage(){const e=new kd;for(const t of this._data.values())e.update(t.default());return e.value}};Nd=Bs([zs(0,Ed),zs(1,Es)],Nd),jo(Dd,Nd,1);class Ad{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return!!(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return 1&i&&(t+=" mtki"),2&i&&(t+=" mtkb"),4&i&&(t+=" mtku"),8&i&&(t+=" mtks"),t}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let s=`color: ${t[i]};`;1&n&&(s+="font-style: italic;"),2&n&&(s+="font-weight: bold;");let o="";return 4&n&&(o+=" underline"),8&n&&(o+=" line-through"),o&&(s+=`text-decoration:${o};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:Boolean(1&i),bold:Boolean(2&i),underline:Boolean(4&i),strikethrough:Boolean(8&i)}}}const Md="vs/base/common/errorMessage";function Rd(e,t){return t&&(e.stack||e.stacktrace)?u(Md,0,"{0}: {1}",Fd(e),Od(e.stack)||Od(e.stacktrace)):Fd(e)}function Od(e){return Array.isArray(e)?e.join("\n"):e}function Fd(e){return"ERR_UNC_HOST_NOT_ALLOWED"===e.code?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?u(Md,1,"A system error occurred ({0})",e.message):e.message||u(Md,2,"An unknown error occurred. Please consult the log for more details.")}function Pd(e=null,t=!1){if(!e)return u(Md,2,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){const i=lt(e),n=Pd(i[0],t);return i.length>1?u(Md,3,"{0} ({1} errors in total)",n,i.length):n}if(Ln(e))return e;if(e.detail){const i=e.detail;if(i.error)return Rd(i.error,t);if(i.exception)return Rd(i.exception,t)}return e.stack?Rd(e,t):e.message?e.message:u(Md,2,"An unknown error occurred. Please consult the log for more details.")}const Bd="vs/platform/contextkey/common/scanner";function zd(...e){switch(e.length){case 1:return u(Bd,0,"Did you mean {0}?",e[0]);case 2:return u(Bd,1,"Did you mean {0} or {1}?",e[0],e[1]);case 3:return u(Bd,2,"Did you mean {0}, {1} or {2}?",e[0],e[1],e[2]);default:return}}const Wd=u(Bd,3,"Did you forget to open or close the quote?"),Hd=u(Bd,4,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class Vd{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw tt(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static{this._regexFlags=new Set(["i","g","s","m","y","u"].map((e=>e.charCodeAt(0))))}static{this._keywords=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;switch(this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const e=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:e})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const e=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:e})}else this._match(126)?this._addToken(9):this._error(zd("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(zd("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(zd("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=Vd._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(Wd):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length)return this._current=e,void this._error(Hd);const n=this._input.charCodeAt(e);if(t)t=!1;else{if(47===n&&!i){e++;break}91===n?i=!0:92===n?t=!0:93===n&&(i=!1)}e++}for(;e<this._input.length&&Vd._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}const Ud="vs/platform/contextkey/common/contextkey",Kd=new Map;Kd.set("false",!1),Kd.set("true",!0),Kd.set("isMac",M),Kd.set("isLinux",R),Kd.set("isWindows",A),Kd.set("isWeb",F),Kd.set("isMacNative",M&&!F),Kd.set("isEdge",Z),Kd.set("isFirefox",X),Kd.set("isChrome",Y),Kd.set("isSafari",Q);const qd=Object.prototype.hasOwnProperty,$d={regexParsingWithErrorRecovery:!0},jd=u(Ud,0,"Empty context key expression"),Gd=u(Ud,1,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Yd=u(Ud,2,"'in' after 'not'."),Xd=u(Ud,3,"closing parenthesis ')'"),Qd=u(Ud,4,"Unexpected token"),Zd=u(Ud,5,"Did you forget to put && or || before the token?"),Jd=u(Ud,6,"Unexpected end of expression"),eu=u(Ud,7,"Did you forget to put a context key?");class tu{static{this._parseError=new Error}get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}constructor(e=$d){this._config=e,this._scanner=new Vd,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(""!==e){this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const e=this._expr();if(!this._isAtEnd()){const e=this._peek(),t=17===e.type?Zd:void 0;throw this._parsingErrors.push({message:Qd,offset:e.offset,lexeme:Vd.getLexeme(e),additionalInfo:t}),tu._parseError}return e}catch(e){if(e!==tu._parseError)throw e;return}}else this._parsingErrors.push({message:jd,offset:0,lexeme:"",additionalInfo:Gd})}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return 1===e.length?e[0]:iu.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return 1===e.length?e[0]:iu.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),su.INSTANCE;case 12:return this._advance(),ou.INSTANCE;case 0:{this._advance();const e=this._expr();return this._consume(1,Xd),e?.negate()}case 17:return this._advance(),du.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),iu.true();case 12:return this._advance(),iu.false();case 0:{this._advance();const e=this._expr();return this._consume(1,Xd),e}case 17:{const i=e.lexeme;if(this._advance(),this._matchOne(9)){const e=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),10!==e.type)throw this._errExpectedButGot("REGEX",e);const t=e.lexeme,n=t.lastIndexOf("/"),s=n===t.length-1?void 0:this._removeFlagsGY(t.substring(n+1));let o;try{o=new RegExp(t.substring(1,n),s)}catch(t){throw this._errExpectedButGot("REGEX",e)}return bu.create(i,o)}switch(e.type){case 10:case 19:{const t=[e.lexeme];this._advance();let n=this._peek(),s=0;for(let t=0;t<e.lexeme.length;t++)40===e.lexeme.charCodeAt(t)?s++:41===e.lexeme.charCodeAt(t)&&s--;for(;!this._isAtEnd()&&15!==n.type&&16!==n.type;){switch(n.type){case 0:s++;break;case 1:s--;break;case 10:case 18:for(let t=0;t<n.lexeme.length;t++)40===n.lexeme.charCodeAt(t)?s++:41===e.lexeme.charCodeAt(t)&&s--}if(s<0)break;t.push(Vd.getLexeme(n)),this._advance(),n=this._peek()}const o=t.join(""),r=o.lastIndexOf("/"),a=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let l;try{l=new RegExp(o.substring(1,r),a)}catch(t){throw this._errExpectedButGot("REGEX",e)}return iu.regex(i,l)}case 18:{const n=e.lexeme;this._advance();let s=null;if((t=n)&&"string"==typeof t&&0!==t.trim().length){const t=n.indexOf("/"),i=n.lastIndexOf("/");if(t!==i&&t>=0){const o=n.slice(t+1,i),r="i"===n[i+1]?"i":"";try{s=new RegExp(o,r)}catch(t){throw this._errExpectedButGot("REGEX",e)}}}if(null===s)throw this._errExpectedButGot("REGEX",e);return bu.create(i,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Yd);const e=this._value();return iu.notIn(i,e)}switch(this._peek().type){case 3:{this._advance();const e=this._value();if(18===this._previous().type)return iu.equals(i,e);switch(e){case"true":return iu.has(i);case"false":return iu.not(i);default:return iu.equals(i,e)}}case 4:{this._advance();const e=this._value();if(18===this._previous().type)return iu.notEquals(i,e);switch(e){case"true":return iu.not(i);case"false":return iu.has(i);default:return iu.notEquals(i,e)}}case 5:return this._advance(),fu.create(i,this._value());case 6:return this._advance(),mu.create(i,this._value());case 7:return this._advance(),gu.create(i,this._value());case 8:return this._advance(),pu.create(i,this._value());case 13:return this._advance(),iu.in(i,this._value());default:return iu.has(i)}}case 20:throw this._parsingErrors.push({message:Jd,offset:e.offset,lexeme:"",additionalInfo:eu}),tu._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}var t}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=u(Ud,8,"Expected: {0}\nReceived: '{1}'.",e,Vd.getLexeme(t)),s=t.offset,o=Vd.getLexeme(t);return this._parsingErrors.push({message:n,offset:s,lexeme:o,additionalInfo:i}),tu._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return 20===this._peek().type}}class iu{static false(){return su.INSTANCE}static true(){return ou.INSTANCE}static has(e){return ru.create(e)}static equals(e,t){return au.create(e,t)}static notEquals(e,t){return cu.create(e,t)}static regex(e,t){return bu.create(e,t)}static in(e,t){return lu.create(e,t)}static notIn(e,t){return hu.create(e,t)}static not(e){return du.create(e)}static and(...e){return _u.create(e,null,!0)}static or(...e){return yu.create(e,null,!0)}static greater(e,t){return gu.create(e,t)}static greaterEquals(e,t){return pu.create(e,t)}static smaller(e,t){return fu.create(e,t)}static smallerEquals(e,t){return mu.create(e,t)}static{this._parser=new tu({regexParsingWithErrorRecovery:!1})}static deserialize(e){if(null==e)return;return this._parser.parse(e)}}function nu(e,t){return e.cmp(t)}class su{static{this.INSTANCE=new su}constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return ou.INSTANCE}}class ou{static{this.INSTANCE=new ou}constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return su.INSTANCE}}class ru{static create(e,t=null){const i=Kd.get(e);return"boolean"==typeof i?i?ou.INSTANCE:su.INSTANCE:new ru(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Su(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=Kd.get(this.key);return"boolean"==typeof e?e?ou.INSTANCE:su.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=du.create(this.key,this)),this.negated}}class au{static create(e,t,i=null){if("boolean"==typeof t)return t?ru.create(e,i):du.create(e,i);const n=Kd.get(e);if("boolean"==typeof n){return t===(n?"true":"false")?ou.INSTANCE:su.INSTANCE}return new au(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=Kd.get(this.key);if("boolean"==typeof e){const t=e?"true":"false";return this.value===t?ou.INSTANCE:su.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=cu.create(this.key,this.value,this)),this.negated}}class lu{static create(e,t){return new lu(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):"string"==typeof i&&"object"==typeof t&&null!==t&&qd.call(t,i)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=hu.create(this.key,this.valueKey)),this.negated}}class hu{static create(e,t){return new hu(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=lu.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}class cu{static create(e,t,i=null){if("boolean"==typeof t)return t?du.create(e,i):ru.create(e,i);const n=Kd.get(e);if("boolean"==typeof n){return t===(n?"true":"false")?su.INSTANCE:ou.INSTANCE}return new cu(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=Kd.get(this.key);if("boolean"==typeof e){const t=e?"true":"false";return this.value===t?su.INSTANCE:ou.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=au.create(this.key,this.value,this)),this.negated}}class du{static create(e,t=null){const i=Kd.get(e);return"boolean"==typeof i?i?su.INSTANCE:ou.INSTANCE:new du(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Su(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=Kd.get(this.key);return"boolean"==typeof e?e?su.INSTANCE:ou.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=ru.create(this.key,this)),this.negated}}function uu(e,t){if("string"==typeof e){const t=parseFloat(e);isNaN(t)||(e=t)}return"string"==typeof e||"number"==typeof e?t(e):su.INSTANCE}class gu{static create(e,t,i=null){return uu(t,(t=>new gu(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=mu.create(this.key,this.value,this)),this.negated}}class pu{static create(e,t,i=null){return uu(t,(t=>new pu(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=fu.create(this.key,this.value,this)),this.negated}}class fu{static create(e,t,i=null){return uu(t,(t=>new fu(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=pu.create(this.key,this.value,this)),this.negated}}class mu{static create(e,t,i=null){return uu(t,(t=>new mu(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:ku(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=gu.create(this.key,this.value,this)),this.negated}}class bu{static create(e,t){return new bu(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=vu.create(this)),this.negated}}class vu{static create(e){return new vu(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new vu(this._actual.map(e))}negate(){return this._actual}}function wu(e){let t=null;for(let i=0,n=e.length;i<n;i++){const n=e[i].substituteConstants();if(e[i]!==n&&null===t){t=[];for(let n=0;n<i;n++)t[n]=e[n]}null!==t&&(t[i]=n)}return null===t?e:t}class _u{static create(e,t,i){return _u._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=nu(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=wu(this.expr);return e===this.expr?this:_u.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let s=!1;for(const t of e)if(t)if(1!==t.type){if(0===t.type)return su.INSTANCE;6!==t.type?n.push(t):n.push(...t.expr)}else s=!0;if(0===n.length&&s)return ou.INSTANCE;if(0!==n.length){if(1===n.length)return n[0];n.sort(nu);for(let e=1;e<n.length;e++)n[e-1].equals(n[e])&&(n.splice(e,1),e--);if(1===n.length)return n[0];for(;n.length>1;){const e=n[n.length-1];if(9!==e.type)break;n.pop();const t=n.pop(),s=0===n.length,o=yu.create(e.expr.map((e=>_u.create([e,t],null,i))),null,s);o&&(n.push(o),n.sort(nu))}if(1===n.length)return n[0];if(i){for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(n[e].negate().equals(n[t]))return su.INSTANCE;if(1===n.length)return n[0]}return new _u(n,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new _u(this.expr.map((t=>t.map(e))),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=yu.create(e,this,!0)}return this.negated}}class yu{static create(e,t,i){return yu._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=nu(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=wu(this.expr);return e===this.expr?this:yu.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],s=!1;if(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i)if(0!==i.type){if(1===i.type)return ou.INSTANCE;9!==i.type?n.push(i):n=n.concat(i.expr)}else s=!0}if(0===n.length&&s)return su.INSTANCE;n.sort(nu)}if(0!==n.length){if(1===n.length)return n[0];for(let e=1;e<n.length;e++)n[e-1].equals(n[e])&&(n.splice(e,1),e--);if(1===n.length)return n[0];if(i){for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(n[e].negate().equals(n[t]))return ou.INSTANCE;if(1===n.length)return n[0]}return new yu(n,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new yu(this.expr.map((t=>t.map(e))),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const e of Du(t))for(const t of Du(i))n.push(_u.create([e,t],null,!1));e.unshift(yu.create(n,null,!1))}this.negated=yu.create(e,this,!0)}return this.negated}}class Cu extends ru{static{this._info=[]}static all(){return Cu._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,"object"==typeof i?Cu._info.push({...i,key:e}):!0!==i&&Cu._info.push({key:e,description:i,type:null!=t?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return au.create(this.key,e)}notEqualsTo(e){return cu.create(this.key,e)}}function Su(e,t){return e<t?-1:e>t?1:0}function ku(e,t,i,n){return e<i?-1:e>i?1:t<n?-1:t>n?1:0}function xu(e,t){if(0===e.type||1===t.type)return!0;if(9===e.type)return 9===t.type&&Eu(e.expr,t.expr);if(9===t.type){for(const i of t.expr)if(xu(e,i))return!0;return!1}if(6===e.type){if(6===t.type)return Eu(t.expr,e.expr);for(const i of e.expr)if(xu(i,t))return!0;return!1}return e.equals(t)}function Eu(e,t){let i=0,n=0;for(;i<e.length&&n<t.length;){const s=e[i].cmp(t[n]);if(s<0)return!1;0===s?(i++,n++):n++}return i===e.length}function Du(e){return 9===e.type?e.expr:[e]}var Lu;!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(Lu||(Lu={}));const Iu=Lu.Info;function Tu(e,t,i){switch(t){case Lu.Trace:e.trace(i);break;case Lu.Debug:e.debug(i);break;case Lu.Info:e.info(i);break;case Lu.Warning:e.warn(i);break;case Lu.Error:e.error(i);break;case Lu.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Nu(e,t=!1){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(s instanceof Error&&(s=Pd(s,t)),"object"==typeof s)try{s=JSON.stringify(s)}catch(e){}i+=(n>0?" ":"")+s}return i}class Au extends Qt{constructor(){super(...arguments),this.level=Iu,this._onDidChangeLogLevel=this._register(new ui),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Lu.Off&&this.level<=e}}class Mu extends Au{constructor(e){super(),this.logAlways=e}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e,...t){this.checkLogLevel(Lu.Trace)&&this.log(Lu.Trace,Nu([e,...t],!0))}debug(e,...t){this.checkLogLevel(Lu.Debug)&&this.log(Lu.Debug,Nu([e,...t]))}info(e,...t){this.checkLogLevel(Lu.Info)&&this.log(Lu.Info,Nu([e,...t]))}warn(e,...t){this.checkLogLevel(Lu.Warning)&&this.log(Lu.Warning,Nu([e,...t]))}error(e,...t){if(this.checkLogLevel(Lu.Error))if(e instanceof Error){const t=Array.prototype.slice.call(arguments);t[0]=e.stack,this.log(Lu.Error,Nu(t))}else this.log(Lu.Error,Nu([e,...t]))}flush(){}}class Ru extends Au{constructor(e=Iu,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Lu.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Lu.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Lu.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Lu.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Lu.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}flush(){}}class Ou extends Au{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}flush(){for(const e of this.loggers)e.flush()}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}new Cu("logLevel",function(e){switch(e){case Lu.Trace:return"trace";case Lu.Debug:return"debug";case Lu.Info:return"info";case Lu.Warning:return"warn";case Lu.Error:return"error";case Lu.Off:return"off"}}(Lu.Info));let Fu=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new Bu}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),s=this._hashTable.get(e,t,n);let o;if(s)o=s.metadata,this._logService.getLevel()===Lu.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Ad.getForeground(o)}, fontStyle ${Ad.getFontStyle(o).toString(2)}`);else{let s=this._legend.tokenTypes[e];const r=[];if(s){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&r.push(this._legend.tokenModifiers[t]),e>>=1;e>0&&this._logService.getLevel()===Lu.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),r.push("not-in-legend"));const n=this._themeService.getColorTheme().getTokenStyleMetadata(s,r,i);if(void 0===n)o=2147483647;else{if(o=0,void 0!==n.italic){o|=1|(n.italic?1:0)<<11}if(void 0!==n.bold){o|=2|(n.bold?2:0)<<11}if(void 0!==n.underline){o|=4|(n.underline?4:0)<<11}if(void 0!==n.strikethrough){o|=8|(n.strikethrough?8:0)<<11}if(n.foreground){o|=16|n.foreground<<15}0===o&&(o=2147483647)}}else this._logService.getLevel()===Lu.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,s="not-in-legend";this._hashTable.add(e,t,n,o),this._logService.getLevel()===Lu.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${s}) / ${t} (${r.join(" ")}): foreground ${Ad.getForeground(o)}, fontStyle ${Ad.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${s}).`))}};Fu=Bs([zs(1,Wc),zs(2,Ko),zs(3,Ed)],Fu);class Pu{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}class Bu{static{this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]}constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Bu._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Bu._SIZES.length?2/3*this._currentLength:0),this._elements=[],Bu._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let s=this._elements[n];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(e,t,i,n){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){const e=this._elements;this._currentLengthIndex++,this._currentLength=Bu._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Bu._SIZES.length?2/3*this._currentLength:0),this._elements=[],Bu._nullOutEntries(this._elements,this._currentLength);for(const t of e){let e=t;for(;e;){const t=e.next;e.next=null,this._add(e),e=t}}}this._add(new Pu(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}const zu=o("semanticTokensStylingService");let Wu=class extends Qt{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new Fu(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};Wu=Bs([zs(0,Wc),zs(1,Ed),zs(2,Ko)],Wu),jo(zu,Wu,1);const Hu="**",Vu="/",Uu="[/\\\\]",Ku="[^/\\\\]",qu=/\//g;function $u(e,t){switch(e){case 0:return"";case 1:return`${Ku}*?`;default:return`(?:${Uu}|${Ku}+${Uu}${t?`|${Uu}${Ku}+`:""})*?`}}function ju(e,t){if(!e)return[];const i=[];let n=!1,s=!1,o="";for(const r of e){switch(r){case t:if(!n&&!s){i.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1}o+=r}return o&&i.push(o),i}function Gu(e){if(!e)return"";let t="";const i=ju(e,Vu);if(i.every((e=>e===Hu)))t=".*";else{let e=!1;i.forEach(((n,s)=>{if(n===Hu){if(e)return;t+=$u(2,s===i.length-1)}else{let e=!1,o="",r=!1,a="";for(const i of n)if("}"!==i&&e)o+=i;else if(!r||"]"===i&&a)switch(i){case"{":e=!0;continue;case"[":r=!0;continue;case"}":{const i=`(?:${ju(o,",").map((e=>Gu(e))).join("|")})`;t+=i,e=!1,o="";break}case"]":t+="["+a+"]",r=!1,a="";break;case"?":t+=Ku;continue;case"*":t+=$u(1);continue;default:t+=Ai(i)}else{let e;e="-"===i?i:"^"!==i&&"!"!==i||a?i===Vu?"":Ai(i):"^",a+=e}s<i.length-1&&(i[s+1]!==Hu||s+2<i.length)&&(t+=Uu)}e=n===Hu}))}return t}const Yu=/^\*\*\/\*\.[\w\.-]+$/,Xu=/^\*\*\/([\w\.-]+)\/?$/,Qu=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Zu=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Ju=/^\*\*((\/[\w\.-]+)+)\/?$/,eg=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,tg=new Ft(1e4),ig=function(){return!1},ng=function(){return null};function sg(e,t){if(!e)return ng;let i;i="string"!=typeof e?e.pattern:e,i=i.trim();const n=`${i}_${!!t.trimForExclusions}`;let s,o=tg.get(n);return o||(o=Yu.test(i)?function(e,t){return function(i,n){return"string"==typeof i&&i.endsWith(e)?t:null}}(i.substr(4),i):(s=Xu.exec(rg(i,t)))?function(e,t){const i=`/${e}`,n=`\\${e}`,s=function(s,o){return"string"!=typeof s?null:o?o===e?t:null:s===e||s.endsWith(i)||s.endsWith(n)?t:null},o=[e];return s.basenames=o,s.patterns=[t],s.allBasenames=o,s}(s[1],i):(t.trimForExclusions?Zu:Qu).test(i)?function(e,t){const i=hg(e.slice(1,-1).split(",").map((e=>sg(e,t))).filter((e=>e!==ng)),e),n=i.length;if(!n)return ng;if(1===n)return i[0];const s=function(t,n){for(let s=0,o=i.length;s<o;s++)if(i[s](t,n))return e;return null},o=i.find((e=>!!e.allBasenames));o&&(s.allBasenames=o.allBasenames);const r=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);r.length&&(s.allPaths=r);return s}(i,t):(s=Ju.exec(rg(i,t)))?ag(s[1].substr(1),i,!0):(s=eg.exec(rg(i,t)))?ag(s[1],i,!1):function(e){try{const t=new RegExp(`^${Gu(e)}$`);return function(i){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(e){return ng}}(i),tg.set(n,o)),og(o,e)}function og(e,t){if("string"==typeof t)return e;const i=function(i,n){return ss(i,t.base,!R)?e(Mi(i.substr(t.base.length),Ie),n):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function rg(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function ag(e,t,i){const n=Ie===_e.sep,s=n?e:e.replace(qu,Ie),o=Ie+s,r=_e.sep+e;let a;return a=i?function(i,a){return"string"!=typeof i||i!==s&&!i.endsWith(o)&&(n||i!==e&&!i.endsWith(r))?null:t}:function(i,o){return"string"!=typeof i||i!==s&&(n||i!==e)?null:t},a.allPaths=[(i?"*/":"./")+e],a}function lg(e,t={}){if(!e)return ig;if("string"==typeof e||function(e){const t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)){const i=sg(e,t);if(i===ng)return ig;const n=function(e,t){return!!i(e,t)};return i.allBasenames&&(n.allBasenames=i.allBasenames),i.allPaths&&(n.allPaths=i.allPaths),n}return function(e,t){const i=hg(Object.getOwnPropertyNames(e).map((i=>function(e,t,i){if(!1===t)return ng;const n=sg(e,i);if(n===ng)return ng;if("boolean"==typeof t)return n;if(t){const i=t.when;if("string"==typeof i){const t=(t,s,o,r)=>{if(!r||!n(t,s))return null;const a=r(i.replace("$(basename)",(()=>o)));return Aa(a)?a.then((t=>t?e:null)):a?e:null};return t.requiresSiblings=!0,t}}return n}(i,e[i],t))).filter((e=>e!==ng))),n=i.length;if(!n)return ng;if(!i.some((e=>!!e.requiresSiblings))){if(1===n)return i[0];const e=function(e,t){let n;for(let s=0,o=i.length;s<o;s++){const o=i[s](e,t);if("string"==typeof o)return o;Aa(o)&&(n||(n=[]),n.push(o))}return n?(async()=>{for(const e of n){const t=await e;if("string"==typeof t)return t}return null})():null},t=i.find((e=>!!e.allBasenames));t&&(e.allBasenames=t.allBasenames);const s=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return s.length&&(e.allPaths=s),e}const s=function(e,t,n){let s,o;for(let r=0,a=i.length;r<a;r++){const a=i[r];a.requiresSiblings&&n&&(t||(t=De(e)),s||(s=t.substr(0,t.length-Le(e).length)));const l=a(e,t,s,n);if("string"==typeof l)return l;Aa(l)&&(o||(o=[]),o.push(l))}return o?(async()=>{for(const e of o){const t=await e;if("string"==typeof t)return t}return null})():null},o=i.find((e=>!!e.allBasenames));o&&(s.allBasenames=o.allBasenames);const r=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);r.length&&(s.allPaths=r);return s}(e,t)}function hg(e,t){const i=e.filter((e=>!!e.basenames));if(i.length<2)return e;const n=i.reduce(((e,t)=>{const i=t.basenames;return i?e.concat(i):e}),[]);let s;if(t){s=[];for(let e=0,i=n.length;e<i;e++)s.push(t)}else s=i.reduce(((e,t)=>{const i=t.patterns;return i?e.concat(i):e}),[]);const o=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=n.indexOf(t);return-1!==i?s[i]:null};o.basenames=n,o.patterns=s,o.allBasenames=n;const r=e.filter((e=>!e.basenames));return r.push(o),r}function cg(e,t,i,n,s,o){if(Array.isArray(e)){let r=0;for(const a of e){const e=cg(a,t,i,n,s,o);if(10===e)return e;e>r&&(r=e)}return r}if("string"==typeof e)return n?"*"===e?5:e===i?10:0:0;if(e){const{language:h,pattern:c,scheme:d,hasAccessToAllModels:u,notebookType:g}=e;if(!n&&!u)return 0;g&&s&&(t=s);let p=0;if(d)if(d===t.scheme)p=10;else{if("*"!==d)return 0;p=5}if(h)if(h===i)p=10;else{if("*"!==h)return 0;p=Math.max(p,5)}if(g)if(g===o)p=10;else{if("*"!==g||void 0===o)return 0;p=Math.max(p,5)}if(c){let e;if(e="string"==typeof c?c:{...c,base:ye(c.base)},e!==t.fsPath&&(r=e,a=t.fsPath,!r||"string"!=typeof a||!lg(r)(a,void 0,l)))return 0;p=10}return p}return 0;var r,a,l}function dg(e){return"string"!=typeof e&&(Array.isArray(e)?e.every(dg):!!e.exclusive)}class ug{constructor(e,t,i,n){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()}}class gg{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new ui,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Yt((()=>{if(i){const e=this._entries.indexOf(i);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const e of this._entries)e._score>0&&t.push(e.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,(e=>t.push(e.provider))),t}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,(e=>{i&&n===e._score?i.push(e.provider):(n=e._score,i=[e.provider],t.push(i))})),t}_orderedForEach(e,t){this._updateScores(e);for(const e of this._entries)e._score>0&&t(e)}_updateScores(e){const t=this._notebookInfoResolver?.(e.uri),i=t?new ug(e.uri,e.getLanguageId(),t.uri,t.type):new ug(e.uri,e.getLanguageId(),void 0,void 0);if(!this._lastCandidate?.equals(i)){this._lastCandidate=i;for(const t of this._entries)if(t._score=cg(t.selector,i.uri,i.languageId,zc(e),i.notebookUri,i.notebookType),dg(t.selector)&&t._score>0){for(const e of this._entries)e._score=0;t._score=1e3;break}this._entries.sort(gg._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:pg(e.selector)&&!pg(t.selector)?1:!pg(e.selector)&&pg(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function pg(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(pg):Boolean(e.isBuiltin))}const fg=o("ILanguageFeaturesService");jo(fg,class{constructor(){this.referenceProvider=new gg(this._score.bind(this)),this.renameProvider=new gg(this._score.bind(this)),this.newSymbolNamesProvider=new gg(this._score.bind(this)),this.codeActionProvider=new gg(this._score.bind(this)),this.definitionProvider=new gg(this._score.bind(this)),this.typeDefinitionProvider=new gg(this._score.bind(this)),this.declarationProvider=new gg(this._score.bind(this)),this.implementationProvider=new gg(this._score.bind(this)),this.documentSymbolProvider=new gg(this._score.bind(this)),this.inlayHintsProvider=new gg(this._score.bind(this)),this.colorProvider=new gg(this._score.bind(this)),this.codeLensProvider=new gg(this._score.bind(this)),this.documentFormattingEditProvider=new gg(this._score.bind(this)),this.documentRangeFormattingEditProvider=new gg(this._score.bind(this)),this.onTypeFormattingEditProvider=new gg(this._score.bind(this)),this.signatureHelpProvider=new gg(this._score.bind(this)),this.hoverProvider=new gg(this._score.bind(this)),this.documentHighlightProvider=new gg(this._score.bind(this)),this.multiDocumentHighlightProvider=new gg(this._score.bind(this)),this.selectionRangeProvider=new gg(this._score.bind(this)),this.foldingRangeProvider=new gg(this._score.bind(this)),this.linkProvider=new gg(this._score.bind(this)),this.inlineCompletionsProvider=new gg(this._score.bind(this)),this.inlineEditProvider=new gg(this._score.bind(this)),this.completionProvider=new gg(this._score.bind(this)),this.linkedEditingRangeProvider=new gg(this._score.bind(this)),this.inlineValuesProvider=new gg(this._score.bind(this)),this.evaluatableExpressionProvider=new gg(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new gg(this._score.bind(this)),this.documentSemanticTokensProvider=new gg(this._score.bind(this)),this.documentDropEditProvider=new gg(this._score.bind(this)),this.documentPasteEditProvider=new gg(this._score.bind(this)),this.mappedEditsProvider=new gg(this._score.bind(this))}setNotebookTypeResolver(e){this._notebookTypeResolver=e}_score(e){return this._notebookTypeResolver?.(e)}},1);const mg=Object.create(null);function bg(e,t){if(Ln(t)){const i=mg[t];if(void 0===i)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return mg[e]=t,{id:e}}function vg(){return mg}const wg={...{add:bg("add",6e4),plus:bg("plus",6e4),gistNew:bg("gist-new",6e4),repoCreate:bg("repo-create",6e4),lightbulb:bg("lightbulb",60001),lightBulb:bg("light-bulb",60001),repo:bg("repo",60002),repoDelete:bg("repo-delete",60002),gistFork:bg("gist-fork",60003),repoForked:bg("repo-forked",60003),gitPullRequest:bg("git-pull-request",60004),gitPullRequestAbandoned:bg("git-pull-request-abandoned",60004),recordKeys:bg("record-keys",60005),keyboard:bg("keyboard",60005),tag:bg("tag",60006),gitPullRequestLabel:bg("git-pull-request-label",60006),tagAdd:bg("tag-add",60006),tagRemove:bg("tag-remove",60006),person:bg("person",60007),personFollow:bg("person-follow",60007),personOutline:bg("person-outline",60007),personFilled:bg("person-filled",60007),gitBranch:bg("git-branch",60008),gitBranchCreate:bg("git-branch-create",60008),gitBranchDelete:bg("git-branch-delete",60008),sourceControl:bg("source-control",60008),mirror:bg("mirror",60009),mirrorPublic:bg("mirror-public",60009),star:bg("star",60010),starAdd:bg("star-add",60010),starDelete:bg("star-delete",60010),starEmpty:bg("star-empty",60010),comment:bg("comment",60011),commentAdd:bg("comment-add",60011),alert:bg("alert",60012),warning:bg("warning",60012),search:bg("search",60013),searchSave:bg("search-save",60013),logOut:bg("log-out",60014),signOut:bg("sign-out",60014),logIn:bg("log-in",60015),signIn:bg("sign-in",60015),eye:bg("eye",60016),eyeUnwatch:bg("eye-unwatch",60016),eyeWatch:bg("eye-watch",60016),circleFilled:bg("circle-filled",60017),primitiveDot:bg("primitive-dot",60017),closeDirty:bg("close-dirty",60017),debugBreakpoint:bg("debug-breakpoint",60017),debugBreakpointDisabled:bg("debug-breakpoint-disabled",60017),debugHint:bg("debug-hint",60017),terminalDecorationSuccess:bg("terminal-decoration-success",60017),primitiveSquare:bg("primitive-square",60018),edit:bg("edit",60019),pencil:bg("pencil",60019),info:bg("info",60020),issueOpened:bg("issue-opened",60020),gistPrivate:bg("gist-private",60021),gitForkPrivate:bg("git-fork-private",60021),lock:bg("lock",60021),mirrorPrivate:bg("mirror-private",60021),close:bg("close",60022),removeClose:bg("remove-close",60022),x:bg("x",60022),repoSync:bg("repo-sync",60023),sync:bg("sync",60023),clone:bg("clone",60024),desktopDownload:bg("desktop-download",60024),beaker:bg("beaker",60025),microscope:bg("microscope",60025),vm:bg("vm",60026),deviceDesktop:bg("device-desktop",60026),file:bg("file",60027),fileText:bg("file-text",60027),more:bg("more",60028),ellipsis:bg("ellipsis",60028),kebabHorizontal:bg("kebab-horizontal",60028),mailReply:bg("mail-reply",60029),reply:bg("reply",60029),organization:bg("organization",60030),organizationFilled:bg("organization-filled",60030),organizationOutline:bg("organization-outline",60030),newFile:bg("new-file",60031),fileAdd:bg("file-add",60031),newFolder:bg("new-folder",60032),fileDirectoryCreate:bg("file-directory-create",60032),trash:bg("trash",60033),trashcan:bg("trashcan",60033),history:bg("history",60034),clock:bg("clock",60034),folder:bg("folder",60035),fileDirectory:bg("file-directory",60035),symbolFolder:bg("symbol-folder",60035),logoGithub:bg("logo-github",60036),markGithub:bg("mark-github",60036),github:bg("github",60036),terminal:bg("terminal",60037),console:bg("console",60037),repl:bg("repl",60037),zap:bg("zap",60038),symbolEvent:bg("symbol-event",60038),error:bg("error",60039),stop:bg("stop",60039),variable:bg("variable",60040),symbolVariable:bg("symbol-variable",60040),array:bg("array",60042),symbolArray:bg("symbol-array",60042),symbolModule:bg("symbol-module",60043),symbolPackage:bg("symbol-package",60043),symbolNamespace:bg("symbol-namespace",60043),symbolObject:bg("symbol-object",60043),symbolMethod:bg("symbol-method",60044),symbolFunction:bg("symbol-function",60044),symbolConstructor:bg("symbol-constructor",60044),symbolBoolean:bg("symbol-boolean",60047),symbolNull:bg("symbol-null",60047),symbolNumeric:bg("symbol-numeric",60048),symbolNumber:bg("symbol-number",60048),symbolStructure:bg("symbol-structure",60049),symbolStruct:bg("symbol-struct",60049),symbolParameter:bg("symbol-parameter",60050),symbolTypeParameter:bg("symbol-type-parameter",60050),symbolKey:bg("symbol-key",60051),symbolText:bg("symbol-text",60051),symbolReference:bg("symbol-reference",60052),goToFile:bg("go-to-file",60052),symbolEnum:bg("symbol-enum",60053),symbolValue:bg("symbol-value",60053),symbolRuler:bg("symbol-ruler",60054),symbolUnit:bg("symbol-unit",60054),activateBreakpoints:bg("activate-breakpoints",60055),archive:bg("archive",60056),arrowBoth:bg("arrow-both",60057),arrowDown:bg("arrow-down",60058),arrowLeft:bg("arrow-left",60059),arrowRight:bg("arrow-right",60060),arrowSmallDown:bg("arrow-small-down",60061),arrowSmallLeft:bg("arrow-small-left",60062),arrowSmallRight:bg("arrow-small-right",60063),arrowSmallUp:bg("arrow-small-up",60064),arrowUp:bg("arrow-up",60065),bell:bg("bell",60066),bold:bg("bold",60067),book:bg("book",60068),bookmark:bg("bookmark",60069),debugBreakpointConditionalUnverified:bg("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:bg("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:bg("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:bg("debug-breakpoint-data-unverified",60072),debugBreakpointData:bg("debug-breakpoint-data",60073),debugBreakpointDataDisabled:bg("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:bg("debug-breakpoint-log-unverified",60074),debugBreakpointLog:bg("debug-breakpoint-log",60075),debugBreakpointLogDisabled:bg("debug-breakpoint-log-disabled",60075),briefcase:bg("briefcase",60076),broadcast:bg("broadcast",60077),browser:bg("browser",60078),bug:bg("bug",60079),calendar:bg("calendar",60080),caseSensitive:bg("case-sensitive",60081),check:bg("check",60082),checklist:bg("checklist",60083),chevronDown:bg("chevron-down",60084),chevronLeft:bg("chevron-left",60085),chevronRight:bg("chevron-right",60086),chevronUp:bg("chevron-up",60087),chromeClose:bg("chrome-close",60088),chromeMaximize:bg("chrome-maximize",60089),chromeMinimize:bg("chrome-minimize",60090),chromeRestore:bg("chrome-restore",60091),circleOutline:bg("circle-outline",60092),circle:bg("circle",60092),debugBreakpointUnverified:bg("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:bg("terminal-decoration-incomplete",60092),circleSlash:bg("circle-slash",60093),circuitBoard:bg("circuit-board",60094),clearAll:bg("clear-all",60095),clippy:bg("clippy",60096),closeAll:bg("close-all",60097),cloudDownload:bg("cloud-download",60098),cloudUpload:bg("cloud-upload",60099),code:bg("code",60100),collapseAll:bg("collapse-all",60101),colorMode:bg("color-mode",60102),commentDiscussion:bg("comment-discussion",60103),creditCard:bg("credit-card",60105),dash:bg("dash",60108),dashboard:bg("dashboard",60109),database:bg("database",60110),debugContinue:bg("debug-continue",60111),debugDisconnect:bg("debug-disconnect",60112),debugPause:bg("debug-pause",60113),debugRestart:bg("debug-restart",60114),debugStart:bg("debug-start",60115),debugStepInto:bg("debug-step-into",60116),debugStepOut:bg("debug-step-out",60117),debugStepOver:bg("debug-step-over",60118),debugStop:bg("debug-stop",60119),debug:bg("debug",60120),deviceCameraVideo:bg("device-camera-video",60121),deviceCamera:bg("device-camera",60122),deviceMobile:bg("device-mobile",60123),diffAdded:bg("diff-added",60124),diffIgnored:bg("diff-ignored",60125),diffModified:bg("diff-modified",60126),diffRemoved:bg("diff-removed",60127),diffRenamed:bg("diff-renamed",60128),diff:bg("diff",60129),diffSidebyside:bg("diff-sidebyside",60129),discard:bg("discard",60130),editorLayout:bg("editor-layout",60131),emptyWindow:bg("empty-window",60132),exclude:bg("exclude",60133),extensions:bg("extensions",60134),eyeClosed:bg("eye-closed",60135),fileBinary:bg("file-binary",60136),fileCode:bg("file-code",60137),fileMedia:bg("file-media",60138),filePdf:bg("file-pdf",60139),fileSubmodule:bg("file-submodule",60140),fileSymlinkDirectory:bg("file-symlink-directory",60141),fileSymlinkFile:bg("file-symlink-file",60142),fileZip:bg("file-zip",60143),files:bg("files",60144),filter:bg("filter",60145),flame:bg("flame",60146),foldDown:bg("fold-down",60147),foldUp:bg("fold-up",60148),fold:bg("fold",60149),folderActive:bg("folder-active",60150),folderOpened:bg("folder-opened",60151),gear:bg("gear",60152),gift:bg("gift",60153),gistSecret:bg("gist-secret",60154),gist:bg("gist",60155),gitCommit:bg("git-commit",60156),gitCompare:bg("git-compare",60157),compareChanges:bg("compare-changes",60157),gitMerge:bg("git-merge",60158),githubAction:bg("github-action",60159),githubAlt:bg("github-alt",60160),globe:bg("globe",60161),grabber:bg("grabber",60162),graph:bg("graph",60163),gripper:bg("gripper",60164),heart:bg("heart",60165),home:bg("home",60166),horizontalRule:bg("horizontal-rule",60167),hubot:bg("hubot",60168),inbox:bg("inbox",60169),issueReopened:bg("issue-reopened",60171),issues:bg("issues",60172),italic:bg("italic",60173),jersey:bg("jersey",60174),json:bg("json",60175),kebabVertical:bg("kebab-vertical",60176),key:bg("key",60177),law:bg("law",60178),lightbulbAutofix:bg("lightbulb-autofix",60179),linkExternal:bg("link-external",60180),link:bg("link",60181),listOrdered:bg("list-ordered",60182),listUnordered:bg("list-unordered",60183),liveShare:bg("live-share",60184),loading:bg("loading",60185),location:bg("location",60186),mailRead:bg("mail-read",60187),mail:bg("mail",60188),markdown:bg("markdown",60189),megaphone:bg("megaphone",60190),mention:bg("mention",60191),milestone:bg("milestone",60192),gitPullRequestMilestone:bg("git-pull-request-milestone",60192),mortarBoard:bg("mortar-board",60193),move:bg("move",60194),multipleWindows:bg("multiple-windows",60195),mute:bg("mute",60196),noNewline:bg("no-newline",60197),note:bg("note",60198),octoface:bg("octoface",60199),openPreview:bg("open-preview",60200),package:bg("package",60201),paintcan:bg("paintcan",60202),pin:bg("pin",60203),play:bg("play",60204),run:bg("run",60204),plug:bg("plug",60205),preserveCase:bg("preserve-case",60206),preview:bg("preview",60207),project:bg("project",60208),pulse:bg("pulse",60209),question:bg("question",60210),quote:bg("quote",60211),radioTower:bg("radio-tower",60212),reactions:bg("reactions",60213),references:bg("references",60214),refresh:bg("refresh",60215),regex:bg("regex",60216),remoteExplorer:bg("remote-explorer",60217),remote:bg("remote",60218),remove:bg("remove",60219),replaceAll:bg("replace-all",60220),replace:bg("replace",60221),repoClone:bg("repo-clone",60222),repoForcePush:bg("repo-force-push",60223),repoPull:bg("repo-pull",60224),repoPush:bg("repo-push",60225),report:bg("report",60226),requestChanges:bg("request-changes",60227),rocket:bg("rocket",60228),rootFolderOpened:bg("root-folder-opened",60229),rootFolder:bg("root-folder",60230),rss:bg("rss",60231),ruby:bg("ruby",60232),saveAll:bg("save-all",60233),saveAs:bg("save-as",60234),save:bg("save",60235),screenFull:bg("screen-full",60236),screenNormal:bg("screen-normal",60237),searchStop:bg("search-stop",60238),server:bg("server",60240),settingsGear:bg("settings-gear",60241),settings:bg("settings",60242),shield:bg("shield",60243),smiley:bg("smiley",60244),sortPrecedence:bg("sort-precedence",60245),splitHorizontal:bg("split-horizontal",60246),splitVertical:bg("split-vertical",60247),squirrel:bg("squirrel",60248),starFull:bg("star-full",60249),starHalf:bg("star-half",60250),symbolClass:bg("symbol-class",60251),symbolColor:bg("symbol-color",60252),symbolConstant:bg("symbol-constant",60253),symbolEnumMember:bg("symbol-enum-member",60254),symbolField:bg("symbol-field",60255),symbolFile:bg("symbol-file",60256),symbolInterface:bg("symbol-interface",60257),symbolKeyword:bg("symbol-keyword",60258),symbolMisc:bg("symbol-misc",60259),symbolOperator:bg("symbol-operator",60260),symbolProperty:bg("symbol-property",60261),wrench:bg("wrench",60261),wrenchSubaction:bg("wrench-subaction",60261),symbolSnippet:bg("symbol-snippet",60262),tasklist:bg("tasklist",60263),telescope:bg("telescope",60264),textSize:bg("text-size",60265),threeBars:bg("three-bars",60266),thumbsdown:bg("thumbsdown",60267),thumbsup:bg("thumbsup",60268),tools:bg("tools",60269),triangleDown:bg("triangle-down",60270),triangleLeft:bg("triangle-left",60271),triangleRight:bg("triangle-right",60272),triangleUp:bg("triangle-up",60273),twitter:bg("twitter",60274),unfold:bg("unfold",60275),unlock:bg("unlock",60276),unmute:bg("unmute",60277),unverified:bg("unverified",60278),verified:bg("verified",60279),versions:bg("versions",60280),vmActive:bg("vm-active",60281),vmOutline:bg("vm-outline",60282),vmRunning:bg("vm-running",60283),watch:bg("watch",60284),whitespace:bg("whitespace",60285),wholeWord:bg("whole-word",60286),window:bg("window",60287),wordWrap:bg("word-wrap",60288),zoomIn:bg("zoom-in",60289),zoomOut:bg("zoom-out",60290),listFilter:bg("list-filter",60291),listFlat:bg("list-flat",60292),listSelection:bg("list-selection",60293),selection:bg("selection",60293),listTree:bg("list-tree",60294),debugBreakpointFunctionUnverified:bg("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:bg("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:bg("debug-breakpoint-function-disabled",60296),debugStackframeActive:bg("debug-stackframe-active",60297),circleSmallFilled:bg("circle-small-filled",60298),debugStackframeDot:bg("debug-stackframe-dot",60298),terminalDecorationMark:bg("terminal-decoration-mark",60298),debugStackframe:bg("debug-stackframe",60299),debugStackframeFocused:bg("debug-stackframe-focused",60299),debugBreakpointUnsupported:bg("debug-breakpoint-unsupported",60300),symbolString:bg("symbol-string",60301),debugReverseContinue:bg("debug-reverse-continue",60302),debugStepBack:bg("debug-step-back",60303),debugRestartFrame:bg("debug-restart-frame",60304),debugAlt:bg("debug-alt",60305),callIncoming:bg("call-incoming",60306),callOutgoing:bg("call-outgoing",60307),menu:bg("menu",60308),expandAll:bg("expand-all",60309),feedback:bg("feedback",60310),gitPullRequestReviewer:bg("git-pull-request-reviewer",60310),groupByRefType:bg("group-by-ref-type",60311),ungroupByRefType:bg("ungroup-by-ref-type",60312),account:bg("account",60313),gitPullRequestAssignee:bg("git-pull-request-assignee",60313),bellDot:bg("bell-dot",60314),debugConsole:bg("debug-console",60315),library:bg("library",60316),output:bg("output",60317),runAll:bg("run-all",60318),syncIgnored:bg("sync-ignored",60319),pinned:bg("pinned",60320),githubInverted:bg("github-inverted",60321),serverProcess:bg("server-process",60322),serverEnvironment:bg("server-environment",60323),pass:bg("pass",60324),issueClosed:bg("issue-closed",60324),stopCircle:bg("stop-circle",60325),playCircle:bg("play-circle",60326),record:bg("record",60327),debugAltSmall:bg("debug-alt-small",60328),vmConnect:bg("vm-connect",60329),cloud:bg("cloud",60330),merge:bg("merge",60331),export:bg("export",60332),graphLeft:bg("graph-left",60333),magnet:bg("magnet",60334),notebook:bg("notebook",60335),redo:bg("redo",60336),checkAll:bg("check-all",60337),pinnedDirty:bg("pinned-dirty",60338),passFilled:bg("pass-filled",60339),circleLargeFilled:bg("circle-large-filled",60340),circleLarge:bg("circle-large",60341),circleLargeOutline:bg("circle-large-outline",60341),combine:bg("combine",60342),gather:bg("gather",60342),table:bg("table",60343),variableGroup:bg("variable-group",60344),typeHierarchy:bg("type-hierarchy",60345),typeHierarchySub:bg("type-hierarchy-sub",60346),typeHierarchySuper:bg("type-hierarchy-super",60347),gitPullRequestCreate:bg("git-pull-request-create",60348),runAbove:bg("run-above",60349),runBelow:bg("run-below",60350),notebookTemplate:bg("notebook-template",60351),debugRerun:bg("debug-rerun",60352),workspaceTrusted:bg("workspace-trusted",60353),workspaceUntrusted:bg("workspace-untrusted",60354),workspaceUnknown:bg("workspace-unknown",60355),terminalCmd:bg("terminal-cmd",60356),terminalDebian:bg("terminal-debian",60357),terminalLinux:bg("terminal-linux",60358),terminalPowershell:bg("terminal-powershell",60359),terminalTmux:bg("terminal-tmux",60360),terminalUbuntu:bg("terminal-ubuntu",60361),terminalBash:bg("terminal-bash",60362),arrowSwap:bg("arrow-swap",60363),copy:bg("copy",60364),personAdd:bg("person-add",60365),filterFilled:bg("filter-filled",60366),wand:bg("wand",60367),debugLineByLine:bg("debug-line-by-line",60368),inspect:bg("inspect",60369),layers:bg("layers",60370),layersDot:bg("layers-dot",60371),layersActive:bg("layers-active",60372),compass:bg("compass",60373),compassDot:bg("compass-dot",60374),compassActive:bg("compass-active",60375),azure:bg("azure",60376),issueDraft:bg("issue-draft",60377),gitPullRequestClosed:bg("git-pull-request-closed",60378),gitPullRequestDraft:bg("git-pull-request-draft",60379),debugAll:bg("debug-all",60380),debugCoverage:bg("debug-coverage",60381),runErrors:bg("run-errors",60382),folderLibrary:bg("folder-library",60383),debugContinueSmall:bg("debug-continue-small",60384),beakerStop:bg("beaker-stop",60385),graphLine:bg("graph-line",60386),graphScatter:bg("graph-scatter",60387),pieChart:bg("pie-chart",60388),bracket:bg("bracket",60175),bracketDot:bg("bracket-dot",60389),bracketError:bg("bracket-error",60390),lockSmall:bg("lock-small",60391),azureDevops:bg("azure-devops",60392),verifiedFilled:bg("verified-filled",60393),newline:bg("newline",60394),layout:bg("layout",60395),layoutActivitybarLeft:bg("layout-activitybar-left",60396),layoutActivitybarRight:bg("layout-activitybar-right",60397),layoutPanelLeft:bg("layout-panel-left",60398),layoutPanelCenter:bg("layout-panel-center",60399),layoutPanelJustify:bg("layout-panel-justify",60400),layoutPanelRight:bg("layout-panel-right",60401),layoutPanel:bg("layout-panel",60402),layoutSidebarLeft:bg("layout-sidebar-left",60403),layoutSidebarRight:bg("layout-sidebar-right",60404),layoutStatusbar:bg("layout-statusbar",60405),layoutMenubar:bg("layout-menubar",60406),layoutCentered:bg("layout-centered",60407),target:bg("target",60408),indent:bg("indent",60409),recordSmall:bg("record-small",60410),errorSmall:bg("error-small",60411),terminalDecorationError:bg("terminal-decoration-error",60411),arrowCircleDown:bg("arrow-circle-down",60412),arrowCircleLeft:bg("arrow-circle-left",60413),arrowCircleRight:bg("arrow-circle-right",60414),arrowCircleUp:bg("arrow-circle-up",60415),layoutSidebarRightOff:bg("layout-sidebar-right-off",60416),layoutPanelOff:bg("layout-panel-off",60417),layoutSidebarLeftOff:bg("layout-sidebar-left-off",60418),blank:bg("blank",60419),heartFilled:bg("heart-filled",60420),map:bg("map",60421),mapHorizontal:bg("map-horizontal",60421),foldHorizontal:bg("fold-horizontal",60421),mapFilled:bg("map-filled",60422),mapHorizontalFilled:bg("map-horizontal-filled",60422),foldHorizontalFilled:bg("fold-horizontal-filled",60422),circleSmall:bg("circle-small",60423),bellSlash:bg("bell-slash",60424),bellSlashDot:bg("bell-slash-dot",60425),commentUnresolved:bg("comment-unresolved",60426),gitPullRequestGoToChanges:bg("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:bg("git-pull-request-new-changes",60428),searchFuzzy:bg("search-fuzzy",60429),commentDraft:bg("comment-draft",60430),send:bg("send",60431),sparkle:bg("sparkle",60432),insert:bg("insert",60433),mic:bg("mic",60434),thumbsdownFilled:bg("thumbsdown-filled",60435),thumbsupFilled:bg("thumbsup-filled",60436),coffee:bg("coffee",60437),snake:bg("snake",60438),game:bg("game",60439),vr:bg("vr",60440),chip:bg("chip",60441),piano:bg("piano",60442),music:bg("music",60443),micFilled:bg("mic-filled",60444),repoFetch:bg("repo-fetch",60445),copilot:bg("copilot",60446),lightbulbSparkle:bg("lightbulb-sparkle",60447),robot:bg("robot",60448),sparkleFilled:bg("sparkle-filled",60449),diffSingle:bg("diff-single",60450),diffMultiple:bg("diff-multiple",60451),surroundWith:bg("surround-with",60452),share:bg("share",60453),gitStash:bg("git-stash",60454),gitStashApply:bg("git-stash-apply",60455),gitStashPop:bg("git-stash-pop",60456),vscode:bg("vscode",60457),vscodeInsiders:bg("vscode-insiders",60458),codeOss:bg("code-oss",60459),runCoverage:bg("run-coverage",60460),runAllCoverage:bg("run-all-coverage",60461),coverage:bg("coverage",60462),githubProject:bg("github-project",60463),mapVertical:bg("map-vertical",60464),foldVertical:bg("fold-vertical",60464),mapVerticalFilled:bg("map-vertical-filled",60465),foldVerticalFilled:bg("fold-vertical-filled",60465),goToSearch:bg("go-to-search",60466),percentage:bg("percentage",60467),sortPercentage:bg("sort-percentage",60467)},...{dialogError:bg("dialog-error","error"),dialogWarning:bg("dialog-warning","warning"),dialogInfo:bg("dialog-info","info"),dialogClose:bg("dialog-close","close"),treeItemExpanded:bg("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:bg("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:bg("tree-filter-on-type-off","list-selection"),treeFilterClear:bg("tree-filter-clear","close"),treeItemLoading:bg("tree-item-loading","loading"),menuSelection:bg("menu-selection","check"),menuSubmenu:bg("menu-submenu","chevron-right"),menuBarMore:bg("menubar-more","more"),scrollbarButtonLeft:bg("scrollbar-button-left","triangle-left"),scrollbarButtonRight:bg("scrollbar-button-right","triangle-right"),scrollbarButtonUp:bg("scrollbar-button-up","triangle-up"),scrollbarButtonDown:bg("scrollbar-button-down","triangle-down"),toolBarMore:bg("toolbar-more","more"),quickInputBack:bg("quick-input-back","arrow-left"),dropDownButton:bg("drop-down-button",60084),symbolCustomColor:bg("symbol-customcolor",60252),exportIcon:bg("export",60332),workspaceUnspecified:bg("workspace-unspecified",60355),newLine:bg("newline",60394),thumbsDownFilled:bg("thumbsdown-filled",60435),thumbsUpFilled:bg("thumbsup-filled",60436),gitFetch:bg("git-fetch",60445),lightbulbSparkleAutofix:bg("lightbulb-sparkle-autofix",60447),debugBreakpointPending:bg("debug-breakpoint-pending",60377)}};var _g;function yg(e){return e===_g.DARK||e===_g.HIGH_CONTRAST_DARK}function Cg(e){return{id:e}}!function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST_DARK="hcDark",e.HIGH_CONTRAST_LIGHT="hcLight"}(_g||(_g={}));wg.file,wg.folder;const Sg="base.contributions.theming";const kg=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new ui}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Yt((()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)}))}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}};function xg(e){return kg.onColorThemeChange(e)}Jo.add(Sg,kg);class Eg extends Qt{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((e=>this.onThemeChange(e))))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let i=this.theme.getColor(e);return i&&t&&(i=t(i,this.theme)),i?i.toString():null}}function Dg(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}class Lg{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,i)),this.a=Dg(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ig{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=Dg(Math.max(Math.min(1,t),0),3),this.l=Dg(Math.max(Math.min(1,i),0),3),this.a=Dg(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=e.a,o=Math.max(t,i,n),r=Math.min(t,i,n);let a=0,l=0;const h=(r+o)/2,c=o-r;if(c>0){switch(l=Math.min(h<=.5?c/(2*h):c/(2-2*h),1),o){case t:a=(i-n)/c+(i<n?6:0);break;case i:a=(n-t)/c+2;break;case n:a=(t-i)/c+4}a*=60,a=Math.round(a)}return new Ig(a,l,h,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:s}=e;let o,r,a;if(0===i)o=r=a=n;else{const e=n<.5?n*(1+i):n+i-n*i,s=2*n-e;o=Ig._hue2rgb(s,e,t+1/3),r=Ig._hue2rgb(s,e,t),a=Ig._hue2rgb(s,e,t-1/3)}return new Lg(Math.round(255*o),Math.round(255*r),Math.round(255*a),s)}}class Tg{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=Dg(Math.max(Math.min(1,t),0),3),this.v=Dg(Math.max(Math.min(1,i),0),3),this.a=Dg(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=Math.max(t,i,n),o=s-Math.min(t,i,n),r=0===s?0:o/s;let a;return a=0===o?0:s===t?((i-n)/o%6+6)%6:s===i?(n-t)/o+2:(t-i)/o+4,new Tg(Math.round(60*a),r,s,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:s}=e,o=n*i,r=o*(1-Math.abs(t/60%2-1)),a=n-o;let[l,h,c]=[0,0,0];return t<60?(l=o,h=r):t<120?(l=r,h=o):t<180?(h=o,c=r):t<240?(h=r,c=o):t<300?(l=r,c=o):t<=360&&(l=o,c=r),l=Math.round(255*(l+a)),h=Math.round(255*(h+a)),c=Math.round(255*(c+a)),new Lg(l,h,c,s)}}class Ng{static fromHex(e){return Ng.Format.CSS.parseHex(e)||Ng.red}static equals(e,t){return!e&&!t||!(!e||!t)&&e.equals(t)}get hsla(){return this._hsla?this._hsla:Ig.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Tg.fromRGBA(this.rgba)}constructor(e){if(!e)throw new Error("Color needs a value");if(e instanceof Lg)this.rgba=e;else if(e instanceof Ig)this._hsla=e,this.rgba=Ig.toRGBA(e);else{if(!(e instanceof Tg))throw new Error("Invalid color ctor argument");this._hsva=e,this.rgba=Tg.toRGBA(e)}}equals(e){return!!e&&Lg.equals(this.rgba,e.rgba)&&Ig.equals(this.hsla,e.hsla)&&Tg.equals(this.hsva,e.hsva)}getRelativeLuminance(){return Dg(.2126*Ng._relativeLuminanceForComponent(this.rgba.r)+.7152*Ng._relativeLuminanceForComponent(this.rgba.g)+.0722*Ng._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)}isDarker(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3<128}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}lighten(e){return new Ng(new Ig(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Ng(new Ig(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:s}=this.rgba;return new Ng(new Lg(t,i,n,s*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new Ng(new Lg(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,i=this.rgba.a,n=t.a,s=i+n*(1-i);if(s<1e-6)return Ng.transparent;const o=this.rgba.r*i/s+t.r*n*(1-i)/s,r=this.rgba.g*i/s+t.g*n*(1-i)/s,a=this.rgba.b*i/s+t.b*n*(1-i)/s;return new Ng(new Lg(o,r,a,s))}makeOpaque(e){if(this.isOpaque()||1!==e.rgba.a)return this;const{r:t,g:i,b:n,a:s}=this.rgba;return new Ng(new Lg(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-i),e.rgba.b-s*(e.rgba.b-n),1))}flatten(...e){const t=e.reduceRight(((e,t)=>Ng._flatten(t,e)));return Ng._flatten(this,t)}static _flatten(e,t){const i=1-e.rgba.a;return new Ng(new Lg(i*t.rgba.r+e.rgba.a*e.rgba.r,i*t.rgba.g+e.rgba.a*e.rgba.g,i*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return this._toString||(this._toString=Ng.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-n)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance();return i=i*(n-t.getRelativeLuminance())/n,e.darken(i)}static{this.white=new Ng(new Lg(255,255,255,1))}static{this.black=new Ng(new Lg(0,0,0,1))}static{this.red=new Ng(new Lg(255,0,0,1))}static{this.blue=new Ng(new Lg(0,0,255,1))}static{this.green=new Ng(new Lg(0,255,0,1))}static{this.cyan=new Ng(new Lg(0,255,255,1))}static{this.lightgrey=new Ng(new Lg(211,211,211,1))}static{this.transparent=new Ng(new Lg(0,0,0,0))}}function Ag(e){return`--vscode-${e.replace(/\./g,"-")}`}function Mg(e){return`var(${Ag(e)})`}!function(e){var t;(function(t){function i(e){const t=e.toString(16);return 2!==t.length?"0"+t:t}function n(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`},t.formatHSL=function(t){return 1===t.hsla.a?`hsl(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%)`:e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return`hsla(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`},t.formatHex=function(e){return`#${i(e.rgba.r)}${i(e.rgba.g)}${i(e.rgba.b)}`},t.formatHexA=function(t,n=!1){return n&&1===t.rgba.a?e.Format.CSS.formatHex(t):`#${i(t.rgba.r)}${i(t.rgba.g)}${i(t.rgba.b)}${i(Math.round(255*t.rgba.a))}`},t.format=function(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)},t.parseHex=function(t){const i=t.length;if(0===i)return null;if(35!==t.charCodeAt(0))return null;if(7===i){const i=16*n(t.charCodeAt(1))+n(t.charCodeAt(2)),s=16*n(t.charCodeAt(3))+n(t.charCodeAt(4)),o=16*n(t.charCodeAt(5))+n(t.charCodeAt(6));return new e(new Lg(i,s,o,1))}if(9===i){const i=16*n(t.charCodeAt(1))+n(t.charCodeAt(2)),s=16*n(t.charCodeAt(3))+n(t.charCodeAt(4)),o=16*n(t.charCodeAt(5))+n(t.charCodeAt(6)),r=16*n(t.charCodeAt(7))+n(t.charCodeAt(8));return new e(new Lg(i,s,o,r/255))}if(4===i){const i=n(t.charCodeAt(1)),s=n(t.charCodeAt(2)),o=n(t.charCodeAt(3));return new e(new Lg(16*i+i,16*s+s,16*o+o))}if(5===i){const i=n(t.charCodeAt(1)),s=n(t.charCodeAt(2)),o=n(t.charCodeAt(3)),r=n(t.charCodeAt(4));return new e(new Lg(16*i+i,16*s+s,16*o+o,(16*r+r)/255))}return null}})((t=e.Format||(e.Format={})).CSS||(t.CSS={}))}(Ng||(Ng={}));const Rg="base.contributions.colors";const Og=new class{constructor(){this._onDidChangeSchema=new ui,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,s){const o={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:s};this.colorsById[e]=o;const r={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(r.deprecationMessage=s),n&&(r.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",r.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[e]=r,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];const t=this.colorReferenceSchema.enum.indexOf(e);-1!==t&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map((e=>this.colorsById[e]))}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){return Vg(i.defaults[t.type],t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){return Object.keys(this.colorsById).sort(((e,t)=>{const i=-1===e.indexOf(".")?0:1,n=-1===t.indexOf(".")?0:1;return i!==n?i-n:e.localeCompare(t)})).map((e=>`- \`${e}\`: ${this.colorsById[e].description}`)).join("\n")}};function Fg(e,t,i,n,s){return Og.registerColor(e,t,i,n,s)}function Pg(e,t){return{op:0,value:e,factor:t}}function Bg(e,t){return{op:1,value:e,factor:t}}function zg(e,t){return{op:2,value:e,factor:t}}function Wg(...e){return{op:4,values:e}}function Hg(e,t,i,n){return{op:5,value:e,background:t,factor:i,transparency:n}}function Vg(e,t){if(null!==e)return"string"==typeof e?"#"===e[0]?Ng.fromHex(e):t.getColor(e):e instanceof Ng?e:"object"==typeof e?function(e,t){switch(e.op){case 0:return Vg(e.value,t)?.darken(e.factor);case 1:return Vg(e.value,t)?.lighten(e.factor);case 2:return Vg(e.value,t)?.transparent(e.factor);case 3:{const i=Vg(e.background,t);return i?Vg(e.value,t)?.makeOpaque(i):Vg(e.value,t)}case 4:for(const i of e.values){const e=Vg(i,t);if(e)return e}return;case 6:return Vg(t.defines(e.if)?e.then:e.else,t);case 5:{const i=Vg(e.value,t);if(!i)return;const n=Vg(e.background,t);return n?i.isDarkerThan(n)?Ng.getLighterColor(i,n,e.factor).transparent(e.transparency):Ng.getDarkerColor(i,n,e.factor).transparent(e.transparency):i.transparent(e.factor*e.transparency)}default:throw Xo()}}(e,t):void 0}Jo.add(Rg,Og);const Ug="vscode://schemas/workbench-colors",Kg=Jo.as(lr);Kg.registerSchema(Ug,Og.getColorSchema());const qg=new $a((()=>Kg.notifySchemaChanged(Ug)),200);Og.onDidChangeSchema((()=>{qg.isScheduled()||qg.schedule()}));const $g="vs/platform/theme/common/colors/baseColors",jg=Fg("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},u($g,0,"Overall foreground color. This color is only used if not overridden by a component."));Fg("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},u($g,1,"Overall foreground for disabled elements. This color is only used if not overridden by a component.")),Fg("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},u($g,2,"Overall foreground color for error messages. This color is only used if not overridden by a component."));Fg("descriptionForeground",{light:"#717171",dark:zg(jg,.7),hcDark:zg(jg,.7),hcLight:zg(jg,.7)},u($g,3,"Foreground color for description text providing additional information, for example for a label."));const Gg=Fg("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},u($g,4,"The default color for icons in the workbench.")),Yg=Fg("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},u($g,5,"Overall border color for focused elements. This color is only used if not overridden by a component.")),Xg=Fg("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},u($g,6,"An extra border around elements to separate them from others for greater contrast.")),Qg=Fg("contrastActiveBorder",{light:null,dark:null,hcDark:Yg,hcLight:Yg},u($g,7,"An extra border around active elements to separate them from others for greater contrast.")),Zg=(Fg("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},u($g,8,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),Fg("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},u($g,9,"Foreground color for links in text.")));Fg("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},u($g,10,"Foreground color for links in text when clicked on and on mouse hover."));Fg("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Ng.black,hcLight:"#292929"},u($g,11,"Color for text separators.")),Fg("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},u($g,12,"Foreground color for preformatted text segments.")),Fg("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},u($g,13,"Background color for preformatted text segments."));Fg("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},u($g,14,"Background color for block quotes in text.")),Fg("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Ng.white,hcLight:"#292929"},u($g,15,"Border color for block quotes in text."));Fg("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Ng.black,hcLight:"#F2F2F2"},u($g,16,"Background color for code blocks in text."));const Jg="vs/platform/theme/common/colors/miscColors";Fg("sash.hoverBorder",{dark:Yg,light:Yg,hcDark:Yg,hcLight:Yg},u(Jg,0,"Border color of active sashes."));const ep=Fg("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Ng.black,hcLight:"#0F4A85"},u(Jg,1,"Badge background color. Badges are small information labels, e.g. for search results count.")),tp=Fg("badge.foreground",{dark:Ng.white,light:"#333",hcDark:Ng.white,hcLight:Ng.white},u(Jg,2,"Badge foreground color. Badges are small information labels, e.g. for search results count.")),ip=Fg("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},u(Jg,3,"Scrollbar shadow to indicate that the view is scrolled.")),np=Fg("scrollbarSlider.background",{dark:Ng.fromHex("#797979").transparent(.4),light:Ng.fromHex("#646464").transparent(.4),hcDark:zg(Xg,.6),hcLight:zg(Xg,.4)},u(Jg,4,"Scrollbar slider background color.")),sp=Fg("scrollbarSlider.hoverBackground",{dark:Ng.fromHex("#646464").transparent(.7),light:Ng.fromHex("#646464").transparent(.7),hcDark:zg(Xg,.8),hcLight:zg(Xg,.8)},u(Jg,5,"Scrollbar slider background color when hovering.")),op=Fg("scrollbarSlider.activeBackground",{dark:Ng.fromHex("#BFBFBF").transparent(.4),light:Ng.fromHex("#000000").transparent(.6),hcDark:Xg,hcLight:Xg},u(Jg,6,"Scrollbar slider background color when clicked on.")),rp=Fg("progressBar.background",{dark:Ng.fromHex("#0E70C0"),light:Ng.fromHex("#0E70C0"),hcDark:Xg,hcLight:Xg},u(Jg,7,"Background color of the progress bar that can show for long running operations.")),ap="vs/platform/theme/common/colors/editorColors",lp=Fg("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Ng.black,hcLight:Ng.white},u(ap,0,"Editor background color.")),hp=Fg("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Ng.white,hcLight:jg},u(ap,1,"Editor default foreground color."));Fg("editorStickyScroll.background",{light:lp,dark:lp,hcDark:lp,hcLight:lp},u(ap,2,"Background color of sticky scroll in the editor")),Fg("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Ng.fromHex("#0F4A85").transparent(.1)},u(ap,3,"Background color of sticky scroll on hover in the editor")),Fg("editorStickyScroll.border",{dark:null,light:null,hcDark:Xg,hcLight:Xg},u(ap,4,"Border color of sticky scroll in the editor")),Fg("editorStickyScroll.shadow",{dark:ip,light:ip,hcDark:ip,hcLight:ip},u(ap,5," Shadow color of sticky scroll in the editor"));const cp=Fg("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Ng.white},u(ap,6,"Background color of editor widgets, such as find/replace.")),dp=Fg("editorWidget.foreground",{dark:jg,light:jg,hcDark:jg,hcLight:jg},u(ap,7,"Foreground color of editor widgets, such as find/replace.")),up=Fg("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Xg,hcLight:Xg},u(ap,8,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));Fg("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},u(ap,9,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Fg("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,10,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const gp=Fg("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},u(ap,11,"Foreground color of error squigglies in the editor.")),pp=(Fg("editorError.border",{dark:null,light:null,hcDark:Ng.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},u(ap,12,"If set, color of double underlines for errors in the editor.")),Fg("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,13,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0)),fp=Fg("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},u(ap,14,"Foreground color of warning squigglies in the editor.")),mp=Fg("editorWarning.border",{dark:null,light:null,hcDark:Ng.fromHex("#FFCC00").transparent(.8),hcLight:Ng.fromHex("#FFCC00").transparent(.8)},u(ap,15,"If set, color of double underlines for warnings in the editor."));Fg("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,16,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const bp=Fg("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},u(ap,17,"Foreground color of info squigglies in the editor.")),vp=Fg("editorInfo.border",{dark:null,light:null,hcDark:Ng.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},u(ap,18,"If set, color of double underlines for infos in the editor."));Fg("editorHint.foreground",{dark:Ng.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},u(ap,19,"Foreground color of hint squigglies in the editor."));Fg("editorHint.border",{dark:null,light:null,hcDark:Ng.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},u(ap,20,"If set, color of double underlines for hints in the editor."));Fg("editorLink.activeForeground",{dark:"#4E94CE",light:Ng.blue,hcDark:Ng.cyan,hcLight:"#292929"},u(ap,21,"Color of active links."));const wp=Fg("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},u(ap,22,"Color of the editor selection.")),_p=(Fg("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Ng.white},u(ap,23,"Color of the selected text for high contrast.")),Fg("editor.inactiveSelectionBackground",{light:zg(wp,.5),dark:zg(wp,.5),hcDark:zg(wp,.7),hcLight:zg(wp,.5)},u(ap,24,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0)),yp=Fg("editor.selectionHighlightBackground",{light:Hg(wp,lp,.3,.6),dark:Hg(wp,lp,.3,.6),hcDark:null,hcLight:null},u(ap,25,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Qg,hcLight:Qg},u(ap,26,"Border color for regions with the same content as the selection."));Fg("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},u(ap,27,"Color of the current search match."));const Cp=Fg("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},u(ap,28,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},u(ap,29,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("editor.findMatchBorder",{light:null,dark:null,hcDark:Qg,hcLight:Qg},u(ap,30,"Border color of the current search match."));const Sp=Fg("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Qg,hcLight:Qg},u(ap,31,"Border color of the other search matches.")),kp=(Fg("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:zg(Qg,.4),hcLight:zg(Qg,.4)},u(ap,32,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},u(ap,33,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("editorHoverWidget.background",{light:cp,dark:cp,hcDark:cp,hcLight:cp},u(ap,34,"Background color of the editor hover."))),xp=(Fg("editorHoverWidget.foreground",{light:dp,dark:dp,hcDark:dp,hcLight:dp},u(ap,35,"Foreground color of the editor hover.")),Fg("editorHoverWidget.border",{light:up,dark:up,hcDark:up,hcLight:up},u(ap,36,"Border color of the editor hover.")));Fg("editorHoverWidget.statusBarBackground",{dark:Bg(kp,.2),light:Pg(kp,.05),hcDark:cp,hcLight:cp},u(ap,37,"Background color of the editor hover status bar."));const Ep=Fg("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Ng.white,hcLight:Ng.black},u(ap,38,"Foreground color of inline hints")),Dp=Fg("editorInlayHint.background",{dark:zg(ep,.1),light:zg(ep,.1),hcDark:zg(Ng.white,.1),hcLight:zg(ep,.1)},u(ap,39,"Background color of inline hints")),Lp=(Fg("editorInlayHint.typeForeground",{dark:Ep,light:Ep,hcDark:Ep,hcLight:Ep},u(ap,40,"Foreground color of inline hints for types")),Fg("editorInlayHint.typeBackground",{dark:Dp,light:Dp,hcDark:Dp,hcLight:Dp},u(ap,41,"Background color of inline hints for types")),Fg("editorInlayHint.parameterForeground",{dark:Ep,light:Ep,hcDark:Ep,hcLight:Ep},u(ap,42,"Foreground color of inline hints for parameters")),Fg("editorInlayHint.parameterBackground",{dark:Dp,light:Dp,hcDark:Dp,hcLight:Dp},u(ap,43,"Background color of inline hints for parameters")),Fg("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},u(ap,44,"The color used for the lightbulb actions icon.")));Fg("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},u(ap,45,"The color used for the lightbulb auto fix actions icon.")),Fg("editorLightBulbAi.foreground",{dark:Lp,light:Lp,hcDark:Lp,hcLight:Lp},u(ap,46,"The color used for the lightbulb AI icon.")),Fg("editor.snippetTabstopHighlightBackground",{dark:new Ng(new Lg(124,124,124,.3)),light:new Ng(new Lg(10,50,100,.2)),hcDark:new Ng(new Lg(124,124,124,.3)),hcLight:new Ng(new Lg(10,50,100,.2))},u(ap,47,"Highlight background color of a snippet tabstop.")),Fg("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,48,"Highlight border color of a snippet tabstop.")),Fg("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,49,"Highlight background color of the final tabstop of a snippet.")),Fg("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Ng(new Lg(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},u(ap,50,"Highlight border color of the final tabstop of a snippet."));const Ip=new Ng(new Lg(155,185,85,.2)),Tp=new Ng(new Lg(255,0,0,.2));Fg("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},u(ap,51,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},u(ap,52,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("diffEditor.insertedLineBackground",{dark:Ip,light:Ip,hcDark:null,hcLight:null},u(ap,53,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("diffEditor.removedLineBackground",{dark:Tp,light:Tp,hcDark:null,hcLight:null},u(ap,54,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,55,"Background color for the margin where lines got inserted.")),Fg("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,56,"Background color for the margin where lines got removed."));Fg("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,57,"Diff overview ruler foreground for inserted content.")),Fg("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(ap,58,"Diff overview ruler foreground for removed content."));Fg("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},u(ap,59,"Outline color for the text that got inserted.")),Fg("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},u(ap,60,"Outline color for text that got removed.")),Fg("diffEditor.border",{dark:null,light:null,hcDark:Xg,hcLight:Xg},u(ap,61,"Border color between the two text editors."));Fg("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},u(ap,62,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));Fg("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},u(ap,63,"The background color of unchanged blocks in the diff editor.")),Fg("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},u(ap,64,"The foreground color of unchanged blocks in the diff editor.")),Fg("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},u(ap,65,"The background color of unchanged code in the diff editor."));const Np=Fg("widget.shadow",{dark:zg(Ng.black,.36),light:zg(Ng.black,.16),hcDark:null,hcLight:null},u(ap,66,"Shadow color of widgets such as find/replace inside the editor.")),Ap=Fg("widget.border",{dark:null,light:null,hcDark:Xg,hcLight:Xg},u(ap,67,"Border color of widgets such as find/replace inside the editor.")),Mp=Fg("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},u(ap,68,"Toolbar background when hovering over actions using the mouse"));Fg("toolbar.hoverOutline",{dark:null,light:null,hcDark:Qg,hcLight:Qg},u(ap,69,"Toolbar outline when hovering over actions using the mouse")),Fg("toolbar.activeBackground",{dark:Bg(Mp,.1),light:Pg(Mp,.1),hcDark:null,hcLight:null},u(ap,70,"Toolbar background when holding the mouse over actions"));const Rp=Fg("breadcrumb.foreground",{light:zg(jg,.8),dark:zg(jg,.8),hcDark:zg(jg,.8),hcLight:zg(jg,.8)},u(ap,71,"Color of focused breadcrumb items.")),Op=Fg("breadcrumb.background",{light:lp,dark:lp,hcDark:lp,hcLight:lp},u(ap,72,"Background color of breadcrumb items.")),Fp=Fg("breadcrumb.focusForeground",{light:Pg(jg,.2),dark:Bg(jg,.1),hcDark:Bg(jg,.1),hcLight:Bg(jg,.1)},u(ap,71,"Color of focused breadcrumb items.")),Pp=Fg("breadcrumb.activeSelectionForeground",{light:Pg(jg,.2),dark:Bg(jg,.1),hcDark:Bg(jg,.1),hcLight:Bg(jg,.1)},u(ap,73,"Color of selected breadcrumb items.")),Bp=(Fg("breadcrumbPicker.background",{light:cp,dark:cp,hcDark:cp,hcLight:cp},u(ap,74,"Background color of breadcrumb item picker.")),Ng.fromHex("#40C8AE").transparent(.5)),zp=Ng.fromHex("#40A6FF").transparent(.5),Wp=Ng.fromHex("#606060").transparent(.4),Hp=.4,Vp=Fg("merge.currentHeaderBackground",{dark:Bp,light:Bp,hcDark:null,hcLight:null},u(ap,75,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("merge.currentContentBackground",{dark:zg(Vp,Hp),light:zg(Vp,Hp),hcDark:zg(Vp,Hp),hcLight:zg(Vp,Hp)},u(ap,76,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Up=Fg("merge.incomingHeaderBackground",{dark:zp,light:zp,hcDark:null,hcLight:null},u(ap,77,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("merge.incomingContentBackground",{dark:zg(Up,Hp),light:zg(Up,Hp),hcDark:zg(Up,Hp),hcLight:zg(Up,Hp)},u(ap,78,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Kp=Fg("merge.commonHeaderBackground",{dark:Wp,light:Wp,hcDark:null,hcLight:null},u(ap,79,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("merge.commonContentBackground",{dark:zg(Kp,Hp),light:zg(Kp,Hp),hcDark:zg(Kp,Hp),hcLight:zg(Kp,Hp)},u(ap,80,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const qp=Fg("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},u(ap,81,"Border color on headers and the splitter in inline merge-conflicts."));Fg("editorOverviewRuler.currentContentForeground",{dark:zg(Vp,1),light:zg(Vp,1),hcDark:qp,hcLight:qp},u(ap,82,"Current overview ruler foreground for inline merge-conflicts.")),Fg("editorOverviewRuler.incomingContentForeground",{dark:zg(Up,1),light:zg(Up,1),hcDark:qp,hcLight:qp},u(ap,83,"Incoming overview ruler foreground for inline merge-conflicts.")),Fg("editorOverviewRuler.commonContentForeground",{dark:zg(Kp,1),light:zg(Kp,1),hcDark:qp,hcLight:qp},u(ap,84,"Common ancestor overview ruler foreground for inline merge-conflicts."));Fg("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},u(ap,85,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},u(ap,86,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const $p=Fg("problemsErrorIcon.foreground",{dark:gp,light:gp,hcDark:gp,hcLight:gp},u(ap,87,"The color used for the problems error icon.")),jp=Fg("problemsWarningIcon.foreground",{dark:fp,light:fp,hcDark:fp,hcLight:fp},u(ap,88,"The color used for the problems warning icon.")),Gp=Fg("problemsInfoIcon.foreground",{dark:bp,light:bp,hcDark:bp,hcLight:bp},u(ap,89,"The color used for the problems info icon.")),Yp="vs/platform/theme/common/colors/minimapColors",Xp=Fg("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},u(Yp,0,"Minimap marker color for find matches."),!0),Qp=(Fg("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},u(Yp,1,"Minimap marker color for repeating editor selections."),!0),Fg("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},u(Yp,2,"Minimap marker color for the editor selection."),!0),Fg("minimap.infoHighlight",{dark:bp,light:bp,hcDark:vp,hcLight:vp},u(Yp,3,"Minimap marker color for infos."))),Zp=Fg("minimap.warningHighlight",{dark:fp,light:fp,hcDark:mp,hcLight:mp},u(Yp,4,"Minimap marker color for warnings.")),Jp=Fg("minimap.errorHighlight",{dark:new Ng(new Lg(255,18,18,.7)),light:new Ng(new Lg(255,18,18,.7)),hcDark:new Ng(new Lg(255,50,50,1)),hcLight:"#B5200D"},u(Yp,5,"Minimap marker color for errors."));Fg("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},u(Yp,6,"Minimap background color.")),Fg("minimap.foregroundOpacity",{dark:Ng.fromHex("#000f"),light:Ng.fromHex("#000f"),hcDark:Ng.fromHex("#000f"),hcLight:Ng.fromHex("#000f")},u(Yp,7,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));Fg("minimapSlider.background",{light:zg(np,.5),dark:zg(np,.5),hcDark:zg(np,.5),hcLight:zg(np,.5)},u(Yp,8,"Minimap slider background color.")),Fg("minimapSlider.hoverBackground",{light:zg(sp,.5),dark:zg(sp,.5),hcDark:zg(sp,.5),hcLight:zg(sp,.5)},u(Yp,9,"Minimap slider background color when hovering.")),Fg("minimapSlider.activeBackground",{light:zg(op,.5),dark:zg(op,.5),hcDark:zg(op,.5),hcLight:zg(op,.5)},u(Yp,10,"Minimap slider background color when clicked on."));const ef="vs/platform/theme/common/colors/chartsColors";Fg("charts.foreground",{dark:jg,light:jg,hcDark:jg,hcLight:jg},u(ef,0,"The foreground color used in charts.")),Fg("charts.lines",{dark:zg(jg,.5),light:zg(jg,.5),hcDark:zg(jg,.5),hcLight:zg(jg,.5)},u(ef,1,"The color used for horizontal lines in charts."));Fg("charts.red",{dark:gp,light:gp,hcDark:gp,hcLight:gp},u(ef,2,"The red color used in chart visualizations."));Fg("charts.blue",{dark:bp,light:bp,hcDark:bp,hcLight:bp},u(ef,3,"The blue color used in chart visualizations."));Fg("charts.yellow",{dark:fp,light:fp,hcDark:fp,hcLight:fp},u(ef,4,"The yellow color used in chart visualizations."));Fg("charts.orange",{dark:Xp,light:Xp,hcDark:Xp,hcLight:Xp},u(ef,5,"The orange color used in chart visualizations."));Fg("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},u(ef,6,"The green color used in chart visualizations."));Fg("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},u(ef,7,"The purple color used in chart visualizations."));const tf="vs/platform/theme/common/colors/inputColors",nf=Fg("input.background",{dark:"#3C3C3C",light:Ng.white,hcDark:Ng.black,hcLight:Ng.white},u(tf,0,"Input box background.")),sf=Fg("input.foreground",{dark:jg,light:jg,hcDark:jg,hcLight:jg},u(tf,1,"Input box foreground.")),of=Fg("input.border",{dark:null,light:null,hcDark:Xg,hcLight:Xg},u(tf,2,"Input box border.")),rf=Fg("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Xg,hcLight:Xg},u(tf,3,"Border color of activated options in input fields."));Fg("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},u(tf,4,"Background color of activated options in input fields."));const af=Fg("inputOption.activeBackground",{dark:zg(Yg,.4),light:zg(Yg,.2),hcDark:Ng.transparent,hcLight:Ng.transparent},u(tf,5,"Background hover color of options in input fields.")),lf=Fg("inputOption.activeForeground",{dark:Ng.white,light:Ng.black,hcDark:jg,hcLight:jg},u(tf,6,"Foreground color of activated options in input fields.")),hf=(Fg("input.placeholderForeground",{light:zg(jg,.5),dark:zg(jg,.5),hcDark:zg(jg,.7),hcLight:zg(jg,.7)},u(tf,7,"Input box foreground color for placeholder text.")),Fg("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Ng.black,hcLight:Ng.white},u(tf,8,"Input validation background color for information severity."))),cf=Fg("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:jg},u(tf,9,"Input validation foreground color for information severity.")),df=Fg("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Xg,hcLight:Xg},u(tf,10,"Input validation border color for information severity.")),uf=Fg("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Ng.black,hcLight:Ng.white},u(tf,11,"Input validation background color for warning severity.")),gf=Fg("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:jg},u(tf,12,"Input validation foreground color for warning severity.")),pf=Fg("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Xg,hcLight:Xg},u(tf,13,"Input validation border color for warning severity.")),ff=Fg("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Ng.black,hcLight:Ng.white},u(tf,14,"Input validation background color for error severity.")),mf=Fg("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:jg},u(tf,15,"Input validation foreground color for error severity.")),bf=Fg("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Xg,hcLight:Xg},u(tf,16,"Input validation border color for error severity.")),vf=Fg("dropdown.background",{dark:"#3C3C3C",light:Ng.white,hcDark:Ng.black,hcLight:Ng.white},u(tf,17,"Dropdown background.")),wf=Fg("dropdown.listBackground",{dark:null,light:null,hcDark:Ng.black,hcLight:Ng.white},u(tf,18,"Dropdown list background.")),_f=Fg("dropdown.foreground",{dark:"#F0F0F0",light:jg,hcDark:Ng.white,hcLight:jg},u(tf,19,"Dropdown foreground.")),yf=Fg("dropdown.border",{dark:vf,light:"#CECECE",hcDark:Xg,hcLight:Xg},u(tf,20,"Dropdown border.")),Cf=Fg("button.foreground",{dark:Ng.white,light:Ng.white,hcDark:Ng.white,hcLight:Ng.white},u(tf,21,"Button foreground color.")),Sf=Fg("button.separator",{dark:zg(Cf,.4),light:zg(Cf,.4),hcDark:zg(Cf,.4),hcLight:zg(Cf,.4)},u(tf,22,"Button separator color.")),kf=Fg("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},u(tf,23,"Button background color.")),xf=Fg("button.hoverBackground",{dark:Bg(kf,.2),light:Pg(kf,.2),hcDark:kf,hcLight:kf},u(tf,24,"Button background color when hovering.")),Ef=Fg("button.border",{dark:Xg,light:Xg,hcDark:Xg,hcLight:Xg},u(tf,25,"Button border color.")),Df=Fg("button.secondaryForeground",{dark:Ng.white,light:Ng.white,hcDark:Ng.white,hcLight:jg},u(tf,26,"Secondary button foreground color.")),Lf=Fg("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Ng.white},u(tf,27,"Secondary button background color.")),If=Fg("button.secondaryHoverBackground",{dark:Bg(Lf,.2),light:Pg(Lf,.2),hcDark:null,hcLight:null},u(tf,28,"Secondary button background color when hovering.")),Tf=Fg("checkbox.background",{dark:vf,light:vf,hcDark:vf,hcLight:vf},u(tf,29,"Background color of checkbox widget."));Fg("checkbox.selectBackground",{dark:cp,light:cp,hcDark:cp,hcLight:cp},u(tf,30,"Background color of checkbox widget when the element it's in is selected."));const Nf=Fg("checkbox.foreground",{dark:_f,light:_f,hcDark:_f,hcLight:_f},u(tf,31,"Foreground color of checkbox widget.")),Af=Fg("checkbox.border",{dark:yf,light:yf,hcDark:yf,hcLight:yf},u(tf,32,"Border color of checkbox widget."));Fg("checkbox.selectBorder",{dark:Gg,light:Gg,hcDark:Gg,hcLight:Gg},u(tf,33,"Border color of checkbox widget when the element it's in is selected."));const Mf=Fg("keybindingLabel.background",{dark:new Ng(new Lg(128,128,128,.17)),light:new Ng(new Lg(221,221,221,.4)),hcDark:Ng.transparent,hcLight:Ng.transparent},u(tf,34,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Rf=Fg("keybindingLabel.foreground",{dark:Ng.fromHex("#CCCCCC"),light:Ng.fromHex("#555555"),hcDark:Ng.white,hcLight:jg},u(tf,35,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Of=Fg("keybindingLabel.border",{dark:new Ng(new Lg(51,51,51,.6)),light:new Ng(new Lg(204,204,204,.4)),hcDark:new Ng(new Lg(111,195,223)),hcLight:Xg},u(tf,36,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Ff=Fg("keybindingLabel.bottomBorder",{dark:new Ng(new Lg(68,68,68,.6)),light:new Ng(new Lg(187,187,187,.4)),hcDark:new Ng(new Lg(111,195,223)),hcLight:jg},u(tf,37,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Pf="vs/platform/theme/common/colors/listColors",Bf=Fg("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,0,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),zf=Fg("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,1,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Wf=Fg("list.focusOutline",{dark:Yg,light:Yg,hcDark:Qg,hcLight:Qg},u(Pf,2,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Hf=Fg("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,3,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Vf=Fg("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Ng.fromHex("#0F4A85").transparent(.1)},u(Pf,4,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Uf=Fg("list.activeSelectionForeground",{dark:Ng.white,light:Ng.white,hcDark:null,hcLight:null},u(Pf,5,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Kf=Fg("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,6,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),qf=Fg("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Ng.fromHex("#0F4A85").transparent(.1)},u(Pf,7,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),$f=Fg("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,8,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jf=Fg("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,9,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Gf=Fg("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,10,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Yf=Fg("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,11,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Xf=Fg("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Ng.white.transparent(.1),hcLight:Ng.fromHex("#0F4A85").transparent(.1)},u(Pf,12,"List/Tree background when hovering over items using the mouse.")),Qf=Fg("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(Pf,13,"List/Tree foreground when hovering over items using the mouse.")),Zf=Fg("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},u(Pf,14,"List/Tree drag and drop background when moving items over other items when using the mouse.")),Jf=Fg("list.dropBetweenBackground",{dark:Gg,light:Gg,hcDark:null,hcLight:null},u(Pf,15,"List/Tree drag and drop border color when moving items between items when using the mouse.")),em=Fg("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Yg,hcLight:Yg},u(Pf,16,"List/Tree foreground color of the match highlights when searching inside the list/tree."));Fg("list.focusHighlightForeground",{dark:em,light:(tm=Vf,im=em,nm="#BBE7FF",{op:6,if:tm,then:im,else:nm}),hcDark:em,hcLight:em},u(Pf,17,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));var tm,im,nm;Fg("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},u(Pf,18,"List/Tree foreground color for invalid items, for example an unresolved root in explorer."));const sm=Fg("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},u(Pf,19,"Foreground color of list items containing errors.")),om=(Fg("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},u(Pf,20,"Foreground color of list items containing warnings.")),Fg("listFilterWidget.background",{light:Pg(cp,0),dark:Bg(cp,0),hcDark:cp,hcLight:cp},u(Pf,21,"Background color of the type filter widget in lists and trees."))),rm=Fg("listFilterWidget.outline",{dark:Ng.transparent,light:Ng.transparent,hcDark:"#f38518",hcLight:"#007ACC"},u(Pf,22,"Outline color of the type filter widget in lists and trees.")),am=Fg("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Xg,hcLight:Xg},u(Pf,23,"Outline color of the type filter widget in lists and trees, when there are no matches.")),lm=Fg("listFilterWidget.shadow",{dark:Np,light:Np,hcDark:Np,hcLight:Np},u(Pf,24,"Shadow color of the type filter widget in lists and trees."));Fg("list.filterMatchBackground",{dark:Cp,light:Cp,hcDark:null,hcLight:null},u(Pf,25,"Background color of the filtered match.")),Fg("list.filterMatchBorder",{dark:Sp,light:Sp,hcDark:Xg,hcLight:Qg},u(Pf,26,"Border color of the filtered match."));Fg("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},u(Pf,27,"List/Tree foreground color for items that are deemphasized."));const hm=Fg("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},u(Pf,28,"Tree stroke color for the indentation guides.")),cm=Fg("tree.inactiveIndentGuidesStroke",{dark:zg(hm,.4),light:zg(hm,.4),hcDark:zg(hm,.4),hcLight:zg(hm,.4)},u(Pf,29,"Tree stroke color for the indentation guides that are not active.")),dm=Fg("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},u(Pf,30,"Table border color between columns.")),um=Fg("tree.tableOddRowsBackground",{dark:zg(jg,.04),light:zg(jg,.04),hcDark:null,hcLight:null},u(Pf,31,"Background color for odd table rows.")),gm="vs/platform/theme/common/colors/menuColors",pm=Fg("menu.border",{dark:null,light:null,hcDark:Xg,hcLight:Xg},u(gm,0,"Border color of menus.")),fm=Fg("menu.foreground",{dark:_f,light:_f,hcDark:_f,hcLight:_f},u(gm,1,"Foreground color of menu items.")),mm=Fg("menu.background",{dark:vf,light:vf,hcDark:vf,hcLight:vf},u(gm,2,"Background color of menu items.")),bm=Fg("menu.selectionForeground",{dark:Uf,light:Uf,hcDark:Uf,hcLight:Uf},u(gm,3,"Foreground color of the selected menu item in menus.")),vm=Fg("menu.selectionBackground",{dark:Vf,light:Vf,hcDark:Vf,hcLight:Vf},u(gm,4,"Background color of the selected menu item in menus.")),wm=Fg("menu.selectionBorder",{dark:null,light:null,hcDark:Qg,hcLight:Qg},u(gm,5,"Border color of the selected menu item in menus.")),_m=Fg("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Xg,hcLight:Xg},u(gm,6,"Color of a separator menu item in menus.")),ym="vs/platform/theme/common/colors/quickpickColors",Cm=Fg("quickInput.background",{dark:cp,light:cp,hcDark:cp,hcLight:cp},u(ym,0,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Sm=Fg("quickInput.foreground",{dark:dp,light:dp,hcDark:dp,hcLight:dp},u(ym,1,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),km=Fg("quickInputTitle.background",{dark:new Ng(new Lg(255,255,255,.105)),light:new Ng(new Lg(0,0,0,.06)),hcDark:"#000000",hcLight:Ng.white},u(ym,2,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),xm=Fg("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Ng.white,hcLight:"#0F4A85"},u(ym,3,"Quick picker color for grouping labels.")),Em=Fg("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Ng.white,hcLight:"#0F4A85"},u(ym,4,"Quick picker color for grouping borders.")),Dm=Fg("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,u(ym,5,"Please use quickInputList.focusBackground instead")),Lm=Fg("quickInputList.focusForeground",{dark:Uf,light:Uf,hcDark:Uf,hcLight:Uf},u(ym,6,"Quick picker foreground color for the focused item.")),Im=Fg("quickInputList.focusIconForeground",{dark:Kf,light:Kf,hcDark:Kf,hcLight:Kf},u(ym,7,"Quick picker icon foreground color for the focused item.")),Tm=Fg("quickInputList.focusBackground",{dark:Wg(Dm,Vf),light:Wg(Dm,Vf),hcDark:null,hcLight:null},u(ym,8,"Quick picker background color for the focused item.")),Nm="vs/platform/theme/common/colors/searchColors";Fg("search.resultsInfoForeground",{light:jg,dark:zg(jg,.65),hcDark:jg,hcLight:jg},u(Nm,0,"Color of the text in the search viewlet's completion message.")),Fg("searchEditor.findMatchBackground",{light:zg(Cp,.66),dark:zg(Cp,.66),hcDark:Cp,hcLight:Cp},u(Nm,1,"Color of the Search Editor query matches.")),Fg("searchEditor.findMatchBorder",{light:zg(Sp,.66),dark:zg(Sp,.66),hcDark:Sp,hcLight:Sp},u(Nm,2,"Border color of the Search Editor query matches."));const Am=o("hoverService"),Mm=o("contextViewService"),Rm=o("contextMenuService");var Om=[],Fm=[];function Pm(e,t){if(e&&"undefined"!=typeof document){var i,n=!0===t.prepend?"prepend":"append",s=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(s){var r=Om.indexOf(o);-1===r&&(r=Om.push(o)-1,Fm[r]={}),i=Fm[r]&&Fm[r][n]?Fm[r][n]:Fm[r][n]=a()}else i=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var i=Object.keys(t.attributes),s=0;s<i.length;s++)e.setAttribute(i[s],t.attributes[i[s]]);var r="prepend"===n?"afterbegin":"beforeend";return o.insertAdjacentElement(r,e),e}}Pm('.monaco-workbench .workbench-hover{background:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);border-radius:3px;box-shadow:0 2px 8px var(--vscode-widget-shadow);color:var(--vscode-editorHoverWidget-foreground);font-size:13px;line-height:19px;max-width:700px;overflow:hidden;position:relative;z-index:40}.monaco-workbench .workbench-hover hr{border-bottom:none}.monaco-workbench .workbench-hover:not(.skip-fade-in){animation:fadein .1s linear}.monaco-workbench .workbench-hover.compact{font-size:12px}.monaco-workbench .workbench-hover.compact .hover-contents{padding:2px 8px}.monaco-workbench .workbench-hover-container.locked .workbench-hover{outline:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .workbench-hover-container.locked .workbench-hover:focus,.monaco-workbench .workbench-hover-lock:focus{outline:1px solid var(--vscode-focusBorder)}.monaco-workbench .workbench-hover-container.locked .workbench-hover-lock:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-workbench .workbench-hover-pointer{pointer-events:none;position:absolute;z-index:41}.monaco-workbench .workbench-hover-pointer:after{background-color:var(--vscode-editorHoverWidget-background);border-bottom:1px solid var(--vscode-editorHoverWidget-border);border-right:1px solid var(--vscode-editorHoverWidget-border);content:"";height:5px;position:absolute;width:5px}.monaco-workbench .locked .workbench-hover-pointer:after{border-bottom-width:2px;border-right-width:2px;height:4px;width:4px}.monaco-workbench .workbench-hover-pointer.left{left:-3px}.monaco-workbench .workbench-hover-pointer.right{right:3px}.monaco-workbench .workbench-hover-pointer.top{top:-3px}.monaco-workbench .workbench-hover-pointer.bottom{bottom:3px}.monaco-workbench .workbench-hover-pointer.left:after{transform:rotate(135deg)}.monaco-workbench .workbench-hover-pointer.right:after{transform:rotate(315deg)}.monaco-workbench .workbench-hover-pointer.top:after{transform:rotate(225deg)}.monaco-workbench .workbench-hover-pointer.bottom:after{transform:rotate(45deg)}.monaco-workbench .workbench-hover a{color:var(--vscode-textLink-foreground)}.monaco-workbench .workbench-hover a:focus{outline:1px solid;outline-color:var(--vscode-focusBorder);outline-offset:-1px;text-decoration:underline}.monaco-workbench .workbench-hover a:active,.monaco-workbench .workbench-hover a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-workbench .workbench-hover code{background:var(--vscode-textCodeBlock-background)}.monaco-workbench .workbench-hover .hover-row .actions{background:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-workbench .workbench-hover.right-aligned{left:1px}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions{flex-direction:row-reverse}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions .action-container{margin-left:16px;margin-right:0}',{});const Bm=o("keybindingService"),zm={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},Wm="vs/editor/common/config/editorOptions";class Hm{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Vm{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return Km(e,t)}compute(e,t,i){return i}}class Um{constructor(e,t){this.newValue=e,this.didChange=t}}function Km(e,t){if("object"!=typeof e||"object"!=typeof t||!e||!t)return new Um(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&at(e,t);return new Um(t,!i)}let i=!1;for(const n in t)if(t.hasOwnProperty(n)){const s=Km(e[n],t[n]);s.didChange&&(e[n]=s.newValue,i=!0)}return new Um(e,i)}class qm{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Km(e,t)}validate(e){return this.defaultValue}}class $m{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return Km(e,t)}validate(e){return void 0===e?this.defaultValue:e}compute(e,t,i){return i}}function jm(e,t){return void 0===e?t:"false"!==e&&Boolean(e)}class Gm extends $m{constructor(e,t,i,n=void 0){void 0!==n&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return jm(e,this.defaultValue)}}class Ym extends $m{static clampedInt(e,t,i,n){return function(e,t,i,n){if(void 0===e)return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(n,s),0|s)}(e,t,i,n)}constructor(e,t,i,n,s,o=void 0){void 0!==o&&(o.type="integer",o.default=i,o.minimum=n,o.maximum=s),super(e,t,i,o),this.minimum=n,this.maximum=s}validate(e){return Ym.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Xm extends $m{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if("number"==typeof e)return e;if(void 0===e)return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,s){void 0!==s&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=n}validate(e){return this.validationFn(Xm.float(e,this.defaultValue))}}class Qm extends $m{static string(e,t){return"string"!=typeof e?t:e}constructor(e,t,i,n=void 0){void 0!==n&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return Qm.string(e,this.defaultValue)}}function Zm(e,t,i,n){return"string"!=typeof e?t:n&&e in n?n[e]:-1===i.indexOf(e)?t:e}class Jm extends $m{constructor(e,t,i,n,s=void 0){void 0!==s&&(s.type="string",s.enum=n,s.default=i),super(e,t,i,s),this._allowedValues=n}validate(e){return Zm(e,this.defaultValue,this._allowedValues)}}class eb extends Vm{constructor(e,t,i,n,s,o,r=void 0){void 0!==r&&(r.type="string",r.enum=s,r.default=n),super(e,t,i,r),this._allowedValues=s,this._convert=o}validate(e){return"string"!=typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}var tb,ib;!function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(tb||(tb={}));class nb extends Vm{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(51,"fontLigatures",nb.OFF,{anyOf:[{type:"boolean",description:u(Wm,19,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:u(Wm,20,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:u(Wm,21,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e||0===e.length?nb.OFF:"true"===e?nb.ON:e:Boolean(e)?nb.ON:nb.OFF}}class sb extends Vm{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(54,"fontVariations",sb.OFF,{anyOf:[{type:"boolean",description:u(Wm,22,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:u(Wm,23,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:u(Wm,24,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return void 0===e?this.defaultValue:"string"==typeof e?"false"===e?sb.OFF:"true"===e?sb.TRANSLATE:e:Boolean(e)?sb.TRANSLATE:sb.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}}class ob extends Vm{static{this.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.MINIMUM_VALUE=1}static{this.MAXIMUM_VALUE=1e3}constructor(){super(53,"fontWeight",bb.fontWeight,{anyOf:[{type:"number",minimum:ob.MINIMUM_VALUE,maximum:ob.MAXIMUM_VALUE,errorMessage:u(Wm,26,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ob.SUGGESTION_VALUES}],default:bb.fontWeight,description:u(Wm,27,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return"normal"===e||"bold"===e?e:String(Ym.clampedInt(e,bb.fontWeight,ob.MINIMUM_VALUE,ob.MAXIMUM_VALUE))}}class rb extends qm{constructor(){super(145)}compute(e,t,i){return rb.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const s=(i+e.viewLineCount+n)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:Math.floor(e.viewLineCount/s)}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const o=t.stableMinimapLayoutInput,r=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,a=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,c=e.minimap.renderCharacters;let d=s>=2?Math.round(2*e.minimap.scale):e.minimap.scale;const u=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,f=e.verticalScrollbarWidth,m=e.viewLineCount,b=e.remainingWidth,v=e.isViewportWrapping,w=c?2:3;let _=Math.floor(s*n);const y=_/s;let C=!1,S=!1,k=w*d,x=d/s,E=1;if("fill"===g||"fit"===g){const{typicalViewportLineCount:i,extraLinesBeforeFirstLine:o,extraLinesBeyondLastLine:l,desiredRatio:c,minimapLineCount:u}=rb.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:h,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:a,pixelRatio:s});if(m/u>1)C=!0,S=!0,d=1,k=1,x=d/s;else{let n=!1,h=d+1;if("fit"===g){const e=Math.ceil((o+m+l)*k);v&&r&&b<=t.stableFitRemainingWidth?(n=!0,h=t.stableFitMaxMinimapScale):n=e>_}if("fill"===g||n){C=!0;const n=d;k=Math.min(a*s,Math.max(1,Math.floor(1/c))),v&&r&&b<=t.stableFitRemainingWidth&&(h=t.stableFitMaxMinimapScale),d=Math.min(h,Math.max(1,Math.floor(k/w))),d>n&&(E=Math.min(2,d/n)),x=d/s/E,_=Math.ceil(Math.max(i,o+m+l)*k),v?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const D=Math.floor(u*x),L=Math.min(D,Math.max(0,Math.floor((b-f-2)*x/(l+x)))+8);let I=Math.floor(s*L);const T=I/s;I=Math.floor(I*E);return{renderMinimap:c?1:2,minimapLeft:"left"===p?0:i-L-f,minimapWidth:L,minimapHeightIsEditorHeight:C,minimapIsSampling:S,minimapScale:d,minimapLineHeight:k,minimapCanvasInnerWidth:I,minimapCanvasInnerHeight:_,minimapCanvasOuterWidth:T,minimapCanvasOuterHeight:y}}static computeLayout(e,t){const i=0|t.outerWidth,n=0|t.outerHeight,s=0|t.lineHeight,o=0|t.lineNumbersDigitCount,r=t.typicalHalfwidthCharacterWidth,a=t.maxDigitWidth,l=t.pixelRatio,h=t.viewLineCount,c=e.get(137),d="inherit"===c?e.get(136):c,u="inherit"===d?e.get(132):d,g=e.get(135),p=t.isDominatedByLongLines,f=e.get(57),m=0!==e.get(68).renderType,b=e.get(69),v=e.get(105),w=e.get(84),_=e.get(73),y=e.get(103),C=y.verticalScrollbarSize,S=y.verticalHasArrows,k=y.arrowSize,x=y.horizontalScrollbarSize,E=e.get(43),D="never"!==e.get(110);let L=e.get(66);E&&D&&(L+=16);let I=0;if(m){const e=Math.max(o,b);I=Math.round(e*a)}let T=0;f&&(T=s*t.glyphMarginDecorationLaneCount);let N=0,A=N+T,M=A+I,R=M+L;const O=i-T-I-L;let F=!1,P=!1,B=-1;"inherit"===d&&p?(F=!0,P=!0):"on"===u||"bounded"===u?P=!0:"wordWrapColumn"===u&&(B=g);const z=rb._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:s,typicalHalfwidthCharacterWidth:r,pixelRatio:l,scrollBeyondLastLine:v,paddingTop:w.top,paddingBottom:w.bottom,minimap:_,verticalScrollbarWidth:C,viewLineCount:h,remainingWidth:O,isViewportWrapping:P},t.memory||new Hm);0!==z.renderMinimap&&0===z.minimapLeft&&(N+=z.minimapWidth,A+=z.minimapWidth,M+=z.minimapWidth,R+=z.minimapWidth);const W=O-z.minimapWidth,H=Math.max(1,Math.floor((W-C-2)/r)),V=S?k:0;return P&&(B=Math.max(1,H),"bounded"===u&&(B=Math.min(B,g))),{width:i,height:n,glyphMarginLeft:N,glyphMarginWidth:T,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:A,lineNumbersWidth:I,decorationsLeft:M,decorationsWidth:L,contentLeft:R,contentWidth:W,minimap:z,viewportColumn:H,isWordWrapMinified:F,isViewportWrapping:P,wrappingColumn:B,verticalScrollbarWidth:C,horizontalScrollbarHeight:x,overviewRuler:{top:V,width:C,height:n-2*V,right:0}}}}!function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(ib||(ib={}));function ab(e,t){if("string"!=typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}const lb="inUntrustedWorkspace",hb="editor.unicodeHighlight.allowedCharacters",cb="editor.unicodeHighlight.invisibleCharacters",db="editor.unicodeHighlight.nonBasicASCII",ub="editor.unicodeHighlight.ambiguousCharacters",gb="editor.unicodeHighlight.includeComments",pb="editor.unicodeHighlight.includeStrings",fb="editor.unicodeHighlight.allowedLocales";function mb(e,t,i){const n=i.indexOf(e);return-1===n?t:i[n]}const bb={fontFamily:M?"Menlo, Monaco, 'Courier New', monospace":R?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:M?12:14,lineHeight:0,letterSpacing:0},vb=[];function wb(e){return vb[e.id]=e,e}wb(new Gm(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:u(Wm,213,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),wb(new Jm(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",u(Wm,214,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:u(Wm,215,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),wb(new class extends Vm{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[u(Wm,0,"Use platform APIs to detect when a Screen Reader is attached."),u(Wm,1,"Optimize for usage with a Screen Reader."),u(Wm,2,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:u(Wm,3,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return 0===i?e.accessibilitySupport:i}}),wb(new Ym(3,"accessibilityPageSize",10,1,1073741824,{description:u(Wm,216,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),wb(new Qm(4,"ariaLabel",u(Wm,217,"Editor content"))),wb(new Gm(5,"ariaRequired",!1,void 0)),wb(new Gm(8,"screenReaderAnnounceInlineSuggestion",!0,{description:u(Wm,218,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),wb(new Jm(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",u(Wm,219,"Use language configurations to determine when to autoclose brackets."),u(Wm,220,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:u(Wm,221,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),wb(new Jm(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",u(Wm,222,"Use language configurations to determine when to autoclose comments."),u(Wm,223,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:u(Wm,224,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),wb(new Jm(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",u(Wm,225,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:u(Wm,226,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),wb(new Jm(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",u(Wm,227,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:u(Wm,228,"Controls whether the editor should type over closing quotes or brackets.")})),wb(new Jm(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",u(Wm,229,"Use language configurations to determine when to autoclose quotes."),u(Wm,230,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:u(Wm,231,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),wb(new eb(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[u(Wm,232,"The editor will not insert indentation automatically."),u(Wm,233,"The editor will keep the current line's indentation."),u(Wm,234,"The editor will keep the current line's indentation and honor language defined brackets."),u(Wm,235,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),u(Wm,236,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:u(Wm,237,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),wb(new Gm(13,"automaticLayout",!1)),wb(new Jm(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[u(Wm,238,"Use language configurations to determine when to automatically surround selections."),u(Wm,239,"Surround with quotes but not brackets."),u(Wm,240,"Surround with brackets but not quotes."),""],description:u(Wm,241,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),wb(new class extends Vm{constructor(){const e={enabled:zm.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:zm.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:u(Wm,133,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:u(Wm,134,"Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:jm(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),wb(new class extends Vm{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[u(Wm,135,"Enables bracket pair guides."),u(Wm,136,"Enables bracket pair guides only for the active bracket pair."),u(Wm,137,"Disables bracket pair guides.")],default:e.bracketPairs,description:u(Wm,138,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[u(Wm,139,"Enables horizontal guides as addition to vertical bracket pair guides."),u(Wm,140,"Enables horizontal guides only for the active bracket pair."),u(Wm,141,"Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:u(Wm,142,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:u(Wm,143,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:u(Wm,144,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[u(Wm,145,"Highlights the active indent guide."),u(Wm,146,"Highlights the active indent guide even if bracket guides are highlighted."),u(Wm,147,"Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:u(Wm,148,"Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{bracketPairs:mb(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:mb(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:jm(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:jm(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:mb(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),wb(new Gm(116,"stickyTabStops",!1,{description:u(Wm,242,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),wb(new Gm(17,"codeLens",!0,{description:u(Wm,243,"Controls whether the editor shows CodeLens.")})),wb(new Qm(18,"codeLensFontFamily","",{description:u(Wm,244,"Controls the font family for CodeLens.")})),wb(new Ym(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:u(Wm,245,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),wb(new Gm(20,"colorDecorators",!0,{description:u(Wm,246,"Controls whether the editor should render the inline color decorators and color picker.")})),wb(new Jm(148,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[u(Wm,247,"Make the color picker appear both on click and hover of the color decorator"),u(Wm,248,"Make the color picker appear on hover of the color decorator"),u(Wm,249,"Make the color picker appear on click of the color decorator")],description:u(Wm,250,"Controls the condition to make a color picker appear from a color decorator")})),wb(new Ym(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:u(Wm,251,"Controls the max number of color decorators that can be rendered in an editor at once.")})),wb(new Gm(22,"columnSelection",!1,{description:u(Wm,252,"Enable that the selection with the mouse and keys is doing column selection.")})),wb(new class extends Vm{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:u(Wm,4,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:u(Wm,5,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{insertSpace:jm(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:jm(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),wb(new Gm(24,"contextmenu",!0)),wb(new Gm(25,"copyWithSyntaxHighlighting",!0,{description:u(Wm,253,"Controls whether syntax highlighting should be copied into the clipboard.")})),wb(new eb(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:u(Wm,254,"Control the cursor animation style.")})),wb(new Jm(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[u(Wm,255,"Smooth caret animation is disabled."),u(Wm,256,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),u(Wm,257,"Smooth caret animation is always enabled.")],description:u(Wm,258,"Controls whether the smooth caret animation should be enabled.")})),wb(new eb(28,"cursorStyle",tb.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(e){switch(e){case"line":return tb.Line;case"block":return tb.Block;case"underline":return tb.Underline;case"line-thin":return tb.LineThin;case"block-outline":return tb.BlockOutline;case"underline-thin":return tb.UnderlineThin}}),{description:u(Wm,259,"Controls the cursor style.")})),wb(new Ym(29,"cursorSurroundingLines",0,0,1073741824,{description:u(Wm,260,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),wb(new Jm(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[u(Wm,261,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),u(Wm,262,"`cursorSurroundingLines` is enforced always.")],markdownDescription:u(Wm,263,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),wb(new Ym(31,"cursorWidth",0,0,1073741824,{markdownDescription:u(Wm,264,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),wb(new Gm(32,"disableLayerHinting",!1)),wb(new Gm(33,"disableMonospaceOptimizations",!1)),wb(new Gm(34,"domReadOnly",!1)),wb(new Gm(35,"dragAndDrop",!0,{description:u(Wm,265,"Controls whether the editor should allow moving selections via drag and drop.")})),wb(new class extends Gm{constructor(){super(37,"emptySelectionClipboard",!0,{description:u(Wm,6,"Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}),wb(new class extends Vm{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:u(Wm,205,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:u(Wm,206,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[u(Wm,207,"Show the drop selector widget after a file is dropped into the editor."),u(Wm,208,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),showDropSelector:Zm(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),wb(new class extends Vm{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(115,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:u(Wm,54,"Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:u(Wm,55,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:u(Wm,56,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:u(Wm,57,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),maxLineCount:Ym.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Zm(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:jm(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}),wb(new Jm(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[u(Wm,266,"Use a new rendering method with svgs."),u(Wm,267,"Use a new rendering method with font characters."),u(Wm,268,"Use the stable rendering method.")],description:u(Wm,269,"Controls whether whitespace is rendered with a new, experimental method.")})),wb(new Qm(39,"extraEditorClassName","")),wb(new Xm(40,"fastScrollSensitivity",5,(e=>e<=0?5:e),{markdownDescription:u(Wm,270,"Scrolling speed multiplier when pressing `Alt`.")})),wb(new class extends Vm{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:u(Wm,7,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[u(Wm,8,"Never seed search string from the editor selection."),u(Wm,9,"Always seed search string from the editor selection, including word at cursor position."),u(Wm,10,"Only seed search string from the editor selection.")],description:u(Wm,11,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[u(Wm,12,"Never turn on Find in Selection automatically (default)."),u(Wm,13,"Always turn on Find in Selection automatically."),u(Wm,14,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:u(Wm,15,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:u(Wm,16,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:M},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:u(Wm,17,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:u(Wm,18,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{cursorMoveOnType:jm(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"==typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":Zm(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"==typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":Zm(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:jm(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:jm(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:jm(t.loop,this.defaultValue.loop)}}}),wb(new Gm(42,"fixedOverflowWidgets",!1)),wb(new Gm(43,"folding",!0,{description:u(Wm,271,"Controls whether the editor has code folding enabled.")})),wb(new Jm(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[u(Wm,272,"Use a language-specific folding strategy if available, else the indentation-based one."),u(Wm,273,"Use the indentation-based folding strategy.")],description:u(Wm,274,"Controls the strategy for computing folding ranges.")})),wb(new Gm(45,"foldingHighlight",!0,{description:u(Wm,275,"Controls whether the editor should highlight folded ranges.")})),wb(new Gm(46,"foldingImportsByDefault",!1,{description:u(Wm,276,"Controls whether the editor automatically collapses import ranges.")})),wb(new Ym(47,"foldingMaximumRegions",5e3,10,65e3,{description:u(Wm,277,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),wb(new Gm(48,"unfoldOnClickAfterEndOfLine",!1,{description:u(Wm,278,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),wb(new Qm(49,"fontFamily",bb.fontFamily,{description:u(Wm,279,"Controls the font family.")})),wb(new class extends qm{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}),wb(new nb),wb(new class extends $m{constructor(){super(52,"fontSize",bb.fontSize,{type:"number",minimum:6,maximum:100,default:bb.fontSize,description:u(Wm,25,"Controls the font size in pixels.")})}validate(e){const t=Xm.float(e,this.defaultValue);return 0===t?bb.fontSize:Xm.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}),wb(new ob),wb(new sb),wb(new Gm(55,"formatOnPaste",!1,{description:u(Wm,280,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),wb(new Gm(56,"formatOnType",!1,{description:u(Wm,281,"Controls whether the editor should automatically format the line after typing.")})),wb(new Gm(57,"glyphMargin",!0,{description:u(Wm,282,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),wb(new class extends Vm{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[u(Wm,28,"Show Peek view of the results (default)"),u(Wm,29,"Go to the primary result and show a Peek view"),u(Wm,30,"Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:u(Wm,31,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:u(Wm,32,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:u(Wm,33,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:u(Wm,34,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:u(Wm,35,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:u(Wm,36,"Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:u(Wm,37,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:u(Wm,38,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:u(Wm,39,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:u(Wm,40,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:u(Wm,41,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{multiple:Zm(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Zm(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Zm(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Zm(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Zm(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Zm(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Qm.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Qm.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Qm.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Qm.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Qm.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}),wb(new Gm(59,"hideCursorInOverviewRuler",!1,{description:u(Wm,283,"Controls whether the cursor should be hidden in the overview ruler.")})),wb(new class extends Vm{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:u(Wm,42,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:u(Wm,43,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:u(Wm,44,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:u(Wm,45,"Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:u(Wm,46,"Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),delay:Ym.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:jm(t.sticky,this.defaultValue.sticky),hidingDelay:Ym.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:jm(t.above,this.defaultValue.above)}}}),wb(new Gm(61,"inDiffEditor",!1)),wb(new Xm(64,"letterSpacing",bb.letterSpacing,(e=>Xm.clamp(e,-5,20)),{description:u(Wm,284,"Controls the letter spacing in pixels.")})),wb(new class extends Vm{constructor(){const e={enabled:ib.On};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ib.Off,ib.OnCode,ib.On],default:e.enabled,enumDescriptions:[u(Wm,50,"Disable the code action menu."),u(Wm,51,"Show the code action menu when the cursor is on lines with code."),u(Wm,52,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:u(Wm,53,"Enables the Code Action lightbulb in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;return{enabled:Zm(e.enabled,this.defaultValue.enabled,[ib.Off,ib.OnCode,ib.On])}}}),wb(new class extends Vm{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){if("string"==typeof e&&/^\d+(\.\d+)?ch$/.test(e)){return-parseFloat(e.substring(0,e.length-2))}return Ym.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Ym.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}),wb(new class extends Xm{constructor(){super(67,"lineHeight",bb.lineHeight,(e=>Xm.clamp(e,0,150)),{markdownDescription:u(Wm,66,"Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})}compute(e,t,i){return e.fontInfo.lineHeight}}),wb(new class extends Vm{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[u(Wm,92,"Line numbers are not rendered."),u(Wm,93,"Line numbers are rendered as absolute number."),u(Wm,94,"Line numbers are rendered as distance in lines to cursor position."),u(Wm,95,"Line numbers are rendered every 10 lines.")],default:"on",description:u(Wm,96,"Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return void 0!==e&&("function"==typeof e?(t=4,i=e):t="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:t,renderFn:i}}}),wb(new Ym(69,"lineNumbersMinChars",5,1,300)),wb(new Gm(70,"linkedEditing",!1,{description:u(Wm,285,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),wb(new Gm(71,"links",!0,{description:u(Wm,286,"Controls whether the editor should detect links and make them clickable.")})),wb(new Jm(72,"matchBrackets","always",["always","near","never"],{description:u(Wm,287,"Highlight matching brackets.")})),wb(new class extends Vm{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:u(Wm,67,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:u(Wm,68,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[u(Wm,69,"The minimap has the same size as the editor contents (and might scroll)."),u(Wm,70,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),u(Wm,71,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:u(Wm,72,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:u(Wm,73,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:u(Wm,74,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:u(Wm,75,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:u(Wm,76,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:u(Wm,77,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:u(Wm,78,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:u(Wm,79,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:u(Wm,80,"Controls the font size of section headers in the minimap.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),autohide:jm(t.autohide,this.defaultValue.autohide),size:Zm(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Zm(t.side,this.defaultValue.side,["right","left"]),showSlider:Zm(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:jm(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ym.clampedInt(t.scale,1,1,3),maxColumn:Ym.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:jm(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:jm(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Xm.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32)}}}),wb(new Jm(74,"mouseStyle","text",["text","default","copy"])),wb(new Xm(75,"mouseWheelScrollSensitivity",1,(e=>0===e?1:e),{markdownDescription:u(Wm,288,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),wb(new Gm(76,"mouseWheelZoom",!1,{markdownDescription:M?u(Wm,289,"Zoom the font of the editor when using mouse wheel and holding `Cmd`."):u(Wm,290,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),wb(new Gm(77,"multiCursorMergeOverlapping",!0,{description:u(Wm,291,"Merge multiple cursors when they are overlapping.")})),wb(new eb(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(e){return"ctrlCmd"===e?M?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[u(Wm,292,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),u(Wm,293,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:u(Wm,294,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),wb(new Jm(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[u(Wm,295,"Each cursor pastes a single line of the text."),u(Wm,296,"Each cursor pastes the full text.")],markdownDescription:u(Wm,297,"Controls pasting when the line count of the pasted text matches the cursor count.")})),wb(new Ym(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:u(Wm,298,"Controls the max number of cursors that can be in an active editor at once.")})),wb(new Jm(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[u(Wm,299,"Does not highlight occurrences."),u(Wm,300,"Highlights occurrences only in the current file."),u(Wm,301,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:u(Wm,302,"Controls whether occurrences should be highlighted across open files.")})),wb(new Gm(82,"overviewRulerBorder",!0,{description:u(Wm,303,"Controls whether a border should be drawn around the overview ruler.")})),wb(new Ym(83,"overviewRulerLanes",3,0,3)),wb(new class extends Vm{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:u(Wm,81,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:u(Wm,82,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{top:Ym.clampedInt(t.top,0,0,1e3),bottom:Ym.clampedInt(t.bottom,0,0,1e3)}}}),wb(new class extends Vm{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:u(Wm,209,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:u(Wm,210,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[u(Wm,211,"Show the paste selector widget after content is pasted into the editor."),u(Wm,212,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),showPasteSelector:Zm(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}),wb(new class extends Vm{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:u(Wm,83,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:u(Wm,84,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),cycle:jm(t.cycle,this.defaultValue.cycle)}}}),wb(new Jm(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[u(Wm,304,"Focus the tree when opening peek"),u(Wm,305,"Focus the editor when opening peek")],description:u(Wm,306,"Controls whether to focus the inline editor or the tree in the peek widget.")})),wb(new Gm(88,"definitionLinkOpensInPeek",!1,{description:u(Wm,307,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),wb(new class extends Vm{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[u(Wm,85,"Quick suggestions show inside the suggest widget"),u(Wm,86,"Quick suggestions show as ghost text"),u(Wm,87,"Quick suggestions are disabled")]}];super(89,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:u(Wm,88,"Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:u(Wm,89,"Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:u(Wm,90,"Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:u(Wm,91,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if("boolean"==typeof e){const t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!=typeof e)return this.defaultValue;const{other:t,comments:i,strings:n}=e,s=["on","inline","off"];let o,r,a;return o="boolean"==typeof t?t?"on":"off":Zm(t,this.defaultValue.other,s),r="boolean"==typeof i?i?"on":"off":Zm(i,this.defaultValue.comments,s),a="boolean"==typeof n?n?"on":"off":Zm(n,this.defaultValue.strings,s),{other:o,comments:r,strings:a}}}),wb(new Ym(90,"quickSuggestionsDelay",10,0,1073741824,{description:u(Wm,308,"Controls the delay in milliseconds after which quick suggestions will show up.")})),wb(new Gm(91,"readOnly",!1)),wb(new class extends Vm{constructor(){super(92,"readOnlyMessage",undefined)}validate(e){return e&&"object"==typeof e?e:this.defaultValue}}),wb(new Gm(93,"renameOnType",!1,{description:u(Wm,309,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:u(Wm,310,"Deprecated, use `editor.linkedEditing` instead.")})),wb(new Gm(94,"renderControlCharacters",!0,{description:u(Wm,311,"Controls whether the editor should render control characters."),restricted:!0})),wb(new Jm(95,"renderFinalNewline",R?"dimmed":"on",["off","on","dimmed"],{description:u(Wm,312,"Render last line number when the file ends with a newline.")})),wb(new Jm(96,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",u(Wm,313,"Highlights both the gutter and the current line.")],description:u(Wm,314,"Controls how the editor should render the current line highlight.")})),wb(new Gm(97,"renderLineHighlightOnlyWhenFocus",!1,{description:u(Wm,315,"Controls if the editor should render the current line highlight only when the editor is focused.")})),wb(new Jm(98,"renderValidationDecorations","editable",["editable","on","off"])),wb(new Jm(99,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",u(Wm,316,"Render whitespace characters except for single spaces between words."),u(Wm,317,"Render whitespace characters only on selected text."),u(Wm,318,"Render only trailing whitespace characters."),""],description:u(Wm,319,"Controls how the editor should render whitespace characters.")})),wb(new Ym(100,"revealHorizontalRightPadding",15,0,1e3)),wb(new Gm(101,"roundedSelection",!0,{description:u(Wm,320,"Controls whether selections should have rounded corners.")})),wb(new class extends Vm{constructor(){const e=[],t={type:"number",description:u(Wm,97,"Number of monospace characters at which this editor ruler will render.")};super(102,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:u(Wm,98,"Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:u(Wm,99,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if("number"==typeof i)t.push({column:Ym.clampedInt(i,0,0,1e4),color:null});else if(i&&"object"==typeof i){const e=i;t.push({column:Ym.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort(((e,t)=>e.column-t.column)),t}return this.defaultValue}}),wb(new class extends Vm{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(103,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[u(Wm,100,"The vertical scrollbar will be visible only when necessary."),u(Wm,101,"The vertical scrollbar will always be visible."),u(Wm,102,"The vertical scrollbar will always be hidden.")],default:"auto",description:u(Wm,103,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[u(Wm,104,"The horizontal scrollbar will be visible only when necessary."),u(Wm,105,"The horizontal scrollbar will always be visible."),u(Wm,106,"The horizontal scrollbar will always be hidden.")],default:"auto",description:u(Wm,107,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:u(Wm,108,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:u(Wm,109,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:u(Wm,110,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:u(Wm,111,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e,i=Ym.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Ym.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ym.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:ab(t.vertical,this.defaultValue.vertical),horizontal:ab(t.horizontal,this.defaultValue.horizontal),useShadows:jm(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:jm(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:jm(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:jm(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:jm(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Ym.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Ym.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:jm(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:jm(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}),wb(new Ym(104,"scrollBeyondLastColumn",4,0,1073741824,{description:u(Wm,321,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),wb(new Gm(105,"scrollBeyondLastLine",!0,{description:u(Wm,322,"Controls whether the editor will scroll beyond the last line.")})),wb(new Gm(106,"scrollPredominantAxis",!0,{description:u(Wm,323,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),wb(new Gm(107,"selectionClipboard",!0,{description:u(Wm,324,"Controls whether the Linux primary clipboard should be supported."),included:R})),wb(new Gm(108,"selectionHighlight",!0,{description:u(Wm,325,"Controls whether the editor should highlight matches similar to the selection.")})),wb(new Gm(109,"selectOnLineNumbers",!0)),wb(new Jm(110,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[u(Wm,326,"Always show the folding controls."),u(Wm,327,"Never show the folding controls and reduce the gutter size."),u(Wm,328,"Only show the folding controls when the mouse is over the gutter.")],description:u(Wm,329,"Controls when the folding controls on the gutter are shown.")})),wb(new Gm(111,"showUnused",!0,{description:u(Wm,330,"Controls fading out of unused code.")})),wb(new Gm(140,"showDeprecated",!0,{description:u(Wm,331,"Controls strikethrough deprecated variables.")})),wb(new class extends Vm{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(141,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:u(Wm,58,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[u(Wm,59,"Inlay hints are enabled"),u(Wm,60,"Inlay hints are showing by default and hide when holding {0}",M?"Ctrl+Option":"Ctrl+Alt"),u(Wm,61,"Inlay hints are hidden by default and show when holding {0}",M?"Ctrl+Option":"Ctrl+Alt"),u(Wm,62,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:u(Wm,63,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:u(Wm,64,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:u(Wm,65,"Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return"boolean"==typeof t.enabled&&(t.enabled=t.enabled?"on":"off"),{enabled:Zm(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ym.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Qm.string(t.fontFamily,this.defaultValue.fontFamily),padding:jm(t.padding,this.defaultValue.padding)}}}),wb(new Jm(112,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[u(Wm,332,"Show snippet suggestions on top of other suggestions."),u(Wm,333,"Show snippet suggestions below other suggestions."),u(Wm,334,"Show snippets suggestions with other suggestions."),u(Wm,335,"Do not show snippet suggestions.")],description:u(Wm,336,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),wb(new class extends Vm{constructor(){super(113,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:u(Wm,197,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:u(Wm,198,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"==typeof e?{selectLeadingAndTrailingWhitespace:jm(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:jm(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}),wb(new Gm(114,"smoothScrolling",!1,{description:u(Wm,337,"Controls whether the editor will scroll using an animation.")})),wb(new Ym(117,"stopRenderingLineAfter",1e4,-1,1073741824)),wb(new class extends Vm{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(118,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[u(Wm,149,"Insert suggestion without overwriting text right of the cursor."),u(Wm,150,"Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:u(Wm,151,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:u(Wm,152,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:u(Wm,153,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:u(Wm,154,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[u(Wm,155,"Always select a suggestion when automatically triggering IntelliSense."),u(Wm,156,"Never select a suggestion when automatically triggering IntelliSense."),u(Wm,157,"Select a suggestion only when triggering IntelliSense from a trigger character."),u(Wm,158,"Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:u(Wm,159,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:u(Wm,160,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:u(Wm,161,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:u(Wm,162,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:u(Wm,163,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:u(Wm,164,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:u(Wm,165,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:u(Wm,166,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:u(Wm,167,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:u(Wm,168,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:u(Wm,169,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:u(Wm,170,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:u(Wm,171,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:u(Wm,172,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:u(Wm,173,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:u(Wm,174,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:u(Wm,175,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:u(Wm,176,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:u(Wm,177,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:u(Wm,178,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:u(Wm,179,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:u(Wm,180,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:u(Wm,181,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:u(Wm,182,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:u(Wm,183,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:u(Wm,184,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:u(Wm,185,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:u(Wm,186,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:u(Wm,187,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:u(Wm,188,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:u(Wm,189,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:u(Wm,190,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:u(Wm,191,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:u(Wm,192,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:u(Wm,193,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:u(Wm,194,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:u(Wm,195,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:u(Wm,196,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{insertMode:Zm(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:jm(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:jm(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:jm(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:jm(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Zm(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:jm(t.showIcons,this.defaultValue.showIcons),showStatusBar:jm(t.showStatusBar,this.defaultValue.showStatusBar),preview:jm(t.preview,this.defaultValue.preview),previewMode:Zm(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:jm(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:jm(t.showMethods,this.defaultValue.showMethods),showFunctions:jm(t.showFunctions,this.defaultValue.showFunctions),showConstructors:jm(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:jm(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:jm(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:jm(t.showFields,this.defaultValue.showFields),showVariables:jm(t.showVariables,this.defaultValue.showVariables),showClasses:jm(t.showClasses,this.defaultValue.showClasses),showStructs:jm(t.showStructs,this.defaultValue.showStructs),showInterfaces:jm(t.showInterfaces,this.defaultValue.showInterfaces),showModules:jm(t.showModules,this.defaultValue.showModules),showProperties:jm(t.showProperties,this.defaultValue.showProperties),showEvents:jm(t.showEvents,this.defaultValue.showEvents),showOperators:jm(t.showOperators,this.defaultValue.showOperators),showUnits:jm(t.showUnits,this.defaultValue.showUnits),showValues:jm(t.showValues,this.defaultValue.showValues),showConstants:jm(t.showConstants,this.defaultValue.showConstants),showEnums:jm(t.showEnums,this.defaultValue.showEnums),showEnumMembers:jm(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:jm(t.showKeywords,this.defaultValue.showKeywords),showWords:jm(t.showWords,this.defaultValue.showWords),showColors:jm(t.showColors,this.defaultValue.showColors),showFiles:jm(t.showFiles,this.defaultValue.showFiles),showReferences:jm(t.showReferences,this.defaultValue.showReferences),showFolders:jm(t.showFolders,this.defaultValue.showFolders),showTypeParameters:jm(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:jm(t.showSnippets,this.defaultValue.showSnippets),showUsers:jm(t.showUsers,this.defaultValue.showUsers),showIssues:jm(t.showIssues,this.defaultValue.showIssues)}}}),wb(new class extends Vm{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:u(Wm,119,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[u(Wm,120,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),u(Wm,121,"Show the inline suggestion toolbar when hovering over an inline suggestion."),u(Wm,122,"Never show the inline suggestion toolbar.")],description:u(Wm,123,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:u(Wm,124,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:u(Wm,125,"Controls the font family of the inline suggestions.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),mode:Zm(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Zm(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:jm(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:jm(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Qm.string(t.fontFamily,this.defaultValue.fontFamily)}}}),wb(new class extends Vm{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1,backgroundColoring:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:u(Wm,126,"Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[u(Wm,127,"Show the inline edit toolbar whenever an inline suggestion is shown."),u(Wm,128,"Show the inline edit toolbar when hovering over an inline suggestion."),u(Wm,129,"Never show the inline edit toolbar.")],description:u(Wm,130,"Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:u(Wm,131,"Controls the font family of the inline edit.")},"editor.experimentalInlineEdit.backgroundColoring":{type:"boolean",default:e.backgroundColoring,description:u(Wm,132,"Controls whether to color the background of inline edits.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{enabled:jm(t.enabled,this.defaultValue.enabled),showToolbar:Zm(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Qm.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:jm(t.keepOnBlur,this.defaultValue.keepOnBlur),backgroundColoring:jm(t.backgroundColoring,this.defaultValue.backgroundColoring)}}}),wb(new Gm(149,"inlineCompletionsAccessibilityVerbose",!1,{description:u(Wm,338,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),wb(new Ym(119,"suggestFontSize",0,0,1e3,{markdownDescription:u(Wm,339,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),wb(new Ym(120,"suggestLineHeight",0,0,1e3,{markdownDescription:u(Wm,340,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),wb(new Gm(121,"suggestOnTriggerCharacters",!0,{description:u(Wm,341,"Controls whether suggestions should automatically show up when typing trigger characters.")})),wb(new Jm(122,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[u(Wm,342,"Always select the first suggestion."),u(Wm,343,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),u(Wm,344,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:u(Wm,345,"Controls how suggestions are pre-selected when showing the suggest list.")})),wb(new Jm(123,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[u(Wm,346,"Tab complete will insert the best matching suggestion when pressing tab."),u(Wm,347,"Disable tab completions."),u(Wm,348,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:u(Wm,349,"Enables tab completions.")})),wb(new Ym(124,"tabIndex",0,-1,1073741824)),wb(new class extends Vm{constructor(){const e={nonBasicASCII:lb,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:lb,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(125,"unicodeHighlight",e,{[db]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,lb],default:e.nonBasicASCII,description:u(Wm,112,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[cb]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:u(Wm,113,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[ub]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:u(Wm,114,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[gb]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,lb],default:e.includeComments,description:u(Wm,115,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[pb]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,lb],default:e.includeStrings,description:u(Wm,116,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[hb]:{restricted:!0,type:"object",default:e.allowedCharacters,description:u(Wm,117,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[fb]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:u(Wm,118,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(qn(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(qn(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new Um(n.newValue,!0):n}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;const t=e;return{nonBasicASCII:mb(t.nonBasicASCII,lb,[!0,!1,lb]),invisibleCharacters:jm(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:jm(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:mb(t.includeComments,lb,[!0,!1,lb]),includeStrings:mb(t.includeStrings,lb,[!0,!1,lb]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if("object"!=typeof e||!e)return t;const i={};for(const[t,n]of Object.entries(e))!0===n&&(i[t]=!0);return i}}),wb(new Jm(126,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[u(Wm,350,"Unusual line terminators are automatically removed."),u(Wm,351,"Unusual line terminators are ignored."),u(Wm,352,"Unusual line terminators prompt to be removed.")],description:u(Wm,353,"Remove unusual line terminators that might cause problems.")})),wb(new Gm(127,"useShadowDOM",!0)),wb(new Gm(128,"useTabStops",!0,{description:u(Wm,354,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wb(new Jm(129,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[u(Wm,355,"Use the default line break rule."),u(Wm,356,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:u(Wm,357,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wb(new class extends Vm{constructor(){super(130,"wordSegmenterLocales",[],{anyOf:[{description:u(Wm,199,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:u(Wm,199,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if("string"==typeof e&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if("string"==typeof i)try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}),wb(new Qm(131,"wordSeparators",Ws,{description:u(Wm,358,"Characters that will be used as word separators when doing word related navigations or operations.")})),wb(new Jm(132,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[u(Wm,359,"Lines will never wrap."),u(Wm,360,"Lines will wrap at the viewport width."),u(Wm,361,"Lines will wrap at `#editor.wordWrapColumn#`."),u(Wm,362,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:u(Wm,363,"Controls how lines should wrap.")})),wb(new Qm(133,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wb(new Qm(134,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wb(new Ym(135,"wordWrapColumn",80,1,1073741824,{markdownDescription:u(Wm,364,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wb(new Jm(136,"wordWrapOverride1","inherit",["off","on","inherit"])),wb(new Jm(137,"wordWrapOverride2","inherit",["off","on","inherit"])),wb(new class extends qm{constructor(){super(142)}compute(e,t,i){const n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),"default"===t.get(74)?n.push("mouse-default"):"copy"===t.get(74)&&n.push("mouse-copy"),t.get(111)&&n.push("showUnused"),t.get(140)&&n.push("showDeprecated"),n.join(" ")}}),wb(new Gm(147,"defaultColorDecorators",!1,{markdownDescription:u(Wm,365,"Controls whether inline color decorations should be shown using the default document color provider")})),wb(new class extends qm{constructor(){super(143)}compute(e,t,i){return e.pixelRatio}}),wb(new Gm(144,"tabFocusMode",!1,{markdownDescription:u(Wm,366,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),wb(new rb),wb(new class extends qm{constructor(){super(146)}compute(e,t,i){const n=t.get(145);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}),wb(new class extends Vm{constructor(){super(138,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[u(Wm,200,"No indentation. Wrapped lines begin at column 1."),u(Wm,201,"Wrapped lines get the same indentation as the parent."),u(Wm,202,"Wrapped lines get +1 indentation toward the parent."),u(Wm,203,"Wrapped lines get +2 indentation toward the parent.")],description:u(Wm,204,"Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return 2===t.get(2)?0:i}}),wb(new class extends Vm{constructor(){super(139,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[u(Wm,47,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),u(Wm,48,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:u(Wm,49,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Zm(e,"simple",["simple","advanced"])}compute(e,t,i){return 2===t.get(2)?"advanced":i}});class _b{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=yb(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=yb(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=yb(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=yb(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=yb(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=yb(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=yb(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){const t=yb(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){const t=yb(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){const t=yb(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){const t=yb(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=yb(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=yb(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=yb(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function yb(e){return"number"==typeof e?`${e}px`:e}function Cb(e){return new _b(e)}class Sb{constructor(){this._hooks=new Xt,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=s;let o=e;try{e.setPointerCapture(t),this._hooks.add(Yt((()=>{try{e.releasePointerCapture(t)}catch(e){}})))}catch(t){o=lh(e)}this._hooks.add(_h(o,rc.POINTER_MOVE,(e=>{e.buttons===i?(e.preventDefault(),this._pointerMoveCallback(e)):this.stopMonitoring(!0)}))),this._hooks.add(_h(o,rc.POINTER_UP,(e=>this.stopMonitoring(!0))))}}var kb,xb,Eb;!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(kb||(kb={}));class Db extends Qt{static{this.SCROLL_FRICTION=-.005}static{this.HOLD_DELAY=700}static{this.CLEAR_TAP_COUNT_TIME=400}constructor(){super(),this.dispatched=!1,this.targets=new ii,this.ignoreTargets=new ii,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(oi.runAndSubscribe(fh,(({window:e,disposables:t})=>{t.add(_h(e.document,"touchstart",(e=>this.onTouchStart(e)),{passive:!1})),t.add(_h(e.document,"touchend",(t=>this.onTouchEnd(e,t)))),t.add(_h(e.document,"touchmove",(e=>this.onTouchMove(e)),{passive:!1}))}),{window:Gr,disposables:this._store}))}static addTarget(e){if(!Db.isTouchDevice())return Qt.None;Db.INSTANCE||(Db.INSTANCE=qt(new Db));return Yt(Db.INSTANCE.targets.push(e))}static ignoreTarget(e){if(!Db.isTouchDevice())return Qt.None;Db.INSTANCE||(Db.INSTANCE=qt(new Db));return Yt(Db.INSTANCE.ignoreTargets.push(e))}static isTouchDevice(){return"ontouchstart"in Gr||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const n=e.targetTouches.item(i);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:t,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[t],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};const s=this.newGestureEvent(kb.Start,n.target);s.pageX=n.pageX,s.pageY=n.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,o=t.changedTouches.length;s<o;s++){const o=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=Date.now()-r.initialTimeStamp;if(a<Db.HOLD_DELAY&&Math.abs(r.initialPageX-rt(r.rollingPageX))<30&&Math.abs(r.initialPageY-rt(r.rollingPageY))<30){const e=this.newGestureEvent(kb.Tap,r.initialTarget);e.pageX=rt(r.rollingPageX),e.pageY=rt(r.rollingPageY),this.dispatchEvent(e)}else if(a>=Db.HOLD_DELAY&&Math.abs(r.initialPageX-rt(r.rollingPageX))<30&&Math.abs(r.initialPageY-rt(r.rollingPageY))<30){const e=this.newGestureEvent(kb.Contextmenu,r.initialTarget);e.pageX=rt(r.rollingPageX),e.pageY=rt(r.rollingPageY),this.dispatchEvent(e)}else if(1===n){const t=rt(r.rollingPageX),n=rt(r.rollingPageY),s=rt(r.rollingTimestamps)-r.rollingTimestamps[0],o=t-r.rollingPageX[0],a=n-r.rollingPageY[0],l=[...this.targets].filter((e=>r.initialTarget instanceof Node&&e.contains(r.initialTarget)));this.inertia(e,l,i,Math.abs(o)/s,o>0?1:-1,t,Math.abs(a)/s,a>0?1:-1,n)}this.dispatchEvent(this.newGestureEvent(kb.End,r.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===kb.Tap){const t=(new Date).getTime();let i=0;i=t-this._lastSetTapCountTime>Db.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=t,e.tapCount=i}else e.type!==kb.Change&&e.type!==kb.Contextmenu||(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const t of this.ignoreTargets)if(t.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let n=0,s=e.initialTarget;for(;s&&s!==i;)n++,s=s.parentElement;t.push([n,i])}t.sort(((e,t)=>e[0]-t[0]));for(const[i,n]of t)n.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,n,s,o,r,a,l){this.handle=kh(e,(()=>{const h=Date.now(),c=h-i;let d=0,u=0,g=!0;n+=Db.SCROLL_FRICTION*c,r+=Db.SCROLL_FRICTION*c,n>0&&(g=!1,d=s*n*c),r>0&&(g=!1,u=a*r*c);const p=this.newGestureEvent(kb.Change);p.translationX=d,p.translationY=u,t.forEach((e=>e.dispatchEvent(p))),g||this.inertia(e,t,h,n,s,o+d,r,a,l+u)}))}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const n=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}const s=this.activeTouches[n.identifier],o=this.newGestureEvent(kb.Change,s.initialTarget);o.translationX=n.pageX-rt(s.rollingPageX),o.translationY=n.pageY-rt(s.rollingPageY),o.pageX=n.pageX,o.pageY=n.pageY,this.dispatchEvent(o),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(n.pageX),s.rollingPageY.push(n.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}class Lb extends Qt{onclick(e,t){this._register(_h(e,rc.CLICK,(i=>t(new Ia(lh(e),i)))))}onmousedown(e,t){this._register(_h(e,rc.MOUSE_DOWN,(i=>t(new Ia(lh(e),i)))))}onmouseover(e,t){this._register(_h(e,rc.MOUSE_OVER,(i=>t(new Ia(lh(e),i)))))}onmouseleave(e,t){this._register(_h(e,rc.MOUSE_LEAVE,(i=>t(new Ia(lh(e),i)))))}onkeydown(e,t){this._register(_h(e,rc.KEY_DOWN,(e=>t(new xa(e)))))}onkeyup(e,t){this._register(_h(e,rc.KEY_UP,(e=>t(new xa(e)))))}oninput(e,t){this._register(_h(e,rc.INPUT,t))}onblur(e,t){this._register(_h(e,rc.BLUR,t))}onfocus(e,t){this._register(_h(e,rc.FOCUS,t))}onchange(e,t){this._register(_h(e,rc.CHANGE,t))}ignoreGesture(e){return Db.ignoreTarget(e)}}!function(e){e.isThemeColor=function(e){return e&&"object"==typeof e&&"string"==typeof e.id}}(xb||(xb={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(e){const n=t.exec(e.id);if(!n)return i(wg.error);const[,s,o]=n,r=["codicon","codicon-"+s];return o&&r.push("codicon-modifier-"+o.substring(1)),r}e.asClassNameArray=i,e.asClassName=function(e){return i(e).join(" ")},e.asCSSSelector=function(e){return"."+i(e).join(".")},e.isThemeIcon=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(void 0===e.color||xb.isThemeColor(e.color))};const n=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);e.fromString=function(e){const t=n.exec(e);if(!t)return;const[,i]=t;return{id:i}},e.fromId=function(e){return{id:e}},e.modify=function(e,t){let i=e.id;const n=i.lastIndexOf("~");return-1!==n&&(i=i.substring(0,n)),t&&(i=`${i}~${t}`),{id:i}},e.getModifier=function(e){const t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function(e,t){return e.id===t.id&&e.color?.id===t.color?.id}}(Eb||(Eb={}));const Ib=11;class Tb extends Lb{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",void 0!==e.top&&(this.bgDomNode.style.top="0px"),void 0!==e.left&&(this.bgDomNode.style.left="0px"),void 0!==e.bottom&&(this.bgDomNode.style.bottom="0px"),void 0!==e.right&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Eb.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px",void 0!==e.top&&(this.domNode.style.top=e.top+"px"),void 0!==e.left&&(this.domNode.style.left=e.left+"px"),void 0!==e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),void 0!==e.right&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Sb),this._register(Ch(this.bgDomNode,rc.POINTER_DOWN,(e=>this._arrowPointerDown(e)))),this._register(Ch(this.domNode,rc.POINTER_DOWN,(e=>this._arrowPointerDown(e)))),this._pointerdownRepeatTimer=this._register(new xh),this._pointerdownScheduleRepeatTimer=this._register(new Ka)}_arrowPointerDown(e){if(!(e.target&&e.target instanceof Element))return;this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet((()=>{this._pointerdownRepeatTimer.cancelAndSet((()=>this._onActivate()),1e3/24,lh(e))}),200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>{}),(()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()})),e.preventDefault()}}class Nb extends Qt{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ka)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return 2!==this._visibility&&(3===this._visibility||this._rawShouldBeVisible)}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((()=>{this._domNode?.setClassName(this._visibleClassName)}),0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}class Ab extends Lb{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Nb(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Sb),this._shouldRender=!0,this.domNode=Cb(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(_h(this.domNode.domNode,rc.POINTER_DOWN,(e=>this._domNodePointerDown(e))))}_createArrow(e){const t=this._register(new Tb(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=Cb(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"==typeof i&&this.slider.setWidth(i),"number"==typeof n&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(_h(this.slider.domNode,rc.POINTER_DOWN,(e=>{0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}))),this.onclick(this.slider.domNode,(e=>{e.leftButton&&e.stopPropagation()}))}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=n?0===e.button&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&"number"==typeof e.offsetX&&"number"==typeof e.offsetY)t=e.offsetX,i=e.offsetY;else{const n=Ah(this.domNode.domNode);t=e.pageX-n.left,i=e.pageY-n.top}const n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!(e.target&&e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>{const s=this._sliderOrthogonalPointerPosition(e),o=Math.abs(s-i);if(A&&o>140)return void this._setDesiredScrollPositionNow(n.getScrollPosition());const r=this._sliderPointerPosition(e)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(r))}),(()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()})),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}class Mb{constructor(e,t,i,n,s,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=s,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Mb(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,s){const o=Math.max(0,i-e),r=Math.max(0,o-2*t),a=n>0&&n>i;if(!a)return{computedAvailableSize:Math.round(o),computedIsNeeded:a,computedSliderSize:Math.round(r),computedSliderRatio:0,computedSliderPosition:0};const l=Math.round(Math.max(20,Math.floor(i*r/n))),h=(r-l)/(n-i),c=s*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:a,computedSliderSize:Math.round(l),computedSliderRatio:h,computedSliderPosition:Math.round(c)}}_refreshComputedValues(){const e=Mb._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class Rb extends Ab{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new Mb(t.horizontalHasArrows?t.arrowSize:0,2===t.horizontal?0:t.horizontalScrollbarSize,2===t.vertical?0:t.verticalScrollbarSize,n.width,n.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const e=(t.arrowSize-Ib)/2,i=(t.horizontalScrollbarSize-Ib)/2;this._createArrow({className:"scra",icon:wg.scrollbarButtonLeft,top:i,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ta(null,1,0))}),this._createArrow({className:"scra",icon:wg.scrollbarButtonRight,top:i,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ta(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(2===e.horizontal?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class Ob extends Ab{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new Mb(t.verticalHasArrows?t.arrowSize:0,2===t.vertical?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const e=(t.arrowSize-Ib)/2,i=(t.verticalScrollbarSize-Ib)/2;this._createArrow({className:"scra",icon:wg.scrollbarButtonUp,top:e,left:i,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ta(null,0,1))}),this._createArrow({className:"scra",icon:wg.scrollbarButtonDown,top:void 0,left:i,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ta(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class Fb{constructor(e,t,i,n,s,o,r){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t|=0,i|=0,n|=0,s|=0,o|=0,r|=0),this.rawScrollLeft=n,this.rawScrollTop=r,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),s<0&&(s=0),r+s>o&&(r=o-s),r<0&&(r=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=s,this.scrollHeight=o,this.scrollTop=r}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new Fb(this._forceIntegerValues,void 0!==e.width?e.width:this.width,void 0!==e.scrollWidth?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,void 0!==e.height?e.height:this.height,void 0!==e.scrollHeight?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Fb(this._forceIntegerValues,this.width,this.scrollWidth,void 0!==e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,void 0!==e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,r=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:s,heightChanged:o,scrollHeightChanged:r,scrollTopChanged:a}}}class Pb extends Qt{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ui),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Fb(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:void 0===e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:void 0===e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;n=t?new Wb(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const t=this._state.withScrollPosition(e);this._smoothScrolling=Wb.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))}hasPendingScrollAnimation(){return Boolean(this._smoothScrolling)}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);return this._setState(t,!0),this._smoothScrolling?e.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))):void 0}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class Bb{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function zb(e,t){const i=t-e;return function(t){return e+i*function(e){return 1-function(e){return Math.pow(e,3)}(1-e)}(t)}}class Wb{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let r,a;return e<t?(r=e+.75*i,a=t-.75*i):(r=e-.75*i,a=t+.75*i),n=zb(e,r),s=zb(a,t),o=.33,function(e){return e<o?n(e/o):s((e-o)/(1-o))}}var n,s,o;return zb(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const e=this.scrollLeft(t),i=this.scrollTop(t);return new Bb(e,i,!1)}return new Bb(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return Wb.start(e,t,i)}static start(e,t,i){i+=10;const n=Date.now()-10;return new Wb(e,t,n,i)}}Pm(".monaco-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px!important}.monaco-scrollable-element>.visible{background:transparent;opacity:1;transition:opacity .1s linear;z-index:11}.monaco-scrollable-element>.invisible{opacity:0;pointer-events:none}.monaco-scrollable-element>.invisible.fade{transition:opacity .8s linear}.monaco-scrollable-element>.shadow{display:none;position:absolute}.monaco-scrollable-element>.shadow.top{box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;display:block;height:3px;left:3px;top:0;width:100%}.monaco-scrollable-element>.shadow.left{box-shadow:var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset;display:block;height:100%;left:0;top:3px;width:3px}.monaco-scrollable-element>.shadow.top-left-corner{display:block;height:3px;left:0;top:0;width:3px}.monaco-scrollable-element>.shadow.top.left{box-shadow:var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset}.monaco-scrollable-element>.scrollbar>.slider{background:var(--vscode-scrollbarSlider-background)}.monaco-scrollable-element>.scrollbar>.slider:hover{background:var(--vscode-scrollbarSlider-hoverBackground)}.monaco-scrollable-element>.scrollbar>.slider.active{background:var(--vscode-scrollbarSlider-activeBackground)}",{});class Hb{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class Vb{static{this.INSTANCE=new Vb}constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,t=0,i=1,n=this._rear;for(;;){const s=n===this._front?e:Math.pow(2,-i);if(e-=s,t+=this._memory[n].score*s,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}return t<=.5}acceptStandardWheelEvent(e){if(ea){const t=function(e){return Yr.INSTANCE.getZoomFactor(e)}(lh(e.browserEvent));this.accept(Date.now(),e.deltaX*t,e.deltaY*t)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null;const s=new Hb(e,t,i);-1===this._front&&-1===this._rear?(this._memory[0]=s,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if(this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(i+=.25),t){const n=Math.abs(e.deltaX),s=Math.abs(e.deltaY),o=Math.abs(t.deltaX),r=Math.abs(t.deltaY),a=Math.max(Math.min(n,o),1),l=Math.max(Math.min(s,r),1),h=Math.max(n,o),c=Math.max(s,r);h%a==0&&c%l==0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}class Ub extends Lb{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new ui),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ui),this.onWillScroll=this._onWillScroll.event,e.style.overflow="hidden",this._options=function(e){const t={lazyRender:void 0!==e.lazyRender&&e.lazyRender,className:void 0!==e.className?e.className:"",useShadows:void 0===e.useShadows||e.useShadows,handleMouseWheel:void 0===e.handleMouseWheel||e.handleMouseWheel,flipAxes:void 0!==e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:void 0!==e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:void 0!==e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:void 0!==e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:void 0!==e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:void 0!==e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:void 0===e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:void 0===e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:void 0!==e.arrowSize?e.arrowSize:11,listenOnDomNode:void 0!==e.listenOnDomNode?e.listenOnDomNode:null,horizontal:void 0!==e.horizontal?e.horizontal:1,horizontalScrollbarSize:void 0!==e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:void 0!==e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:void 0!==e.horizontalHasArrows&&e.horizontalHasArrows,vertical:void 0!==e.vertical?e.vertical:1,verticalScrollbarSize:void 0!==e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:void 0!==e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:void 0!==e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:void 0!==e.scrollByPage&&e.scrollByPage};t.horizontalSliderSize=void 0!==e.horizontalSliderSize?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=void 0!==e.verticalSliderSize?e.verticalSliderSize:t.verticalScrollbarSize,M&&(t.className+=" mac");return t}(t),this._scrollable=i,this._register(this._scrollable.onScroll((e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)})));const n={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Ob(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new Rb(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Cb(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Cb(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Cb(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(e=>this._onMouseOver(e))),this.onmouseleave(this._listenOnDomNode,(e=>this._onMouseLeave(e))),this._hideTimeout=this._register(new Ka),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=jt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,M&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){void 0!==e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),void 0!==e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),void 0!==e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),void 0!==e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),void 0!==e.horizontal&&(this._options.horizontal=e.horizontal),void 0!==e.vertical&&(this._options.vertical=e.vertical),void 0!==e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),void 0!==e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),void 0!==e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Ta(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=jt(this._mouseWheelToDispose),e)){const e=e=>{this._onMouseWheel(new Ta(e))};this._mouseWheelToDispose.push(_h(this._listenOnDomNode,rc.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=Vb.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let n=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+n===0?s=n=0:Math.abs(n)>=Math.abs(s)?s=0:n=0),this._options.flipAxes&&([n,s]=[s,n]);const o=!M&&e.browserEvent&&e.browserEvent.shiftKey;!this._options.scrollYToX&&!o||s||(s=n,n=0),e.browserEvent&&e.browserEvent.altKey&&(s*=this._options.fastScrollSensitivity,n*=this._options.fastScrollSensitivity);const r=this._scrollable.getFutureScrollPosition();let a={};if(n){const e=50*n,t=r.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(a,t)}if(s){const e=50*s,t=r.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(a,t)}if(a=this._scrollable.validateScrollPosition(a),r.scrollLeft!==a.scrollLeft||r.scrollTop!==a.scrollTop){this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(a):this._scrollable.setScrollPositionNow(a),i=!0}}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",s=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${s}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((()=>this._hide()),500)}}class Kb extends Ub{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const i=new Pb({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>kh(lh(e),t)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class qb extends Ub{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class $b extends Ub{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const i=new Pb({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>kh(lh(e),t)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll((e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)}))),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}Pm('.monaco-hover{animation:fadein .1s linear;box-sizing:border-box;cursor:default;line-height:1.5em;overflow:hidden;position:absolute;user-select:text;-webkit-user-select:text;white-space:var(--vscode-hover-whiteSpace,normal)}.monaco-hover.hidden{display:none}.monaco-hover a:hover:not(.disabled){cursor:pointer}.monaco-hover .hover-contents:not(.html-hover-contents){padding:4px 8px}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents){word-wrap:break-word;max-width:var(--vscode-hover-maxWidth,500px)}.monaco-hover .markdown-hover>.hover-contents:not(.code-hover-contents) hr{min-width:100%}.monaco-hover .code,.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6,.monaco-hover p,.monaco-hover ul{margin:8px 0}.monaco-hover h1,.monaco-hover h2,.monaco-hover h3,.monaco-hover h4,.monaco-hover h5,.monaco-hover h6{line-height:1.1}.monaco-hover code{font-family:var(--monaco-monospace-font)}.monaco-hover hr{border-left:0;border-right:0;box-sizing:border-box;height:1px;margin:4px -8px -4px}.monaco-hover .code:first-child,.monaco-hover p:first-child,.monaco-hover ul:first-child{margin-top:0}.monaco-hover .code:last-child,.monaco-hover p:last-child,.monaco-hover ul:last-child{margin-bottom:0}.monaco-hover ol,.monaco-hover ul{padding-left:20px}.monaco-hover li>p{margin-bottom:0}.monaco-hover li>ul{margin-top:0}.monaco-hover code{border-radius:3px;padding:0 .4em}.monaco-hover .monaco-tokenized-source{white-space:var(--vscode-hover-sourceWhiteSpace,pre-wrap)}.monaco-hover .hover-row.status-bar{font-size:12px;line-height:22px}.monaco-hover .hover-row.status-bar .info{font-style:italic;padding:0 8px}.monaco-hover .hover-row.status-bar .actions{display:flex;padding:0 8px;width:100%}.monaco-hover .hover-row.status-bar .actions .action-container{cursor:pointer;margin-right:16px}.monaco-hover .hover-row.status-bar .actions .action-container .action .icon{padding-right:4px}.monaco-hover .markdown-hover .hover-contents .codicon{color:inherit;font-size:inherit;vertical-align:middle}.monaco-hover .hover-contents a.code-link,.monaco-hover .hover-contents a.code-link:hover{color:inherit}.monaco-hover .hover-contents a.code-link:before{content:"("}.monaco-hover .hover-contents a.code-link:after{content:")"}.monaco-hover .hover-contents a.code-link>span{border-bottom:1px solid transparent;color:var(--vscode-textLink-foreground);text-decoration:underline;text-underline-position:under}.monaco-hover .hover-contents a.code-link>span:hover{color:var(--vscode-textLink-activeForeground)}.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span{display:inline-block;margin-bottom:4px}.monaco-hover-content{box-sizing:border-box;padding-bottom:2px;padding-right:2px}.monaco-hover-content .action-container a{-webkit-user-select:none;user-select:none}.monaco-hover-content .action-container.disabled{cursor:default;opacity:.4;pointer-events:none}',{});const jb="vs/base/browser/ui/hover/hoverWidget";class Gb extends Qt{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new $b(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}const Yb=o("openerService");class Xb{get event(){return this.emitter.event}constructor(e,t,i){const n=e=>this.emitter.fire(e);this.emitter=new ui({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}}function Qb(e,t={}){const i=Zb(t);return ev(i,function(e,t){const i={type:1,children:[]};let n=0,s=i;const o=[],r=new Jb(e);for(;!r.eos();){let e=r.next();const i="\\"===e&&0!==iv(r.peek(),t);if(i&&(e=r.next()),!i&&tv(e,t)&&e===r.peek()){r.advance(),2===s.type&&(s=o.pop());const i=iv(e,t);if(s.type===i||5===s.type&&6===i)s=o.pop();else{const e={type:i,children:[]};5===i&&(e.index=n,n++),s.children.push(e),o.push(s),s=e}}else if("\n"===e)2===s.type&&(s=o.pop()),s.children.push({type:8});else if(2!==s.type){const t={type:2,content:e};s.children.push(t),o.push(s),s=t}else s.content+=e}2===s.type&&(s=o.pop());return i}(e,!!t.renderCodeSegments),t.actionHandler,t.renderCodeSegments),i}function Zb(e){const t=e.inline?"span":"div",i=document.createElement(t);return e.className&&(i.className=e.className),i}class Jb{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function ev(e,t,i,n){let s;if(2===t.type)s=document.createTextNode(t.content||"");else if(3===t.type)s=document.createElement("b");else if(4===t.type)s=document.createElement("i");else if(7===t.type&&n)s=document.createElement("code");else if(5===t.type&&i){const e=document.createElement("a");i.disposables.add(Ch(e,"click",(e=>{i.callback(String(t.index),e)}))),s=e}else 8===t.type?s=document.createElement("br"):1===t.type&&(s=e);s&&e!==s&&e.appendChild(s),s&&Array.isArray(t.children)&&t.children.forEach((e=>{ev(s,e,i,n)}))}function tv(e,t){return 0!==iv(e,t)}function iv(e,t){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return t?7:0;default:return 0}}const nv=new RegExp(`(\\\\)?\\$\\((${Eb.iconNameExpression}(?:${Eb.iconModifierExpression})?)\\)`,"g");function sv(e){const t=new Array;let i,n=0,s=0;for(;null!==(i=nv.exec(e));){s=i.index||0,n<s&&t.push(e.substring(n,s)),n=(i.index||0)+i[0].length;const[,o,r]=i;t.push(o?`$(${r})`:ov({id:r}))}return n<e.length&&t.push(e.substring(n)),t}function ov(e){const t=bc("span");return t.classList.add(...Eb.asClassNameArray(e)),t}new Uint32Array(10);new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function rv(...e){return function(t,i){for(let n=0,s=e.length;n<s;n++){const s=e[n](t,i);if(s)return s}return null}}lv.bind(void 0,!1);const av=lv.bind(void 0,!0);function lv(e,t,i){if(!i||i.length<t.length)return null;let n;return n=e?$i(i,t):0===i.indexOf(t),n?t.length>0?[{start:0,end:t.length}]:[]:null}function hv(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]===t[n]){let s=null;return(s=hv(e,t,i+1,n+1))?mv({start:n,end:n+1},s):null}return hv(e,t,i,n+1)}function cv(e){return 97<=e&&e<=122}function dv(e){return 65<=e&&e<=90}function uv(e){return 48<=e&&e<=57}function gv(e){return 32===e||9===e||10===e||13===e}const pv=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach((e=>pv.add(e.charCodeAt(0))));new Map;function fv(e){return cv(e)||dv(e)||uv(e)}function mv(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function bv(e,t){for(let i=t;i<e.length;i++){const t=e.charCodeAt(i);if(dv(t)||uv(t)||i>0&&!fv(e.charCodeAt(i-1)))return i}return e.length}function vv(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]!==t[n].toLowerCase())return null;{let s=null,o=n+1;for(s=vv(e,t,i+1,n+1);!s&&(o=bv(t,o))<t.length;)s=vv(e,t,i+1,o),o++;return null===s?null:mv({start:n,end:n+1},s)}}function wv(e,t){if(!t)return null;if(0===(t=t.trim()).length)return null;if(!function(e){let t=0,i=0,n=0,s=0;for(let o=0;o<e.length;o++)n=e.charCodeAt(o),dv(n)&&t++,cv(n)&&i++,gv(n)&&s++;return 0!==t&&0!==i||0!==s?t<=5:e.length<=30}(e))return null;t.length>60&&(t=t.substring(0,60));const i=function(e){let t=0,i=0,n=0,s=0,o=0;for(let r=0;r<e.length;r++)o=e.charCodeAt(r),dv(o)&&t++,cv(o)&&i++,fv(o)&&n++,uv(o)&&s++;return{upperPercent:t/e.length,lowerPercent:i/e.length,alphaPercent:n/e.length,numericPercent:s/e.length}}(t);if(!function(e){const{upperPercent:t,lowerPercent:i,alphaPercent:n,numericPercent:s}=e;return i>.2&&t<.8&&n>.6&&s<.2}(i)){if(!function(e){const{upperPercent:t,lowerPercent:i}=e;return 0===i&&t>.6}(i))return null;t=t.toLowerCase()}let n=null,s=0;for(e=e.toLowerCase();s<t.length&&null===(n=vv(e,t,0,s));)s=bv(t,s+1);return n}const _v=rv(av,wv,(function(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return-1===i?null:[{start:i,end:i+e.length}]})),yv=rv(av,wv,(function(e,t){return hv(e.toLowerCase(),t.toLowerCase(),0,0)})),Cv=new Ft(1e4);function Sv(e,t,i=!1){if("string"!=typeof e||"string"!=typeof t)return null;let n=Cv.get(e);n||(n=new RegExp(e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*"),"i"),Cv.set(e,n));const s=n.exec(t);return s?[{start:s.index,end:s.index+s[0].length}]:i?yv(e,t):_v(e,t)}function kv(e,t){const i=Bv(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?function(e){if(void 0===e)return[];const t=[],i=e[1];for(let n=e.length-1;n>1;n--){const s=e[n]+i,o=t[t.length-1];o&&o.end===s?o.end=s+1:t.push({start:s,end:s+1})}return t}(i):null}const xv=128;function Ev(){const e=[],t=[];for(let e=0;e<=xv;e++)t[e]=0;for(let i=0;i<=xv;i++)e.push(t.slice(0));return e}function Dv(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}const Lv=Dv(2*xv),Iv=Dv(2*xv),Tv=Ev(),Nv=Ev(),Av=Ev();function Mv(e,t){if(t<0||t>=e.length)return!1;const i=e.codePointAt(t);switch(i){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!ln(i)}}function Rv(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function Ov(e,t,i){return t[e]!==i[e]}var Fv;!function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(Fv||(Fv={}));class Pv{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}function Bv(e,t,i,n,s,o,r=Pv.default){const a=e.length>xv?xv:e.length,l=n.length>xv?xv:n.length;if(i>=a||o>=l||a-i>l-o)return;if(!function(e,t,i,n,s,o,r=!1){for(;t<i&&s<o;)e[t]===n[s]&&(r&&(Lv[t]=s),t+=1),s+=1;return t===i}(t,i,a,s,o,l,!0))return;!function(e,t,i,n,s,o){let r=e-1,a=t-1;for(;r>=i&&a>=n;)s[r]===o[a]&&(Iv[r]=a,r--),a--}(a,l,i,o,t,s);let h=1,c=1,d=i,u=o;const g=[!1];for(h=1,d=i;d<a;h++,d++){const r=Lv[d],p=Iv[d],f=d+1<a?Iv[d+1]:l;for(c=r-o+1,u=r;u<f;c++,u++){let a=Number.MIN_SAFE_INTEGER,f=!1;u<=p&&(a=zv(e,t,d,i,n,s,u,l,o,0===Tv[h-1][c-1],g));let m=0;a!==Number.MAX_SAFE_INTEGER&&(f=!0,m=a+Nv[h-1][c-1]);const b=u>r,v=b?Nv[h][c-1]+(Tv[h][c-1]>0?-5:0):0,w=u>r+1&&Tv[h][c-1]>0,_=w?Nv[h][c-2]+(Tv[h][c-2]>0?-5:0):0;if(w&&(!b||_>=v)&&(!f||_>=m))Nv[h][c]=_,Av[h][c]=3,Tv[h][c]=0;else if(b&&(!f||v>=m))Nv[h][c]=v,Av[h][c]=2,Tv[h][c]=0;else{if(!f)throw new Error("not possible");Nv[h][c]=m,Av[h][c]=1,Tv[h][c]=Tv[h-1][c-1]+1}}}if(!g[0]&&!r.firstMatchCanBeWeak)return;h--,c--;const p=[Nv[h][c],o];let f=0,m=0;for(;h>=1;){let e=c;do{const t=Av[h][e];if(3===t)e-=2;else{if(2!==t)break;e-=1}}while(e>=1);f>1&&t[i+h-1]===s[o+c-1]&&!Ov(e+o-1,n,s)&&f+1>Tv[h][e]&&(e=c),e===c?f++:f=1,m||(m=e),h--,c=e-1,p.push(c)}l===a&&r.boostFullMatch&&(p[0]+=2);const b=m-a;return p[0]-=b,p}function zv(e,t,i,n,s,o,r,a,l,h,c){if(t[i]!==o[r])return Number.MIN_SAFE_INTEGER;let d=1,u=!1;return r===i-n?d=e[i]===s[r]?7:5:!Ov(r,s,o)||0!==r&&Ov(r-1,s,o)?!Mv(o,r)||0!==r&&Mv(o,r-1)?(Mv(o,r-1)||Rv(o,r-1))&&(d=5,u=!0):d=5:(d=e[i]===s[r]?7:5,u=!0),d>1&&i===n&&(c[0]=!0),u||(u=Ov(r,s,o)||Mv(o,r-1)||Rv(o,r-1)),i===n?r>l&&(d-=u?3:5):d+=h?u?2:0:u?0:1,r+1===a&&(d-=u?3:5),d}const Wv=new RegExp(`\\$\\(${Eb.iconNameExpression}(?:${Eb.iconModifierExpression})?\\)`,"g"),Hv=new RegExp(`(\\\\)?${Wv.source}`,"g");const Vv=new RegExp(`\\\\${Wv.source}`,"g");const Uv=new RegExp(`(\\s)?(\\\\)?${Wv.source}(\\s)?`,"g");function Kv(e){return-1===e.indexOf("$(")?e:e.replace(Uv,((e,t,i,n)=>i?e:t||n||""))}const qv=new RegExp(`\\$\\(${Eb.iconNameCharacter}+\\)`,"g");function $v(e){qv.lastIndex=0;let t="";const i=[];let n=0;for(;;){const s=qv.lastIndex,o=qv.exec(e),r=e.substring(s,o?.index);if(r.length>0){t+=r;for(let e=0;e<r.length;e++)i.push(n)}if(!o)break;n+=o[0].length}return{text:t,iconOffsets:i}}function jv(e,t,i=!1){const{text:n,iconOffsets:s}=t;if(!s||0===s.length)return Sv(e,n,i);const o=Mi(n," "),r=n.length-o.length,a=Sv(e,o,i);if(a)for(const e of a){const t=s[e.start+r]+r;e.start+=t,e.end+=t}return a}class Gv{constructor(e="",t=!1){if(this.value=e,"string"!=typeof this.value)throw et("value");"boolean"==typeof t?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){var i;return this.value+=function(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?(i=e,i.replace(Hv,((e,t)=>t?e:`\\${e}`))):e).replace(/([ \t]+)/g,((e,t)=>"&nbsp;".repeat(t.length))).replace(/\>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`\n${function(e,t){const i=e.match(/^`+/gm)?.reduce(((e,t)=>e.length>t.length?e:t)).length??0,n=i>=3?i+1:3;return[`${"`".repeat(n)}${t}`,e,`${"`".repeat(n)}`].join("\n")}(t,e)}\n`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ai(t),"g");return e.replace(i,((t,i)=>"\\"!==e.charAt(i-1)?`\\${t}`:t))}}function Yv(e){return e instanceof Gv||!(!e||"object"!=typeof e)&&!("string"!=typeof e.value||"boolean"!=typeof e.isTrusted&&"object"!=typeof e.isTrusted&&void 0!==e.isTrusted||"boolean"!=typeof e.supportThemeIcons&&void 0!==e.supportThemeIcons)}function Xv(e){return e.replace(/"/g,"&quot;")}function Qv(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1"):e}class Zv{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Jv=new Zv("id#");var ew={exports:{}};function tw(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}ew.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:tw,changeDefaults:function(e){ew.exports.defaults=e}};const iw=/[&<>"']/,nw=/[&<>"']/g,sw=/[<>"']|&(?!#?\w+;)/,ow=/[<>"']|&(?!#?\w+;)/g,rw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},aw=e=>rw[e];const lw=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function hw(e){return e.replace(lw,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const cw=/(^|[^\[])\^/g;const dw=/[^\w:]/g,uw=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const gw={},pw=/^[^:]+:\/*[^/]*$/,fw=/^([^:]+:)[\s\S]*$/,mw=/^([^:]+:\/*[^/]*)[\s\S]*$/;function bw(e,t){gw[" "+e]||(pw.test(e)?gw[" "+e]=e+"/":gw[" "+e]=vw(e,"/",!0));const i=-1===(e=gw[" "+e]).indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(fw,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(mw,"$1")+t:e+t}function vw(e,t,i){const n=e.length;if(0===n)return"";let s=0;for(;s<n;){const o=e.charAt(n-s-1);if(o!==t||i){if(o===t||!i)break;s++}else s++}return e.substr(0,n-s)}var ww={escape:function(e,t){if(t){if(iw.test(e))return e.replace(nw,aw)}else if(sw.test(e))return e.replace(ow,aw);return e},unescape:hw,edit:function(e,t){e=e.source||e,t=t||"";const i={replace:(t,n)=>(n=(n=n.source||n).replace(cw,"$1"),e=e.replace(t,n),i),getRegex:()=>new RegExp(e,t)};return i},cleanUrl:function(e,t,i){if(e){let e;try{e=decodeURIComponent(hw(i)).replace(dw,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!uw.test(i)&&(i=bw(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(e){return null}return i},resolveUrl:bw,noopTest:{exec:function(){}},merge:function(e){let t,i,n=1;for(;n<arguments.length;n++)for(i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},splitCells:function(e,t){const i=e.replace(/\|/g,((e,t,i)=>{let n=!1,s=t;for(;--s>=0&&"\\"===i[s];)n=!n;return n?"|":" |"})).split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i[i.length-1].trim()||i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i},rtrim:vw,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const i=e.length;let n=0,s=0;for(;s<i;s++)if("\\"===e[s])s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";let i="";for(;t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}};const{defaults:_w}=ew.exports,{rtrim:yw,splitCells:Cw,escape:Sw,findClosingBracket:kw}=ww;function xw(e,t,i,n){const s=t.href,o=t.title?Sw(t.title):null,r=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;const e={type:"link",raw:i,href:s,title:o,text:r,tokens:n.inlineTokens(r,[])};return n.state.inLink=!1,e}return{type:"image",raw:i,href:s,title:o,text:Sw(r)}}var Ew=class{constructor(e){this.options=e||_w}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:yw(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],i=function(e,t){const i=e.match(/^(\s+)(?:```)/);if(null===i)return t;const n=i[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[i]=t;return i.length>=n.length?e.slice(n.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=yw(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const i={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,n,s,o,r,a,l,h,c,d,u=t[1].trim();const g=u.length>1,p={type:"list",raw:"",ordered:g,start:g?+u.slice(0,-1):"",loose:!1,items:[]};u=g?`\\d{1,9}\\${u.slice(-1)}`:`\\${u}`,this.options.pedantic&&(u=g?u:"[*+-]");const f=new RegExp(`^( {0,3}${u})((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))`);for(;e&&!this.rules.block.hr.test(e)&&(t=f.exec(e));){c=t[2].split("\n"),this.options.pedantic?(o=2,d=c[0].trimLeft()):(o=t[2].search(/[^ ]/),o=t[1].length+(o>4?1:o),d=c[0].slice(o-t[1].length)),a=!1,i=t[0],!c[0]&&/^ *$/.test(c[1])&&(i=t[1]+c.slice(0,2).join("\n")+"\n",p.loose=!0,c=[]);const u=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(r=1;r<c.length;r++){if(h=c[r],this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),u.test(h)){i=t[1]+c.slice(0,r).join("\n")+"\n";break}if(a){if(!(h.search(/[^ ]/)>=o)&&h.trim()){i=t[1]+c.slice(0,r).join("\n")+"\n";break}d+="\n"+h.slice(o)}else h.trim()||(a=!0),h.search(/[^ ]/)>=o?d+="\n"+h.slice(o):d+="\n"+h}p.loose||(l?p.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(d),n&&(s="[ ] "!==n[0],d=d.replace(/^\[[ xX]\] +/,""))),p.items.push({type:"list_item",raw:i,task:!!n,checked:s,loose:!1,text:d}),p.raw+=i,e=e.slice(i.length)}p.items[p.items.length-1].raw=i.trimRight(),p.items[p.items.length-1].text=d.trimRight(),p.raw=p.raw.trimRight();const m=p.items.length;for(r=0;r<m;r++)this.lexer.state.top=!1,p.items[r].tokens=this.lexer.blockTokens(p.items[r].text,[]),p.items[r].tokens.some((e=>"space"===e.type))&&(p.loose=!0,p.items[r].loose=!0);return p}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):Sw(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:Cw(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let i,n,s,o,r=e.align.length;for(i=0;i<r;i++)/^ *-+: *$/.test(e.align[i])?e.align[i]="right":/^ *:-+: *$/.test(e.align[i])?e.align[i]="center":/^ *:-+ *$/.test(e.align[i])?e.align[i]="left":e.align[i]=null;for(r=e.rows.length,i=0;i<r;i++)e.rows[i]=Cw(e.rows[i],e.header.length).map((e=>({text:e})));for(r=e.header.length,n=0;n<r;n++)e.header[n].tokens=[],this.lexer.inlineTokens(e.header[n].text,e.header[n].tokens);for(r=e.rows.length,n=0;n<r;n++)for(o=e.rows[n],s=0;s<o.length;s++)o[s].tokens=[],this.lexer.inlineTokens(o[s].text,o[s].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Sw(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Sw(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=yw(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=kw(t[2],"()");if(e>-1){const i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);e&&(i=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(e)?i.slice(1):i.slice(1,-1)),xw(t,{href:i?i.replace(this.rules.inline._escapes,"$1"):i,title:n?n.replace(this.rules.inline._escapes,"$1"):n},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let e=(i[2]||i[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return xw(i,e,i[0],this.lexer)}}emStrong(e,t,i=""){let n=this.rules.inline.emStrong.lDelim.exec(e);if(!n)return;if(n[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=n[1]||n[2]||"";if(!s||s&&(""===i||this.rules.inline.punctuation.exec(i))){const i=n[0].length-1;let s,o,r=i,a=0;const l="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);null!=(n=l.exec(t));){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(o=s.length,n[3]||n[4]){r+=o;continue}if((n[5]||n[6])&&i%3&&!((i+o)%3)){a+=o;continue}if(r-=o,r>0)continue;if(o=Math.min(o,o+r+a),Math.min(i,o)%2){const t=e.slice(1,i+n.index+o);return{type:"em",raw:e.slice(0,i+n.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,i+n.index+o-1);return{type:"strong",raw:e.slice(0,i+n.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const i=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return i&&n&&(e=e.substring(1,e.length-1)),e=Sw(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let e,n;return"@"===i[2]?(e=Sw(this.options.mangle?t(i[1]):i[1]),n="mailto:"+e):(e=Sw(i[1]),n=e),{type:"link",raw:i[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let e,n;if("@"===i[2])e=Sw(this.options.mangle?t(i[0]):i[0]),n="mailto:"+e;else{let t;do{t=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(t!==i[0]);e=Sw(i[0]),n="www."===i[1]?"http://"+e:e}return{type:"link",raw:i[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Sw(i[0]):i[0]:Sw(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:e}}}};const{noopTest:Dw,edit:Lw,merge:Iw}=ww,Tw={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Dw,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Tw.def=Lw(Tw.def).replace("label",Tw._label).replace("title",Tw._title).getRegex(),Tw.bullet=/(?:[*+-]|\d{1,9}[.)])/,Tw.listItemStart=Lw(/^( *)(bull) */).replace("bull",Tw.bullet).getRegex(),Tw.list=Lw(Tw.list).replace(/bull/g,Tw.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Tw.def.source+")").getRegex(),Tw._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Tw._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Tw.html=Lw(Tw.html,"i").replace("comment",Tw._comment).replace("tag",Tw._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Tw.paragraph=Lw(Tw._paragraph).replace("hr",Tw.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tw._tag).getRegex(),Tw.blockquote=Lw(Tw.blockquote).replace("paragraph",Tw.paragraph).getRegex(),Tw.normal=Iw({},Tw),Tw.gfm=Iw({},Tw.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Tw.gfm.table=Lw(Tw.gfm.table).replace("hr",Tw.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tw._tag).getRegex(),Tw.pedantic=Iw({},Tw.normal,{html:Lw("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Tw._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dw,paragraph:Lw(Tw.normal._paragraph).replace("hr",Tw.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Tw.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Nw={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Dw,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Dw,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Nw.punctuation=Lw(Nw.punctuation).replace(/punctuation/g,Nw._punctuation).getRegex(),Nw.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Nw.escapedEmSt=/\\\*|\\_/g,Nw._comment=Lw(Tw._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Nw.emStrong.lDelim=Lw(Nw.emStrong.lDelim).replace(/punct/g,Nw._punctuation).getRegex(),Nw.emStrong.rDelimAst=Lw(Nw.emStrong.rDelimAst,"g").replace(/punct/g,Nw._punctuation).getRegex(),Nw.emStrong.rDelimUnd=Lw(Nw.emStrong.rDelimUnd,"g").replace(/punct/g,Nw._punctuation).getRegex(),Nw._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Nw._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Nw._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Nw.autolink=Lw(Nw.autolink).replace("scheme",Nw._scheme).replace("email",Nw._email).getRegex(),Nw._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Nw.tag=Lw(Nw.tag).replace("comment",Nw._comment).replace("attribute",Nw._attribute).getRegex(),Nw._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Nw._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Nw._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Nw.link=Lw(Nw.link).replace("label",Nw._label).replace("href",Nw._href).replace("title",Nw._title).getRegex(),Nw.reflink=Lw(Nw.reflink).replace("label",Nw._label).getRegex(),Nw.reflinkSearch=Lw(Nw.reflinkSearch,"g").replace("reflink",Nw.reflink).replace("nolink",Nw.nolink).getRegex(),Nw.normal=Iw({},Nw),Nw.pedantic=Iw({},Nw.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Lw(/^!?\[(label)\]\((.*?)\)/).replace("label",Nw._label).getRegex(),reflink:Lw(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Nw._label).getRegex()}),Nw.gfm=Iw({},Nw.normal,{escape:Lw(Nw.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Nw.gfm.url=Lw(Nw.gfm.url,"i").replace("email",Nw.gfm._extended_email).getRegex(),Nw.breaks=Iw({},Nw.gfm,{br:Lw(Nw.br).replace("{2,}","*").getRegex(),text:Lw(Nw.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Aw={block:Tw,inline:Nw};const Mw=Ew,{defaults:Rw}=ew.exports,{block:Ow,inline:Fw}=Aw,{repeatString:Pw}=ww;function Bw(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function zw(e){let t,i,n="";const s=e.length;for(t=0;t<s;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}const{defaults:Ww}=ew.exports,{cleanUrl:Hw,escape:Vw}=ww;var Uw=class{constructor(e){this.options=e||Ww}code(e,t,i){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,n);null!=t&&t!==e&&(i=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+Vw(n,!0)+'">'+(i?e:Vw(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Vw(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,i){const n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(null===(e=Hw(this.options.sanitize,this.options.baseUrl,e)))return i;let n='<a href="'+Vw(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image(e,t,i){if(null===(e=Hw(this.options.sanitize,this.options.baseUrl,e)))return i;let n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">",n}text(e){return e}},Kw=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}},qw=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do{n++,i=e+"-"+n}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}};const $w=Uw,jw=Kw,Gw=qw,{defaults:Yw}=ew.exports,{unescape:Xw}=ww;const Qw=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Rw,this.options.tokenizer=this.options.tokenizer||new Mw,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ow.normal,inline:Fw.normal};this.options.pedantic?(t.block=Ow.pedantic,t.inline=Fw.pedantic):this.options.gfm&&(t.block=Ow.gfm,this.options.breaks?t.inline=Fw.breaks:t.inline=Fw.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ow,inline:Fw}}static lex(t,i){return new e(i).lex(t)}static lexInline(t,i){return new e(i).inlineTokens(t)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,n,s,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?t.push(i):(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.list(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.def(e))e=e.substring(i.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else{if(s=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const i=e.slice(1);let n;this.options.extensions.startBlock.forEach((function(e){n=e.call({lexer:this},i),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s)))n=t[t.length-1],o&&"paragraph"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),n=t[t.length-1],n&&"text"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,n,s,o,r,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+Pw("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+Pw("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(r||(a=""),r=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))))if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e))e=e.substring(i.raw.length),n=t[t.length-1],n&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),n=t[t.length-1],n&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.emStrong(e,l,a))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.autolink(e,zw))e=e.substring(i.raw.length),t.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(e,zw))){if(s=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const i=e.slice(1);let n;this.options.extensions.startInline.forEach((function(e){n=e.call({lexer:this},i),"number"==typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(i=this.tokenizer.inlineText(s,Bw))e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(a=i.raw.slice(-1)),r=!0,n=t[t.length-1],n&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(i.raw.length),t.push(i);return t}},Zw=class e{constructor(e){this.options=e||Yw,this.options.renderer=this.options.renderer||new $w,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new jw,this.slugger=new Gw}static parse(t,i){return new e(i).parse(t)}static parseInline(t,i){return new e(i).parseInline(t)}parse(e,t=!0){let i,n,s,o,r,a,l,h,c,d,u,g,p,f,m,b,v,w,_,y="";const C=e.length;for(i=0;i<C;i++)if(d=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(_=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==_||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))y+=_||"";else switch(d.type){case"space":continue;case"hr":y+=this.renderer.hr();continue;case"heading":y+=this.renderer.heading(this.parseInline(d.tokens),d.depth,Xw(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":y+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(h="",l="",o=d.header.length,n=0;n<o;n++)l+=this.renderer.tablecell(this.parseInline(d.header[n].tokens),{header:!0,align:d.align[n]});for(h+=this.renderer.tablerow(l),c="",o=d.rows.length,n=0;n<o;n++){for(a=d.rows[n],l="",r=a.length,s=0;s<r;s++)l+=this.renderer.tablecell(this.parseInline(a[s].tokens),{header:!1,align:d.align[s]});c+=this.renderer.tablerow(l)}y+=this.renderer.table(h,c);continue;case"blockquote":c=this.parse(d.tokens),y+=this.renderer.blockquote(c);continue;case"list":for(u=d.ordered,g=d.start,p=d.loose,o=d.items.length,c="",n=0;n<o;n++)m=d.items[n],b=m.checked,v=m.task,f="",m.task&&(w=this.renderer.checkbox(b),p?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=w+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=w+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:w}):f+=w),f+=this.parse(m.tokens,p),c+=this.renderer.listitem(f,v,b);y+=this.renderer.list(c,u,g);continue;case"html":y+=this.renderer.html(d.text);continue;case"paragraph":y+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(c=d.tokens?this.parseInline(d.tokens):d.text;i+1<C&&"text"===e[i+1].type;)d=e[++i],c+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);y+=t?this.renderer.paragraph(c):c;continue;default:{const e='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return y}parseInline(e,t){t=t||this.renderer;let i,n,s,o="";const r=e.length;for(i=0;i<r;i++)if(n=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(s=this.options.extensions.renderers[n.type].call({parser:this},n),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)))o+=s||"";else switch(n.type){case"escape":case"text":o+=t.text(n.text);break;case"html":o+=t.html(n.text);break;case"link":o+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":o+=t.image(n.href,n.title,n.text);break;case"strong":o+=t.strong(this.parseInline(n.tokens,t));break;case"em":o+=t.em(this.parseInline(n.tokens,t));break;case"codespan":o+=t.codespan(n.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(n.tokens,t));break;default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}},Jw=Ew,e_=Uw,t_=Kw,i_=qw,{merge:n_,checkSanitizeDeprecation:s_,escape:o_}=ww,{getDefaults:r_,changeDefaults:a_,defaults:l_}=ew.exports;function h_(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(i=t,t=null),t=n_({},h_.defaults,t||{}),s_(t),i){const n=t.highlight;let s;try{s=Qw.lex(e,t)}catch(e){return i(e)}const o=function(e){let o;if(!e)try{t.walkTokens&&h_.walkTokens(s,t.walkTokens),o=Zw.parse(s,t)}catch(t){e=t}return t.highlight=n,e?i(e):i(null,o)};if(!n||n.length<3)return o();if(delete t.highlight,!s.length)return o();let r=0;return h_.walkTokens(s,(function(e){"code"===e.type&&(r++,setTimeout((()=>{n(e.text,e.lang,(function(t,i){if(t)return o(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),r--,0===r&&o()}))}),0))})),void(0===r&&o())}try{const i=Qw.lex(e,t);return t.walkTokens&&h_.walkTokens(i,t.walkTokens),Zw.parse(i,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+o_(e.message+"",!0)+"</pre>";throw e}}h_.options=h_.setOptions=function(e){return n_(h_.defaults,e),a_(h_.defaults),h_},h_.getDefaults=r_,h_.defaults=l_,h_.use=function(...e){const t=n_({},...e),i=h_.defaults.extensions||{renderers:{},childTokens:{}};let n;e.forEach((e=>{if(e.extensions&&(n=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=i.renderers?i.renderers[e.name]:null;i.renderers[e.name]=t?function(...i){let n=e.renderer.apply(this,i);return!1===n&&(n=t.apply(this,i)),n}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");i[e.level]?i[e.level].unshift(e.tokenizer):i[e.level]=[e.tokenizer],e.start&&("block"===e.level?i.startBlock?i.startBlock.push(e.start):i.startBlock=[e.start]:"inline"===e.level&&(i.startInline?i.startInline.push(e.start):i.startInline=[e.start]))}e.childTokens&&(i.childTokens[e.name]=e.childTokens)}))),e.renderer){const i=h_.defaults.renderer||new e_;for(const t in e.renderer){const n=i[t];i[t]=(...s)=>{let o=e.renderer[t].apply(i,s);return!1===o&&(o=n.apply(i,s)),o}}t.renderer=i}if(e.tokenizer){const i=h_.defaults.tokenizer||new Jw;for(const t in e.tokenizer){const n=i[t];i[t]=(...s)=>{let o=e.tokenizer[t].apply(i,s);return!1===o&&(o=n.apply(i,s)),o}}t.tokenizer=i}if(e.walkTokens){const i=h_.defaults.walkTokens;t.walkTokens=t=>{e.walkTokens.call(this,t),i&&i(t)}}n&&(t.extensions=i),h_.setOptions(t)}))},h_.walkTokens=function(e,t){for(const i of e)switch(t(i),i.type){case"table":for(const e of i.header)h_.walkTokens(e.tokens,t);for(const e of i.rows)for(const i of e)h_.walkTokens(i.tokens,t);break;case"list":h_.walkTokens(i.items,t);break;default:h_.defaults.extensions&&h_.defaults.extensions.childTokens&&h_.defaults.extensions.childTokens[i.type]?h_.defaults.extensions.childTokens[i.type].forEach((function(e){h_.walkTokens(i[e],t)})):i.tokens&&h_.walkTokens(i.tokens,t)}},h_.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=n_({},h_.defaults,t||{}),s_(t);try{const i=Qw.lexInline(e,t);return t.walkTokens&&h_.walkTokens(i,t.walkTokens),Zw.parseInline(i,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+o_(e.message+"",!0)+"</pre>";throw e}},h_.Parser=Zw,h_.parser=Zw.parse,h_.Renderer=e_,h_.TextRenderer=t_,h_.Lexer=Qw,h_.lexer=Qw.lex,h_.Tokenizer=Jw,h_.Slugger=i_,h_.parse=h_;var c_=h_;function d_(e){let t=JSON.parse(e);return t=g_(t),t}function u_(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function g_(e,t=0){if(!e||t>200)return e;if("object"==typeof e){switch(e.$mid){case 1:return Fe.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof ho||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=g_(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=g_(e[i],t+1))}return e}const p_=Object.freeze({image:(e,t,i)=>{let n=[],s=[];return e&&(({href:e,dimensions:n}=function(e){const t=[],i=e.split("|").map((e=>e.trim()));e=i[0];const n=i[1];if(n){const e=/height=(\d+)/.exec(n),i=/width=(\d+)/.exec(n),s=e?e[1]:"",o=i?i[1]:"",r=isFinite(parseInt(o)),a=isFinite(parseInt(s));r&&t.push(`width="${o}"`),a&&t.push(`height="${s}"`)}return{href:e,dimensions:t}}(e)),s.push(`src="${Xv(e)}"`)),i&&s.push(`alt="${Xv(i)}"`),t&&s.push(`title="${Xv(t)}"`),n.length&&(s=s.concat(n)),"<img "+s.join(" ")+">"},paragraph:e=>`<p>${e}</p>`,link:(e,t,i)=>"string"!=typeof e?"":(e===i&&(i=Qv(i)),t="string"==typeof t?Xv(Qv(t)):"",`<a href="${e=(e=Qv(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" title="${t||e}" draggable="false">${i}</a>`)});function f_(e,t={},i={}){const n=new Xt;let s=!1;const o=Zb(t),r=function(t){let i;try{i=d_(decodeURIComponent(t))}catch(e){}return i?(i=Un(i,(t=>e.uris&&e.uris[t]?Fe.revive(e.uris[t]):void 0)),encodeURIComponent(JSON.stringify(i))):t},a=function(t,i){const n=e.uris&&e.uris[t];let s=Fe.revive(n);return i?t.startsWith(vn.data+":")?t:(s||(s=Fe.parse(t)),Sn.uriToBrowserUri(s).toString(!0)):s?Fe.parse(t).toString()===s.toString()?t:(s.query&&(s=s.with({query:r(s.query)})),s.toString()):t},l=new c_.Renderer;l.image=p_.image,l.link=p_.link,l.paragraph=p_.paragraph;const h=[],c=[];if(t.codeBlockRendererSync?l.code=(e,i)=>{const n=Jv.nextId(),s=t.codeBlockRendererSync(m_(i),e);return c.push([n,s]),`<div class="code" data-code="${n}">${Ni(e)}</div>`}:t.codeBlockRenderer&&(l.code=(e,i)=>{const n=Jv.nextId(),s=t.codeBlockRenderer(m_(i),e);return h.push(s.then((e=>[n,e]))),`<div class="code" data-code="${n}">${Ni(e)}</div>`}),t.actionHandler){const i=function(i){let n=i.target;if("A"===n.tagName||(n=n.parentElement,n&&"A"===n.tagName))try{let s=n.dataset.href;s&&(e.baseUri&&(s=b_(Fe.from(e.baseUri),s)),t.actionHandler.callback(s,i))}catch(e){Ge(e)}finally{i.preventDefault()}},n=t.actionHandler.disposables.add(new Xb(o,"click")),s=t.actionHandler.disposables.add(new Xb(o,"auxclick"));t.actionHandler.disposables.add(oi.any(n.event,s.event)((e=>{const t=new Ia(lh(o),e);(t.leftButton||t.middleButton)&&i(t)}))),t.actionHandler.disposables.add(_h(o,"keydown",(e=>{const t=new xa(e);(t.equals(10)||t.equals(3))&&i(t)})))}e.supportHtml||(i.sanitizer=t=>(e.isTrusted?t.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?t:"",i.sanitize=!0,i.silent=!0),i.renderer=l;let d=e.value??"";let u;if(d.length>1e5&&(d=`${d.substr(0,1e5)}…`),e.supportThemeIcons&&(d=d.replace(Vv,(e=>`\\${e}`))),t.fillInIncompleteTokens){const e={...c_.defaults,...i},t=function(e){let t,i;for(t=0;t<e.length;t++){const n=e[t];let s;if("paragraph"===n.type&&(s=n.raw.match(/(\n|^)(````*)/))){const n=s[2];i=E_(e.slice(t),n);break}if("paragraph"===n.type&&n.raw.match(/(\n|^)\|/)){i=O_(e.slice(t));break}if(t===e.length-1&&"paragraph"===n.type){const e=k_(n);if(e){i=[e];break}}}if(i){const n=[...e.slice(0,t),...i];return n.links=e.links,n}return e}(c_.lexer(d,e));u=c_.parser(t,e)}else u=c_.parse(d,i);if(e.supportThemeIcons){u=sv(u).map((e=>"string"==typeof e?e:e.outerHTML)).join("")}const g=(new DOMParser).parseFromString(v_(e,u),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach((i=>{const n=i.getAttribute("src");if(n){let s=n;try{e.baseUri&&(s=b_(Fe.from(e.baseUri),s))}catch(e){}if(i.setAttribute("src",a(s,!0)),t.disallowRemoteImages){const e=Fe.parse(s).scheme;e!==vn.file&&e!==vn.data&&i.replaceWith(bc("",void 0,i.outerHTML))}}})),g.body.querySelectorAll("a").forEach((t=>{const i=t.getAttribute("href");if(t.setAttribute("href",""),!i||/^data:|javascript:/i.test(i)||/^command:/i.test(i)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(i))t.replaceWith(...t.childNodes);else{let n=a(i,!1);e.baseUri&&(n=b_(Fe.from(e.baseUri),i)),t.dataset.href=n}})),o.innerHTML=v_(e,g.body.innerHTML),h.length>0)Promise.all(h).then((e=>{if(s)return;const i=new Map(e),n=o.querySelectorAll("div[data-code]");for(const e of n){const t=i.get(e.dataset.code??"");t&&gc(e,t)}t.asyncRenderCallback?.()}));else if(c.length>0){const e=new Map(c),t=o.querySelectorAll("div[data-code]");for(const i of t){const t=e.get(i.dataset.code??"");t&&gc(i,t)}}if(t.asyncRenderCallback)for(const e of o.getElementsByTagName("img")){const i=n.add(_h(e,"load",(()=>{i.dispose(),t.asyncRenderCallback()})))}return{element:o,dispose:()=>{s=!0,n.dispose()}}}function m_(e){if(!e)return"";const t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function b_(e,t){return/^\w[\w\d+.-]*:/.test(t)?t:e.path.endsWith("/")?ws(e,t).toString():ws(fs(e),t).toString()}function v_(e,t){const{config:i,allowedSchemes:n}=function(e){const t=[vn.http,vn.https,vn.mailto,vn.data,vn.file,vn.vscodeFileResource,vn.vscodeRemote,vn.vscodeRemoteResource];e.isTrusted&&t.push(vn.command);return{config:{ALLOWED_TAGS:[...Ec],ALLOWED_ATTR:w_,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:t}}(e);Ql("uponSanitizeAttribute",((e,t)=>{if("style"!==t.attrName&&"class"!==t.attrName){if("INPUT"===e.tagName&&"checkbox"===e.attributes.getNamedItem("type")?.value){if("type"===t.attrName&&"checkbox"===t.attrValue||"disabled"===t.attrName||"checked"===t.attrName)return void(t.keepAttr=!0);t.keepAttr=!1}}else{if("SPAN"===e.tagName){if("style"===t.attrName)return void(t.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(t.attrValue));if("class"===t.attrName)return void(t.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue))}t.keepAttr=!1}})),Ql("uponSanitizeElement",((e,t)=>{"input"===t.tagName&&("checkbox"===e.attributes.getNamedItem("type")?.value?e.setAttribute("disabled",""):e.parentElement?.removeChild(e))}));const s=xc(n);try{return Xl(t,{...i,RETURN_TRUSTED_TYPE:!0})}finally{Zl("uponSanitizeAttribute"),s.dispose()}}const w_=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function __(e){return"string"==typeof e?e:function(e){let t=e.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const i=c_.parse(t,{renderer:C_.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(e=>y_.get(e)??e));return v_({isTrusted:!1},i).toString()}(e)}const y_=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),C_=new Li((()=>{const e=new c_.Renderer;return e.code=e=>e,e.blockquote=e=>e,e.html=e=>"",e.heading=(e,t,i)=>e+"\n",e.hr=()=>"",e.list=(e,t)=>e,e.listitem=e=>e+"\n",e.paragraph=e=>e+"\n",e.table=(e,t)=>e+t+"\n",e.tablerow=e=>e,e.tablecell=(e,t)=>e+" ",e.strong=e=>e,e.em=e=>e,e.codespan=e=>e,e.br=()=>"\n",e.del=e=>e,e.image=(e,t,i)=>"",e.text=e=>e,e.link=(e,t,i)=>i,e}));function S_(e){let t="";return e.forEach((e=>{t+=e.raw})),t}function k_(e){for(let t=0;t<e.tokens.length;t++){const i=e.tokens[t];if("text"===i.type){const n=i.raw.split("\n"),s=n[n.length-1];if(s.includes("`"))return D_(e);if(s.includes("**"))return R_(e,"**");if(s.match(/\*\w/))return L_(e);if(s.match(/(^|\s)__\w/))return M_(e);if(s.match(/(^|\s)_\w/))return I_(e);if(s.match(/(^|\s)\[.*\]\(\w*/)){const i=e.tokens.slice(t+1);return"link"===i[0]?.type&&"text"===i[1]?.type&&i[1].raw.match(/^ *"[^"]*$/)?N_(e):T_(e)}if(x_(s))return T_(e);if(s.match(/(^|\s)\[\w/)&&!e.tokens.slice(t+1).some((e=>x_(e.raw))))return A_(e)}}}function x_(e){return!!e.match(/^[^\[]*\]\([^\)]*$/)}function E_(e,t){const i=S_(e);return c_.lexer(i+`\n${t}`)}function D_(e){return R_(e,"`")}function L_(e){return R_(e,"*")}function I_(e){return R_(e,"_")}function T_(e){return R_(e,")")}function N_(e){return R_(e,'")')}function A_(e){return R_(e,"](about:blank)")}function M_(e){return R_(e,"__")}function R_(e,t){const i=S_(Array.isArray(e)?e:[e]);return c_.lexer(i+t)[0]}function O_(e){const t=S_(e),i=t.split("\n");let n,s=!1;for(let e=0;e<i.length;e++){const t=i[e].trim();if(void 0===n&&t.match(/^\s*\|/)){const e=t.match(/(\|[^\|]+)(?=\||$)/g);e&&(n=e.length)}else if("number"==typeof n){if(!t.match(/^\s*\|/))return;if(e!==i.length-1)return;s=!0}}if("number"==typeof n&&n>0){const e=s?i.slice(0,-1).join("\n"):t,o=!!e.match(/\|\s*$/),r=e+(o?"":"|")+`\n|${" --- |".repeat(n)}`;return c_.lexer(r)}}function F_(e,t){const i=globalThis.MonacoEnvironment;if(i?.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(e,t)}catch(e){return void Ge(e)}try{return Gr.trustedTypes?.createPolicy(e,t)}catch(e){return void Ge(e)}}Pm(".monaco-editor .rendered-markdown kbd{background-color:var(--vscode-keybindingLabel-background);border-color:var(--vscode-keybindingLabel-border);border-bottom-color:var(--vscode-keybindingLabel-bottomBorder);border-radius:3px;border-style:solid;border-width:1px;box-shadow:inset 0 -1px 0 var(--vscode-widget-shadow);color:var(--vscode-keybindingLabel-foreground);padding:1px 3px;vertical-align:middle}.rendered-markdown li:has(input[type=checkbox]){list-style-type:none}",{});class P_{static{this.defaultTokenMetadata=33587200}static createEmpty(e,t){const i=P_.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new P_(n,e,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}equals(e){return e instanceof P_&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,i){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const n=t<<1,s=n+(i<<1);for(let t=n;t<s;t++)if(this._tokens[t]!==e._tokens[t])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){const t=this._tokens[1+(e<<1)],i=Ad.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[1+(e<<1)];return Ad.getTokenType(t)}getForeground(e){const t=this._tokens[1+(e<<1)];return Ad.getForeground(t)}getClassName(e){const t=this._tokens[1+(e<<1)];return Ad.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[1+(e<<1)];return Ad.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[1+(e<<1)];return Ad.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return P_.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new B_(this,e,t,i)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let t=0;t<i;t++)e[t<<1]=e[t+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const s=i+Math.floor((n-i)/2),o=e[s<<1];if(o===t)return s+1;o<t?i=s+1:o>t&&(n=s)}return i}withInserted(e){if(0===e.length)return this;let t=0,i=0,n="";const s=new Array;let o=0;for(;;){const r=t<this._tokensCount?this._tokens[t<<1]:-1,a=i<e.length?e[i]:null;if(-1!==r&&(null===a||r<=a.offset)){n+=this._text.substring(o,r);const e=this._tokens[1+(t<<1)];s.push(n.length,e),t++,o=r}else{if(!a)break;if(a.offset>o){n+=this._text.substring(o,a.offset);const e=this._tokens[1+(t<<1)];s.push(n.length,e),o=a.offset}n+=a.text,s.push(n.length,a.tokenMetadata),i++}}return new P_(new Uint32Array(s),n,this._languageIdCodec)}}class B_{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let t=this._firstTokenIndex,n=e.getCount();t<n;t++){if(e.getStartOffset(t)>=i)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof B_&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class z_ extends Qt{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}const W_="vs/editor/common/languages";class H_{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}class V_{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var U_,K_,q_,$_,j_,G_;!function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(U_||(U_={})),function(e){const t=new Map;t.set(0,wg.symbolMethod),t.set(1,wg.symbolFunction),t.set(2,wg.symbolConstructor),t.set(3,wg.symbolField),t.set(4,wg.symbolVariable),t.set(5,wg.symbolClass),t.set(6,wg.symbolStruct),t.set(7,wg.symbolInterface),t.set(8,wg.symbolModule),t.set(9,wg.symbolProperty),t.set(10,wg.symbolEvent),t.set(11,wg.symbolOperator),t.set(12,wg.symbolUnit),t.set(13,wg.symbolValue),t.set(15,wg.symbolEnum),t.set(14,wg.symbolConstant),t.set(15,wg.symbolEnum),t.set(16,wg.symbolEnumMember),t.set(17,wg.symbolKeyword),t.set(27,wg.symbolSnippet),t.set(18,wg.symbolText),t.set(19,wg.symbolColor),t.set(20,wg.symbolFile),t.set(21,wg.symbolReference),t.set(22,wg.symbolCustomColor),t.set(23,wg.symbolFolder),t.set(24,wg.symbolTypeParameter),t.set(25,wg.account),t.set(26,wg.issues),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for CompletionItemKind "+e),i=wg.symbolProperty),i};const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26),e.fromString=function(e,t){let n=i.get(e);return void 0!==n||t||(n=9),n}}(K_||(K_={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(q_||(q_={}));!function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"}($_||($_={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(j_||(j_={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(G_||(G_={}));u(W_,0,"array"),u(W_,1,"boolean"),u(W_,2,"class"),u(W_,3,"constant"),u(W_,4,"constructor"),u(W_,5,"enumeration"),u(W_,6,"enumeration member"),u(W_,7,"event"),u(W_,8,"field"),u(W_,9,"file"),u(W_,10,"function"),u(W_,11,"interface"),u(W_,12,"key"),u(W_,13,"method"),u(W_,14,"module"),u(W_,15,"namespace"),u(W_,16,"null"),u(W_,17,"number"),u(W_,18,"object"),u(W_,19,"operator"),u(W_,20,"package"),u(W_,21,"property"),u(W_,22,"string"),u(W_,23,"struct"),u(W_,24,"type parameter"),u(W_,25,"variable");var Y_,X_,Q_,Z_,J_,ey,ty,iy,ny;!function(e){const t=new Map;t.set(0,wg.symbolFile),t.set(1,wg.symbolModule),t.set(2,wg.symbolNamespace),t.set(3,wg.symbolPackage),t.set(4,wg.symbolClass),t.set(5,wg.symbolMethod),t.set(6,wg.symbolProperty),t.set(7,wg.symbolField),t.set(8,wg.symbolConstructor),t.set(9,wg.symbolEnum),t.set(10,wg.symbolInterface),t.set(11,wg.symbolFunction),t.set(12,wg.symbolVariable),t.set(13,wg.symbolConstant),t.set(14,wg.symbolString),t.set(15,wg.symbolNumber),t.set(16,wg.symbolBoolean),t.set(17,wg.symbolArray),t.set(18,wg.symbolObject),t.set(19,wg.symbolKey),t.set(20,wg.symbolNull),t.set(21,wg.symbolEnumMember),t.set(22,wg.symbolStruct),t.set(23,wg.symbolEvent),t.set(24,wg.symbolOperator),t.set(25,wg.symbolTypeParameter),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for SymbolKind "+e),i=wg.symbolProperty),i}}(Y_||(Y_={}));class sy{static{this.Comment=new sy("comment")}static{this.Imports=new sy("imports")}static{this.Region=new sy("region")}static fromValue(e){switch(e){case"comment":return sy.Comment;case"imports":return sy.Imports;case"region":return sy.Region}return new sy(e)}constructor(e){this.value=e}}!function(e){e[e.AIGenerated=1]="AIGenerated"}(X_||(X_={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(Q_||(Q_={})),function(e){e.is=function(e){return!(!e||"object"!=typeof e)&&("string"==typeof e.id&&"string"==typeof e.title)}}(Z_||(Z_={})),function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(J_||(J_={})),function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"}(ey||(ey={})),function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"}(ty||(ty={})),function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"}(iy||(iy={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(ny||(ny={}));const oy=new class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new ui,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Yt((()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))}))}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const i=new z_(this,e,t);return this._factories.set(e,i),Yt((()=>{const t=this._factories.get(e);t&&t===i&&(this._factories.delete(e),t.dispose())}))}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};var ry,ay;!function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"}(ry||(ry={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(ay||(ay={}));const ly=new class{clone(){return this}equals(e){return this===e}};function hy(e,t){const i=new Uint32Array(2);return i[0]=0,i[1]=(32768|e|2<<24)>>>0,new V_(i,null===t?ly:t)}const cy={getInitialState:()=>ly,tokenizeEncoded:(e,t,i)=>hy(0,i)};function dy(e,t,i){let n='<div class="monaco-tokenized-source">';const s=Fi(e);let o=i.getInitialState();for(let e=0,r=s.length;e<r;e++){const r=s[e];e>0&&(n+="<br/>");const a=i.tokenizeEncoded(r,!0,o);P_.convertToEndOffset(a.tokens,r.length);const l=new P_(a.tokens,r,t).inflate();let h=0;for(let e=0,t=l.getCount();e<t;e++){const t=l.getClassName(e),i=l.getEndOffset(e);n+=`<span class="${t}">${Ni(r.substring(h,i))}</span>`,h=i}o=a.endState}return n+="</div>",n}var uy;let gy=class{static{uy=this}static{this._ttpTokenizer=F_("tokenizeToString",{createHTML(e){return e}})}constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new ui,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const n=new Xt,s=n.add(f_(e,{...this._getRenderOptions(e,n),...t},i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(e,t)=>{let i;e?i=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(i=this._options.editor.getModel()?.getLanguageId()),i||(i=Tr);const n=await async function(e,t,i){if(!i)return dy(t,e.languageIdCodec,cy);const n=await oy.getOrCreate(i);return dy(t,e.languageIdCodec,n||cy)}(this._languageService,t,i),s=document.createElement("span");if(s.innerHTML=uy._ttpTokenizer?.createHTML(n)??n,this._options.editor){!function(e,t){e instanceof _b?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}(s,this._options.editor.getOption(50))}else this._options.codeBlockFontFamily&&(s.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(s.style.fontSize=this._options.codeBlockFontSize),s},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>py(this._openerService,t,e.isTrusted),disposables:t}}}};async function py(e,t,i){try{return await e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:fy(i)})}catch(e){return Ge(e),!1}}function fy(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}gy=uy=Bs([zs(1,Ko),zs(2,Yb)],gy);const my=o("accessibilityService");Pm(".monaco-aria-container{left:-999em;position:absolute}",{});const by=2e4;let vy,wy,_y,yy,Cy;function Sy(e){vy&&(wy.textContent!==e?(vh(_y),xy(wy,e)):(vh(wy),xy(_y,e)))}function ky(e){vy&&(yy.textContent!==e?(vh(Cy),xy(yy,e)):(vh(yy),xy(Cy,e)))}function xy(e,t){vh(e),t.length>by&&(t=t.substr(0,by)),e.textContent=t,e.style.visibility="hidden",e.style.visibility="visible"}const Ey=bc;let Dy=class extends Lb{get _targetWindow(){return lh(this._target.targetElements[0])}get _targetDocumentElement(){return lh(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return 2===this._hoverPosition?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,s,o){super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=s,this._accessibilityService=o,this._messageListeners=new Xt,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new ui),this._onRequestLayout=this._register(new ui),this._linkHandler=e.linkHandler||(t=>py(this._openerService,t,Yv(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Iy(e.target),this._hoverPointer=e.appearance?.showPointer?Ey("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Gb),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=e.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,(e=>e.stopPropagation())),this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.dispose()})),this._register(_h(this._targetWindow,"blur",(()=>this.dispose())));const r=Ey("div.hover-row.markdown-hover"),a=Ey("div.hover-contents");if("string"==typeof e.content)a.textContent=e.content,a.style.whiteSpace="pre-wrap";else if(e.content instanceof HTMLElement)a.appendChild(e.content),a.classList.add("html-hover-contents");else{const t=e.content,i=this._instantiationService.createInstance(gy,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||bb.fontFamily}),{element:n}=i.render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{a.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});a.appendChild(n)}if(r.appendChild(a),this._hover.contentsDomNode.appendChild(r),e.actions&&e.actions.length>0){const t=Ey("div.hover-row.status-bar"),i=Ey("div.actions");e.actions.forEach((e=>{const t=this._keybindingService.lookupKeybinding(e.commandId);t&&t.getLabel()})),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}let l;if(this._hoverContainer=Ey("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),l=!(e.actions&&e.actions.length>0)&&(void 0===e.persistence?.hideOnHover?"string"==typeof e.content||Yv(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover),l&&e.appearance?.showHoverHint){const e=Ey("div.hover-row.status-bar"),t=Ey("div.info");t.textContent=u("vs/editor/browser/services/hoverService/hoverWidget",0,"Hold {0} key to mouse over",M?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}const h=[...this._target.targetElements];l||h.push(this._hoverContainer);const c=this._register(new Ly(h));if(this._register(c.onMouseOut((()=>{this._isLocked||this.dispose()}))),l){const e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new Ly(e)),this._register(this._lockMouseTracker.onMouseOut((()=>{this._isLocked||this.dispose()})))}else this._lockMouseTracker=c}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=uc(this._hoverContainer,Ey("div")),n=dc(this._hoverContainer,Ey("div"));i.tabIndex=0,n.tabIndex=0,this._register(_h(n,"focus",(t=>{e.focus(),t.preventDefault()}))),this._register(_h(i,"focus",(e=>{t.focus(),e.preventDefault()})))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const e=i;if("number"==typeof e.tabIndex&&e.tabIndex>=0)return e}const n=this.findLastFocusableChild(i);if(n)return n}}render(e){e.appendChild(this._hoverContainer);const t=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(i=!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),n=this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel(),i&&n?u(jb,0,"Inspect this in the accessible view with {0}.",n):i?u(jb,1,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):"");var i,n;t&&ky(t),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=this._target.targetElements.map((e=>(e=>{const t=Mh(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}})(e))),{top:t,right:i,bottom:n,left:s}=e[0],o=i-s,r=n-t,a={top:t,right:i,bottom:n,left:s,width:o,height:r,center:{x:s+o/2,y:t+r/2}};if(this.adjustHorizontalHoverPosition(a),this.adjustVerticalHoverPosition(a),this.adjustHoverMaxHeight(a),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:a.left+=3,a.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:a.left-=3,a.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:a.top+=3,a.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:a.top-=3,a.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}a.center.x=a.left+o/2,a.center.y=a.top+r/2}this.computeXCordinate(a),this.computeYCordinate(a),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(a)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0!==this._target.x)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth=this._targetDocumentElement.clientWidth-e.right-i+"px":0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth=e.left-i+"px")}else if(1===this._hoverPosition){if(this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t){e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2}}else if(0===this._hoverPosition){if(e.left<this._hover.containerDomNode.clientWidth+t){this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2}e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1)}}adjustVerticalHoverPosition(e){if(void 0!==this._target.y||this._forcePosition)return;const t=this._hoverPointer?3:0;3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=2+(this._hoverPointer?3:0);3===this._hoverPosition?t=Math.min(t,e.top-i):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=e.center.y-(this._y-t)-3+"px":this._hoverPointer.style.top=Math.round(t/2)-3+"px";break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}hide(){this.dispose()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};Dy=Bs([zs(1,Bm),zs(2,Uo),zs(3,Yb),zs(4,s),zs(5,my)],Dy);class Ly extends Lb{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new ui),this._elements.forEach((e=>this.onmouseover(e,(()=>this._onTargetMouseOver(e))))),this._elements.forEach((e=>this.onmouseleave(e,(()=>this._onTargetMouseLeave(e)))))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=lh(e).setTimeout((()=>this._fireIfMouseOutside()),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(lh(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Iy{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Ty;!function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};const i=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return n-i<=0?{start:0,end:0}:{start:i,end:n}}function i(e){return e.end-e.start<=0}e.intersect=t,e.isEmpty=i,e.intersects=function(e,n){return!i(t(e,n))},e.relativeComplement=function(e,t){const n=[],s={start:e.start,end:Math.min(t.start,e.end)},o={start:Math.max(t.end,e.start),end:e.end};return i(s)||n.push(s),i(o)||n.push(o),n}}(Ty||(Ty={}));var Ny;function Ay(e,t,i){const n=i.mode===Ny.ALIGN?i.offset:i.offset+i.size,s=i.mode===Ny.ALIGN?i.offset+i.size:i.offset;return 0===i.position?t<=e-n?n:t<=s?s-t:Math.max(e-t,0):t<=s?s-t:t<=e-n?n:0}Pm(".context-view{position:absolute}.context-view.fixed{all:initial;color:inherit;font-family:inherit;font-size:13px;position:fixed}",{}),function(e){e[e.AVOID=0]="AVOID",e[e.ALIGN=1]="ALIGN"}(Ny||(Ny={}));class My extends Qt{static{this.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"]}static{this.BUBBLE_DOWN_EVENTS=["click"]}constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=Qt.None,this.toDisposeOnSetContainer=Qt.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=bc(".context-view"),wc(this.view),this.setContainer(e,t),this._register(Yt((()=>this.setContainer(null,1))))}setContainer(e,t){this.useFixedPosition=1!==t;const i=this.useShadowDOM;if(this.useShadowDOM=3===t,(e!==this.container||i!==this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=bc(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=Ry,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(bc("slot"))}else this.container.appendChild(this.view);const t=new Xt;My.BUBBLE_UP_EVENTS.forEach((e=>{t.add(Ch(this.container,e,(e=>{this.onDOMEvent(e,!1)})))})),My.BUBBLE_DOWN_EVENTS.forEach((e=>{t.add(Ch(this.container,e,(e=>{this.onDOMEvent(e,!0)}),!0))})),this.toDisposeOnSetContainer=t}}show(e){this.isVisible()&&this.hide(),vh(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",vc(this.view),this.toDisposeOnClean=e.render(this.view)||Qt.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){this.isVisible()&&(!1!==this.delegate.canRelayout||B&&sa?(this.delegate?.layout?.(),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(e instanceof HTMLElement){const i=Ah(e),n=Mh(e);t={top:i.top*n,left:i.left*n,width:i.width*n,height:i.height*n}}else t=function(e){const t=e;return!!t&&"number"==typeof t.x&&"number"==typeof t.y}(e)?{top:e.y,left:e.x,width:e.width||1,height:e.height||2}:{top:e.posy,left:e.posx,width:2,height:2};const i=Rh(this.view),n=Ph(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,r=this.delegate.anchorAxisAlignment||0;let a,l;const h=jh();if(0===r){const e={offset:t.top-h.pageYOffset,size:t.height,position:0===s?0:1},r={offset:t.left,size:t.width,position:0===o?0:1,mode:Ny.ALIGN};a=Ay(h.innerHeight,n,e)+h.pageYOffset,Ty.intersects({start:a,end:a+n},{start:e.offset,end:e.offset+e.size})&&(r.mode=Ny.AVOID),l=Ay(h.innerWidth,i,r)}else{const e={offset:t.left,size:t.width,position:0===o?0:1},r={offset:t.top,size:t.height,position:0===s?0:1,mode:Ny.ALIGN};l=Ay(h.innerWidth,i,e),Ty.intersects({start:l,end:l+i},{start:e.offset,end:e.offset+e.size})&&(r.mode=Ny.AVOID),a=Ay(h.innerHeight,n,r)+h.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===s?"bottom":"top"),this.view.classList.add(0===o?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const c=Ah(this.container);this.view.style.top=a-(this.useFixedPosition?Ah(this.view).top:c.top)+"px",this.view.style.left=l-(this.useFixedPosition?Ah(this.view).left:c.left)+"px",this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),wc(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,lh(e).document.activeElement):t&&!Bh(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}const Ry='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n';let Oy=class extends Qt{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new My(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer((()=>this.layout())))}showContextView(e,t,i){let n;n=t?t===this.layoutService.getContainer(lh(t))?1:i?3:2:1,this.contextView.setContainer(t??this.layoutService.activeContainer,n),this.contextView.show(e);const s={close:()=>{this.openContextView===s&&this.hideContextView()}};return this.openContextView=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};Oy=Bs([zs(0,Jc)],Oy);class Fy extends Oy{getContextViewElement(){return this.contextView.getViewElement()}}class Py{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(void 0===e||Ln(e)||e instanceof HTMLElement)n=e;else if(zn(e.markdown)){this._hoverWidget||this.show(u("vs/editor/browser/services/hoverService/updatableHoverWidget",0,"Loading..."),t),this._cancellationTokenSource=new ki;const i=this._cancellationTokenSource.token;if(n=await e.markdown(i),void 0===n&&(n=e.markdownNotSupportedFallback),this.isDisposed||i.isCancellationRequested)return}else n=e.markdown??e.markdownNotSupportedFallback;this.show(n,t,i)}show(e,t,i){const n=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!n},position:{hoverPosition:2},...i};this._hoverWidget=this.hoverDelegate.showHover(s,t)}n?.dispose()}hasContent(e){return!!e&&(!Yv(e)||!!e.value)}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}let By=class extends Qt{constructor(e,t,i,n,s){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=n,this._accessibilityService=s,t.onDidShowContextMenu((()=>this.hideHover())),this._contextViewHandler=this._register(new Oy(this._layoutService))}showHover(e,t,i){if(zy(this._currentHoverOptions)===zy(e))return;if(this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=e,this._lastHoverOptions=e;const n=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),s=Uh();i||(this._lastFocusedElementBeforeOpen=n&&s?s:void 0);const o=new Xt,r=this._instantiationService.createInstance(Dy,e);if(e.persistence?.sticky&&(r.isLocked=!0),r.onDispose((()=>{this._currentHover?.domNode&&qh(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()}),void 0,o),!e.container){const t=e.target instanceof HTMLElement?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(lh(t))}if(this._contextViewHandler.showContextView(new Wy(r,t),e.container),r.onRequestLayout((()=>this._contextViewHandler.layout()),void 0,o),e.persistence?.sticky)o.add(_h(lh(e.container).document,rc.MOUSE_DOWN,(e=>{Bh(e.target,r.domNode)||this.doHideHover()})));else{if("targetElements"in e.target)for(const t of e.target.targetElements)o.add(_h(t,rc.CLICK,(()=>this.hideHover())));else o.add(_h(e.target,rc.CLICK,(()=>this.hideHover())));const t=Uh();if(t){const i=lh(t).document;o.add(_h(t,rc.KEY_DOWN,(t=>this._keyDown(t,r,!!e.persistence?.hideOnKeyDown)))),o.add(_h(i,rc.KEY_DOWN,(t=>this._keyDown(t,r,!!e.persistence?.hideOnKeyDown)))),o.add(_h(t,rc.KEY_UP,(e=>this._keyUp(e,r)))),o.add(_h(i,rc.KEY_UP,(e=>this._keyUp(e,r))))}}if("IntersectionObserver"in Gr){const t=new IntersectionObserver((e=>this._intersectionChange(e,r)),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),o.add(Yt((()=>t.disconnect())))}return this._currentHover=r,r}hideHover(){!this._currentHover?.isLocked&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){if("Alt"===e.key)return void(t.isLocked=!0);const n=new xa(e);this._keybindingService.resolveKeyboardEvent(n).getSingleModifierDispatchChords().some((e=>!!e))||0!==this._keybindingService.softDispatch(n,n.target).kind||!i||this._currentHoverOptions?.trapFocus&&"Tab"===e.key||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupUpdatableHover(e,t,i,n){let s,o;t.setAttribute("custom-hover","true"),""!==t.title&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");const r=(t,i)=>{const n=void 0!==o;t&&(o?.dispose(),o=void 0),i&&(s?.dispose(),s=void 0),n&&(e.onDidHideHover?.(),o=void 0)},a=(s,r,a)=>new Ka((async()=>{o&&!o.isDisposed||(o=new Py(e,a||t,s>0),await o.update("function"==typeof i?i():i,r,n))}),s);let l=!1;const h=_h(t,rc.MOUSE_DOWN,(()=>{l=!0,r(!0,!0)}),!0),c=_h(t,rc.MOUSE_UP,(()=>{l=!1}),!0),d=_h(t,rc.MOUSE_LEAVE,(e=>{l=!1,r(!1,e.fromElement===t)}),!0),u=_h(t,rc.MOUSE_OVER,(i=>{if(s)return;const n=new Xt,o={targetElements:[t],dispose:()=>{}};if(void 0===e.placement||"mouse"===e.placement){const e=e=>{o.x=e.x+10,e.target instanceof HTMLElement&&Hy(e.target,t)!==t&&r(!0,!0)};n.add(_h(t,rc.MOUSE_MOVE,e,!0))}s=n,i.target instanceof HTMLElement&&Hy(i.target,t)!==t||n.add(a(e.delay,!1,o))}),!0),g=()=>{if(l||s)return;const i={targetElements:[t],dispose:()=>{}},n=new Xt;n.add(_h(t,rc.BLUR,(()=>r(!0,!0)),!0)),n.add(a(e.delay,!1,i)),s=n};let p;const f=t.tagName.toLowerCase();"input"!==f&&"textarea"!==f&&(p=_h(t,rc.FOCUS,g,!0));return{show:e=>{r(!1,!0)},hide:()=>{r(!0,!0)},update:async(e,t)=>{i=e,await(o?.update(i,void 0,t))},dispose:()=>{u.dispose(),d.dispose(),h.dispose(),c.dispose(),p?.dispose(),r(!0,!0)}}}};function zy(e){if(void 0!==e)return e?.id??e}By=Bs([zs(0,s),zs(1,Rm),zs(2,Bm),zs(3,Jc),zs(4,my)],By);class Wy{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function Hy(e,t){for(t=t??lh(e).document.body;!e.hasAttribute("custom-hover")&&e!==t;)e=e.parentElement;return e}jo(Am,By,1),xg(((e,t)=>{const i=e.getColor(xp);i&&(t.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`))}));const Vy=o("IWorkspaceEditService");class Uy{constructor(e){this.metadata=e}static convert(e){return e.edits.map((e=>{if(Ky.is(e))return Ky.lift(e);if(qy.is(e))return qy.lift(e);throw new Error("Unsupported edit")}))}}class Ky extends Uy{static is(e){return e instanceof Ky||In(e)&&Fe.isUri(e.resource)&&In(e.textEdit)}static lift(e){return e instanceof Ky?e:new Ky(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class qy extends Uy{static is(e){return e instanceof qy||In(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof qy?e:new qy(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}const $y=!0,jy=!0,Gy=!0,Yy=5e3,Xy=50,Qy=!0,Zy=!0,Jy=!1,eC="inherit",tC="advanced",iC={showMoves:!1,showEmptyDecorations:!0},nC={enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},sC=900,oC=!0,rC="vs/editor/common/config/editorConfigurationSchema",aC=Object.freeze({id:"editor",order:5,type:"object",title:u(rC,0,"Editor"),scope:5}),lC={...aC,properties:{"editor.tabSize":{type:"number",default:zm.tabSize,minimum:1,markdownDescription:u(rC,1,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:u(rC,2,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:zm.insertSpaces,markdownDescription:u(rC,3,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:zm.detectIndentation,markdownDescription:u(rC,4,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:zm.trimAutoWhitespace,description:u(rC,5,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:zm.largeFileOptimizations,description:u(rC,6,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[u(rC,7,"Turn off Word Based Suggestions."),u(rC,8,"Only suggest words from the active document."),u(rC,9,"Suggest words from all open documents of the same language."),u(rC,10,"Suggest words from all open documents.")],description:u(rC,11,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[u(rC,12,"Semantic highlighting enabled for all color themes."),u(rC,13,"Semantic highlighting disabled for all color themes."),u(rC,14,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:u(rC,15,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:u(rC,16,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:u(rC,17,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:u(rC,18,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:u(rC,19,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:u(rC,20,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:u(rC,21,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:u(rC,22,"The opening bracket character or string sequence.")},{type:"string",description:u(rC,23,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:u(rC,24,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:u(rC,22,"The opening bracket character or string sequence.")},{type:"string",description:u(rC,23,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Yy,description:u(rC,25,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Xy,description:u(rC,26,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:$y,description:u(rC,27,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:sC,description:u(rC,28,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:oC,description:u(rC,29,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:jy,description:u(rC,30,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Gy,description:u(rC,31,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Qy,description:u(rC,32,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Zy,description:u(rC,33,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Jy,description:u(rC,34,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:eC,markdownEnumDescriptions:[u(rC,35,"Lines will never wrap."),u(rC,36,"Lines will wrap at the viewport width."),u(rC,37,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:tC,markdownEnumDescriptions:[u(rC,38,"Uses the legacy diffing algorithm."),u(rC,39,"Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:nC.enabled,markdownDescription:u(rC,40,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:nC.revealLineCount,markdownDescription:u(rC,41,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:nC.minimumLineCount,markdownDescription:u(rC,42,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:nC.contextLineCount,markdownDescription:u(rC,43,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:iC.showMoves,markdownDescription:u(rC,44,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:iC.showEmptyDecorations,description:u(rC,45,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};for(const e of vb){const t=e.schema;if(void 0!==t)if(void 0!==(hC=t).type||void 0!==hC.anyOf)lC.properties[`editor.${e.name}`]=t;else for(const e in t)Object.hasOwnProperty.call(t,e)&&(lC.properties[e]=t[e])}var hC;Jo.as(ur).registerConfiguration(lC);class cC{static insert(e,t){return{range:new Io(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}const dC=o("modelService"),uC=o("textModelService");const gC=o("textResourceConfigurationService"),pC=o("textResourcePropertiesService"),fC=o("commandService"),mC=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new ui,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"==typeof e){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const t=[];for(const i of e.metadata.args)t.push(i.constraint);const i=e.handler;e.handler=function(e,...n){return function(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)Wn(e[n],t[n])}(n,t),i(e,...n)}}const{id:i}=e;let n=this._commands.get(i);n||(n=new ii,this._commands.set(i,n));const s=n.unshift(e),o=Yt((()=>{s();const e=this._commands.get(i);e?.isEmpty()&&this._commands.delete(i)}));return this._onDidRegisterCommand.fire(i),o}registerCommandAlias(e,t){return mC.registerCommand(e,((e,...i)=>e.get(fC).executeCommand(t,...i)))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return It.first(t)}getCommands(){const e=new Map;for(const t of this._commands.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};function bC(e){return Object.isFrozen(e)?e:function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();for(const i in e)if(Vn.call(e,i)){const n=e[i];"object"!=typeof n||Object.isFrozen(n)||Tn(n)||t.push(n)}}return e}(e)}mC.registerCommand("noop",(()=>{}));class vC{static createEmptyModel(e){return new vC({},[],[],void 0,e)}constructor(e,t,i,n,s){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.logService=s,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const e=this.raw.map((e=>{if(e instanceof vC)return e;const t=new wC("",this.logService);return t.parseRaw(e),t.configurationModel}));this._rawConfiguration=e.reduce(((e,t)=>t===e?t:e.merge(t)),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?ar(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return bC(i.rawConfiguration.getValue(e))},get override(){return t?bC(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return bC(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const t=[];for(const{contents:n,identifiers:s,keys:o}of i.rawConfiguration.overrides){const r=new vC(n,o,[],void 0,i.logService).getValue(e);void 0!==r&&t.push({identifiers:s,value:r})}return t.length?bC(t):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?ar(i,e):i:void 0}getKeysForOverrideIdentifier(e){const t=[];for(const i of this.overrides)i.identifiers.includes(e)&&t.push(...i.keys);return ct(t)}getAllOverrideIdentifiers(){const e=[];for(const t of this.overrides)e.push(...t.identifiers);return ct(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Hn(this.contents),i=Hn(this.overrides),n=[...this.keys],s=this.raw?.length?[...this.raw]:[this];for(const o of e)if(s.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.mergeContents(t,o.contents);for(const e of o.overrides){const[t]=i.filter((t=>at(t.identifiers,e.identifiers)));t?(this.mergeContents(t.contents,e.contents),t.keys.push(...e.keys),t.keys=ct(t.keys)):i.push(Hn(e))}for(const e of o.keys)-1===n.indexOf(e)&&n.push(e)}return new vC(t,n,i,s.every((e=>e instanceof vC))?void 0:s,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;const i={};for(const e of ct([...Object.keys(this.contents),...Object.keys(t)])){let n=this.contents[e];const s=t[e];s&&("object"==typeof n&&"object"==typeof s?(n=Hn(n),this.mergeContents(n,s)):n=s),i[e]=n}return new vC(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t))i in e&&In(e[i])&&In(t[i])?this.mergeContents(e[i],t[i]):e[i]=Hn(t[i])}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=e=>{e&&(i?this.mergeContents(i,e):i=Hn(e))};for(const i of this.overrides)1===i.identifiers.length&&i.identifiers[0]===e?t=i.contents:i.identifiers.includes(e)&&n(i.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),or(this.contents,e),xr.test(e)&&this.overrides.splice(this.overrides.findIndex((t=>at(t.identifiers,Er(e)))),1))}updateValue(e,t,i){sr(this.contents,e,t,(e=>this.logService.error(e))),(i=i||-1===this.keys.indexOf(e))&&this.keys.push(e),xr.test(e)&&this.overrides.push({identifiers:Er(e),keys:Object.keys(this.contents[e]),contents:nr(this.contents[e],(e=>this.logService.error(e)))})}}class wC{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||vC.createEmptyModel(this.logService)}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(e,t){if(!Rn(e)){const i=this.doParseContent(e);this.parseRaw(i,t)}}reparse(e){this._raw&&this.parseRaw(this._raw,e)}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:s,restricted:o,hasExcludedProperties:r}=this.doParseRaw(e,t);this._configurationModel=new vC(i,n,s,r?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseContent(e){let t={},i=null,n=[];const s=[];function o(e){Array.isArray(n)?n.push(e):null!==i&&(n[i]=e)}const r={onObjectBegin:()=>{const e={};o(e),s.push(n),n=e,i=null},onObjectProperty:e=>{i=e},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{const e=[];o(e),s.push(n),n=e,i=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:o,onError:(e,t,i)=>{}};if(e)try{Rs(e,r),t=n[0]||{}}catch(e){this.logService.error(`Error while parsing settings file ${this._name}: ${e}`),this._parseErrors=[e]}return t}doParseRaw(e,t){const i=Jo.as(ur).getConfigurationProperties(),n=this.filter(e,i,!0,t);return{contents:nr(e=n.raw,(e=>this.logService.error(`Conflict in settings file ${this._name}: ${e}`))),keys:Object.keys(e),overrides:this.toOverrides(e,(e=>this.logService.error(`Conflict in settings file ${this._name}: ${e}`))),restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){let s=!1;if(!n?.scopes&&!n?.skipRestricted&&!n?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const o={},r=[];for(const a in e)if(xr.test(a)&&i){const i=this.filter(e[a],t,!1,n);o[a]=i.raw,s=s||i.hasExcludedProperties,r.push(...i.restricted)}else{const i=t[a],l=i?void 0!==i.scope?i.scope:3:void 0;i?.restricted&&r.push(a),n.exclude?.includes(a)||!n.include?.includes(a)&&(void 0!==l&&void 0!==n.scopes&&!n.scopes.includes(l)||n.skipRestricted&&i?.restricted)?s=!0:o[a]=e[a]}return{raw:o,restricted:r,hasExcludedProperties:s}}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(xr.test(n)){const s={};for(const t in e[n])s[t]=e[n][t];i.push({identifiers:Er(n),keys:Object.keys(s),contents:nr(s,t)})}return i}}class _C{constructor(e,t,i,n,s,o,r,a,l,h,c,d,u){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=s,this.policyConfiguration=o,this.applicationConfiguration=r,this.userConfiguration=a,this.localUserConfiguration=l,this.remoteUserConfiguration=h,this.workspaceConfiguration=c,this.folderConfigurationModel=d,this.memoryConfigurationModel=u}get value(){return bC(this._value)}toInspectValue(e){return void 0!==e?.value||void 0!==e?.override||void 0!==e?.overrides?e:void 0}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.toInspectValue(this.defaultInspectValue)}get policyInspectValue(){return void 0===this._policyInspectValue&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){return this.policyInspectValue?.merged}get policy(){return void 0!==this.policyInspectValue?.value?{value:this.policyInspectValue.value}:void 0}get applicationInspectValue(){return void 0===this._applicationInspectValue&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){return this.applicationInspectValue?.merged}get application(){return this.toInspectValue(this.applicationInspectValue)}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.toInspectValue(this.userInspectValue)}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.toInspectValue(this.userLocalInspectValue)}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.toInspectValue(this.userRemoteInspectValue)}get workspaceInspectValue(){return void 0===this._workspaceInspectValue&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){return this.workspaceInspectValue?.merged}get workspace(){return this.toInspectValue(this.workspaceInspectValue)}get workspaceFolderInspectValue(){return void 0===this._workspaceFolderInspectValue&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){return this.workspaceFolderInspectValue?.merged}get workspaceFolder(){return this.toInspectValue(this.workspaceFolderInspectValue)}get memoryInspectValue(){return void 0===this._memoryInspectValue&&(this._memoryInspectValue=this.memoryConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier)),this._memoryInspectValue}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.toInspectValue(this.memoryInspectValue)}}let yC=class e{constructor(e,t,i,n,s,o,r,a,l,h){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=r,this._memoryConfiguration=a,this._memoryConfigurationByResource=l,this.logService=h,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new At,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=vC.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,r=new Set;for(const t of n.overrides)for(const i of t.identifiers)void 0!==n.getOverrideValue(e,i)&&r.add(i);return new _C(e,t,n.getValue(e),r.size?[...r]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,o)}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this._workspaceConfiguration.keys.slice(0),workspaceFolder:t?t.keys.slice(0):[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){const i=[];if(!t){const{added:i,updated:n,removed:s}=SC(this._defaultConfiguration,e);t=[...i,...n,...s]}for(const n of t)for(const t of Er(n)){const n=this._defaultConfiguration.getKeysForOverrideIdentifier(t),s=e.getKeysForOverrideIdentifier(t),o=[...s.filter((e=>-1===n.indexOf(e))),...n.filter((e=>-1===s.indexOf(e))),...n.filter((i=>!qn(this._defaultConfiguration.override(t).getValue(i),e.override(t).getValue(i))))];i.push([t,o])}return this.updateDefaultConfiguration(e),{keys:t,overrides:i}}compareAndUpdatePolicyConfiguration(e){const{added:t,updated:i,removed:n}=SC(this._policyConfiguration,e),s=[...t,...i,...n];return s.length&&this.updatePolicyConfiguration(e),{keys:s,overrides:[]}}compareAndUpdateApplicationConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=SC(this.applicationConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateApplicationConfiguration(e),{keys:o,overrides:s}}compareAndUpdateLocalUserConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=SC(this.localUserConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateLocalUserConfiguration(e),{keys:o,overrides:s}}compareAndUpdateRemoteUserConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=SC(this.remoteUserConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateRemoteUserConfiguration(e),{keys:o,overrides:s}}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=SC(this.workspaceConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateWorkspaceConfiguration(e),{keys:o,overrides:s}}compareAndUpdateFolderConfiguration(e,t){const i=this.folderConfigurations.get(e),{added:n,updated:s,removed:o,overrides:r}=SC(i,t),a=[...n,...s,...o];return!a.length&&i||this.updateFolderConfiguration(e,t),{keys:a,overrides:r}}compareAndDeleteFolderConfiguration(e){const t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);const{added:i,updated:n,removed:s,overrides:o}=SC(t,void 0);return{keys:[...i,...n,...s],overrides:o}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),this._policyConfiguration.isEmpty()||void 0===this._policyConfiguration.getValue(e)||(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const s=this._memoryConfigurationByResource.get(e);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((e,t)=>{const{contents:i,overrides:n,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:s}]),e}),[])}}allKeys(){const e=new Set;return this._defaultConfiguration.keys.forEach((t=>e.add(t))),this.userConfiguration.keys.forEach((t=>e.add(t))),this._workspaceConfiguration.keys.forEach((t=>e.add(t))),this._folderConfigurations.forEach((t=>t.keys.forEach((t=>e.add(t))))),[...e.values()]}allOverrideIdentifiers(){const e=new Set;return this._defaultConfiguration.getAllOverrideIdentifiers().forEach((t=>e.add(t))),this.userConfiguration.getAllOverrideIdentifiers().forEach((t=>e.add(t))),this._workspaceConfiguration.getAllOverrideIdentifiers().forEach((t=>e.add(t))),this._folderConfigurations.forEach((t=>t.getAllOverrideIdentifiers().forEach((t=>e.add(t))))),[...e.values()]}getAllKeysForOverrideIdentifier(e){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))),this._folderConfigurations.forEach((i=>i.getKeysForOverrideIdentifier(e).forEach((e=>t.add(e))))),[...t.values()]}static parse(t,i){const n=this.parseConfigurationModel(t.defaults,i),s=this.parseConfigurationModel(t.policy,i),o=this.parseConfigurationModel(t.application,i),r=this.parseConfigurationModel(t.user,i),a=this.parseConfigurationModel(t.workspace,i),l=t.folders.reduce(((e,t)=>(e.set(Fe.revive(t[0]),this.parseConfigurationModel(t[1],i)),e)),new At);return new e(n,s,o,r,vC.createEmptyModel(i),a,l,vC.createEmptyModel(i),new At,i)}static parseConfigurationModel(e,t){return new vC(e.contents,e.keys,e.overrides,void 0,t)}};class CC{constructor(e,t,i,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this.logService=s,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const t of e.keys)this.affectedKeys.add(t);for(const[,t]of e.overrides)for(const e of t)this.affectedKeys.add(e);this._affectsConfigStr=this._marker;for(const e of this.affectedKeys)this._affectsConfigStr+=e+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=yC.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){const i=this._marker+e,n=this._affectsConfigStr.indexOf(i);if(n<0)return!1;const s=n+i.length;if(s>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(s);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){return!qn(this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace))}return!0}}function SC(e,t){const{added:i,removed:n,updated:s}=kC(t?.rawConfiguration,e?.rawConfiguration),o=[],r=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const e=a.filter((e=>!r.includes(e)));for(const i of e)o.push([i,t.getKeysForOverrideIdentifier(i)])}if(e){const t=r.filter((e=>!a.includes(e)));for(const i of t)o.push([i,e.getKeysForOverrideIdentifier(i)])}if(t&&e)for(const i of r)if(a.includes(i)){const n=kC({contents:e.getOverrideValue(void 0,i)||{},keys:e.getKeysForOverrideIdentifier(i)},{contents:t.getOverrideValue(void 0,i)||{},keys:t.getKeysForOverrideIdentifier(i)});o.push([i,[...n.added,...n.removed,...n.updated]])}return{added:i,removed:n,updated:s,overrides:o}}function kC(e,t){const i=e?t?e.keys.filter((e=>-1===t.keys.indexOf(e))):[...e.keys]:[],n=t?e?t.keys.filter((t=>-1===e.keys.indexOf(t))):[...t.keys]:[],s=[];if(e&&t)for(const i of t.keys)if(-1!==e.keys.indexOf(i)){qn(ar(t.contents,i),ar(e.contents,i))||s.push(i)}return{added:i,removed:n,updated:s}}const xC=new class{constructor(){this._onDidChange=new ui,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}},EC={kind:0},DC={kind:1};class LC{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const t of e){const e=t.command;e&&"-"!==e.charAt(0)&&this._defaultBoundCommands.set(e,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=LC.handleRemovals([].concat(e).concat(t));for(let e=0,t=this._keybindings.length;e<t;e++){const t=this._keybindings[e];if(0===t.chords.length)continue;const i=t.when?.substituteConstants();i&&0===i.type||this._addKeyPress(t.chords[0],t)}}static _isTargetedForRemoval(e,t,i){if(t)for(let i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1;if(i&&1!==i.type){if(!e.when)return!1;if(!function(e,t){const i=e?e.substituteConstants():void 0,n=t?t.substituteConstants():void 0;return!i&&!n||!(!i||!n)&&i.equals(n)}(i,e.when))return!1}return!0}static handleRemovals(e){const t=new Map;for(let i=0,n=e.length;i<n;i++){const n=e[i];if(n.command&&"-"===n.command.charAt(0)){const e=n.command.substring(1);t.has(e)?t.get(e).push(n):t.set(e,[n])}}if(0===t.size)return e;const i=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];if(!s.command||0===s.command.length){i.push(s);continue}if("-"===s.command.charAt(0))continue;const o=t.get(s.command);if(!o||!s.isDefault){i.push(s);continue}let r=!1;for(const e of o){const t=e.when;if(this._isTargetedForRemoval(s,e.chords,t)){r=!0;break}}r||i.push(s)}return i}_addKeyPress(e,t){const i=this._map.get(e);if(void 0===i)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let e=i.length-1;e>=0;e--){const n=i[e];if(n.command===t.command)continue;let s=!0;for(let e=1;e<n.chords.length&&e<t.chords.length;e++)if(n.chords[e]!==t.chords[e]){s=!1;break}s&&(LC.whenIsEntirelyIncluded(n.when,t.when)&&this._removeFromLookupMap(n))}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(void 0!==t)for(let i=0,n=t.length;i<n;i++)if(t[i]===e)return void t.splice(i,1)}static whenIsEntirelyIncluded(e,t){return!t||1===t.type||!(!e||1===e.type)&&xu(e,t)}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(void 0===t||0===t.length)return[];const i=[];let n=0;for(let e=t.length-1;e>=0;e--)i[n++]=t[e];return i}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(void 0===i||0===i.length)return null;if(1===i.length)return i[0];for(let e=i.length-1;e>=0;e--){const n=i[e];if(t.contextMatchesRules(n.when))return n}return i[i.length-1]}resolve(e,t,i){const n=[...t,i];this._log(`| Resolving ${n}`);const s=this._map.get(n[0]);if(void 0===s)return this._log("\\ No keybinding entries."),EC;let o=null;if(n.length<2)o=s;else{o=[];for(let e=0,t=s.length;e<t;e++){const t=s[e];if(n.length>t.chords.length)continue;let i=!0;for(let e=1;e<n.length;e++)if(t.chords[e]!==n[e]){i=!1;break}i&&o.push(t)}}const r=this._findCommand(e,o);return r?n.length<r.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${r.chords.length-n.length} more chord(s), when: ${IC(r.when)}, source: ${TC(r)}.`),DC):(this._log(`\\ From ${o.length} keybinding entries, matched ${r.command}, when: ${IC(r.when)}, source: ${TC(r)}.`),a=r.command,l=r.commandArgs,h=r.bubble,{kind:2,commandId:a,commandArgs:l,isBubble:h}):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),EC);var a,l,h}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(LC._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return!t||t.evaluate(e)}}function IC(e){return e?`${e.serialize()}`:"no when condition"}function TC(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?"built-in":"user"}const NC="vs/platform/keybinding/common/abstractKeybindingService",AC=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class MC extends Qt{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:oi.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=s,this._onDidUpdateKeybindings=this._register(new ui),this._currentChords=[],this._currentChordChecker=new qa,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=RC.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ka,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}toggleLogging(){return this._logging=!this._logging,this._logging}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return lt(this._getResolver().lookupKeybindings(e).map((e=>e.resolvedKeybinding)))}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),EC;const[n]=i.getDispatchChords();if(null===n)return this._log("\\ Keyboard event cannot be dispatched"),EC;const s=this._contextKeyService.getContext(t),o=this._currentChords.map((({keypress:e})=>e));return this._getResolver().resolve(s,o,n)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet((()=>{this._documentHasFocus()?Date.now()-e>5e3&&this._leaveChordMode():this._leaveChordMode()}),500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw tt("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(u(NC,0,"({0}) was pressed. Waiting for second key of chord...",t));break;default:{const e=this._currentChords.map((({label:e})=>e)).join(", ");this._currentChordStatusMessage=this._notificationService.status(u(NC,1,"({0}) was pressed. Waiting for next key of chord...",e))}}this._scheduleLeaveChordMode(),xC.enabled&&xC.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],xC.enable()}dispatchByUserSettingsLabel(e,t){this._log(`/ Dispatching keybinding triggered via menu entry accelerator - ${e}`);const i=this.resolveUserBinding(e);0===i.length?this._log(`\\ Could not resolve - ${e}`):this._doDispatch(i[0],t,!1)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=RC.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=RC.EMPTY,null===this._currentSingleModifier?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null}),300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=i.getChords();return this._ignoreSingleModifiers=new RC(s),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let n=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let s=null,o=null;if(i){const[t]=e.getSingleModifierDispatchChords();s=t,o=t?[t]:[]}else[s]=e.getDispatchChords(),o=this._currentChords.map((({keypress:e})=>e));if(null===s)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const r=this._contextKeyService.getContext(t),a=e.getLabel(),l=this._getResolver().resolve(r,o,s);switch(l.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",a,"[ No matching keybinding ]"),this.inChordMode){const e=this._currentChords.map((({label:e})=>e)).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${e}, ${a}".`),this._notificationService.status(u(NC,2,"The key combination ({0}, {1}) is not a command.",e,a),{hideAfter:1e4}),this._leaveChordMode(),n=!0}return n;case 1:return this._logService.trace("KeybindingService#dispatch",a,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(s,a),this._log(1===this._currentChords.length?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case 2:if(this._logService.trace("KeybindingService#dispatch",a,`[ Will dispatch command ${l.commandId} ]`),null===l.commandId||""===l.commandId){if(this.inChordMode){const e=this._currentChords.map((({label:e})=>e)).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${e}, ${a}".`),this._notificationService.status(u(NC,2,"The key combination ({0}, {1}) is not a command.",e,a),{hideAfter:1e4}),this._leaveChordMode(),n=!0}}else{this.inChordMode&&this._leaveChordMode(),l.isBubble||(n=!0),this._log(`+ Invoking command ${l.commandId}.`),this._currentlyDispatchingCommandId=l.commandId;try{void 0===l.commandArgs?this._commandService.executeCommand(l.commandId).then(void 0,(e=>this._notificationService.warn(e))):this._commandService.executeCommand(l.commandId,l.commandArgs).then(void 0,(e=>this._notificationService.warn(e)))}finally{this._currentlyDispatchingCommandId=null}AC.test(l.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:l.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return n}}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}}class RC{static{this.EMPTY=new RC(null)}constructor(e){this._ctrlKey=!!e&&e.ctrlKey,this._shiftKey=!!e&&e.shiftKey,this._altKey=!!e&&e.altKey,this._metaKey=!!e&&e.metaKey}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}class OC{constructor(){this._coreKeybindings=new ii,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(1===$){if(e&&e.win)return e.win}else if(2===$){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=OC.bindToCurrentPlatform(e),i=new Xt;if(t&&t.primary){const n=ba(t.primary,$);n&&i.add(this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const s=ba(t.secondary[n],$);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-n-1,e.when))}return i}setExtensionKeybindings(e){const t=[];let i=0;for(const n of e)n.keybinding&&(t[i++]={keybinding:n.keybinding,command:n.id,commandArgs:n.args,when:n.when,weight1:n.weight,weight2:0,extensionId:n.extensionId||null,isBuiltinExtension:n.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Gt(this.registerKeybindingRule(e),mC.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,s,o){const r=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:n,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Yt((()=>{r(),this._cachedMergedKeybindings=null}))}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(PC)),this._cachedMergedKeybindings.slice(0)}}const FC=new OC;function PC(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}Jo.add("platform.keybindingsRegistry",FC);class BC{constructor(e,t,i,n,s,o,r){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?zC(e.getDispatchChords()):[],e&&0===this.chords.length&&(this.chords=zC(e.getSingleModifierDispatchChords())),this.bubble=!!t&&94===t.charCodeAt(0),this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=s,this.extensionId=o,this.isBuiltinExtension=r}}function zC(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n)return[];t.push(n)}return t}const WC="vs/base/common/keybindingLabels";class HC{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(0===t.length)return null;const n=[];for(let s=0,o=t.length;s<o;s++){const o=t[s],r=i(o);if(null===r)return null;n[s]=$C(o,r,this.modifierLabels[e])}return n.join(" ")}}const VC=new HC({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:u(WC,0,"Ctrl"),shiftKey:u(WC,1,"Shift"),altKey:u(WC,2,"Alt"),metaKey:u(WC,3,"Windows"),separator:"+"},{ctrlKey:u(WC,0,"Ctrl"),shiftKey:u(WC,1,"Shift"),altKey:u(WC,2,"Alt"),metaKey:u(WC,4,"Super"),separator:"+"}),UC=new HC({ctrlKey:u(WC,5,"Control"),shiftKey:u(WC,6,"Shift"),altKey:u(WC,7,"Option"),metaKey:u(WC,8,"Command"),separator:"+"},{ctrlKey:u(WC,5,"Control"),shiftKey:u(WC,6,"Shift"),altKey:u(WC,9,"Alt"),metaKey:u(WC,10,"Windows"),separator:"+"},{ctrlKey:u(WC,5,"Control"),shiftKey:u(WC,6,"Shift"),altKey:u(WC,9,"Alt"),metaKey:u(WC,11,"Super"),separator:"+"}),KC=new HC({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),qC=new HC({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function $C(e,t,i){if(null===t)return"";const n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),""!==t&&n.push(t),n.join(i.separator)}class jC extends Ca{constructor(e,t){if(super(),0===t.length)throw et("chords");this._os=e,this._chords=t}getLabel(){return VC.toLabel(this._os,this._chords,(e=>this._getLabel(e)))}getAriaLabel(){return UC.toLabel(this._os,this._chords,(e=>this._getAriaLabel(e)))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:KC.toLabel(this._os,this._chords,(e=>this._getElectronAccelerator(e)))}getUserSettingsLabel(){return qC.toLabel(this._os,this._chords,(e=>this._getUserSettingsLabel(e)))}isWYSIWYG(){return this._chords.every((e=>this._isWYSIWYG(e)))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map((e=>this._getChord(e)))}_getChord(e){return new ya(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map((e=>this._getChordDispatch(e)))}getSingleModifierDispatchChords(){return this._chords.map((e=>this._getSingleModifierChordDispatch(e)))}}class GC extends jC{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return ma.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":ma.toString(e.keyCode)}_getElectronAccelerator(e){return ma.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=ma.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_isWYSIWYG(){return!0}_getChordDispatch(e){return GC.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ma.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(e){const t=pa[e];if(-1!==t)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof wa)return e;const t=this._scanCodeToKeyCode(e.scanCode);return 0===t?null:new wa(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=zC(e.chords.map((e=>this._toKeyCodeChord(e))));return i.length>0?[new GC(i,t)]:[]}}const YC=o("labelService");var XC,QC,ZC;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"}(XC||(XC={})),function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"}(QC||(QC={})),function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"}(ZC||(ZC={}));class JC{constructor(){this.progress=new eS,this.onDidClose=oi.None,this.onDidChangeVisibility=oi.None}updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}}class eS{infinite(){}done(){}total(e){}worked(e){}}const tS=o("progressService"),iS=o("editorProgressService"),nS=o("telemetryService");o("customEndpointTelemetryService");class sS{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class oS{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?Wi(e,this._value,0,e.length,this._from,this._to):Vi(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class rS{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?Wi(e,this._value,0,e.length,this._from,this._to):Vi(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class aS{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new rS(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return Hi(e,this._value.scheme);if(2===this._states[this._stateIdx])return Hi(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return zi(e,this._value.query);if(5===this._states[this._stateIdx])return zi(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class lS{constructor(){this.height=1}isEmpty(){return!(this.left||this.mid||this.right||this.value)}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class hS{static forUris(e=(()=>!1),t=(()=>!1)){return new hS(new aS(e,t))}static forPaths(e=!1){return new hS(new rS(void 0,!e))}static forStrings(){return new hS(new sS)}static forConfigKeys(){return new hS(new oS)}constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){const i=t.slice(0);ft(i);for(const t of i)this.set(t,e)}else{const t=e.slice(0);ft(t);for(const e of t)this.set(e[0],e[1])}}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new lS,this._root.segment=i.value());const s=[];for(n=this._root;;){const e=i.cmp(n.segment);if(e>0)n.left||(n.left=new lS,n.left.segment=i.value()),s.push([-1,n]),n=n.left;else if(e<0)n.right||(n.right=new lS,n.right.segment=i.value()),s.push([1,n]),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new lS,n.mid.segment=i.value()),s.push([0,n]),n=n.mid}}const o=n.value;n.value=t,n.key=e;for(let e=s.length-1;e>=0;e--){const t=s[e][1];t.updateHeight();const i=t.balanceFactor();if(i<-1||i>1){const i=s[e][0],n=s[e+1][0];if(1===i&&1===n)s[e][1]=t.rotateLeft();else if(-1===i&&-1===n)s[e][1]=t.rotateRight();else if(1===i&&-1===n)t.right=s[e+1][1]=s[e+1][1].rotateRight(),s[e][1]=t.rotateLeft();else{if(-1!==i||1!==n)throw new Error;t.left=s[e+1][1]=s[e+1][1].rotateLeft(),s[e][1]=t.rotateRight()}if(e>0)switch(s[e-1][0]){case-1:s[e-1][1].left=s[e][1];break;case 1:s[e-1][1].right=s[e][1];break;case 0:s[e-1][1].mid=s[e][1]}else this._root=s[0][1]}}return o}get(e){return this._getNode(e)?.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i}has(e){const t=this._getNode(e);return!(void 0===t?.value&&void 0===t?.mid)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let s=this._root;for(;s;){const e=i.cmp(s.segment);if(e>0)n.push([-1,s]),s=s.left;else if(e<0)n.push([1,s]),s=s.right;else{if(!i.hasNext())break;i.next(),n.push([0,s]),s=s.mid}}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const e=this._min(s.right);if(e.key){const{key:t,value:i,segment:n}=e;this._delete(e.key,!1),s.key=t,s.value=i,s.segment=n}}else{const e=s.left??s.right;if(n.length>0){const[t,i]=n[n.length-1];switch(t){case-1:i.left=e;break;case 0:i.mid=e;break;case 1:i.right=e}}else this._root=e}for(let e=n.length-1;e>=0;e--){const t=n[e][1];t.updateHeight();const i=t.balanceFactor();if(i>1?(t.right.balanceFactor()>=0||(t.right=t.right.rotateRight()),n[e][1]=t.rotateLeft()):i<-1&&(t.left.balanceFactor()<=0||(t.left=t.left.rotateLeft()),n[e][1]=t.rotateRight()),e>0)switch(n[e-1][0]){case-1:n[e-1][1].left=n[e][1];break;case 1:n[e-1][1].right=n[e][1];break;case 0:n[e-1][1].mid=n[e][1]}else this._root=n[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i,n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),i=n.value||i,n=n.mid}}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const e=i.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!i.hasNext())return n.mid?this._entries(n.mid):t?n.value:void 0;i.next(),n=n.mid}}}hasElementOrSubtree(e){return void 0!==this._findSuperstrOrElement(e,!0)}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){const e=t=>{if(!t)return!0;const i=t.balanceFactor();return!(i<-1||i>1)&&(e(t.left)&&e(t.right))};return e(this._root)}}function cS(e){const t=e;return"string"==typeof t?.id&&Fe.isUri(t.uri)}function dS(e){const t=e;return"string"==typeof t?.id&&Fe.isUri(t.configPath)}class uS{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return ms(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const gS="code-workspace";u("vs/platform/workspace/common/workspace",0,"Code Workspace");const pS="4064f6ec-cb38-4ad0-af64-ee6467e63c82";const fS=o("contextService"),mS="vs/editor/common/standaloneStrings";var bS,vS,wS,_S,yS;!function(e){e.accessibilityHelpTitle=u(mS,0,"Accessibility Help"),e.openingDocs=u(mS,1,"Opening the Accessibility documentation page."),e.readonlyDiffEditor=u(mS,2,"You are in a read-only pane of a diff editor."),e.editableDiffEditor=u(mS,3,"You are in a pane of a diff editor."),e.readonlyEditor=u(mS,4,"You are in a read-only code editor."),e.editableEditor=u(mS,5,"You are in a code editor."),e.changeConfigToOnMac=u(mS,6,"Configure the application to be optimized for usage with a Screen Reader (Command+E)."),e.changeConfigToOnWinLinux=u(mS,7,"Configure the application to be optimized for usage with a Screen Reader (Control+E)."),e.auto_on=u(mS,8,"The application is configured to be optimized for usage with a Screen Reader."),e.auto_off=u(mS,9,"The application is configured to never be optimized for usage with a Screen Reader."),e.screenReaderModeEnabled=u(mS,10,"Screen Reader Optimized Mode enabled."),e.screenReaderModeDisabled=u(mS,11,"Screen Reader Optimized Mode disabled."),e.tabFocusModeOnMsg=u(mS,12,"Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior {0}."),e.tabFocusModeOnMsgNoKb=u(mS,13,"Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),e.stickScrollKb=u(mS,14,"Focus Sticky Scroll ({0}) to focus the currently nested scopes."),e.stickScrollNoKb=u(mS,15,"Focus Sticky Scroll to focus the currently nested scopes. It is currently not triggerable by a keybinding."),e.tabFocusModeOffMsg=u(mS,16,"Pressing Tab in the current editor will insert the tab character. Toggle this behavior {0}."),e.tabFocusModeOffMsgNoKb=u(mS,17,"Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),e.showAccessibilityHelpAction=u(mS,18,"Show Accessibility Help"),e.listSignalSounds=u(mS,19,"Run the command: List Signal Sounds for an overview of all sounds and their current status."),e.listAlerts=u(mS,20,"Run the command: List Signal Announcements for an overview of announcements and their current status."),e.quickChat=u(mS,21,"Toggle quick chat ({0}) to open or close a chat session."),e.quickChatNoKb=u(mS,22,"Toggle quick chat is not currently triggerable by a keybinding."),e.startInlineChat=u(mS,23,"Start inline chat ({0}) to create an in editor chat session."),e.startInlineChatNoKb=u(mS,24,"The command: Start inline chat is not currentlyt riggerable by a keybinding.")}(bS||(bS={})),function(e){e.inspectTokensAction=u(mS,25,"Developer: Inspect Tokens")}(vS||(vS={})),function(e){e.editorViewAccessibleLabel=u(mS,32,"Editor content"),e.accessibilityHelpMessage=u(mS,33,"Press Alt+F1 for Accessibility Options.")}(wS||(wS={})),function(e){e.toggleHighContrast=u(mS,34,"Toggle High Contrast Theme")}(_S||(_S={})),function(e){e.bulkEditServiceSummary=u(mS,35,"Made {0} edits in {1} files")}(yS||(yS={}));o("workspaceTrustEnablementService");const CS=o("workspaceTrustManagementService");o("workspaceTrustRequestService");let SS=[],kS=[],xS=[];function ES(e,t=!1){DS(e,!1,t)}function DS(e,t,i){const n=function(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?lg(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(_e.sep)>=0}}(e,t);SS.push(n),n.userConfigured?xS.push(n):kS.push(n),i&&!n.userConfigured&&SS.forEach((e=>{e.mime===n.mime||e.userConfigured||(n.extension&&e.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&e.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&e.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&e.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))}))}function LS(e,t){let i;if(e)switch(e.scheme){case vn.file:i=e.fsPath;break;case vn.data:i=Ss.parseMetaData(e).get(Ss.META_DATA_LABEL);break;case vn.vscodeNotebookCell:i=void 0;break;default:i=e.path}if(!i)return[{id:"unknown",mime:er.unknown}];i=i.toLowerCase();const n=De(i),s=IS(i,n,xS);if(s)return[s,{id:Tr,mime:er.text}];const o=IS(i,n,kS);if(o)return[o,{id:Tr,mime:er.text}];if(t){const e=function(e){cn(e)&&(e=e.substr(1));if(e.length>0)for(let t=SS.length-1;t>=0;t--){const i=SS[t];if(!i.firstline)continue;const n=e.match(i.firstline);if(n&&n.length>0)return i}return}(t);if(e)return[e,{id:Tr,mime:er.text}]}return[{id:"unknown",mime:er.unknown}]}function IS(e,t,i){let n,s,o;for(let r=i.length-1;r>=0;r--){const a=i[r];if(t===a.filenameLowercase){n=a;break}if(a.filepattern&&(!s||a.filepattern.length>s.filepattern.length)){const i=a.filepatternOnPath?e:t;a.filepatternLowercase?.(i)&&(s=a)}a.extension&&(!o||a.extension.length>o.extension.length)&&t.endsWith(a.extensionLowercase)&&(o=a)}return n||(s||(o||void 0))}const TS=Object.prototype.hasOwnProperty,NS="vs.editor.nullLanguage";class AS{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(NS,0),this._register(Tr,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||NS}}class MS extends Qt{static{this.instanceCount=0}constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ui),this.onDidChange=this._onDidChange.event,MS.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new AS,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Ir.onDidChangeLanguages((e=>{this._initializeFromRegistry()}))))}dispose(){MS.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},SS=SS.filter((e=>e.userConfigured)),kS=[];const e=[].concat(Ir.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return Ir.registerLanguage(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((e=>{const t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach((e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier})),t.mimetypes.forEach((e=>{this._mimeTypesMap[e]=t.identifier}))})),Jo.as(ur).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;TS.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const e of t.extensions)ES({id:i,mime:n,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const s of t.filenames)ES({id:i,mime:n,filename:s},this._warnOnOverwrite),e.filenames.push(s);if(Array.isArray(t.filenamePatterns))for(const e of t.filenamePatterns)ES({id:i,mime:n,filepattern:e},this._warnOnOverwrite);if("string"==typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{const t=new RegExp(e);"^"!==(s=t).source&&"^$"!==s.source&&"$"!==s.source&&"^\\s*$"!==s.source&&s.exec("")&&0===s.lastIndex||ES({id:i,mime:n,firstline:t},this._warnOnOverwrite)}catch(i){console.warn(`[${t.id}]: Invalid regular expression \`${e}\`: `,i)}}var s;e.aliases.push(i);let o=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(o=0===t.aliases.length?[null]:t.aliases),null!==o)for(const t of o)t&&0!==t.length&&e.aliases.push(t);const r=null!==o&&o.length>0;if(r&&null===o[0]);else{const t=(r?o[0]:null)||i;!r&&e.name||(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return!!e&&TS.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){const e=[];for(const t in this._nameMap)TS.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort(((e,t)=>Hi(e.languageName,t.languageName))),e}getLanguageName(e){return TS.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){if(!TS.call(this._languages,e))return null;return this._languages[e].mimetypes[0]||null}getExtensions(e){return TS.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return TS.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){if(!TS.call(this._languages,e))return null;return this._languages[e].icons[0]||null}getConfigurationFiles(e){return TS.call(this._languages,e)&&this._languages[e].configurationFiles||[]}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return TS.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&TS.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?function(e,t){return LS(e,t).map((e=>e.id))}(e,t):[]}}class RS extends Qt{static{this.instanceCount=0}constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new ui),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new ui),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new ui({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,RS.instanceCount++,this._registry=this._register(new MS(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange((()=>this._onDidChange.fire())))}dispose(){RS.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){return dt(this._registry.guessLanguageIdByFilepathOrFirstLine(e,t),null)}createById(e){return new OS(this.onDidChange,(()=>this._createAndGetLanguageIdentifier(e)))}createByMimeType(e){return new OS(this.onDidChange,(()=>{const t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)}))}createByFilepathOrFirstLine(e,t){return new OS(this.onDidChange,(()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)}))}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=Tr),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),oy.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}class OS{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages((()=>this._evaluate()))),this._emitter||(this._emitter=new ui({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._emitter?.fire(this.languageId))}}class FS extends Qt{constructor(e,t="",i="",n=!0,s){super(),this._onDidChange=this._register(new ui),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class PS extends Qt{constructor(){super(...arguments),this._onWillRun=this._register(new ui),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new ui),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;let i;this._onWillRun.fire({action:e});try{await this.runAction(e,t)}catch(e){i=e}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}class BS{constructor(){this.id=BS.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t=t.length?[...t,new BS,...i]:i);return t}static{this.ID="vs.actions.separator"}async run(){}}class zS{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}}class WS extends FS{static{this.ID="vs.actions.empty"}constructor(){super(WS.ID,u("vs/base/common/actions",0,"(empty)"),void 0,!1)}}function HS(e){return{id:e.id,label:e.label,class:e.class,enabled:e.enabled??!0,checked:e.checked,run:async(...t)=>e.run(...t),tooltip:e.label}}const VS={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:er.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};let US=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});const KS=new Li((()=>US("mouse",!1))),qS=new Li((()=>US("element",!1)));function $S(e){return"element"===e?qS.value:KS.value}function jS(){return US("element",!0)}class GS{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach((n=>n.splice(e,t,i)))}}function YS(e,t,i){let n=null,s=null;if("function"==typeof i.value?(n="value",s=i.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",s=i.get),!s)throw new Error("not supported");const o=`$memoize$${t}`;i[n]=function(...e){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,e)}),this[o]}}Pm(".monaco-list{height:100%;position:relative;white-space:nowrap;width:100%}.monaco-list.mouse-support{user-select:none;-webkit-user-select:none}.monaco-list>.monaco-scrollable-element{height:100%}.monaco-list-rows{height:100%;position:relative;width:100%}.monaco-list.horizontal-scrolling .monaco-list-rows{min-width:100%;width:auto}.monaco-list-row{box-sizing:border-box;overflow:hidden;position:absolute;width:100%}.monaco-list.mouse-support .monaco-list-row{cursor:pointer;touch-action:none}.monaco-list .monaco-scrollable-element>.scrollbar.vertical,.monaco-pane-view>.monaco-split-view2.vertical>.monaco-scrollable-element>.scrollbar.vertical{z-index:14}.monaco-list-row.scrolling{display:none!important}.monaco-list.element-focused,.monaco-list.selection-multiple,.monaco-list.selection-single{outline:0!important}.monaco-drag-image{border-radius:10px;display:inline-block;font-size:12px;padding:1px 7px;position:absolute;z-index:1000}.monaco-list-type-filter-message{box-sizing:border-box;height:100%;left:0;opacity:.7;padding:40px 1em 1em;pointer-events:none;position:absolute;text-align:center;top:0;white-space:normal;width:100%}.monaco-list-type-filter-message:empty{display:none}",{});class XS extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function QS(e,t){const i=[];for(const n of t){if(e.start>=n.range.end)continue;if(e.end<n.range.start)break;const t=Ty.intersect(e,n.range);Ty.isEmpty(t)||i.push({range:t,size:n.size})}return i}function ZS({start:e,end:t},i){return{start:e+i,end:t+i}}class JS{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const n=i.length-t,s=QS({start:0,end:e},this.groups),o=QS({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map((e=>({range:ZS(e.range,n),size:e.size}))),r=i.map(((t,i)=>({range:{start:e+i,end:e+i+1},size:t.size})));this.groups=function(...e){return function(e){const t=[];let i=null;for(const n of e){const e=n.range.start,s=n.range.end,o=n.size;i&&o===i.size?i.range.end=s:(i={range:{start:e,end:s},size:o},t.push(i))}return t}(e.reduce(((e,t)=>e.concat(t)),[]))}(s,r,o),this._size=this._paddingTop+this.groups.reduce(((e,t)=>e+t.size*(t.range.end-t.range.start)),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const n of this.groups){const s=n.range.end-n.range.start,o=i+s*n.size;if(e<o)return t+Math.floor((e-i)/n.size);t+=s,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const s=n.range.end-n.range.start,o=i+s;if(e<o)return this._paddingTop+t+(e-i)*n.size;t+=s*n.size,i=o}return-1}}class ek{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const i=bc(".monaco-list-row");t={domNode:i,templateId:e,templateData:this.getRenderer(e).renderTemplate(i)}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const e of this.transactionNodesPendingRemoval)this.doRemoveNode(e);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t));this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),function(e){try{e.parentElement?.removeChild(e)}catch(e){}}(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach(((e,t)=>{for(const i of e){this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}const tk={CurrentDragAndDropData:void 0},ik={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(e){return[e]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class nk{get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}}class sk{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ok{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}class rk{constructor(e){this.getSetSize=e?.getSetSize?e.getSetSize.bind(e):(e,t,i)=>i,this.getPosInSet=e?.getPosInSet?e.getPosInSet.bind(e):(e,t)=>t+1,this.getRole=e?.getRole?e.getRole.bind(e):e=>"listitem",this.isChecked=e?.isChecked?e.isChecked.bind(e):e=>{}}}class ak{static{this.InstanceCount=0}get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Oh(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,n=ik){if(this.virtualDelegate=t,this.domId="list_id_"+ ++ak.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Fa(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Qt.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Qt.None,this.onDragLeaveTimeout=Qt.None,this.disposables=new Xt,this._onDidChangeContentHeight=new ui,this._onDidChangeContentWidth=new ui,this.onDidChangeContentHeight=oi.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this.onDidChangeContentWidth=oi.latch(this._onDidChangeContentWidth.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(n.paddingTop??0);for(const e of i)this.renderers.set(e.templateId,e);this.cache=this.disposables.add(new ek(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof n.mouseSupport||n.mouseSupport),this._horizontalScrolling=n.horizontalScrolling??ik.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=void 0===n.paddingBottom?0:n.paddingBottom,this.accessibilityProvider=new rk(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";(n.transformOptimization??ik.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Db.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new Pb({forceIntegerValues:!0,smoothScrollDuration:n.smoothScrolling?125:0,scheduleAtNextAnimationFrame:e=>kh(lh(this.domNode),e)})),this.scrollableElement=this.disposables.add(new qb(this.rowsContainer,{alwaysConsumeMouseWheel:n.alwaysConsumeMouseWheel??ik.alwaysConsumeMouseWheel,horizontal:1,vertical:n.verticalScrollMode??ik.verticalScrollMode,useShadows:n.useShadows??ik.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(_h(this.rowsContainer,kb.Change,(e=>this.onTouchChange(e)))),this.disposables.add(_h(this.scrollableElement.getDomNode(),"scroll",(e=>e.target.scrollTop=0))),this.disposables.add(_h(this.domNode,"dragover",(e=>this.onDragOver(this.toDragEvent(e))))),this.disposables.add(_h(this.domNode,"drop",(e=>this.onDrop(this.toDragEvent(e))))),this.disposables.add(_h(this.domNode,"dragleave",(e=>this.onDragLeave(this.toDragEvent(e))))),this.disposables.add(_h(this.domNode,"dragend",(e=>this.onDragEnd(e)))),this.setRowLineHeight=n.setRowLineHeight??ik.setRowLineHeight,this.setRowHeight=n.setRowHeight??ik.setRowHeight,this.supportDynamicHeights=n.supportDynamicHeights??ik.supportDynamicHeights,this.dnd=n.dnd??this.disposables.add(ik.dnd),this.layout(n.initialSize?.height,n.initialSize?.width)}updateOptions(e){let t;if(void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.scrollByPage&&(t={...t??{},scrollByPage:e.scrollByPage}),void 0!==e.mouseWheelScrollSensitivity&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),void 0!==e.fastScrollSensitivity&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),void 0!==e.paddingTop&&e.paddingTop!==this.rangeMap.paddingTop){const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(t,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,i){if(e<0||e>=this.items.length)return;const n=this.items[e].size;if(void 0===t){if(!this.supportDynamicHeights)return void console.warn("Dynamic heights not supported");this.items[e].lastDynamicHeightWidth=void 0,t=n+this.probeDynamicHeight(e)}if(n===t)return;const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);let o=0;o=e<s.start||null!==i&&i>e&&i<s.end?t-n:0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(s,Math.max(0,this.lastRenderTop+o),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new JS(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=Ty.intersect(n,s),r=new Map;for(let e=o.end-1;e>=o.start;e--){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let i=r.get(t.templateId);i||(i=[],r.set(t.templateId,i));const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),i.unshift(t.row)}t.row=null,t.stale=!0}const a={start:e+t,end:this.items.length},l=Ty.intersect(a,n),h=Ty.relativeComplement(a,n),c=i.map((e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Qt.None,checkedDisposable:Qt.None,stale:!1})));let d;0===e&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,c),d=this.items,this.items=c):(this.rangeMap.splice(e,t,c),d=this.items.splice(e,t,...c));const u=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=ZS(l,u),f=Ty.intersect(g,p);for(let e=f.start;e<f.end;e++)this.updateItemInDOM(this.items[e],e);const m=Ty.relativeComplement(p,g);for(const e of m)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);const b=h.map((e=>ZS(e,u))),v=[{start:e,end:e+i.length},...b].map((e=>Ty.intersect(g,e))).reverse();for(const e of v)for(let t=e.end-1;t>=e.start;t--){const e=this.items[t],i=r.get(e.templateId),n=i?.pop();this.insertItemInDOM(t,n)}for(const e of r.values())for(const t of e)this.cache.release(t);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map((e=>e.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=kh(lh(this.domNode),(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)void 0!==t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||void 0===this.scrollWidth)return;const t=this.items[e];this.measureItemWidth(t),void 0!==t.width&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){const e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),i=this.rangeMap.positionAt(e+1);if(-1!==i){if((i-t)/2+t<this.scrollTop)return e+1}return e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex((t=>t.element===e))}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:"number"==typeof e?e:Fh(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),void 0!==t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof t?t:Oh(this.domNode)})}render(e,t,i,n,s,o=!1){const r=this.getRenderRange(t,i),a=Ty.relativeComplement(r,e).reverse(),l=Ty.relativeComplement(e,r);if(o){const t=Ty.intersect(e,r);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}this.cache.transact((()=>{for(const e of l)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);for(const e of a)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t)})),void 0!==n&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&void 0!==s&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const e=this.cache.alloc(i.templateId);i.row=e.row,i.stale||=e.isReusingConnectedDomNode}const n=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",n);const s=this.accessibilityProvider.isChecked(i.element);if("boolean"==typeof s)i.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){const e=e=>i.row.domNode.setAttribute("aria-checked",String(!!e));e(s.value),i.checkedDisposable=s.onDidChange((()=>e(s.value)))}if(i.stale||!i.row.domNode.parentElement){const t=this.items.at(e+1)?.row?.domNode??null;i.row.domNode.parentElement===this.rowsContainer&&i.row.domNode.nextElementSibling===t||this.rowsContainer.insertBefore(i.row.domNode,t),i.stale=!1}this.updateItemInDOM(i,e);const o=this.renderers.get(i.templateId);if(!o)throw new Error(`No renderer found for template id ${i.templateId}`);o?.renderElement(i.element,e,i.row.templateData,i.size);const r=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!r,r&&(i.dragStartDisposable=_h(i.row.domNode,"dragstart",(e=>this.onDragStart(i.element,r,e)))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=Oh(e.row.domNode);const t=lh(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2==0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return oi.map(this.disposables.add(new Xb(this.domNode,"click")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseDblClick(){return oi.map(this.disposables.add(new Xb(this.domNode,"dblclick")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseMiddleClick(){return oi.filter(oi.map(this.disposables.add(new Xb(this.domNode,"auxclick")).event,(e=>this.toMouseEvent(e)),this.disposables),(e=>1===e.browserEvent.button),this.disposables)}get onMouseUp(){return oi.map(this.disposables.add(new Xb(this.domNode,"mouseup")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseDown(){return oi.map(this.disposables.add(new Xb(this.domNode,"mousedown")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOver(){return oi.map(this.disposables.add(new Xb(this.domNode,"mouseover")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseMove(){return oi.map(this.disposables.add(new Xb(this.domNode,"mousemove")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOut(){return oi.map(this.disposables.add(new Xb(this.domNode,"mouseout")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onContextMenu(){return oi.any(oi.map(this.disposables.add(new Xb(this.domNode,"contextmenu")).event,(e=>this.toMouseEvent(e)),this.disposables),oi.map(this.disposables.add(new Xb(this.domNode,kb.Contextmenu)).event,(e=>this.toGestureEvent(e)),this.disposables))}get onTouchStart(){return oi.map(this.disposables.add(new Xb(this.domNode,"touchstart")).event,(e=>this.toTouchEvent(e)),this.disposables)}get onTap(){return oi.map(this.disposables.add(new Xb(this.rowsContainer,kb.Tap)).event,(e=>this.toGestureEvent(e)),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element,sector:this.getTargetSector(e,t)}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const n=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(VS.TEXT,t),i.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(n,i)),void 0===e&&(e=String(n.length));const t=bc(".monaco-drag-image");t.textContent=e;const s=e=>{for(;e&&!e.classList.contains("monaco-workbench");)e=e.parentElement;return e||this.domNode.ownerDocument},o=s(this.domNode);o.appendChild(t),i.dataTransfer.setDragImage(t,-10,-10),setTimeout((()=>o.removeChild(t)),0)}this.domNode.classList.add("dragging"),this.currentDragData=new nk(n),tk.CurrentDragAndDropData=new sk(n),this.dnd.onDragStart?.(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),tk.CurrentDragAndDropData&&"vscode-ui"===tk.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(tk.CurrentDragAndDropData)this.currentDragData=tk.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new ok}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop="boolean"==typeof t?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let i;e.browserEvent.dataTransfer.dropEffect="boolean"!=typeof t&&0===t.effect?.type?"copy":"move",i="boolean"!=typeof t&&t.feedback?t.feedback:void 0===e.index?[-1]:[e.index],i=ct(i).filter((e=>e>=-1&&e<this.length)).sort(((e,t)=>e-t)),i=-1===i[0]?[-1]:i;let n="boolean"!=typeof t&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(s=this.currentDragFeedback,o=i,(Array.isArray(s)&&Array.isArray(o)?at(s,o):s===o)&&this.currentDragFeedbackPosition===n)return!0;var s,o;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=n,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add(n),this.rowsContainer.classList.add(n),this.currentDragFeedbackDisposable=Yt((()=>{this.domNode.classList.remove(n),this.rowsContainer.classList.remove(n)}));else{if(i.length>1&&"drop-target"!==n)throw new Error("Can't use multiple feedbacks with position different than 'over'");"drop-target-after"===n&&i[0]<this.length-1&&(i[0]+=1,n="drop-target-before");for(const e of i){const t=this.items[e];t.dropTarget=!0,t.row?.domNode.classList.add(n)}this.currentDragFeedbackDisposable=Yt((()=>{for(const e of i){const t=this.items[e];t.dropTarget=!1,t.row?.domNode.classList.remove(n)}}))}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Wa((()=>this.clearDragOverFeedback()),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,tk.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,tk.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Qt.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const e=Nh(this.domNode).top;this.dragOverAnimationDisposable=function(e,t){const i=()=>{t(),n=kh(e,i)};let n=kh(e,i);return Yt((()=>n.dispose()))}(lh(this.domNode),this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Wa((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(void 0===t)return;const i=e.offsetY/this.items[t].size;return Sd(Math.floor(i/.25),0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){const e=i.getAttribute("data-index");if(e){const t=Number(e);if(!isNaN(t))return t}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let s,o;e===this.elementTop(n.start)?(s=n.start,o=0):n.end-n.start>1&&(s=n.start+1,o=this.elementTop(s)-e);let r=0;for(;;){const a=this.getRenderRange(e,t);let l=!1;for(let e=a.start;e<a.end;e++){const t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),r+=t,l=l||0!==t}if(!l){0!==r&&this.eventuallyUpdateScrollDimensions();const t=Ty.relativeComplement(n,a);for(const e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);const l=Ty.relativeComplement(a,n).reverse();for(const e of l)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t);for(let e=a.start;e<a.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"==typeof s){const t=this.scrollable.getFutureScrollPosition().scrollTop-e,n=this.elementTop(s)-o+t;this.setScrollTop(n,i)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const e=this.virtualDelegate.getDynamicHeight(t.element);if(null!==e){const i=t.size;return t.size=e,t.lastDynamicHeightWidth=this.renderWidth,e-i}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,0!==t.size||Bh(t.row.domNode,lh(t.row.domNode).document.body)||console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!"),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:n}=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const s=this.renderers.get(t.templateId);if(!s)throw new ot("Missing renderer for templateId: "+t.templateId);return s.renderElement(t.element,e,n.templateData,void 0),t.size=n.domNode.offsetHeight,s.disposeElement?.(t.element,e,n.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(n.domNode),this.cache.release(n),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}}ak.__decorator=Bs([YS],ak.prototype,"onMouseClick",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseDblClick",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseMiddleClick",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseUp",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseDown",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseOver",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseMove",null),ak.__decorator=Bs([YS],ak.prototype,"onMouseOut",null),ak.__decorator=Bs([YS],ak.prototype,"onContextMenu",null),ak.__decorator=Bs([YS],ak.prototype,"onTouchStart",null),ak.__decorator=Bs([YS],ak.prototype,"onTap",null);const lk=(e,t)=>e===t;new WeakMap;class hk{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return function(e,t){const i=dk.get(e);if(i)return i;const n=function(e,t){const i=dk.get(e);if(i)return i;const n=t.owner?function(e){const t=gk.get(e);if(t)return t;const i=function(e){const t=e.constructor;if(t)return t.name;return"Object"}(e);let n=uk.get(i)??0;n++,uk.set(i,n);const s=1===n?i:`${i}#${n}`;return gk.set(e,s),s}(t.owner)+".":"";let s;const o=t.debugNameSource;if(void 0!==o){if("function"!=typeof o)return n+o;if(s=o(),void 0!==s)return n+s}const r=t.referenceFn;if(void 0!==r&&(s=pk(r),void 0!==s))return n+s;if(void 0!==t.owner){const i=function(e,t){for(const i in e)if(e[i]===t)return i;return}(t.owner,e);if(void 0!==i)return n+i}return}(e,t);if(n){let t=ck.get(n)??0;t++,ck.set(n,t);const i=1===t?n:`${n}#${t}`;return dk.set(e,i),i}return}(e,this)}}const ck=new Map,dk=new WeakMap;const uk=new Map,gk=new WeakMap;function pk(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),n=i?i[1]:void 0;return n?.trim()}let fk,mk,bk;class vk{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=void 0===t?void 0:e,n=void 0===t?e:t;return bk({owner:i,debugName:()=>{const e=pk(n);if(void 0!==e)return e;const t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(n.toString());return t?`${this.debugName}.${t[2]}`:i?void 0:`${this.debugName} (mapped)`},debugReferenceFn:n},(e=>n(this.read(e),e)))}recomputeInitiallyAndOnChange(e,t){return e.add(fk(this,t)),this}keepObserved(e){return e.add(mk(this)),this}get debugValue(){return this.get()}}class wk extends vk{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),0===t&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&0===this.observers.size&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function _k(e,t,i){e?t(e):function(e,t){const i=new yk(e,t);try{e(i)}finally{i.finish()}}(t,i)}class yk{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():pk(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:n}=e[t];i.endUpdate(n)}this.updatingObservers=null}}!function(e){bk=e}((function(e,t){return new Ck(new hk(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??lk)}));class Ck extends wk{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n,s=void 0,o){super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=n,this._handleLastObserverRemoved=s,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.()}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(0===this.observers.size){const e=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),e}do{if(1===this.state)for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break;1===this.state&&(this.state=3),this._recomputeIfNeeded()}while(3!==this.state);return this.value}_recomputeIfNeeded(){if(3===this.state)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=0!==this.state,i=this.value;this.state=3;const n=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,n)}finally{for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const e of this.observers)e.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=1===this.updateCount;if(3===this.state&&(this.state=1,!t))for(const e of this.observers)e.handlePossibleChange(this);if(t)for(const e of this.observers)e.beginUpdate(this)}endUpdate(e){if(this.updateCount--,0===this.updateCount){const e=[...this.observers];for(const t of e)t.endUpdate(this)}Qo((()=>this.updateCount>=0))}handlePossibleChange(e){if(3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const e of this.observers)e.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary),n=3===this.state;if(i&&(1===this.state||n)&&(this.state=2,n))for(const e of this.observers)e.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}function Sk(e){return new kk(new hk(void 0,void 0,e),e,void 0,void 0)}class kk{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n){this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=n,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),this._runIfNeeded(),Vt(this)}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ut(this)}_runIfNeeded(){if(3===this.state)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){const e=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,e)}}finally{for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){3===this.state&&(this.state=1),this.updateCount++}endUpdate(){if(1===this.updateCount)do{if(1===this.state){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break}this._runIfNeeded()}while(3!==this.state);this.updateCount--,Qo((()=>this.updateCount>=0))}handlePossibleChange(e){3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary))&&(this.state=2)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}function xk(e){return new Ek(e)}!function(e){e.Observer=kk}(Sk||(Sk={}));class Ek extends vk{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Dk(e,t){return new Lk(e,t)}class Lk extends wk{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=e=>{const t=this._getValue(e),i=this.value;(!this.hasValue||i!==t)&&(this.value=t,this.hasValue&&_k(Lk.globalTransaction,(e=>{for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)}),(()=>{const e=this.getDebugName();return"Event fired"+(e?`: ${e}`:"")})),this.hasValue=!0)}}getDebugName(){return pk(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){if(this.subscription)return this.hasValue||this.handleEvent(void 0),this.value;return this._getValue(void 0)}}!function(e){e.Observer=Lk,e.batchEventsGlobally=function(e,t){let i=!1;void 0===Lk.globalTransaction&&(Lk.globalTransaction=e,i=!0);try{t()}finally{i&&(Lk.globalTransaction=void 0)}}}(Dk||(Dk={}));!function(e){mk=e}((function(e){const t=new Ik(!1,void 0);return e.addObserver(t),Yt((()=>{e.removeObserver(t)}))})),function(e){fk=e}((function(e,t){const i=new Ik(!0,t);return e.addObserver(i),t?t(e.get()):e.reportChanges(),Yt((()=>{e.removeObserver(i)}))}));class Ik{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,0===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}class Tk{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex((e=>e.templateData===i));if(n>=0){const e=this.renderedElements[n];this.trait.unrender(i),e.index=t}else{const e={index:t,templateData:i};this.renderedElements.push(e)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const s of this.renderedElements)s.index<e?n.push(s):s.index>=e+t&&n.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex((t=>t.templateData===e));t<0||this.renderedElements.splice(t,1)}}class Nk{get name(){return this._trait}get renderer(){return new Tk(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new ui,this.onChange=this._onChange.event}splice(e,t,i){const n=i.length-t,s=e+t,o=[];let r=0;for(;r<this.sortedIndexes.length&&this.sortedIndexes[r]<e;)o.push(this.sortedIndexes[r++]);for(let t=0;t<i.length;t++)i[t]&&o.push(t+e);for(;r<this.sortedIndexes.length&&this.sortedIndexes[r]>=s;)o.push(this.sortedIndexes[r++]+n);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(ex),t)}_set(e,t,i){const n=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=Jk(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return t=this.sortedIndexes,i=e,n=ex,function(e,t){let i=0,n=e-1;for(;i<=n;){const e=(i+n)/2|0,s=t(e);if(s<0)i=e+1;else{if(!(s>0))return e;n=e-1}}return-(i+1)}(t.length,(e=>n(t[e],i)))>=0;var t,i,n}dispose(){jt(this._onChange)}}Nk.__decorator=Bs([YS],Nk.prototype,"renderer",null);class Ak extends Nk{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class Mk{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const n=this.trait.get().map((e=>this.identityProvider.getId(this.view.element(e)).toString()));if(0===n.length)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=new Set(n),o=i.map((e=>s.has(this.identityProvider.getId(e).toString())));this.trait.splice(e,t,o)}}function Rk(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function Ok(e,t){return!!e.classList.contains(t)||!e.classList.contains("monaco-list")&&(!!e.parentElement&&Ok(e.parentElement,t))}function Fk(e){return Ok(e,"monaco-editor")}function Pk(e){return Ok(e,"monaco-tree-sticky-row")}function Bk(e){return e.classList.contains("monaco-tree-sticky-container")}function zk(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!e.classList.contains("monaco-list")&&(!!e.parentElement&&zk(e.parentElement))}class Wk{get onKeyDown(){return oi.chain(this.disposables.add(new Xb(this.view.domNode,"keydown")).event,(e=>e.filter((e=>!Rk(e.target))).map((e=>new xa(e)))))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Xt,this.multipleSelectionDisposables=new Xt,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown((e=>{switch(e.keyCode){case 3:return this.onEnter(e);case 16:return this.onUpArrow(e);case 18:return this.onDownArrow(e);case 11:return this.onPageUpArrow(e);case 12:return this.onPageDownArrow(e);case 9:return this.onEscape(e);case 31:this.multipleSelectionSupport&&(M?e.metaKey:e.ctrlKey)&&this.onCtrlA(e)}})))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ut(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}var Hk,Vk;Wk.__decorator=Bs([YS],Wk.prototype,"onKeyDown",null),function(e){e[e.Automatic=0]="Automatic",e[e.Trigger=1]="Trigger"}(Hk||(Hk={})),function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(Vk||(Vk={}));const Uk=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=98&&e.keyCode<=107||e.keyCode>=85&&e.keyCode<=95)}};class Kk{constructor(e,t,i,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=s,this.enabled=!1,this.state=Vk.Idle,this.mode=Hk.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Xt,this.disposables=new Xt,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??1?this.enable():this.disable(),this.mode=e.typeNavigationMode??Hk.Automatic}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1;const t=oi.chain(this.enabledDisposables.add(new Xb(this.view.domNode,"keydown")).event,(t=>t.filter((e=>!Rk(e.target))).filter((()=>this.mode===Hk.Automatic||this.triggered)).map((e=>new xa(e))).filter((t=>e||this.keyboardNavigationEventFilter(t))).filter((e=>this.delegate.mightProducePrintableCharacter(e))).forEach((e=>lc(e,!0))).map((e=>e.browserEvent.key)))),i=oi.debounce(t,(()=>null),800,void 0,void 0,void 0,this.enabledDisposables);oi.reduce(oi.any(t,i),((e,t)=>null===t?null:(e||"")+t),void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t((()=>e=!0),void 0,this.enabledDisposables),i((()=>e=!1),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));"string"==typeof t?Sy(t):t&&Sy(t.get())}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=Vk.Idle,void(this.triggered=!1);const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===Vk.Idle?1:0;this.state=Vk.Typing;for(let t=0;t<this.list.length;t++){const s=(i+t+n)%this.list.length,o=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),r=o&&o.toString();if(this.list.options.typeNavigationEnabled){if(void 0!==r){if(av(e,r))return this.previouslyFocused=i,this.list.setFocus([s]),void this.list.reveal(s);const t=kv(e,r);if(t){if(t[0].end-t[0].start>1&&1===t.length)return this.previouslyFocused=i,this.list.setFocus([s]),void this.list.reveal(s)}}}else if(void 0===r||av(e,r))return this.previouslyFocused=i,this.list.setFocus([s]),void this.list.reveal(s)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class qk{constructor(e,t){this.list=e,this.view=t,this.disposables=new Xt;const i=oi.chain(this.disposables.add(new Xb(t.domNode,"keydown")).event,(e=>e.filter((e=>!Rk(e.target))).map((e=>new xa(e))))),n=oi.chain(i,(e=>e.filter((e=>!(2!==e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)))));n(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(0===t.length)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!(n&&n instanceof HTMLElement&&-1!==n.tabIndex))return;const s=lh(n).getComputedStyle(n);"hidden"!==s.visibility&&"none"!==s.display&&(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function $k(e){return M?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function jk(e){return e.browserEvent.shiftKey}const Gk={isSelectionSingleChangeEvent:$k,isSelectionRangeChangeEvent:jk};class Yk{constructor(e){this.list=e,this.disposables=new Xt,this._onPointer=new ui,this.onPointer=this._onPointer.event,!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Gk),this.mouseSupport=void 0===e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Db.addTarget(e.getHTMLElement()))),oi.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Gk))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Fk(e.browserEvent.target)||Uh()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Rk(e.browserEvent.target)||Fk(e.browserEvent.target))return;const t=void 0===e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport)return;if(Rk(e.browserEvent.target)||Fk(e.browserEvent.target))return;if(e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;return void 0===t?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),sc(i=e.browserEvent)&&2===i.button||this.list.setSelection([t],e.browserEvent),void this._onPointer.fire(e));var i}onDoubleClick(e){if(Rk(e.browserEvent.target)||Fk(e.browserEvent.target))return;if(this.isSelectionChangeEvent(e))return;if(e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(void 0===i){i=this.list.getFocus()[0]??t,this.list.setAnchor(i)}const n=ut(Math.min(i,t),Math.max(i,t)+1),s=this.list.getSelection(),o=function(e,t){const i=e.indexOf(t);if(-1===i)return[];const n=[];let s=i-1;for(;s>=0&&e[s]===t-(i-s);)n.push(e[s--]);n.reverse(),s=i;for(;s<e.length&&e[s]===t+(s-i);)n.push(e[s++]);return n}(Jk(s,[i]),i);if(0===o.length)return;const r=Jk(n,function(e,t){const i=[];let n=0,s=0;for(;n<e.length||s<t.length;)if(n>=e.length)i.push(t[s++]);else if(s>=t.length)i.push(e[n++]);else{if(e[n]===t[s]){n++,s++;continue}e[n]<t[s]?i.push(e[n++]):s++}return i}(s,o));this.list.setSelection(r,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),n=i.filter((e=>e!==t));this.list.setFocus([t]),this.list.setAnchor(t),i.length===n.length?this.list.setSelection([...n,t],e.browserEvent):this.list.setSelection(n,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Xk{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }\n\t\t\t`),e.listFocusAndSelectionForeground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }\n\t\t\t`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const n=Sc(e.listFocusAndSelectionOutline,Sc(e.listSelectionOutline,e.listFocusOutline??""));n&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${n}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);const s=Sc(e.listSelectionOutline,e.listInactiveFocusOutline??"");s&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${s}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`\n\t\t\t\t.monaco-list${t}.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }\n\t\t\t`),e.listDropBetweenBackground&&(i.push(`\n\t\t\t.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list${t} .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${e.listDropBetweenBackground};\n\t\t\t}`),i.push(`\n\t\t\t.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list${t} .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${e.listDropBetweenBackground};\n\t\t\t}`)),e.tableColumnsBorder&&i.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${e.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`),e.tableOddRowsBackgroundColor&&i.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${e.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`),this.styleElement.textContent=i.join("\n")}}const Qk={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Ng.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Ng.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Ng.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Zk={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function Jk(e,t){const i=[];let n=0,s=0;for(;n<e.length||s<t.length;)if(n>=e.length)i.push(t[s++]);else if(s>=t.length)i.push(e[n++]);else{if(e[n]===t[s]){i.push(e[n]),n++,s++;continue}e[n]<t[s]?i.push(e[n++]):i.push(t[s++])}return i}const ex=(e,t)=>e-t;class tx{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map((t=>t.renderTemplate(e)))}renderElement(e,t,i,n){let s=0;for(const o of this.renderers)o.renderElement(e,t,i[s++],n)}disposeElement(e,t,i,n){let s=0;for(const o of this.renderers)o.disposeElement?.(e,t,i[s],n),s+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class ix{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Xt}}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e),s=n&&"string"!=typeof n?n:xk(n);i.disposables.add(Sk((e=>{this.setAriaLabel(e.readObservable(s),i.container)})));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"==typeof o?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,n){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class nx{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver(e,t,i,n,s)}onDragLeave(e,t,i,n){this.dnd.onDragLeave?.(e,t,i,n)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,i,n,s){this.dnd.drop(e,t,i,n,s)}dispose(){this.dnd.dispose()}}class sx{get onDidChangeFocus(){return oi.map(this.eventBufferer.wrapEvent(this.focus.onChange),(e=>this.toListEvent(e)),this.disposables)}get onDidChangeSelection(){return oi.map(this.eventBufferer.wrapEvent(this.selection.onChange),(e=>this.toListEvent(e)),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=oi.chain(this.disposables.add(new Xb(this.view.domNode,"keydown")).event,(t=>t.map((e=>new xa(e))).filter((t=>e=58===t.keyCode||t.shiftKey&&68===t.keyCode)).map((e=>lc(e,!0))).filter((()=>!1)))),i=oi.chain(this.disposables.add(new Xb(this.view.domNode,"keyup")).event,(t=>t.forEach((()=>e=!1)).map((e=>new xa(e))).filter((e=>58===e.keyCode||e.shiftKey&&68===e.keyCode)).map((e=>lc(e,!0))).map((({browserEvent:e})=>{const t=this.getFocus(),i=t.length?t[0]:void 0;return{index:i,element:void 0!==i?this.view.element(i):void 0,anchor:void 0!==i?this.view.domElement(i):this.view.domNode,browserEvent:e}})))),n=oi.chain(this.view.onContextMenu,(t=>t.filter((t=>!e)).map((({element:e,index:t,browserEvent:i})=>({element:e,index:t,anchor:new Ia(lh(this.view.domNode),i),browserEvent:i})))));return oi.any(t,i,n)}get onKeyDown(){return this.disposables.add(new Xb(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new Xb(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new Xb(this.view.domNode,"keypress")).event}get onDidFocus(){return oi.signal(this.disposables.add(new Xb(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return oi.signal(this.disposables.add(new Xb(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n,s=Zk){this.user=e,this._options=s,this.focus=new Nk("focused"),this.anchor=new Nk("anchor"),this.eventBufferer=new bi,this._ariaLabel="",this.disposables=new Xt,this._onDidDispose=new ui,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new Ak("listbox"!==o);const r=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(r.push(new ix(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map((e=>new tx(e.templateId,[...r,e])));const a={...s,dnd:s.dnd&&new nx(this,s.dnd)};if(this.view=this.createListView(t,i,n,a),this.view.domNode.setAttribute("role",o),s.styleController)this.styleController=s.styleController(this.view.domId);else{const e=Yh(this.view.domNode);this.styleController=new Xk(e,this.view.domId)}if(this.spliceable=new GS([new Mk(this.focus,this.view,s.identityProvider),new Mk(this.selection,this.view,s.identityProvider),new Mk(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new qk(this,this.view)),("boolean"!=typeof s.keyboardSupport||s.keyboardSupport)&&(this.keyboardController=new Wk(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const e=s.keyboardNavigationDelegate||Uk;this.typeNavigationController=new Kk(this,this.view,s.keyboardNavigationLabelProvider,s.keyboardNavigationEventFilter??(()=>!0),e),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new ak(e,t,i,n)}createMouseController(e){return new Yk(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new XS(this.user,`Invalid start index: ${e}`);if(t<0)throw new XS(this.user,`Invalid delete count: ${t}`);0===t&&0===i.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(e,t,i)))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(const t of e)if(t<0||t>=this.length)throw new XS(this.user,`Invalid index ${t}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((e=>this.view.element(e)))}setAnchor(e){if(void 0!==e){if(e<0||e>=this.length)throw new XS(this.user,`Invalid index ${e}`);this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return dt(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return void 0===e?void 0:this.element(e)}setFocus(e,t){for(const t of e)if(t<0||t>=this.length)throw new XS(this.user,`Invalid index ${t}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(0===this.length)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,n);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,n){if(0===this.length)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,n);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=0===i?0:i-1;const n=this.getFocus()[0];if(n!==i&&(void 0===n||i>n)){const s=this.findPreviousIndex(i,!1,t);s>-1&&n!==s?this.setFocus([s],e):this.setFocus([i],e)}else{const s=this.view.getScrollTop();let o=s+this.view.renderHeight;i>n&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==s&&(this.setFocus([]),await za(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=(()=>0)){let n;const s=i(),o=this.view.getScrollTop()+s;n=0===o?this.view.indexAt(o):this.view.indexAfter(o-1);const r=this.getFocus()[0];if(r!==n&&(void 0===r||r>=n)){const i=this.findNextIndex(n,!1,t);i>-1&&r!==i?this.setFocus([i],e):this.setFocus([n],e)}else{const n=o;this.view.setScrollTop(o-this.view.renderHeight-s),this.view.getScrollTop()+i()!==n&&(this.setFocus([]),await za(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(0===this.length)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(0===this.length)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e%=this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((e=>this.view.element(e)))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new XS(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(Nn(t)){const e=o-this.view.renderHeight+i;this.view.setScrollTop(e*Sd(t,0,1)+s-i)}else{const e=s+o,t=n+this.view.renderHeight;s<n+i&&e>=t||(s<n+i||e>=t&&o>=this.view.renderHeight?this.view.setScrollTop(s-i):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new XS(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<i+t||n+s>i+this.view.renderHeight)return null;const o=s-this.view.renderHeight+t;return Math.abs((i+t-n)/o)}isDOMFocused(){return Kh(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map((e=>this.view.element(e))),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}sx.__decorator=Bs([YS],sx.prototype,"onDidChangeFocus",null),sx.__decorator=Bs([YS],sx.prototype,"onDidChangeSelection",null),sx.__decorator=Bs([YS],sx.prototype,"onContextMenu",null),sx.__decorator=Bs([YS],sx.prototype,"onKeyDown",null),sx.__decorator=Bs([YS],sx.prototype,"onKeyUp",null),sx.__decorator=Bs([YS],sx.prototype,"onKeyPress",null),sx.__decorator=Bs([YS],sx.prototype,"onDidFocus",null),sx.__decorator=Bs([YS],sx.prototype,"onDidBlur",null);let ox={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupUpdatableHover:()=>null};function rx(){return ox}Pm(".monaco-select-box-dropdown-padding{--dropdown-padding-top:1px;--dropdown-padding-bottom:1px}.hc-black .monaco-select-box-dropdown-padding,.hc-light .monaco-select-box-dropdown-padding{--dropdown-padding-top:3px;--dropdown-padding-bottom:4px}.monaco-select-box-dropdown-container{box-sizing:border-box;display:none}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown *{margin:0}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown a:focus{outline:1px solid -webkit-focus-ring-color;outline-offset:-1px}.monaco-select-box-dropdown-container>.select-box-details-pane>.select-box-description-markdown code{font-family:var(--monaco-monospace-font);line-height:15px}.monaco-select-box-dropdown-container.visible{border-bottom-left-radius:3px;border-bottom-right-radius:3px;display:flex;flex-direction:column;overflow:hidden;text-align:left;width:1px}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container{align-self:flex-start;box-sizing:border-box;flex:0 0 auto;overflow:hidden;padding-bottom:var(--dropdown-padding-bottom);padding-left:1px;padding-right:1px;padding-top:var(--dropdown-padding-top);width:100%}.monaco-select-box-dropdown-container>.select-box-details-pane{padding:5px}.hc-black .monaco-select-box-dropdown-container>.select-box-dropdown-list-container{padding-bottom:var(--dropdown-padding-bottom);padding-top:var(--dropdown-padding-top)}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row{cursor:pointer}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-text{float:left;overflow:hidden;padding-left:3.5px;text-overflow:ellipsis;white-space:nowrap}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-detail{float:left;opacity:.7;overflow:hidden;padding-left:3.5px;text-overflow:ellipsis;white-space:nowrap}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.option-decorator-right{float:right;overflow:hidden;padding-right:10px;text-overflow:ellipsis;white-space:nowrap}.monaco-select-box-dropdown-container>.select-box-dropdown-list-container .monaco-list .monaco-list-row>.visually-hidden{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control{align-self:flex-start;flex:1 1 auto;opacity:0}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div{max-height:0;overflow:hidden}.monaco-select-box-dropdown-container>.select-box-dropdown-container-width-control>.width-control-div>.option-text-width-control{padding-left:4px;padding-right:8px;white-space:nowrap}",{});const ax=bc,lx="selectOption.entry.template";class hx{get templateId(){return lx}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=dc(e,ax(".option-text")),t.detail=dc(e,ax(".option-detail")),t.decoratorRight=dc(e,ax(".option-decorator-right")),t}renderElement(e,t,i){const n=i,s=e.text,o=e.detail,r=e.decoratorRight,a=e.isDisabled;n.text.textContent=s,n.detail.textContent=o||"",n.decoratorRight.innerText=r||"",a?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}}class cx extends Qt{static{this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32}static{this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2}static{this.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3}constructor(e,t,i,n,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=s||Object.create(null),"number"!=typeof this.selectBoxOptions.minBottomMargin?this.selectBoxOptions.minBottomMargin=cx.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding","string"==typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"==typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new ui,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(rx().setupUpdatableHover($S("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return lx}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=bc(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=dc(this.selectDropDownContainer,ax(".select-box-details-pane"));const t=dc(this.selectDropDownContainer,ax(".select-box-dropdown-container-width-control")),i=dc(t,ax(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",dc(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Yh(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(_h(this.selectDropDownContainer,rc.DRAG_START,(e=>{lc(e,!0)})))}registerListeners(){let e;this._register(Ch(this.selectElement,"change",(e=>{this.selected=e.target.selectedIndex,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}))),this._register(_h(this.selectElement,rc.CLICK,(e=>{lc(e),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(_h(this.selectElement,rc.MOUSE_DOWN,(e=>{lc(e)}))),this._register(_h(this.selectElement,"touchstart",(t=>{e=this._isVisible}))),this._register(_h(this.selectElement,"touchend",(t=>{lc(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(_h(this.selectElement,rc.KEY_DOWN,(e=>{const t=new xa(e);let i=!1;M?18!==t.keyCode&&16!==t.keyCode&&10!==t.keyCode&&3!==t.keyCode||(i=!0):(18===t.keyCode&&t.altKey||16===t.keyCode&&t.altKey||10===t.keyCode||3===t.keyCode)&&(i=!0),i&&(this.showSelectDropDown(),lc(e,!0))})))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){at(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach(((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled)),"string"==typeof e.description&&(this._hasDetails=!0)}))),void 0!==t&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join("\n")}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=Sc(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch(e){}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach(((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)})),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=lh(this.selectElement),i=Ah(this.selectElement),n=lh(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),r=i.top-cx.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),h=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=h,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let c=this.selectList.contentHeight;this._hasDetails&&void 0===this._cachedMaxDetailsHeight&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const d=this._hasDetails?this._cachedMaxDetailsHeight:0,u=c+s+d,g=Math.floor((o-s-d)/this.getHeight()),p=Math.floor((r-s-d)/this.getHeight());if(e)return!(i.top+i.height>t.innerHeight-22||i.top<cx.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&p<1)&&(g<cx.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<cx.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||0===this._dropDownPosition&&g<1||1===this._dropDownPosition&&p<1)return this.hideSelectDropDown(!0),!1;if(0===this._dropDownPosition){if(this._isVisible&&g+p<1)return this.hideSelectDropDown(!0),!1;u>o&&(c=g*this.getHeight())}else u>r&&(c=p*this.getHeight());return this.selectList.layout(c),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=c+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=c+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=h,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach(((e,t)=>{const s=e.detail?e.detail.length:0,o=e.decoratorRight?e.decoratorRight.length:0,r=e.text.length+s+o;r>n&&(i=t,n=r)})),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=Rh(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=dc(e,ax(".select-box-dropdown-list-container")),this.listRenderer=new hx,this.selectList=new sx("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:e=>{let t=e.text;return e.detail&&(t+=`. ${e.detail}`),e.decoratorRight&&(t+=`. ${e.decoratorRight}`),e.description&&(t+=`. ${e.description}`),t},getWidgetAriaLabel:()=>u("vs/base/browser/ui/selectBox/selectBoxCustom",0,"Select Box"),getRole:()=>M?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Xb(this.selectDropDownListContainer,"keydown")),i=oi.chain(t.event,(e=>e.filter((()=>this.selectList.length>0)).map((e=>new xa(e)))));this._register(oi.chain(i,(e=>e.filter((e=>3===e.keyCode))))(this.onEnter,this)),this._register(oi.chain(i,(e=>e.filter((e=>2===e.keyCode))))(this.onEnter,this)),this._register(oi.chain(i,(e=>e.filter((e=>9===e.keyCode))))(this.onEscape,this)),this._register(oi.chain(i,(e=>e.filter((e=>16===e.keyCode))))(this.onUpArrow,this)),this._register(oi.chain(i,(e=>e.filter((e=>18===e.keyCode))))(this.onDownArrow,this)),this._register(oi.chain(i,(e=>e.filter((e=>12===e.keyCode))))(this.onPageDown,this)),this._register(oi.chain(i,(e=>e.filter((e=>11===e.keyCode))))(this.onPageUp,this)),this._register(oi.chain(i,(e=>e.filter((e=>14===e.keyCode))))(this.onHome,this)),this._register(oi.chain(i,(e=>e.filter((e=>13===e.keyCode))))(this.onEnd,this)),this._register(oi.chain(i,(e=>e.filter((e=>e.keyCode>=21&&e.keyCode<=56||e.keyCode>=85&&e.keyCode<=113))))(this.onCharacter,this)),this._register(_h(this.selectList.getHTMLElement(),rc.POINTER_UP,(e=>this.onPointerUp(e)))),this._register(this.selectList.onMouseOver((e=>void 0!==e.index&&this.selectList.setFocus([e.index])))),this._register(this.selectList.onDidChangeFocus((e=>this.onListFocus(e)))),this._register(_h(this.selectDropDownContainer,rc.FOCUS_OUT,(e=>{this._isVisible&&!Bh(e.relatedTarget,this.selectDropDownContainer)&&this.onListBlur()}))),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;lc(e);const t=e.target;if(!t)return;if(t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const n=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!s&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=e=>{for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(t);"img"===(n.tagName&&n.tagName.toLowerCase())?e.removeChild(n):i(n)}},n=f_({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n.element}onListFocus(e){this._isVisible&&this._hasDetails&&this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=t?.description??"";if(i){if(t?.descriptionIsMarkdown??!1){const e=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,e))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){lc(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){lc(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){lc(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){if(this.selected>0){lc(e,!0);this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onPageUp(e){lc(e),this.selectList.focusPreviousPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onPageDown(e){lc(e),this.selectList.focusNextPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onHome(e){lc(e),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){lc(e),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=ma.toString(e.keyCode);let i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),lc(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}class dx extends Qt{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box","string"==typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"==typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new ui),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Db.addTarget(this.selectElement)),[kb.Tap].forEach((e=>{this._register(_h(this.selectElement,e,(e=>{this.selectElement.focus()})))})),this._register(Ch(this.selectElement,"click",(e=>{lc(e,!0)}))),this._register(Ch(this.selectElement,"change",(e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})}))),this._register(Ch(this.selectElement,"keydown",(e=>{let t=!1;M?18!==e.keyCode&&16!==e.keyCode&&10!==e.keyCode||(t=!0):(18===e.keyCode&&e.altKey||10===e.keyCode||3===e.keyCode)&&(t=!0),t&&e.stopPropagation()})))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){this.options&&at(this.options,e)||(this.options=e,this.selectElement.options.length=0,this.options.forEach(((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled))}))),void 0!==t&&this.select(t)}select(e){0===this.options.length?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&"string"==typeof this.options[this.selected].text?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}}Pm(".monaco-select-box{border-radius:2px;cursor:pointer;width:100%}.monaco-select-box-dropdown-container{font-size:13px;font-weight:400;text-transform:none}.monaco-action-bar .action-item.select-container{cursor:default}.monaco-action-bar .action-item .monaco-select-box{cursor:pointer;min-height:18px;min-width:100px;padding:2px 23px 2px 8px}.mac .monaco-action-bar .action-item .monaco-select-box{border-radius:5px;font-size:11px}",{});class ux extends Lb{constructor(e,t,i,n,s){super(),this.selectBoxDelegate=M&&!s?.useCustomDrawn?new dx(e,t,n,s):new cx(e,t,i,n,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}Pm(".monaco-action-bar{height:100%;white-space:nowrap}.monaco-action-bar .actions-container{align-items:center;display:flex;height:100%;margin:0 auto;padding:0;width:100%}.monaco-action-bar.vertical .actions-container{display:inline-block}.monaco-action-bar .action-item{align-items:center;cursor:pointer;display:block;justify-content:center;position:relative}.monaco-action-bar .action-item.disabled{cursor:default}.monaco-action-bar .action-item .codicon,.monaco-action-bar .action-item .icon{display:block}.monaco-action-bar .action-item .codicon{align-items:center;display:flex;height:16px;width:16px}.monaco-action-bar .action-label{border-radius:5px;display:flex;font-size:11px;padding:3px}.monaco-action-bar .action-item.disabled .action-label,.monaco-action-bar .action-item.disabled .action-label:before,.monaco-action-bar .action-item.disabled .action-label:hover{color:var(--vscode-disabledForeground)}.monaco-action-bar.vertical{text-align:left}.monaco-action-bar.vertical .action-item{display:block}.monaco-action-bar.vertical .action-label.separator{border-bottom:1px solid #bbb;display:block;margin-left:.8em;margin-right:.8em;padding-top:1px}.monaco-action-bar .action-item .action-label.separator{background-color:#bbb;cursor:default;height:16px;margin:5px 4px!important;min-width:1px;padding:0;width:1px}.secondary-actions .monaco-action-bar .action-label{margin-left:6px}.monaco-action-bar .action-item.select-container{align-items:center;display:flex;flex:1;justify-content:center;margin-right:10px;max-width:170px;min-width:60px;overflow:hidden}.monaco-action-bar .action-item.action-dropdown-item{display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator{align-items:center;cursor:default;display:flex}.monaco-action-bar .action-item.action-dropdown-item>.action-dropdown-item-separator>div{width:1px}",{});class gx extends Qt{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof FS&&this._register(t.onDidChange((e=>{this.element&&this.handleActionChangeEvent(e)})))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new PS)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Db.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Zr&&this._register(_h(e,rc.DRAG_START,(e=>e.dataTransfer?.setData(VS.TEXT,this._action.label))))),this._register(_h(t,kb.Tap,(e=>this.onClick(e,!0)))),this._register(_h(t,rc.MOUSE_DOWN,(e=>{i||lc(e,!0),this._action.enabled&&0===e.button&&t.classList.add("active")}))),M&&this._register(_h(t,rc.CONTEXT_MENU,(e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)}))),this._register(_h(t,rc.CLICK,(e=>{lc(e,!0),this.options&&this.options.isMenu||this.onClick(e)}))),this._register(_h(t,rc.DBLCLICK,(e=>{lc(e,!0)}))),[rc.MOUSE_UP,rc.MOUSE_OUT].forEach((e=>{this._register(_h(t,e,(e=>{lc(e),t.classList.remove("active")})))}))}onClick(e,t=!1){lc(e,!0);const i=Rn(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){return!!this.element?.classList.contains("focused")}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=e;else if(this.customHover||""===e)this.customHover&&this.customHover.update(e);else{const t=this.options.hoverDelegate??$S("element");this.customHover=this._store.add(rx().setupUpdatableHover(t,this.element,e))}}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class px extends gx{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass=""}render(e){super.render(e),On(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const e=document.createElement("span");e.classList.add("keybinding"),e.textContent=this.options.keybinding,this.element.appendChild(e)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===BS.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&0===this.label?.tabIndex}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=u("vs/base/browser/ui/actionbar/actionViewItems",0,"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(void 0!==this.action.checked?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class fx extends gx{constructor(e,t,i,n,s,o,r){super(e,t),this.selectBox=new ux(i,n,s,o,r),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect((e=>this.runAction(e.selected,e.index))))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}Pm(".monaco-dropdown{height:100%;padding:0}.monaco-dropdown>.dropdown-label{align-items:center;cursor:pointer;display:flex;height:100%;justify-content:center}.monaco-dropdown>.dropdown-label>.action-label.disabled{cursor:default}.monaco-dropdown-with-primary{border-radius:5px;display:flex!important;flex-direction:row}.monaco-dropdown-with-primary>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{font-size:12px;line-height:16px;margin-left:-3px;padding-left:0;padding-right:0}.monaco-dropdown-with-primary>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}",{});class mx extends PS{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new ui),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=dc(e,bc(".monaco-dropdown")),this._label=dc(this._element,bc(".dropdown-label"));let i=t.labelRenderer;i||(i=e=>(e.textContent=t.label||"",null));for(const e of[rc.CLICK,rc.MOUSE_DOWN,kb.Tap])this._register(_h(this.element,e,(e=>lc(e,!0))));for(const e of[rc.MOUSE_DOWN,kb.Tap])this._register(_h(this._label,e,(e=>{sc(e)&&(e.detail>1||0!==e.button)||(this.visible?this.hide():this.show())})));this._register(_h(this._label,rc.KEY_UP,(e=>{const t=new xa(e);(t.equals(3)||t.equals(10))&&(lc(e,!0),this.visible?this.hide():this.show())})));const n=i(this._label);n&&this._register(n),this._register(Db.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(this.hover||""===e?this.hover&&this.hover.update(e):this.hover=this._register(rx().setupUpdatableHover($S("mouse"),this._label,e)))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class bx extends mx{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class vx extends gx{constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new ui),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:e=>{this.element=dc(e,bc("a.action-label"));let t=[];return"string"==typeof this.options.classNames?t=this.options.classNames.split(/\s+/g).filter((e=>!!e)):this.options.classNames&&(t=this.options.classNames),t.find((e=>"icon"===e))||t.push("codicon"),this.element.classList.add(...t),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(rx().setupUpdatableHover(this.options.hoverDelegate??$S("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:t?this.menuActionsOrProvider:void 0,actionProvider:t?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new bx(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility((e=>{this.element?.setAttribute("aria-expanded",`${e}`),this._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const e=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return e.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}var wx;function _x(e){return void 0!==e.command}Pm(".monaco-action-bar .action-item.menu-entry .action-label.icon{background-position:50%;background-repeat:no-repeat;background-size:16px;height:16px;width:16px}.monaco-dropdown-with-default{border-radius:5px;display:flex!important;flex-direction:row}.monaco-dropdown-with-default>.action-container>.action-label{margin-right:0}.monaco-dropdown-with-default>.action-container.menu-entry>.action-label.icon{background-position:50%;background-repeat:no-repeat;background-size:16px;height:16px;width:16px}.monaco-dropdown-with-default:hover{background-color:var(--vscode-toolbar-hoverBackground)}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label .codicon[class*=codicon-]{font-size:12px;line-height:16px;margin-left:-3px;padding-left:0;padding-right:0}.monaco-dropdown-with-default>.dropdown-action-container>.monaco-dropdown>.dropdown-label>.action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}",{});class yx{static{this._instances=new Map}static{this.CommandPalette=new yx("CommandPalette")}static{this.DebugBreakpointsContext=new yx("DebugBreakpointsContext")}static{this.DebugCallStackContext=new yx("DebugCallStackContext")}static{this.DebugConsoleContext=new yx("DebugConsoleContext")}static{this.DebugVariablesContext=new yx("DebugVariablesContext")}static{this.NotebookVariablesContext=new yx("NotebookVariablesContext")}static{this.DebugHoverContext=new yx("DebugHoverContext")}static{this.DebugWatchContext=new yx("DebugWatchContext")}static{this.DebugToolBar=new yx("DebugToolBar")}static{this.DebugToolBarStop=new yx("DebugToolBarStop")}static{this.EditorContext=new yx("EditorContext")}static{this.SimpleEditorContext=new yx("SimpleEditorContext")}static{this.EditorContent=new yx("EditorContent")}static{this.EditorLineNumberContext=new yx("EditorLineNumberContext")}static{this.EditorContextCopy=new yx("EditorContextCopy")}static{this.EditorContextPeek=new yx("EditorContextPeek")}static{this.EditorContextShare=new yx("EditorContextShare")}static{this.EditorTitle=new yx("EditorTitle")}static{this.EditorTitleRun=new yx("EditorTitleRun")}static{this.EditorTitleContext=new yx("EditorTitleContext")}static{this.EditorTitleContextShare=new yx("EditorTitleContextShare")}static{this.EmptyEditorGroup=new yx("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new yx("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new yx("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new yx("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new yx("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new yx("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new yx("ExplorerContext")}static{this.ExplorerContextShare=new yx("ExplorerContextShare")}static{this.ExtensionContext=new yx("ExtensionContext")}static{this.GlobalActivity=new yx("GlobalActivity")}static{this.CommandCenter=new yx("CommandCenter")}static{this.CommandCenterCenter=new yx("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new yx("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new yx("LayoutControlMenu")}static{this.MenubarMainMenu=new yx("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new yx("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new yx("MenubarDebugMenu")}static{this.MenubarEditMenu=new yx("MenubarEditMenu")}static{this.MenubarCopy=new yx("MenubarCopy")}static{this.MenubarFileMenu=new yx("MenubarFileMenu")}static{this.MenubarGoMenu=new yx("MenubarGoMenu")}static{this.MenubarHelpMenu=new yx("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new yx("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new yx("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new yx("PanelAlignmentMenu")}static{this.PanelPositionMenu=new yx("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new yx("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new yx("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new yx("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new yx("MenubarSelectionMenu")}static{this.MenubarShare=new yx("MenubarShare")}static{this.MenubarSwitchEditorMenu=new yx("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new yx("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new yx("MenubarTerminalMenu")}static{this.MenubarViewMenu=new yx("MenubarViewMenu")}static{this.MenubarHomeMenu=new yx("MenubarHomeMenu")}static{this.OpenEditorsContext=new yx("OpenEditorsContext")}static{this.OpenEditorsContextShare=new yx("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new yx("ProblemsPanelContext")}static{this.SCMInputBox=new yx("SCMInputBox")}static{this.SCMChangesSeparator=new yx("SCMChangesSeparator")}static{this.SCMIncomingChanges=new yx("SCMIncomingChanges")}static{this.SCMIncomingChangesContext=new yx("SCMIncomingChangesContext")}static{this.SCMIncomingChangesSetting=new yx("SCMIncomingChangesSetting")}static{this.SCMOutgoingChanges=new yx("SCMOutgoingChanges")}static{this.SCMOutgoingChangesContext=new yx("SCMOutgoingChangesContext")}static{this.SCMOutgoingChangesSetting=new yx("SCMOutgoingChangesSetting")}static{this.SCMIncomingChangesAllChangesContext=new yx("SCMIncomingChangesAllChangesContext")}static{this.SCMIncomingChangesHistoryItemContext=new yx("SCMIncomingChangesHistoryItemContext")}static{this.SCMOutgoingChangesAllChangesContext=new yx("SCMOutgoingChangesAllChangesContext")}static{this.SCMOutgoingChangesHistoryItemContext=new yx("SCMOutgoingChangesHistoryItemContext")}static{this.SCMChangeContext=new yx("SCMChangeContext")}static{this.SCMResourceContext=new yx("SCMResourceContext")}static{this.SCMResourceContextShare=new yx("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new yx("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new yx("SCMResourceGroupContext")}static{this.SCMSourceControl=new yx("SCMSourceControl")}static{this.SCMSourceControlInline=new yx("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new yx("SCMSourceControlTitle")}static{this.SCMTitle=new yx("SCMTitle")}static{this.SearchContext=new yx("SearchContext")}static{this.SearchActionMenu=new yx("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new yx("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new yx("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new yx("StickyScrollContext")}static{this.TestItem=new yx("TestItem")}static{this.TestItemGutter=new yx("TestItemGutter")}static{this.TestMessageContext=new yx("TestMessageContext")}static{this.TestMessageContent=new yx("TestMessageContent")}static{this.TestPeekElement=new yx("TestPeekElement")}static{this.TestPeekTitle=new yx("TestPeekTitle")}static{this.TouchBarContext=new yx("TouchBarContext")}static{this.TitleBarContext=new yx("TitleBarContext")}static{this.TitleBarTitleContext=new yx("TitleBarTitleContext")}static{this.TunnelContext=new yx("TunnelContext")}static{this.TunnelPrivacy=new yx("TunnelPrivacy")}static{this.TunnelProtocol=new yx("TunnelProtocol")}static{this.TunnelPortInline=new yx("TunnelInline")}static{this.TunnelTitle=new yx("TunnelTitle")}static{this.TunnelLocalAddressInline=new yx("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new yx("TunnelOriginInline")}static{this.ViewItemContext=new yx("ViewItemContext")}static{this.ViewContainerTitle=new yx("ViewContainerTitle")}static{this.ViewContainerTitleContext=new yx("ViewContainerTitleContext")}static{this.ViewTitle=new yx("ViewTitle")}static{this.ViewTitleContext=new yx("ViewTitleContext")}static{this.CommentEditorActions=new yx("CommentEditorActions")}static{this.CommentThreadTitle=new yx("CommentThreadTitle")}static{this.CommentThreadActions=new yx("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new yx("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new yx("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new yx("CommentThreadCommentContext")}static{this.CommentTitle=new yx("CommentTitle")}static{this.CommentActions=new yx("CommentActions")}static{this.CommentsViewThreadActions=new yx("CommentsViewThreadActions")}static{this.InteractiveToolbar=new yx("InteractiveToolbar")}static{this.InteractiveCellTitle=new yx("InteractiveCellTitle")}static{this.InteractiveCellDelete=new yx("InteractiveCellDelete")}static{this.InteractiveCellExecute=new yx("InteractiveCellExecute")}static{this.InteractiveInputExecute=new yx("InteractiveInputExecute")}static{this.IssueReporter=new yx("IssueReporter")}static{this.NotebookToolbar=new yx("NotebookToolbar")}static{this.NotebookStickyScrollContext=new yx("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new yx("NotebookCellTitle")}static{this.NotebookCellDelete=new yx("NotebookCellDelete")}static{this.NotebookCellInsert=new yx("NotebookCellInsert")}static{this.NotebookCellBetween=new yx("NotebookCellBetween")}static{this.NotebookCellListTop=new yx("NotebookCellTop")}static{this.NotebookCellExecute=new yx("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new yx("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new yx("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new yx("NotebookDiffCellInputTitle")}static{this.NotebookDiffCellMetadataTitle=new yx("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new yx("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new yx("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new yx("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new yx("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new yx("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new yx("NotebookKernelSource")}static{this.BulkEditTitle=new yx("BulkEditTitle")}static{this.BulkEditContext=new yx("BulkEditContext")}static{this.TimelineItemContext=new yx("TimelineItemContext")}static{this.TimelineTitle=new yx("TimelineTitle")}static{this.TimelineTitleContext=new yx("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new yx("TimelineFilterSubMenu")}static{this.AccountsContext=new yx("AccountsContext")}static{this.SidebarTitle=new yx("SidebarTitle")}static{this.PanelTitle=new yx("PanelTitle")}static{this.AuxiliaryBarTitle=new yx("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new yx("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new yx("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new yx("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new yx("TerminalNewDropdownContext")}static{this.TerminalTabContext=new yx("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new yx("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new yx("TerminalStickyScrollContext")}static{this.WebviewContext=new yx("WebviewContext")}static{this.InlineCompletionsActions=new yx("InlineCompletionsActions")}static{this.InlineEditActions=new yx("InlineEditActions")}static{this.NewFile=new yx("NewFile")}static{this.MergeInput1Toolbar=new yx("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new yx("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new yx("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new yx("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new yx("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new yx("InlineEditToolbar")}static{this.ChatContext=new yx("ChatContext")}static{this.ChatCodeBlock=new yx("ChatCodeblock")}static{this.ChatCompareBlock=new yx("ChatCompareBlock")}static{this.ChatMessageTitle=new yx("ChatMessageTitle")}static{this.ChatExecute=new yx("ChatExecute")}static{this.ChatExecuteSecondary=new yx("ChatExecuteSecondary")}static{this.ChatInputSide=new yx("ChatInputSide")}static{this.AccessibleView=new yx("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new yx("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new yx("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new yx("DiffEditorSelectionToolbar")}static for(e){return yx._instances.get(e)??new yx(e)}constructor(e){if(yx._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);yx._instances.set(e,this),this.id=e}}class Cx{static{this._all=new Map}static for(e){let t=this._all.get(e);return t||(t=new Cx(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof Cx&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}const Sx=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new mi({merge:Cx.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(e){return this._commands.set(e.id,e),this._onDidChangeMenu.fire(Cx.for(yx.CommandPalette)),Yt((()=>{this._commands.delete(e.id)&&this._onDidChangeMenu.fire(Cx.for(yx.CommandPalette))}))}getCommand(e){return this._commands.get(e)}getCommands(){const e=new Map;return this._commands.forEach(((t,i)=>e.set(i,t))),e}appendMenuItem(e,t){let i=this._menuItems.get(e);i||(i=new ii,this._menuItems.set(e,i));const n=i.push(t);return this._onDidChangeMenu.fire(Cx.for(e)),Yt((()=>{n(),this._onDidChangeMenu.fire(Cx.for(e))}))}appendMenuItems(e){const t=new Xt;for(const{id:i,item:n}of e)t.add(this.appendMenuItem(i,n));return t}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===yx.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){const t=new Set;for(const i of e)_x(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this._commands.forEach(((i,n)=>{t.has(n)||e.push({command:i})}))}};class kx extends zS{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,"string"==typeof e.title?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let xx=wx=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?"string"==typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"==typeof e.title?e.title:e.title.value}constructor(e,t,i,n,s,o,r){let a;if(this.hideActions=n,this.menuKeybinding=s,this._commandService=r,this.id=e.id,this.label=wx.label(e,i),this.tooltip=("string"==typeof e.tooltip?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const t=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(t.condition),this.checked&&t.tooltip&&(this.tooltip="string"==typeof t.tooltip?t.tooltip:t.tooltip.value),this.checked&&Eb.isThemeIcon(t.icon)&&(a=t.icon),this.checked&&t.title&&(this.label="string"==typeof t.title?t.title:t.title.value)}a||(a=Eb.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new wx(t,void 0,i,n,void 0,o,r):void 0,this._options=i,this.class=a&&Eb.asClassName(a)}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};xx=wx=Bs([zs(5,Qc),zs(6,fC)],xx);const Ex=o("menuService");const Dx=o("storageService");function Lx(e,t){const i={...t};for(const t in e){const n=e[t];i[t]=void 0!==n?Mg(n):void 0}return i}const Ix={keybindingLabelBackground:Mg(Mf),keybindingLabelForeground:Mg(Rf),keybindingLabelBorder:Mg(Of),keybindingLabelBottomBorder:Mg(Ff),keybindingLabelShadow:Mg(Np)},Tx={buttonForeground:Mg(Cf),buttonSeparator:Mg(Sf),buttonBackground:Mg(kf),buttonHoverBackground:Mg(xf),buttonSecondaryForeground:Mg(Df),buttonSecondaryBackground:Mg(Lf),buttonSecondaryHoverBackground:Mg(If),buttonBorder:Mg(Ef)},Nx={progressBarBackground:Mg(rp)},Ax={inputActiveOptionBorder:Mg(rf),inputActiveOptionForeground:Mg(lf),inputActiveOptionBackground:Mg(af)},Mx=(Mg(Tf),Mg(Af),Mg(Nf),Mg(cp),Mg(dp),Mg(Np),Mg(Xg),Mg($p),Mg(jp),Mg(Gp),Mg(Zg),{inputBackground:Mg(nf),inputForeground:Mg(sf),inputBorder:Mg(of),inputValidationInfoBorder:Mg(df),inputValidationInfoBackground:Mg(hf),inputValidationInfoForeground:Mg(cf),inputValidationWarningBorder:Mg(pf),inputValidationWarningBackground:Mg(uf),inputValidationWarningForeground:Mg(gf),inputValidationErrorBorder:Mg(bf),inputValidationErrorBackground:Mg(ff),inputValidationErrorForeground:Mg(mf)});const Rx={listFilterWidgetBackground:Mg(om),listFilterWidgetOutline:Mg(rm),listFilterWidgetNoMatchesOutline:Mg(am),listFilterWidgetShadow:Mg(lm),inputBoxStyles:Mx,toggleStyles:Ax},Ox={badgeBackground:Mg(ep),badgeForeground:Mg(tp),badgeBorder:Mg(Xg)},Fx=(Mg(Op),Mg(Rp),Mg(Fp),Mg(Fp),Mg(Pp),{listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Mg(Bf),listFocusForeground:Mg(zf),listFocusOutline:Mg(Wf),listActiveSelectionBackground:Mg(Vf),listActiveSelectionForeground:Mg(Uf),listActiveSelectionIconForeground:Mg(Kf),listFocusAndSelectionOutline:Mg(Hf),listFocusAndSelectionBackground:Mg(Vf),listFocusAndSelectionForeground:Mg(Uf),listInactiveSelectionBackground:Mg(qf),listInactiveSelectionIconForeground:Mg(jf),listInactiveSelectionForeground:Mg($f),listInactiveFocusBackground:Mg(Gf),listInactiveFocusOutline:Mg(Yf),listHoverBackground:Mg(Xf),listHoverForeground:Mg(Qf),listDropOverBackground:Mg(Zf),listDropBetweenBackground:Mg(Jf),listSelectionOutline:Mg(Qg),listHoverOutline:Mg(Qg),treeIndentGuidesStroke:Mg(hm),treeInactiveIndentGuidesStroke:Mg(cm),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0,tableColumnsBorder:Mg(dm),tableOddRowsBackgroundColor:Mg(um)});function Px(e){return Lx(e,Fx)}const Bx={selectBackground:Mg(vf),selectListBackground:Mg(wf),selectForeground:Mg(_f),decoratorRightForeground:Mg(xm),selectBorder:Mg(yf),focusBorder:Mg(Yg),listFocusBackground:Mg(Tm),listInactiveSelectionIconForeground:Mg(Im),listFocusForeground:Mg(Lm),listFocusOutline:(zx=Qg,Wx=Ng.transparent.toString(),`var(${Ag(zx)}, ${Wx})`),listHoverBackground:Mg(Xf),listHoverForeground:Mg(Qf),listHoverOutline:Mg(Qg),selectListBorder:Mg(up),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};var zx,Wx;const Hx={shadowColor:Mg(Np),borderColor:Mg(pm),foregroundColor:Mg(fm),backgroundColor:Mg(mm),selectionForegroundColor:Mg(bm),selectionBackgroundColor:Mg(vm),selectionBorderColor:Mg(wm),separatorColor:Mg(_m),scrollbarShadow:Mg(ip),scrollbarSliderBackground:Mg(np),scrollbarSliderHoverBackground:Mg(sp),scrollbarSliderActiveBackground:Mg(op)},Vx="vs/platform/actions/browser/menuEntryActionViewItem";function Ux(e,t,i,n=(e=>"navigation"===e),s=(()=>!1),o=!1){let r,a;Array.isArray(t)?(r=t,a=t):(r=t.primary,a=t.secondary);const l=new Set;for(const[t,s]of e){let e;n(t)?(e=r,e.length>0&&o&&e.push(new BS)):(e=a,e.length>0&&e.push(new BS));for(let n of s){i&&(n=n instanceof xx&&n.alt?n.alt:n);const s=e.push(n);n instanceof zS&&l.add({group:t,action:n,index:s-1})}}for(const{group:e,action:t,index:i}of l){const o=n(e)?r:a,l=t.actions;s(t,e,o.length)&&o.splice(i,1,...l)}}let Kx=class extends px{constructor(e,t,i,n,s,o,r,a){super(void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._keybindingService=i,this._notificationService=n,this._contextKeyService=s,this._themeService=o,this._contextMenuService=r,this._accessibilityService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Zt),this._altKey=Dc.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{const e=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);e!==this._wantsAltCommand&&(this._wantsAltCommand=e,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(_h(e,"mouseleave",(e=>{t=!1,i()}))),this._register(_h(e,"mouseenter",(e=>{t=!0,i()}))),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let n=t?u(Vx,0,"{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,t=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),i=t&&t.getLabel(),s=i?u(Vx,0,"{0} ({1})",e,i):e;n=u(Vx,1,"{0}\n[{1}] {2}",n,VC.modifierLabels[$].altKey,s)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const n=this._commandAction.checked&&((s=e.toggled)&&void 0!==s.condition)&&e.toggled.icon?e.toggled.icon:e.icon;var s;if(n)if(Eb.isThemeIcon(n)){const e=Eb.asClassNameArray(n);i.classList.add(...e),this._itemClassDispose.value=Yt((()=>{i.classList.remove(...e)}))}else i.style.backgroundImage=yg(this._themeService.getColorTheme().type)?yc(n.dark):yc(n.light),i.classList.add("icon"),this._itemClassDispose.value=Gt(Yt((()=>{i.style.backgroundImage="",i.classList.remove("icon")})),this._themeService.onDidColorThemeChange((()=>{this.updateClass()})))}};Kx=Bs([zs(2,Bm),zs(3,rd),zs(4,Qc),zs(5,Wc),zs(6,Rm),zs(7,my)],Kx);let qx=class extends vx{constructor(e,t,i,n,s){const o={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(Eb.isThemeIcon(e.item.icon)?Eb.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(e=>i.lookupKeybinding(e.id))};super(e,{getActions:()=>e.actions},n,o),this._keybindingService=i,this._contextMenuService=n,this._themeService=s}render(e){super.render(e),On(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Eb.isThemeIcon(i)){this.element.classList.add("icon");const e=()=>{this.element&&(this.element.style.backgroundImage=yg(this._themeService.getColorTheme().type)?yc(i.dark):yc(i.light))};e(),this._register(this._themeService.onDidColorThemeChange((()=>{e()})))}}};qx=Bs([zs(2,Bm),zs(3,Rm),zs(4,Wc)],qx);let $x=class extends gx{get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}constructor(e,t,i,n,s,o,r,a){let l;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=s,this._menuService=o,this._instaService=r,this._storageService=a,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;const h=t?.persistLastActionId?a.get(this._storageKey,1):void 0;h&&(l=e.actions.find((e=>h===e.id))),l||(l=e.actions[0]),this._defaultAction=this._instaService.createInstance(Kx,l,{keybinding:this._getDefaultActionKeybindingLabel(l)});const c={keybindingProvider:e=>this._keybindingService.lookupKeybinding(e.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??["codicon","codicon-chevron-down"],actionRunner:t?.actionRunner??new PS};this._dropdown=new vx(e,e.actions,this._contextMenuService,c),this._register(this._dropdown.actionRunner.onDidRun((e=>{e.action instanceof xx&&this.update(e.action)})))}update(e){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Kx,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends PS{async runAction(e,t){await e.run(void 0)}},this._container&&this._defaultAction.render(uc(this._container,bc(".action-container")))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(t=`(${i.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=bc(".action-container");this._defaultAction.render(dc(this._container,t)),this._register(_h(t,rc.KEY_DOWN,(e=>{const t=new xa(e);t.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())})));const i=bc(".dropdown-action-container");this._dropdown.render(dc(this._container,i)),this._register(_h(i,rc.KEY_DOWN,(e=>{const t=new xa(e);t.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),t.stopPropagation())})))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};$x=Bs([zs(2,Bm),zs(3,rd),zs(4,Rm),zs(5,Ex),zs(6,s),zs(7,Dx)],$x);let jx=class extends fx{constructor(e,t){super(null,e,e.actions.map((e=>({text:e.id===BS.ID?"─────────":e.label,isDisabled:!e.enabled}))),0,t,Bx,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex((e=>e.checked))))}render(e){super.render(e),e.style.borderColor=Mg(yf)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};jx=Bs([zs(1,Mm)],jx);class Gx extends Qt{constructor(e,t={}){let i,n;switch(super(),this._actionRunnerDisposables=this._register(new Xt),this.viewItemDisposables=this._register(new ei),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new ui),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new ui({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new ui),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new ui),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(jS()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new PS,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((e=>this._onWillRun.fire(e)))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",this._orientation){case 0:i=[15],n=[17];break;case 1:i=[16],n=[18],this.domNode.className+=" vertical"}this._register(_h(this.domNode,rc.KEY_DOWN,(e=>{const t=new xa(e);let s=!0;const o="number"==typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;i&&(t.equals(i[0])||t.equals(i[1]))?s=this.focusPrevious():n&&(t.equals(n[0])||t.equals(n[1]))?s=this.focusNext():t.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(14)?s=this.focusFirst():t.equals(13)?s=this.focusLast():t.equals(2)&&o instanceof gx&&o.trapsArrowNavigation?s=this.focusNext():this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:s=!1,s&&(t.preventDefault(),t.stopPropagation())}))),this._register(_h(this.domNode,rc.KEY_UP,(e=>{const t=new xa(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026)||t.equals(16)||t.equals(18)||t.equals(15)||t.equals(17))&&this.updateFocusedItem()}))),this.focusTracker=this._register(cc(this.domNode)),this._register(this.focusTracker.onDidBlur((()=>{Uh()!==this.domNode&&Bh(Uh(),this.domNode)||(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)}))),this._register(this.focusTracker.onDidFocus((()=>this.updateFocusedItem()))),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){const e=this.viewItems.find((e=>e instanceof gx&&e.isEnabled()));e instanceof gx&&e.setFocusable(!0)}else this.viewItems.forEach((e=>{e instanceof gx&&e.setFocusable(!1)}))}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach((i=>{t=t||e.equals(i)})),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Bh(Uh(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach((t=>t.setActionContext(e)))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((e=>this._onWillRun.fire(e)))),this.viewItems.forEach((t=>t.actionRunner=e))}getContainer(){return this.domNode}hasAction(e){return-1!==this.viewItems.findIndex((t=>t.action.id===e.id))}getAction(e){if("number"==typeof e)return this.viewItems[e]?.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=Nn(t.index)?t.index:null;i.forEach((e=>{const i=document.createElement("li");let s;i.className="action-item",i.setAttribute("role","presentation");const o={hoverDelegate:this._hoverDelegate,...t};this.options.actionViewItemProvider&&(s=this.options.actionViewItemProvider(e,o)),s||(s=new px(this.context,e,o)),this.options.allowContextMenu||this.viewItemDisposables.set(s,_h(i,rc.CONTEXT_MENU,(e=>{lc(e,!0)}))),s.actionRunner=this._actionRunner,s.setActionContext(this.context),s.render(i),this.focusable&&s instanceof gx&&0===this.viewItems.length&&s.setFocusable(!0),null===n||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(i),this.viewItems.push(s)):(this.actionsList.insertBefore(i,this.actionsList.children[n]),this.viewItems.splice(n,0,s),n++)})),"number"==typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.removeChild(this.actionsList.childNodes[e]),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),jt(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=jt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),vh(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return 0===this.viewItems.length}focus(e){let t,i=!1;if(void 0===e?i=!0:"number"==typeof e?t=e:"boolean"==typeof e&&(i=e),i&&void 0===this.focusedItem){const e=this.viewItems.findIndex((e=>e.isEnabled()));this.focusedItem=-1===e?void 0:e,this.updateFocus(void 0,void 0,!0)}else void 0!==t&&(this.focusedItem=t),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(void 0===this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===BS.ID));return this.updateFocus(),!0}focusPrevious(e){if(void 0===this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===BS.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){void 0===this.focusedItem&&this.actionsList.focus({preventScroll:t}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const n=void 0!==this.focusedItem?this.viewItems[this.focusedItem]:void 0;if(n){let s=!0;zn(n.focus)||(s=!1),this.options.focusOnlyEnabledItems&&zn(n.isEnabled)&&!n.isEnabled()&&(s=!1),n.action.id===BS.ID&&(s=!1),s?(i||this.previouslyFocusedItem!==this.focusedItem)&&(n.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),s&&n.showHover?.()}}doTrigger(e){if(void 0===this.focusedItem)return;const t=this.viewItems[this.focusedItem];if(t instanceof gx){const i=null===t._context||void 0===t._context?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=jt(this.viewItems),this.getContainer().remove(),super.dispose()}}const Yx=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,Xx=/(&amp;)?(&amp;)([^\s&])/g;var Qx,Zx;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(Qx||(Qx={})),function(e){e[e.Above=0]="Above",e[e.Below=1]="Below"}(Zx||(Zx={}));class Jx extends Gx{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...M||R?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(Db.addTarget(s)),this._register(_h(s,rc.KEY_DOWN,(e=>{new xa(e).equals(2)&&e.preventDefault()}))),i.enableMnemonics&&this._register(_h(s,rc.KEY_DOWN,(e=>{const t=e.key.toLocaleLowerCase();if(this.mnemonics.has(t)){lc(e,!0);const i=this.mnemonics.get(t);if(1===i.length&&(i[0]instanceof tE&&i[0].container&&this.focusItemByElement(i[0].container),i[0].onClick(e)),i.length>1){const e=i.shift();e&&e.container&&(this.focusItemByElement(e.container),i.push(e)),this.mnemonics.set(t,i)}}}))),R&&this._register(_h(s,rc.KEY_DOWN,(e=>{const t=new xa(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),lc(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),lc(e,!0))}))),this._register(_h(this.domNode,rc.MOUSE_OUT,(e=>{Bh(e.relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register(_h(this.actionsList,rc.MOUSE_OVER,(e=>{let t=e.target;if(t&&Bh(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}))),this._register(Db.addTarget(this.actionsList)),this._register(_h(this.actionsList,kb.Tap,(e=>{let t=e.initialTarget;if(t&&Bh(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new $b(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const r=this.scrollableElement.getDomNode();r.style.position="",this.styleScrollElement(r,n),this._register(_h(s,kb.Change,(e=>{lc(e,!0);const t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})}))),this._register(_h(r,rc.MOUSE_UP,(e=>{e.preventDefault()})));const a=lh(e);s.style.maxHeight=`${Math.max(10,a.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(((e,n)=>{if(i.submenuIds?.has(e.id))return console.warn(`Found submenu cycle: ${e.id}`),!1;if(e instanceof BS){if(n===t.length-1||0===n)return!1;if(t[n-1]instanceof BS)return!1}return!0})),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((e=>!(e instanceof iE))).forEach(((e,t,i)=>{e.updatePositionInSet(t+1,i.length)}))}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(Hh(e)?this.styleSheet=Yh(e):(Jx.globalStyleSheet||(Jx.globalStyleSheet=Yh()),this.styleSheet=Jx.globalStyleSheet)),this.styleSheet.textContent=function(e,t){let i=`\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${nE(wg.menuSelection)}\n${nE(wg.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;if(t){i+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";const t=e.scrollbarShadow;t&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${t} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${t} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${t} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`);const n=e.scrollbarSliderBackground;n&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${n};\n\t\t\t\t}\n\t\t\t`);const s=e.scrollbarSliderHoverBackground;s&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${s};\n\t\t\t\t}\n\t\t\t`);const o=e.scrollbarSliderActiveBackground;o&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${o};\n\t\t\t\t}\n\t\t\t`)}return i}(t,Hh(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",n=t.backgroundColor??"",s=t.borderColor?`1px solid ${t.borderColor}`:"",o=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=s,e.style.borderRadius="5px",e.style.color=i,e.style.backgroundColor=n,e.style.boxShadow=o}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}get scrollOffset(){return this.menuElement.scrollTop}trigger(e){if(e<=this.viewItems.length&&e>=0){const t=this.viewItems[e];if(t instanceof tE)super.focus(e),t.open(!0);else{if(!(t instanceof eE))return;super.run(t._action,t._context)}}}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){if(e===this.actionsList.children[t]){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof BS)return new iE(t.context,e,{icon:!0},this.menuStyles);if(e instanceof zS){const n=new tE(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const n=t.getKeyBinding(e);if(n){const e=n.getLabel();e&&(i.keybinding=e)}}const n=new eE(t.context,e,i,this.menuStyles);if(t.enableMnemonics){const e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}}}class eE extends gx{constructor(e,t,i,n){if(i.isMenu=!0,super(t,t,i),this.menuStyle=n,this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass="",this.options.label&&i.enableMnemonics){const e=this.action.label;if(e){const t=Yx.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new $a((()=>{this.element&&(this._register(_h(this.element,rc.MOUSE_UP,(e=>{if(lc(e,!0),Zr){if(new Ia(lh(this.element),e).rightButton)return;this.onClick(e)}else setTimeout((()=>{this.onClick(e)}),0)}))),this._register(_h(this.element,rc.CONTEXT_MENU,(e=>{lc(e,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=dc(this.element,bc("a.action-menu-item")),this._action.id===BS.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=dc(this.item,bc("span.menu-item-check"+Eb.asCSSSelector(wg.menuSelection))),this.check.setAttribute("role","none"),this.label=dc(this.item,bc("span.action-label")),this.options.label&&this.options.keybinding&&(dc(this.item,bc("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){vh(this.label);let e=Kv(this.action.label);if(e){const t=function(e){const t=Yx,i=t.exec(e);if(!i)return e;const n=!i[1];return e.replace(t,n?"$2$3":"").trim()}(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=Yx.exec(e);if(i){e=Ni(e),Xx.lastIndex=0;let t=Xx.exec(e);for(;t&&t[1];)t=Xx.exec(e);const n=e=>e.replace(/&amp;&amp;/g,"&amp;");t?this.label.append(Mi(n(e.substr(0,t.index))," "),bc("u",{"aria-hidden":"true"},t[3]),Ri(n(e.substr(t.index+t[0].length))," ")):this.label.innerText=n(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),void 0!==e?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=n,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class tE extends eE{constructor(e,t,i,n,s){super(e,e,n,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new Xt),this.mouseOver=!1,this.expandDirection=n&&void 0!==n.expandDirection?n.expandDirection:{horizontal:Qx.Right,vertical:Zx.Below},this.showScheduler=new $a((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new $a((()=>{this.element&&!Bh(Uh(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=dc(this.item,bc("span.submenu-indicator"+Eb.asCSSSelector(wg.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(_h(this.element,rc.KEY_UP,(e=>{const t=new xa(e);(t.equals(17)||t.equals(3))&&(lc(e,!0),this.createSubmenu(!0))}))),this._register(_h(this.element,rc.KEY_DOWN,(e=>{const t=new xa(e);Uh()===this.item&&(t.equals(17)||t.equals(3))&&lc(e,!0)}))),this._register(_h(this.element,rc.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(_h(this.element,rc.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register(_h(this.element,rc.FOCUS_OUT,(e=>{this.element&&!Bh(Uh(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}))))}updateEnabled(){}open(e){this.cleanupExistingSubmenu(!1),this.createSubmenu(e)}onClick(e){lc(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const s={top:0,left:0};return s.left=Ay(e.width,t.width,{position:n.horizontal===Qx.Right?0:1,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=Ay(e.height,t.height,{position:0,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=dc(this.element,bc("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=lh(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Jx(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new WS],this.submenuOptions,this.menuStyle);const n=this.element.getBoundingClientRect(),s={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},o=this.submenuContainer.getBoundingClientRect(),r=lh(this.element),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Th(r.innerWidth,r.innerHeight),Th.lift(o),s,this.expandDirection);this.submenuContainer.style.left=l-o.left+"px",this.submenuContainer.style.top=a-o.top+"px",this.submenuDisposables.add(_h(this.submenuContainer,rc.KEY_UP,(e=>{new xa(e).equals(15)&&(lc(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(_h(this.submenuContainer,rc.KEY_DOWN,(e=>{new xa(e).equals(15)&&lc(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const e=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=e??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class iE extends px{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function nE(e){const t=vg()[e.id];return`.codicon-${e.id}:before { content: '\\${t.toString(16)}'; }`}class sE{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;let i;this.focusToReturn=Uh();const n=e.domForShadowRoot instanceof HTMLElement?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:n=>{this.lastContainer=n;const s=e.getMenuClassName?e.getMenuClassName():"";s&&(n.className+=" "+s),this.options.blockMouse&&(this.block=n.appendChild(bc(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=_h(this.block,rc.MOUSE_DOWN,(e=>e.stopPropagation())));const o=new Xt,r=e.actionRunner||new PS;r.onWillRun((t=>this.onActionRun(t,!e.skipTelemetry)),this,o),r.onDidRun(this.onDidActionRun,this,o),i=new Jx(n,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:r,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)},Hx),i.onDidCancel((()=>this.contextViewService.hideContextView(!0)),null,o),i.onDidBlur((()=>this.contextViewService.hideContextView(!0)),null,o);const a=lh(n);return o.add(_h(a,rc.BLUR,(()=>this.contextViewService.hideContextView(!0)))),o.add(_h(a,rc.MOUSE_DOWN,(e=>{if(e.defaultPrevented)return;const t=new Ia(a,e);let i=t.target;if(!t.rightButton){for(;i;){if(i===n)return;i=i.parentElement}this.contextViewService.hideContextView(!0)}}))),Gt(o,i)},focus:()=>{i?.focus(!!e.autoSelectFirstItem)},onHide:t=>{e.onHide?.(!!t),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(Uh()===this.lastContainer||Bh(Uh(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Qe(e.error)&&this.notificationService.error(e.error)}}let oE=class extends Qt{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new sE(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,s,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=s,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new ui),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new ui),this.onDidHideContextMenu=this._onDidHideContextMenu.event}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=rE.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),Dc.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};var rE,aE,lE,hE;oE=Bs([zs(0,nS),zs(1,rd),zs(2,Mm),zs(3,Bm),zs(4,Ex),zs(5,Qc)],oE),function(e){e.transform=function(e,t,i){if(!((n=e)&&n.menuId instanceof yx))return e;var n;const{menuId:s,menuActionOptions:o,contextKeyService:r}=e;return{...e,getActions:()=>{const n=[];if(s){const e=t.createMenu(s,r??i);!function(e,t,i,n){const s=e.getActions(t),o=Dc.getInstance();Ux(s,i,o.keyStatus.altKey||(A||R)&&o.keyStatus.shiftKey,n?e=>e===n:e=>"navigation"===e)}(e,o,n),e.dispose()}return e.getActions?BS.join(e.getActions(),n):n}}}}(rE||(rE={})),function(e){e[e.ACTIVATE=1]="ACTIVATE",e[e.RESTORE=2]="RESTORE",e[e.PRESERVE=3]="PRESERVE"}(aE||(aE={})),function(e){e[e.PICK=0]="PICK",e[e.EXCLUSIVE_ONLY=1]="EXCLUSIVE_ONLY"}(lE||(lE={})),function(e){e[e.API=0]="API",e[e.USER=1]="USER"}(hE||(hE={}));let cE=class{constructor(e){this._commandService=e}async open(e,t){if(!wn(e,vn.command))return!1;if(!t?.allowCommands)return!0;if("string"==typeof e&&(e=Fe.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path))return!0;let i=[];try{i=d_(decodeURIComponent(e.query))}catch{try{i=d_(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};cE=Bs([zs(0,fC)],cE);let dE=class{constructor(e){this._editorService=e}async open(e,t){"string"==typeof e&&(e=Fe.parse(e));const{selection:i,uri:n}=function(e){let t;const i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return i&&(t={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}(e);return(e=n).scheme===vn.file&&(e=bs(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?hE.USER:hE.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};dE=Bs([zs(0,Xc)],dE);let uE=class{constructor(e,t){this._openers=new ii,this._validators=new ii,this._resolvers=new ii,this._resolvedUriTargets=new At((e=>e.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new ii,this._defaultExternalOpener={openExternal:async e=>(_n(e,vn.http,vn.https)?_c(e):Gr.location.href=e,!0)},this._openers.push({open:async(e,t)=>!(!t?.openExternal&&!_n(e,vn.mailto,vn.http,vn.https,vn.vsls))&&(await this._doOpenExternal(e,t),!0)}),this._openers.push(new cE(t)),this._openers.push(new dE(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}async open(e,t){const i="string"==typeof e?Fe.parse(e):e,n=this._resolvedUriTargets.get(i)??e;for(const e of this._validators)if(!await e.shouldOpen(n,t))return!1;for(const i of this._openers){if(await i.open(e,t))return!0}return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i="string"==typeof e?Fe.parse(e):e;let n,s;try{n=(await this.resolveExternalUri(i,t)).resolved}catch{n=i}if(s="string"==typeof e&&i.toString()===n.toString()?e:encodeURI(n.toString(!0)),t?.allowContributedOpeners){const e="string"==typeof t?.allowContributedOpeners?t?.allowContributedOpeners:void 0;for(const t of this._externalOpeners){if(await t.openExternal(s,{sourceUri:i,preferredOpenerId:e},Ci.None))return!0}}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},Ci.None)}dispose(){this._validators.clear()}};uE=Bs([zs(0,Xc),zs(1,fC)],uE);const gE=o("editorWorkerService"),pE="$initialize";let fE=!1;function mE(e){F&&(fE||(fE=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}class bE{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.method=i,this.args=n,this.type=0}}class vE{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class wE{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=n,this.type=2}}class _E{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class yE{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class CE{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const i=String(++this._lastSentReq);return new Promise(((n,s)=>{this._pendingReplies[i]={resolve:n,reject:s},this._send(new bE(this._workerId,i,e,t))}))}listen(e,t){let i=null;const n=new ui({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,n),this._send(new wE(this._workerId,i,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new yE(this._workerId,i)),i=null}});return n.event}handleMessage(e){e&&e.vsWorker&&(-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e))}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq])return void console.warn("Got reply to unknown seq");const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;return e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),void t.reject(i)}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then((e=>{this._send(new vE(this._workerId,t,e,void 0))}),(e=>{e.detail instanceof Error&&(e.detail=Ye(e.detail)),this._send(new vE(this._workerId,t,void 0,Ye(e)))}))}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)((e=>{this._send(new _E(this._workerId,t,e))}));this._pendingEvents.set(t,i)}_handleEventMessage(e){this._pendingEmitters.has(e.req)?this._pendingEmitters.get(e.req).fire(e.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(e){this._pendingEvents.has(e.req)?(this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)):console.warn("Got unsubscribe for unknown req")}_send(e){const t=[];if(0===e.type)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else 1===e.type&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class SE extends Qt{constructor(e,t,i){super();let n=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",(e=>{this._protocol.handleMessage(e)}),(e=>{n?.(e)}))),this._protocol=new CE({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t)=>{if("function"!=typeof i[e])return Promise.reject(new Error("Missing method "+e+" on main thread host."));try{return Promise.resolve(i[e].apply(i,t))}catch(e){return Promise.reject(e)}},handleEvent:(e,t)=>{if(xE(e)){const n=i[e].call(i,t);if("function"!=typeof n)throw new Error(`Missing dynamic event ${e} on main thread host.`);return n}if(kE(e)){const t=i[e];if("function"!=typeof t)throw new Error(`Missing event ${e} on main thread host.`);return t}throw new Error(`Malformed event name ${e}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;void 0!==globalThis.requirejs&&(s=globalThis.requirejs.s.contexts._.config);const o=jn(i);this._onModuleLoaded=this._protocol.sendMessage(pE,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,o]);const r=(e,t)=>this._request(e,t),a=(e,t)=>this._protocol.listen(e,t);this._lazyProxy=new Promise(((e,i)=>{n=i,this._onModuleLoaded.then((t=>{e(EE(t,r,a))}),(e=>{i(e),this._onError("Worker failed to load "+t,e)}))}))}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise(((i,n)=>{this._onModuleLoaded.then((()=>{this._protocol.sendMessage(e,t).then(i,n)}),n)}))}_onError(e,t){console.error(e),console.info(t)}}function kE(e){return"o"===e[0]&&"n"===e[1]&&Ki(e.charCodeAt(2))}function xE(e){return/^onDynamic/.test(e)&&Ki(e.charCodeAt(9))}function EE(e,t,i){const n=e=>function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)},s=e=>function(t){return i(e,t)},o={};for(const t of e)xE(t)?o[t]=s(t):kE(t)?o[t]=i(t,void 0):o[t]=n(t);return o}const DE=F_("defaultWorkerFactory",{createScriptURL:e=>e});class LE extends Qt{constructor(e,t,i,n,s){super(),this.id=t,this.label=i;const o=function(e){const t=globalThis.MonacoEnvironment;if(t){if("function"==typeof t.getWorker)return t.getWorker("workerMain.js",e);if("function"==typeof t.getWorkerUrl){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(DE?DE.createScriptURL(i):i,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}(i);"function"==typeof o.then?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then((e=>{e.onmessage=function(e){n(e.data)},e.onmessageerror=s,"function"==typeof e.addEventListener&&e.addEventListener("error",s)})),this._register(Yt((()=>{this.worker?.then((e=>{e.onmessage=null,e.onmessageerror=null,e.removeEventListener("error",s),e.terminate()})),this.worker=null})))}getId(){return this.id}postMessage(e,t){this.worker?.then((i=>{try{i.postMessage(e,t)}catch(e){Ge(e),Ge(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:e}))}}))}}class IE{static{this.LAST_WORKER_ID=0}constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){const n=++IE.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new LE(e,n,this._label||"anonymous"+n,t,(e=>{mE(e),this._webWorkerFailedBeforeError=e,i(e)}))}}class TE{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class NE{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function AE(e,t,i){return new FE(new NE(e),new NE(t)).ComputeDiff(i).changes}class ME{static Assert(e,t){if(!e)throw new Error(t)}}class RE{static Copy(e,t,i,n,s){for(let o=0;o<s;o++)i[n+o]=e[t+o]}static Copy2(e,t,i,n,s){for(let o=0;o<s;o++)i[n+o]=e[t+o]}}class OE{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new TE(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class FE{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,s,o]=FE._getElements(e),[r,a,l]=FE._getElements(t);this._hasStrings=o&&l,this._originalStringElements=n,this._originalElementsOrHash=s,this._modifiedStringElements=r,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"==typeof e[0]}static _getElements(e){const t=e.getElements();if(FE._isStringArray(t)){const e=new Int32Array(t.length);for(let i=0,n=t.length;i<n;i++)e[i]=ih(t[i],0);return[t,e,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;return FE._getStrictElement(this._originalSequence,e)===FE._getStrictElement(this._modifiedSequence,t)}static _getStrictElement(e,t){return"function"==typeof e.getStrictElement?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,s){const o=[!1];let r=this.ComputeDiffRecursive(e,t,i,n,o);return s&&(r=this.PrettifyChanges(r)),{quitEarly:o[0],changes:r}}ComputeDiffRecursive(e,t,i,n,s){for(s[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let s;return i<=n?(ME.Assert(e===t+1,"originalStart should only be one more than originalEnd"),s=[new TE(e,0,i,n-i+1)]):e<=t?(ME.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),s=[new TE(e,t-e+1,i,0)]):(ME.Assert(e===t+1,"originalStart should only be one more than originalEnd"),ME.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),s=[]),s}const o=[0],r=[0],a=this.ComputeRecursionPoint(e,t,i,n,o,r,s),l=o[0],h=r[0];if(null!==a)return a;if(!s[0]){const o=this.ComputeDiffRecursive(e,l,i,h,s);let r=[];return r=s[0]?[new TE(l+1,t-(l+1)+1,h+1,n-(h+1)+1)]:this.ComputeDiffRecursive(l+1,t,h+1,n,s),this.ConcatenateChanges(o,r)}return[new TE(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p,f,m,b){let v=null,w=null,_=new OE,y=t,C=i,S=u[0]-f[0]-n,k=-1073741824,x=this.m_forwardHistory.length-1;do{const t=S+e;t===y||t<C&&l[t-1]<l[t+1]?(g=(c=l[t+1])-S-n,c<k&&_.MarkNextChange(),k=c,_.AddModifiedElement(c+1,g),S=t+1-e):(g=(c=l[t-1]+1)-S-n,c<k&&_.MarkNextChange(),k=c-1,_.AddOriginalElement(c,g+1),S=t-1-e),x>=0&&(e=(l=this.m_forwardHistory[x])[0],y=1,C=l.length-1)}while(--x>=-1);if(v=_.getReverseChanges(),b[0]){let e=u[0]+1,t=f[0]+1;if(null!==v&&v.length>0){const i=v[v.length-1];e=Math.max(e,i.getOriginalEnd()),t=Math.max(t,i.getModifiedEnd())}w=[new TE(e,d-e+1,t,p-t+1)]}else{_=new OE,y=o,C=r,S=u[0]-f[0]-a,k=1073741824,x=m?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const e=S+s;e===y||e<C&&h[e-1]>=h[e+1]?(g=(c=h[e+1]-1)-S-a,c>k&&_.MarkNextChange(),k=c+1,_.AddOriginalElement(c+1,g+1),S=e+1-s):(g=(c=h[e-1])-S-a,c>k&&_.MarkNextChange(),k=c,_.AddModifiedElement(c+1,g+1),S=e-1-s),x>=0&&(s=(h=this.m_reverseHistory[x])[0],y=1,C=h.length-1)}while(--x>=-1);w=_.getChanges()}return this.ConcatenateChanges(v,w)}ComputeRecursionPoint(e,t,i,n,s,o,r){let a=0,l=0,h=0,c=0,d=0,u=0;e--,i--,s[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(n-i),p=g+1,f=new Int32Array(p),m=new Int32Array(p),b=n-i,v=t-e,w=e-i,_=t-n,y=(v-b)%2==0;f[b]=e,m[v]=t,r[0]=!1;for(let C=1;C<=g/2+1;C++){let g=0,S=0;h=this.ClipDiagonalBound(b-C,C,b,p),c=this.ClipDiagonalBound(b+C,C,b,p);for(let e=h;e<=c;e+=2){a=e===h||e<c&&f[e-1]<f[e+1]?f[e+1]:f[e-1]+1,l=a-(e-b)-w;const i=a;for(;a<t&&l<n&&this.ElementsAreEqual(a+1,l+1);)a++,l++;if(f[e]=a,a+l>g+S&&(g=a,S=l),!y&&Math.abs(e-v)<=C-1&&a>=m[e])return s[0]=a,o[0]=l,i<=m[e]&&C<=1448?this.WALKTRACE(b,h,c,w,v,d,u,_,f,m,a,t,s,l,n,o,y,r):null}const k=(g-e+(S-i)-C)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(g,k))return r[0]=!0,s[0]=g,o[0]=S,k>0&&C<=1448?this.WALKTRACE(b,h,c,w,v,d,u,_,f,m,a,t,s,l,n,o,y,r):(e++,i++,[new TE(e,t-e+1,i,n-i+1)]);d=this.ClipDiagonalBound(v-C,C,v,p),u=this.ClipDiagonalBound(v+C,C,v,p);for(let g=d;g<=u;g+=2){a=g===d||g<u&&m[g-1]>=m[g+1]?m[g+1]-1:m[g-1],l=a-(g-v)-_;const p=a;for(;a>e&&l>i&&this.ElementsAreEqual(a,l);)a--,l--;if(m[g]=a,y&&Math.abs(g-b)<=C&&a<=f[g])return s[0]=a,o[0]=l,p>=f[g]&&C<=1448?this.WALKTRACE(b,h,c,w,v,d,u,_,f,m,a,t,s,l,n,o,y,r):null}if(C<=1447){let e=new Int32Array(c-h+2);e[0]=b-h+1,RE.Copy2(f,h,e,1,c-h+1),this.m_forwardHistory.push(e),e=new Int32Array(u-d+2),e[0]=v-d+1,RE.Copy2(m,d,e,1,u-d+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(b,h,c,w,v,d,u,_,f,m,a,t,s,l,n,o,y,r)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,r=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<s&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!r||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const e=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!e)break;i.originalStart++,i.modifiedStart++}const a=[null];t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],a)&&(e[t]=a[0],e.splice(t+1,1),t--)}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,s=0;if(t>0){const i=e[t-1];n=i.originalStart+i.originalLength,s=i.modifiedStart+i.modifiedLength}const o=i.originalLength>0,r=i.modifiedLength>0;let a=0,l=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let e=1;;e++){const t=i.originalStart-e,h=i.modifiedStart-e;if(t<n||h<s)break;if(o&&!this.OriginalElementsAreEqual(t,t+i.originalLength))break;if(r&&!this.ModifiedElementsAreEqual(h,h+i.modifiedLength))break;const c=(t===n&&h===s?5:0)+this._boundaryScore(t,i.originalLength,h,i.modifiedLength);c>l&&(l=c,a=e)}i.originalStart-=a,i.modifiedStart-=a;const h=[null];t>0&&this.ChangesOverlap(e[t-1],e[t],h)&&(e[t-1]=h[0],e.splice(t,1),t++)}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const i=e[t-1],n=e[t],s=n.originalStart-i.originalStart-i.originalLength,o=i.originalStart,r=n.originalStart+n.originalLength,a=r-o,l=i.modifiedStart,h=n.modifiedStart+n.modifiedLength,c=h-l;if(s<5&&a<20&&c<20){const e=this._findBetterContiguousSequence(o,a,l,c,s);if(e){const[t,o]=e;t===i.originalStart+i.originalLength&&o===i.modifiedStart+i.modifiedLength||(i.originalLength=t-i.originalStart,i.modifiedLength=o-i.modifiedStart,n.originalStart=t+s,n.modifiedStart=o+s,n.originalLength=r-n.originalStart,n.modifiedLength=h-n.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,s){if(t<s||n<s)return null;const o=e+t-s+1,r=i+n-s+1;let a=0,l=0,h=0;for(let t=e;t<o;t++)for(let e=i;e<r;e++){const i=this._contiguousSequenceScore(t,e,s);i>0&&i>a&&(a=i,l=t,h=e)}return a>0?[l,h]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;n+=this._originalStringElements[e+s].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(i,n)?1:0)}ConcatenateChanges(e,t){const i=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return RE.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],RE.Copy(t,1,n,e.length,t.length-1),n}{const i=new Array(e.length+t.length);return RE.Copy(e,0,i,0,e.length),RE.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,i){if(ME.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),ME.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let s=e.originalLength;const o=e.modifiedStart;let r=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(r=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new TE(n,s,o,r),!0}return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const s=t%2==0;if(e<0){return s===(i%2==0)?0:1}return s===((n-i-1)%2==0)?n-1:n-2}}function PE(e){return e<0?0:e>255?255:0|e}function BE(e){return e<0?0:e>4294967295?4294967295:0|e}class zE{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,t){e=BE(e);const i=this.values,n=this.prefixSum,s=t.length;return 0!==s&&(this.values=new Uint32Array(i.length+s),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=BE(e),t=BE(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=BE(e),t=BE(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),0!==t&&(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=BE(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,s=0,o=0;for(;t<=i;)if(n=t+(i-t)/2|0,s=this.prefixSum[n],o=s-this.values[n],e<o)i=n-1;else{if(!(e>=s))break;t=n+1}return new WE(n,e-o)}}class WE{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class HE{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const e of t)this._acceptDeleteRange(e.range),this._acceptInsertText(new Lo(e.range.startLineNumber,e.range.startColumn),e.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new zE(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;const i=Fi(t);if(1===i.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let t=1;t<i.length;t++)this._lines.splice(e.lineNumber+t-1,0,i[t]),n[t-1]=i[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}class VE{constructor(e){const t=PE(e);this._defaultValue=t,this._asciiMap=VE._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=PE(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class UE{constructor(e,t,i){const n=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)n[s]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class KE{constructor(e){let t=0,i=0;for(let n=0,s=e.length;n<s;n++){const[s,o,r]=e[n];o>t&&(t=o),s>i&&(i=s),r>i&&(i=r)}t++,i++;const n=new UE(i,t,0);for(let t=0,i=e.length;t<i;t++){const[i,s,o]=e[t];n.set(i,s,o)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let qE=null;let $E=null;class jE{static _createLink(e,t,i,n,s){let o=s-1;do{const i=t.charCodeAt(o);if(2!==e.get(i))break;o--}while(o>n);if(n>0){const e=t.charCodeAt(n-1),i=t.charCodeAt(o);(40===e&&41===i||91===e&&93===i||123===e&&125===i)&&o--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:o+2},url:t.substring(n,o+1)}}static computeLinks(e,t=function(){return null===qE&&(qE=new KE([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),qE}()){const i=function(){if(null===$E){$E=new VE(0);const e=" \t<>'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…";for(let t=0;t<e.length;t++)$E.set(e.charCodeAt(t),1);const t=".,;:";for(let e=0;e<t.length;e++)$E.set(t.charCodeAt(e),2)}return $E}(),n=[];for(let s=1,o=e.getLineCount();s<=o;s++){const o=e.getLineContent(s),r=o.length;let a=0,l=0,h=0,c=1,d=!1,u=!1,g=!1,p=!1;for(;a<r;){let e=!1;const r=o.charCodeAt(a);if(13===c){let t;switch(r){case 40:d=!0,t=0;break;case 41:t=d?0:1;break;case 91:g=!0,u=!0,t=0;break;case 93:g=!1,t=u?0:1;break;case 123:p=!0,t=0;break;case 125:t=p?0:1;break;case 39:case 34:case 96:t=h===r?1:39===h||34===h||96===h?0:1;break;case 42:t=42===h?1:0;break;case 124:t=124===h?1:0;break;case 32:t=g?0:1;break;default:t=i.get(r)}1===t&&(n.push(jE._createLink(i,o,s,l,a)),e=!0)}else if(12===c){let t;91===r?(u=!0,t=0):t=i.get(r),1===t?e=!0:c=13}else c=t.nextState(c,r),0===c&&(e=!0);e&&(c=1,d=!1,u=!1,p=!1,l=a+1,h=r),a++}13===c&&n.push(jE._createLink(i,o,s,l,r))}return n}}class GE{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}static{this.INSTANCE=new GE}navigateValueSet(e,t,i,n,s){if(e&&t){const i=this.doNavigateValueSet(t,s);if(i)return{range:e,value:i}}if(i&&n){const e=this.doNavigateValueSet(n,s);if(e)return{range:i,value:e}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return null!==i?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const s=parseFloat(e);return isNaN(n)||isNaN(s)||n!==s?null:0!==n||t?(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let s=0,o=e.length;null===n&&s<o;s++)n=this.valueSetReplace(e[s],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}}class YE extends Io{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return YE.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new YE(this.startLineNumber,this.startColumn,e,t):new YE(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Lo(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Lo(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new YE(e,t,this.endLineNumber,this.endColumn):new YE(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new YE(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new YE(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new YE(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new YE(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(e,t,i,n,s){return 0===s?new YE(e,t,i,n):new YE(i,n,e,t)}}var XE,QE,ZE,JE,eD,tD,iD,nD,sD,oD,rD,aD,lD,hD,cD,dD,uD,gD,pD,fD,mD,bD,vD,wD,_D,yD,CD,SD,kD,xD,ED,DD,LD,ID,TD,ND,AD,MD,RD,OD,FD,PD,BD,zD,WD,HD;!function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"}(XE||(XE={})),function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"}(QE||(QE={})),function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"}(ZE||(ZE={})),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(JE||(JE={})),function(e){e[e.Deprecated=1]="Deprecated"}(eD||(eD={})),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(tD||(tD={})),function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(iD||(iD={})),function(e){e[e.NotSet=0]="NotSet",e[e.ContentFlush=1]="ContentFlush",e[e.RecoverFromMarkers=2]="RecoverFromMarkers",e[e.Explicit=3]="Explicit",e[e.Paste=4]="Paste",e[e.Undo=5]="Undo",e[e.Redo=6]="Redo"}(nD||(nD={})),function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(sD||(sD={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(oD||(oD={})),function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"}(rD||(rD={})),function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.emptySelectionClipboard=37]="emptySelectionClipboard",e[e.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",e[e.extraEditorClassName=39]="extraEditorClassName",e[e.fastScrollSensitivity=40]="fastScrollSensitivity",e[e.find=41]="find",e[e.fixedOverflowWidgets=42]="fixedOverflowWidgets",e[e.folding=43]="folding",e[e.foldingStrategy=44]="foldingStrategy",e[e.foldingHighlight=45]="foldingHighlight",e[e.foldingImportsByDefault=46]="foldingImportsByDefault",e[e.foldingMaximumRegions=47]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=49]="fontFamily",e[e.fontInfo=50]="fontInfo",e[e.fontLigatures=51]="fontLigatures",e[e.fontSize=52]="fontSize",e[e.fontWeight=53]="fontWeight",e[e.fontVariations=54]="fontVariations",e[e.formatOnPaste=55]="formatOnPaste",e[e.formatOnType=56]="formatOnType",e[e.glyphMargin=57]="glyphMargin",e[e.gotoLocation=58]="gotoLocation",e[e.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",e[e.hover=60]="hover",e[e.inDiffEditor=61]="inDiffEditor",e[e.inlineSuggest=62]="inlineSuggest",e[e.inlineEdit=63]="inlineEdit",e[e.letterSpacing=64]="letterSpacing",e[e.lightbulb=65]="lightbulb",e[e.lineDecorationsWidth=66]="lineDecorationsWidth",e[e.lineHeight=67]="lineHeight",e[e.lineNumbers=68]="lineNumbers",e[e.lineNumbersMinChars=69]="lineNumbersMinChars",e[e.linkedEditing=70]="linkedEditing",e[e.links=71]="links",e[e.matchBrackets=72]="matchBrackets",e[e.minimap=73]="minimap",e[e.mouseStyle=74]="mouseStyle",e[e.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=76]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",e[e.multiCursorModifier=78]="multiCursorModifier",e[e.multiCursorPaste=79]="multiCursorPaste",e[e.multiCursorLimit=80]="multiCursorLimit",e[e.occurrencesHighlight=81]="occurrencesHighlight",e[e.overviewRulerBorder=82]="overviewRulerBorder",e[e.overviewRulerLanes=83]="overviewRulerLanes",e[e.padding=84]="padding",e[e.pasteAs=85]="pasteAs",e[e.parameterHints=86]="parameterHints",e[e.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",e[e.definitionLinkOpensInPeek=88]="definitionLinkOpensInPeek",e[e.quickSuggestions=89]="quickSuggestions",e[e.quickSuggestionsDelay=90]="quickSuggestionsDelay",e[e.readOnly=91]="readOnly",e[e.readOnlyMessage=92]="readOnlyMessage",e[e.renameOnType=93]="renameOnType",e[e.renderControlCharacters=94]="renderControlCharacters",e[e.renderFinalNewline=95]="renderFinalNewline",e[e.renderLineHighlight=96]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=97]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=98]="renderValidationDecorations",e[e.renderWhitespace=99]="renderWhitespace",e[e.revealHorizontalRightPadding=100]="revealHorizontalRightPadding",e[e.roundedSelection=101]="roundedSelection",e[e.rulers=102]="rulers",e[e.scrollbar=103]="scrollbar",e[e.scrollBeyondLastColumn=104]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=105]="scrollBeyondLastLine",e[e.scrollPredominantAxis=106]="scrollPredominantAxis",e[e.selectionClipboard=107]="selectionClipboard",e[e.selectionHighlight=108]="selectionHighlight",e[e.selectOnLineNumbers=109]="selectOnLineNumbers",e[e.showFoldingControls=110]="showFoldingControls",e[e.showUnused=111]="showUnused",e[e.snippetSuggestions=112]="snippetSuggestions",e[e.smartSelect=113]="smartSelect",e[e.smoothScrolling=114]="smoothScrolling",e[e.stickyScroll=115]="stickyScroll",e[e.stickyTabStops=116]="stickyTabStops",e[e.stopRenderingLineAfter=117]="stopRenderingLineAfter",e[e.suggest=118]="suggest",e[e.suggestFontSize=119]="suggestFontSize",e[e.suggestLineHeight=120]="suggestLineHeight",e[e.suggestOnTriggerCharacters=121]="suggestOnTriggerCharacters",e[e.suggestSelection=122]="suggestSelection",e[e.tabCompletion=123]="tabCompletion",e[e.tabIndex=124]="tabIndex",e[e.unicodeHighlighting=125]="unicodeHighlighting",e[e.unusualLineTerminators=126]="unusualLineTerminators",e[e.useShadowDOM=127]="useShadowDOM",e[e.useTabStops=128]="useTabStops",e[e.wordBreak=129]="wordBreak",e[e.wordSegmenterLocales=130]="wordSegmenterLocales",e[e.wordSeparators=131]="wordSeparators",e[e.wordWrap=132]="wordWrap",e[e.wordWrapBreakAfterCharacters=133]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=134]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=135]="wordWrapColumn",e[e.wordWrapOverride1=136]="wordWrapOverride1",e[e.wordWrapOverride2=137]="wordWrapOverride2",e[e.wrappingIndent=138]="wrappingIndent",e[e.wrappingStrategy=139]="wrappingStrategy",e[e.showDeprecated=140]="showDeprecated",e[e.inlayHints=141]="inlayHints",e[e.editorClassName=142]="editorClassName",e[e.pixelRatio=143]="pixelRatio",e[e.tabFocusMode=144]="tabFocusMode",e[e.layoutInfo=145]="layoutInfo",e[e.wrappingInfo=146]="wrappingInfo",e[e.defaultColorDecorators=147]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=148]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=149]="inlineCompletionsAccessibilityVerbose"}(aD||(aD={})),function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(lD||(lD={})),function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(hD||(hD={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(cD||(cD={})),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(dD||(dD={})),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(uD||(uD={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(gD||(gD={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(pD||(pD={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(fD||(fD={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(mD||(mD={})),function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.Digit0=21]="Digit0",e[e.Digit1=22]="Digit1",e[e.Digit2=23]="Digit2",e[e.Digit3=24]="Digit3",e[e.Digit4=25]="Digit4",e[e.Digit5=26]="Digit5",e[e.Digit6=27]="Digit6",e[e.Digit7=28]="Digit7",e[e.Digit8=29]="Digit8",e[e.Digit9=30]="Digit9",e[e.KeyA=31]="KeyA",e[e.KeyB=32]="KeyB",e[e.KeyC=33]="KeyC",e[e.KeyD=34]="KeyD",e[e.KeyE=35]="KeyE",e[e.KeyF=36]="KeyF",e[e.KeyG=37]="KeyG",e[e.KeyH=38]="KeyH",e[e.KeyI=39]="KeyI",e[e.KeyJ=40]="KeyJ",e[e.KeyK=41]="KeyK",e[e.KeyL=42]="KeyL",e[e.KeyM=43]="KeyM",e[e.KeyN=44]="KeyN",e[e.KeyO=45]="KeyO",e[e.KeyP=46]="KeyP",e[e.KeyQ=47]="KeyQ",e[e.KeyR=48]="KeyR",e[e.KeyS=49]="KeyS",e[e.KeyT=50]="KeyT",e[e.KeyU=51]="KeyU",e[e.KeyV=52]="KeyV",e[e.KeyW=53]="KeyW",e[e.KeyX=54]="KeyX",e[e.KeyY=55]="KeyY",e[e.KeyZ=56]="KeyZ",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.F20=78]="F20",e[e.F21=79]="F21",e[e.F22=80]="F22",e[e.F23=81]="F23",e[e.F24=82]="F24",e[e.NumLock=83]="NumLock",e[e.ScrollLock=84]="ScrollLock",e[e.Semicolon=85]="Semicolon",e[e.Equal=86]="Equal",e[e.Comma=87]="Comma",e[e.Minus=88]="Minus",e[e.Period=89]="Period",e[e.Slash=90]="Slash",e[e.Backquote=91]="Backquote",e[e.BracketLeft=92]="BracketLeft",e[e.Backslash=93]="Backslash",e[e.BracketRight=94]="BracketRight",e[e.Quote=95]="Quote",e[e.OEM_8=96]="OEM_8",e[e.IntlBackslash=97]="IntlBackslash",e[e.Numpad0=98]="Numpad0",e[e.Numpad1=99]="Numpad1",e[e.Numpad2=100]="Numpad2",e[e.Numpad3=101]="Numpad3",e[e.Numpad4=102]="Numpad4",e[e.Numpad5=103]="Numpad5",e[e.Numpad6=104]="Numpad6",e[e.Numpad7=105]="Numpad7",e[e.Numpad8=106]="Numpad8",e[e.Numpad9=107]="Numpad9",e[e.NumpadMultiply=108]="NumpadMultiply",e[e.NumpadAdd=109]="NumpadAdd",e[e.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",e[e.NumpadSubtract=111]="NumpadSubtract",e[e.NumpadDecimal=112]="NumpadDecimal",e[e.NumpadDivide=113]="NumpadDivide",e[e.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",e[e.ABNT_C1=115]="ABNT_C1",e[e.ABNT_C2=116]="ABNT_C2",e[e.AudioVolumeMute=117]="AudioVolumeMute",e[e.AudioVolumeUp=118]="AudioVolumeUp",e[e.AudioVolumeDown=119]="AudioVolumeDown",e[e.BrowserSearch=120]="BrowserSearch",e[e.BrowserHome=121]="BrowserHome",e[e.BrowserBack=122]="BrowserBack",e[e.BrowserForward=123]="BrowserForward",e[e.MediaTrackNext=124]="MediaTrackNext",e[e.MediaTrackPrevious=125]="MediaTrackPrevious",e[e.MediaStop=126]="MediaStop",e[e.MediaPlayPause=127]="MediaPlayPause",e[e.LaunchMediaPlayer=128]="LaunchMediaPlayer",e[e.LaunchMail=129]="LaunchMail",e[e.LaunchApp2=130]="LaunchApp2",e[e.Clear=131]="Clear",e[e.MAX_VALUE=132]="MAX_VALUE"}(bD||(bD={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(vD||(vD={})),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(wD||(wD={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(_D||(_D={})),function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"}(yD||(yD={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",e[e.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(CD||(CD={})),function(e){e[e.AIGenerated=1]="AIGenerated"}(SD||(SD={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(kD||(kD={})),function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(xD||(xD={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(ED||(ED={})),function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"}(DD||(DD={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"}(LD||(LD={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"}(ID||(ID={})),function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"}(TD||(TD={})),function(e){e[e.Smooth=0]="Smooth",e[e.Immediate=1]="Immediate"}(ND||(ND={})),function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(AD||(AD={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(MD||(MD={})),function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(RD||(RD={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(OD||(OD={})),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(FD||(FD={})),function(e){e[e.Deprecated=1]="Deprecated"}(PD||(PD={})),function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"}(BD||(BD={})),function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(zD||(zD={})),function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(WD||(WD={})),function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"}(HD||(HD={}));class VD{static{this.CtrlCmd=2048}static{this.Shift=1024}static{this.Alt=512}static{this.WinCtrl=256}static chord(e,t){return function(e,t){return(e|(65535&t)<<16>>>0)>>>0}(e,t)}}class UD extends VE{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?(this._cachedLine===e||(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e))),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const KD=new Ft(10);class qD{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(let t=0,i=e.length;t<i;t++){const n=e.charCodeAt(t);if(10===n)return!0;if(92===n){if(t++,t>=i)break;const n=e.charCodeAt(t);if(110===n||114===n||87===n)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=Oi(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(e){return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new Pc(t,this.wordSeparators?function(e,t){const i=`${e}/${t.join(",")}`;let n=KD.get(i);return n||(n=new UD(e,t),KD.set(i,n)),n}(this.wordSeparators,[]):null,i?this.searchString:null)}}function $D(e,t,i){if(!i)return new Oc(e,null);const n=[];for(let e=0,i=t.length;e<i;e++)n[e]=t[e];return new Oc(e,n)}class jD{constructor(e){const t=[];let i=0;for(let n=0,s=e.length;n<s;n++)10===e.charCodeAt(n)&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(-1===n)return 0;if(e<=t[0])return 0;for(;i<n;){const s=i+((n-i)/2|0);t[s]>=e?n=s-1:t[s+1]>=e?(i=s,n=s):i=s+1}return i+1}}class GD{static findMatches(e,t,i,n,s){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new XD(o.wordSeparators,o.regex),n,s):this._doFindMatchesLineByLine(e,i,o,n,s):[]}static _getMultilineMatchRange(e,t,i,n,s,o){let r,a,l=0;if(n?(l=n.findLineFeedCountBeforeOffset(s),r=t+s+l):r=t+s,n){const e=n.findLineFeedCountBeforeOffset(s+o.length)-l;a=r+o.length+e}else a=r+o.length;const h=e.getPositionAt(r),c=e.getPositionAt(a);return new Io(h.lineNumber,h.column,c.lineNumber,c.column)}static _doFindMatchesMultiline(e,t,i,n,s){const o=e.getOffsetAt(t.getStartPosition()),r=e.getValueInRange(t,1),a="\r\n"===e.getEOL()?new jD(r):null,l=[];let h,c=0;for(i.reset(0);h=i.next(r);)if(l[c++]=$D(this._getMultilineMatchRange(e,o,r,a,h.index,h[0]),h,n),c>=s)return l;return l}static _doFindMatchesLineByLine(e,t,i,n,s){const o=[];let r=0;if(t.startLineNumber===t.endLineNumber){const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return r=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,r,o,n,s),o}const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);r=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,r,o,n,s);for(let a=t.startLineNumber+1;a<t.endLineNumber&&r<s;a++)r=this._findMatchesInLine(i,e.getLineContent(a),a,0,r,o,n,s);if(r<s){const a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);r=this._findMatchesInLine(i,a,t.endLineNumber,0,r,o,n,s)}return o}static _findMatchesInLine(e,t,i,n,s,o,r,a){const l=e.wordSeparators;if(!r&&e.simpleSearch){const r=e.simpleSearch,h=r.length,c=t.length;let d=-h;for(;-1!==(d=t.indexOf(r,d+h));)if((!l||YD(l,t,c,d,h))&&(o[s++]=new Oc(new Io(i,d+1+n,i,d+1+h+n),null),s>=a))return s;return s}const h=new XD(e.wordSeparators,e.regex);let c;h.reset(0);do{if(c=h.next(t),c&&(o[s++]=$D(new Io(i,c.index+1+n,i,c.index+1+c[0].length+n),c,r),s>=a))return s}while(c);return s}static findNextMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const o=new XD(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,o,n):this._doFindNextMatchLineByLine(e,i,o,n)}static _doFindNextMatchMultiline(e,t,i,n){const s=new Lo(t.lineNumber,1),o=e.getOffsetAt(s),r=e.getLineCount(),a=e.getValueInRange(new Io(s.lineNumber,s.column,r,e.getLineMaxColumn(r)),1),l="\r\n"===e.getEOL()?new jD(a):null;i.reset(t.column-1);const h=i.next(a);return h?$D(this._getMultilineMatchRange(e,o,a,l,h.index,h[0]),h,n):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new Lo(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const s=e.getLineCount(),o=t.lineNumber,r=e.getLineContent(o),a=this._findFirstMatchInLine(i,r,o,t.column,n);if(a)return a;for(let t=1;t<=s;t++){const r=(o+t-1)%s,a=e.getLineContent(r+1),l=this._findFirstMatchInLine(i,a,r+1,1,n);if(l)return l}return null}static _findFirstMatchInLine(e,t,i,n,s){e.reset(n-1);const o=e.next(t);return o?$D(new Io(i,o.index+1,i,o.index+1+o[0].length),o,s):null}static findPreviousMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const o=new XD(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,n):this._doFindPreviousMatchLineByLine(e,i,o,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const s=this._doFindMatchesMultiline(e,new Io(1,1,t.lineNumber,t.column),i,n,9990);if(s.length>0)return s[s.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new Lo(o,e.getLineMaxColumn(o)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const s=e.getLineCount(),o=t.lineNumber,r=e.getLineContent(o).substring(0,t.column-1),a=this._findLastMatchInLine(i,r,o,n);if(a)return a;for(let t=1;t<=s;t++){const r=(s+o-t-1)%s,a=e.getLineContent(r+1),l=this._findLastMatchInLine(i,a,r+1,n);if(l)return l}return null}static _findLastMatchInLine(e,t,i,n){let s,o=null;for(e.reset(0);s=e.next(t);)o=$D(new Io(i,s.index+1,i,s.index+1+s[0].length),s,n);return o}}function YD(e,t,i,n,s){return function(e,t,i,n,s){if(0===n)return!0;const o=t.charCodeAt(n-1);if(0!==e.get(o))return!0;if(13===o||10===o)return!0;if(s>0){const i=t.charCodeAt(n);if(0!==e.get(i))return!0}return!1}(e,t,0,n,s)&&function(e,t,i,n,s){if(n+s===i)return!0;const o=t.charCodeAt(n+s);if(0!==e.get(o))return!0;if(13===o||10===o)return!0;if(s>0){const i=t.charCodeAt(n+s-1);if(0!==e.get(i))return!0}return!1}(e,t,i,n,s)}class XD{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t)return null;if(i=this._searchRegex.exec(e),!i)return null;const n=i.index,s=i[0].length;if(n===this._prevMatchStartIndex&&s===this._prevMatchLength){if(0===s){Xi(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=s,!this._wordSeparators||YD(this._wordSeparators,e,t,n,s))return i}while(i);return null}}class QD{static computeUnicodeHighlights(e,t,i){const n=i?i.startLineNumber:1,s=i?i.endLineNumber:e.getLineCount(),o=new ZD(t),r=o.getCandidateCodePoints();let a;a="allNonBasicAscii"===r?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp(""+`[${Ai(Array.from(r).map((e=>String.fromCodePoint(e))).join(""))}]`,"g");const l=new XD(null,a),h=[];let c,d=!1,u=0,g=0,p=0;e:for(let t=n,i=s;t<=i;t++){const i=e.getLineContent(t),n=i.length;l.reset(0);do{if(c=l.next(i),c){let e=c.index,s=c.index+c[0].length;if(e>0){ji(i.charCodeAt(e-1))&&e--}if(s+1<n){ji(i.charCodeAt(s-1))&&s++}const r=i.substring(e,s);let a=Ks(e+1,Hs,i,0);a&&a.endColumn<=e+1&&(a=null);const l=o.shouldHighlightNonBasicASCII(r,a?a.word:null);if(0!==l){3===l?u++:2===l?g++:1===l?p++:Xo();const i=1e3;if(h.length>=i){d=!0;break e}h.push(new Io(t,e+1,t,s+1))}}}while(c)}return{ranges:h,hasMore:d,ambiguousCharacterCount:u,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const i=new ZD(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const n=e.codePointAt(0),s=i.ambiguousCharacters.getPrimaryConfusable(n),o=gn.getLocales().filter((e=>!gn.getInstance(new Set([...t.allowedLocales,e])).isAmbiguous(n)));return{kind:0,confusableWith:String.fromCodePoint(s),notAmbiguousInLocales:o}}case 1:return{kind:2}}}}class ZD{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=gn.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of pn.codePoints)JD(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,s=!1;if(t)for(const e of t){const t=e.codePointAt(0),i=on(e);n=n||i,i||this.ambiguousCharacters.isAmbiguous(t)||pn.isInvisibleCharacter(t)||(s=!0)}return!n&&s?0:this.options.invisibleCharacters&&!JD(e)&&pn.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function JD(e){return" "===e||"\n"===e||"\t"===e}class eL{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class tL{constructor(e,t){this.lineRangeMapping=e,this.changes=t}flip(){return new tL(this.lineRangeMapping.flip(),this.changes.map((e=>e.flip())))}}class iL{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{const s=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new iL(s,o))}}static tryCreate(e,t){if(!(e>t))return new iL(e,t)}static ofLength(e){return new iL(0,e)}static ofStartAndLength(e,t){return new iL(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new ot(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new iL(this.start+e,this.endExclusive+e)}deltaStart(e){return new iL(this.start+e,this.endExclusive)}deltaEnd(e){return new iL(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new iL(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new iL(t,i)}intersects(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}intersectsOrTouches(e){return Math.max(this.start,e.start)<=Math.min(this.endExclusive,e.endExclusive)}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new ot(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new ot(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){const t=[];for(let i=this.start;i<this.endExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}function nL(e,t){const i=sL(e,t);return-1===i?void 0:e[i]}function sL(e,t,i=0,n=e.length){let s=i,o=n;for(;s<o;){const i=Math.floor((s+o)/2);t(e[i])?s=i+1:o=i}return s-1}function oL(e,t,i=0,n=e.length){let s=i,o=n;for(;s<o;){const i=Math.floor((s+o)/2);t(e[i])?o=i:s=i+1}return s}class rL{static{this.assertInvariants=!1}constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(rL.assertInvariants){if(this._prevFindLastPredicate)for(const t of this._array)if(this._prevFindLastPredicate(t)&&!e(t))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.");this._prevFindLastPredicate=e}const t=sL(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,-1===t?void 0:this._array[t]}}class aL{static fromRange(e){return new aL(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new aL(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new aL(e.startLineNumber,t.startLineNumber),new aL(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new aL(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new aL(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(0===e.length)return[];let t=new lL(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new lL(e[i].slice()));return t.ranges}static join(e){if(0===e.length)throw new ot("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new aL(t,i)}static ofLength(e,t){return new aL(e,e+t)}static deserialize(e){return new aL(e[0],e[1])}static invert(e,t){if(e.isEmpty)return[];const i=[];return e.startLineNumber>1&&i.push(new aL(1,e.startLineNumber)),e.endLineNumberExclusive<t.getLineCount()+1&&i.push(new aL(e.endLineNumberExclusive,t.getLineCount()+1)),i.filter((e=>!e.isEmpty))}static asRange(e,t){return e.isEmpty?new Io(e.startLineNumber,1,e.startLineNumber,t.getLineLength(e.startLineNumber)):new Io(e.startLineNumber,1,e.endLineNumberExclusive-1,t.getLineLength(e.endLineNumberExclusive-1))}constructor(e,t){if(e>t)throw new ot(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new aL(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new aL(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new aL(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new aL(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new Io(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new Io(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new iL(this.startLineNumber-1,this.endLineNumberExclusive-1)}}class lL{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(0===e.length)return;const t=oL(this._normalizedRanges,(t=>t.endLineNumberExclusive>=e.startLineNumber)),i=sL(this._normalizedRanges,(t=>t.startLineNumber<=e.endLineNumberExclusive))+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{const n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){const t=nL(this._normalizedRanges,(t=>t.startLineNumber<=e));return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=nL(this._normalizedRanges,(t=>t.startLineNumber<e.endLineNumberExclusive));return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(0===this._normalizedRanges.length)return e;if(0===e._normalizedRanges.length)return this;const t=[];let i=0,n=0,s=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){const t=this._normalizedRanges[i],s=e._normalizedRanges[n];t.startLineNumber<s.startLineNumber?(o=t,i++):(o=s,n++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[n],n++);null===s?s=o:s.endLineNumberExclusive>=o.startLineNumber?s=new aL(s.startLineNumber,Math.max(s.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(s),s=o)}return null!==s&&t.push(s),new lL(t)}subtractFrom(e){const t=oL(this._normalizedRanges,(t=>t.endLineNumberExclusive>=e.startLineNumber)),i=sL(this._normalizedRanges,(t=>t.startLineNumber<=e.endLineNumberExclusive))+1;if(t===i)return new lL([e]);const n=[];let s=e.startLineNumber;for(let e=t;e<i;e++){const t=this._normalizedRanges[e];t.startLineNumber>s&&n.push(new aL(s,t.startLineNumber)),s=t.endLineNumberExclusive}return s<e.endLineNumberExclusive&&n.push(new aL(s,e.endLineNumberExclusive)),new lL(n)}toString(){return this._normalizedRanges.map((e=>e.toString())).join(", ")}getIntersection(e){const t=[];let i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){const s=this._normalizedRanges[i],o=e._normalizedRanges[n],r=s.intersect(o);r&&!r.isEmpty&&t.push(r),s.endLineNumberExclusive<o.endLineNumberExclusive?i++:n++}return new lL(t)}getWithDelta(e){return new lL(this._normalizedRanges.map((t=>t.delta(e))))}}class hL{constructor(e,t){this.range=e,this.text=t}get isEmpty(){return this.range.isEmpty()&&0===this.text.length}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}}class cL{static inverse(e,t,i){const n=[];let s=1,o=1;for(const t of e){const e=new cL(new aL(s,t.original.startLineNumber),new aL(o,t.modified.startLineNumber));e.modified.isEmpty||n.push(e),s=t.original.endLineNumberExclusive,o=t.modified.endLineNumberExclusive}const r=new cL(new aL(s,t+1),new aL(o,i+1));return r.modified.isEmpty||n.push(r),n}static clip(e,t,i){const n=[];for(const s of e){const e=s.original.intersect(t),o=s.modified.intersect(i);e&&!e.isEmpty&&o&&!o.isEmpty&&n.push(new cL(e,o))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new cL(this.modified,this.original)}join(e){return new cL(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new uL(e,t);if(1===this.original.startLineNumber||1===this.modified.startLineNumber){if(1!==this.modified.startLineNumber||1!==this.original.startLineNumber)throw new ot("not a valid diff");return new uL(new Io(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Io(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}return new uL(new Io(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new Io(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}}class dL extends cL{static fromRangeMappings(e){const t=aL.join(e.map((e=>aL.fromRangeInclusive(e.originalRange)))),i=aL.join(e.map((e=>aL.fromRangeInclusive(e.modifiedRange))));return new dL(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){return new dL(this.modified,this.original,this.innerChanges?.map((e=>e.flip())))}withInnerChangesFromLineRanges(){return new dL(this.original,this.modified,[this.toRangeMapping()])}}class uL{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new uL(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new hL(this.originalRange,t)}}class gL{computeDiff(e,t,i){const n=new wL(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),s=[];let o=null;for(const e of n.changes){let t,i;t=0===e.originalEndLineNumber?new aL(e.originalStartLineNumber+1,e.originalStartLineNumber+1):new aL(e.originalStartLineNumber,e.originalEndLineNumber+1),i=0===e.modifiedEndLineNumber?new aL(e.modifiedStartLineNumber+1,e.modifiedStartLineNumber+1):new aL(e.modifiedStartLineNumber,e.modifiedEndLineNumber+1);let n=new dL(t,i,e.charChanges?.map((e=>new uL(new Io(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),new Io(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)))));o&&(o.modified.endLineNumberExclusive!==n.modified.startLineNumber&&o.original.endLineNumberExclusive!==n.original.startLineNumber||(n=new dL(o.original.join(n.original),o.modified.join(n.modified),o.innerChanges&&n.innerChanges?o.innerChanges.concat(n.innerChanges):void 0),s.pop())),s.push(n),o=n}return Qo((()=>Zo(s,((e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive==t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber)))),new eL(s,[],n.quitEarly)}}function pL(e,t,i,n){return new FE(e,t,i).ComputeDiff(n)}class fL{constructor(e){const t=[],i=[];for(let n=0,s=e.length;n<s;n++)t[n]=_L(e[n],1),i[n]=yL(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],s=[],o=[];let r=0;for(let a=t;a<=i;a++){const t=this.lines[a],l=e?this._startColumns[a]:1,h=e?this._endColumns[a]:t.length+1;for(let e=l;e<h;e++)n[r]=t.charCodeAt(e-1),s[r]=a+1,o[r]=e,r++;!e&&a<i&&(n[r]=10,s[r]=a+1,o[r]=t.length+1,r++)}return new mL(n,s,o)}}class mL{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map(((e,t)=>(10===e?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`)).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return-1===e?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),10===this._charCodes[e]?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return-1===e?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),10===this._charCodes[e]?1:this._columns[e]+1)}}class bL{constructor(e,t,i,n,s,o,r,a){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=s,this.modifiedStartColumn=o,this.modifiedEndLineNumber=r,this.modifiedEndColumn=a}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),r=t.getEndColumn(e.originalStart+e.originalLength-1),a=i.getStartLineNumber(e.modifiedStart),l=i.getStartColumn(e.modifiedStart),h=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),c=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new bL(n,s,o,r,a,l,h,c)}}class vL{constructor(e,t,i,n,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=s}static createFromDiffResult(e,t,i,n,s,o,r){let a,l,h,c,d;if(0===t.originalLength?(a=i.getStartLineNumber(t.originalStart)-1,l=0):(a=i.getStartLineNumber(t.originalStart),l=i.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(h=n.getStartLineNumber(t.modifiedStart)-1,c=0):(h=n.getStartLineNumber(t.modifiedStart),c=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const o=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),a=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(o.getElements().length>0&&a.getElements().length>0){let e=pL(o,a,s,!0).changes;r&&(e=function(e){if(e.length<=1)return e;const t=[e[0]];let i=t[0];for(let n=1,s=e.length;n<s;n++){const s=e[n],o=s.originalStart-(i.originalStart+i.originalLength),r=s.modifiedStart-(i.modifiedStart+i.modifiedLength);Math.min(o,r)<3?(i.originalLength=s.originalStart+s.originalLength-i.originalStart,i.modifiedLength=s.modifiedStart+s.modifiedLength-i.modifiedStart):(t.push(s),i=s)}return t}(e)),d=[];for(let t=0,i=e.length;t<i;t++)d.push(bL.createFromDiffChange(e[t],o,a))}}return new vL(a,l,h,c,d)}}class wL{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new fL(e),this.modified=new fL(t),this.continueLineDiff=CL(i.maxComputationTime),this.continueCharDiff=CL(0===i.maxComputationTime?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=pL(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const e=[];for(let i=0,n=t.length;i<n;i++)e.push(vL.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[i],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:e}}const n=[];let s=0,o=0;for(let e=-1,i=t.length;e<i;e++){const r=e+1<i?t[e+1]:null,a=r?r.originalStart:this.originalLines.length,l=r?r.modifiedStart:this.modifiedLines.length;for(;s<a&&o<l;){const e=this.originalLines[s],t=this.modifiedLines[o];if(e!==t){{let i=_L(e,1),r=_L(t,1);for(;i>1&&r>1;){if(e.charCodeAt(i-2)!==t.charCodeAt(r-2))break;i--,r--}(i>1||r>1)&&this._pushTrimWhitespaceCharChange(n,s+1,1,i,o+1,1,r)}{let i=yL(e,1),r=yL(t,1);const a=e.length+1,l=t.length+1;for(;i<a&&r<l;){if(e.charCodeAt(i-1)!==e.charCodeAt(r-1))break;i++,r++}(i<a||r<l)&&this._pushTrimWhitespaceCharChange(n,s+1,i,a,o+1,r,l)}}s++,o++}r&&(n.push(vL.createFromDiffResult(this.shouldIgnoreTrimWhitespace,r,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=r.originalLength,o+=r.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,s,o,r){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,s,o,r))return;let a;this.shouldComputeCharChanges&&(a=[new bL(t,i,t,n,s,o,s,r)]),e.push(new vL(t,t,s,s,a))}_mergeTrimWhitespaceCharChange(e,t,i,n,s,o,r){const a=e.length;if(0===a)return!1;const l=e[a-1];return 0!==l.originalEndLineNumber&&0!==l.modifiedEndLineNumber&&(l.originalEndLineNumber===t&&l.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new bL(t,i,t,n,s,o,s,r)),!0):l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===s&&(l.originalEndLineNumber=t,l.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new bL(t,i,t,n,s,o,s,r)),!0))}}function _L(e,t){const i=Pi(e);return-1===i?t:i+1}function yL(e,t){const i=Bi(e);return-1===i?t:i+2}function CL(e){if(0===e)return()=>!0;const t=Date.now();return()=>Date.now()-t<e}class SL{static trivial(e,t){return new SL([new kL(iL.ofLength(e.length),iL.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new SL([new kL(iL.ofLength(e.length),iL.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class kL{static invert(e,t){const i=[];return function(e,t){for(let i=0;i<=e.length;i++)t(0===i?void 0:e[i-1],i===e.length?void 0:e[i])}(e,((e,n)=>{i.push(kL.fromOffsetPairs(e?e.getEndExclusives():xL.zero,n?n.getStarts():new xL(t,(e?e.seq2Range.endExclusive-e.seq1Range.endExclusive:0)+t)))})),i}static fromOffsetPairs(e,t){return new kL(new iL(e.offset1,t.offset1),new iL(e.offset2,t.offset2))}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new kL(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new kL(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return 0===e?this:new kL(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return 0===e?this:new kL(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return 0===e?this:new kL(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(t&&i)return new kL(t,i)}getStarts(){return new xL(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new xL(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class xL{static{this.zero=new xL(0,0)}static{this.max=new xL(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return 0===e?this:new xL(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}class EL{static{this.instance=new EL}isValid(){return!0}}class DL{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new ot("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}}class LL{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function IL(e){return 32===e||9===e}class TL{static{this.chrKeys=new Map}static getKey(e){let t=this.chrKeys.get(e);return void 0===t&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let i=e.startLineNumber-1;i<e.endLineNumberExclusive-1;i++){const e=t[i];for(let t=0;t<e.length;t++){n++;const i=e[t],s=TL.getKey(i);this.histogram[s]=(this.histogram[s]||0)+1}n++;const s=TL.getKey("\n");this.histogram[s]=(this.histogram[s]||0)+1}this.totalCount=n}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let n=0;n<i;n++)t+=Math.abs((this.histogram[n]??0)-(e.histogram[n]??0));return 1-t/(this.totalCount+e.totalCount)}}class NL{compute(e,t,i=EL.instance,n){if(0===e.length||0===t.length)return SL.trivial(e,t);const s=new LL(e.length,t.length),o=new LL(e.length,t.length),r=new LL(e.length,t.length);for(let a=0;a<e.length;a++)for(let l=0;l<t.length;l++){if(!i.isValid())return SL.trivialTimedOut(e,t);const h=0===a?0:s.get(a-1,l),c=0===l?0:s.get(a,l-1);let d;e.getElement(a)===t.getElement(l)?(d=0===a||0===l?0:s.get(a-1,l-1),a>0&&l>0&&3===o.get(a-1,l-1)&&(d+=r.get(a-1,l-1)),d+=n?n(a,l):1):d=-1;const u=Math.max(h,c,d);if(u===d){const e=a>0&&l>0?r.get(a-1,l-1):0;r.set(a,l,e+1),o.set(a,l,3)}else u===h?(r.set(a,l,0),o.set(a,l,1)):u===c&&(r.set(a,l,0),o.set(a,l,2));s.set(a,l,u)}const a=[];let l=e.length,h=t.length;function c(e,t){e+1===l&&t+1===h||a.push(new kL(new iL(e+1,l),new iL(t+1,h))),l=e,h=t}let d=e.length-1,u=t.length-1;for(;d>=0&&u>=0;)3===o.get(d,u)?(c(d,u),d--,u--):1===o.get(d,u)?d--:u--;return c(-1,-1),a.reverse(),new SL(a,!1)}}class AL{compute(e,t,i=EL.instance){if(0===e.length||0===t.length)return SL.trivial(e,t);const n=e,s=t;function o(e,t){for(;e<n.length&&t<s.length&&n.getElement(e)===s.getElement(t);)e++,t++;return e}let r=0;const a=new RL;a.set(0,o(0,0));const l=new OL;l.set(0,0===a.get(0)?null:new ML(null,0,0,a.get(0)));let h=0;e:for(;;){if(r++,!i.isValid())return SL.trivialTimedOut(n,s);const e=-Math.min(r,s.length+r%2),t=Math.min(r,n.length+r%2);for(h=e;h<=t;h+=2){const i=h===t?-1:a.get(h+1),r=h===e?-1:a.get(h-1)+1,c=Math.min(Math.max(i,r),n.length),d=c-h;if(c>n.length||d>s.length)continue;const u=o(c,d);a.set(h,u);const g=c===i?l.get(h+1):l.get(h-1);if(l.set(h,u!==c?new ML(g,c,d,u-c):g),a.get(h)===n.length&&a.get(h)-h===s.length)break e}}let c=l.get(h);const d=[];let u=n.length,g=s.length;for(;;){const e=c?c.x+c.length:0,t=c?c.y+c.length:0;if(e===u&&t===g||d.push(new kL(new iL(e,u),new iL(t,g))),!c)break;u=c.x,g=c.y,c=c.prev}return d.reverse(),new SL(d,!1)}}class ML{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}}class RL{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if((e=-e-1)>=this.negativeArr.length){const e=this.negativeArr;this.negativeArr=new Int32Array(2*e.length),this.negativeArr.set(e)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const e=this.positiveArr;this.positiveArr=new Int32Array(2*e.length),this.positiveArr.set(e)}this.positiveArr[e]=t}}}class OL{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class FL{constructor(e,t,i){this.lines=e,this.considerWhitespaceChanges=i,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let n=!1;t.start>0&&t.endExclusive>=e.length&&(t=new iL(t.start-1,t.endExclusive),n=!0),this.lineRange=t,this.firstCharOffsetByLine[0]=0;for(let t=this.lineRange.start;t<this.lineRange.endExclusive;t++){let s=e[t],o=0;if(n)o=s.length,s="",n=!1;else if(!i){const e=s.trimStart();o=s.length-e.length,s=e.trimEnd()}this.additionalOffsetByLine.push(o);for(let e=0;e<s.length;e++)this.elements.push(s.charCodeAt(e));t<e.length-1&&(this.elements.push("\n".charCodeAt(0)),this.firstCharOffsetByLine[t-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new iL(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map((e=>String.fromCharCode(e))).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=WL(e>0?this.elements[e-1]:-1),i=WL(e<this.elements.length?this.elements[e]:-1);if(7===t&&8===i)return 0;if(8===t)return 150;let n=0;return t!==i&&(n+=10,0===t&&1===i&&(n+=1)),n+=zL(t),n+=zL(i),n}translateOffset(e){if(this.lineRange.isEmpty)return new Lo(this.lineRange.start+1,1);const t=sL(this.firstCharOffsetByLine,(t=>t<=e));return new Lo(this.lineRange.start+t+1,e-this.firstCharOffsetByLine[t]+this.additionalOffsetByLine[t]+1)}translateRange(e){return Io.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length)return;if(!PL(this.elements[e]))return;let t=e;for(;t>0&&PL(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&PL(this.elements[i]);)i++;return new iL(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=nL(this.firstCharOffsetByLine,(t=>t<=e.start))??0,i=function(e,t){const i=oL(e,t);return i===e.length?void 0:e[i]}(this.firstCharOffsetByLine,(t=>e.endExclusive<=t))??this.elements.length;return new iL(t,i)}}function PL(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}const BL={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function zL(e){return BL[e]}function WL(e){return 10===e?8:13===e?7:IL(e)?6:e>=97&&e<=122?0:e>=65&&e<=90?1:e>=48&&e<=57?2:-1===e?3:44===e||59===e?5:4}function HL(e,t,i,n,s,o){let{moves:r,excludedChanges:a}=function(e,t,i,n){const s=[],o=e.filter((e=>e.modified.isEmpty&&e.original.length>=3)).map((e=>new TL(e.original,t,e))),r=new Set(e.filter((e=>e.original.isEmpty&&e.modified.length>=3)).map((e=>new TL(e.modified,i,e)))),a=new Set;for(const e of o){let t,i=-1;for(const n of r){const s=e.computeSimilarity(n);s>i&&(i=s,t=n)}if(i>.9&&t&&(r.delete(t),s.push(new cL(e.range,t.range)),a.add(e.source),a.add(t.source)),!n.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}(e,t,i,o);if(!o.isValid())return[];const l=function(e,t,i,n,s,o){const r=[],a=new Bt;for(const i of e)for(let e=i.original.startLineNumber;e<i.original.endLineNumberExclusive-2;e++){const i=`${t[e-1]}:${t[e+1-1]}:${t[e+2-1]}`;a.add(i,{range:new aL(e,e+3)})}const l=[];e.sort(Ct((e=>e.modified.startLineNumber),St));for(const t of e){let e=[];for(let n=t.modified.startLineNumber;n<t.modified.endLineNumberExclusive-2;n++){const t=`${i[n-1]}:${i[n+1-1]}:${i[n+2-1]}`,s=new aL(n,n+3),o=[];a.forEach(t,(({range:t})=>{for(const i of e)if(i.originalLineRange.endLineNumberExclusive+1===t.endLineNumberExclusive&&i.modifiedLineRange.endLineNumberExclusive+1===s.endLineNumberExclusive)return i.originalLineRange=new aL(i.originalLineRange.startLineNumber,t.endLineNumberExclusive),i.modifiedLineRange=new aL(i.modifiedLineRange.startLineNumber,s.endLineNumberExclusive),void o.push(i);const i={modifiedLineRange:s,originalLineRange:t};l.push(i),o.push(i)})),e=o}if(!o.isValid())return[]}l.sort((h=Ct((e=>e.modifiedLineRange.length),St),(e,t)=>-h(e,t)));var h;const c=new lL,d=new lL;for(const e of l){const t=e.modifiedLineRange.startLineNumber-e.originalLineRange.startLineNumber,i=c.subtractFrom(e.modifiedLineRange),n=d.subtractFrom(e.originalLineRange).getWithDelta(t),s=i.getIntersection(n);for(const e of s.ranges){if(e.length<3)continue;const i=e,n=e.delta(-t);r.push(new cL(n,i)),c.addRange(i),d.addRange(n)}}r.sort(Ct((e=>e.original.startLineNumber),St));const u=new rL(e);for(let t=0;t<r.length;t++){const i=r[t],a=u.findLastMonotonous((e=>e.original.startLineNumber<=i.original.startLineNumber)),l=nL(e,(e=>e.modified.startLineNumber<=i.modified.startLineNumber)),h=Math.max(i.original.startLineNumber-a.original.startLineNumber,i.modified.startLineNumber-l.modified.startLineNumber),g=u.findLastMonotonous((e=>e.original.startLineNumber<i.original.endLineNumberExclusive)),p=nL(e,(e=>e.modified.startLineNumber<i.modified.endLineNumberExclusive)),f=Math.max(g.original.endLineNumberExclusive-i.original.endLineNumberExclusive,p.modified.endLineNumberExclusive-i.modified.endLineNumberExclusive);let m,b;for(m=0;m<h;m++){const e=i.original.startLineNumber-m-1,t=i.modified.startLineNumber-m-1;if(e>n.length||t>s.length)break;if(c.contains(t)||d.contains(e))break;if(!VL(n[e-1],s[t-1],o))break}for(m>0&&(d.addRange(new aL(i.original.startLineNumber-m,i.original.startLineNumber)),c.addRange(new aL(i.modified.startLineNumber-m,i.modified.startLineNumber))),b=0;b<f;b++){const e=i.original.endLineNumberExclusive+b,t=i.modified.endLineNumberExclusive+b;if(e>n.length||t>s.length)break;if(c.contains(t)||d.contains(e))break;if(!VL(n[e-1],s[t-1],o))break}b>0&&(d.addRange(new aL(i.original.endLineNumberExclusive,i.original.endLineNumberExclusive+b)),c.addRange(new aL(i.modified.endLineNumberExclusive,i.modified.endLineNumberExclusive+b))),(m>0||b>0)&&(r[t]=new cL(new aL(i.original.startLineNumber-m,i.original.endLineNumberExclusive+b),new aL(i.modified.startLineNumber-m,i.modified.endLineNumberExclusive+b)))}return r}(e.filter((e=>!a.has(e))),n,s,t,i,o);return vt(r,l),r=function(e){if(0===e.length)return e;e.sort(Ct((e=>e.original.startLineNumber),St));const t=[e[0]];for(let i=1;i<e.length;i++){const n=t[t.length-1],s=e[i],o=s.original.startLineNumber-n.original.endLineNumberExclusive,r=s.modified.startLineNumber-n.modified.endLineNumberExclusive;o>=0&&r>=0&&o+r<=2?t[t.length-1]=n.join(s):t.push(s)}return t}(r),r=r.filter((e=>{const i=e.original.toOffsetRange().slice(t).map((e=>e.trim()));return i.join("\n").length>=15&&function(e,t){let i=0;for(const n of e)t(n)&&i++;return i}(i,(e=>e.length>=2))>=2})),r=function(e,t){const i=new rL(e);return t=t.filter((t=>(i.findLastMonotonous((e=>e.original.startLineNumber<t.original.endLineNumberExclusive))||new cL(new aL(1,1),new aL(1,1)))!==nL(e,(e=>e.modified.startLineNumber<t.modified.endLineNumberExclusive)))),t}(e,r),r}function VL(e,t,i){if(e.trim()===t.trim())return!0;if(e.length>300&&t.length>300)return!1;const n=(new AL).compute(new FL([e],new iL(0,1),!1),new FL([t],new iL(0,1),!1),i);let s=0;const o=kL.invert(n.diffs,e.length);for(const t of o)t.seq1Range.forEach((t=>{IL(e.charCodeAt(t))||s++}));const r=function(t){let i=0;for(let n=0;n<e.length;n++)IL(t.charCodeAt(n))||i++;return i}(e.length>t.length?e:t);return s/r>.6&&r>10}function UL(e,t,i){let n=i;return n=KL(e,t,n),n=KL(e,t,n),n=function(e,t,i){if(!e.getBoundaryScore||!t.getBoundaryScore)return i;for(let n=0;n<i.length;n++){const s=n>0?i[n-1]:void 0,o=i[n],r=n+1<i.length?i[n+1]:void 0,a=new iL(s?s.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:e.length),l=new iL(s?s.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:t.length);o.seq1Range.isEmpty?i[n]=qL(o,e,t,a,l):o.seq2Range.isEmpty&&(i[n]=qL(o.swap(),t,e,l,a).swap())}return i}(e,t,n),n}function KL(e,t,i){if(0===i.length)return i;const n=[];n.push(i[0]);for(let s=1;s<i.length;s++){const o=n[n.length-1];let r=i[s];if(r.seq1Range.isEmpty||r.seq2Range.isEmpty){const i=r.seq1Range.start-o.seq1Range.endExclusive;let s;for(s=1;s<=i&&(e.getElement(r.seq1Range.start-s)===e.getElement(r.seq1Range.endExclusive-s)&&t.getElement(r.seq2Range.start-s)===t.getElement(r.seq2Range.endExclusive-s));s++);if(s--,s===i){n[n.length-1]=new kL(new iL(o.seq1Range.start,r.seq1Range.endExclusive-i),new iL(o.seq2Range.start,r.seq2Range.endExclusive-i));continue}r=r.delta(-s)}n.push(r)}const s=[];for(let i=0;i<n.length-1;i++){const o=n[i+1];let r=n[i];if(r.seq1Range.isEmpty||r.seq2Range.isEmpty){const s=o.seq1Range.start-r.seq1Range.endExclusive;let a;for(a=0;a<s&&(e.isStronglyEqual(r.seq1Range.start+a,r.seq1Range.endExclusive+a)&&t.isStronglyEqual(r.seq2Range.start+a,r.seq2Range.endExclusive+a));a++);if(a===s){n[i+1]=new kL(new iL(r.seq1Range.start+s,o.seq1Range.endExclusive),new iL(r.seq2Range.start+s,o.seq2Range.endExclusive));continue}a>0&&(r=r.delta(a))}s.push(r)}return n.length>0&&s.push(n[n.length-1]),s}function qL(e,t,i,n,s){let o=1;for(;e.seq1Range.start-o>=n.start&&e.seq2Range.start-o>=s.start&&i.isStronglyEqual(e.seq2Range.start-o,e.seq2Range.endExclusive-o)&&o<100;)o++;o--;let r=0;for(;e.seq1Range.start+r<n.endExclusive&&e.seq2Range.endExclusive+r<s.endExclusive&&i.isStronglyEqual(e.seq2Range.start+r,e.seq2Range.endExclusive+r)&&r<100;)r++;if(0===o&&0===r)return e;let a=0,l=-1;for(let n=-o;n<=r;n++){const s=e.seq2Range.start+n,o=e.seq2Range.endExclusive+n,r=e.seq1Range.start+n,h=t.getBoundaryScore(r)+i.getBoundaryScore(s)+i.getBoundaryScore(o);h>l&&(l=h,a=n)}return e.delta(a)}class $L{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){return 1e3-((0===e?0:jL(this.lines[e-1]))+(e===this.lines.length?0:jL(this.lines[e])))}getText(e){return this.lines.slice(e.start,e.endExclusive).join("\n")}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function jL(e){let t=0;for(;t<e.length&&(32===e.charCodeAt(t)||9===e.charCodeAt(t));)t++;return t}class GL{constructor(){this.dynamicProgrammingDiffing=new NL,this.myersDiffingAlgorithm=new AL}computeDiff(e,t,i){if(e.length<=1&&at(e,t,((e,t)=>e===t)))return new eL([],[],!1);if(1===e.length&&0===e[0].length||1===t.length&&0===t[0].length)return new eL([new dL(new aL(1,e.length+1),new aL(1,t.length+1),[new uL(new Io(1,1,e.length,e[e.length-1].length+1),new Io(1,1,t.length,t[t.length-1].length+1))])],[],!1);const n=0===i.maxComputationTimeMs?EL.instance:new DL(i.maxComputationTimeMs),s=!i.ignoreTrimWhitespace,o=new Map;function r(e){let t=o.get(e);return void 0===t&&(t=o.size,o.set(e,t)),t}const a=e.map((e=>r(e.trim()))),l=t.map((e=>r(e.trim()))),h=new $L(a,e),c=new $L(l,t),d=(()=>h.length+c.length<1700?this.dynamicProgrammingDiffing.compute(h,c,n,((i,n)=>e[i]===t[n]?0===t[n].length?.1:1+Math.log(1+t[n].length):.99)):this.myersDiffingAlgorithm.compute(h,c))();let u=d.diffs,g=d.hitTimeout;u=UL(h,c,u),u=function(e,t,i){let n=i;if(0===n.length)return n;let s,o=0;do{s=!1;const r=[n[0]];for(let a=1;a<n.length;a++){const l=n[a],h=r[r.length-1];function c(t,i){const n=new iL(h.seq1Range.endExclusive,l.seq1Range.start);return e.getText(n).replace(/\s/g,"").length<=4&&(t.seq1Range.length+t.seq2Range.length>5||i.seq1Range.length+i.seq2Range.length>5)}c(h,l)?(s=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}n=r}while(o++<10&&s);return n}(h,0,u);const p=[],f=i=>{if(s)for(let o=0;o<i;o++){const i=m+o,r=b+o;if(e[i]!==t[r]){const o=this.refineDiff(e,t,new kL(new iL(i,i+1),new iL(r,r+1)),n,s);for(const e of o.mappings)p.push(e);o.hitTimeout&&(g=!0)}}};let m=0,b=0;for(const i of u){Qo((()=>i.seq1Range.start-m==i.seq2Range.start-b));f(i.seq1Range.start-m),m=i.seq1Range.endExclusive,b=i.seq2Range.endExclusive;const o=this.refineDiff(e,t,i,n,s);o.hitTimeout&&(g=!0);for(const e of o.mappings)p.push(e)}f(e.length-m);const v=YL(p,e,t);let w=[];return i.computeMoves&&(w=this.computeMoves(v,e,t,a,l,n,s)),Qo((()=>{function i(e,t){if(e.lineNumber<1||e.lineNumber>t.length)return!1;const i=t[e.lineNumber-1];return!(e.column<1||e.column>i.length+1)}function n(e,t){return!(e.startLineNumber<1||e.startLineNumber>t.length+1)&&!(e.endLineNumberExclusive<1||e.endLineNumberExclusive>t.length+1)}for(const s of v){if(!s.innerChanges)return!1;for(const n of s.innerChanges){if(!(i(n.modifiedRange.getStartPosition(),t)&&i(n.modifiedRange.getEndPosition(),t)&&i(n.originalRange.getStartPosition(),e)&&i(n.originalRange.getEndPosition(),e)))return!1}if(!n(s.modified,t)||!n(s.original,e))return!1}return!0})),new eL(v,w,g)}computeMoves(e,t,i,n,s,o,r){return HL(e,t,i,n,s,o).map((e=>{const n=YL(this.refineDiff(t,i,new kL(e.original.toOffsetRange(),e.modified.toOffsetRange()),o,r).mappings,t,i,!0);return new tL(e,n)}))}refineDiff(e,t,i,n,s){const o=new FL(e,i.seq1Range,s),r=new FL(t,i.seq2Range,s),a=o.length+r.length<500?this.dynamicProgrammingDiffing.compute(o,r,n):this.myersDiffingAlgorithm.compute(o,r,n);let l=a.diffs;l=UL(o,r,l),l=function(e,t,i){const n=kL.invert(i,e.length),s=[];let o=new xL(0,0);function r(i,r){if(i.offset1<o.offset1||i.offset2<o.offset2)return;const a=e.findWordContaining(i.offset1),l=t.findWordContaining(i.offset2);if(!a||!l)return;let h=new kL(a,l);const c=h.intersect(r);let d=c.seq1Range.length,u=c.seq2Range.length;for(;n.length>0;){const i=n[0];if(!i.seq1Range.intersects(h.seq1Range)&&!i.seq2Range.intersects(h.seq2Range))break;const s=e.findWordContaining(i.seq1Range.start),o=t.findWordContaining(i.seq2Range.start),r=new kL(s,o),a=r.intersect(i);if(d+=a.seq1Range.length,u+=a.seq2Range.length,h=h.join(r),!(h.seq1Range.endExclusive>=i.seq1Range.endExclusive))break;n.shift()}d+u<2*(h.seq1Range.length+h.seq2Range.length)/3&&s.push(h),o=h.getEndExclusives()}for(;n.length>0;){const e=n.shift();e.seq1Range.isEmpty||(r(e.getStarts(),e),r(e.getEndExclusives().delta(-1),e))}return function(e,t){const i=[];for(;e.length>0||t.length>0;){const n=e[0],s=t[0];let o;o=n&&(!s||n.seq1Range.start<s.seq1Range.start)?e.shift():t.shift(),i.length>0&&i[i.length-1].seq1Range.endExclusive>=o.seq1Range.start?i[i.length-1]=i[i.length-1].join(o):i.push(o)}return i}(i,s)}(o,r,l),l=function(e,t,i){const n=[];for(const e of i){const t=n[n.length-1];t&&(e.seq1Range.start-t.seq1Range.endExclusive<=2||e.seq2Range.start-t.seq2Range.endExclusive<=2)?n[n.length-1]=new kL(t.seq1Range.join(e.seq1Range),t.seq2Range.join(e.seq2Range)):n.push(e)}return n}(0,0,l),l=function(e,t,i){let n=i;if(0===n.length)return n;let s,o=0;do{s=!1;const a=[n[0]];for(let l=1;l<n.length;l++){const h=n[l],c=a[a.length-1];function d(i,n){const s=new iL(c.seq1Range.endExclusive,h.seq1Range.start);if(e.countLinesIn(s)>5||s.length>500)return!1;const o=e.getText(s).trim();if(o.length>20||o.split(/\r\n|\r|\n/).length>1)return!1;const r=e.countLinesIn(i.seq1Range),a=i.seq1Range.length,l=t.countLinesIn(i.seq2Range),d=i.seq2Range.length,u=e.countLinesIn(n.seq1Range),g=n.seq1Range.length,p=t.countLinesIn(n.seq2Range),f=n.seq2Range.length;function m(e){return Math.min(e,130)}return Math.pow(Math.pow(m(40*r+a),1.5)+Math.pow(m(40*l+d),1.5),1.5)+Math.pow(Math.pow(m(40*u+g),1.5)+Math.pow(m(40*p+f),1.5),1.5)>74184.96480721243}d(c,h)?(s=!0,a[a.length-1]=a[a.length-1].join(h)):a.push(h)}n=a}while(o++<10&&s);const r=[];return function(e,t){for(let i=0;i<e.length;i++)t(0===i?void 0:e[i-1],e[i],i+1===e.length?void 0:e[i+1])}(n,((t,i,n)=>{let s=i;function o(e){return e.length>0&&e.trim().length<=3&&i.seq1Range.length+i.seq2Range.length>100}const a=e.extendToFullLines(i.seq1Range),l=e.getText(new iL(a.start,i.seq1Range.start));o(l)&&(s=s.deltaStart(-l.length));const h=e.getText(new iL(i.seq1Range.endExclusive,a.endExclusive));o(h)&&(s=s.deltaEnd(h.length));const c=kL.fromOffsetPairs(t?t.getEndExclusives():xL.zero,n?n.getStarts():xL.max),d=s.intersect(c);r.length>0&&d.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(d):r.push(d)})),r}(o,r,l);return{mappings:l.map((e=>new uL(o.translateRange(e.seq1Range),r.translateRange(e.seq2Range)))),hitTimeout:a.hitTimeout}}}function YL(e,t,i,n=!1){const s=[];for(const n of function*(e,t){let i,n;for(const s of e)void 0!==n&&t(n,s)?i.push(s):(i&&(yield i),i=[s]),n=s;i&&(yield i)}(e.map((e=>function(e,t,i){let n=0,s=0;1===e.modifiedRange.endColumn&&1===e.originalRange.endColumn&&e.originalRange.startLineNumber+n<=e.originalRange.endLineNumber&&e.modifiedRange.startLineNumber+n<=e.modifiedRange.endLineNumber&&(s=-1);e.modifiedRange.startColumn-1>=i[e.modifiedRange.startLineNumber-1].length&&e.originalRange.startColumn-1>=t[e.originalRange.startLineNumber-1].length&&e.originalRange.startLineNumber<=e.originalRange.endLineNumber+s&&e.modifiedRange.startLineNumber<=e.modifiedRange.endLineNumber+s&&(n=1);const o=new aL(e.originalRange.startLineNumber+n,e.originalRange.endLineNumber+1+s),r=new aL(e.modifiedRange.startLineNumber+n,e.modifiedRange.endLineNumber+1+s);return new dL(o,r,[e])}(e,t,i))),((e,t)=>e.original.overlapOrTouch(t.original)||e.modified.overlapOrTouch(t.modified)))){const e=n[0],t=n[n.length-1];s.push(new dL(e.original.join(t.original),e.modified.join(t.modified),n.map((e=>e.innerChanges[0]))))}return Qo((()=>{if(!n&&s.length>0){if(s[0].modified.startLineNumber!==s[0].original.startLineNumber)return!1;if(i.length-s[s.length-1].modified.endLineNumberExclusive!=t.length-s[s.length-1].original.endLineNumberExclusive)return!1}return Zo(s,((e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive==t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber))})),s}const XL=()=>new gL,QL=()=>new GL;function ZL(e){const t=[];for(const i of e){const e=Number(i);(e||0===e&&""!==i.replace(/\s/g,""))&&t.push(e)}return t}function JL(e,t,i,n){return{red:e/255,blue:i/255,green:t/255,alpha:n}}function eI(e,t){const i=t.index,n=t[0].length;if(!i)return;const s=e.positionAt(i);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+n}}function tI(e,t){if(!e)return;const i=Ng.Format.CSS.parseHex(t);return i?{range:e,color:JL(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a)}:void 0}function iI(e,t,i){if(!e||1!==t.length)return;const n=ZL(t[0].values());return{range:e,color:JL(n[0],n[1],n[2],i?n[3]:1)}}function nI(e,t,i){if(!e||1!==t.length)return;const n=ZL(t[0].values()),s=new Ng(new Ig(n[0],n[1]/100,n[2]/100,i?n[3]:1));return{range:e,color:JL(s.rgba.r,s.rgba.g,s.rgba.b,s.rgba.a)}}function sI(e,t){return"string"==typeof e?[...e.matchAll(t)]:e.findMatches(t)}function oI(e){return e&&"function"==typeof e.getValue&&"function"==typeof e.positionAt?function(e){const t=[],i=sI(e,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const n of i){const i=n.filter((e=>void 0!==e)),s=i[1],o=i[2];if(!o)continue;let r;if("rgb"===s){const t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;r=iI(eI(e,n),sI(o,t),!1)}else if("rgba"===s){const t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;r=iI(eI(e,n),sI(o,t),!0)}else if("hsl"===s){const t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;r=nI(eI(e,n),sI(o,t),!1)}else if("hsla"===s){const t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;r=nI(eI(e,n),sI(o,t),!0)}else"#"===s&&(r=tI(eI(e,n),s+o));r&&t.push(r)}return t}(e):[]}const rI=/\bMARK:\s*(.*)$/d,aI=/^-+|-+$/g;function lI(e,t){let i=[];if(t.findRegionSectionHeaders&&t.foldingRules?.markers){const n=function(e,t){const i=[],n=e.getLineCount();for(let s=1;s<=n;s++){const n=e.getLineContent(s),o=n.match(t.foldingRules.markers.start);if(o){const e={startLineNumber:s,startColumn:o[0].length+1,endLineNumber:s,endColumn:n.length+1};if(e.endColumn>e.startColumn){const t={range:e,...cI(n.substring(o[0].length)),shouldBeInComments:!1};(t.text||t.hasSeparatorLine)&&i.push(t)}}}return i}(e,t);i=i.concat(n)}if(t.findMarkSectionHeaders){const t=function(e){const t=[],i=e.getLineCount();for(let n=1;n<=i;n++){hI(e.getLineContent(n),n,t)}return t}(e);i=i.concat(t)}return i}function hI(e,t,i){rI.lastIndex=0;const n=rI.exec(e);if(n){const e={startLineNumber:t,startColumn:n.indices[1][0]+1,endLineNumber:t,endColumn:n.indices[1][1]+1};if(e.endColumn>e.startColumn){const t={range:e,...cI(n[1]),shouldBeInComments:!0};(t.text||t.hasSeparatorLine)&&i.push(t)}}}function cI(e){const t=(e=e.trim()).startsWith("-");return{text:e=e.replace(aI,""),hasSeparatorLine:t}}class dI extends HE{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const n=this._lines[i],s=this.offsetAt(new Lo(i+1,1)),o=n.matchAll(e);for(const e of o)(e.index||0===e.index)&&(e.index=e.index+s),t.push(e)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=Ks(e.column,Vs(t),this._lines[e.lineNumber-1],0);return i?new Io(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}getWordUntilPosition(e,t){const i=this.getWordAtPosition(e,t);return i?{word:this._lines[e.lineNumber-1].substring(i.startColumn-1,e.column-1),startColumn:i.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,s="",o=0,r=[];return{*[Symbol.iterator](){for(;;)if(o<r.length){const e=s.substring(r[o].start,r[o].end);o+=1,yield e}else{if(!(n<t.length))break;s=t[n],r=i(s,e),o=0,n+=1}}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),s=[];for(const e of n)s.push({word:i.substring(e.start,e.end),startColumn:e.start+1,endColumn:e.end+1});return s}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&0!==n[0].length;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if((e=this._validateRange(e)).startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,s=[];s.push(this._lines[i].substring(e.startColumn-1));for(let e=i+1;e<n;e++)s.push(this._lines[e]);return s.push(this._lines[n].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!Lo.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const e=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>e&&(i=e,n=!0)}return n?{lineNumber:t,column:i}:e}}class uI{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach((t=>e.push(this._models[t]))),e}acceptNewModel(e){this._models[e.url]=new dI(Fe.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}async computeUnicodeHighlights(e,t,i){const n=this._getModel(e);return n?QD.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async findSectionHeaders(e,t){const i=this._getModel(e);return i?lI(i,t):[]}async computeDiff(e,t,i,n){const s=this._getModel(e),o=this._getModel(t);if(!s||!o)return null;return uI.computeDiff(s,o,i,n)}static computeDiff(e,t,i,n){const s="advanced"===n?QL():XL(),o=e.getLinesContent(),r=t.getLinesContent(),a=s.computeDiff(o,r,i);function l(e){return e.map((e=>[e.original.startLineNumber,e.original.endLineNumberExclusive,e.modified.startLineNumber,e.modified.endLineNumberExclusive,e.innerChanges?.map((e=>[e.originalRange.startLineNumber,e.originalRange.startColumn,e.originalRange.endLineNumber,e.originalRange.endColumn,e.modifiedRange.startLineNumber,e.modifiedRange.startColumn,e.modifiedRange.endLineNumber,e.modifiedRange.endColumn]))]))}return{identical:!(a.changes.length>0)&&this._modelsAreIdentical(e,t),quitEarly:a.hitTimeout,changes:l(a.changes),moves:a.moves.map((e=>[e.lineRangeMapping.original.startLineNumber,e.lineRangeMapping.original.endLineNumberExclusive,e.lineRangeMapping.modified.startLineNumber,e.lineRangeMapping.modified.endLineNumberExclusive,l(e.changes)]))}}static _modelsAreIdentical(e,t){const i=e.getLineCount();if(i!==t.getLineCount())return!1;for(let n=1;n<=i;n++){if(e.getLineContent(n)!==t.getLineContent(n))return!1}return!0}async computeDirtyDiff(e,t,i){const n=this._getModel(e),s=this._getModel(t);if(!n||!s)return null;const o=n.getLinesContent(),r=s.getLinesContent();return new wL(o,r,{shouldComputeCharChanges:!1,shouldPostProcessCharChanges:!1,shouldIgnoreTrimWhitespace:i,shouldMakePrettyDiff:!0,maxComputationTime:1e3}).computeDiff().changes}static{this._diffLimit=1e5}async computeMoreMinimalEdits(e,t,i){const n=this._getModel(e);if(!n)return t;const s=[];let o;t=t.slice(0).sort(((e,t)=>{if(e.range&&t.range)return Io.compareRangesUsingStarts(e.range,t.range);return(e.range?0:1)-(t.range?0:1)}));let r=0;for(let e=1;e<t.length;e++)Io.getEndPosition(t[r].range).equals(Io.getStartPosition(t[e].range))?(t[r].range=Io.fromPositions(Io.getStartPosition(t[r].range),Io.getEndPosition(t[e].range)),t[r].text+=t[e].text):(r++,t[r]=t[e]);t.length=r+1;for(let{range:e,text:r,eol:a}of t){if("number"==typeof a&&(o=a),Io.isEmpty(e)&&!r)continue;const t=n.getValueInRange(e);if(r=r.replace(/\r\n|\n|\r/g,n.eol),t===r)continue;if(Math.max(r.length,t.length)>uI._diffLimit){s.push({range:e,text:r});continue}const l=AE(t,r,i),h=n.offsetAt(Io.lift(e).getStartPosition());for(const e of l){const t=n.positionAt(h+e.originalStart),i=n.positionAt(h+e.originalStart+e.originalLength),o={text:r.substr(e.modifiedStart,e.modifiedLength),range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}};n.getValueInRange(o.range)!==o.text&&s.push(o)}}return"number"==typeof o&&s.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}computeHumanReadableDiff(e,t,i){const n=this._getModel(e);if(!n)return t;const s=[];let o;t=t.slice(0).sort(((e,t)=>{if(e.range&&t.range)return Io.compareRangesUsingStarts(e.range,t.range);return(e.range?0:1)-(t.range?0:1)}));for(let{range:r,text:a,eol:l}of t){if("number"==typeof l&&(o=l),Io.isEmpty(r)&&!a)continue;const h=n.getValueInRange(r);if(a=a.replace(/\r\n|\n|\r/g,n.eol),h===a)continue;if(Math.max(a.length,h.length)>uI._diffLimit){s.push({range:r,text:a});continue}const c=h.split(/\r\n|\n|\r/),d=a.split(/\r\n|\n|\r/),u=QL().computeDiff(c,d,i),g=Io.lift(r).getStartPosition();function p(e,t){return new Lo(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}function f(e,t){const i=[];for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const s=e[n-1];n===t.startLineNumber&&n===t.endLineNumber?i.push(s.substring(t.startColumn-1,t.endColumn-1)):n===t.startLineNumber?i.push(s.substring(t.startColumn-1)):n===t.endLineNumber?i.push(s.substring(0,t.endColumn-1)):i.push(s)}return i}for(const m of u.changes){if(!m.innerChanges)throw new ot("The experimental diff algorithm always produces inner changes");for(const b of m.innerChanges)s.push({range:Io.fromPositions(p(g,b.originalRange.getStartPosition()),p(g,b.originalRange.getEndPosition())),text:f(d,b.modifiedRange).join(n.eol)})}}return"number"==typeof o&&s.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}async computeLinks(e){const t=this._getModel(e);return t?function(e){return e&&"function"==typeof e.getLineCount&&"function"==typeof e.getLineContent?jE.computeLinks(e):[]}(t):null}async computeDefaultDocumentColors(e){const t=this._getModel(e);return t?oI(t):null}static{this._suggestionsLimit=1e4}async textualSuggest(e,t,i,n){const s=new si,o=new RegExp(i,n),r=new Set;e:for(const i of e){const e=this._getModel(i);if(e)for(const i of e.words(o))if(i!==t&&isNaN(Number(i))&&(r.add(i),r.size>uI._suggestionsLimit))break e}return{words:Array.from(r),duration:s.elapsed()}}async computeWordRanges(e,t,i,n){const s=this._getModel(e);if(!s)return Object.create(null);const o=new RegExp(i,n),r=Object.create(null);for(let e=t.startLineNumber;e<t.endLineNumber;e++){const t=s.getLineWords(e,o);for(const i of t){if(!isNaN(Number(i.word)))continue;let t=r[i.word];t||(t=[],r[i.word]=t),t.push({startLineNumber:e,startColumn:i.startColumn,endLineNumber:e,endColumn:i.endColumn})}}return r}async navigateValueSet(e,t,i,n,s){const o=this._getModel(e);if(!o)return null;const r=new RegExp(n,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const a=o.getValueInRange(t),l=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},r);if(!l)return null;const h=o.getValueInRange(l);return GE.INSTANCE.navigateValueSet(t,a,l,h,i)}loadForeignModule(e,t,i){const n=function(e,t){const i=e=>function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)},n={};for(const t of e)n[t]=i(t);return n}(i,((e,t)=>this._host.fhr(e,t))),s={host:n,getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve(jn(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||"function"!=typeof this._foreignModule[e])return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(e){return Promise.reject(e)}}}"function"==typeof importScripts&&(globalThis.monaco={editor:void 0,languages:void 0,CancellationTokenSource:ki,Emitter:ui,KeyCode:bD,KeyMod:VD,Position:Lo,Range:Io,Selection:YE,SelectionDirection:MD,MarkerSeverity:vD,MarkerTag:wD,Uri:Fe,Token:H_});const gI=3e5;function pI(e,t){const i=e.getModel(t);return!!i&&!i.isTooLargeForSyncing()}let fI=class extends Qt{constructor(e,t,i,n,s){super(),this._modelService=e,this._workerManager=this._register(new bI(this._modelService,n)),this._logService=i,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(e,t)=>pI(this._modelService,e.uri)?this._workerManager.withWorker().then((t=>t.computeLinks(e.uri))).then((e=>e&&{links:e})):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new mI(this._workerManager,t,this._modelService,n)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return pI(this._modelService,e)}computedUnicodeHighlights(e,t,i){return this._workerManager.withWorker().then((n=>n.computedUnicodeHighlights(e,t,i)))}async computeDiff(e,t,i,n){const s=await this._workerManager.withWorker().then((s=>s.computeDiff(e,t,i,n)));if(!s)return null;return{identical:s.identical,quitEarly:s.quitEarly,changes:o(s.changes),moves:s.moves.map((e=>new tL(new cL(new aL(e[0],e[1]),new aL(e[2],e[3])),o(e[4]))))};function o(e){return e.map((e=>new dL(new aL(e[0],e[1]),new aL(e[2],e[3]),e[4]?.map((e=>new uL(new Io(e[0],e[1],e[2],e[3]),new Io(e[4],e[5],e[6],e[7])))))))}}canComputeDirtyDiff(e,t){return pI(this._modelService,e)&&pI(this._modelService,t)}computeDirtyDiff(e,t,i){return this._workerManager.withWorker().then((n=>n.computeDirtyDiff(e,t,i)))}computeMoreMinimalEdits(e,t,i=!1){if(ht(t)){if(!pI(this._modelService,e))return Promise.resolve(t);const n=si.create(),s=this._workerManager.withWorker().then((n=>n.computeMoreMinimalEdits(e,t,i)));return s.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed()))),Promise.race([s,za(1e3).then((()=>t))])}return Promise.resolve(void 0)}computeHumanReadableDiff(e,t){if(ht(t)){if(!pI(this._modelService,e))return Promise.resolve(t);const i=si.create(),n=this._workerManager.withWorker().then((i=>i.computeHumanReadableDiff(e,t,{ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3,computeMoves:!1}))).catch((i=>(Ge(i),this.computeMoreMinimalEdits(e,t,!0))));return n.finally((()=>this._logService.trace("FORMAT#computeHumanReadableDiff",e.toString(!0),i.elapsed()))),n}return Promise.resolve(void 0)}canNavigateValueSet(e){return pI(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then((n=>n.navigateValueSet(e,t,i)))}canComputeWordRanges(e){return pI(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then((i=>i.computeWordRanges(e,t)))}findSectionHeaders(e,t){return this._workerManager.withWorker().then((i=>i.findSectionHeaders(e,t)))}};fI=Bs([zs(0,dC),zs(1,gC),zs(2,Ed),zs(3,Br),zs(4,fg)],fI);class mI{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if("off"===i.wordBasedSuggestions)return;const n=[];if("currentDocument"===i.wordBasedSuggestions)pI(this._modelService,e.uri)&&n.push(e.uri);else for(const t of this._modelService.getModels())pI(this._modelService,t.uri)&&(t===e?n.unshift(t.uri):"allDocuments"!==i.wordBasedSuggestions&&t.getLanguageId()!==e.getLanguageId()||n.push(t.uri));if(0===n.length)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),r=o?new Io(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):Io.fromPositions(t),a=r.setEndPosition(t.lineNumber,t.column),l=await this._workerManager.withWorker(),h=await l.textualSuggest(n,o?.word,s);return h?{duration:h.duration,suggestions:h.words.map((e=>({kind:18,label:e,insertText:e,range:{insert:a,replace:r}})))}:void 0}}class bI extends Qt{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime();this._register(new xh).cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(15e4),Gr),this._register(this._modelService.onModelRemoved((e=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;(new Date).getTime()-this._lastWorkerUsedTime>gI&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new yI(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class vI extends Qt{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const e=new qa;e.cancelAndSet((()=>this._checkStopModelSync()),Math.round(3e4)),this._register(e)}}dispose(){for(const e in this._syncedModels)jt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const i of e){const e=i.toString();this._syncedModels[e]||this._beginModelSync(i,t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=(new Date).getTime())}}_checkStopModelSync(){const e=(new Date).getTime(),t=[];for(const i in this._syncedModelsLastUsedTime){e-this._syncedModelsLastUsedTime[i]>6e4&&t.push(i)}for(const e of t)this._stopModelSync(e)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i)return;if(!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const s=new Xt;s.add(i.onDidChangeContent((e=>{this._proxy.acceptModelChanged(n.toString(),e)}))),s.add(i.onWillDispose((()=>{this._stopModelSync(n)}))),s.add(Yt((()=>{this._proxy.acceptRemovedModel(n)}))),this._syncedModels[n]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],jt(t)}}class wI{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class _I{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class yI extends Qt{constructor(e,t,i,n){super(),this.languageConfigurationService=n,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new IE(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new SE(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new _I(this)))}catch(e){mE(e),this._worker=new wI(new uI(new _I(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,(e=>(mE(e),this._worker=new wI(new uI(new _I(this),null)),this._getOrCreateWorker().getProxyObject())))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new vI(e,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(e,t=!1){return this._disposed?Promise.reject(Je()):this._getProxy().then((i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i)))}computedUnicodeHighlights(e,t,i){return this._withSyncedResources([e]).then((n=>n.computeUnicodeHighlights(e.toString(),t,i)))}computeDiff(e,t,i,n){return this._withSyncedResources([e,t],!0).then((s=>s.computeDiff(e.toString(),t.toString(),i,n)))}computeDirtyDiff(e,t,i){return this._withSyncedResources([e,t]).then((n=>n.computeDirtyDiff(e.toString(),t.toString(),i)))}computeMoreMinimalEdits(e,t,i){return this._withSyncedResources([e]).then((n=>n.computeMoreMinimalEdits(e.toString(),t,i)))}computeHumanReadableDiff(e,t,i){return this._withSyncedResources([e]).then((n=>n.computeHumanReadableDiff(e.toString(),t,i)))}computeLinks(e){return this._withSyncedResources([e]).then((t=>t.computeLinks(e.toString())))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then((t=>t.computeDefaultDocumentColors(e.toString())))}async textualSuggest(e,t,i){const n=await this._withSyncedResources(e),s=i.source,o=i.flags;return n.textualSuggest(e.map((e=>e.toString())),t,s,o)}computeWordRanges(e,t){return this._withSyncedResources([e]).then((i=>{const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),o=s.source,r=s.flags;return i.computeWordRanges(e.toString(),t,o,r)}))}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then((n=>{const s=this._modelService.getModel(e);if(!s)return null;const o=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),r=o.source,a=o.flags;return n.navigateValueSet(e.toString(),t,i,r,a)}))}findSectionHeaders(e,t){return this._withSyncedResources([e]).then((i=>i.findSectionHeaders(e.toString(),t)))}dispose(){super.dispose(),this._disposed=!0}}const CI="vs/platform/markers/common/markers";var SI,kI;!function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(SI||(SI={})),function(e){e.compare=function(e,t){return t-e};const t=Object.create(null);t[e.Error]=u(CI,0,"Error"),t[e.Warning]=u(CI,1,"Warning"),t[e.Info]=u(CI,2,"Info"),e.toString=function(e){return t[e]||""},e.fromSeverity=function(t){switch(t){case nd.Error:return e.Error;case nd.Warning:return e.Warning;case nd.Info:return e.Info;case nd.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return nd.Error;case e.Warning:return nd.Warning;case e.Info:return nd.Info;case e.Hint:return nd.Ignore}}}(SI||(SI={})),function(e){const t="";function i(e,i){const n=[t];return e.source?n.push(e.source.replace("¦","\\¦")):n.push(t),e.code?"string"==typeof e.code?n.push(e.code.replace("¦","\\¦")):n.push(e.code.value.replace("¦","\\¦")):n.push(t),void 0!==e.severity&&null!==e.severity?n.push(SI.toString(e.severity)):n.push(t),e.message&&i?n.push(e.message.replace("¦","\\¦")):n.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?n.push(e.startLineNumber.toString()):n.push(t),void 0!==e.startColumn&&null!==e.startColumn?n.push(e.startColumn.toString()):n.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?n.push(e.endLineNumber.toString()):n.push(t),void 0!==e.endColumn&&null!==e.endColumn?n.push(e.endColumn.toString()):n.push(t),n.push(t),n.join("¦")}e.makeKey=function(e){return i(e,!0)},e.makeKeyOptionalMessage=i}(kI||(kI={}));const xI=o("markerService"),EI="vs/editor/common/core/editorColorRegistry",DI=Fg("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},u(EI,0,"Background color for the highlight of line at the cursor position."));Fg("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Xg},u(EI,1,"Background color for the border around the line at the cursor position.")),Fg("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},u(EI,2,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);Fg("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Qg,hcLight:Qg},u(EI,3,"Background color of the border around highlighted ranges.")),Fg("editor.symbolHighlightBackground",{dark:Cp,light:Cp,hcDark:null,hcLight:null},u(EI,4,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Qg,hcLight:Qg},u(EI,5,"Background color of the border around highlighted symbols."));const LI=Fg("editorCursor.foreground",{dark:"#AEAFAD",light:Ng.black,hcDark:Ng.white,hcLight:"#0F4A85"},u(EI,6,"Color of the editor cursor.")),II=Fg("editorCursor.background",null,u(EI,7,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),TI=(Fg("editorMultiCursor.primary.foreground",{dark:LI,light:LI,hcDark:LI,hcLight:LI},u(EI,8,"Color of the primary editor cursor when multiple cursors are present.")),Fg("editorMultiCursor.primary.background",{dark:II,light:II,hcDark:II,hcLight:II},u(EI,9,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Fg("editorMultiCursor.secondary.foreground",{dark:LI,light:LI,hcDark:LI,hcLight:LI},u(EI,10,"Color of secondary editor cursors when multiple cursors are present.")),Fg("editorMultiCursor.secondary.background",{dark:II,light:II,hcDark:II,hcLight:II},u(EI,11,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Fg("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},u(EI,12,"Color of whitespace characters in the editor."))),NI=(Fg("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Ng.white,hcLight:"#292929"},u(EI,13,"Color of editor line numbers.")),Fg("editorIndentGuide.background",{dark:TI,light:TI,hcDark:TI,hcLight:TI},u(EI,14,"Color of the editor indentation guides."),!1,u(EI,15,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead."))),AI=Fg("editorIndentGuide.activeBackground",{dark:TI,light:TI,hcDark:TI,hcLight:TI},u(EI,16,"Color of the active editor indentation guides."),!1,u(EI,17,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),MI=Fg("editorIndentGuide.background1",{dark:NI,light:NI,hcDark:NI,hcLight:NI},u(EI,18,"Color of the editor indentation guides (1).")),RI=(Fg("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,19,"Color of the editor indentation guides (2).")),Fg("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,20,"Color of the editor indentation guides (3).")),Fg("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,21,"Color of the editor indentation guides (4).")),Fg("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,22,"Color of the editor indentation guides (5).")),Fg("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,23,"Color of the editor indentation guides (6).")),Fg("editorIndentGuide.activeBackground1",{dark:AI,light:AI,hcDark:AI,hcLight:AI},u(EI,24,"Color of the active editor indentation guides (1)."))),OI=(Fg("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,25,"Color of the active editor indentation guides (2).")),Fg("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,26,"Color of the active editor indentation guides (3).")),Fg("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,27,"Color of the active editor indentation guides (4).")),Fg("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,28,"Color of the active editor indentation guides (5).")),Fg("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,29,"Color of the active editor indentation guides (6).")),Fg("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Qg,hcLight:Qg},u(EI,30,"Color of editor active line number"),!1,u(EI,31,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")));Fg("editorLineNumber.activeForeground",{dark:OI,light:OI,hcDark:OI,hcLight:OI},u(EI,30,"Color of editor active line number"));Fg("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},u(EI,32,"Color of the final editor line when editor.renderFinalNewline is set to dimmed."));Fg("editorRuler.foreground",{dark:"#5A5A5A",light:Ng.lightgrey,hcDark:Ng.white,hcLight:"#292929"},u(EI,33,"Color of the editor rulers.")),Fg("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},u(EI,34,"Foreground color of editor CodeLens")),Fg("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},u(EI,35,"Background color behind matching brackets")),Fg("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Xg,hcLight:Xg},u(EI,36,"Color for matching brackets boxes"));Fg("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},u(EI,37,"Color of the overview ruler border.")),Fg("editorOverviewRuler.background",null,u(EI,38,"Background color of the editor overview ruler."));Fg("editorGutter.background",{dark:lp,light:lp,hcDark:lp,hcLight:lp},u(EI,39,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Fg("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Ng.fromHex("#fff").transparent(.8),hcLight:Xg},u(EI,40,"Border color of unnecessary (unused) source code in the editor."));Fg("editorUnnecessaryCode.opacity",{dark:Ng.fromHex("#000a"),light:Ng.fromHex("#0007"),hcDark:null,hcLight:null},u(EI,41,"Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."));Fg("editorGhostText.border",{dark:null,light:null,hcDark:Ng.fromHex("#fff").transparent(.8),hcLight:Ng.fromHex("#292929").transparent(.8)},u(EI,42,"Border color of ghost text in the editor.")),Fg("editorGhostText.foreground",{dark:Ng.fromHex("#ffffff56"),light:Ng.fromHex("#0007"),hcDark:null,hcLight:null},u(EI,43,"Foreground color of the ghost text in the editor.")),Fg("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},u(EI,44,"Background color of the ghost text in the editor."));const FI=new Ng(new Lg(0,122,204,.6)),PI=(Fg("editorOverviewRuler.rangeHighlightForeground",{dark:FI,light:FI,hcDark:FI,hcLight:FI},u(EI,45,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Fg("editorOverviewRuler.errorForeground",{dark:new Ng(new Lg(255,18,18,.7)),light:new Ng(new Lg(255,18,18,.7)),hcDark:new Ng(new Lg(255,50,50,1)),hcLight:"#B5200D"},u(EI,46,"Overview ruler marker color for errors."))),BI=Fg("editorOverviewRuler.warningForeground",{dark:fp,light:fp,hcDark:mp,hcLight:mp},u(EI,47,"Overview ruler marker color for warnings.")),zI=Fg("editorOverviewRuler.infoForeground",{dark:bp,light:bp,hcDark:vp,hcLight:vp},u(EI,48,"Overview ruler marker color for infos.")),WI=Fg("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},u(EI,49,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),HI=Fg("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},u(EI,50,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),VI=Fg("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},u(EI,51,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),UI=Fg("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,52,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),KI=Fg("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,53,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),qI=Fg("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,54,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),$I=Fg("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Ng(new Lg(255,18,18,.8)),light:new Ng(new Lg(255,18,18,.8)),hcDark:new Ng(new Lg(255,50,50,1)),hcLight:""},u(EI,55,"Foreground color of unexpected brackets."));Fg("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,56,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,57,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,58,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,59,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,60,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,61,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,62,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,63,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,64,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,65,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,66,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Fg("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},u(EI,67,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Fg("editorUnicodeHighlight.border",{dark:fp,light:fp,hcDark:fp,hcLight:fp},u(EI,68,"Border color used to highlight unicode characters.")),Fg("editorUnicodeHighlight.background",{dark:pp,light:pp,hcDark:pp,hcLight:pp},u(EI,69,"Background color used to highlight unicode characters.")),xg(((e,t)=>{const i=e.getColor(lp),n=e.getColor(DI),s=n&&!n.isTransparent()?n:i;s&&t.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)}));let jI=class extends Qt{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new ui),this.onDidChangeMarker=this._onDidChangeMarker.event,this._markerDecorations=new At,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}getLiveMarkers(e){const t=this._markerDecorations.get(e);return t?t.getMarkers():[]}_handleMarkerChange(e){e.forEach((e=>{const t=this._markerDecorations.get(e);t&&this._updateDecorations(t)}))}_onModelAdded(e){const t=new GI(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme!==vn.inMemory&&e.uri.scheme!==vn.internal&&e.uri.scheme!==vn.vscode||this._markerService?.read({resource:e.uri}).map((e=>e.owner)).forEach((t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};jI=Bs([zs(0,dC),zs(1,xI)],jI);class GI extends Qt{constructor(e){super(),this.model=e,this._map=new Pt,this._register(Yt((()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()})))}update(e){const{added:t,removed:i}=function(e,t){const i=[],n=[];for(const n of e)t.has(n)||i.push(n);for(const i of t)e.has(i)||n.push(i);return{removed:i,added:n}}(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===i.length)return!1;const n=i.map((e=>this._map.get(e))),s=t.map((e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)}))),o=this.model.deltaDecorations(n,s);for(const e of i)this._map.delete(e);for(let e=0;e<o.length;e++)this._map.set(t[e],o[e]);return!0}getMarker(e){return this._map.getKey(e.id)}getMarkers(){const e=[];return this._map.forEach(((t,i)=>{const n=this.model.getDecorationRange(t);n&&e.push([n,i])})),e}_createDecorationRange(e,t){let i=Io.lift(t);if(t.severity!==SI.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const t=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(1===t||i.endColumn>=t)return i;const n=e.getWordAtPosition(i.getStartPosition());n&&(i=new Io(i.startLineNumber,n.startColumn,i.endLineNumber,n.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new Io(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,s,o;switch(e.severity){case SI.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",n=0;break;case SI.Info:t="squiggly-info",i=Cg(zI),n=10,o={color:Cg(Qp),position:1};break;case SI.Warning:t="squiggly-warning",i=Cg(BI),n=20,o={color:Cg(Zp),position:1};break;case SI.Error:default:t="squiggly-error",i=Cg(PI),n=30,o={color:Cg(Jp),position:1}}return e.tags&&(-1!==e.tags.indexOf(1)&&(s="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Nc.Right},minimap:o,zIndex:n,inlineClassName:s}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}}const YI=o("markerDecorationsService");function XI(e){let t=0,i=0,n=0,s=0;for(let o=0,r=e.length;o<r;o++){const a=e.charCodeAt(o);13===a?(0===t&&(i=o),t++,o+1<r&&10===e.charCodeAt(o+1)?(s|=2,o++):s|=3,n=o+1):10===a&&(s|=1,0===t&&(i=o),t++,n=o+1)}return 0===t&&(i=e.length),[t,i,e.length-n,s]}class QI{static _nextVisibleColumn(e,t,i){return 9===e?QI.nextRenderTabStop(t,i):(n=e)>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374||ln(e)?t+2:t+1;var n}static visibleColumnFromColumn(e,t,i){const n=Math.min(t-1,e.length),s=e.substring(0,n),o=new Zi(s);let r=0;for(;!o.eol();){const e=Xi(s,n,o.offset);o.nextGraphemeLength(),r=this._nextVisibleColumn(e,r,i)}return r}static toStatusbarColumn(e,t,i){const n=e.substring(0,Math.min(t-1,e.length)),s=new Qi(n);let o=0;for(;!s.eol();){9===s.nextCodePoint()?o=QI.nextRenderTabStop(o,i):o+=1}return o+1}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length,s=new Zi(e);let o=0,r=1;for(;!s.eol();){const a=Xi(e,n,s.offset);s.nextGraphemeLength();const l=this._nextVisibleColumn(a,o,i),h=s.offset+1;if(l>=t){return l-t<t-o?h:r}o=l,r=h}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function ZI(e,t,i){let n=Pi(e);return-1===n&&(n=e.length),function(e,t,i){let n=0;for(let i=0;i<e.length;i++)"\t"===e.charAt(i)?n=QI.nextIndentTabStop(n,t):n++;let s="";if(!i){const e=Math.floor(n/t);n%=t;for(let t=0;t<e;t++)s+="\t"}for(let e=0;e<n;e++)s+=" ";return s}(e.substring(0,n),t,i)+e.substring(n)}class JI{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class eT{constructor(e,t,i,n,s,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}}class tT extends eT{constructor(e,t,i,n,s,o,r){super(e,t,i,n,s,o),this.minVisibleColumnIndentation=r}}class iT{static{this.zero=new iT(0,0)}static lengthDiffNonNegative(e,t){return t.isLessThan(e)?iT.zero:e.lineCount===t.lineCount?new iT(0,t.columnCount-e.columnCount):new iT(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new iT(0,t.column-e.column):new iT(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return iT.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const n of e)"\n"===n?(t++,i=0):i++;return new iT(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isZero(){return 0===this.lineCount&&0===this.columnCount}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return 0===e.lineCount?new iT(this.lineCount,this.columnCount+e.columnCount):new iT(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return 0===this.lineCount?new Io(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new Io(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new Io(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return 0===this.lineCount?new Lo(e.lineNumber,e.column+this.columnCount):new Lo(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}const nT=0;function sT(e){return 0===e}const oT=2**26;function rT(e,t){return e*oT+t}function aT(e){const t=e,i=Math.floor(t/oT);return new iT(i,t-i*oT)}function lT(e,t){let i=e+t;return t>=oT&&(i-=e%oT),i}function hT(e,t){return e.reduce(((e,i)=>lT(e,t(i))),nT)}function cT(e,t){return e===t}function dT(e,t){const i=e,n=t;if(n-i<=0)return nT;const s=Math.floor(i/oT),o=Math.floor(n/oT),r=n-o*oT;if(s===o){return rT(0,r-(i-s*oT))}return rT(o-s,r)}function uT(e,t){return e<t}function gT(e,t){return e<=t}function pT(e,t){return e>=t}function fT(e){return rT(e.lineNumber-1,e.column-1)}function mT(e,t){const i=e,n=Math.floor(i/oT),s=i-n*oT,o=t,r=Math.floor(o/oT);return new Io(n+1,s+1,r+1,o-r*oT+1)}class bT{static fromModelContentChanges(e){const t=e.map((e=>{const t=Io.lift(e.range);return new bT(fT(t.getStartPosition()),fT(t.getEndPosition()),function(e){const t=Fi(e);return rT(t.length-1,t[t.length-1].length)}(e.text))})).reverse();return t}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${aT(this.startOffset)}...${aT(this.endOffset)}) -> ${aT(this.newLength)}`}}class vT{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map((e=>wT.from(e)))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return null===i?null:dT(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?rT(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):rT(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=aT(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?rT(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):rT(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(!gT(i,e))break;{this.nextEditIdx++;const e=aT(i),n=aT(this.translateOldToCur(t.endOffsetBeforeObj)),s=e.lineCount-n.lineCount;this.deltaOldToNewLineCount+=s;const o=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,r=e.columnCount-n.columnCount;this.deltaOldToNewColumnCount=o+r,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}}}}class wT{static from(e){return new wT(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=aT(t),this.endOffsetAfterObj=aT(lT(e,i)),this.offsetObj=aT(e)}}const _T=[];class yT{static{this.cache=new Array(129)}static create(e,t){if(e<=128&&0===t.length){let i=yT.cache[e];return i||(i=new yT(e,t),yT.cache[e]=i),i}return new yT(e,t)}static{this.empty=yT.create(0,_T)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let n=i>>5;if(0===n){const e=1<<i|this.items;return e===this.items?this:yT.create(e,this.additionalItems)}n--;const s=this.additionalItems.slice(0);for(;s.length<n;)s.push(0);return s[n]|=1<<(31&i),yT.create(this.items,s)}has(e,t){const i=t.getKey(e);let n=i>>5;return 0===n?!!(this.items&1<<i):(n--,!!((this.additionalItems[n]||0)&1<<(31&i)))}merge(e){const t=this.items|e.items;if(this.additionalItems===_T&&e.additionalItems===_T)return t===this.items?this:t===e.items?e:yT.create(t,_T);const i=[];for(let t=0;t<Math.max(this.additionalItems.length,e.additionalItems.length);t++){const n=this.additionalItems[t]||0,s=e.additionalItems[t]||0;i.push(n|s)}return yT.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items)return!1;if(this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}}const CT={getKey(e){return e}};class ST{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find((([t,i])=>i===e))?.[0]}reverseLookupSet(e){const t=[];for(const[i]of this.items)e.has(i,this)&&t.push(i);return t}keys(){return this.items.keys()}}class kT{get length(){return this._length}constructor(e){this._length=e}}class xT extends kT{static create(e,t,i){let n=e.length;return t&&(n=lT(n,t.length)),i&&(n=lT(n,i.length)),new xT(n,e,t,i,t?t.missingOpeningBracketIds:yT.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=s}canBeReused(e){return null!==this.closingBracket&&!e.intersects(this.missingOpeningBracketIds)}flattenLists(){return xT.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new xT(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(lT(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class ET extends kT{static create23(e,t,i,n=!1){let s=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=lT(s,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=lT(s,i.length),o=o.merge(i.missingOpeningBracketIds)}return n?new LT(s,e.listHeight+1,e,t,i,o):new DT(s,e.listHeight+1,e,t,i,o)}static create(e,t=!1){if(0===e.length)return this.getEmpty();{let i=e[0].length,n=e[0].missingOpeningBracketIds;for(let t=1;t<e.length;t++)i=lT(i,e[t].length),n=n.merge(e[t].missingOpeningBracketIds);return t?new TT(i,e[0].listHeight+1,e,n):new IT(i,e[0].listHeight+1,e,n)}}static getEmpty(){return new TT(nT,0,[],yT.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(0===e)return;const t=this.getChild(e-1),i=4===t.kind?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){this.throwIfImmutable();if(0===this.childrenLength)return;const e=this.getChild(0),t=4===e.kind?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;if(0===this.childrenLength)return!1;let t=this;for(;4===t.kind;){const e=t.childrenLength;if(0===e)throw new ot;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const e=this.getChild(n);t=lT(t,e.length),i=i.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}flattenLists(){const e=[];for(const t of this.children){const i=t.flattenLists();4===i.kind?e.push(...i.children):e.push(i)}return ET.create(e)}computeMinIndentation(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let e=0;e<this.childrenLength;e++){const s=this.getChild(e);s&&(i=Math.min(i,s.computeMinIndentation(n,t)),n=lT(n,s.length))}return this.cachedMinIndentation=i,i}}class DT extends ET{get childrenLength(){return null!==this._item3?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:return void(this._item1=t);case 1:return void(this._item2=t);case 2:return void(this._item3=t)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,s,o){super(e,t,o),this._item1=i,this._item2=n,this._item3=s}deepClone(){return new DT(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class LT extends DT{toMutable(){return new DT(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class IT extends ET{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new IT(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class TT extends IT{toMutable(){return new IT(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const NT=[];class AT extends kT{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return NT}flattenLists(){return this}deepClone(){return this}}class MT extends AT{get kind(){return 0}get missingOpeningBracketIds(){return yT.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=aT(e),n=(0===i.columnCount?i.lineCount:i.lineCount+1)+1,s=(o=lT(e,this.length),Math.floor(o/oT)+1);var o;let r=Number.MAX_SAFE_INTEGER;for(let e=n;e<=s;e++){const i=t.getLineFirstNonWhitespaceColumn(e),n=t.getLineContent(e);if(0===i)continue;const s=QI.visibleColumnFromColumn(n,i,t.getOptions().tabSize);r=Math.min(r,s)}return r}}class RT extends AT{static create(e,t,i){return new RT(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return yT.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class OT extends AT{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class FT{constructor(e,t,i,n,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=s}}class PT{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new BT(this.textModel,this.bracketTokens),this._offset=nT,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return rT(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=lT(this._offset,e);const t=aT(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=lT(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class BT{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=e.length,e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const n=this.lineTokens,s=n.getCount();let o=null;if(this.lineTokenOffset<s){const r=n.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&r===n.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const a=0===Ad.getTokenType(r),l=Ad.containsBalancedBrackets(r),h=n.getEndOffset(this.lineTokenOffset);if(l&&a&&this.lineCharOffset<h){const e=n.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,h),i=this.bracketTokens.getSingleLanguageBracketTokens(e),s=i.regExpGlobal;if(s){s.lastIndex=0;const e=s.exec(t);e&&(o=i.getToken(e[0]),o&&(this.lineCharOffset+=e.index))}}if(i+=h-this.lineCharOffset,o){if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=o;break}return this.lineCharOffset+=o.length,o}this.lineTokenOffset++,this.lineCharOffset=h}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3)break}if(i>1500)break}const n=(s=e,o=t,r=this.lineIdx,a=this.lineCharOffset,s!==r?rT(r-s,a):rT(0,a-o));var s,o,r,a;return new FT(n,0,-1,yT.getEmpty(),new MT(n))}}class zT{constructor(e,t){this.text=e,this._offset=nT,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+"|\n","gi"):null,s=[];let o,r=0,a=0,l=0,h=0;const c=[];for(let e=0;e<60;e++)c.push(new FT(rT(0,e),0,-1,yT.getEmpty(),new MT(rT(0,e))));const d=[];for(let e=0;e<60;e++)d.push(new FT(rT(1,e),0,-1,yT.getEmpty(),new MT(rT(1,e))));if(n)for(n.lastIndex=0;null!==(o=n.exec(e));){const e=o.index,i=o[0];if("\n"===i)r++,a=e+1;else{if(l!==e){let t;if(h===r){const i=e-l;if(i<c.length)t=c[i];else{const e=rT(0,i);t=new FT(e,0,-1,yT.getEmpty(),new MT(e))}}else{const i=r-h,n=e-a;if(1===i&&n<d.length)t=d[n];else{const e=rT(i,n);t=new FT(e,0,-1,yT.getEmpty(),new MT(e))}}s.push(t)}s.push(t.getToken(i)),l=e+i.length,h=r}}const u=e.length;if(l!==u){const e=h===r?rT(0,u-l):rT(r-h,u-a);s.push(new FT(e,0,-1,yT.getEmpty(),new MT(e)))}this.length=rT(r,u-a),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new nt}getText(){return this.text}}class WT{static createFromLanguage(e,t){function i(e){return t.getKey(`${e.languageId}:::${e.bracketText}`)}const n=new Map;for(const t of e.bracketsNew.openingBrackets){const e=rT(0,t.bracketText.length),s=i(t),o=yT.getEmpty().add(s,CT);n.set(t.bracketText,new FT(e,1,s,o,RT.create(e,t,o)))}for(const t of e.bracketsNew.closingBrackets){const e=rT(0,t.bracketText.length);let s=yT.getEmpty();const o=t.getOpeningBrackets();for(const e of o)s=s.add(i(e),CT);n.set(t.bracketText,new FT(e,2,i(o[0]),s,RT.create(e,t,s)))}return new WT(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map((e=>function(e){let t=Ai(e);/^[\w ]+/.test(e)&&(t=`\\b${t}`);/[\w ]+$/.test(e)&&(t=`${t}\\b`);return t}(e))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(2===i.kind&&i.bracketIds.intersects(e))return t}get isEmpty(){return 0===this.map.size}}class HT{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=WT.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}}function VT(e,t=!1){if(0===e.length)return null;if(1===e.length)return e[0];let i=e.length;for(;i>3;){const n=i>>1;for(let s=0;s<n;s++){const n=s<<1;e[s]=ET.create23(e[n],e[n+1],n+3===i?e[n+2]:null,t)}i=n}return ET.create23(e[0],e[1],i>=3?e[2]:null,t)}function UT(e,t){return Math.abs(e.listHeight-t.listHeight)}function KT(e,t){return e.listHeight===t.listHeight?ET.create23(e,t,null,!1):e.listHeight>t.listHeight?function(e,t){let i=e=e.toMutable();const n=[];let s;for(;;){if(t.listHeight===i.listHeight){s=t;break}if(4!==i.kind)throw new Error("unexpected");n.push(i),i=i.makeLastElementMutable()}for(let e=n.length-1;e>=0;e--){const t=n[e];s?t.childrenLength>=3?s=ET.create23(t.unappendChild(),s,null,!1):(t.appendChildOfSameHeight(s),s=void 0):t.handleChildrenChanged()}return s?ET.create23(e,s,null,!1):e}(e,t):function(e,t){let i=e=e.toMutable();const n=[];for(;t.listHeight!==i.listHeight;){if(4!==i.kind)throw new Error("unexpected");n.push(i),i=i.makeFirstElementMutable()}let s=t;for(let e=n.length-1;e>=0;e--){const t=n[e];s?t.childrenLength>=3?s=ET.create23(s,t.unprependChild(),null,!1):(t.prependChildOfSameHeight(s),s=void 0):t.handleChildrenChanged()}return s?ET.create23(s,e,null,!1):e}(t,e)}class qT{constructor(e){this.lastOffset=nT,this.nextNodes=[e],this.offsets=[nT],this.idxs=[]}readLongestNodeAt(e,t){if(uT(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=jT(this.nextNodes);if(!i)return;const n=jT(this.offsets);if(uT(e,n))return;if(uT(n,e))if(lT(n,i.length)<=e)this.nextNodeAfterCurrent();else{const e=$T(i);-1!==e?(this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const e=$T(i);if(-1===e)return void this.nextNodeAfterCurrent();this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)}}}}nextNodeAfterCurrent(){for(;;){const e=jT(this.offsets),t=jT(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;const i=jT(this.nextNodes),n=$T(i,this.idxs[this.idxs.length-1]);if(-1!==n){this.nextNodes.push(i.getChild(n)),this.offsets.push(lT(e,t.length)),this.idxs[this.idxs.length-1]=n;break}this.idxs.pop()}}}function $T(e,t=-1){for(;;){if(++t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function jT(e){return e.length>0?e[e.length-1]:void 0}function GT(e,t,i,n){return new YT(e,t,i,n).parseDocument()}class YT{get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new qT(i):void 0,this.positionMapper=new vT(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(yT.getEmpty(),0);return e||(e=ET.getEmpty()),e}parseList(e,t){const i=[];for(;;){let n=this.tryReadChildFromCache(e);if(!n){const i=this.tokenizer.peek();if(!i||2===i.kind&&i.bracketIds.intersects(e))break;n=this.parseChild(e,t+1)}4===n.kind&&0===n.childrenLength||i.push(n)}const n=this.oldNodeReader?function(e){if(0===e.length)return null;if(1===e.length)return e[0];let t=0;function i(){if(t>=e.length)return null;const i=t,n=e[i].listHeight;for(t++;t<e.length&&e[t].listHeight===n;)t++;return t-i>=2?VT(0===i&&t===e.length?e:e.slice(i,t),!1):e[i]}let n=i(),s=i();if(!s)return n;for(let e=i();e;e=i())UT(n,s)<=UT(s,e)?(n=KT(n,s),s=e):s=KT(s,e);return KT(n,s)}(i):VT(i,this.createImmutableLists);return n}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!sT(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(i=>{if(null!==t&&!uT(i.length,t))return!1;return i.canBeReused(e)}));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new OT(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new MT(i.length);const n=e.merge(i.bracketIds),s=this.parseList(n,t+1),o=this.tokenizer.peek();return o&&2===o.kind&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),xT.create(i.astNode,s,o.astNode)):xT.create(i.astNode,s,null)}default:throw new Error("unexpected")}}}function XT(e,t){if(0===e.length)return t;if(0===t.length)return e;const i=new kt(ZT(e)),n=ZT(t);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=i.dequeue();function o(e){if(void 0===e){const e=i.takeWhile((e=>!0))||[];return s&&e.unshift(s),e}const t=[];for(;s&&!sT(e);){const[n,o]=s.splitAt(e);t.push(n),e=dT(n.lengthAfter,e),s=o??i.dequeue()}return sT(e)||t.push(new QT(!1,e,e)),t}const r=[];function a(e,t,i){if(r.length>0&&cT(r[r.length-1].endOffset,e)){const e=r[r.length-1];r[r.length-1]=new bT(e.startOffset,t,lT(e.newLength,i))}else r.push({startOffset:e,endOffset:t,newLength:i})}let l=nT;for(const e of n){const t=o(e.lengthBefore);if(e.modified){const i=lT(l,hT(t,(e=>e.lengthBefore)));a(l,i,e.lengthAfter),l=i}else for(const e of t){const t=l;l=lT(l,e.lengthBefore),e.modified&&a(t,l,e.lengthAfter)}}return r}class QT{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=dT(e,this.lengthAfter);return cT(t,nT)?[this,void 0]:this.modified?[new QT(this.modified,this.lengthBefore,e),new QT(this.modified,nT,t)]:[new QT(this.modified,e,e),new QT(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${aT(this.lengthBefore)} -> ${aT(this.lengthAfter)}`}}function ZT(e){const t=[];let i=nT;for(const n of e){const e=dT(i,n.startOffset);sT(e)||t.push(new QT(!1,e,e));const s=dT(n.startOffset,n.endOffset);t.push(new QT(!0,s,n.newLength)),i=n.endOffset}return t}class JT extends Qt{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new ui,this.denseKeyProvider=new ST,this.brackets=new HT(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)2===e.tokenization.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),t=new zT(this.textModel.getValue(),e);this.initialAstWithoutTokens=GT(t,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.tokenization.backgroundTokenizationState){const e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map((e=>new bT(rT(e.fromLineNumber-1,0),rT(e.toLineNumber,0),rT(e.toLineNumber-e.fromLineNumber+1,0))));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=bT.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=XT(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=XT(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const n=t;return GT(new PT(this.textModel,this.brackets),e,n,i)}getBracketsInRange(e,t){this.flushQueue();const i=rT(e.startLineNumber-1,e.startColumn-1),n=rT(e.endLineNumber-1,e.endColumn-1);return new xt((e=>{const s=this.initialAstWithoutTokens||this.astWithTokens;iN(s,nT,s.length,i,n,e,0,0,new Map,t)}))}getBracketPairsInRange(e,t){this.flushQueue();const i=fT(e.getStartPosition()),n=fT(e.getEndPosition());return new xt((e=>{const s=this.initialAstWithoutTokens||this.astWithTokens,o=new nN(e,t,this.textModel);sN(s,nT,s.length,i,n,o,0,new Map)}))}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return tN(t,nT,t.length,fT(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return eN(t,nT,t.length,fT(e))}}function eN(e,t,i,n){if(4===e.kind||2===e.kind){const s=[];for(const n of e.children)i=lT(t,n.length),s.push({nodeOffsetStart:t,nodeOffsetEnd:i}),t=i;for(let t=s.length-1;t>=0;t--){const{nodeOffsetStart:i,nodeOffsetEnd:o}=s[t];if(uT(i,n)){const s=eN(e.children[t],i,o,n);if(s)return s}}return null}if(3===e.kind)return null;if(1===e.kind){const n=mT(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function tN(e,t,i,n){if(4===e.kind||2===e.kind){for(const s of e.children){if(uT(n,i=lT(t,s.length))){const e=tN(s,t,i,n);if(e)return e}t=i}return null}if(3===e.kind)return null;if(1===e.kind){const n=mT(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function iN(e,t,i,n,s,o,r,a,l,h,c=!1){if(r>200)return!0;e:for(;;)switch(e.kind){case 4:{const a=e.childrenLength;for(let c=0;c<a;c++){const a=e.getChild(c);if(a){if(i=lT(t,a.length),gT(t,s)&&pT(i,n)){if(pT(i,s)){e=a;continue e}if(!iN(a,t,i,n,s,o,r,0,l,h))return!1}t=i}}return!0}case 2:{const c=!h||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo);let d=0;if(l){let t=l.get(e.openingBracket.text);void 0===t&&(t=0),d=t,c&&(t++,l.set(e.openingBracket.text,t))}const u=e.childrenLength;for(let g=0;g<u;g++){const u=e.getChild(g);if(u){if(i=lT(t,u.length),gT(t,s)&&pT(i,n)){if(pT(i,s)&&1!==u.kind){e=u,c?(r++,a=d+1):a=d;continue e}if(c||1!==u.kind||!e.closingBracket){if(!iN(u,t,i,n,s,o,c?r+1:r,c?d+1:d,l,h,!e.closingBracket))return!1}}t=i}}return l?.set(e.openingBracket.text,d),!0}case 3:{const e=mT(t,i);return o(new JI(e,r-1,0,!0))}case 1:{const e=mT(t,i);return o(new JI(e,r-1,a-1,c))}case 0:return!0}}class nN{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function sN(e,t,i,n,s,o,r,a){if(r>200)return!0;let l=!0;if(2===e.kind){let h=0;if(a){let t=a.get(e.openingBracket.text);void 0===t&&(t=0),h=t,t++,a.set(e.openingBracket.text,t)}const c=lT(t,e.openingBracket.length);let d=-1;if(o.includeMinIndentation&&(d=e.computeMinIndentation(t,o.textModel)),l=o.push(new tT(mT(t,i),mT(t,c),e.closingBracket?mT(lT(c,e.child?.length||nT),i):void 0,r,h,e,d)),t=c,l&&e.child){const h=e.child;if(i=lT(t,h.length),gT(t,s)&&pT(i,n)&&(l=sN(h,t,i,n,s,o,r+1,a),!l))return!1}a?.set(e.openingBracket.text,h)}else{let i=t;for(const t of e.children){const e=i;if(i=lT(i,t.length),gT(e,s)&&gT(n,i)&&(l=sN(t,e,i,n,s,o,r,a),!l))return!1}}return l}class oN extends Qt{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Zt),this.onDidChangeEmitter=new ui,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange((e=>{e.languageId&&!this.bracketPairsTree.value?.object.didLanguageChange(e.languageId)||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())})))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const i=new Xt;this.bracketPairsTree.value=(e=i.add(new JT(this.textModel,(e=>this.languageConfigurationService.getLanguageConfiguration(e)))),t=i,{object:e,dispose:()=>t?.dispose()}),i.add(this.bracketPairsTree.value.object.onDidChange((e=>this.onDidChangeEmitter.fire(e)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var e,t}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||xt.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||xt.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||xt.empty}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const i=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!i)return null;const n=this.getBracketPairsInRange(Io.fromPositions(t,t)).findLast((e=>i.closes(e.openingBracketInfo)));return n?n.openingBracketRange:null}{const t=e.toLowerCase(),o=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!o)return null;const r=o.textIsBracket[t];return r?lN(this._findMatchingBracketUp(r,n,rN(i))):null}}matchBracket(e,t){if(this.canBuildAST){const t=this.getBracketPairsInRange(Io.fromPositions(e,e)).filter((t=>void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e)))).findLastMaxBy(Ct((t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange),Io.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}{const i=rN(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const s=t.getCount(),o=t.getLanguageId(n);let r=Math.max(0,e.column-1-i.maxBracketLength);for(let e=n-1;e>=0;e--){const i=t.getEndOffset(e);if(i<=r)break;if(Qs(t.getStandardTokenType(e))||t.getLanguageId(e)!==o){r=i;break}}let a=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let e=n+1;e<s;e++){const i=t.getStartOffset(e);if(i>=a)break;if(Qs(t.getStandardTokenType(e))||t.getLanguageId(e)!==o){a=i;break}}return{searchStartOffset:r,searchEndOffset:a}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),o=n.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const r=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(r&&!Qs(n.getStandardTokenType(o))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,r,o),h=null;for(;;){const n=Bo.findNextBracketInRange(r.forwardRegex,i,s,a,l);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){const e=s.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),i=this._matchFoundBracket(n,r.textIsBracket[e],r.textIsOpenBracket[e],t);if(i){if(i instanceof aN)return null;h=i}}a=n.endColumn-1}if(h)return h}if(o>0&&n.getStartOffset(o)===e.column-1){const r=o-1,a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(a&&!Qs(n.getStandardTokenType(r))){const{searchStartOffset:o,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,a,r),h=Bo.findPrevBracketInRange(a.reversedRegex,i,s,o,l);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const e=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),i=this._matchFoundBracket(h,a.textIsBracket[e],a.textIsOpenBracket[e],t);if(i)return i instanceof aN?null:i}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const s=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return s?s instanceof aN?s:[e,s]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,s=e.reversedRegex;let o=-1,r=0;const a=(t,n,a,l)=>{for(;;){if(i&&++r%100==0&&!i())return aN.INSTANCE;const h=Bo.findPrevBracketInRange(s,t,n,a,l);if(!h)break;const c=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(c)?o++:e.isClose(c)&&o--,0===o)return h;l=h.startColumn-1}return null};for(let e=t.lineNumber;e>=1;e--){const i=this.textModel.tokenization.getLineTokens(e),s=i.getCount(),o=this.textModel.getLineContent(e);let r=s-1,l=o.length,h=o.length;e===t.lineNumber&&(r=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,h=t.column-1);let c=!0;for(;r>=0;r--){const t=i.getLanguageId(r)===n&&!Qs(i.getStandardTokenType(r));if(t)c?l=i.getStartOffset(r):(l=i.getStartOffset(r),h=i.getEndOffset(r));else if(c&&l!==h){const t=a(e,o,l,h);if(t)return t}c=t}if(c&&l!==h){const t=a(e,o,l,h);if(t)return t}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,s=e.forwardRegex;let o=1,r=0;const a=(t,n,a,l)=>{for(;;){if(i&&++r%100==0&&!i())return aN.INSTANCE;const h=Bo.findNextBracketInRange(s,t,n,a,l);if(!h)break;const c=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(c)?o++:e.isClose(c)&&o--,0===o)return h;a=h.endColumn-1}return null},l=this.textModel.getLineCount();for(let e=t.lineNumber;e<=l;e++){const i=this.textModel.tokenization.getLineTokens(e),s=i.getCount(),o=this.textModel.getLineContent(e);let r=0,l=0,h=0;e===t.lineNumber&&(r=i.findTokenIndexAtOffset(t.column-1),l=t.column-1,h=t.column-1);let c=!0;for(;r<s;r++){const t=i.getLanguageId(r)===n&&!Qs(i.getStandardTokenType(r));if(t)c||(l=i.getStartOffset(r)),h=i.getEndOffset(r);else if(c&&l!==h){const t=a(e,o,l,h);if(t)return t}c=t}if(c&&l!==h){const t=a(e,o,l,h);if(t)return t}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let i=null,n=null,s=null;for(let e=t.lineNumber;e>=1;e--){const o=this.textModel.tokenization.getLineTokens(e),r=o.getCount(),a=this.textModel.getLineContent(e);let l=r-1,h=a.length,c=a.length;if(e===t.lineNumber){l=o.findTokenIndexAtOffset(t.column-1),h=t.column-1,c=t.column-1;const e=o.getLanguageId(l);i!==e&&(i=e,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let d=!0;for(;l>=0;l--){const t=o.getLanguageId(l);if(i!==t){if(n&&s&&d&&h!==c){const t=Bo.findPrevBracketInRange(n.reversedRegex,e,a,h,c);if(t)return this._toFoundBracket(s,t);d=!1}i=t,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const r=!!n&&!Qs(o.getStandardTokenType(l));if(r)d?h=o.getStartOffset(l):(h=o.getStartOffset(l),c=o.getEndOffset(l));else if(s&&n&&d&&h!==c){const t=Bo.findPrevBracketInRange(n.reversedRegex,e,a,h,c);if(t)return this._toFoundBracket(s,t)}d=r}if(s&&n&&d&&h!==c){const t=Bo.findPrevBracketInRange(n.reversedRegex,e,a,h,c);if(t)return this._toFoundBracket(s,t)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const i=this.textModel.getLineCount();let n=null,s=null,o=null;for(let e=t.lineNumber;e<=i;e++){const i=this.textModel.tokenization.getLineTokens(e),r=i.getCount(),a=this.textModel.getLineContent(e);let l=0,h=0,c=0;if(e===t.lineNumber){l=i.findTokenIndexAtOffset(t.column-1),h=t.column-1,c=t.column-1;const e=i.getLanguageId(l);n!==e&&(n=e,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let d=!0;for(;l<r;l++){const t=i.getLanguageId(l);if(n!==t){if(o&&s&&d&&h!==c){const t=Bo.findNextBracketInRange(s.forwardRegex,e,a,h,c);if(t)return this._toFoundBracket(o,t);d=!1}n=t,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const r=!!s&&!Qs(i.getStandardTokenType(l));if(r)d||(h=i.getStartOffset(l)),c=i.getEndOffset(l);else if(o&&s&&d&&h!==c){const t=Bo.findNextBracketInRange(s.forwardRegex,e,a,h,c);if(t)return this._toFoundBracket(o,t)}d=r}if(o&&s&&d&&h!==c){const t=Bo.findNextBracketInRange(s.forwardRegex,e,a,h,c);if(t)return this._toFoundBracket(o,t)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const e=Io.fromPositions(i),t=this.getBracketPairsInRange(Io.fromPositions(i,i)).findLast((t=>void 0!==t.closingBracketRange&&t.range.strictContainsRange(e)));return t?[t.openingBracketRange,t.closingBracketRange]:null}const n=rN(t),s=this.textModel.getLineCount(),o=new Map;let r=[];const a=(e,t)=>{if(!o.has(e)){const i=[];for(let e=0,n=t?t.brackets.length:0;e<n;e++)i[e]=0;o.set(e,i)}r=o.get(e)};let l=0;const h=(e,t,i,s,o)=>{for(;;){if(n&&++l%100==0&&!n())return aN.INSTANCE;const a=Bo.findNextBracketInRange(e.forwardRegex,t,i,s,o);if(!a)break;const h=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),c=e.textIsBracket[h];if(c&&(c.isOpen(h)?r[c.index]++:c.isClose(h)&&r[c.index]--,-1===r[c.index]))return this._matchFoundBracket(a,c,!1,n);s=a.endColumn-1}return null};let c=null,d=null;for(let e=i.lineNumber;e<=s;e++){const t=this.textModel.tokenization.getLineTokens(e),n=t.getCount(),s=this.textModel.getLineContent(e);let o=0,r=0,l=0;if(e===i.lineNumber){o=t.findTokenIndexAtOffset(i.column-1),r=i.column-1,l=i.column-1;const e=t.getLanguageId(o);c!==e&&(c=e,d=this.languageConfigurationService.getLanguageConfiguration(c).brackets,a(c,d))}let u=!0;for(;o<n;o++){const i=t.getLanguageId(o);if(c!==i){if(d&&u&&r!==l){const t=h(d,e,s,r,l);if(t)return lN(t);u=!1}c=i,d=this.languageConfigurationService.getLanguageConfiguration(c).brackets,a(c,d)}const n=!!d&&!Qs(t.getStandardTokenType(o));if(n)u||(r=t.getStartOffset(o)),l=t.getEndOffset(o);else if(d&&u&&r!==l){const t=h(d,e,s,r,l);if(t)return lN(t)}u=n}if(d&&u&&r!==l){const t=h(d,e,s,r,l);if(t)return lN(t)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function rN(e){if(void 0===e)return()=>!0;{const t=Date.now();return()=>Date.now()-t<=e}}class aN{static{this.INSTANCE=new aN}constructor(){this._searchCanceledBrand=void 0}}function lN(e){return e instanceof aN?null:e}class hN extends Qt{constructor(e){super(),this.textModel=e,this.colorProvider=new cN,this.onDidChangeEmitter=new ui,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange((e=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){if(n)return[];if(void 0===t)return[];if(!this.colorizationOptions.enabled)return[];return this.textModel.bracketPairs.getBracketsInRange(e,!0).map((e=>({id:`bracket${e.range.toString()}-${e.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range}))).toArray()}getAllDecorations(e,t){return void 0===e?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Io(1,1,this.textModel.getLineCount(),1),e,t):[]}}class cN{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return"bracket-highlighting-"+e%30}}function dN(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}xg(((e,t)=>{const i=[WI,HI,VI,UI,KI,qI],n=new cN;t.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${e.getColor($I)}; }`);const s=i.map((t=>e.getColor(t))).filter((e=>!!e)).filter((e=>!e.isTransparent()));for(let e=0;e<30;e++){const i=s[e%s.length];t.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(e)} { color: ${i}; }`)}}));class uN{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${dN(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${dN(this.oldText)}")`:`(replace@${this.oldPosition} "${dN(this.oldText)}" with "${dN(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;po(e,n,i),i+=4;for(let s=0;s<n;s++)uo(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){const i=go(e,t);return Do(e,t+=4,i)}writeSize(){return 8+uN._writeStringSize(this.oldText)+uN._writeStringSize(this.newText)}write(e,t){return po(e,this.oldPosition,t),t+=4,po(e,this.newPosition,t),t+=4,t=uN._writeString(e,this.oldText,t),t=uN._writeString(e,this.newText,t)}static read(e,t,i){const n=go(e,t),s=go(e,t+=4);t+=4;const o=uN._readString(e,t);t+=uN._writeStringSize(o);const r=uN._readString(e,t);return t+=uN._writeStringSize(r),i.push(new uN(n,o,s,r)),t}}class gN{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===i){this._acceptCurr(n),n=this._getCurr(++t);continue}if(null===n){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[e,t]=gN._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(e),n=t;continue}if(i.newPosition<n.oldPosition){const[e,t]=gN._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(e),i=t;continue}let s,o;if(n.oldEnd===i.newEnd)s=i,o=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[e,r]=gN._splitPrev(i,n.oldLength);s=e,o=n,i=r,n=this._getCurr(++t)}else{const[t,r]=gN._splitCurr(n,i.newLength);s=i,o=t,i=this._getPrev(++e),n=r}this._result[this._resultLen++]=new uN(s.oldPosition,s.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=s.newLength-s.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}const s=gN._merge(this._result);return gN._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=gN._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=gN._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new uN(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new uN(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new uN(e.oldPosition,e.oldText,e.newPosition,i),new uN(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new uN(e.oldPosition,i,e.newPosition,e.newText),new uN(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;const t=[];let i=0,n=e[0];for(let s=1;s<e.length;s++){const o=e[s];n.oldEnd===o.oldPosition?n=new uN(n.oldPosition,n.oldText+o.oldText,n.newPosition,n.newText+o.newText):(t[i++]=n,n=o)}return t[i++]=n,t}static _removeNoOps(e){if(0===e.length)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const s=e[n];s.oldText!==s.newText&&(t[i++]=s)}return t}}function pN(e){return e.toString()}class fN{static create(e,t){const i=e.getAlternativeVersionId(),n=vN(e);return new fN(i,i,n,n,t,t,[])}constructor(e,t,i,n,s,o,r){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=s,this.afterCursorState=o,this.changes=r}append(e,t,i,n,s){var o,r;t.length>0&&(this.changes=(o=this.changes,r=t,null===o||0===o.length?r:new gN(o,r).compress())),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,i){if(po(e,t?t.length:0,i),i+=4,t)for(const n of t)po(e,n.selectionStartLineNumber,i),i+=4,po(e,n.selectionStartColumn,i),i+=4,po(e,n.positionLineNumber,i),i+=4,po(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=go(e,t);t+=4;for(let s=0;s<n;s++){const n=go(e,t),s=go(e,t+=4),o=go(e,t+=4),r=go(e,t+=4);t+=4,i.push(new YE(n,s,o,r))}return t}serialize(){let e=10+fN._writeSelectionsSize(this.beforeCursorState)+fN._writeSelectionsSize(this.afterCursorState)+4;for(const t of this.changes)e+=t.writeSize();const t=new Uint8Array(e);let i=0;po(t,this.beforeVersionId,i),i+=4,po(t,this.afterVersionId,i),i+=4,mo(t,this.beforeEOL,i),i+=1,mo(t,this.afterEOL,i),i+=1,i=fN._writeSelections(t,this.beforeCursorState,i),i=fN._writeSelections(t,this.afterCursorState,i),po(t,this.changes.length,i),i+=4;for(const e of this.changes)i=e.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=go(t,i);i+=4;const s=go(t,i);i+=4;const o=fo(t,i);i+=1;const r=fo(t,i);i+=1;const a=[];i=fN._readSelections(t,i,a);const l=[];i=fN._readSelections(t,i,l);const h=go(t,i);i+=4;const c=[];for(let e=0;e<h;e++)i=uN.read(t,i,c);return new fN(n,s,o,r,a,l,c)}}class mN{get type(){return 0}get resource(){return Fe.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=fN.create(i,n)}toString(){return(this._data instanceof fN?this._data:fN.deserialize(this._data)).changes.map((e=>e.toString())).join(", ")}matchesResource(e){return(Fe.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof fN}append(e,t,i,n,s){this._data instanceof fN&&this._data.append(e,t,i,n,s)}close(){this._data instanceof fN&&(this._data=this._data.serialize())}open(){this._data instanceof fN||(this._data=fN.deserialize(this._data))}undo(){if(Fe.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof fN&&(this._data=this._data.serialize());const e=fN.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Fe.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof fN&&(this._data=this._data.serialize());const e=fN.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof fN&&(this._data=this._data.serialize()),this._data.byteLength+168}}class bN{get resources(){return this._editStackElementsArr.map((e=>e.resource))}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const e of this._editStackElementsArr){const t=pN(e.resource);this._editStackElementsMap.set(t,e)}this._delegate=null}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){const e=[];for(const t of this._editStackElementsArr)Fe.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){const t=pN(e);return this._editStackElementsMap.has(t)}setModel(e){const t=pN(Fe.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=pN(e.uri);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).canAppend(e)}return!1}append(e,t,i,n,s){const o=pN(e.uri);this._editStackElementsMap.get(o).append(e,t,i,n,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=pN(e);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).heapSize()}return 0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${gs(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function vN(e){return"\n"===e.getEOL()?0:1}function wN(e){return!!e&&(e instanceof mN||e instanceof bN)}class _N{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);wN(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);wN(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(wN(i)&&i.canAppend(this._model))return i;const n=new mN(u("vs/editor/common/model/editStack",0,"Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n,t),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],vN(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n){const s=this._getOrCreateEditStackElement(e,n),o=this._model.applyEdits(t,!0),r=_N._computeCursorState(i,o),a=o.map(((e,t)=>({index:t,textChange:e.textChange})));return a.sort(((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition)),s.append(this._model,a.map((e=>e.textChange)),vN(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return Ge(e),null}}}class yN extends Qt{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}var CN;!function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(CN||(CN={}));class SN{constructor(e,t,i,n,s,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=o,-1!==e==(-1!==t))throw new Error}}class kN{constructor(e,t){this.top=e,this.endColumn=t}}class xN extends yN{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return function(e,t){let i=0,n=0;const s=e.length;for(;n<s;){const s=e.charCodeAt(n);if(32===s)i++;else{if(9!==s)break;i=i-i%t+t}n++}return n===s?-1:i}(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new ot("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(s&&s.offSide);let r=-2,a=-1,l=-2,h=-1;const c=e=>{if(-1!==r&&(-2===r||r>e-1)){r=-1,a=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){r=t,a=e;break}}}if(-2===l){l=-1,h=-1;for(let t=e;t<n;t++){const e=this._computeIndentLevel(t);if(e>=0){l=t,h=e;break}}}};let d=-2,u=-1,g=-2,p=-1;const f=e=>{if(-2===d){d=-1,u=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){d=t,u=e;break}}}if(-1!==g&&(-2===g||g<e-1)){g=-1,p=-1;for(let t=e;t<n;t++){const e=this._computeIndentLevel(t);if(e>=0){g=t,p=e;break}}}};let m=0,b=!0,v=0,w=!0,_=0,y=0;for(let s=0;b||w;s++){const r=e-s,g=e+s;s>1&&(r<1||r<t)&&(b=!1),s>1&&(g>n||g>i)&&(w=!1),s>5e4&&(b=!1,w=!1);let C=-1;if(b&&r>=1){const e=this._computeIndentLevel(r-1);e>=0?(l=r-1,h=e,C=Math.ceil(e/this.textModel.getOptions().indentSize)):(c(r),C=this._getIndentLevelForWhitespaceLine(o,a,h))}let S=-1;if(w&&g<=n){const e=this._computeIndentLevel(g-1);e>=0?(d=g-1,u=e,S=Math.ceil(e/this.textModel.getOptions().indentSize)):(f(g),S=this._getIndentLevelForWhitespaceLine(o,u,p))}if(0!==s){if(1===s){if(g<=n&&S>=0&&y+1===S){b=!1,m=g,v=g,_=S;continue}if(r>=1&&C>=0&&C-1===y){w=!1,m=r,v=r,_=C;continue}if(m=e,v=e,_=y,0===_)return{startLineNumber:m,endLineNumber:v,indent:_}}b&&(C>=_?m=r:b=!1),w&&(S>=_?v=g:w=!1)}else y=C}return{startLineNumber:m,endLineNumber:v,indent:_}}getLinesBracketGuides(e,t,i,n){const s=[];for(let i=e;i<=t;i++)s.push([]);const o=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new Io(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let r;if(i&&o.length>0){const n=(e<=i.lineNumber&&i.lineNumber<=t?o:this.textModel.bracketPairs.getBracketPairsInRange(Io.fromPositions(i)).toArray()).filter((e=>Io.strictContainsPosition(e.range,i)));r=function(e,t){const i=function(e,t,i=e.length-1){for(let n=i;n>=0;n--)if(t(e[n]))return n;return-1}(e,t);if(-1!==i)return e[i]}(n,(e=>true))?.range}const a=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,l=new EN;for(const i of o){if(!i.closingBracketRange)continue;const o=r&&i.range.equalsRange(r);if(!o&&!n.includeInactive)continue;const h=l.getInlineClassName(i.nestingLevel,i.nestingLevelOfEqualBracketType,a)+(n.highlightActive&&o?" "+l.activeClassName:""),c=i.openingBracketRange.getStartPosition(),d=i.closingBracketRange.getStartPosition(),u=n.horizontalGuides===CN.Enabled||n.horizontalGuides===CN.EnabledForActive&&o;if(i.range.startLineNumber===i.range.endLineNumber){u&&s[i.range.startLineNumber-e].push(new SN(-1,i.openingBracketRange.getEndPosition().column,h,new kN(!1,d.column),-1,-1));continue}const g=this.getVisibleColumnFromPosition(d),p=this.getVisibleColumnFromPosition(i.openingBracketRange.getStartPosition()),f=Math.min(p,g,i.minVisibleColumnIndentation+1);let m=!1;Pi(this.textModel.getLineContent(i.closingBracketRange.startLineNumber))<i.closingBracketRange.startColumn-1&&(m=!0);const b=Math.max(c.lineNumber,e),v=Math.min(d.lineNumber,t),w=m?1:0;for(let t=b;t<v+w;t++)s[t-e].push(new SN(f,-1,h,null,t===c.lineNumber?c.column:-1,t===d.lineNumber?d.column:-1));u&&(c.lineNumber>=e&&p>f&&s[c.lineNumber-e].push(new SN(f,-1,h,new kN(!1,c.column),-1,-1)),d.lineNumber<=t&&g>f&&s[d.lineNumber-e].push(new SN(f,-1,h,new kN(!m,d.column),-1,-1)))}for(const e of s)e.sort(((e,t)=>e.visibleColumn-t.visibleColumn));return s}getVisibleColumnFromPosition(e){return QI.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(s&&s.offSide),r=new Array(t-e+1);let a=-2,l=-1,h=-2,c=-1;for(let s=e;s<=t;s++){const t=s-e,d=this._computeIndentLevel(s-1);if(d>=0)a=s-1,l=d,r[t]=Math.ceil(d/n.indentSize);else{if(-2===a){a=-1,l=-1;for(let e=s-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){a=e,l=t;break}}}if(-1!==h&&(-2===h||h<s-1)){h=-1,c=-1;for(let e=s;e<i;e++){const t=this._computeIndentLevel(e);if(t>=0){h=e,c=t;break}}}r[t]=this._getIndentLevelForWhitespaceLine(o,l,c)}}return r}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return-1===t||-1===i?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class EN{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-"+e%30}}class DN{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function LN(e,t,i,n,s){let o;for(s.spacesDiff=0,s.looksLikeAlignment=!1,o=0;o<t&&o<n;o++){if(e.charCodeAt(o)!==i.charCodeAt(o))break}let r=0,a=0;for(let i=o;i<t;i++){32===e.charCodeAt(i)?r++:a++}let l=0,h=0;for(let e=o;e<n;e++){32===i.charCodeAt(e)?l++:h++}if(r>0&&a>0)return;if(l>0&&h>0)return;const c=Math.abs(a-h),d=Math.abs(r-l);if(0===c)return s.spacesDiff=d,void(d>0&&0<=l-1&&l-1<e.length&&l<i.length&&32!==i.charCodeAt(l)&&32===e.charCodeAt(l-1)&&44===e.charCodeAt(e.length-1)&&(s.looksLikeAlignment=!0));d%c!=0||(s.spacesDiff=d/c)}function IN(e,t,i){const n=Math.min(e.getLineCount(),1e4);let s=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],h=[0,0,0,0,0,0,0,0,0],c=new DN;for(let l=1;l<=n;l++){const n=e.getLineLength(l),d=e.getLineContent(l),u=n<=65536;let g=!1,p=0,f=0,m=0;for(let t=0,i=n;t<i;t++){const i=u?d.charCodeAt(t):e.getLineCharCode(l,t);if(9===i)m++;else{if(32!==i){g=!0,p=t;break}f++}}if(!g)continue;if(m>0?s++:f>1&&o++,LN(r,a,d,p,c),c.looksLikeAlignment&&(!i||t!==c.spacesDiff))continue;const b=c.spacesDiff;b<=8&&h[b]++,r=d,a=p}let d=i;s!==o&&(d=s<o);let u=t;if(d){let e=d?0:.1*n;l.forEach((t=>{const i=h[t];i>e&&(e=i,u=t)})),4===u&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(u=2)}return{insertSpaces:d,tabSize:u}}function TN(e){return(1&e.metadata)>>>0}function NN(e,t){e.metadata=254&e.metadata|t}function AN(e){return(2&e.metadata)>>>1==1}function MN(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function RN(e){return(4&e.metadata)>>>2==1}function ON(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function FN(e){return(64&e.metadata)>>>6==1}function PN(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}function BN(e,t){e.metadata=231&e.metadata|t<<3}function zN(e,t){e.metadata=223&e.metadata|(t?1:0)<<5}class WN{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,NN(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,ON(this,!1),PN(this,!1),BN(this,1),zN(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,MN(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;ON(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),PN(this,null!==this.options.glyphMarginClassName),BN(this,this.options.stickiness),zN(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const HN=new WN(null,0,0);HN.parent=HN,HN.left=HN,HN.right=HN,NN(HN,0);class VN{constructor(){this.root=HN,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,s,o){return this.root===HN?[]:function(e,t,i,n,s,o,r){let a=e.root,l=0,h=0,c=0,d=0;const u=[];let g=0;for(;a!==HN;)if(AN(a))MN(a.left,!1),MN(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;else{if(!AN(a.left)){if(h=l+a.maxEnd,h<t){MN(a,!0);continue}if(a.left!==HN){a=a.left;continue}}if(c=l+a.start,c>i)MN(a,!0);else{if(d=l+a.end,d>=t){a.setCachedOffsets(c,d,o);let e=!0;n&&a.ownerId&&a.ownerId!==n&&(e=!1),s&&RN(a)&&(e=!1),r&&!FN(a)&&(e=!1),e&&(u[g++]=a)}MN(a,!0),a.right===HN||AN(a.right)||(l+=a.delta,a=a.right)}}return MN(e.root,!1),u}(this,e,t,i,n,s,o)}search(e,t,i,n){return this.root===HN?[]:qN(this,e,t,i,n)}collectNodesFromOwner(e){return function(e,t){let i=e.root;const n=[];let s=0;for(;i!==HN;)AN(i)?(MN(i.left,!1),MN(i.right,!1),i=i.parent):i.left===HN||AN(i.left)?(i.ownerId===t&&(n[s++]=i),MN(i,!0),i.right===HN||AN(i.right)||(i=i.right)):i=i.left;return MN(e.root,!1),n}(this,e)}collectNodesPostOrder(){return function(e){let t=e.root;const i=[];let n=0;for(;t!==HN;)AN(t)?(MN(t.left,!1),MN(t.right,!1),t=t.parent):t.left===HN||AN(t.left)?t.right===HN||AN(t.right)?(i[n++]=t,MN(t,!0)):t=t.right:t=t.left;return MN(e.root,!1),i}(this)}insert(e){$N(this,e),this._normalizeDeltaIfNecessary()}delete(e){jN(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const s=i.start+n,o=i.end+n;i.setCachedOffsets(s,o,t)}acceptReplace(e,t,i,n){const s=function(e,t,i){let n=e.root,s=0,o=0,r=0,a=0;const l=[];let h=0;for(;n!==HN;)if(AN(n))MN(n.left,!1),MN(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;else{if(!AN(n.left)){if(o=s+n.maxEnd,o<t){MN(n,!0);continue}if(n.left!==HN){n=n.left;continue}}r=s+n.start,r>i?MN(n,!0):(a=s+n.end,a>=t&&(n.setCachedOffsets(r,a,0),l[h++]=n),MN(n,!0),n.right===HN||AN(n.right)||(s+=n.delta,n=n.right))}return MN(e.root,!1),l}(this,e,e+t);for(let e=0,t=s.length;e<t;e++){jN(this,s[e])}this._normalizeDeltaIfNecessary(),function(e,t,i,n){let s=e.root,o=0,r=0,a=0;const l=n-(i-t);for(;s!==HN;)if(AN(s))MN(s.left,!1),MN(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),ZN(s),s=s.parent;else{if(!AN(s.left)){if(r=o+s.maxEnd,r<t){MN(s,!0);continue}if(s.left!==HN){s=s.left;continue}}a=o+s.start,a>i?(s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),MN(s,!0)):(MN(s,!0),s.right===HN||AN(s.right)||(o+=s.delta,s=s.right))}MN(e.root,!1)}(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,r=s.length;o<r;o++){const r=s[o];r.start=r.cachedAbsoluteStart,r.end=r.cachedAbsoluteEnd,KN(r,e,e+t,i,n),r.maxEnd=r.end,$N(this,r)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return qN(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){let t=e.root,i=0;for(;t!==HN;)t.left===HN||AN(t.left)?t.right===HN||AN(t.right)?(t.start=i+t.start,t.end=i+t.end,t.delta=0,ZN(t),MN(t,!0),MN(t.left,!1),MN(t.right,!1),t===t.parent.right&&(i-=t.parent.delta),t=t.parent):(i+=t.delta,t=t.right):t=t.left;MN(e.root,!1)}(this))}}function UN(e,t,i,n){return e<i||!(e>i)&&(1!==n&&(2===n||t))}function KN(e,t,i,n,s){const o=function(e){return(24&e.metadata)>>>3}(e),r=0===o||2===o,a=1===o||2===o,l=i-t,h=n,c=Math.min(l,h),d=e.start;let u=!1;const g=e.end;let p=!1;t<=d&&g<=i&&function(e){return(32&e.metadata)>>>5==1}(e)&&(e.start=t,u=!0,e.end=t,p=!0);{const e=s?1:l>0?2:0;!u&&UN(d,r,t,e)&&(u=!0),!p&&UN(g,a,t,e)&&(p=!0)}if(c>0&&!s){const e=l>h?2:0;!u&&UN(d,r,t+c,e)&&(u=!0),!p&&UN(g,a,t+c,e)&&(p=!0)}{const n=s?1:0;!u&&UN(d,r,i,n)&&(e.start=t+h,u=!0),!p&&UN(g,a,i,n)&&(e.end=t+h,p=!0)}const f=h-l;u||(e.start=Math.max(0,d+f)),p||(e.end=Math.max(0,g+f)),e.start>e.end&&(e.end=e.start)}function qN(e,t,i,n,s){let o=e.root,r=0,a=0,l=0;const h=[];let c=0;for(;o!==HN;){if(AN(o)){MN(o.left,!1),MN(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==HN&&!AN(o.left)){o=o.left;continue}a=r+o.start,l=r+o.end,o.setCachedOffsets(a,l,n);let e=!0;t&&o.ownerId&&o.ownerId!==t&&(e=!1),i&&RN(o)&&(e=!1),s&&!FN(o)&&(e=!1),e&&(h[c++]=o),MN(o,!0),o.right===HN||AN(o.right)||(r+=o.delta,o=o.right)}return MN(e.root,!1),h}function $N(e,t){if(e.root===HN)return t.parent=HN,t.left=HN,t.right=HN,NN(t,0),e.root=t,e.root;!function(e,t){let i=0,n=e.root;const s=t.start,o=t.end;for(;;){if(eA(s,o,n.start+i,n.end+i)<0){if(n.left===HN){t.start-=i,t.end-=i,t.maxEnd-=i,n.left=t;break}n=n.left}else{if(n.right===HN){t.start-=i+n.delta,t.end-=i+n.delta,t.maxEnd-=i+n.delta,n.right=t;break}i+=n.delta,n=n.right}}t.parent=n,t.left=HN,t.right=HN,NN(t,1)}(e,t),JN(t.parent);let i=t;for(;i!==e.root&&1===TN(i.parent);)if(i.parent===i.parent.parent.left){const t=i.parent.parent.right;1===TN(t)?(NN(i.parent,0),NN(t,0),NN(i.parent.parent,1),i=i.parent.parent):(i===i.parent.right&&(i=i.parent,YN(e,i)),NN(i.parent,0),NN(i.parent.parent,1),XN(e,i.parent.parent))}else{const t=i.parent.parent.left;1===TN(t)?(NN(i.parent,0),NN(t,0),NN(i.parent.parent,1),i=i.parent.parent):(i===i.parent.left&&(i=i.parent,XN(e,i)),NN(i.parent,0),NN(i.parent.parent,1),YN(e,i.parent.parent))}return NN(e.root,0),t}function jN(e,t){let i,n;if(t.left===HN?(i=t.right,n=t,i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta):t.right===HN?(i=t.left,n=t):(n=function(e){for(;e.left!==HN;)e=e.left;return e}(t.right),i=n.right,i.start+=n.delta,i.end+=n.delta,i.delta+=n.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,n.delta=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0)),n===e.root)return e.root=i,NN(i,0),t.detach(),GN(),ZN(i),void(e.root.parent=HN);const s=1===TN(n);if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?i.parent=n.parent:(n.parent===t?i.parent=n:i.parent=n.parent,n.left=t.left,n.right=t.right,n.parent=t.parent,NN(n,TN(t)),t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==HN&&(n.left.parent=n),n.right!==HN&&(n.right.parent=n)),t.detach(),s)return JN(i.parent),n!==t&&(JN(n),JN(n.parent)),void GN();let o;for(JN(i),JN(i.parent),n!==t&&(JN(n),JN(n.parent));i!==e.root&&0===TN(i);)i===i.parent.left?(o=i.parent.right,1===TN(o)&&(NN(o,0),NN(i.parent,1),YN(e,i.parent),o=i.parent.right),0===TN(o.left)&&0===TN(o.right)?(NN(o,1),i=i.parent):(0===TN(o.right)&&(NN(o.left,0),NN(o,1),XN(e,o),o=i.parent.right),NN(o,TN(i.parent)),NN(i.parent,0),NN(o.right,0),YN(e,i.parent),i=e.root)):(o=i.parent.left,1===TN(o)&&(NN(o,0),NN(i.parent,1),XN(e,i.parent),o=i.parent.left),0===TN(o.left)&&0===TN(o.right)?(NN(o,1),i=i.parent):(0===TN(o.left)&&(NN(o.right,0),NN(o,1),YN(e,o),o=i.parent.left),NN(o,TN(i.parent)),NN(i.parent,0),NN(o.left,0),XN(e,i.parent),i=e.root));NN(i,0),GN()}function GN(){HN.parent=HN,HN.delta=0,HN.start=0,HN.end=0}function YN(e,t){const i=t.right;i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,t.right=i.left,i.left!==HN&&(i.left.parent=t),i.parent=t.parent,t.parent===HN?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i,ZN(t),ZN(i)}function XN(e,t){const i=t.left;t.delta-=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=i.delta,t.end-=i.delta,t.left=i.right,i.right!==HN&&(i.right.parent=t),i.parent=t.parent,t.parent===HN?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i,ZN(t),ZN(i)}function QN(e){let t=e.end;if(e.left!==HN){const i=e.left.maxEnd;i>t&&(t=i)}if(e.right!==HN){const i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function ZN(e){e.maxEnd=QN(e)}function JN(e){for(;e!==HN;){const t=QN(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function eA(e,t,i,n){return e===i?t-n:e-i}class tA{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==iA)return nA(this.right);let e=this;for(;e.parent!==iA&&e.parent.left!==e;)e=e.parent;return e.parent===iA?iA:e.parent}prev(){if(this.left!==iA)return sA(this.left);let e=this;for(;e.parent!==iA&&e.parent.right!==e;)e=e.parent;return e.parent===iA?iA:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const iA=new tA(null,0);function nA(e){for(;e.left!==iA;)e=e.left;return e}function sA(e){for(;e.right!==iA;)e=e.right;return e}function oA(e){return e===iA?0:e.size_left+e.piece.length+oA(e.right)}function rA(e){return e===iA?0:e.lf_left+e.piece.lineFeedCnt+rA(e.right)}function aA(){iA.parent=iA}function lA(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==iA&&(i.left.parent=t),i.parent=t.parent,t.parent===iA?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function hA(e,t){const i=t.left;t.left=i.right,i.right!==iA&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===iA?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function cA(e,t){let i,n;if(t.left===iA?(n=t,i=n.right):t.right===iA?(n=t,i=n.left):(n=nA(t.right),i=n.right),n===e.root)return e.root=i,i.color=0,t.detach(),aA(),void(e.root.parent=iA);const s=1===n.color;if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?(i.parent=n.parent,gA(e,i)):(n.parent===t?i.parent=n:i.parent=n.parent,gA(e,i),n.left=t.left,n.right=t.right,n.parent=t.parent,n.color=t.color,t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==iA&&(n.left.parent=n),n.right!==iA&&(n.right.parent=n),n.size_left=t.size_left,n.lf_left=t.lf_left,gA(e,n)),t.detach(),i.parent.left===i){const t=oA(i),n=rA(i);if(t!==i.parent.size_left||n!==i.parent.lf_left){const s=t-i.parent.size_left,o=n-i.parent.lf_left;i.parent.size_left=t,i.parent.lf_left=n,uA(e,i.parent,s,o)}}if(gA(e,i.parent),s)return void aA();let o;for(;i!==e.root&&0===i.color;)i===i.parent.left?(o=i.parent.right,1===o.color&&(o.color=0,i.parent.color=1,lA(e,i.parent),o=i.parent.right),0===o.left.color&&0===o.right.color?(o.color=1,i=i.parent):(0===o.right.color&&(o.left.color=0,o.color=1,hA(e,o),o=i.parent.right),o.color=i.parent.color,i.parent.color=0,o.right.color=0,lA(e,i.parent),i=e.root)):(o=i.parent.left,1===o.color&&(o.color=0,i.parent.color=1,hA(e,i.parent),o=i.parent.left),0===o.left.color&&0===o.right.color?(o.color=1,i=i.parent):(0===o.left.color&&(o.right.color=0,o.color=1,lA(e,o),o=i.parent.left),o.color=i.parent.color,i.parent.color=0,o.left.color=0,hA(e,i.parent),i=e.root));i.color=0,aA()}function dA(e,t){for(gA(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&lA(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,hA(e,t.parent.parent))}else{const i=t.parent.parent.left;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&hA(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,lA(e,t.parent.parent))}e.root.color=0}function uA(e,t,i,n){for(;t!==e.root&&t!==iA;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}function gA(e,t){let i=0,n=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(i=oA((t=t.parent).left)-t.size_left,n=rA(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=n;t!==e.root&&(0!==i||0!==n);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}}iA.parent=iA,iA.left=iA,iA.right=iA,iA.color=0;const pA=65535;function fA(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class mA{constructor(e,t,i,n,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=s}}function bA(e,t=!0){const i=[0];let n=1;for(let t=0,s=e.length;t<s;t++){const o=e.charCodeAt(t);13===o?t+1<s&&10===e.charCodeAt(t+1)?(i[n++]=t+2,t++):i[n++]=t+1:10===o&&(i[n++]=t+1)}return t?fA(i):i}class vA{constructor(e,t,i,n,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=s}}class wA{constructor(e,t){this.buffer=e,this.lineStarts=t}}class _A{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==iA&&e.iterate(e.root,(e=>(e!==iA&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class yA{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const s=i[n];(null===s.node.parent||s.nodeStartOffset>=e)&&(i[n]=null,t=!0)}if(t){const e=[];for(const t of i)null!==t&&e.push(t);this._cache=e}}}class CA{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new wA("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=iA,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let t=0,i=e.length;t<i;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=bA(e[t].buffer));const i=new vA(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),n=this.rbInsertRight(n,i)}this._searchCache=new yA(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=pA,i=t-Math.floor(21845),n=2*i;let s="",o=0;const r=[];if(this.iterate(this.root,(t=>{const a=this.getNodeContent(t),l=a.length;if(o<=i||o+l<n)return s+=a,o+=l,!0;const h=s.replace(/\r\n|\r|\n/g,e);return r.push(new wA(h,bA(h))),s=a,o=l,!0})),o>0){const t=s.replace(/\r\n|\r|\n/g,e);r.push(new wA(t,bA(t)))}this.create(r,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new _A(this,e)}equal(e){if(this.getLength()!==e.getLength())return!1;if(this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,(i=>{if(i===iA)return!0;const n=this.getNodeContent(i),s=n.length,o=e.nodeAt(t),r=e.nodeAt(t+s),a=e.getValueInRange2(o,r);return t+=s,n===a}))}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==iA;)if(n.left!==iA&&n.lf_left+1>=e)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;return i+(this.getAccumulatedValue(n,e-n.lf_left-2)+t-1)}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==iA;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,0===s.index){const e=this.getOffsetAt(i+1,1);return new Lo(i+1,n-e+1)}return new Lo(i+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===iA){const t=this.getOffsetAt(i+1,1);return new Lo(i+1,n-e-t+1)}t=t.right}return new Lo(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,n);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.substring(s+e.remainder,s+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=n.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==iA;){const e=this._buffers[i.piece.bufferIndex].buffer,n=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=e.substring(n,n+t.remainder);break}o+=e.substr(n,i.piece.length),i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,(s=>{if(s===iA)return!0;const o=s.piece;let r=o.length;if(0===r)return!0;const a=this._buffers[o.bufferIndex].buffer,l=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,c=o.end.line;let d=l[h]+o.start.column;if(n&&(10===a.charCodeAt(d)&&(d++,r--),e[t++]=i,i="",n=!1,0===r))return!0;if(h===c)return this._EOLNormalized||13!==a.charCodeAt(d+r-1)?i+=a.substr(d,r):(n=!0,i+=a.substr(d,r-1)),!0;i+=this._EOLNormalized?a.substring(d,Math.max(d,l[h+1]-this._EOLLength)):a.substring(d,l[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let n=h+1;n<c;n++)i=this._EOLNormalized?a.substring(l[n],l[n+1]-this._EOLLength):a.substring(l[n],l[n+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return this._EOLNormalized||13!==a.charCodeAt(l[c]+o.end.column-1)?i=a.substr(l[c],o.end.column):(n=!0,0===o.end.column?t--:i=a.substr(l[c],o.end.column-1)),!0})),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){const t=this.nodeAt(e);return this._getCharCode(t)}findMatchesInNode(e,t,i,n,s,o,r,a,l,h,c){const d=this._buffers[e.piece.bufferIndex],u=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,s),p=this.offsetInBuffer(e.piece.bufferIndex,o);let f;const m={line:0,column:0};let b,v;t._wordSeparators?(b=d.buffer.substring(g,p),v=e=>e+g,t.reset(0)):(b=d.buffer,v=e=>e,t.reset(g));do{if(f=t.next(b),f){if(v(f.index)>=p)return h;this.positionInBuffer(e,v(f.index)-u,m);const t=this.getLineFeedCnt(e.piece.bufferIndex,s,m),o=m.line===s.line?m.column-s.column+n:m.column+1,r=o+f[0].length;if(c[h++]=$D(new Io(i+t,o,i+t,r),f,a),v(f.index)+f[0].length>=p)return h;if(h>=l)return h}}while(f);return h}findMatchesLineByLine(e,t,i,n){const s=[];let o=0;const r=new XD(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];const l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let h=this.positionInBuffer(a.node,a.remainder);const c=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,r,e.startLineNumber,e.startColumn,h,c,t,i,n,o,s),s;let d=e.startLineNumber,u=a.node;for(;u!==l.node;){const l=this.getLineFeedCnt(u.piece.bufferIndex,h,u.piece.end);if(l>=1){const a=this._buffers[u.piece.bufferIndex].lineStarts,c=this.offsetInBuffer(u.piece.bufferIndex,u.piece.start),g=a[h.line+l],p=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(u,r,d,p,h,this.positionInBuffer(u,g-c),t,i,n,o,s),o>=n)return s;d+=l}const c=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const a=this.getLineContent(d).substring(c,e.endColumn-1);return o=this._findMatchesInLine(t,r,a,e.endLineNumber,c,o,s,i,n),s}if(o=this._findMatchesInLine(t,r,this.getLineContent(d).substr(c),d,c,o,s,i,n),o>=n)return s;d++,a=this.nodeAt2(d,1),u=a.node,h=this.positionInBuffer(a.node,a.remainder)}if(d===e.endLineNumber){const a=d===e.startLineNumber?e.startColumn-1:0,l=this.getLineContent(d).substring(a,e.endColumn-1);return o=this._findMatchesInLine(t,r,l,e.endLineNumber,a,o,s,i,n),s}const g=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(l.node,r,d,g,h,c,t,i,n,o,s),s}_findMatchesInLine(e,t,i,n,s,o,r,a,l){const h=e.wordSeparators;if(!a&&e.simpleSearch){const t=e.simpleSearch,a=t.length,c=i.length;let d=-a;for(;-1!==(d=i.indexOf(t,d+a));)if((!h||YD(h,i,c,d,a))&&(r[o++]=new Oc(new Io(n,d+1+s,n,d+1+a+s),null),o>=l))return o;return o}let c;t.reset(0);do{if(c=t.next(i),c&&(r[o++]=$D(new Io(n,c.index+1+s,n,c.index+1+c[0].length+s),c,a),o>=l))return o}while(c);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==iA){const{node:i,remainder:n,nodeStartOffset:s}=this.nodeAt(e),o=i.piece,r=o.bufferIndex,a=this.positionInBuffer(i,n);if(0===i.piece.bufferIndex&&o.end.line===this._lastChangeBufferPos.line&&o.end.column===this._lastChangeBufferPos.column&&s+o.length===e&&t.length<pA)return this.appendToNode(i,t),void this.computeBufferMetadata();if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){const e=[];let s=new vA(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),this.offsetInBuffer(r,o.end)-this.offsetInBuffer(r,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(i,n)){const e={line:s.start.line+1,column:0};s=new vA(s.bufferIndex,e,s.end,this.getLineFeedCnt(s.bufferIndex,e,s.end),s.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(i,n-1)){const s=this.positionInBuffer(i,n-1);this.deleteNodeTail(i,s),t="\r"+t,0===i.piece.length&&e.push(i)}else this.deleteNodeTail(i,a)}else this.deleteNodeTail(i,a);const l=this.createNewPieces(t);s.length>0&&this.rbInsertRight(i,s);let h=i;for(let e=0;e<l.length;e++)h=this.rbInsertRight(h,l[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,i)}else{const e=this.createNewPieces(t);let i=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)i=this.rbInsertRight(i,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===iA)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),s=i.node,o=n.node;if(s===o){const o=this.positionInBuffer(s,i.remainder),r=this.positionInBuffer(s,n.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const e=s.next();return cA(this,s),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(s,r),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),void this.computeBufferMetadata()}return i.nodeStartOffset+s.piece.length===e+t?(this.deleteNodeTail(s,o),this.validateCRLFWithNextNode(s),void this.computeBufferMetadata()):(this.shrinkNode(s,o,r),void this.computeBufferMetadata())}const r=[],a=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,a),this._searchCache.validate(e),0===s.piece.length&&r.push(s);const l=this.positionInBuffer(o,n.remainder);this.deleteNodeHead(o,l),0===o.piece.length&&r.push(o);for(let e=s.next();e!==iA&&e!==o;e=e.next())r.push(e);const h=0===s.piece.length?s.prev():s;this.deleteNodes(r),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const n=t.piece,s={line:n.start.line+1,column:0},o=new vA(n.bufferIndex,s,n.end,this.getLineFeedCnt(n.bufferIndex,s,n.end),n.length-1);t.piece=o,e+="\n",uA(this,t,-1,-1),0===t.piece.length&&i.push(t)}const n=this.createNewPieces(e);let s=this.rbInsertLeft(t,n[n.length-1]);for(let e=n.length-2;e>=0;e--)s=this.rbInsertLeft(s,n[e]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let s=n;for(let e=1;e<i.length;e++)s=this.rbInsertRight(s,i[e]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,r=o[n.start.line]+n.start.column+t;let a=n.start.line,l=n.end.line,h=0,c=0,d=0;for(;a<=l&&(h=a+(l-a)/2|0,d=o[h],h!==l);)if(c=o[h+1],r<d)l=h-1;else{if(!(r>=c))break;a=h+1}return i?(i.line=h,i.column=r-d,null):{line:h,column:r-d}}getLineFeedCnt(e,t,i){if(0===i.column)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const s=n[i.line+1],o=n[i.line]+i.column;if(s>o+1)return i.line-t.line;const r=o-1;return 13===this._buffers[e].buffer.charCodeAt(r)?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)cA(this,e[t])}createNewPieces(e){if(e.length>pA){const t=[];for(;e.length>pA;){const i=e.charCodeAt(65534);let n;13===i||i>=55296&&i<=56319?(n=e.substring(0,65534),e=e.substring(65534)):(n=e.substring(0,pA),e=e.substring(pA));const s=bA(n);t.push(new vA(this._buffers.length,{line:0,column:0},{line:s.length-1,column:n.length-s[s.length-1]},s.length-1,n.length)),this._buffers.push(new wA(n,s))}const i=bA(e);return t.push(new vA(this._buffers.length,{line:0,column:0},{line:i.length-1,column:e.length-i[i.length-1]},i.length-1,e.length)),this._buffers.push(new wA(e,i)),t}let t=this._buffers[0].buffer.length;const i=bA(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let e=0;e<i.length;e++)i[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<i.length;e++)i[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,r={line:o,column:s-this._buffers[0].lineStarts[o]},a=new vA(0,n,r,this.getLineFeedCnt(0,n,r),s-t);return this._lastChangeBufferPos=r,[a]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let i=this.root,n="";const s=this._searchCache.get2(e);if(s){i=s.node;const o=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),r=this._buffers[i.piece.bufferIndex].buffer,a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt!==e){const n=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return r.substring(a+o,a+n-t)}n=r.substring(a+o,a+i.piece.length)}else{let s=0;const o=e;for(;i!==iA;)if(i.left!==iA&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){const n=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:s,nodeStartLineNumber:o-(e-1-i.lf_left)}),a.substring(l+n,l+r-t)}if(i.lf_left+i.piece.lineFeedCnt===e-1){const t=this.getAccumulatedValue(i,e-i.lf_left-2),s=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=s.substring(o+t,o+i.piece.length);break}e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right}}for(i=i.next();i!==iA;){const e=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=e.substring(o,o+s-t),n}{const t=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substr(t,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==iA;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),s=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const t=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(t!==s)return{index:t,remainder:0}}return{index:s,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[s]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),o=t,r=this.offsetInBuffer(i.bufferIndex,o),a=this.getLineFeedCnt(i.bufferIndex,i.start,o),l=a-n,h=r-s,c=i.length+h;e.piece=new vA(i.bufferIndex,i.start,o,a,c),uA(this,e,h,l)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),o=t,r=this.getLineFeedCnt(i.bufferIndex,o,i.end),a=r-n,l=s-this.offsetInBuffer(i.bufferIndex,o),h=i.length+l;e.piece=new vA(i.bufferIndex,o,i.end,r,h),uA(this,e,l,a)}shrinkNode(e,t,i){const n=e.piece,s=n.start,o=n.end,r=n.length,a=n.lineFeedCnt,l=t,h=this.getLineFeedCnt(n.bufferIndex,n.start,l),c=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,s);e.piece=new vA(n.bufferIndex,n.start,l,h,c),uA(this,e,c-r,h-a);const d=new vA(n.bufferIndex,i,o,this.getLineFeedCnt(n.bufferIndex,i,o),this.offsetInBuffer(n.bufferIndex,o)-this.offsetInBuffer(n.bufferIndex,i)),u=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(u)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=bA(t,!1);for(let e=0;e<s.length;e++)s[e]+=n;if(i){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,r={line:o,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[o]},a=e.piece.length+t.length,l=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,r),c=h-l;e.piece=new vA(e.piece.bufferIndex,e.piece.start,r,h,a),this._lastChangeBufferPos=r,uA(this,e,t.length,c)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==iA;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){n+=t.size_left;const i={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(i),i}e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==iA;)if(i.left!==iA&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(s+t-1,o),nodeStartOffset:n}}if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:n};t-=i.piece.length-s;break}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==iA;){if(i.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(i,0),n=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,e),nodeStartOffset:n}}if(i.piece.length>=t-1){return{node:i,remainder:t-1,nodeStartOffset:this.offsetOfNode(i)}}t-=i.piece.length,i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===iA||0===e.piece.lineFeedCnt)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,s=i[n]+t.start.column;if(n===i.length-1)return!1;return!(i[n+1]>s+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(s)}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==iA&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let s;s=0===e.piece.end.column?{line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,r=e.piece.lineFeedCnt-1;e.piece=new vA(e.piece.bufferIndex,e.piece.start,s,r,o),uA(this,e,-1,-1),0===e.piece.length&&i.push(e);const a={line:t.piece.start.line+1,column:0},l=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new vA(t.piece.bufferIndex,a,t.piece.end,h,l),uA(this,t,-1,-1),0===t.piece.length&&i.push(t);const c=this.createNewPieces("\r\n");this.rbInsertRight(e,c[0]);for(let e=0;e<i.length;e++)cA(this,i[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+="\n",1===i.piece.length)cA(this,i);else{const e=i.piece,t={line:e.start.line+1,column:0},n=e.length-1,s=this.getLineFeedCnt(e.bufferIndex,t,e.end);i.piece=new vA(e.bufferIndex,t,e.end,s,n),uA(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===iA)return t(iA);const i=this.iterate(e.left,t);return i?t(e)&&this.iterate(e.right,t):i}getNodeContent(e){if(e===iA)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new tA(t,1);i.left=iA,i.right=iA,i.parent=iA,i.size_left=0,i.lf_left=0;if(this.root===iA)this.root=i,i.color=0;else if(e.right===iA)e.right=i,i.parent=e;else{const t=nA(e.right);t.left=i,i.parent=t}return dA(this,i),i}rbInsertLeft(e,t){const i=new tA(t,1);if(i.left=iA,i.right=iA,i.parent=iA,i.size_left=0,i.lf_left=0,this.root===iA)this.root=i,i.color=0;else if(e.left===iA)e.left=i,i.parent=e;else{const t=sA(e.left);t.right=i,i.parent=t}return dA(this,i),i}getContentOfSubTree(e){let t="";return this.iterate(e,(e=>(t+=this.getNodeContent(e),!0))),t}}class SA extends Qt{constructor(e,t,i,n,s,o,r){super(),this._onDidChangeContent=this._register(new ui),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._pieceTree=new CA(e,i,r)}equals(e){return e instanceof SA&&(this._BOM===e._BOM&&(this.getEOL()===e.getEOL()&&this._pieceTree.equal(e._pieceTree)))}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),s=this.getPositionAt(i);return new Io(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const o=this._getEndOfLine(t),r=this.getEOL();if(o.length!==r.length){s=(o.length-r.length)*(e.endLineNumber-e.startLineNumber)}return n-i+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,s=e.endLineNumber;for(let t=n;t<=s;t++){const o=this.getLineContent(t),r=t===n?e.startColumn-1:0,a=t===s?e.endColumn-1:o.length;for(let e=r;e<a;e++)ji(o.charCodeAt(e))?(i+=1,e+=1):i+=1}return i+=this._getEndOfLine(t).length*(s-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){const t=Pi(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Bi(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,r=!0,a=[];for(let t=0;t<e.length;t++){const i=e[t];r&&i._isTracked&&(r=!1);const l=i.range;if(i.text){let e=!0;o||(e=!on(i.text),o=e),!n&&e&&(n=nn(i.text)),!s&&e&&(s=an(i.text))}let h="",c=0,d=0,u=0;if(i.text){let e;[c,d,u,e]=XI(i.text);const t=this.getEOL();h=0===e||e===("\r\n"===t?2:1)?i.text:i.text.replace(/\r\n|\r|\n/g,t)}a[t]={sortIndex:t,identifier:i.identifier||null,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l),text:h,eolCount:c,firstLineLength:d,lastLineLength:u,forceMoveMarkers:Boolean(i.forceMoveMarkers),isAutoWhitespaceEdit:i.isAutoWhitespaceEdit||!1}}a.sort(SA._sortOpsAscending);let l=!1;for(let e=0,t=a.length-1;e<t;e++){const t=a[e].range.getEndPosition(),i=a[e+1].range.getStartPosition();if(i.isBeforeOrEqual(t)){if(i.isBefore(t))throw new Error("Overlapping ranges are not allowed!");l=!0}}r&&(a=this._reduceOperations(a));const h=i||t?SA._getInverseEditRanges(a):[],c=[];if(t)for(let e=0;e<a.length;e++){const t=a[e],i=h[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=i.startLineNumber;e<=i.endLineNumber;e++){let n="";e===i.startLineNumber&&(n=this.getLineContent(t.range.startLineNumber),-1!==Pi(n))||c.push({lineNumber:e,oldContent:n})}}let d=null;if(i){let e=0;d=[];for(let t=0;t<a.length;t++){const i=a[t],n=h[t],s=this.getValueInRange(i.range),o=i.rangeOffset+e;e+=i.text.length-s.length,d[t]={sortIndex:i.sortIndex,identifier:i.identifier,range:n,text:s,textChange:new uN(i.rangeOffset,s,o,i.text)}}l||d.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const u=this._doApplyEdits(a);let g=null;if(t&&c.length>0){c.sort(((e,t)=>t.lineNumber-e.lineNumber)),g=[];for(let e=0,t=c.length;e<t;e++){const t=c[e].lineNumber;if(e>0&&c[e-1].lineNumber===t)continue;const i=c[e].oldContent,n=this.getLineContent(t);0!==n.length&&n!==i&&-1===Pi(n)&&g.push(t)}}return this._onDidChangeContent.fire(),new Bc(d,u,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,s=new Io(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let o=i.startLineNumber,r=i.startColumn;const a=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],s=n.range;t=t||n.forceMoveMarkers,a.push(this.getValueInRange(new Io(o,r,s.startLineNumber,s.startColumn))),n.text.length>0&&a.push(n.text),o=s.endLineNumber,r=s.endColumn}const l=a.join(""),[h,c,d]=XI(l);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:l,eolCount:h,firstLineLength:c,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(SA._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],s=n.range.startLineNumber,o=n.range.startColumn,r=n.range.endLineNumber,a=n.range.endColumn;if(s===r&&o===a&&0===n.text.length)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const l=new Io(s,o,r,a);t.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){const i=e.startLineNumber,n=e.startColumn,[s,o,r]=XI(t);let a;if(t.length>0){const e=s+1;a=1===e?new Io(i,n,i,n+o):new Io(i,n,i+e-1,r+1)}else a=new Io(i,n,i,n);return a}static _getInverseEditRanges(e){const t=[];let i=0,n=0,s=null;for(let o=0,r=e.length;o<r;o++){const r=e[o];let a,l,h;if(s?s.range.endLineNumber===r.range.startLineNumber?(a=i,l=n+(r.range.startColumn-s.range.endColumn)):(a=i+(r.range.startLineNumber-s.range.endLineNumber),l=r.range.startColumn):(a=r.range.startLineNumber,l=r.range.startColumn),r.text.length>0){const e=r.eolCount+1;h=1===e?new Io(a,l,a,l+r.firstLineLength):new Io(a,l,a+e-1,r.lastLineLength+1)}else h=new Io(a,l,a,l);i=h.endLineNumber,n=h.endColumn,t.push(h),s=r}return t}static _sortOpsAscending(e,t){const i=Io.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=Io.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i}}class kA{constructor(e,t,i,n,s,o,r,a,l){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=r,this._isBasicASCII=a,this._normalizeEOL=l}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":i>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,n=i.length;e<n;e++){const n=i[e].buffer.replace(/\r\n|\r|\n/g,t),s=bA(n);i[e]=new wA(n,s)}const n=new SA(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}}class xA{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&cn(e)&&(this.BOM=hn,e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=function(e,t){e.length=0,e[0]=0;let i=1,n=0,s=0,o=0,r=!0;for(let a=0,l=t.length;a<l;a++){const h=t.charCodeAt(a);13===h?a+1<l&&10===t.charCodeAt(a+1)?(o++,e[i++]=a+2,a++):(n++,e[i++]=a+1):10===h?(s++,e[i++]=a+1):r&&9!==h&&(h<32||h>126)&&(r=!1)}const a=new mA(fA(e),n,s,o,r);return e.length=0,a}(this._tmpLineStarts,e);this.chunks.push(new wA(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=nn(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=an(e)))}finish(e=!0){return this._finish(),new kA(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=bA(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}class EA{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(0===t)return void this.insert(e,i);if(0===i)return void this.delete(e,t);const n=this._store.slice(0,e),s=this._store.slice(e+t),o=function(e,t){const i=[];for(let n=0;n<e;n++)i[n]=t;return i}(i,this._default);this._store=n.concat(o,s)}delete(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(0===t||e>=this._store.length)return;const i=[];for(let e=0;e<t;e++)i[e]=this._default;this._store=pt(this._store,e,i)}}const DA=new Uint32Array(0).buffer;class LA{static deleteBeginning(e,t){return null===e||e===DA?e:LA.delete(e,0,t)}static deleteEnding(e,t){if(null===e||e===DA)return e;const i=IA(e),n=i[i.length-2];return LA.delete(e,t,n)}static delete(e,t,i){if(null===e||e===DA||t===i)return e;const n=IA(e),s=n.length>>>1;if(0===t&&n[n.length-2]===i)return DA;const o=P_.findIndexInTokensArray(n,t),r=o>0?n[o-1<<1]:0;if(i<n[o<<1]){const r=i-t;for(let e=o;e<s;e++)n[e<<1]-=r;return e}let a,l;r!==t?(n[o<<1]=t,a=o+1<<1,l=t):(a=o<<1,l=r);const h=i-t;for(let e=o+1;e<s;e++){const t=n[e<<1]-h;t>l&&(n[a++]=t,n[a++]=n[1+(e<<1)],l=t)}if(a===n.length)return e;const c=new Uint32Array(a);return c.set(n.subarray(0,a),0),c.buffer}static append(e,t){if(t===DA)return e;if(e===DA)return t;if(null===e)return e;if(null===t)return null;const i=IA(e),n=IA(t),s=n.length>>>1,o=new Uint32Array(i.length+n.length);o.set(i,0);let r=i.length;const a=i[i.length-2];for(let e=0;e<s;e++)o[r++]=n[e<<1]+a,o[r++]=n[1+(e<<1)];return o.buffer}static insert(e,t,i){if(null===e||e===DA)return e;const n=IA(e),s=n.length>>>1;let o=P_.findIndexInTokensArray(n,t);if(o>0){n[o-1<<1]===t&&o--}for(let e=o;e<s;e++)n[e<<1]+=i;return e}}function IA(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class TA{static deserialize(e,t,i){const n=new Uint32Array(e.buffer),s=go(e,t),o=go(e,t+=4);t+=4;const r=[];for(let i=0;i<o;i++){const i=go(e,t);t+=4,r.push(n.subarray(t/4,t/4+i/4)),t+=i}return i.push(new TA(s,r)),t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new aL(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){const i=this._tokens[t];if(!(i instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=i.byteLength}return e}serialize(e,t){po(e,this._startLineNumber,t),t+=4,po(e,this._tokens.length,t),t+=4;for(let i=0;i<this._tokens.length;i++){const n=this._tokens[i];if(!(n instanceof Uint32Array))throw new Error("Not supported!");po(e,n.byteLength,t),t+=4,e.set(new Uint8Array(n.buffer),t),t+=n.byteLength}return t}applyEdit(e,t){const[i,n]=XI(t);this._acceptDeleteRange(e),this._acceptInsertText(new Lo(e.startLineNumber,e.startColumn),i,n)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const e=i-t;this._startLineNumber-=e}else if(!(t>=this._tokens.length)){if(t<0&&i>=this._tokens.length)return this._startLineNumber=0,void(this._tokens=[]);if(t!==i)if(t>=0)if(this._tokens[t]=LA.deleteEnding(this._tokens[t],e.startColumn-1),i<this._tokens.length){const n=LA.deleteBeginning(this._tokens[i],e.endColumn-1);this._tokens[t]=LA.append(this._tokens[t],n),this._tokens.splice(t+1,i-t)}else this._tokens[t]=LA.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{const n=-t;this._startLineNumber-=n,this._tokens[i]=LA.deleteBeginning(this._tokens[i],e.endColumn-1),this._tokens=this._tokens.slice(i)}else this._tokens[t]=LA.delete(this._tokens[t],e.startColumn-1,e.endColumn-1)}}_acceptInsertText(e,t,i){if(0===t&&0===i)return;const n=e.lineNumber-this._startLineNumber;n<0?this._startLineNumber+=t:n>=this._tokens.length||(0!==t?(this._tokens[n]=LA.deleteEnding(this._tokens[n],e.column-1),this._tokens[n]=LA.insert(this._tokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)):this._tokens[n]=LA.insert(this._tokens[n],e.column-1,i))}_insertLines(e,t){if(0===t)return;const i=[];for(let e=0;e<t;e++)i[e]=null;this._tokens=pt(this._tokens,e,i)}}class NA{static deserialize(e){let t=0;const i=go(e,t);t+=4;const n=[];for(let s=0;s<i;s++)t=TA.deserialize(e,t,n);return n}constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e)return void i.appendLineTokens(t)}this._tokens.push(new TA(e,[t]))}finalize(){return this._tokens}serialize(){const e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;po(e,this._tokens.length,t),t+=4;for(let i=0;i<this._tokens.length;i++)t=this._tokens[i].serialize(e,t)}}class AA{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new RA(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class MA extends AA{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;const s=this._textModel.getLineContent(n.lineNumber),o=PA(this._languageIdCodec,i,this.tokenizationSupport,s,!0,n.startState);e.add(n.lineNumber,o.tokens),this.store.setEndState(n.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const n=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),o=s.substring(0,e.column-1)+t+s.substring(e.column-1),r=PA(this._languageIdCodec,n,this.tokenizationSupport,o,!0,i),a=new P_(r.tokens,o,this._languageIdCodec);if(0===a.getCount())return 0;const l=a.findTokenIndexAtOffset(e.column-1);return a.getStandardTokenType(l)}tokenizeLineWithEdit(e,t,i){const n=e.lineNumber,s=e.column,o=this.getStartState(n);if(!o)return null;const r=this._textModel.getLineContent(n),a=r.substring(0,s-1)+i+r.substring(s-1+t),l=this._textModel.getLanguageIdAtPosition(n,0),h=PA(this._languageIdCodec,l,this.tokenizationSupport,a,!0,o);return new P_(h.tokens,a,this._languageIdCodec)}hasAccurateTokensForLine(e){return e<this.store.getFirstInvalidEndStateLineNumberOrMax()}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const t=this._textModel.getLineContent(o),i=PA(this._languageIdCodec,s,this.tokenizationSupport,t,!0,n);e.add(o,i.tokens),n=i.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let n=null;for(let s=e-1;t>1&&s>=1;s--){const e=this._textModel.getLineFirstNonWhitespaceColumn(s);if(0!==e&&(e<t&&(i.push(this._textModel.getLineContent(s)),t=e,n=this.getStartState(s),n)))break}n||(n=this.tokenizationSupport.getInitialState()),i.reverse();const s=this._textModel.getLanguageId();let o=n;for(const e of i){o=PA(this._languageIdCodec,s,this.tokenizationSupport,e,!1,o).endState}return o}}class RA{constructor(e){this.lineCount=e,this._tokenizationStateStore=new OA,this._invalidEndStatesLineNumbers=new FA,this._invalidEndStatesLineNumbers.addRange(new iL(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new ot("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new iL(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new iL(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[e]=XI(t.text);this.acceptChange(new aL(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new iL(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return null===this._invalidEndStatesLineNumbers.min}getStartState(e,t){return 1===e?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;const i=this.getStartState(t,e);if(!i)throw new ot("Start state must be defined");return{lineNumber:t,startState:i}}}class OA{constructor(){this._lineEndStates=new EA(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return(!i||!i.equals(t))&&(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}acceptChanges(e){for(const t of e){const[e]=XI(t.text);this.acceptChange(new aL(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}}class FA{constructor(){this._ranges=[]}getRanges(){return this._ranges}get min(){return 0===this._ranges.length?null:this._ranges[0].start}removeMin(){if(0===this._ranges.length)return null;const e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new iL(e.start+1,e.endExclusive),e.start}delete(e){const t=this._ranges.findIndex((t=>t.contains(e)));if(-1!==t){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new iL(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new iL(i.start,e):this._ranges.splice(t,1,new iL(i.start,e),new iL(e+1,i.endExclusive))}}addRange(e){iL.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;const s=t-e.length;for(let e=n;e<this._ranges.length;e++)this._ranges[e]=this._ranges[e].delta(s);if(i===n){const n=new iL(e.start,e.start+t);n.isEmpty||this._ranges.splice(i,0,n)}else{const t=Math.min(e.start,this._ranges[i].start),o=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),r=new iL(t,o+s);r.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,r)}}toString(){return this._ranges.map((e=>e.toString())).join(" + ")}}function PA(e,t,i,n,s,o){let r=null;if(i)try{r=i.tokenizeEncoded(n,s,o.clone())}catch(e){Ge(e)}return r||(r=hy(e.encodeLanguageId(t),o)),P_.convertToEndOffset(r.tokens,n.length),r}class BA{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,ja((e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)})))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?q(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new NA,i=si.create(!1);do{if(i.elapsed()>1)break;if(this._tokenizeOneInvalidLine(t)>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new aL(e,t))}}class zA{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),null!==n&&n!==DA)return new P_(IA(n),i,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=i.length,s[1]=WA(this._languageIdCodec.encodeLanguageId(e)),new P_(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?IA(i):null;if(0===t){let t=!1;if(n&&n.length>1&&(t=Ad.getLanguageId(n[1])!==e),!t)return DA}if(!n||0===n.length){const i=new Uint32Array(2);return i[0]=t,i[1]=WA(e),i.buffer}return n[n.length-2]=t,0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;const i=[];for(let e=0;e<t;e++)i[e]=null;this._lineTokens=pt(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,s){const o=zA._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const r=this._lineTokens[t];return this._lineTokens[t]=o,!!s&&!zA._equals(r,o)}static _equals(e,t){if(!e||!t)return!e&&!t;const i=IA(e),n=IA(t);if(i.length!==n.length)return!1;for(let e=0,t=i.length;e<t;e++)if(i[e]!==n[e])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new Lo(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=LA.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=LA.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=LA.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=LA.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(0===t&&0===i)return;const n=e.lineNumber-1;n>=this._len||(0!==t?(this._lineTokens[n]=LA.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=LA.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)):this._lineTokens[n]=LA.insert(this._lineTokens[n],e.column-1,i))}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};const i=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];let o=0,r=0,a=!1;for(let e=s.startLineNumber;e<=s.endLineNumber;e++)if(a)this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!1),r=e;else{this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!0)&&(a=!0,o=e,r=e)}a&&i.push({fromLineNumber:o,toLineNumber:r})}return{changes:i}}}function WA(e){return(32768|e|2<<24|1024)>>>0}class HA{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const n=t[0].getRange(),s=t[t.length-1].getRange();if(!n||!s)return e;i=e.plusRange(n).plusRange(s)}let n=null;for(let e=0,t=this._pieces.length;e<t;e++){const s=this._pieces[e];if(s.endLineNumber<i.startLineNumber)continue;if(s.startLineNumber>i.endLineNumber){n=n||{index:e};break}if(s.removeTokens(i),s.isEmpty()){this._pieces.splice(e,1),e--,t--;continue}if(s.endLineNumber<i.startLineNumber)continue;if(s.startLineNumber>i.endLineNumber){n=n||{index:e};continue}const[o,r]=s.split(i);o.isEmpty()?n=n||{index:e}:r.isEmpty()||(this._pieces.splice(e,1,o,r),e++,t++,n=n||{index:e})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=pt(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(0===t.getLineContent().length)return t;const i=this._pieces;if(0===i.length)return t;const n=i[HA._findFirstPieceWithLine(i,e)].getLineTokens(e);if(!n)return t;const s=t.getCount(),o=n.getCount();let r=0;const a=[];let l=0,h=0;const c=(e,t)=>{e!==h&&(h=e,a[l++]=e,a[l++]=t)};for(let e=0;e<o;e++){const i=n.getStartCharacter(e),o=n.getEndCharacter(e),a=n.getMetadata(e),l=((1&a?2048:0)|(2&a?4096:0)|(4&a?8192:0)|(8&a?16384:0)|(16&a?16744448:0)|(32&a?4278190080:0))>>>0,h=~l>>>0;for(;r<s&&t.getEndOffset(r)<=i;)c(t.getEndOffset(r),t.getMetadata(r)),r++;for(r<s&&t.getStartOffset(r)<i&&c(i,t.getMetadata(r));r<s&&t.getEndOffset(r)<o;)c(t.getEndOffset(r),t.getMetadata(r)&h|a&l),r++;if(r<s)c(o,t.getMetadata(r)&h|a&l),t.getEndOffset(r)===o&&r++;else{const e=Math.min(Math.max(0,r-1),s-1);c(o,t.getMetadata(e)&h|a&l)}}for(;r<s;)c(t.getEndOffset(r),t.getMetadata(r)),r++;return new P_(new Uint32Array(a),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let s=i+Math.floor((n-i)/2);if(e[s].endLineNumber<t)i=s+1;else{if(!(e[s].startLineNumber>t)){for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}n=s-1}}return i}acceptEdit(e,t,i,n,s){for(const o of this._pieces)o.acceptEdit(e,t,i,n,s)}}class VA extends yN{constructor(e,t,i,n,s,o){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=i,this._bracketPairsTextModelPart=n,this._languageId=s,this._attachedViews=o,this._semanticTokens=new HA(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new ui),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new ui),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new ui),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new UA(this._languageService.languageIdCodec,this._textModel,(()=>this._languageId),this._attachedViews)),this._register(this._languageConfigurationService.onDidChange((e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}))),this._register(this.grammarTokens.onDidChangeTokens((e=>{this._emitModelTokensChangedEvent(e)}))),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState((e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})))}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[e,i,n]=XI(t.text);this._semanticTokens.acceptEdit(t.range,e,i,n,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new ot("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.grammarTokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this.grammarTokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),s=n.findTokenIndexAtOffset(t.column-1),[o,r]=VA._findLanguageBoundaries(n,s),a=Ks(t.column,this.getLanguageConfiguration(n.getLanguageId(s)).getWordDefinition(),i.substring(o,r),o);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(s>0&&o===t.column-1){const[o,r]=VA._findLanguageBoundaries(n,s-1),a=Ks(t.column,this.getLanguageConfiguration(n.getLanguageId(s-1)).getWordDefinition(),i.substring(o,r),o);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let s=t;s>=0&&e.getLanguageId(s)===i;s--)n=e.getStartOffset(s);let s=e.getLineContent().length;for(let n=t,o=e.getCount();n<o&&e.getLanguageId(n)===i;n++)s=e.getEndOffset(n);return[n,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new Lo(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}}class UA extends Qt{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Zt),this._tokens=new zA(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Zt),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new ui),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new ui),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new ei),this._register(oy.onDidChange((e=>{const t=this.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&this.resetTokenization()}))),this.resetTokenization(),this._register(n.onDidChangeVisibleRanges((({view:e,state:t})=>{if(t){let i=this._attachedViewStates.get(e);i||(i=new KA((()=>this.refreshRanges(i.lineRanges))),this._attachedViewStates.set(e,i)),i.handleStateChange(t)}else this._attachedViewStates.deleteAndDispose(e)})))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new RA(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const[t,i]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const e=oy.get(this.getLanguageId());if(!e)return[null,null];let t;try{t=e.getInitialState()}catch(e){return Ge(e),[null,null]}return[e,t]})();if(this._tokenizer=t&&i?new MA(this._textModel.getLineCount(),t,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const e={setTokens:e=>{this.setTokens(e)},backgroundTokenizationFinished:()=>{if(2===this._backgroundTokenizationState)return;this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(e,t)=>{if(!this._tokenizer)return;const i=this._tokenizer.store.getFirstInvalidEndStateLineNumber();null!==i&&e>=i&&this._tokenizer?.store.setEndState(e,t)}};t&&t.createBackgroundTokenizer&&!t.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,e)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new BA(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),t?.backgroundTokenizerShouldOnlyVerifyTokens&&t.createBackgroundTokenizer?(this._debugBackgroundTokens=new zA(this._languageIdCodec),this._debugBackgroundStates=new RA(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,{setTokens:e=>{this._debugBackgroundTokens?.setMultilineTokens(e,this._textModel)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{this._debugBackgroundStates?.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[e,i]=XI(t.text);this._tokens.acceptEdit(t.range,e,i),this._debugBackgroundTokens?.acceptEdit(t.range,e,i)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=aL.joinMany([...this._attachedViewStates].map((([e,t])=>t.lineRanges)));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new NA,{heuristicTokens:n}=this._tokenizer.tokenizeHeuristically(i,e,t),s=this.setTokens(i.finalize());if(n)for(const e of s.changes)this._backgroundTokenizer.value?.requestTokens(e.fromLineNumber,e.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new NA;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const n=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(n)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const n=this._textModel.validatePosition(new Lo(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const n=this._textModel.validatePosition(e);return this.forceTokenization(n.lineNumber),this._tokenizer.tokenizeLineWithEdit(n,t,i)}get hasTokens(){return this._tokens.hasTokens}}class KA extends Qt{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new $a((()=>this.update()),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){at(this._computedLineRanges,this._lineRanges,((e,t)=>e.equals(t)))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class qA{constructor(){this.changeType=1}}class $A{static applyInjectedText(e,t){if(!t||0===t.length)return e;let i="",n=0;for(const s of t)i+=e.substring(n,s.column-1),n=s.column-1,i+=s.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new $A(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new $A(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber)),t}constructor(e,t,i,n,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=s}withText(e){return new $A(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}}class jA{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class GA{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class YA{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class XA{constructor(){this.changeType=5}}class QA{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new QA(i,n,s,o)}}class ZA{constructor(e){this.changes=e}}class JA{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=QA.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=JA._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new JA(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:i,eol:n,isEolChange:e.isEolChange&&t.isEolChange,versionId:s,isUndoing:o,isRedoing:r,isFlush:a}}}var eM;function tM(e){const t=new xA;return t.acceptChunk(e),t.finish()}function iM(e){return new Promise(((t,i)=>{const n=new xA;let s=!1;no(e,{onData:e=>{n.acceptChunk("string"==typeof e?e:e.toString())},onError:e=>{s||(s=!0,i(e))},onEnd:()=>{s||(s=!0,t(n.finish()))}})}))}function nM(e){const t=new xA;let i;for(;"string"==typeof(i=e.read());)t.acceptChunk(i);return t.finish()}function sM(e,t){let i;var n;return"string"==typeof e?i=tM(e):i=(n=e)&&"function"==typeof n.read?nM(e):e,i.create(t)}let oM=0;class rM{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;for(;;){const n=this._source.read();if(null===n)return this._eos=!0,0===t?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=65536)return e.join("")}}}const aM=()=>{throw new Error("Invalid change accessor")};let lM=class extends Qt{static{eM=this}static{this._MODEL_SYNC_LIMIT=52428800}static{this.LARGE_FILE_SIZE_THRESHOLD=20971520}static{this.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5}static{this.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456}static{this.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:zm.tabSize,indentSize:zm.indentSize,insertSpaces:zm.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:zm.trimAutoWhitespace,largeFileOptimizations:zm.largeFileOptimizations,bracketPairColorizationOptions:zm.bracketPairColorizationOptions}}static resolveOptions(e,t){if(t.detectIndentation){const i=IN(e,t.tabSize,t.insertSpaces);return new Rc({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Rc(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t.contentChangedEvent)))}onDidChangeContentOrInjectedText(e){return Gt(this._eventEmitter.fastEvent((t=>e(t))),this._onDidChangeInjectedText.event((t=>e(t))))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,n=null,s,o,r){super(),this._undoRedoService=s,this._languageService=o,this._languageConfigurationService=r,this._onWillDispose=this._register(new ui),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new yM((e=>this.handleBeforeFireDecorationsChangedEvent(e)))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new ui),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new ui),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new ui),this._eventEmitter=this._register(new CM),this._languageSelectionListener=this._register(new Zt),this._deltaDecorationCallCnt=0,this._attachedViews=new SM,oM++,this.id="$model"+oM,this.isForSimpleWidget=i.isForSimpleWidget,this._associatedResource=null==n?Fe.parse("inmemory://model/"+oM):n,this._attachedEditorCount=0;const{textBuffer:a,disposable:l}=sM(e,i.defaultEOL);this._buffer=a,this._bufferDisposable=l,this._options=eM.resolveOptions(this._buffer,i);const h="string"==typeof t?t:t.languageId;"string"!=typeof t&&(this._languageSelectionListener.value=t.onDidChange((()=>this._setLanguage(t.languageId)))),this._bracketPairs=this._register(new oN(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new xN(this,this._languageConfigurationService)),this._decorationProvider=this._register(new hN(this)),this._tokenizationTextModelPart=new VA(this._languageService,this._languageConfigurationService,this,this._bracketPairs,h,this._attachedViews);const c=this._buffer.getLineCount(),d=this._buffer.getValueLengthInRange(new Io(1,1,c,this._buffer.getLineLength(c)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=d>eM.LARGE_FILE_SIZE_THRESHOLD||c>eM.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=d>eM.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=d>eM._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=function(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}(oM),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new dM,this._commandManager=new _N(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange((()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))),this._languageService.requestRichLanguageFeatures(h)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new SA([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Qt.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}equalsTextBuffer(e){return this._assertNotDisposed(),this._buffer.equals(e)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new JA(e,t)))}setValue(e){if(this._assertNotDisposed(),null==e)throw et();const{textBuffer:t,disposable:i}=sM(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,s,o,r,a){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),isEolChange:a,versionId:this.getVersionId(),isUndoing:s,isRedoing:o,isFlush:r}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new dM,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new QA([new qA],this._versionId,!1,!1),this._createContentChanged2(new Io(1,1,s,o),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),o=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new QA([new XA],this._versionId,!1,!1),this._createContentChanged2(new Io(1,1,s,o),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const n=t[i],s=n.range,o=n.cachedAbsoluteStart-n.start,r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);n.cachedAbsoluteStart=r,n.cachedAbsoluteEnd=a,n.cachedVersionId=e,n.start=r-o,n.end=a-o,ZN(n)}}onBeforeAttached(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const i=this._buffer.getLineLength(n);i>=1e4?t+=i:e+=i}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=void 0!==e.tabSize?e.tabSize:this._options.tabSize,i=void 0!==e.indentSize?e.indentSize:this._options.originalIndentSize,n=void 0!==e.insertSpaces?e.insertSpaces:this._options.insertSpaces,s=void 0!==e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=void 0!==e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,r=new Rc({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:o});if(this._options.equals(r))return;const a=this._options.createChangeEvent(r);this._options=r,this._bracketPairs.handleDidChangeOptions(a),this._decorationProvider.handleDidChangeOptions(a),this._onDidChangeOptions.fire(a)}detectIndentation(e,t){this._assertNotDisposed();const i=IN(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),ZI(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(rn.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map((e=>({range:e.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ot("Operation would exceed heap memory limits");const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new rM(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ot("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ot("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ot("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ot("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ot("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new ot("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let s=Math.floor("number"!=typeof i||isNaN(i)?1:i),o=Math.floor("number"!=typeof n||isNaN(n)?1:n);if(s<1)s=1,o=1;else if(s>t)s=t,o=this.getLineMaxColumn(s);else if(o<=1)o=1;else{const e=this.getLineMaxColumn(s);o>=e&&(o=e)}const r=e.endLineNumber,a=e.endColumn;let l=Math.floor("number"!=typeof r||isNaN(r)?1:r),h=Math.floor("number"!=typeof a||isNaN(a)?1:a);if(l<1)l=1,h=1;else if(l>t)l=t,h=this.getLineMaxColumn(l);else if(h<=1)h=1;else{const e=this.getLineMaxColumn(l);h>=e&&(h=e)}return i===s&&n===o&&r===l&&a===h&&e instanceof Io&&!(e instanceof YE)?e:new Io(s,o,l,h)}_isValidPosition(e,t,i){if("number"!=typeof e||"number"!=typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===i){if(ji(this._buffer.getLineCharCode(e,t-2)))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor("number"!=typeof e||isNaN(e)?1:e),s=Math.floor("number"!=typeof t||isNaN(t)?1:t),o=this._buffer.getLineCount();if(n<1)return new Lo(1,1);if(n>o)return new Lo(o,this.getLineMaxColumn(o));if(s<=1)return new Lo(n,1);const r=this.getLineMaxColumn(n);if(s>=r)return new Lo(n,r);if(1===i){if(ji(this._buffer.getLineCharCode(n,s-2)))return new Lo(n,s-1)}return new Lo(n,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof Lo&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,n,0))return!1;if(!this._isValidPosition(s,o,0))return!1;if(1===t){const e=n>1?this._buffer.getLineCharCode(i,n-2):0,t=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,r=ji(e),a=ji(t);return!r&&!a}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof Io&&!(e instanceof YE)&&this._isValidRange(e,1))return e;const t=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),n=t.lineNumber,s=t.column,o=i.lineNumber,r=i.column;{const e=s>1?this._buffer.getLineCharCode(n,s-2):0,t=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,i=ji(e),a=ji(t);return i||a?n===o&&s===r?new Io(n,s-1,o,r-1):i&&a?new Io(n,s-1,o,r+1):i?new Io(n,s-1,o,r):new Io(n,s,o,r+1):new Io(n,s,o,r)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Io(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,s,o,r=999){this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every((e=>Io.isIRange(e)))&&(a=t.map((e=>this.validateRange(e))))),null===a&&(a=[this.getFullModelRange()]),a=a.sort(((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn));const l=[];let h;if(l.push(a.reduce(((e,t)=>Io.areIntersecting(e,t)?e.plusRange(t):(l.push(e),t)))),!i&&e.indexOf("\n")<0){const t=new qD(e,i,n,s).parseSearchRequest();if(!t)return[];h=e=>this.findMatchesLineByLine(e,t,o,r)}else h=t=>GD.findMatches(this,new qD(e,i,n,s),t,o,r);return l.map(h).reduce(((e,t)=>e.concat(t)),[])}findNextMatch(e,t,i,n,s,o){this._assertNotDisposed();const r=this.validatePosition(t);if(!i&&e.indexOf("\n")<0){const t=new qD(e,i,n,s).parseSearchRequest();if(!t)return null;const a=this.getLineCount();let l=new Io(r.lineNumber,r.column,a,this.getLineMaxColumn(a)),h=this.findMatchesLineByLine(l,t,o,1);return GD.findNextMatch(this,new qD(e,i,n,s),r,o),h.length>0?h[0]:(l=new Io(1,1,r.lineNumber,this.getLineMaxColumn(r.lineNumber)),h=this.findMatchesLineByLine(l,t,o,1),h.length>0?h[0]:null)}return GD.findNextMatch(this,new qD(e,i,n,s),r,o)}findPreviousMatch(e,t,i,n,s,o){this._assertNotDisposed();const r=this.validatePosition(t);return GD.findPreviousMatch(this,new qD(e,i,n,s),r,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Fc?e:new Fc(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const i=t.map((e=>({range:this.validateRange(e.range),text:e.text})));let n=!0;if(e)for(let t=0,s=e.length;t<s;t++){const s=e[t];let o=!1;for(let e=0,t=i.length;e<t;e++){const t=i[e].range,n=t.startLineNumber>s.endLineNumber,r=s.startLineNumber>t.endLineNumber;if(!n&&!r){o=!0;break}}if(!o){n=!1;break}}if(n)for(let e=0,n=this._trimAutoWhitespaceLines.length;e<n;e++){const n=this._trimAutoWhitespaceLines[e],s=this.getLineMaxColumn(n);let o=!0;for(let e=0,t=i.length;e<t;e++){const t=i[e].range,r=i[e].text;if(!(n<t.startLineNumber||n>t.endLineNumber)&&!(n===t.startLineNumber&&t.startColumn===s&&t.isEmpty()&&r&&r.length>0&&"\n"===r.charAt(0)||n===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&r&&r.length>0&&"\n"===r.charAt(r.length-1))){o=!1;break}}if(o){const e=new Io(n,1,n,s);t.push(new Fc(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n)}_applyUndo(e,t,i,n){const s=e.map((e=>{const t=this.getPositionAt(e.newPosition),i=this.getPositionAt(e.newEnd);return{range:new Io(t.lineNumber,t.column,i.lineNumber,i.column),text:e.oldText}}));this._applyUndoRedoEdits(s,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const s=e.map((e=>{const t=this.getPositionAt(e.oldPosition),i=this.getPositionAt(e.oldEnd);return{range:new Io(t.lineNumber,t.column,i.lineNumber,i.column),text:e.newText}}));this._applyUndoRedoEdits(s,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,s,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,0!==o.length){for(let e=0,t=o.length;e<t;e++){const t=o[e];this._decorationsTree.acceptReplace(t.rangeOffset,t.rangeLength,t.text.length,t.forceMoveMarkers)}const e=[];this._increaseVersionId();let t=i;for(let i=0,n=o.length;i<n;i++){const n=o[i],[r]=XI(n.text);this._onDidChangeDecorations.fire();const a=n.range.startLineNumber,l=n.range.endLineNumber,h=l-a,c=r,d=Math.min(h,c),u=c-h,g=s-t-u+a,p=g,f=g+c,m=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Lo(p,1)),this.getOffsetAt(new Lo(f,this.getLineMaxColumn(f))),0),b=$A.fromDecorations(m),v=new kt(b);for(let t=d;t>=0;t--){const i=a+t,n=g+t;v.takeFromEndWhile((e=>e.lineNumber>n));const s=v.takeFromEndWhile((e=>e.lineNumber===n));e.push(new jA(i,this.getLineContent(n),s))}if(d<h){const t=a+d;e.push(new GA(t+1,l))}if(d<c){const i=new kt(b),n=a+d,o=c-d,r=s-t-o+n+1,l=[],h=[];for(let e=0;e<o;e++){const t=r+e;h[e]=this.getLineContent(t),i.takeWhile((e=>e.lineNumber<t)),l[e]=i.takeWhile((e=>e.lineNumber===t))}e.push(new YA(n+1,a+c,h,l))}t+=u}this._emitContentChangedEvent(new QA(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===n.reverseEdits?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(null===e||0===e.size)return;const t=Array.from(e).map((e=>new jA(e,this.getLineContent(e),this._getInjectedTextInLine(e))));this._onDidChangeInjectedText.fire(new ZA(t))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(t,i)=>this._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,_M(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,i)=>0===t.length&&0===i.length?[]:this._deltaDecorationsImpl(e,t,i)};let n=null;try{n=t(i)}catch(e){Ge(e)}return i.addDecoration=aM,i.changeDecoration=aM,i.changeDecorationOptions=aM,i.removeDecoration=aM,i.deltaDecorations=aM,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ge(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:wM[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),r=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,r,s),n.setOptions(wM[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let e=0,i=t.length;e<i;e++){const i=t[e];this._decorationsTree.delete(i),delete this._decorations[i.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1,s=!1){const o=this.getLineCount(),r=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(a),h=new Io(r,1,a,l),c=this._getDecorationsInRange(h,i,n,s);return vt(c,this._decorationProvider.getDecorationsInRange(h,i,n)),c}getDecorationsInRange(e,t=0,i=!1,n=!1,s=!1){const o=this.validateRange(e),r=this._getDecorationsInRange(o,t,i,s);return vt(r,this._decorationProvider.getDecorationsInRange(o,t,i,n)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return $A.fromDecorations(n).filter((t=>t.lineNumber===e))}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,o,t,i,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(i.options.before){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),o=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,o,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!(!i.options.overviewRuler||!i.options.overviewRuler.color),s=!(!t.overviewRuler||!t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const e=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(i.options.before||t.before){const e=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}const o=n!==s,r=function(e){return!!e.after||!!e.before}(t)!==cM(i);o||r?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,n=!1){const s=this.getVersionId(),o=t.length;let r=0;const a=i.length;let l=0;this._onDidChangeDecorations.beginDeferredEmit();try{const h=new Array(a);for(;r<o||l<a;){let c=null;if(r<o){do{c=this._decorations[t[r++]]}while(!c&&r<o);if(c){if(c.options.after){const e=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(c.options.before){const e=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(c),n||this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(l<a){if(!c){const e=++this._lastDecorationId,t=`${this._instanceId};${e}`;c=new WN(t,0,0),this._decorations[t]=c}const t=i[l],o=this._validateRangeRelaxedNoAllocations(t.range),r=_M(t.options),a=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),d=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);c.ownerId=e,c.reset(s,a,d,o),c.setOptions(r),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(r),this._decorationsTree.insert(c),h[l]=c.id,l++}else c&&delete this._decorations[c.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){"string"==typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange((()=>this._setLanguage(e.languageId,t))),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function(e){let t=0;for(const i of e){if(" "!==i&&"\t"!==i)break;t++}return t}(this.getLineContent(e))+1}};function hM(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function cM(e){return!!e.options.after||!!e.options.before}lM=eM=Bs([zs(4,cd),zs(5,Ko),zs(6,Br)],lM);class dM{constructor(){this._decorationsTree0=new VN,this._decorationsTree1=new VN,this._injectedTextDecorationsTree=new VN}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)null===i.range&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,s,o){const r=e.getVersionId(),a=this._intervalSearch(t,i,n,s,r,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,i,n,s,o){const r=this._decorationsTree0.intervalSearch(e,t,i,n,s,o),a=this._decorationsTree1.intervalSearch(e,t,i,n,s,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,s,o);return r.concat(a).concat(l)}getInjectedTextInInterval(e,t,i,n){const s=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,s,!1);return this._ensureNodesHaveRanges(e,o).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAll(e,t,i,n,s){const o=e.getVersionId(),r=this._search(t,i,n,o,s);return this._ensureNodesHaveRanges(e,r)}_search(e,t,i,n,s){if(i)return this._decorationsTree1.search(e,t,n,s);{const i=this._decorationsTree0.search(e,t,n,s),o=this._decorationsTree1.search(e,t,n,s),r=this._injectedTextDecorationsTree.search(e,t,n,s);return i.concat(o).concat(r)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){cM(e)?this._injectedTextDecorationsTree.insert(e):hM(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){cM(e)?this._injectedTextDecorationsTree.delete(e):hM(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){cM(e)?this._injectedTextDecorationsTree.resolveNode(e,t):hM(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function uM(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class gM{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class pM extends gM{constructor(e){super(e),this._resolvedColor=null,this.position="number"==typeof e.position?e.position:Nc.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"==typeof e)return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class fM{constructor(e){this.position=e?.position??Ac.Center,this.persistLane=e?.persistLane}}class mM extends gM{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"==typeof e?Ng.fromHex(e):t.getColor(e.id)}}class bM{static from(e){return e instanceof bM?e:new bM(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class vM{static register(e){return new vM(e)}static createDynamic(e){return new vM(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?uM(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?uM(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new pM(e.overviewRuler):null,this.minimap=e.minimap?new mM(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new fM(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?uM(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?uM(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?uM(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?e.linesDecorationsTooltip.replace(/[<>"'&]/g,(e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?uM(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?uM(e.marginClassName):null,this.inlineClassName=e.inlineClassName?uM(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?uM(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?uM(e.afterContentClassName):null,this.after=e.after?bM.from(e.after):null,this.before=e.before?bM.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}vM.EMPTY=vM.register({description:"empty"});const wM=[vM.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),vM.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),vM.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),vM.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function _M(e){return e instanceof vM?e:vM.createDynamic(e)}class yM extends Qt{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new ui),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,0===this._deferredCnt&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class CM extends Qt{constructor(){super(),this._fastEmitter=this._register(new ui),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new ui),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}class SM{constructor(){this._onDidChangeVisibleRanges=new ui,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new kM((t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})}));return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class kM{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map((e=>new aL(e.startLineNumber,e.endLineNumber+1)));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}var xM;function EM(e){return e.toString()}class DM{constructor(e,t,i){this.model=e,this._modelEventListeners=new Xt,this.model=e,this._modelEventListeners.add(e.onWillDispose((()=>t(e)))),this._modelEventListeners.add(e.onDidChangeLanguage((t=>i(e,t))))}dispose(){this._modelEventListeners.dispose()}}const LM=R||M?1:2;class IM{constructor(e,t,i,n,s,o,r,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=s,this.sha1=o,this.versionId=r,this.alternativeVersionId=a}}let TM=class extends Qt{static{xM=this}static{this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520}constructor(e,t,i,n,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._languageService=n,this._languageConfigurationService=s,this._onModelAdded=this._register(new ui),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new ui),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new ui),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration((e=>this._updateModelOptions(e)))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let i=zm.tabSize;if(e.editor&&void 0!==e.editor.tabSize){const t=parseInt(e.editor.tabSize,10);isNaN(t)||(i=t),i<1&&(i=1)}let n="tabSize";if(e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize){const t=parseInt(e.editor.indentSize,10);isNaN(t)||(n=Math.max(t,1))}let s=zm.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(s="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));let o=LM;const r=e.eol;"\r\n"===r?o=2:"\n"===r&&(o=1);let a=zm.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(a="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));let l=zm.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(l="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));let h=zm.largeFileOptimizations;e.editor&&void 0!==e.editor.largeFileOptimizations&&(h="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations));let c=zm.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&"object"==typeof e.editor.bracketPairColorization&&(c={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:n,insertSpaces:s,detectIndentation:l,defaultEOL:o,trimAutoWhitespace:a,largeFileOptimizations:h,bracketPairColorizationOptions:c}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&"string"==typeof i&&"auto"!==i?i:3===$||2===$?"\n":"\r\n"}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e}getCreationOptions(e,t,i){const n="string"==typeof e?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[n+t];if(!s){const e=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),o=this._getEOL(t,n);s=xM._readModelOptions({editor:e,eol:o},i),this._modelCreationOptionsByLanguageAndResource[n+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let n=0,s=i.length;n<s;n++){const s=i[n],o=this._models[s],r=o.model.getLanguageId(),a=o.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:r,resource:a})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:r,resource:a}))continue;const l=t[r+a],h=this.getCreationOptions(r,a,o.model.isForSimpleWidget);xM._setModelOptionsForModel(o.model,h,l)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&qn(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(EM(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(EM(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(EM(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach((e=>{e.sharesUndoRedoStack||t.push(e)})),t.sort(((e,t)=>e.time-t.time));t.length>0&&this._disposedModelsHeapSize>e;){const e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const s=this.getCreationOptions(t,i,n),o=new lM(e,t,s,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(EM(i))){const e=this._removeDisposedModel(i),t=this._undoRedoService.getElements(i),n=this._getSHA1Computer(),s=!!n.canComputeSHA1(o)&&n.computeSHA1(o)===e.sha1;if(s||e.sharesUndoRedoStack){for(const e of t.past)wN(e)&&e.matchesResource(i)&&e.setModel(o);for(const e of t.future)wN(e)&&e.matchesResource(i)&&e.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,(e=>wN(e)&&e.matchesResource(i))),s&&(o._overwriteVersionId(e.versionId),o._overwriteAlternativeVersionId(e.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}const r=EM(o.uri);if(this._models[r])throw new Error("ModelService: Cannot add model because it already exists!");const a=new DM(o,(e=>this._onWillDispose(e)),((e,t)=>this._onDidChangeLanguage(e,t)));return this._models[r]=a,a}updateModel(e,t){const i=this.getCreationOptions(e.getLanguageId(),e.uri,e.isForSimpleWidget),{textBuffer:n,disposable:s}=sM(t,i.defaultEOL);e.equalsTextBuffer(n)||(e.pushStackElement(),e.pushEOL("\r\n"===n.getEOL()?1:0),e.pushEditOperations([],xM._computeEdits(e,n),(()=>[])),e.pushStackElement()),s.dispose()}static _commonPrefix(e,t,i,n,s,o){const r=Math.min(t,s);let a=0;for(let t=0;t<r&&e.getLineContent(i+t)===n.getLineContent(o+t);t++)a++;return a}static _commonSuffix(e,t,i,n,s,o){const r=Math.min(t,s);let a=0;for(let l=0;l<r&&e.getLineContent(i+t-l)===n.getLineContent(o+s-l);l++)a++;return a}static _computeEdits(e,t){const i=e.getLineCount(),n=t.getLineCount(),s=this._commonPrefix(e,i,1,t,n,1);if(i===n&&s===i)return[];const o=this._commonSuffix(e,i-s,s,t,n-s,s);let r,a;return o>0?(r=new Io(s+1,1,i-o+1,1),a=new Io(s+1,1,n-o+1,1)):s>0?(r=new Io(s,e.getLineMaxColumn(s),i,e.getLineMaxColumn(i)),a=new Io(s,1+t.getLineLength(s),n,1+t.getLineLength(n))):(r=new Io(1,1,i,e.getLineMaxColumn(i)),a=new Io(1,1,n,1+t.getLineLength(n))),[cC.replaceMove(r,t.getValueInRange(a,0))]}createModel(e,t,i,n=!1){let s;return s=t?this._createModelData(e,t,i,n):this._createModelData(e,Tr,i,n),this._onModelAdded.fire(s.model),s.model}destroyModel(e){const t=this._models[EM(e)];t&&t.model.dispose()}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(this._models[n].model)}return e}getModel(e){const t=EM(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===vn.file||e.scheme===vn.vscodeRemote||e.scheme===vn.vscodeUserData||e.scheme===vn.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){const t=EM(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(const i of t.past)wN(i)&&i.matchesResource(e.uri)&&(s=!0,o+=i.heapSize(e.uri),i.setModel(e.uri));for(const i of t.future)wN(i)&&i.matchesResource(e.uri)&&(s=!0,o+=i.heapSize(e.uri),i.setModel(e.uri))}}const r=xM.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,a=this._getSHA1Computer();if(s)if(n||!(o>r)&&a.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(r-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,(t=>wN(t)&&t.matchesResource(e.uri))),this._insertDisposedModel(new IM(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,o,a.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{const e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else if(!n){const e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,n=e.getLanguageId(),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);xM._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new NM}};TM=xM=Bs([zs(0,Uo),zs(1,pC),zs(2,cd),zs(3,Ko),zs(4,Br)],TM);class NM{static{this.MAX_MODEL_SIZE=10485760}canComputeSHA1(e){return e.getValueLength()<=NM.MAX_MODEL_SIZE}computeSHA1(e){const t=new rh,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}}Pm(".quick-input-widget{font-size:13px}.quick-input-widget .monaco-highlighted-label .highlight{color:#0066bf}.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight{color:#9dddff}.vs-dark .quick-input-widget .monaco-highlighted-label .highlight{color:#0097fb}.hc-black .quick-input-widget .monaco-highlighted-label .highlight{color:#f38518}.hc-light .quick-input-widget .monaco-highlighted-label .highlight{color:#0f4a85}.monaco-keybinding>.monaco-keybinding-key{background-color:hsla(0,0%,87%,.4);border:1px solid hsla(0,0%,80%,.4);border-bottom-color:hsla(0,0%,73%,.4);box-shadow:inset 0 -1px 0 hsla(0,0%,73%,.4);color:#555}.hc-black .monaco-keybinding>.monaco-keybinding-key{background-color:transparent;border:1px solid #6fc3df;box-shadow:none;color:#fff}.hc-light .monaco-keybinding>.monaco-keybinding-key{background-color:transparent;border:1px solid #0f4a85;box-shadow:none;color:#292929}.vs-dark .monaco-keybinding>.monaco-keybinding-key{background-color:hsla(0,0%,50%,.17);border:1px solid rgba(51,51,51,.6);border-bottom-color:rgba(68,68,68,.6);box-shadow:inset 0 -1px 0 rgba(68,68,68,.6);color:#ccc}",{});const AM="vs/editor/browser/editorExtensions";class MM{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let e=t.kbExpr;this.precondition&&(e=e?iu.and(e,this.precondition):this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};FC.registerKeybindingRule(i)}}mC.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Sx.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class RM extends MM{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort(((e,t)=>t.priority-e.priority)),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){const i=e.get(Ed),n=e.get(Qc);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const e=n.getContext(Uh());if(!s.when.evaluate(e))continue}const o=s.implementation(e,t);if(o){if(i.trace(`Command '${this.id}' was handled by '${s.name}'.`),"boolean"==typeof o)return;return o}}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class OM extends MM{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}var FM;!function(e){e.getEditorCommand=function(e){return PM.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return PM.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return PM.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return PM.INSTANCE.getEditorContributions().filter((t=>e.indexOf(t.id)>=0))},e.getDiffEditorContributions=function(){return PM.INSTANCE.getDiffEditorContributions()}}(FM||(FM={}));class PM{static{this.INSTANCE=new PM}constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function BM(e){return e.register(),e}Jo.add("editor.contributions",PM.INSTANCE);const zM=BM(new RM({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:yx.MenubarEditMenu,group:"1_do",title:u(AM,0,"&&Undo"),order:1},{menuId:yx.CommandPalette,group:"",title:u(AM,1,"Undo"),order:1}]}));BM(new OM(zM,{id:"default:undo",precondition:void 0}));const WM=BM(new RM({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:yx.MenubarEditMenu,group:"1_do",title:u(AM,2,"&&Redo"),order:2},{menuId:yx.CommandPalette,group:"",title:u(AM,3,"Redo"),order:1}]}));BM(new OM(WM,{id:"default:redo",precondition:void 0}));BM(new RM({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:yx.MenubarSelectionMenu,group:"1_basic",title:u(AM,4,"&&Select All"),order:1},{menuId:yx.CommandPalette,group:"",title:u(AM,5,"Select All"),order:1}]}));var HM;!function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(HM||(HM={}));const VM="workbench.contributions.quickaccess";Jo.add(VM,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort(((e,t)=>t.prefix.length-e.prefix.length)),Yt((()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)}))}getQuickAccessProviders(){return lt([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find((t=>e.startsWith(t.prefix)))||void 0||this.defaultProvider}clear(){const e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}});const UM={ctrlCmd:!1,alt:!1};var KM,qM;!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}(KM||(KM={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(qM||(qM={}));new class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===vn.file?e.resource.fsPath:e.resource?.path}};const $M=o("quickInputService");let jM=class extends Qt{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Jo.as(VM),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}pick(e="",t){return this.doShowOrPick(e,!0,t)}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){const[n,s]=this.getOrInstantiateProvider(e),o=this.visibleQuickAccess,r=o?.descriptor;if(o&&s&&r===s)return e===s.prefix||i?.preserveValue||(o.picker.value=e),void this.adjustValueSelection(o.picker,s,i);if(s&&!i?.preserveValue){let t;if(o&&r&&r!==s){const e=o.value.substr(r.prefix.length);e&&(t=`${s.prefix}${e}`)}if(!t){const e=n?.defaultFilterValue;e===HM.LAST?t=this.lastAcceptedPickerValues.get(s):"string"==typeof e&&(t=`${s.prefix}${e}`)}"string"==typeof t&&(e=t)}const a=o?.picker?.valueSelection,l=o?.picker?.value,h=new Xt,c=h.add(this.quickInputService.createQuickPick());let d;c.value=e,this.adjustValueSelection(c,s,i),c.placeholder=s?.placeholder,c.quickNavigate=i?.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!o,("number"==typeof i?.itemActivation||i?.quickNavigateConfiguration)&&(c.itemActivation=i?.itemActivation??qM.SECOND),c.contextKey=s?.contextKey,c.filterValue=e=>e.substring(s?s.prefix.length:0),t&&(d=new Za,h.add(oi.once(c.onWillAccept)((e=>{e.veto(),c.hide()})))),h.add(this.registerPickerListeners(c,n,s,e,i?.providerOptions));const u=h.add(new ki);return n&&h.add(n.provide(c,u.token,i?.providerOptions)),oi.once(c.onDidHide)((()=>{0===c.selectedItems.length&&u.cancel(),h.dispose(),d?.complete(c.selectedItems.slice(0))})),c.show(),a&&l===e&&(c.valueSelection=a),t?d?.p:void 0}adjustValueSelection(e,t,i){let n;n=i?.preserveValue?[e.value.length,e.value.length]:[t?.prefix.length??0,e.value.length],e.valueSelection=n}registerPickerListeners(e,t,i,n,s){const o=new Xt,r=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return o.add(Yt((()=>{r===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)}))),o.add(e.onDidChangeValue((e=>{const[i]=this.getOrInstantiateProvider(e);i!==t?this.show(e,{preserveValue:!0,providerOptions:s}):r.value=e}))),i&&o.add(e.onDidAccept((()=>{this.lastAcceptedPickerValues.set(i,e.value)}))),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};jM=Bs([zs(0,$M),zs(1,s)],jM);Pm(".monaco-custom-toggle{border:1px solid transparent;border-radius:3px;box-sizing:border-box;cursor:pointer;float:left;height:20px;margin-left:2px;overflow:hidden;padding:1px;user-select:none;-webkit-user-select:none;width:20px}.monaco-custom-toggle:hover{background-color:var(--vscode-inputOption-hoverBackground)}.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle:hover{border:1px dashed var(--vscode-focusBorder)}.hc-black .monaco-custom-toggle,.hc-black .monaco-custom-toggle:hover,.hc-light .monaco-custom-toggle,.hc-light .monaco-custom-toggle:hover{background:none}.monaco-custom-toggle.monaco-checkbox{background-size:16px!important;border:1px solid transparent;border-radius:3px;height:18px;margin-left:0;margin-right:9px;opacity:1;padding:0;width:18px}.monaco-action-bar .checkbox-action-item{align-items:center;display:flex}.monaco-action-bar .checkbox-action-item>.monaco-custom-toggle.monaco-checkbox{margin-right:4px}.monaco-action-bar .checkbox-action-item>.checkbox-label{font-size:12px}.monaco-custom-toggle.monaco-checkbox:not(.checked):before{visibility:hidden}",{});const GM={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class YM extends Lb{constructor(e){super(),this._onChange=this._register(new ui),this.onChange=this._onChange.event,this._onKeyDown=this._register(new ui),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Eb.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(rx().setupUpdatableHover(e.hoverDelegate??$S("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())})),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();this._onKeyDown.fire(e)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...Eb.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...Eb.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return"none"!==this.domNode.style.display}}Pm('.quick-input-widget{-webkit-app-region:no-drag;border-radius:6px;left:50%;margin-left:-300px;position:absolute;width:600px;z-index:2550}.quick-input-titlebar{align-items:center;border-radius:inherit;display:flex}.quick-input-left-action-bar{display:flex;flex:1;margin-left:4px}.quick-input-title{overflow:hidden;padding:3px 0;text-align:center;text-overflow:ellipsis}.quick-input-right-action-bar{display:flex;flex:1;margin-right:4px}.quick-input-right-action-bar>.actions-container{justify-content:flex-end}.quick-input-titlebar .monaco-action-bar .action-label.codicon{background-position:50%;background-repeat:no-repeat;padding:2px}.quick-input-description{margin:6px 6px 6px 11px}.quick-input-header .quick-input-description{flex:1;margin:4px 2px}.quick-input-header{display:flex;padding:8px 6px 2px}.quick-input-widget.hidden-input .quick-input-header{margin-bottom:0;padding:0}.quick-input-and-message{display:flex;flex-direction:column;flex-grow:1;min-width:0;position:relative}.quick-input-check-all{align-self:center;margin:0}.quick-input-filter{display:flex;flex-grow:1;position:relative}.quick-input-box{flex-grow:1}.quick-input-widget.show-checkboxes .quick-input-box,.quick-input-widget.show-checkboxes .quick-input-message{margin-left:5px}.quick-input-visible-count{left:-10000px;position:absolute}.quick-input-count{align-items:center;align-self:center;display:flex;position:absolute;right:4px}.quick-input-count .monaco-count-badge{border-radius:2px;line-height:normal;min-height:auto;padding:2px 4px;vertical-align:middle}.quick-input-action{margin-left:6px}.quick-input-action .monaco-text-button{align-items:center;display:flex;font-size:11px;height:25px;padding:0 6px}.quick-input-message{margin-top:-1px;overflow-wrap:break-word;padding:5px}.quick-input-message>.codicon{margin:0 .2em;vertical-align:text-bottom}.quick-input-message a{color:inherit}.quick-input-progress.monaco-progress-container{position:relative}.quick-input-list{line-height:22px}.quick-input-widget.hidden-input .quick-input-list{margin-top:4px;padding-bottom:4px}.quick-input-list .monaco-list{max-height:440px;overflow:hidden;padding-bottom:5px}.quick-input-list .monaco-scrollable-element{padding:0 5px}.quick-input-list .quick-input-list-entry{box-sizing:border-box;display:flex;height:100%;overflow:hidden;padding:0 6px}.quick-input-list .quick-input-list-entry.quick-input-list-separator-border{border-top-style:solid;border-top-width:1px}.quick-input-list .monaco-list-row{border-radius:3px}.quick-input-list .monaco-list-row[data-index="0"] .quick-input-list-entry.quick-input-list-separator-border{border-top-style:none}.quick-input-list .quick-input-list-label{display:flex;flex:1;height:100%;overflow:hidden}.quick-input-list .quick-input-list-checkbox{align-self:center;margin:0}.quick-input-list .quick-input-list-icon{align-items:center;background-position:0;background-repeat:no-repeat;background-size:16px;display:flex;height:22px;justify-content:center;padding-right:6px;width:16px}.quick-input-list .quick-input-list-rows{display:flex;flex:1;flex-direction:column;height:100%;margin-left:5px;overflow:hidden;text-overflow:ellipsis}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-rows{margin-left:10px}.quick-input-widget .quick-input-list .quick-input-list-checkbox{display:none}.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-checkbox{display:inline}.quick-input-list .quick-input-list-rows>.quick-input-list-row{align-items:center;display:flex}.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label,.quick-input-list .quick-input-list-rows>.quick-input-list-row .monaco-icon-label .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.quick-input-list .quick-input-list-rows>.quick-input-list-row .codicon[class*=codicon-]{vertical-align:text-bottom}.quick-input-list .quick-input-list-rows .monaco-highlighted-label>span{opacity:1}.quick-input-list .quick-input-list-entry .quick-input-list-entry-keybinding{margin-right:8px}.quick-input-list .quick-input-list-label-meta{line-height:normal;opacity:.7;overflow:hidden;text-overflow:ellipsis}.quick-input-list .monaco-list .monaco-list-row .monaco-highlighted-label .highlight{background-color:unset;color:var(--vscode-list-highlightForeground)!important;font-weight:700}.quick-input-list .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight{color:var(--vscode-list-focusHighlightForeground)!important}.quick-input-list .quick-input-list-entry .quick-input-list-separator{margin-right:4px}.quick-input-list .quick-input-list-entry-action-bar{display:flex;flex:0;overflow:visible}.quick-input-list .quick-input-list-entry-action-bar .action-label{display:none}.quick-input-list .quick-input-list-entry-action-bar .action-label.codicon{margin-right:4px;padding:0 2px 2px}.quick-input-list .quick-input-list-entry-action-bar{margin-right:4px;margin-top:1px}.quick-input-list .monaco-list-row.focused .quick-input-list-entry-action-bar .action-label,.quick-input-list .monaco-list-row.passive-focused .quick-input-list-entry-action-bar .action-label,.quick-input-list .quick-input-list-entry .quick-input-list-entry-action-bar .action-label.always-visible,.quick-input-list .quick-input-list-entry.focus-inside .quick-input-list-entry-action-bar .action-label,.quick-input-list .quick-input-list-entry:hover .quick-input-list-entry-action-bar .action-label{display:flex}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key,.quick-input-list .monaco-list-row.focused .quick-input-list-entry .quick-input-list-separator{color:inherit}.quick-input-list .monaco-list-row.focused .monaco-keybinding-key{background:none}.quick-input-list .quick-input-list-separator-as-item{font-size:12px;padding:4px 6px}.quick-input-list .quick-input-list-separator-as-item .label-name{font-weight:600}.quick-input-list .quick-input-list-separator-as-item .label-description{opacity:1!important}.quick-input-list .monaco-tree-sticky-row .quick-input-list-entry.quick-input-list-separator-as-item.quick-input-list-separator-border{border-top-style:none}.quick-input-list .monaco-tree-sticky-row{padding:0 5px}.quick-input-list .monaco-tl-twistie{display:none!important}',{});class XM{constructor(e){this.nodes=e}toString(){return this.nodes.map((e=>"string"==typeof e?e:e.label)).join("")}}XM.__decorator=Bs([YS],XM.prototype,"toString",null);const QM=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;const ZM={},JM=new Zv("quick-input-button-icon-");function eR(e,t,i){let n=e.iconClass||function(e){if(!e)return;let t;const i=e.dark.toString();return ZM[i]?t=ZM[i]:(t=JM.nextId(),tc(`.${t}, .hc-light .${t}`,`background-image: ${yc(e.light||e.dark)}`),tc(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${yc(e.dark)}`),ZM[i]=t),t}(e.iconPath);return e.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:n,enabled:!0,run:i}}function tR(e,t,i){gc(t);const n=function(e){const t=[];let i,n=0;for(;i=QM.exec(e);){i.index-n>0&&t.push(e.substring(n,i.index));const[,s,o,,r]=i;r?t.push({label:s,href:o,title:r}):t.push({label:s,href:o}),n=i.index+i[0].length}return n<e.length&&t.push(e.substring(n)),new XM(t)}(e);let s=0;for(const e of n.nodes)if("string"==typeof e)t.append(...sv(e));else{let n=e.title;!n&&e.href.startsWith("command:")?n=u("vs/platform/quickinput/browser/quickInputUtils",0,"Click to execute command '{0}'",e.href.substring(8)):n||(n=e.href);const o=bc("a",{href:e.href,title:n,tabIndex:s++},e.label);o.style.textDecoration="underline";const r=t=>{ac(t)&&lc(t,!0),i.callback(e.href)},a=i.disposables.add(new Xb(o,rc.CLICK)).event,l=i.disposables.add(new Xb(o,rc.KEY_DOWN)).event,h=oi.chain(l,(e=>e.filter((e=>{const t=new xa(e);return t.equals(10)||t.equals(3)}))));i.disposables.add(Db.addTarget(o));const c=i.disposables.add(new Xb(o,kb.Tap)).event;oi.any(a,c,h)(r,null,i.disposables),t.appendChild(o)}}let iR=class extends Qt{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},n,s){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Xt),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))})))}showHover(e,t){const i="function"==typeof this.overrideOptions?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const n=e.target instanceof HTMLElement?[e.target]:e.target.targetElements;for(const e of n)this.hoverDisposables.add(Ch(e,"keydown",(e=>{e.equals(9)&&this.hoverService.hideHover()})));const s=e.content instanceof HTMLElement?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(e){if(!this.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=e}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};iR=Bs([zs(3,Uo),zs(4,Am)],iR);class nR{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Qt.None}}renderElement(e,t,i,n){if(i.disposable?.dispose(),!i.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,i.data,n);const o=new ki,r=s.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),r.then((t=>this.renderer.renderElement(t,e,i.data,n)))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class sR{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}class oR{constructor(e,t,i,n,s={}){const o=()=>this.model,r=n.map((e=>new nR(e,o)));this.list=new sx(e,t,i,r,function(e,t){return{...t,accessibilityProvider:t.accessibilityProvider&&new sR(e,t.accessibilityProvider)}}(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return Kh(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return oi.map(this.list.onMouseClick,(({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i})))}get onMouseDblClick(){return oi.map(this.list.onMouseDblClick,(({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i})))}get onTap(){return oi.map(this.list.onTap,(({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i})))}get onPointer(){return oi.map(this.list.onPointer,(({element:e,index:t,browserEvent:i})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:i})))}get onDidChangeFocus(){return oi.map(this.list.onDidChangeFocus,(({elements:e,indexes:t,browserEvent:i})=>({elements:e.map((e=>this._model.get(e))),indexes:t,browserEvent:i})))}get onDidChangeSelection(){return oi.map(this.list.onDidChangeSelection,(({elements:e,indexes:t,browserEvent:i})=>({elements:e.map((e=>this._model.get(e))),indexes:t,browserEvent:i})))}get onContextMenu(){return oi.map(this.list.onContextMenu,(({element:e,index:t,anchor:i,browserEvent:n})=>void 0===e?{element:e,index:t,anchor:i,browserEvent:n}:{element:this._model.get(e),index:t,anchor:i,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,ut(e.length))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((e=>this.model.get(e)))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose()}}Pm(':root{--vscode-sash-size:4px;--vscode-sash-hover-size:4px}.monaco-sash{position:absolute;touch-action:none;z-index:35}.monaco-sash.disabled{pointer-events:none}.monaco-sash.mac.vertical{cursor:col-resize}.monaco-sash.vertical.minimum{cursor:e-resize}.monaco-sash.vertical.maximum{cursor:w-resize}.monaco-sash.mac.horizontal{cursor:row-resize}.monaco-sash.horizontal.minimum{cursor:s-resize}.monaco-sash.horizontal.maximum{cursor:n-resize}.monaco-sash.disabled{cursor:default!important;pointer-events:none!important}.monaco-sash.vertical{cursor:ew-resize;height:100%;top:0;width:var(--vscode-sash-size)}.monaco-sash.horizontal{cursor:ns-resize;height:var(--vscode-sash-size);left:0;width:100%}.monaco-sash:not(.disabled)>.orthogonal-drag-handle{content:" ";cursor:all-scroll;display:block;height:calc(var(--vscode-sash-size)*2);position:absolute;width:calc(var(--vscode-sash-size)*2);z-index:100}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.start,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.end{cursor:nwse-resize}.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)>.orthogonal-drag-handle.end,.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)>.orthogonal-drag-handle.start{cursor:nesw-resize}.monaco-sash.vertical>.orthogonal-drag-handle.start{left:calc(var(--vscode-sash-size)*-.5);top:calc(var(--vscode-sash-size)*-1)}.monaco-sash.vertical>.orthogonal-drag-handle.end{bottom:calc(var(--vscode-sash-size)*-1);left:calc(var(--vscode-sash-size)*-.5)}.monaco-sash.horizontal>.orthogonal-drag-handle.start{left:calc(var(--vscode-sash-size)*-1);top:calc(var(--vscode-sash-size)*-.5)}.monaco-sash.horizontal>.orthogonal-drag-handle.end{right:calc(var(--vscode-sash-size)*-1);top:calc(var(--vscode-sash-size)*-.5)}.monaco-sash:before{background:transparent;content:"";height:100%;pointer-events:none;position:absolute;width:100%}.monaco-workbench:not(.reduce-motion) .monaco-sash:before{transition:background-color .1s ease-out}.monaco-sash.active:before,.monaco-sash.hover:before{background:var(--vscode-sash-hoverBorder)}.monaco-sash.vertical:before{left:calc(50% - var(--vscode-sash-hover-size)/2);width:var(--vscode-sash-hover-size)}.monaco-sash.horizontal:before{height:var(--vscode-sash-hover-size);top:calc(50% - var(--vscode-sash-hover-size)/2)}.pointer-events-disabled{pointer-events:none!important}.monaco-sash.debug{background:cyan}.monaco-sash.debug.disabled{background:rgba(0,255,255,.2)}.monaco-sash.debug:not(.disabled)>.orthogonal-drag-handle{background:red}',{});var rR;!function(e){e.North="north",e.South="south",e.East="east",e.West="west"}(rR||(rR={}));let aR=4;const lR=new ui;let hR=300;const cR=new ui;class dR{constructor(e){this.el=e,this.disposables=new Xt}get onPointerMove(){return this.disposables.add(new Xb(lh(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Xb(lh(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}dR.__decorator=Bs([YS],dR.prototype,"onPointerMove",null),dR.__decorator=Bs([YS],dR.prototype,"onPointerUp",null);class uR{get onPointerMove(){return this.disposables.add(new Xb(this.el,kb.Change)).event}get onPointerUp(){return this.disposables.add(new Xb(this.el,kb.End)).event}constructor(e){this.el=e,this.disposables=new Xt}dispose(){this.disposables.dispose()}}uR.__decorator=Bs([YS],uR.prototype,"onPointerMove",null),uR.__decorator=Bs([YS],uR.prototype,"onPointerUp",null);class gR{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}gR.__decorator=Bs([YS],gR.prototype,"onPointerMove",null),gR.__decorator=Bs([YS],gR.prototype,"onPointerUp",null);const pR="pointer-events-disabled";class fR extends Qt{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=t=>{this.orthogonalStartDragHandleDisposables.clear(),0!==t&&(this._orthogonalStartDragHandle=dc(this.el,bc(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Yt((()=>this._orthogonalStartDragHandle.remove()))),this.orthogonalStartDragHandleDisposables.add(new Xb(this._orthogonalStartDragHandle,"mouseenter")).event((()=>fR.onMouseEnter(e)),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Xb(this._orthogonalStartDragHandle,"mouseleave")).event((()=>fR.onMouseLeave(e)),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=t=>{this.orthogonalEndDragHandleDisposables.clear(),0!==t&&(this._orthogonalEndDragHandle=dc(this.el,bc(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Yt((()=>this._orthogonalEndDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new Xb(this._orthogonalEndDragHandle,"mouseenter")).event((()=>fR.onMouseEnter(e)),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Xb(this._orthogonalEndDragHandle,"mouseleave")).event((()=>fR.onMouseLeave(e)),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=hR,this.hoverDelayer=this._register(new Fa(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new ui),this._onDidStart=this._register(new ui),this._onDidChange=this._register(new ui),this._onDidReset=this._register(new ui),this._onDidEnd=this._register(new ui),this.orthogonalStartSashDisposables=this._register(new Xt),this.orthogonalStartDragHandleDisposables=this._register(new Xt),this.orthogonalEndSashDisposables=this._register(new Xt),this.orthogonalEndDragHandleDisposables=this._register(new Xt),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=dc(e,bc(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),M&&this.el.classList.add("mac");const n=this._register(new Xb(this.el,"mousedown")).event;this._register(n((t=>this.onPointerStart(t,new dR(e))),this));const s=this._register(new Xb(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const o=this._register(new Xb(this.el,"mouseenter")).event;this._register(o((()=>fR.onMouseEnter(this))));const r=this._register(new Xb(this.el,"mouseleave")).event;this._register(r((()=>fR.onMouseLeave(this)))),this._register(Db.addTarget(this.el));const a=this._register(new Xb(this.el,kb.Start)).event;this._register(a((e=>this.onPointerStart(e,new uR(this.el))),this));const l=this._register(new Xb(this.el,kb.Tap)).event;let h;this._register(l((e=>{if(h)return clearTimeout(h),h=void 0,void this.onPointerDoublePress(e);clearTimeout(h),h=setTimeout((()=>h=void 0),250)}),this)),"number"==typeof i.size?(this.size=i.size,0===i.orientation?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=aR,this._register(lR.event((e=>{this.size=e,this.layout()})))),this._register(cR.event((e=>this.hoverDelay=e))),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,1===this.orientation?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",false),this.layout()}onPointerStart(e,t){lc(e);let i=!1;if(!e.__orthogonalSashEvent){const n=this.getOrthogonalSash(e);n&&(i=!0,e.__orthogonalSashEvent=!0,n.onPointerStart(e,new gR(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new gR(t))),!this.state)return;const n=this.el.ownerDocument.getElementsByTagName("iframe");for(const e of n)e.classList.add(pR);const s=e.pageX,o=e.pageY,r=e.altKey,a={startX:s,currentX:s,startY:o,currentY:o,altKey:r};this.el.classList.add("active"),this._onDidStart.fire(a);const l=Yh(this.el),h=()=>{let e="";e=i?"all-scroll":1===this.orientation?1===this.state?"s-resize":2===this.state?"n-resize":M?"row-resize":"ns-resize":1===this.state?"e-resize":2===this.state?"w-resize":M?"col-resize":"ew-resize",l.textContent=`* { cursor: ${e} !important; }`},c=new Xt;h(),i||this.onDidEnablementChange.event(h,null,c);t.onPointerMove((e=>{lc(e,!1);const t={startX:s,currentX:e.pageX,startY:o,currentY:e.pageY,altKey:r};this._onDidChange.fire(t)}),null,c),t.onPointerUp((e=>{lc(e,!1),this.el.removeChild(l),this.el.classList.remove("active"),this._onDidEnd.fire(),c.dispose();for(const e of n)e.classList.remove(pR)}),null,c),c.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger((()=>e.el.classList.add("hover")),e.hoverDelay).then(void 0,(()=>{})),!t&&e.linkedSash&&fR.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&fR.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){fR.onMouseLeave(this)}layout(){if(0===this.orientation){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(t&&t instanceof HTMLElement)return t.classList.contains("orthogonal-drag-handle")?t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}Pm('.monaco-split-view2{height:100%;position:relative;width:100%}.monaco-split-view2>.sash-container{height:100%;pointer-events:none;position:absolute;width:100%}.monaco-split-view2>.sash-container>.monaco-sash{pointer-events:auto}.monaco-split-view2>.monaco-scrollable-element{height:100%;width:100%}.monaco-split-view2>.monaco-scrollable-element>.split-view-container{height:100%;position:relative;white-space:nowrap;width:100%}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view{position:absolute;white-space:normal}.monaco-split-view2>.monaco-scrollable-element>.split-view-container>.split-view-view:not(.visible){display:none}.monaco-split-view2.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view{width:100%}.monaco-split-view2.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view{height:100%}.monaco-split-view2.separator-border>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{background-color:var(--separator-border);content:" ";left:0;pointer-events:none;position:absolute;top:0;z-index:5}.monaco-split-view2.separator-border.horizontal>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{height:100%;width:1px}.monaco-split-view2.separator-border.vertical>.monaco-scrollable-element>.split-view-container>.split-view-view:not(:first-child):before{height:1px;width:100%}',{});const mR={separatorBorder:Ng.transparent};class bR{set size(e){this._size=e}get size(){return this._size}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return void 0===this._cachedVisibleSize}setVisible(e,t){if(e!==this.visible){e?(this.size=Sd(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"==typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(e){console.error("Splitview: Failed to set visible view"),console.error(e)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,"number"==typeof i?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(e){console.error("Splitview: Failed to layout view"),console.error(e)}}dispose(){this.disposable.dispose()}}class vR extends bR{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class wR extends bR{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var _R,yR;!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(_R||(_R={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Auto=function(e){return{type:"auto",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(yR||(yR={}));class CR extends Qt{get contentSize(){return this._contentSize}get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce(((e,t)=>e+t.minimumSize),0)}get maximumSize(){return 0===this.length?Number.POSITIVE_INFINITY:this.viewItems.reduce(((e,t)=>e+t.maximumSize),0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map((e=>e.sash))}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=_R.Idle,this._onDidSashChange=this._register(new ui),this._onDidSashReset=this._register(new ui),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(0===this.orientation?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=dc(this.el,bc(".sash-container")),this.viewContainer=bc(".split-view-container"),this.scrollable=this._register(new Pb({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:e=>kh(lh(this.el),e)})),this.scrollableElement=this._register(new qb(this.viewContainer,{vertical:0===this.orientation?t.scrollbarVisibility??1:2,horizontal:1===this.orientation?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new Xb(this.viewContainer,"scroll")).event;this._register(i((e=>{const t=this.scrollableElement.getScrollPosition(),i=Math.abs(this.viewContainer.scrollLeft-t.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,n=Math.abs(this.viewContainer.scrollTop-t.scrollTop)<=1?void 0:this.viewContainer.scrollTop;void 0===i&&void 0===n||this.scrollableElement.setScrollPosition({scrollLeft:i,scrollTop:n})}))),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((e=>{e.scrollTopChanged&&(this.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this.viewContainer.scrollLeft=e.scrollLeft)}))),dc(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||mR),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach(((e,t)=>{const i=Mn(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},n=e.view;this.doAddView(n,i,t,!0)})),this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");if(this.state!==_R.Idle)throw new Error("Cant modify splitview");this.state=_R.Busy;try{"auto"===t?.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index});const i="split"===t?.type?this.viewItems[t.index]:void 0,n=this.viewItems.splice(e,1)[0];if(i&&(i.size+=n.size),this.viewItems.length>=1){const t=Math.max(e-1,0);this.sashItems.splice(t,1)[0].disposable.dispose()}this.relayout(),"distribute"===t?.type&&this.distributeViewSizes();const s=n.view;return n.dispose(),s}finally{this.state=_R.Idle}}removeAllViews(){if(this.state!==_R.Idle)throw new Error("Cant modify splitview");this.state=_R.Busy;try{const e=this.viewItems.splice(0,this.viewItems.length);for(const t of e)t.dispose();const t=this.sashItems.splice(0,this.sashItems.length);for(const e of t)e.disposable.dispose();return this.relayout(),e.map((e=>e.view))}finally{this.state=_R.Idle}}moveView(e,t){if(this.state!==_R.Idle)throw new Error("Cant modify splitview");const i=this.getViewCachedVisibleSize(e),n=void 0===i?this.getViewSize(e):yR.Invisible(i),s=this.removeView(e);this.addView(s,n,t)}swapViews(e,t){if(this.state!==_R.Idle)throw new Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);const i=this.getViewSize(e),n=this.getViewSize(t),s=this.removeView(t),o=this.removeView(e);this.addView(s,i,e),this.addView(o,n,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let t=0;for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],s=this.proportions[i];"number"==typeof s?t+=s:e-=n.size}for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],s=this.proportions[i];"number"==typeof s&&t>0&&(n.size=Sd(Math.round(s*e/t),n.minimumSize,n.maximumSize))}}else{const t=ut(this.viewItems.length),n=t.filter((e=>1===this.viewItems[e].priority)),s=t.filter((e=>2===this.viewItems[e].priority));this.resize(this.viewItems.length-1,e-i,void 0,n,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map((e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0)))}onSashStart({sash:e,start:t,alt:i}){for(const e of this.viewItems)e.enabled=!1;const n=this.sashItems.findIndex((t=>t.sash===e)),s=Gt(_h(this.el.ownerDocument.body,"keydown",(e=>o(this.sashDragState.current,e.altKey))),_h(this.el.ownerDocument.body,"keyup",(()=>o(this.sashDragState.current,!1)))),o=(e,t)=>{const i=this.viewItems.map((e=>e.size));let o,r,a=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(t=!t),t){if(n===this.sashItems.length-1){const e=this.viewItems[n];a=(e.minimumSize-e.size)/2,l=(e.maximumSize-e.size)/2}else{const e=this.viewItems[n+1];a=(e.size-e.maximumSize)/2,l=(e.size-e.minimumSize)/2}}if(!t){const e=ut(n,-1),t=ut(n+1,this.viewItems.length),s=e.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-i[t])),0),a=e.reduce(((e,t)=>e+(this.viewItems[t].viewMaximumSize-i[t])),0),l=0===t.length?Number.POSITIVE_INFINITY:t.reduce(((e,t)=>e+(i[t]-this.viewItems[t].minimumSize)),0),h=0===t.length?Number.NEGATIVE_INFINITY:t.reduce(((e,t)=>e+(i[t]-this.viewItems[t].viewMaximumSize)),0),c=Math.max(s,h),d=Math.min(l,a),u=this.findFirstSnapIndex(e),g=this.findFirstSnapIndex(t);if("number"==typeof u){const e=this.viewItems[u],t=Math.floor(e.viewMinimumSize/2);o={index:u,limitDelta:e.visible?c-t:c+t,size:e.size}}if("number"==typeof g){const e=this.viewItems[g],t=Math.floor(e.viewMinimumSize/2);r={index:g,limitDelta:e.visible?d+t:d-t,size:e.size}}}this.sashDragState={start:e,current:e,index:n,sizes:i,minDelta:a,maxDelta:l,alt:t,snapBefore:o,snapAfter:r,disposable:s}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:s,minDelta:o,maxDelta:r,snapBefore:a,snapAfter:l}=this.sashDragState;this.sashDragState.current=e;const h=e-i,c=this.resize(t,h,n,void 0,void 0,o,r,a,l);if(s){const e=t===this.sashItems.length-1,i=this.viewItems.map((e=>e.size)),n=e?t:t+1,s=this.viewItems[n],o=s.size-s.maximumSize,r=s.size-s.minimumSize,a=e?t-1:t+1;this.resize(a,-c,i,void 0,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const e of this.viewItems)e.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=Sd(t="number"==typeof t?t:e.size,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==_R.Idle)throw new Error("Cant modify splitview");this.state=_R.Busy;try{const i=ut(this.viewItems.length).filter((t=>t!==e)),n=[...i.filter((e=>1===this.viewItems[e].priority)),e],s=i.filter((e=>2===this.viewItems[e].priority)),o=this.viewItems[e];t=Sd(t=Math.round(t),o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(n,s)}finally{this.state=_R.Idle}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(const t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){const e=[];let t=0;for(const i of this.viewItems)i.maximumSize-i.minimumSize>0&&(e.push(i),t+=i.size);const i=Math.floor(t/e.length);for(const t of e)t.size=Sd(i,t.minimumSize,t.maximumSize);const n=ut(this.viewItems.length),s=n.filter((e=>1===this.viewItems[e].priority)),o=n.filter((e=>2===this.viewItems[e].priority));this.relayout(s,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==_R.Idle)throw new Error("Cant modify splitview");this.state=_R.Busy;try{const s=bc(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));const o=e.onDidChange((e=>this.onViewChange(l,e))),r=Gt(o,Yt((()=>this.viewContainer.removeChild(s))));let a;"number"==typeof t?a=t:("auto"===t.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index}),a="split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);const l=0===this.orientation?new vR(s,e,a,r):new wR(s,e,a,r);if(this.viewItems.splice(i,0,l),this.viewItems.length>1){const e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=0===this.orientation?new fR(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},{...e,orientation:1}):new fR(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},{...e,orientation:0}),n=0===this.orientation?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),s=oi.map(t.onDidStart,n)(this.onSashStart,this),o=oi.map(t.onDidChange,n)(this.onSashChange,this),r=oi.map(t.onDidEnd,(()=>this.sashItems.findIndex((e=>e.sash===t)))),a=r(this.onSashEnd,this),l=t.onDidReset((()=>{const e=this.sashItems.findIndex((e=>e.sash===t)),i=ut(e,-1),n=ut(e+1,this.viewItems.length),s=this.findFirstSnapIndex(i),o=this.findFirstSnapIndex(n);("number"!=typeof s||this.viewItems[s].visible)&&("number"!=typeof o||this.viewItems[o].visible)&&this._onDidSashReset.fire(e)})),h=Gt(s,o,a,l,t),c={sash:t,disposable:h};this.sashItems.splice(i-1,0,c)}let h;s.appendChild(e.element),"number"!=typeof t&&"split"===t.type&&(h=[t.index]),n||this.relayout([i],h),n||"number"==typeof t||"distribute"!==t.type||this.distributeViewSizes()}finally{this.state=_R.Idle}}relayout(e,t){const i=this.viewItems.reduce(((e,t)=>e+t.size),0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map((e=>e.size)),n,s,o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,a,l){if(e<0||e>=this.viewItems.length)return 0;const h=ut(e,-1),c=ut(e+1,this.viewItems.length);if(s)for(const e of s)mt(h,e),mt(c,e);if(n)for(const e of n)bt(h,e),bt(c,e);const d=h.map((e=>this.viewItems[e])),u=h.map((e=>i[e])),g=c.map((e=>this.viewItems[e])),p=c.map((e=>i[e])),f=h.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-i[t])),0),m=h.reduce(((e,t)=>e+(this.viewItems[t].maximumSize-i[t])),0),b=0===c.length?Number.POSITIVE_INFINITY:c.reduce(((e,t)=>e+(i[t]-this.viewItems[t].minimumSize)),0),v=0===c.length?Number.NEGATIVE_INFINITY:c.reduce(((e,t)=>e+(i[t]-this.viewItems[t].maximumSize)),0),w=Math.max(f,v,o),_=Math.min(b,m,r);let y=!1;if(a){const e=this.viewItems[a.index],i=t>=a.limitDelta;y=i!==e.visible,e.setVisible(i,a.size)}if(!y&&l){const e=this.viewItems[l.index],i=t<l.limitDelta;y=i!==e.visible,e.setVisible(i,l.size)}if(y)return this.resize(e,t,i,n,s,o,r);for(let e=0,i=t=Sd(t,w,_);e<d.length;e++){const t=d[e],n=Sd(u[e]+i,t.minimumSize,t.maximumSize);i-=n-u[e],t.size=n}for(let e=0,i=t;e<g.length;e++){const t=g[e],n=Sd(p[e]-i,t.minimumSize,t.maximumSize);i+=n-p[e],t.size=n}return t}distributeEmptySpace(e){const t=this.viewItems.reduce(((e,t)=>e+t.size),0);let i=this.size-t;const n=ut(this.viewItems.length-1,-1),s=n.filter((e=>1===this.viewItems[e].priority)),o=n.filter((e=>2===this.viewItems[e].priority));for(const e of o)mt(n,e);for(const e of s)bt(n,e);"number"==typeof e&&bt(n,e);for(let e=0;0!==i&&e<n.length;e++){const t=this.viewItems[n[e]],s=Sd(t.size+i,t.minimumSize,t.maximumSize);i-=s-t.size,t.size=s}}layoutViews(){this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach((e=>e.sash.layout())),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map((t=>e=t.size-t.minimumSize>0||e));e=!1;const i=this.viewItems.map((t=>e=t.maximumSize-t.size>0||e)),n=[...this.viewItems].reverse();e=!1;const s=n.map((t=>e=t.size-t.minimumSize>0||e)).reverse();e=!1;const o=n.map((t=>e=t.maximumSize-t.size>0||e)).reverse();let r=0;for(let e=0;e<this.sashItems.length;e++){const{sash:n}=this.sashItems[e];r+=this.viewItems[e].size;const a=!(t[e]&&o[e+1]),l=!(i[e]&&s[e+1]);if(a&&l){const i=ut(e,-1),o=ut(e+1,this.viewItems.length),a=this.findFirstSnapIndex(i),l=this.findFirstSnapIndex(o),h="number"==typeof a&&!this.viewItems[a].visible,c="number"==typeof l&&!this.viewItems[l].visible;h&&s[e]&&(r>0||this.startSnappingEnabled)?n.state=1:c&&t[e]&&(r<this._contentSize||this.endSnappingEnabled)?n.state=2:n.state=0}else n.state=a&&!l?1:!a&&l?2:3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const e=this.viewItems[t];if(e.visible&&e.snap)return t}for(const t of e){const e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=void 0===e?i.size:Math.min(e,i.size),t=void 0===t?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),jt(this.viewItems),this.viewItems=[],this.sashItems.forEach((e=>e.disposable.dispose())),this.sashItems=[],super.dispose()}}Pm('.monaco-table{display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;white-space:nowrap;width:100%}.monaco-table>.monaco-split-view2{border-bottom:1px solid transparent}.monaco-table>.monaco-list{flex:1}.monaco-table-tr{display:flex;height:100%}.monaco-table-th{font-weight:700;height:100%;overflow:hidden;text-overflow:ellipsis;width:100%}.monaco-table-td,.monaco-table-th{box-sizing:border-box;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{border-left:1px solid transparent;content:"";left:calc(var(--vscode-sash-size)/2);position:absolute;width:0}.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2,.monaco-workbench:not(.reduce-motion) .monaco-table>.monaco-split-view2 .monaco-sash.vertical:before{transition:border-color .2s ease-out}',{});class SR{static{this.TemplateId="row"}constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=SR.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map((e=>[e.templateId,e])));this.renderers=[];for(const t of e){const e=n.get(t.templateId);if(!e)throw new Error(`Table cell renderer for template id ${t.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){const t=dc(e,bc(".monaco-table-tr")),i=[],n=[];for(let e=0;e<this.columns.length;e++){const s=this.renderers[e],o=dc(t,bc(".monaco-table-td",{"data-col-index":e}));o.style.width=`${this.getColumnSize(e)}px`,i.push(o),n.push(s.renderTemplate(o))}const s={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(s),s}renderElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const o=this.columns[s].project(e);this.renderers[s].renderElement(o,t,i.cellTemplateData[s],n)}}disposeElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const o=this.renderers[s];if(o.disposeElement){const r=this.columns[s].project(e);o.disposeElement(r,t,i.cellTemplateData[s],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}vh(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}class kR extends Qt{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??oi.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new ui,this.onDidLayout=this._onDidLayout.event,this.element=bc(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(rx().setupUpdatableHover($S("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}class xR{static{this.InstanceCount=0}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,s,o){this.virtualDelegate=i,this.domId="table_id_"+ ++xR.InstanceCount,this.disposables=new Xt,this.cachedWidth=0,this.cachedHeight=0,this.domNode=dc(t,bc(`.monaco-table.${this.domId}`));const r=n.map(((e,t)=>this.disposables.add(new kR(e,t)))),a={size:r.reduce(((e,t)=>e+t.column.weight),0),views:r.map((e=>({size:e.column.weight,view:e})))};this.splitview=this.disposables.add(new CR(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:a})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const l=new SR(n,s,(e=>this.splitview.getViewSize(e)));var h;this.list=this.disposables.add(new sx(e,this.domNode,(h=i,{getHeight(e){return h.getHeight(e)},getTemplateId(){return SR.TemplateId}}),[l],o)),oi.any(...r.map((e=>e.onDidLayout)))((([e,t])=>l.layoutColumn(e,t)),null,this.disposables),this.splitview.onDidSashReset((e=>{const t=n.reduce(((e,t)=>e+t.weight),0),i=n[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,i)}),null,this.disposables),this.styleElement=Yh(this.domNode),this.style(Qk)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){e=e??Fh(this.domNode),t=t??Oh(this.domNode),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);const i=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height=`${i}px`,this.list.layout(i,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=t.join("\n"),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(e=1,t=!1,i){this.list.focusNext(e,t,i)}focusPrevious(e=1,t=!1,i){this.list.focusPrevious(e,t,i)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}}const ER="vs/base/browser/ui/findinput/findInputToggles",DR=u(ER,0,"Match Case"),LR=u(ER,1,"Match Whole Word"),IR=u(ER,2,"Use Regular Expression");class TR extends YM{constructor(e){super({icon:wg.caseSensitive,title:DR+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??$S("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class NR extends YM{constructor(e){super({icon:wg.wholeWord,title:LR+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??$S("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class AR extends YM{constructor(e){super({icon:wg.regex,title:IR+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??$S("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class MR{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class RR{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return 0!==this._currentPosition()?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return 0===this._currentPosition()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return null===this._navigator.current()}has(e){return this._history.has(e)}clear(){this._initialize([]),this._onChange()}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new MR(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach((t=>e.push(t))),e}}Symbol.iterator;Pm(".monaco-inputbox{border-radius:2px;box-sizing:border-box;display:block;font-size:inherit;padding:0;position:relative}.monaco-inputbox>.ibwrapper>.input,.monaco-inputbox>.ibwrapper>.mirror{padding:4px 6px}.monaco-inputbox>.ibwrapper{height:100%;position:relative;width:100%}.monaco-inputbox>.ibwrapper>.input{border:none;box-sizing:border-box;color:inherit;display:inline-block;font-family:inherit;font-size:inherit;height:100%;line-height:inherit;resize:none;width:100%}.monaco-inputbox>.ibwrapper>input{text-overflow:ellipsis}.monaco-inputbox>.ibwrapper>textarea.input{display:block;outline:none;scrollbar-width:none}.monaco-inputbox>.ibwrapper>textarea.input::-webkit-scrollbar{display:none}.monaco-inputbox>.ibwrapper>textarea.input.empty{white-space:nowrap}.monaco-inputbox>.ibwrapper>.mirror{word-wrap:break-word;box-sizing:border-box;display:inline-block;left:0;position:absolute;top:0;visibility:hidden;white-space:pre-wrap;width:100%}.monaco-inputbox-container{text-align:right}.monaco-inputbox-container .monaco-inputbox-message{word-wrap:break-word;box-sizing:border-box;display:inline-block;font-size:12px;line-height:17px;margin-top:-1px;overflow:hidden;padding:.4em;text-align:left;width:100%}.monaco-inputbox .monaco-action-bar{position:absolute;right:2px;top:4px}.monaco-inputbox .monaco-action-bar .action-item{margin-left:2px}.monaco-inputbox .monaco-action-bar .action-item .codicon{background-repeat:no-repeat;height:16px;width:16px}",{});const OR="vs/base/browser/ui/inputbox/inputBox",FR=bc,PR={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};class BR extends Lb{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new ui),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new ui),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=dc(e,FR(".monaco-inputbox.idle"));const n=this.options.flexibleHeight?"textarea":"input",s=dc(this.element,FR(".ibwrapper"));if(this.input=dc(s,FR(n+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,(()=>this.element.classList.add("synthetic-focus"))),this.onblur(this.input,(()=>this.element.classList.remove("synthetic-focus"))),this.options.flexibleHeight){this.maxHeight="number"==typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=dc(s,FR("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new Kb(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),dc(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((e=>this.input.scrollTop=e.scrollTop)));const t=this._register(new Xb(e.ownerDocument,"selectionchange")),i=oi.filter(t.event,(()=>{const t=e.ownerDocument.getSelection();return t?.anchorNode===s}));this._register(i(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,(()=>this.onValueChange())),this.onblur(this.input,(()=>this.onBlur())),this.onfocus(this.input,(()=>this.onFocus())),this._register(this.ignoreGesture(this.input)),setTimeout((()=>this.updateMirror()),0),this.options.actions&&(this.actionbar=this._register(new Gx(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(rx().setupUpdatableHover($S("mouse"),this.input,e))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return"number"==typeof this.cachedHeight?this.cachedHeight:Ph(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return Kh(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(null===e)return null;return{start:e,end:this.input.selectionEnd??e}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return Rh(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){t=(parseFloat(this.mirror.style.paddingLeft||"")||0)+(parseFloat(this.mirror.style.paddingRight||"")||0)}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!=typeof this.cachedContentHeight||"number"!=typeof this.cachedHeight||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if("open"===this.state&&qn(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Sc(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Rh(this.element)+"px";let i;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=dc(i,FR(".monaco-inputbox-container")),t();const n={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?Qb(this.message.content,n):function(e,t={}){const i=Zb(t);return i.textContent=e,i}(this.message.content,n);s.classList.add(this.classForType(this.message.type));const o=this.stylesForType(this.message.type);return s.style.backgroundColor=o.background??"",s.style.color=o.foreground??"",s.style.border=o.border?`1px solid ${o.border}`:"",dc(e,s),null},onHide:()=>{this.state="closed"},layout:t}),i=3===this.message.type?u(OR,0,"Error: {0}",this.message.content):2===this.message.type?u(OR,1,"Warning: {0}",this.message.content):u(OR,2,"Info: {0}",this.message.content),Sy(i),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,t=10===e.charCodeAt(e.length-1)?" ":"";(e+t).replace(/\u000c/g,"")?this.mirror.textContent=e+t:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",n=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${Sc(n,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Ph(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,s=t.value;null!==i&&null!==n&&(this.value=s.substr(0,i)+e+s.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class zR extends BR{constructor(e,t,i){const n=u(OR,3," or {0} for history","⇅"),s=u(OR,4," ({0} for history)","⇅");super(e,t,i),this._onDidFocus=this._register(new ui),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ui),this.onDidBlur=this._onDidBlur.event,this.history=new RR(i.history,100);const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const e=this.placeholder.endsWith(")")?n:s,t=this.placeholder+e;i.showPlaceholderOnFocus&&!Kh(this.input)?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver(((e,t)=>{e.forEach((e=>{e.target.textContent||o()}))})),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,(()=>o())),this.onblur(this.input,(()=>{const e=e=>{if(this.placeholder.endsWith(e)){const t=this.placeholder.slice(0,this.placeholder.length-e.length);return i.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}return!1};e(s)||e(n)}))}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){const t=this.getHistory();this.clearHistory(),e.forEach((e=>{this.history.add(e)})),t.forEach((e=>{this.history.add(e)}))}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",ky(this.value?this.value:u(OR,5,"Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,ky(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}Pm(".monaco-findInput{position:relative}.monaco-findInput .monaco-inputbox{font-size:13px;width:100%}.monaco-findInput>.controls{position:absolute;right:2px;top:3px}.vs .monaco-findInput.disabled{background-color:#e1e1e1}.vs-dark .monaco-findInput.disabled{background-color:#333}.hc-light .monaco-findInput.highlight-0 .controls,.monaco-findInput.highlight-0 .controls{animation:monaco-findInput-highlight-0 .1s linear 0s}.hc-light .monaco-findInput.highlight-1 .controls,.monaco-findInput.highlight-1 .controls{animation:monaco-findInput-highlight-1 .1s linear 0s}.hc-black .monaco-findInput.highlight-0 .controls,.vs-dark .monaco-findInput.highlight-0 .controls{animation:monaco-findInput-highlight-dark-0 .1s linear 0s}.hc-black .monaco-findInput.highlight-1 .controls,.vs-dark .monaco-findInput.highlight-1 .controls{animation:monaco-findInput-highlight-dark-1 .1s linear 0s}@keyframes monaco-findInput-highlight-0{0%{background:rgba(253,255,0,.8)}to{background:transparent}}@keyframes monaco-findInput-highlight-1{0%{background:rgba(253,255,0,.8)}99%{background:transparent}}@keyframes monaco-findInput-highlight-dark-0{0%{background:hsla(0,0%,100%,.44)}to{background:transparent}}@keyframes monaco-findInput-highlight-dark-1{0%{background:hsla(0,0%,100%,.44)}99%{background:transparent}}",{});const WR=u("vs/base/browser/ui/findinput/findInput",0,"input");class HR extends Lb{static{this.OPTION_CHANGE="optionChange"}constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Zt),this.additionalToggles=[],this._onDidOptionChange=this._register(new ui),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new ui),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new ui),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new ui),this.onInput=this._onInput.event,this._onKeyUp=this._register(new ui),this.onKeyUp=this._onKeyUp.event,this._onCaseSensitiveKeyDown=this._register(new ui),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new ui),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||WR,this.showCommonFindToggles=!!i.showCommonFindToggles;const n=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",r=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,h=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new zR(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:h,inputBoxStyles:i.inputBoxStyles}));const c=this._register(jS());if(this.showCommonFindToggles){this.regex=this._register(new AR({appendTitle:o,isChecked:!1,hoverDelegate:c,...i.toggleStyles})),this._register(this.regex.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.regex.onKeyDown((e=>{this._onRegexKeyDown.fire(e)}))),this.wholeWords=this._register(new NR({appendTitle:s,isChecked:!1,hoverDelegate:c,...i.toggleStyles})),this._register(this.wholeWords.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this.caseSensitive=this._register(new TR({appendTitle:n,isChecked:!1,hoverDelegate:c,...i.toggleStyles})),this._register(this.caseSensitive.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.caseSensitive.onKeyDown((e=>{this._onCaseSensitiveKeyDown.fire(e)})));const e=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(t=>{if(t.equals(15)||t.equals(17)||t.equals(9)){const i=e.indexOf(this.domNode.ownerDocument.activeElement);if(i>=0){let n=-1;t.equals(17)?n=(i+1)%e.length:t.equals(15)&&(n=0===i?e.length-1:i-1),t.equals(9)?(e[i].blur(),this.inputBox.focus()):n>=0&&e[n].focus(),lc(t,!0)}}}))}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(_h(this.inputBox.inputElement,"compositionstart",(e=>{this.imeSessionInProgress=!0}))),this._register(_h(this.inputBox.inputElement,"compositionend",(e=>{this.imeSessionInProgress=!1,this._onInput.fire()}))),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const e of this.additionalToggles)e.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Xt;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()}))),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){this.inputBox.paddingRight=e?0:(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce(((e,t)=>e+t.width()),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}}var VR,UR;!function(e){e[e.Expanded=0]="Expanded",e[e.Collapsed=1]="Collapsed",e[e.PreserveOrExpanded=2]="PreserveOrExpanded",e[e.PreserveOrCollapsed=3]="PreserveOrCollapsed"}(VR||(VR={})),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(UR||(UR={}));class KR extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class qR{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function $R(e){return"object"==typeof e&&"visibility"in e&&"data"in e}function jR(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function GR(e){return"boolean"==typeof e.collapsible}class YR{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new bi,this._onDidChangeCollapseState=new ui,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new ui,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new ui,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Fa(Na),this.collapseByDefault=void 0!==n.collapseByDefault&&n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=void 0!==n.autoExpandSingleChildren&&n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=It.empty(),n={}){if(0===e.length)throw new KR(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n=It.empty(),s,o=s.diffDepth??0){const{parentNode:r}=this.getParentNodeWithListIndex(t);if(!r.lastDiffIds)return this.spliceSimple(t,i,n,s);const a=[...n],l=t[t.length-1],h=new FE({getElements:()=>r.lastDiffIds},{getElements:()=>[...r.children.slice(0,l),...a,...r.children.slice(l+i)].map((t=>e.getId(t.element).toString()))}).ComputeDiff(!1);if(h.quitEarly)return r.lastDiffIds=void 0,this.spliceSimple(t,i,a,s);const c=t.slice(0,-1),d=(t,i,n)=>{if(o>0)for(let r=0;r<n;r++)t--,i--,this.spliceSmart(e,[...c,t,0],Number.MAX_SAFE_INTEGER,a[i].children,s,o-1)};let u=Math.min(r.children.length,l+i),g=a.length;for(const e of h.changes.sort(((e,t)=>t.originalStart-e.originalStart)))d(u,g,u-(e.originalStart+e.originalLength)),u=e.originalStart,g=e.modifiedStart-l,this.spliceSimple([...c,u],e.originalLength,It.slice(a,g,g+e.modifiedLength),s);d(u,g,u)}spliceSimple(e,t,i=It.empty(),{onDidCreateNode:n,onDidDeleteNode:s,diffIdentityProvider:o}){const{parentNode:r,listIndex:a,revealed:l,visible:h}=this.getParentNodeWithListIndex(e),c=[],d=It.map(i,(e=>this.createTreeNode(e,r,r.visible?1:0,l,c,n))),u=e[e.length-1];let g=0;for(let e=u;e>=0&&e<r.children.length;e--){const t=r.children[e];if(t.visible){g=t.visibleChildIndex;break}}const p=[];let f=0,m=0;for(const e of d)p.push(e),m+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=g+f++);const b=wt(r.children,u,t,p);o?r.lastDiffIds?wt(r.lastDiffIds,u,t,p.map((e=>o.getId(e.element).toString()))):r.lastDiffIds=r.children.map((e=>o.getId(e.element).toString())):r.lastDiffIds=void 0;let v=0;for(const e of b)e.visible&&v++;if(0!==v)for(let e=u+p.length;e<r.children.length;e++){const t=r.children[e];t.visible&&(t.visibleChildIndex-=v)}if(r.visibleChildrenCount+=f-v,l&&h){const e=b.reduce(((e,t)=>e+(t.visible?t.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(r,m-e),this.list.splice(a,e,c)}if(b.length>0&&s){const e=t=>{s(t),t.children.forEach(e)};b.forEach(e)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:b});let w=r;for(;w;){if(2===w.visibility){this.refilterDelayer.trigger((()=>this.refilter()));break}w=w.parent}}rerender(e){if(0===e.length)throw new KR(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}updateElementHeight(e,t){if(0===e.length)throw new KR(this.user,"Invalid tree location");const{listIndex:i}=this.getTreeNodeWithListIndex(e);this.list.updateElementHeight(i,t)}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,n)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);void 0===t&&(t=!n.collapsed);const s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,s)))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,n,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!GR(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let n=-1;for(let e=0;e<i.children.length;e++){if(i.children[e].visible){if(n>-1){n=-1;break}n=e}}n>-1&&this._setCollapseState([...e,n],t)}return o}_setListNodeCollapseState(e,t,i,n){const s=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!s)return s;const o=e.renderNodeCount,r=this.updateNodeAfterCollapseChange(e),a=o-(-1===t?0:1);return this.list.splice(t+1,a,r.slice(1)),s}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(GR(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!GR(t)&&t.recursive)for(const i of e.children)n=this._setNodeCollapseState(i,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents((()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,s,o){const r={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},a=this._filterNode(r,i);r.visibility=a,n&&s.push(r);const l=e.children||It.empty(),h=n&&0!==a&&!r.collapsed;let c=0,d=1;for(const e of l){const t=this.createTreeNode(e,r,a,h,s,o);r.children.push(t),d+=t.renderNodeCount,t.visible&&(t.visibleChildIndex=c++)}return this.allowNonCollapsibleParents||(r.collapsible=r.collapsible||r.children.length>0),r.visibleChildrenCount=c,r.visible=2===a?c>0:1===a,r.visible?r.collapsed||(r.renderNodeCount=d):(r.renderNodeCount=0,n&&s.pop()),o?.(r),r}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),0===s)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let r=!1;if(e.collapsed&&0===s)e.visibleChildrenCount=0;else{let t=0;for(const o of e.children)r=this._updateNodeAfterFilterChange(o,s,i,n&&!e.collapsed)||r,o.visible&&(o.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===s?r:1===s,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return"boolean"==typeof i?(e.filterData=void 0,i?1:0):$R(i)?(e.filterData=i.data,jR(i.visibility)):(e.filterData=void 0,jR(i))}hasTreeNode(e,t=this.root){if(!e||0===e.length)return!0;const[i,...n]=e;return!(i<0||i>t.children.length)&&this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||0===e.length)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new KR(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:s}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new KR(this.user,"Invalid tree location");const r=t.children[o];return{node:r,listIndex:i,revealed:n,visible:s&&r.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,s=!0){const[o,...r]=e;if(o<0||o>t.children.length)throw new KR(this.user,"Invalid tree location");for(let e=0;e<o;e++)i+=t.children[e].renderNodeCount;return n=n&&!t.collapsed,s=s&&t.visible,0===r.length?{parentNode:t,listIndex:i,revealed:n,visible:s}:this.getParentNodeWithListIndex(r,t.children[o],i+1,n,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}getLastElementAncestor(e=[]){const t=this.getTreeNode(e);if(0!==t.children.length)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return 0===e.children.length?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}}Pm('.monaco-tl-row{align-items:center;display:flex;height:100%;position:relative}.monaco-tl-row.disabled{cursor:default}.monaco-tl-indent{height:100%;left:16px;pointer-events:none;position:absolute;top:0}.hide-arrows .monaco-tl-indent{left:12px}.monaco-tl-indent>.indent-guide{border-left:1px solid transparent;box-sizing:border-box;display:inline-block;height:100%}.monaco-workbench:not(.reduce-motion) .monaco-tl-indent>.indent-guide{transition:border-color .1s linear}.monaco-tl-contents,.monaco-tl-twistie{height:100%}.monaco-tl-twistie{align-items:center;display:flex!important;flex-shrink:0;font-size:10px;justify-content:center;padding-right:6px;text-align:right;transform:translateX(3px);width:16px}.monaco-tl-contents{flex:1;overflow:hidden}.monaco-tl-twistie:before{border-radius:20px}.monaco-tl-twistie.collapsed:before{transform:rotate(-90deg)}.monaco-tl-twistie.codicon-tree-item-loading:before{animation:codicon-spin 1.25s steps(30) infinite}.monaco-tree-type-filter{border:1px solid var(--vscode-widget-border);border-bottom-left-radius:4px;border-bottom-right-radius:4px;display:flex;margin:0 6px;max-width:200px;padding:3px;position:absolute;top:0;z-index:100}.monaco-workbench:not(.reduce-motion) .monaco-tree-type-filter{transition:top .3s}.monaco-tree-type-filter.disabled{top:-40px!important}.monaco-tree-type-filter-grab{align-items:center;cursor:grab;display:flex!important;justify-content:center;margin-right:2px}.monaco-tree-type-filter-grab.grabbing{cursor:grabbing}.monaco-tree-type-filter-input{flex:1}.monaco-tree-type-filter-input .monaco-inputbox{height:23px}.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.input,.monaco-tree-type-filter-input .monaco-inputbox>.ibwrapper>.mirror{padding:2px 4px}.monaco-tree-type-filter-input .monaco-findInput>.controls{top:2px}.monaco-tree-type-filter-actionbar{margin-left:4px}.monaco-tree-type-filter-actionbar .monaco-action-bar .action-label{padding:2px}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container{background-color:var(--vscode-sideBar-background);height:0;left:0;position:absolute;top:0;width:100%;z-index:13}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row.monaco-list-row{background-color:var(--vscode-sideBar-background);opacity:1!important;overflow:hidden;position:absolute;width:100%}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row:hover{background-color:var(--vscode-list-hoverBackground)!important;cursor:pointer}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty,.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container.empty .monaco-tree-sticky-container-shadow{display:none}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow{bottom:-3px;height:0;left:0;position:absolute;width:100%}.monaco-list .monaco-scrollable-element .monaco-tree-sticky-container[tabindex="0"]:focus{outline:none}',{});const XR="vs/base/browser/ui/tree/abstractTree";class QR extends nk{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function ZR(e){return e instanceof nk?new QR(e):e}class JR{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Qt.None,this.disposables=new Xt}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){this.dnd.onDragStart?.(ZR(e),t)}onDragOver(e,t,i,n,s,o=!0){const r=this.dnd.onDragOver(ZR(e),t&&t.element,i,n,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return r;if(a&&"boolean"!=typeof r&&r.autoExpand&&(this.autoExpandDisposable=Wa((()=>{const e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0}),500,this.disposables)),"boolean"==typeof r||!r.accept||void 0===r.bubble||r.feedback){if(!o){return{accept:"boolean"==typeof r?r:r.accept,effect:"boolean"==typeof r?void 0:r.effect,feedback:[i]}}return r}if(1===r.bubble){const i=this.modelProvider(),o=i.getNodeLocation(t),r=i.getParentNodeLocation(o),a=i.getNode(r),l=r&&i.getListIndex(r);return this.onDragOver(e,a,l,n,s,!1)}const l=this.modelProvider(),h=l.getNodeLocation(t),c=l.getListIndex(h),d=l.getListRenderCount(h);return{...r,feedback:ut(c,c+d)}}drop(e,t,i,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(ZR(e),t&&t.element,i,n,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}class eO{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}class tO{static lift(e){return e instanceof tO?e:new tO(e)}static empty(e=0){return new tO({focus:[],selection:[],expanded:Object.create(null),scrollTop:e})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(const t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}}var iO;!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(iO||(iO={}));class nO{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Xt,this.onDidChange=oi.forEach(e,(e=>this._elements=e),this.disposables)}dispose(){this.disposables.dispose()}}class sO{static{this.DefaultIndent=8}constructor(e,t,i,n,s,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=sO.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Qt.None,this.disposables=new Xt,this.templateId=e.templateId,this.updateOptions(o),oi.map(i,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(void 0!==e.indent){const t=Sd(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[e,t]of this.renderedNodes)this.renderTreeElement(e,t)}}if(void 0!==e.renderIndentGuides){const t=e.renderIndentGuides!==iO.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[e,t]of this.renderedNodes)this._renderIndentGuides(e,t);if(this.indentGuidesDisposable.dispose(),t){const e=new Xt;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}void 0!==e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=dc(e,bc(".monaco-tl-row")),i=dc(t,bc(".monaco-tl-indent")),n=dc(t,bc(".monaco-tl-twistie")),s=dc(t,bc(".monaco-tl-contents")),o=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:n,indentGuidesDisposable:Qt.None,templateData:o}}renderElement(e,t,i,n){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,i.templateData,n),"number"==typeof n&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=sO.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=i+this.indent-16+"px",e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Eb.asClassNameArray(wg.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...Eb.asClassNameArray(wg.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(vh(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Xt,n=this.modelProvider();for(;;){const s=n.getNodeLocation(e),o=n.getParentNodeLocation(s);if(!o)break;const r=n.getNode(o),a=bc(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(r)&&a.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(r,a),i.add(Yt((()=>this.renderedIndentGuides.delete(r,a)))),e=r}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach((e=>{const n=i.getNodeLocation(e);try{const s=i.getParentNodeLocation(n);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):s&&t.add(i.getNode(s))}catch{}})),this.activeIndentNodes.forEach((e=>{t.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),t.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),jt(this.disposables)}}class oO{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Xt,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const n=this._filter.filter(e,t);if(i="boolean"==typeof n?n?1:0:$R(n)?jR(n.visibility):n,0===i)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Fv.Default,visibility:i};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const e of s){const t=e&&e.toString();if(void 0===t)return{data:Fv.Default,visibility:i};let n;if(this.tree.findMatchType===cO.Contiguous){const e=t.toLowerCase().indexOf(this._lowercasePattern);if(e>-1){n=[Number.MAX_SAFE_INTEGER,0];for(let t=this._lowercasePattern.length;t>0;t--)n.push(e+t-1)}}else n=Bv(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(n)return this._matchCount++,1===s.length?{data:n,visibility:i}:{data:{label:t,score:n},visibility:i}}return this.tree.findMode===hO.Filter?"number"==typeof this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Fv.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){jt(this.disposables)}}class rO extends YM{constructor(e){super({icon:wg.listFilter,title:u(XR,0,"Filter"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??$S("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class aO extends YM{constructor(e){super({icon:wg.searchFuzzy,title:u(XR,1,"Fuzzy Match"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??$S("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}const lO={inputBoxStyles:PR,toggleStyles:GM,listFilterWidgetBackground:void 0,listFilterWidgetNoMatchesOutline:void 0,listFilterWidgetOutline:void 0,listFilterWidgetShadow:void 0};var hO,cO;!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(hO||(hO={})),function(e){e[e.Fuzzy=0]="Fuzzy",e[e.Contiguous=1]="Contiguous"}(cO||(cO={}));class dO extends Qt{set mode(e){this.modeToggle.checked=e===hO.Filter,this.findInput.inputBox.setPlaceHolder(e===hO.Filter?u(XR,2,"Type to filter"):u(XR,3,"Type to search"))}set matchType(e){this.matchTypeToggle.checked=e===cO.Fuzzy}get value(){return this.findInput.inputBox.value}set value(e){this.findInput.inputBox.value=e}constructor(e,t,i,n,s,o){super(),this.tree=t,this.elements=Ic(".monaco-tree-type-filter",[Ic(".monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab",{tabIndex:0}),Ic(".monaco-tree-type-filter-input@findInput"),Ic(".monaco-tree-type-filter-actionbar@actionbar")]),this.width=0,this.right=0,this.top=0,this._onDidDisable=new ui,this.onDidDisable=this._onDidDisable.event,e.appendChild(this.elements.root),this._register(Yt((()=>e.removeChild(this.elements.root))));const r=o?.styles??lO;r.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=r.listFilterWidgetBackground),r.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${r.listFilterWidgetShadow}`);const a=this._register(jS());this.modeToggle=this._register(new rO({...r.toggleStyles,isChecked:n===hO.Filter,hoverDelegate:a})),this.matchTypeToggle=this._register(new aO({...r.toggleStyles,isChecked:s===cO.Fuzzy,hoverDelegate:a})),this.onDidChangeMode=oi.map(this.modeToggle.onChange,(()=>this.modeToggle.checked?hO.Filter:hO.Highlight),this._store),this.onDidChangeMatchType=oi.map(this.matchTypeToggle.onChange,(()=>this.matchTypeToggle.checked?cO.Fuzzy:cO.Contiguous),this._store),this.findInput=this._register(new HR(this.elements.findInput,i,{label:u(XR,3,"Type to search"),additionalToggles:[this.modeToggle,this.matchTypeToggle],showCommonFindToggles:!1,inputBoxStyles:r.inputBoxStyles,toggleStyles:r.toggleStyles,history:o?.history})),this.actionbar=this._register(new Gx(this.elements.actionbar)),this.mode=n;const l=this._register(new Xb(this.findInput.inputBox.inputElement,"keydown")),h=oi.chain(l.event,(e=>e.map((e=>new xa(e)))));this._register(h((e=>e.equals(3)?(e.preventDefault(),e.stopPropagation(),this.findInput.inputBox.addToHistory(),void this.tree.domFocus()):e.equals(18)?(e.preventDefault(),e.stopPropagation(),void(this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue())):e.equals(16)?(e.preventDefault(),e.stopPropagation(),void this.findInput.inputBox.showPreviousValue()):void 0)));const c=this._register(new FS("close",u(XR,4,"Close"),"codicon codicon-close",!0,(()=>this.dispose())));this.actionbar.push(c,{icon:!0,label:!1});const d=this._register(new Xb(this.elements.grab,"mousedown"));this._register(d.event((e=>{const t=new Xt,i=t.add(new Xb(lh(e),"mousemove")),n=t.add(new Xb(lh(e),"mouseup")),s=this.right,o=e.pageX,r=this.top,a=e.pageY;this.elements.grab.classList.add("grabbing");const l=this.elements.root.style.transition;this.elements.root.style.transition="unset";const h=e=>{const t=e.pageX-o;this.right=s-t;const i=e.pageY-a;this.top=r+i,this.layout()};t.add(i.event(h)),t.add(n.event((e=>{h(e),this.elements.grab.classList.remove("grabbing"),this.elements.root.style.transition=l,t.dispose()})))})));const g=oi.chain(this._register(new Xb(this.elements.grab,"keydown")).event,(e=>e.map((e=>new xa(e)))));this._register(g((e=>{let t,i;if(15===e.keyCode?t=Number.POSITIVE_INFINITY:17===e.keyCode?t=0:10===e.keyCode&&(t=0===this.right?Number.POSITIVE_INFINITY:0),16===e.keyCode?i=0:18===e.keyCode&&(i=Number.POSITIVE_INFINITY),void 0!==t&&(e.preventDefault(),e.stopPropagation(),this.right=t,this.layout()),void 0!==i){e.preventDefault(),e.stopPropagation(),this.top=i;const t=this.elements.root.style.transition;this.elements.root.style.transition="unset",this.layout(),setTimeout((()=>{this.elements.root.style.transition=t}),0)}}))),this.onDidChangeValue=this.findInput.onDidChange}getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}layout(e=this.width){this.width=e,this.right=Sd(this.right,0,Math.max(0,e-212)),this.elements.root.style.right=`${this.right}px`,this.top=Sd(this.top,0,24),this.elements.root.style.top=`${this.top}px`}showMessage(e){this.findInput.showMessage(e)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await za(300),super.dispose()}}class uO{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n,s,o={}){this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=s,this.options=o,this._pattern="",this.previousPattern="",this.width=0,this._onDidChangeMode=new ui,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new ui,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new ui,this.onDidChangePattern=this._onDidChangePattern.event,this._onDidChangeOpenState=new ui,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Xt,this.disposables=new Xt,this._mode=e.options.defaultFindMode??hO.Highlight,this._matchType=e.options.defaultFindMatchType??cO.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){void 0!==e.defaultFindMode&&(this.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.matchType=e.defaultFindMatchType)}open(){if(this.widget)return this.widget.focus(),void this.widget.select();this.widget=new dO(this.view.getHTMLElement(),this.tree,this.contextViewProvider,this.mode,this.matchType,{...this.options,history:this._history}),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidChangeMode((e=>this.mode=e),void 0,this.enabledDisposables),this.widget.onDidChangeMatchType((e=>this.matchType=e),void 0,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.layout(this.width),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(""),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,(e=>!Fv.isDefault(e.filterData)));const t=this.tree.getFocus();if(t.length>0){const e=t[0];null===this.tree.getRelativeTop(e)&&this.tree.reveal(e,.5)}this.render()}onDidSpliceModel(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}render(){const e=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&e?this.tree.options.showNotFoundMessage??1?this.widget?.showMessage({type:2,content:u(XR,5,"No elements found.")}):this.widget?.showMessage({type:2}):this.widget?.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||(this.filter.totalCount>0&&this.filter.matchCount<=1||!Fv.isDefault(e.filterData))}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function gO(e,t){return e.position===t.position&&pO(e,t)}function pO(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}class fO{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return at(this.stickyNodes,e.stickyNodes,gO)}lastNodePartiallyVisible(){if(0===this.count)return!1;const e=this.stickyNodes[this.count-1];if(1===this.count)return 0!==e.position;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!at(this.stickyNodes,e.stickyNodes,pO))return!1;if(0===this.count)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class mO{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){const s=e[n];if(s.position+s.height>i||n>=t)return e.slice(0,n)}return e}}class bO extends Qt{constructor(e,t,i,n,s,o={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const r=this.validateStickySettings(o);this.stickyScrollMaxItemCount=r.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new mO,this._widget=this._register(new vO(i.getScrollableElement(),i,e,n,s,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll((()=>this.update()))),this._register(i.onDidChangeContentHeight((()=>this.update()))),this._register(e.onDidChangeCollapseState((()=>this.update()))),this.update()}get height(){return this._widget.height}get count(){return this._widget.count}getNode(e){return this._widget.getNode(e)}getNodeAtHeight(e){let t;if(t=0===e?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||0===this.tree.scrollTop)return void this._widget.setState(void 0);const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,n=0,s=this.getNextStickyNode(i,void 0,n);for(;s&&(t.push(s),n+=s.height,!(t.length<=this.stickyScrollMaxItemCount)||(i=this.getNextVisibleNode(s),i));)s=this.getNextStickyNode(i,s.node,n);const o=this.constrainStickyNodes(t);return o.length?new fO(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const n=this.getAncestorUnderPrevious(e,t);if(n){if(n===e){if(!this.nodeIsUncollapsedParent(e))return;if(this.nodeTopAlignsWithStickyNodesBottom(e,i))return}return this.createStickyScrollNode(n,i)}}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),n=this.view.getElementTop(i),s=t;return this.view.scrollTop===n-s}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:s}=this.getNodeRange(e);return{node:e,position:this.calculateStickyNodePosition(s,t,i),height:i,startIndex:n,endIndex:s}}getAncestorUnderPrevious(e,t=void 0){let i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(void 0===t)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(null===n&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const t=this.treeDelegate.getHeight(this.view.element(e)),i=this.view.getRelativeTop(e+1);n=i?i-t/this.view.renderHeight:null}if(null===n)return t;const s=this.view.element(e),o=this.treeDelegate.getHeight(s),r=n*this.view.renderHeight+o;return t+i>r&&t<=r?r-i:t}constrainStickyNodes(e){if(0===e.length)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];const s=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");return{startIndex:i,endIndex:i+this.model.getListRenderCount(t)-1}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let e=0;e<t.length&&e<this.stickyScrollMaxItemCount;e++)n+=this.treeDelegate.getHeight(t[e]);return n}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return"number"==typeof e.stickyScrollMaxItemCount&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class vO{constructor(e,t,i,n,s,o){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=s,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new Xt,this._rootDomNode=bc(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const r=bc(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(r),this.stickyScrollFocus=new wO(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){return this._previousState?.count??0}getNode(e){return this._previousState?.stickyNodes.find((t=>t.node===e))}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();const n=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${n.position}px`;else{this._previousStateDisposables.clear();const t=Array(e.count);for(let i=e.count-1;i>=0;i--){const n=e.stickyNodes[i],{element:s,disposable:o}=this.createElement(n,i,e.count);t[i]=s,this._rootDomNode.appendChild(s),this._previousStateDisposables.add(o)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}createElement(e,t,i){const n=e.startIndex,s=document.createElement("div");s.style.top=`${e.position}px`,!1!==this.tree.options.setRowHeight&&(s.style.height=`${e.height}px`),!1!==this.tree.options.setRowLineHeight&&(s.style.lineHeight=`${e.height}px`),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index",`${n}`),s.setAttribute("data-parity",n%2==0?"even":"odd"),s.setAttribute("id",this.view.getElementID(n));const o=this.setAccessibilityAttributes(s,e.node.element,t,i),r=this.treeDelegate.getTemplateId(e.node),a=this.treeRenderers.find((e=>e.templateId===r));if(!a)throw new Error(`No renderer found for template id ${r}`);let l=e.node;l===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(l=new Proxy(e.node,{}));const h=a.renderTemplate(s);a.renderElement(l,e.startIndex,h,e.height);const c=Yt((()=>{o.dispose(),a.disposeElement(l,e.startIndex,h,e.height),a.disposeTemplate(h),s.remove()}));return{element:s,disposable:c}}setAccessibilityAttributes(e,t,i,n){if(!this.accessibilityProvider)return Qt.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const s=this.accessibilityProvider.getAriaLabel(t),o=s&&"string"!=typeof s?s:xk(s),r=Sk((t=>{const i=t.readObservable(o);i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label")}));"string"==typeof s||s&&e.setAttribute("aria-label",s.get());const a=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return"number"==typeof a&&e.setAttribute("aria-level",`${a}`),e.setAttribute("aria-selected",String(!1)),r}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class wO extends Qt{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new ui,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new ui,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",(()=>this.onFocus())),this.container.addEventListener("blur",(()=>this.onBlur())),this._register(this.view.onDidFocus((()=>this.toggleStickyScrollFocused(!1)))),this._register(this.view.onKeyDown((e=>this.onKeyDown(e)))),this._register(this.view.onMouseDown((e=>this.onMouseDown(e)))),this._register(this.view.onContextMenu((e=>this.handleContextMenu(e))))}handleContextMenu(e){const t=e.browserEvent.target;if(!Bk(t)&&!Pk(t))return void(this.focusedLast()&&this.view.domFocus());if(!oc(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const t=this.state.stickyNodes.findIndex((t=>t.node.element===e.element?.element));if(-1===t)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(t)}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const i=this.state.stickyNodes[this.focusedIndex].node.element,n=this.elements[this.focusedIndex];this._onContextMenu.fire({element:i,anchor:n,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state)if("ArrowUp"===e.key)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if("ArrowDown"===e.key||"ArrowRight"===e.key){if(this.focusedIndex>=this.state.count-1){const e=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([e]),this.scrollNodeUnderWidget(e,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}onMouseDown(e){const t=e.browserEvent.target;(Bk(t)||Pk(t))&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&0===t.count)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const e=Sd(i,0,t.count-1);this.setFocus(e)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),o=n?n.position+n.height+i.height:i.height;this.view.scrollTop=s-o}getFocus(){if(this.state&&-1!==this.focusedIndex)return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){-1!==this.focusedIndex&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){-1!==this.focusedIndex&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||0===this.elements.length)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),-1===this.focusedIndex&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function _O(e){let t=UR.Unknown;return zh(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=UR.Twistie:zh(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=UR.Element:zh(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=UR.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function yO(e){const t=Bk(e.browserEvent.target);return{element:e.element?e.element.element:null,browserEvent:e.browserEvent,anchor:e.anchor,isStickyScroll:t}}function CO(e,t){t(e),e.children.forEach((e=>CO(e,t)))}class SO{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new ui,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&at(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const e=this.createNodeSet(),i=t=>e.delete(t);return t.forEach((e=>CO(e,i))),void this.set([...e.values()])}const i=new Set,n=e=>i.add(this.identityProvider.getId(e.element).toString());t.forEach((e=>CO(e,n)));const s=new Map,o=e=>s.set(this.identityProvider.getId(e.element).toString(),e);e.forEach((e=>CO(e,o)));const r=[];for(const e of this.nodes){const t=this.identityProvider.getId(e.element).toString();if(i.has(t)){const e=s.get(t);e&&e.visible&&r.push(e)}else r.push(e)}if(this.nodes.length>0&&0===r.length){const e=this.getFirstViewElementWithTrait();e&&r.push(e)}this._set(r,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class kO extends Yk{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(zk(e.browserEvent.target)||Rk(e.browserEvent.target)||Fk(e.browserEvent.target))return;if(e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=Pk(e.browserEvent.target);let o=!1;if(o=!!s||("function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick),s)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!n&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e)}if(t.collapsible&&(!s||n)){const i=this.tree.getNodeLocation(t),s=e.browserEvent.altKey;if(this.tree.setFocus([i]),this.tree.toggleCollapsed(i,s),n)return void(e.browserEvent.isHandledByList=!0)}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(function(e){return Ok(e,"monaco-custom-toggle")}(e.browserEvent.target)||function(e){return Ok(e,"action-item")}(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const n=this.list.indexOf(t),s=this.list.getElementTop(n),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-o,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&(e.browserEvent.isHandledByList||super.onDoubleClick(e))}onMouseDown(e){const t=e.browserEvent.target;Bk(t)||Pk(t)||super.onMouseDown(e)}onContextMenu(e){const t=e.browserEvent.target;Bk(t)||Pk(t)||super.onContextMenu(e)}}class xO extends sx{constructor(e,t,i,n,s,o,r,a){super(e,t,i,n,a),this.focusTrait=s,this.selectionTrait=o,this.anchorTrait=r}createMouseController(e){return new kO(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),0===i.length)return;const n=[],s=[];let o;i.forEach(((t,i)=>{this.focusTrait.has(t)&&n.push(e+i),this.selectionTrait.has(t)&&s.push(e+i),this.anchorTrait.has(t)&&(o=e+i)})),n.length>0&&super.setFocus(ct([...super.getFocus(),...n])),s.length>0&&super.setSelection(ct([...super.getSelection(),...s])),"number"==typeof o&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map((e=>this.element(e))),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map((e=>this.element(e))),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class EO{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return oi.map(this.view.onMouseClick,_O)}get onMouseDblClick(){return oi.filter(oi.map(this.view.onMouseDblClick,_O),(e=>e.target!==UR.Filter))}get onMouseOver(){return oi.map(this.view.onMouseOver,_O)}get onMouseOut(){return oi.map(this.view.onMouseOut,_O)}get onContextMenu(){return oi.any(oi.filter(oi.map(this.view.onContextMenu,yO),(e=>!e.isStickyScroll)),this.stickyScrollController?.onContextMenu??oi.None)}get onTap(){return oi.map(this.view.onTap,_O)}get onPointer(){return oi.map(this.view.onPointer,_O)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}get onDidChangeModel(){return oi.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}get findMode(){return this.findController?.mode??hO.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){return this.findController?.matchType??cO.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:oi.None}get expandOnDoubleClick(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n,s={}){this._user=e,this._options=s,this.eventBufferer=new bi,this.onDidChangeFindOpenState=oi.None,this.onDidChangeStickyScrollFocused=oi.None,this.disposables=new Xt,this._onWillRefilter=new ui,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new ui,this.onDidUpdateOptions=this._onDidUpdateOptions.event,this.treeDelegate=new eO(i);const o=new vi,r=new vi,a=this.disposables.add(new nO(r.event)),l=new Bt;this.renderers=n.map((e=>new sO(e,(()=>this.model),o.event,a,l,s)));for(const e of this.renderers)this.disposables.add(e);let h;var c,d;s.keyboardNavigationLabelProvider&&(h=new oO(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:h},this.disposables.add(h)),this.focus=new SO((()=>this.view.getFocusedElements()[0]),s.identityProvider),this.selection=new SO((()=>this.view.getSelectedElements()[0]),s.identityProvider),this.anchor=new SO((()=>this.view.getAnchorElement()),s.identityProvider),this.view=new xO(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...(c=()=>this.model,d=s,d&&{...d,identityProvider:d.identityProvider&&{getId(e){return d.identityProvider.getId(e.element)}},dnd:d.dnd&&new JR(c,d.dnd),multipleSelectionController:d.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return d.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return d.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:d.accessibilityProvider&&{...d.accessibilityProvider,getSetSize(e){const t=c(),i=t.getNodeLocation(e),n=t.getParentNodeLocation(i);return t.getNode(n).visibleChildrenCount},getPosInSet(e){return e.visibleChildIndex+1},isChecked:d.accessibilityProvider&&d.accessibilityProvider.isChecked?e=>d.accessibilityProvider.isChecked(e.element):void 0,getRole:d.accessibilityProvider&&d.accessibilityProvider.getRole?e=>d.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel(e){return d.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return d.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:d.accessibilityProvider&&d.accessibilityProvider.getWidgetRole?()=>d.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:d.accessibilityProvider&&d.accessibilityProvider.getAriaLevel?e=>d.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:d.accessibilityProvider.getActiveDescendantId&&(e=>d.accessibilityProvider.getActiveDescendantId(e.element))},keyboardNavigationLabelProvider:d.keyboardNavigationLabelProvider&&{...d.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return d.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}}),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),o.input=this.model.onDidChangeCollapseState;const u=oi.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}),this.disposables);u((()=>null),null,this.disposables);const g=this.disposables.add(new ui),p=this.disposables.add(new Fa(0));if(this.disposables.add(oi.any(u,this.focus.onDidChange,this.selection.onDidChange)((()=>{p.trigger((()=>{const e=new Set;for(const t of this.focus.getNodes())e.add(t);for(const t of this.selection.getNodes())e.add(t);g.fire([...e.values()])}))}))),r.input=g.event,!1!==s.keyboardSupport){const e=oi.chain(this.view.onKeyDown,(e=>e.filter((e=>!Rk(e.target))).map((e=>new xa(e)))));oi.chain(e,(e=>e.filter((e=>15===e.keyCode))))(this.onLeftArrow,this,this.disposables),oi.chain(e,(e=>e.filter((e=>17===e.keyCode))))(this.onRightArrow,this,this.disposables),oi.chain(e,(e=>e.filter((e=>10===e.keyCode))))(this.onSpace,this,this.disposables)}if((s.findWidgetEnabled??1)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const e=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new uO(this,this.model,this.view,h,s.contextViewProvider,e),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=oi.None,this.onDidChangeFindMatchType=oi.None;s.enableStickyScroll&&(this.stickyScrollController=new bO(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Yh(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===iO.Always)}updateOptions(e={}){this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===iO.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new bO(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=oi.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}updateWidth(e){const t=this.model.getListIndex(e);-1!==t&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;if(this.stickyScrollController&&(e+=this.stickyScrollController.count),e<0||e>=this.view.length)return;return this.view.element(e).element}get lastVisibleElement(){const e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return Kh(this.getHTMLElement())}layout(e,t){this.view.layout(e,t),Nn(t)&&this.findController?.layout(t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const n=e.treeStickyScrollBackground??e.listBackground;n&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${n}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${n}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const s=Sc(e.listFocusAndSelectionOutline,Sc(e.listSelectionOutline,e.listFocusOutline??""));s&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join("\n"),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){this.findController?.open()}closeFind(){this.findController?.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(void 0===e)return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents((()=>{const t=this.model.getNode(e);this.anchor.set([t]);const i=this.model.getListIndex(e);i>-1&&this.view.setAnchor(i,!0)}))}getAnchor(){return dt(this.anchor.get(),void 0)}setSelection(e,t){this.eventBufferer.bufferEvents((()=>{const i=e.map((e=>this.model.getNode(e)));this.selection.set(i,t);const n=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(n,t,!0)}))}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents((()=>{const i=e.map((e=>this.model.getNode(e)));this.focus.set(i,t);const n=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(n,t,!0)}))}focusNext(e=1,t=!1,i,n=(oc(i)&&i.altKey?void 0:this.focusNavigationFilter)){this.view.focusNext(e,t,i,n)}focusPrevious(e=1,t=!1,i,n=(oc(i)&&i.altKey?void 0:this.focusNavigationFilter)){this.view.focusPrevious(e,t,i,n)}focusNextPage(e,t=(oc(e)&&e.altKey?void 0:this.focusNavigationFilter)){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=(oc(e)&&e.altKey?void 0:this.focusNavigationFilter)){return this.view.focusPreviousPage(e,t,(()=>this.stickyScrollController?.height??0))}focusLast(e,t=(oc(e)&&e.altKey?void 0:this.focusNavigationFilter)){this.view.focusLast(e,t)}focusFirst(e,t=(oc(e)&&e.altKey?void 0:this.focusNavigationFilter)){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){const e=this.stickyScrollController?.getFocus();return void 0!==e?[e]:[]}getFocusedPart(){return this.stickyScrollController?.focusedLast()?1:0}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(-1!==i)if(this.stickyScrollController){const n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}else this.view.reveal(i,t)}getRelativeTop(e){const t=this.model.getListIndex(e);if(-1===t)return null;const i=this.stickyScrollController?.getNode(this.getNode(e));return this.view.getRelativeTop(t,i?.position??this.stickyScrollController?.height)}getViewState(e=this.options.identityProvider){if(!e)throw new KR(this._user,"Can't get tree view state without an identity provider");const t=t=>e.getId(t).toString(),i=tO.empty(this.scrollTop);for(const e of this.getFocus())i.focus.add(t(e));for(const e of this.getSelection())i.selection.add(t(e));const n=this.model.getNode(),s=[n];for(;s.length>0;){const e=s.shift();e!==n&&e.collapsible&&(i.expanded[t(e.element)]=e.collapsed?0:1),s.push(...e.children)}return i}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const e=this.model.getParentNodeLocation(n);if(!e)return;const t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,s)}navigate(e){return new DO(this.view,this.model,e)}dispose(){jt(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose()}}class DO{constructor(e,t,i){this.view=e,this.model=t,this.index=i?this.model.getListIndex(i):-1}current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}}class LO{get size(){return this.nodes.size}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new YR(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(e,t){return i.sorter.compare(e.element,t.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=It.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=It.empty(),i){const n=new Set,s=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:e=>{if(null===e.element)return;const t=e;if(n.add(t.element),this.nodes.set(t.element,t),this.identityProvider){const e=this.identityProvider.getId(t.element).toString();s.add(e),this.nodesByIdentity.set(e,t)}i.onDidCreateNode?.(t)},onDidDeleteNode:e=>{if(null===e.element)return;const t=e;if(n.has(t.element)||this.nodes.delete(t.element),this.identityProvider){const e=this.identityProvider.getId(t.element).toString();s.has(e)||this.nodesByIdentity.delete(e)}i.onDidDeleteNode?.(t)}})}preserveCollapseState(e=It.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),It.map(e,(e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){const i=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(i)}if(!t){let t;return t=void 0===e.collapsed?void 0:e.collapsed===VR.Collapsed||e.collapsed===VR.PreserveOrCollapsed||e.collapsed!==VR.Expanded&&e.collapsed!==VR.PreserveOrExpanded&&Boolean(e.collapsed),{...e,children:this.preserveCollapseState(e.children),collapsed:t}}const i="boolean"==typeof e.collapsible?e.collapsible:t.collapsible;let n;return n=void 0===e.collapsed||e.collapsed===VR.PreserveOrCollapsed||e.collapsed===VR.PreserveOrExpanded?t.collapsed:e.collapsed===VR.Collapsed||e.collapsed!==VR.Expanded&&Boolean(e.collapsed),{...e,collapsible:i,collapsed:n,children:this.preserveCollapseState(e.children)}}))}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}updateElementHeight(e,t){const i=this.getElementLocation(e);this.model.updateElementHeight(i,t)}resort(e=null,t=!0){if(!this.sorter)return;const i=this.getElementLocation(e),n=this.model.getNode(i);this._setChildren(i,this.resortChildren(n,t),{})}resortChildren(e,t,i=!0){let n=[...e.children];return(t||i)&&(n=n.sort(this.sorter.compare.bind(this.sorter))),It.map(n,(e=>({element:e.element,collapsible:e.collapsible,collapsed:e.collapsed,children:this.resortChildren(e,t,!1)})))}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e=null){const t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(null===e)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new KR(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new KR(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new KR(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(null===e)return[];const t=this.nodes.get(e);if(!t)throw new KR(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function IO(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:It.map(It.from(e.children),IO),collapsible:e.collapsible,collapsed:e.collapsed}}function TO(e){const t=[e.element],i=e.incompressible||!1;let n,s;for(;[s,n]=It.consume(It.from(e.children),2),1===s.length&&!s[0].incompressible;)e=s[0],t.push(e.element);return{element:{elements:t,incompressible:i},children:It.map(It.concat(s,n),TO),collapsible:e.collapsible,collapsed:e.collapsed}}function NO(e,t=0){let i;return i=t<e.element.elements.length-1?[NO(e,t+1)]:It.map(It.from(e.children),(e=>NO(e,0))),0===t&&e.element.incompressible?{element:e.element.elements[t],children:i,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:i,collapsible:e.collapsible,collapsed:e.collapsed}}function AO(e){return NO(e,0)}function MO(e,t,i){return e.element===t?{...e,children:i}:{...e,children:It.map(It.from(e.children),(e=>MO(e,t,i)))}}class RO{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}get size(){return this.nodes.size}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new LO(e,t,i),this.enabled=void 0===i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=It.empty(),i){const n=i.diffIdentityProvider&&(s=i.diffIdentityProvider,{getId(e){return e.elements.map((e=>s.getId(e).toString())).join("\0")}});var s;if(null===e){const e=It.map(t,this.enabled?TO:IO);return void this._setChildren(null,e,{diffIdentityProvider:n,diffDepth:1/0})}const o=this.nodes.get(e);if(!o)throw new KR(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),h=MO(AO(r),e,t),c=(this.enabled?TO:IO)(h),d=i.diffIdentityProvider?(e,t)=>i.diffIdentityProvider.getId(e)===i.diffIdentityProvider.getId(t):void 0;if(at(c.element.elements,r.element.elements,d))return void this._setChildren(o,c.children||It.empty(),{diffIdentityProvider:n,diffDepth:1});const u=l.children.map((e=>e===r?c:e));this._setChildren(l.element,u,{diffIdentityProvider:n,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const t=this.model.getNode().children,i=It.map(t,AO),n=It.map(i,e?TO:IO);this._setChildren(null,n,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set;this.model.setChildren(e,t,{...i,onDidCreateNode:e=>{for(const t of e.element.elements)n.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(const t of e.element.elements)n.has(t)||this.nodes.delete(t)}})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(void 0===e)return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){const t=void 0===e?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}updateElementHeight(e,t){const i=this.getCompressedNode(e);i&&this.model.updateElementHeight(i,t)}refilter(){this.model.refilter()}resort(e=null,t=!0){const i=this.getCompressedNode(e);this.model.resort(i,t)}getCompressedNode(e){if(null===e)return null;const t=this.nodes.get(e);if(!t)throw new KR(this.user,`Tree element not found: ${e}`);return t}}const OO=e=>e[e.length-1];class FO{get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new FO(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}class PO{get onDidSplice(){return oi.map(this.model.onDidSplice,(({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map((e=>this.nodeMapper.map(e))),deletedNodes:t.map((e=>this.nodeMapper.map(e)))})))}get onDidChangeCollapseState(){return oi.map(this.model.onDidChangeCollapseState,(({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t})))}get onDidChangeRenderNodeCount(){return oi.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||OO;const n=e=>this.elementMapper(e.elements);this.nodeMapper=new qR((e=>new FO(n,e))),this.model=new RO(e,function(e,t){return{splice(i,n,s){t.splice(i,n,s.map((t=>e.map(t))))},updateElementHeight(e,i){t.updateElementHeight(e,i)}}}(this.nodeMapper,t),function(e,t){return{...t,identityProvider:t.identityProvider&&{getId(i){return t.identityProvider.getId(e(i))}},sorter:t.sorter&&{compare(e,i){return t.sorter.compare(e.elements[0],i.elements[0])}},filter:t.filter&&{filter(i,n){return t.filter.filter(e(i),n)}}}}(n,i))}setChildren(e,t=It.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return null==t?t:this.elementMapper(t.elements)}getLastElementAncestor(e){const t=this.model.getLastElementAncestor(e);return null==t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}updateElementHeight(e,t){this.model.updateElementHeight(e,t)}refilter(){return this.model.refilter()}resort(e=null,t=!0){return this.model.resort(e,t)}getCompressedTreeNode(e=null){return this.model.getNode(e)}}class BO extends EO{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n,s={}){super(e,t,i,n,s),this.user=e}setChildren(e,t=It.empty(),i){this.model.setChildren(e,t,i)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}updateElementHeight(e,t){this.model.updateElementHeight(e,t)}resort(e,t=!0){this.model.resort(e,t)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new LO(e,t,i)}}class zO{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),1===s.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,n))}disposeElement(e,t,i,n){i.compressedTreeNode?this.renderer.disposeCompressedElements?.(i.compressedTreeNode,t,i.data,n):this.renderer.disposeElement?.(e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}zO.__decorator=Bs([YS],zO.prototype,"compressedTreeNodeProvider",null);class WO{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),0===e.length)return[];for(let n=0;n<e.length;n++){const s=e[n],o=s.position+s.height;if(n+1<e.length&&o+e[n+1].height>i||n>=t-1&&t<e.length){const t=e.slice(0,n),i=e.slice(n);return[...t,this.compressStickyNodes(i)]}}return e}compressStickyNodes(e){if(0===e.length)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let n=0;n<e.length;n++){const s=e[n],o=t.getCompressedTreeNode(s.node.element);if(o.element){if(0!==n&&o.element.incompressible)break;i.push(...o.element.elements)}}if(i.length<2)return e[0];const n=e[e.length-1],s={elements:i,incompressible:!1},o={...n.node,children:[],element:s},r=new Proxy(e[0].node,{}),a={node:r,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(r,o),a}}function HO(e,t){return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let n;try{n=e().getCompressedTreeNode(i)}catch{return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===n.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}class VO extends BO{constructor(e,t,i,n,s={}){const o=()=>this,r=new WO((()=>this.model));super(e,t,i,n.map((e=>new zO(o,r,e))),{...HO(o,s),stickyScrollDelegate:r})}setChildren(e,t=It.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new PO(e,t,i)}updateOptions(e={}){super.updateOptions(e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function UO(e){return{...e,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function KO(e,t){return!!t.parent&&(t.parent===e||KO(e,t.parent))}class qO{get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new qO(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class $O{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...Eb.asClassNameArray(wg.treeItemLoading)),!0):(t.classList.remove(...Eb.asClassNameArray(wg.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function jO(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function GO(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}function YO(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,anchor:e.anchor,isStickyScroll:e.isStickyScroll}}class XO extends nk{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function QO(e){return e instanceof nk?new XO(e):e}class ZO{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){this.dnd.onDragStart?.(QO(e),t)}onDragOver(e,t,i,n,s,o=!0){return this.dnd.onDragOver(QO(e),t&&t.element,i,n,s)}drop(e,t,i,n,s){this.dnd.drop(QO(e),t&&t.element,i,n,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}function JO(e){return e&&{...e,collapseByDefault:!0,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new ZO(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>!!e.accessibilityProvider?.isChecked(t.element):void 0,getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},filter:e.filter&&{filter(t,i){return e.filter.filter(t.element,i)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}},sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"!=typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),defaultFindVisibility:t=>t.hasChildren&&t.stale?1:"number"==typeof e.defaultFindVisibility?e.defaultFindVisibility:void 0===e.defaultFindVisibility?2:e.defaultFindVisibility(t.element)}}function eF(e,t){t(e),e.children.forEach((e=>eF(e,t)))}class tF{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return oi.map(this.tree.onDidChangeFocus,jO)}get onDidChangeSelection(){return oi.map(this.tree.onDidChangeSelection,jO)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return oi.map(this.tree.onMouseClick,GO)}get onMouseDblClick(){return oi.map(this.tree.onMouseDblClick,GO)}get onContextMenu(){return oi.map(this.tree.onContextMenu,YO)}get onTap(){return oi.map(this.tree.onTap,GO)}get onPointer(){return oi.map(this.tree.onPointer,GO)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.tree.findMode}set findMode(e){this.tree.findMode=e}get findMatchType(){return this.tree.findMatchType}set findMatchType(e){this.tree.findMatchType=e}get expandOnlyOnTwistieClick(){if("boolean"==typeof this.tree.expandOnlyOnTwistieClick)return this.tree.expandOnlyOnTwistieClick;const e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,s,o={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new ui,this._onDidChangeNodeSlowState=new ui,this.nodeMapper=new qR((e=>new qO(e))),this.disposables=new Xt,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=void 0!==o.autoExpandSingleChildren&&o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=e=>o.collapseByDefault?o.collapseByDefault(e)?VR.PreserveOrCollapsed:VR.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,n,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=UO({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,n,s){const o=new eO(i),r=n.map((e=>new $O(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),a=JO(s)||{};return new BO(e,t,o,r,a)}updateOptions(e={}){this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}async updateChildren(e=this.root.element,t=!0,i=!1,n){await this._updateChildren(e,t,i,void 0,n)}async _updateChildren(e=this.root.element,t=!0,i=!1,n,s){if(void 0===this.root.element)throw new KR(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await oi.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,n,s),i)try{this.tree.rerender(o)}catch{}}resort(e=this.root.element,t=!0){this.tree.resort(this.getDataNode(e),t)}hasElement(e){return this.tree.hasElement(this.getDataNode(e))}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){const i=this.getDataNode(e);this.tree.updateElementHeight(i,t)}updateWidth(e){const t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(void 0===this.root.element)throw new KR(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await oi.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i))return!1;if(i.refreshPromise&&(await this.root.refreshPromise,await oi.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await oi.toPromise(this._onDidRender.event)),n}toggleCollapsed(e,t=!1){return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw new Error("Can't expand to element without getParent method");const t=[];for(;!this.hasNode(e);)(e=this.dataSource.getParent(e))!==this.root.element&&t.push(e);for(const e of It.reverse(t))await this.expand(e);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.tree.openFind()}closeFind(){this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(void 0===e?void 0:this.getDataNode(e))}getAnchor(){const e=this.tree.getAnchor();return e?.element}setSelection(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map((e=>e.element))}setFocus(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setFocus(i,t)}focusNext(e=1,t=!1,i){this.tree.focusNext(e,t,i)}focusPrevious(e=1,t=!1,i){this.tree.focusPrevious(e,t,i)}focusNextPage(e){return this.tree.focusNextPage(e)}focusPreviousPage(e){return this.tree.focusPreviousPage(e)}focusLast(e){this.tree.focusLast(e)}focusFirst(e){this.tree.focusFirst(e)}getFocus(){return this.tree.getFocus().map((e=>e.element))}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map((e=>e.element))}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new KR(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,n){await this.refreshNode(e,t,i),this.disposables.isDisposed||this.render(e,i,n)}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach(((s,o)=>{!n&&function(e,t){return e===t||KO(e,t)||KO(t,e)}(o,e)&&(n=s.then((()=>this.refreshNode(e,t,i))))})),n)return n;if(e!==this.root){if(this.tree.getNode(e).collapsed)return e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,void this.setChildren(e,[],t,i)}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let n;e.refreshPromise=new Promise((e=>n=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const n=await this.doRefreshNode(e,t,i);e.stale=!1,await Ja.settled(n.map((e=>this.doRefreshSubTree(e,t,i))))}finally{n()}}async doRefreshNode(e,t,i){let n;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const t=this.doGetChildren(e);if(An(t))n=Promise.resolve(t);else{const i=za(800);i.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),n=t.finally((()=>i.cancel()))}}else n=Promise.resolve(It.empty());try{const s=await n;return this.setChildren(e,s,t,i)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Qe(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return An(i)?this.processChildren(i):(t=Ma((async()=>this.processChildren(await i))),this.refreshPromises.set(e,t),t.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState({node:e,deep:t}){null!==e.element&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ge))}setChildren(e,t,i,n){const s=[...t];if(0===e.children.length&&0===s.length)return[];const o=new Map,r=new Map;for(const t of e.children)o.set(t.element,t),this.identityProvider&&r.set(t.id,{node:t,collapsed:this.tree.hasElement(t)&&this.tree.isCollapsed(t)});const a=[],l=s.map((t=>{const s=!!this.dataSource.hasChildren(t);if(!this.identityProvider){const i=UO({element:t,parent:e,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return s&&i.defaultCollapseState===VR.PreserveOrExpanded&&a.push(i),i}const l=this.identityProvider.getId(t).toString(),h=r.get(l);if(h){const e=h.node;return o.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=s,i?h.collapsed?(e.children.forEach((e=>eF(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):a.push(e):s&&!h.collapsed&&a.push(e),e}const c=UO({element:t,parent:e,id:l,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(l)>-1&&n.focus.push(c),n&&n.viewState.selection&&n.viewState.selection.indexOf(l)>-1&&n.selection.push(c),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(l)>-1||s&&c.defaultCollapseState===VR.PreserveOrExpanded)&&a.push(c),c}));for(const e of o.values())eF(e,(e=>this.nodes.delete(e.element)));for(const e of l)this.nodes.set(e.element,e);return e.children.splice(0,e.children.length,...l),e!==this.root&&this.autoExpandSingleChildren&&1===l.length&&0===a.length&&(l[0].forceExpanded=!0,a.push(l[0])),a}render(e,t,i){const n=e.children.map((e=>this.asTreeElement(e,t))),s=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(e){return i.diffIdentityProvider.getId(e.element)}}};this.tree.setChildren(e===this.root?null:e,n,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?It.map(e.children,(e=>this.asTreeElement(e,t))):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new KR(this.user,"Can't get tree view state without an identity provider");const e=e=>this.identityProvider.getId(e).toString(),t=this.getFocus().map(e),i=this.getSelection().map(e),n=[],s=this.tree.getNode(),o=[s];for(;o.length>0;){const t=o.pop();t!==s&&t.collapsible&&!t.collapsed&&n.push(e(t.element.element)),o.push(...t.children)}return{focus:t,selection:i,expanded:n,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}}class iF{get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new iF(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class nF{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...Eb.asClassNameArray(wg.treeItemLoading)),!0):(t.classList.remove(...Eb.asClassNameArray(wg.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=jt(this.disposables)}}class sF extends tF{constructor(e,t,i,n,s,o,r={}){super(e,t,i,s,o,r),this.compressionDelegate=n,this.compressibleNodeMapper=new qR((e=>new iF(e))),this.filter=r.filter}createTree(e,t,i,n,s){const o=new eO(i),r=n.map((e=>new nF(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),a=function(e){const t=e&&JO(e);return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((e=>e.element)))}}}}(s)||{};return new VO(e,t,o,r,a)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}getViewState(){if(!this.identityProvider)throw new KR(this.user,"Can't get tree view state without an identity provider");const e=e=>this.identityProvider.getId(e).toString(),t=this.getFocus().map(e),i=this.getSelection().map(e),n=[],s=this.tree.getCompressedTreeNode(),o=[s];for(;o.length>0;){const t=o.pop();if(t!==s&&t.collapsible&&!t.collapsed)for(const i of t.element.elements)n.push(e(i.element));o.push(...t.children)}return{focus:t,selection:i,expanded:n,scrollTop:this.scrollTop}}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const n=e=>this.identityProvider.getId(e).toString(),s=e=>{const t=new Set;for(const i of e){const e=this.tree.getCompressedTreeNode(i===this.root?null:i);if(e.element)for(const i of e.element.elements)t.add(n(i.element))}return t},o=s(this.tree.getSelection()),r=s(this.tree.getFocus());super.render(e,t,i);const a=this.getSelection();let l=!1;const h=this.getFocus();let c=!1;const d=e=>{const t=e.element;if(t)for(let e=0;e<t.elements.length;e++){const i=n(t.elements[e].element),s=t.elements[t.elements.length-1].element;o.has(i)&&-1===a.indexOf(s)&&(a.push(s),l=!0),r.has(i)&&-1===h.indexOf(s)&&(h.push(s),c=!0)}e.children.forEach(d)};d(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),c&&this.setFocus(h)}processChildren(e){return this.filter&&(e=It.filter(e,(e=>{const t=this.filter.filter(e,1),i="boolean"==typeof(n=t)?n?1:0:$R(n)?jR(n.visibility):jR(n);var n;if(2===i)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===i}))),super.processChildren(e)}}class oF extends EO{constructor(e,t,i,n,s,o={}){super(e,t,i,n,o),this.user=e,this.dataSource=s,this.nodesByIdentity=new Map,this.identityProvider=o.identityProvider}getInput(){return this.input}setInput(e,t){if(t&&!this.identityProvider)throw new KR(this.user,"Can't restore tree view state without an identity provider");if(this.input=e,!e)return this.nodesByIdentity.clear(),void this.model.setChildren(null,It.empty());if(!t)return void this._refresh(e);const i=[],n=[];this._refresh(e,(e=>{const i=this.identityProvider.getId(e).toString();return!t.expanded[i]}),(e=>{const s=this.identityProvider.getId(e.element).toString();t.focus.has(s)&&i.push(e.element),t.selection.has(s)&&n.push(e.element)})),this.setFocus(i),this.setSelection(n),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}updateChildren(e=this.input){if(void 0===this.input)throw new KR(this.user,"Tree input not set");let t;this.identityProvider&&(t=e=>{const t=this.identityProvider.getId(e).toString(),i=this.nodesByIdentity.get(t);if(i)return i.collapsed}),this._refresh(e,t)}resort(e=this.input,t=!0){this.model.resort(e===this.input?null:e,t)}refresh(e){void 0!==e?this.model.rerender(e):this.view.rerender()}_refresh(e,t,i){let n;if(this.identityProvider){const e=new Set,t=i;i=i=>{const n=this.identityProvider.getId(i.element).toString();e.add(n),this.nodesByIdentity.set(n,i),t?.(i)},n=t=>{const i=this.identityProvider.getId(t.element).toString();e.has(i)||this.nodesByIdentity.delete(i)}}this.model.setChildren(e===this.input?null:e,this.iterate(e,t).elements,{onDidCreateNode:i,onDidDeleteNode:n})}iterate(e,t){const i=[...this.dataSource.getChildren(e)],n=It.map(i,(e=>{const{elements:i,size:n}=this.iterate(e,t);return{element:e,children:i,collapsible:this.dataSource.hasChildren?this.dataSource.hasChildren(e):void 0,collapsed:0===n?void 0:t&&t(e)}}));return{elements:n,size:i.length}}createModel(e,t,i){return new LO(e,t,i)}}const rF="vs/platform/contextkey/common/contextkeys",aF=(new Cu("isMac",M,u(rF,0,"Whether the operating system is macOS")),new Cu("isLinux",R,u(rF,1,"Whether the operating system is Linux")),new Cu("isWindows",A,u(rF,2,"Whether the operating system is Windows")),new Cu("isWeb",F,u(rF,3,"Whether the platform is a web browser")),new Cu("isMacNative",M&&!F,u(rF,4,"Whether the operating system is macOS on a non-browser platform")),new Cu("isIOS",B,u(rF,5,"Whether the operating system is iOS")),new Cu("isMobile",z,u(rF,6,"Whether the platform is a mobile web browser")),new Cu("isDevelopment",!1,!0),new Cu("productQualityType","",u(rF,7,"Quality type of VS Code")),"inputFocus"),lF=(new Cu(aF,!1,u(rF,8,"Whether keyboard focus is inside an input box")),o("listService")),hF="vs/platform/list/browser/listService";const cF=new Cu("listScrollAtBoundary","none"),dF=(iu.or(cF.isEqualTo("top"),cF.isEqualTo("both")),iu.or(cF.isEqualTo("bottom"),cF.isEqualTo("both")),new Cu("listFocus",!0)),uF=new Cu("treestickyScrollFocused",!1),gF=new Cu("listSupportsMultiselect",!0),pF=(iu.and(dF,iu.not(aF),uF.negate()),new Cu("listHasSelectionOrFocus",!1)),fF=new Cu("listDoubleSelection",!1),mF=new Cu("listMultiSelection",!1),bF=new Cu("listSelectionNavigation",!1),vF=new Cu("listSupportsFind",!0),wF=new Cu("treeElementCanCollapse",!1),_F=new Cu("treeElementHasParent",!1),yF=new Cu("treeElementCanExpand",!1),CF=new Cu("treeElementHasChild",!1),SF=new Cu("treeFindOpen",!1),kF="listTypeNavigationMode",xF="listAutomaticKeyboardNavigation";function EF(e,t){const i=e.createScoped(t.getHTMLElement());return dF.bindTo(i),i}function DF(e,t){const i=cF.bindTo(e),n=()=>{const e=0===t.scrollTop,n=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&n?i.set("both"):e?i.set("top"):n?i.set("bottom"):i.set("none")};return n(),t.onDidScroll(n)}const LF="workbench.list.multiSelectModifier",IF="workbench.list.openMode",TF="workbench.list.horizontalScrolling",NF="workbench.list.defaultFindMode",AF="workbench.list.typeNavigationMode",MF="workbench.list.keyboardNavigation",RF="workbench.list.scrollByPage",OF="workbench.list.defaultFindMatchType",FF="workbench.tree.indent",PF="workbench.tree.renderIndentGuides",BF="workbench.list.smoothScrolling",zF="workbench.list.mouseWheelScrollSensitivity",WF="workbench.list.fastScrollSensitivity",HF="workbench.tree.expandMode",VF="workbench.tree.enableStickyScroll",UF="workbench.tree.stickyScrollMaxItemCount";function KF(e){return"alt"===e.getValue(LF)}class qF extends Qt{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=KF(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(LF)&&(this.useAltAsMultipleSelectionModifier=KF(this.configurationService))})))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:$k(e)}isSelectionRangeChangeEvent(e){return jk(e)}}function $F(e,t){const i=e.get(Uo),n=e.get(Bm),s=new Xt,o={...t,keyboardNavigationDelegate:{mightProducePrintableCharacter(e){return n.mightProducePrintableCharacter(e)}},smoothScrolling:Boolean(i.getValue(BF)),mouseWheelScrollSensitivity:i.getValue(zF),fastScrollSensitivity:i.getValue(WF),multipleSelectionController:t.multipleSelectionController??s.add(new qF(i)),keyboardNavigationEventFilter:eP(n),scrollByPage:Boolean(i.getValue(RF))};return[o,s]}let jF=class extends sx{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,r,a,l){const h=void 0!==s.horizontalScrolling?s.horizontalScrolling:Boolean(a.getValue(TF)),[c,d]=l.invokeFunction($F,s);super(e,t,i,n,{keyboardSupport:!1,...c,horizontalScrolling:h}),this.disposables.add(d),this.contextKeyService=EF(o,this),this.disposables.add(DF(this.contextKeyService,this)),this.listSupportsMultiSelect=gF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport);bF.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=pF.bindTo(this.contextKeyService),this.listDoubleSelection=fF.bindTo(this.contextKeyService),this.listMultiSelection=mF.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=KF(a),this.disposables.add(this.contextKeyService),this.disposables.add(r.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(a.onDidChangeConfiguration((e=>{e.affectsConfiguration(LF)&&(this._useAltAsMultipleSelectionModifier=KF(a));let t={};if(e.affectsConfiguration(TF)&&void 0===this.horizontalScrolling){const e=Boolean(a.getValue(TF));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(RF)){const e=Boolean(a.getValue(RF));t={...t,scrollByPage:e}}if(e.affectsConfiguration(BF)){const e=Boolean(a.getValue(BF));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(zF)){const e=a.getValue(zF);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(WF)){const e=a.getValue(WF);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new QF(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Px(e):Fx)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};jF=Bs([zs(5,Qc),zs(6,lF),zs(7,Uo),zs(8,s)],jF);let GF=class extends oR{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,r,a,l){const h=void 0!==s.horizontalScrolling?s.horizontalScrolling:Boolean(a.getValue(TF)),[c,d]=l.invokeFunction($F,s);super(e,t,i,n,{keyboardSupport:!1,...c,horizontalScrolling:h}),this.disposables=new Xt,this.disposables.add(d),this.contextKeyService=EF(o,this),this.disposables.add(DF(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=gF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport);bF.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this._useAltAsMultipleSelectionModifier=KF(a),this.disposables.add(this.contextKeyService),this.disposables.add(r.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(a.onDidChangeConfiguration((e=>{e.affectsConfiguration(LF)&&(this._useAltAsMultipleSelectionModifier=KF(a));let t={};if(e.affectsConfiguration(TF)&&void 0===this.horizontalScrolling){const e=Boolean(a.getValue(TF));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(RF)){const e=Boolean(a.getValue(RF));t={...t,scrollByPage:e}}if(e.affectsConfiguration(BF)){const e=Boolean(a.getValue(BF));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(zF)){const e=a.getValue(zF);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(WF)){const e=a.getValue(WF);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new QF(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Px(e):Fx)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};GF=Bs([zs(5,Qc),zs(6,lF),zs(7,Uo),zs(8,s)],GF);let YF=class extends xR{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,r,a,l,h){const c=void 0!==o.horizontalScrolling?o.horizontalScrolling:Boolean(l.getValue(TF)),[d,u]=h.invokeFunction($F,o);super(e,t,i,n,s,{keyboardSupport:!1,...d,horizontalScrolling:c}),this.disposables.add(u),this.contextKeyService=EF(r,this),this.disposables.add(DF(this.contextKeyService,this)),this.listSupportsMultiSelect=gF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport);bF.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=pF.bindTo(this.contextKeyService),this.listDoubleSelection=fF.bindTo(this.contextKeyService),this.listMultiSelection=mF.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=KF(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(l.onDidChangeConfiguration((e=>{e.affectsConfiguration(LF)&&(this._useAltAsMultipleSelectionModifier=KF(l));let t={};if(e.affectsConfiguration(TF)&&void 0===this.horizontalScrolling){const e=Boolean(l.getValue(TF));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(RF)){const e=Boolean(l.getValue(RF));t={...t,scrollByPage:e}}if(e.affectsConfiguration(BF)){const e=Boolean(l.getValue(BF));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(zF)){const e=l.getValue(zF);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(WF)){const e=l.getValue(WF);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new ZF(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Px(e):Fx)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};YF=Bs([zs(6,Qc),zs(7,lF),zs(8,Uo),zs(9,s)],YF);class XF extends Qt{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new ui),this.onDidOpen=this._onDidOpen.event,this._register(oi.filter(this.widget.onDidChangeSelection,(e=>oc(e.browserEvent)))((e=>this.onSelectionFromKeyboard(e)))),this._register(this.widget.onPointer((e=>this.onPointer(e.element,e.browserEvent)))),this._register(this.widget.onMouseDblClick((e=>this.onMouseDblClick(e.element,e.browserEvent)))),"boolean"!=typeof t?.openOnSingleClick&&t?.configurationService?(this.openOnSingleClick="doubleClick"!==t?.configurationService.getValue(IF),this._register(t?.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(IF)&&(this.openOnSingleClick="doubleClick"!==t?.configurationService.getValue(IF))})))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;const t=e.browserEvent,i="boolean"!=typeof t.preserveFocus||t.preserveFocus,n="boolean"==typeof t.pinned?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick)return;if(2===t.detail)return;const i=1===t.button,n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,i,n,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,n,t)}_open(e,t,i,n,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:s})}}class QF extends XF{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class ZF extends XF{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class JF extends XF{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function eP(e){let t=!1;return i=>{if(i.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;const n=e.softDispatch(i,i.target);return 1===n.kind?(t=!0,!1):(t=!1,0===n.kind)}}let tP=class extends BO{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,o,r,a,l){const{options:h,getTypeNavigationMode:c,disposable:d}=o.invokeFunction(lP,s);super(e,t,i,n,h),this.disposables.add(d),this.internals=new hP(this,s,c,s.overrideStyles,r,a,l),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};tP=Bs([zs(5,s),zs(6,Qc),zs(7,lF),zs(8,Uo)],tP);let iP=class extends VO{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,o,r,a,l){const{options:h,getTypeNavigationMode:c,disposable:d}=o.invokeFunction(lP,s);super(e,t,i,n,h),this.disposables.add(d),this.internals=new hP(this,s,c,s.overrideStyles,r,a,l),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};iP=Bs([zs(5,s),zs(6,Qc),zs(7,lF),zs(8,Uo)],iP);let nP=class extends oF{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,o,r,a,l,h){const{options:c,getTypeNavigationMode:d,disposable:u}=r.invokeFunction(lP,o);super(e,t,i,n,s,c),this.disposables.add(u),this.internals=new hP(this,o,d,o.overrideStyles,a,l,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),void 0!==e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};nP=Bs([zs(6,s),zs(7,Qc),zs(8,lF),zs(9,Uo)],nP);let sP=class extends tF{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,o,r,a,l,h){const{options:c,getTypeNavigationMode:d,disposable:u}=r.invokeFunction(lP,o);super(e,t,i,n,s,c),this.disposables.add(u),this.internals=new hP(this,o,d,o.overrideStyles,a,l,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};sP=Bs([zs(6,s),zs(7,Qc),zs(8,lF),zs(9,Uo)],sP);let oP=class extends sF{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,o,r,a,l,h,c){const{options:d,getTypeNavigationMode:u,disposable:g}=a.invokeFunction(lP,r);super(e,t,i,n,s,o,d),this.disposables.add(g),this.internals=new hP(this,r,u,r.overrideStyles,l,h,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};function rP(e){const t=e.getValue(NF);if("highlight"===t)return hO.Highlight;if("filter"===t)return hO.Filter;const i=e.getValue(MF);return"simple"===i||"highlight"===i?hO.Highlight:"filter"===i?hO.Filter:void 0}function aP(e){const t=e.getValue(OF);return"fuzzy"===t?cO.Fuzzy:"contiguous"===t?cO.Contiguous:void 0}function lP(e,t){const i=e.get(Uo),n=e.get(Mm),o=e.get(Qc),r=e.get(s),a=void 0!==t.horizontalScrolling?t.horizontalScrolling:Boolean(i.getValue(TF)),[l,h]=r.invokeFunction($F,t),c=t.paddingBottom,d=void 0!==t.renderIndentGuides?t.renderIndentGuides:i.getValue(PF);return{getTypeNavigationMode:()=>{const e=o.getContextKeyValue(kF);if("automatic"===e)return Hk.Automatic;if("trigger"===e)return Hk.Trigger;if(!1===o.getContextKeyValue(xF))return Hk.Trigger;const t=i.getValue(AF);return"automatic"===t?Hk.Automatic:"trigger"===t?Hk.Trigger:void 0},disposable:h,options:{keyboardSupport:!1,...l,indent:"number"==typeof i.getValue(FF)?i.getValue(FF):void 0,renderIndentGuides:d,smoothScrolling:Boolean(i.getValue(BF)),defaultFindMode:rP(i),defaultFindMatchType:aP(i),horizontalScrolling:a,scrollByPage:Boolean(i.getValue(RF)),paddingBottom:c,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:t.expandOnlyOnTwistieClick??"doubleClick"===i.getValue(HF),contextViewProvider:n,findWidgetStyles:Rx,enableStickyScroll:Boolean(i.getValue(VF)),stickyScrollMaxItemCount:Number(i.getValue(UF))}}}oP=Bs([zs(7,s),zs(8,Qc),zs(9,lF),zs(10,Uo)],oP);let hP=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,r){this.tree=e,this.disposables=[],this.contextKeyService=EF(s,e),this.disposables.push(DF(this.contextKeyService,e)),this.listSupportsMultiSelect=gF.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==t.multipleSelectionSupport);bF.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.listSupportFindWidget=vF.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=pF.bindTo(this.contextKeyService),this.hasDoubleSelection=fF.bindTo(this.contextKeyService),this.hasMultiSelection=mF.bindTo(this.contextKeyService),this.treeElementCanCollapse=wF.bindTo(this.contextKeyService),this.treeElementHasParent=_F.bindTo(this.contextKeyService),this.treeElementCanExpand=yF.bindTo(this.contextKeyService),this.treeElementHasChild=CF.bindTo(this.contextKeyService),this.treeFindOpen=SF.bindTo(this.contextKeyService),this.treeStickyScrollFocused=uF.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=KF(r),this.updateStyleOverrides(n);const a=()=>{const t=e.getFocus()[0];if(!t)return;const i=e.getNode(t);this.treeElementCanCollapse.set(i.collapsible&&!i.collapsed),this.treeElementHasParent.set(!!e.getParentElement(t)),this.treeElementCanExpand.set(i.collapsible&&i.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(t))},l=new Set;l.add(kF),l.add(xF),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection((()=>{const t=e.getSelection(),i=e.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.hasSelectionOrFocus.set(t.length>0||i.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(2===t.length)}))})),e.onDidChangeFocus((()=>{const t=e.getSelection(),i=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||i.length>0),a()})),e.onDidChangeCollapseState(a),e.onDidChangeModel(a),e.onDidChangeFindOpenState((e=>this.treeFindOpen.set(e))),e.onDidChangeStickyScrollFocused((e=>this.treeStickyScrollFocused.set(e))),r.onDidChangeConfiguration((n=>{let s={};if(n.affectsConfiguration(LF)&&(this._useAltAsMultipleSelectionModifier=KF(r)),n.affectsConfiguration(FF)){const e=r.getValue(FF);s={...s,indent:e}}if(n.affectsConfiguration(PF)&&void 0===t.renderIndentGuides){const e=r.getValue(PF);s={...s,renderIndentGuides:e}}if(n.affectsConfiguration(BF)){const e=Boolean(r.getValue(BF));s={...s,smoothScrolling:e}}if(n.affectsConfiguration(NF)||n.affectsConfiguration(MF)){const e=rP(r);s={...s,defaultFindMode:e}}if(n.affectsConfiguration(AF)||n.affectsConfiguration(MF)){const e=i();s={...s,typeNavigationMode:e}}if(n.affectsConfiguration(OF)){const e=aP(r);s={...s,defaultFindMatchType:e}}if(n.affectsConfiguration(TF)&&void 0===t.horizontalScrolling){const e=Boolean(r.getValue(TF));s={...s,horizontalScrolling:e}}if(n.affectsConfiguration(RF)){const e=Boolean(r.getValue(RF));s={...s,scrollByPage:e}}if(n.affectsConfiguration(HF)&&void 0===t.expandOnlyOnTwistieClick&&(s={...s,expandOnlyOnTwistieClick:"doubleClick"===r.getValue(HF)}),n.affectsConfiguration(VF)){const e=r.getValue(VF);s={...s,enableStickyScroll:e}}if(n.affectsConfiguration(UF)){const e=Math.max(1,r.getValue(UF));s={...s,stickyScrollMaxItemCount:e}}if(n.affectsConfiguration(zF)){const e=r.getValue(zF);s={...s,mouseWheelScrollSensitivity:e}}if(n.affectsConfiguration(WF)){const e=r.getValue(WF);s={...s,fastScrollSensitivity:e}}Object.keys(s).length>0&&e.updateOptions(s)})),this.contextKeyService.onDidChangeContext((t=>{t.affectsSome(l)&&e.updateOptions({typeNavigationMode:i()})}))),this.navigator=new JF(e,{configurationService:r,...t}),this.disposables.push(this.navigator)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Px(e):Fx)}dispose(){this.disposables=jt(this.disposables)}};hP=Bs([zs(4,Qc),zs(5,lF),zs(6,Uo)],hP);Jo.as(ur).registerConfiguration({id:"workbench",order:7,title:u(hF,0,"Workbench"),type:"object",properties:{[LF]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[u(hF,1,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),u(hF,2,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:u(hF,3,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[IF]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:u(hF,4,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[TF]:{type:"boolean",default:!1,description:u(hF,5,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[RF]:{type:"boolean",default:!1,description:u(hF,6,"Controls whether clicks in the scrollbar scroll page by page.")},[FF]:{type:"number",default:8,minimum:4,maximum:40,description:u(hF,7,"Controls tree indentation in pixels.")},[PF]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:u(hF,8,"Controls whether the tree should render indent guides.")},[BF]:{type:"boolean",default:!1,description:u(hF,9,"Controls whether lists and trees have smooth scrolling.")},[zF]:{type:"number",default:1,markdownDescription:u(hF,10,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[WF]:{type:"number",default:5,markdownDescription:u(hF,11,"Scrolling speed multiplier when pressing `Alt`.")},[NF]:{type:"string",enum:["highlight","filter"],enumDescriptions:[u(hF,12,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),u(hF,13,"Filter elements when searching.")],default:"highlight",description:u(hF,14,"Controls the default find mode for lists and trees in the workbench.")},[MF]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[u(hF,15,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),u(hF,16,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),u(hF,17,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:u(hF,18,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:u(hF,19,"Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},[OF]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[u(hF,20,"Use fuzzy matching when searching."),u(hF,21,"Use contiguous matching when searching.")],default:"fuzzy",description:u(hF,22,"Controls the type of matching used when searching lists and trees in the workbench.")},[HF]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:u(hF,23,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[VF]:{type:"boolean",default:!0,description:u(hF,24,"Controls whether sticky scrolling is enabled in trees.")},[UF]:{type:"number",minimum:1,default:7,markdownDescription:u(hF,25,"Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[AF]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:u(hF,26,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});Pm(".monaco-icon-label{display:flex;overflow:hidden;text-overflow:ellipsis}.monaco-icon-label:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-position:0;background-repeat:no-repeat;background-size:16px;display:inline-block;flex-shrink:0;height:22px;line-height:inherit!important;padding-right:6px;vertical-align:top;width:16px}.monaco-icon-label-container.disabled{color:var(--vscode-disabledForeground)}.monaco-icon-label>.monaco-icon-label-container{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{color:inherit;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-name-container>.label-name>.label-separator{margin:0 2px;opacity:.5}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-suffix-container>.label-suffix{opacity:.7;white-space:pre}.monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{font-size:.9em;margin-left:.5em;opacity:.7;white-space:pre}.monaco-icon-label.nowrap>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{white-space:nowrap}.vs .monaco-icon-label>.monaco-icon-label-container>.monaco-icon-description-container>.label-description{opacity:.95}.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-description-container>.label-description,.monaco-icon-label.italic>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{font-style:italic}.monaco-icon-label.deprecated{opacity:.66;text-decoration:line-through}.monaco-icon-label.italic:after{font-style:italic}.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-description-container>.label-description,.monaco-icon-label.strikethrough>.monaco-icon-label-container>.monaco-icon-name-container>.label-name{text-decoration:line-through}.monaco-icon-label:after{font-size:90%;font-weight:600;margin:auto 16px 0 5px;opacity:.75;text-align:center}.monaco-list:focus .selected .monaco-icon-label,.monaco-list:focus .selected .monaco-icon-label:after{color:inherit!important}.monaco-list-row.focused.selected .label-description,.monaco-list-row.selected .label-description{opacity:.8}",{});class cP extends Qt{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=t?.supportIcons??!1,this.domNode=dc(e,bc("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=cP.escapeNewLines(e,t)),this.didEverRender&&this.text===e&&this.title===i&&qn(this.highlights,t)||(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const n=this.text.substring(t,i.start);this.supportIcons?e.push(...sv(n)):e.push(n),t=i.start}const n=this.text.substring(t,i.end),s=bc("span.highlight",void 0,...this.supportIcons?sv(n):[n]);i.extraClasses&&s.classList.add(...i.extraClasses),e.push(s),t=i.end}if(t<this.text.length){const i=this.text.substring(t);this.supportIcons?e.push(...sv(i)):e.push(i)}if(gc(this.domNode,...e),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(this.customHover||""===this.title)this.customHover&&this.customHover.update(this.title);else{const e=this.options?.hoverDelegate??$S("mouse");this.customHover=this._register(rx().setupUpdatableHover(e,this.domNode,this.title))}this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,((e,s)=>{n="\r\n"===e?-1:0,s+=i;for(const e of t)e.end<=s||(e.start>=s&&(e.start+=n),e.end>=s&&(e.end+=n));return i+=n,"⏎"}))}}class dP{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class uP extends Qt{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new dP(dc(e,bc(".monaco-icon-label")))),this.labelContainer=dc(this.domNode.element,bc(".monaco-icon-label-container")),this.nameContainer=dc(this.labelContainer,bc("span.monaco-icon-name-container")),this.nameNode=t?.supportHighlights||t?.supportIcons?this._register(new pP(this.nameContainer,!!t.supportIcons)):new gP(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??$S("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const n=["monaco-icon-label"],s=["monaco-icon-label-container"];let o="";if(i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&("string"==typeof i.title?o+=i.title:o+=e)),this.domNode.className=n.join(" "),this.domNode.element.setAttribute("aria-label",o),this.labelContainer.className=s.join(" "),this.setupHover(i?.descriptionTitle?this.labelContainer:this.element,i?.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const e=this.getOrCreateDescriptionNode();e instanceof cP?(e.set(t||"",i?i.descriptionMatches:void 0,void 0,i?.labelEscapeNewLines),this.setupHover(e.element,i?.descriptionTitle)):(e.textContent=t&&i?.labelEscapeNewLines?cP.escapeNewLines(t,[]):t||"",this.setupHover(e.element,i?.descriptionTitle||""),e.empty=!t)}if(i?.suffix||this.suffixNode){this.getOrCreateSuffixNode().textContent=i?.suffix??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),t)if(this.hoverDelegate.showNativeHover){function n(e,t){Ln(t)?e.title=Kv(t):t?.markdownNotSupportedFallback?e.title=t.markdownNotSupportedFallback:e.removeAttribute("title")}n(e,t)}else{const s=rx().setupUpdatableHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}else e.removeAttribute("title")}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const i=this._register(new dP((e=this.nameContainer,t=bc("span.monaco-icon-suffix-container"),e.after(t),t)));this.suffixNode=this._register(new dP(dc(i.element,bc("span.label-suffix"))))}var e,t;return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new dP(dc(this.labelContainer,bc("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new cP(dc(e.element,bc("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new dP(dc(e.element,bc("span.label-description"))))}return this.descriptionNode}}class gP{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!qn(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=dc(this.container,bc("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],s=t?.domId&&`${t?.domId}_${i}`;dc(this.container,bc("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&dc(this.container,bc("span.label-separator",void 0,t?.separator||"/"))}}}}class pP extends Qt{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!qn(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new cP(dc(this.container,bc("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=t?.separator||"/",n=function(e,t,i){if(!i)return;let n=0;return e.map((e=>{const s={start:n,end:n+e.length},o=i.map((e=>Ty.intersect(s,e))).filter((e=>!Ty.isEmpty(e))).map((({start:e,end:t})=>({start:e-n,end:t-n})));return n=s.end+t.length,o}))}(e,i,t?.matches);for(let s=0;s<e.length;s++){const o=e[s],r=n?n[s]:void 0,a=bc("a.label-name",{id:t?.domId&&`${t?.domId}_${s}`,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});this._register(new cP(dc(this.container,a),{supportIcons:this.supportIcons})).set(o,r,void 0,t?.labelEscapeNewLines),s<e.length-1&&dc(a,bc("span.label-separator",void 0,i))}}}}Pm(".monaco-keybinding{align-items:center;display:flex;line-height:10px}.monaco-keybinding>.monaco-keybinding-key{border-radius:3px;border-style:solid;border-width:1px;display:inline-block;font-size:11px;margin:0 2px;padding:3px 5px;vertical-align:middle}.monaco-keybinding>.monaco-keybinding-key:first-child{margin-left:0}.monaco-keybinding>.monaco-keybinding-key:last-child{margin-right:0}.monaco-keybinding>.monaco-keybinding-key-separator{display:inline-block}.monaco-keybinding>.monaco-keybinding-key-chord-separator{width:6px}",{});const fP=bc;class mP extends Qt{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const n=this.options.keybindingLabelForeground;this.domNode=dc(e,fP(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(rx().setupUpdatableHover($S("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&mP.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let t=1;t<e.length;t++)dc(this.domNode,fP("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[t],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){vh(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const n=VC.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,Boolean(i?.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,Boolean(i?.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,Boolean(i?.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,Boolean(i?.metaKey),n.separator);const s=t.keyLabel;s&&this.renderKey(e,s,Boolean(i?.keyCode),"")}renderKey(e,t,i,n){dc(e,this.createKeyElement(t,i?".highlight":"")),n&&dc(e,fP("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){dc(e,this.createKeyElement(u("vs/base/browser/ui/keybindingLabel/keybindingLabel",0,"Unbound")))}createKeyElement(e,t=""){const i=fP("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&qn(e.firstPart,t.firstPart)&&qn(e.chordPart,t.chordPart)}}const bP=new Li((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));new Li((()=>({collator:new Intl.Collator(void 0,{numeric:!0})}))),new Li((()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})})));function vP(e,t,i=!1){const n=e||"",s=t||"",o=bP.value.collator.compare(n,s);return bP.value.collatorIsNumeric&&0===o&&n!==s?n<s?-1:1:o}var wP;const _P=bc;var yP,CP;!function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage",e[e.NextSeparator=8]="NextSeparator",e[e.PreviousSeparator=9]="PreviousSeparator"}(yP||(yP={}));class SP{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Li((()=>{const e=i.label??"",t=$v(e).text.trim(),n=i.ariaLabel||[e,this.saneDescription,this.saneDetail].map((e=>{return(t=e)?t.replace(/\$\((.*?)\)/g,((e,t)=>` ${t} `)).trim():"";var t})).filter((e=>!!e)).join(", ");return{saneLabel:e,saneSortLabel:t,saneAriaLabel:n}})),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class kP extends SP{constructor(e,t,i,n,s,o){super(e,t,s),this.fireButtonTriggered=i,this._onChecked=n,this.item=s,this._separator=o,this._checked=!1,this.onChecked=t?oi.map(oi.filter(this._onChecked.event,(e=>e.element===this)),(e=>e.checked)):oi.None,this._saneDetail=s.detail,this._labelHighlights=s.highlights?.label,this._descriptionHighlights=s.highlights?.description,this._detailHighlights=s.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}!function(e){e[e.NONE=0]="NONE",e[e.MOUSE_HOVER=1]="MOUSE_HOVER",e[e.ACTIVE_ITEM=2]="ACTIVE_ITEM"}(CP||(CP={}));class xP extends SP{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=CP.NONE}}class EP{getHeight(e){return e instanceof xP?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof kP?IP.ID:TP.ID}}class DP{getWidgetAriaLabel(){return u("vs/platform/quickinput/browser/quickInputTree",0,"Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox&&e instanceof kP)return{get value(){return e.checked},onDidChange:t=>e.onChecked((()=>t()))}}}class LP{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Xt,t.toDisposeTemplate=new Xt,t.entry=dc(e,_P(".quick-input-list-entry"));const i=dc(t.entry,_P("label.quick-input-list-label"));t.toDisposeTemplate.add(Ch(i,rc.CLICK,(e=>{t.checkbox.offsetParent||e.preventDefault()}))),t.checkbox=dc(i,_P("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const n=dc(i,_P(".quick-input-list-rows")),s=dc(n,_P(".quick-input-list-row")),o=dc(n,_P(".quick-input-list-row"));t.label=new uP(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=uc(t.label.element,_P(".quick-input-list-icon"));const r=dc(s,_P(".quick-input-list-entry-keybinding"));t.keybinding=new mP(r,$),t.toDisposeTemplate.add(t.keybinding);const a=dc(o,_P(".quick-input-list-label-meta"));return t.detail=new uP(a,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=dc(t.entry,_P(".quick-input-list-separator")),t.actionBar=new Gx(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}let IP=class extends LP{static{wP=this}static{this.ID="quickpickitem"}constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return wP.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Ch(t.checkbox,rc.CHANGE,(e=>{t.element.checked=t.checkbox.checked}))),t}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0;const s=n.item;i.checkbox.checked=n.checked,i.toDisposeElement.add(n.onChecked((e=>i.checkbox.checked=e))),i.checkbox.disabled=n.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:r,detailHighlights:a}=n;if(s.iconPath){const e=yg(this.themeService.getColorTheme().type)?s.iconPath.dark:s.iconPath.light??s.iconPath.dark,t=Fe.revive(e);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=yc(t)}else i.icon.style.backgroundImage="",i.icon.className=s.iconClass?`quick-input-list-icon ${s.iconClass}`:"";let l;!n.saneTooltip&&n.saneDescription&&(l={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const h={matches:o||[],descriptionTitle:l,descriptionMatches:r||[],labelEscapeNewLines:!0};if(h.extraClasses=s.iconClasses,h.italic=s.italic,h.strikethrough=s.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,h),i.keybinding.set(s.keybinding),n.saneDetail){let e;n.saneTooltip||(e={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:a,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";n.separator?.label?(i.separator.textContent=n.separator.label,i.separator.style.display="",this.addItemWithSeparator(n)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!n.separator);const c=s.buttons;c&&c.length?(i.actionBar.push(c.map(((e,t)=>eR(e,`id-${t}`,(()=>n.fireButtonTriggered({button:e,item:n.item}))))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};IP=wP=Bs([zs(1,Wc)],IP);class TP extends LP{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}static{this.ID="quickpickseparator"}get templateId(){return TP.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0,n.element.classList.toggle("focus-inside",!!n.focusInsideSeparator);const s=n.separator,{labelHighlights:o,descriptionHighlights:r,detailHighlights:a}=n;let l;i.icon.style.backgroundImage="",i.icon.className="",!n.saneTooltip&&n.saneDescription&&(l={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const h={matches:o||[],descriptionTitle:l,descriptionMatches:r||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,h),n.saneDetail){let e;n.saneTooltip||(e={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:a,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const c=s.buttons;c&&c.length?(i.actionBar.push(c.map(((e,t)=>eR(e,`id-${t}`,(()=>n.fireSeparatorButtonTriggered({button:e,separator:n.separator}))))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(n)}disposeElement(e,t,i){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}let NP=class extends Qt{constructor(e,t,i,n,s){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this._onKeyDown=new ui,this.onKeyDown=this._onKeyDown.event,this._onLeave=new ui,this.onLeave=this._onLeave.event,this._onChangedAllVisibleChecked=new ui,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new ui,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new ui,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new ui,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new ui,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new ui,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onTriggerEmptySelectionOrFocus=new ui,this._elementChecked=new ui,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Xt),this._shouldFireCheckedEvents=!0,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._matchOnMeta=!0,this._sortByLabel=!0,this._container=dc(this.parent,_P(".quick-input-list")),this._separatorRenderer=new TP(t),this._itemRenderer=s.createInstance(IP,t),this._tree=this._register(s.createInstance(tP,"QuickInput",this._container,new EP,[this._itemRenderer,this._separatorRenderer],{accessibilityProvider:new DP,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:iO.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,identityProvider:{getId:e=>{const t=e.item||e.separator;if(void 0===t)return"";if(void 0!==t.id)return t.id;let i=`label:${t.label}`;return i+=`$$description:${t.description}`,"separator"!==t.type&&(i+=`$$detail:${t.detail}`),i}},alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return oi.map(oi.any(this._tree.onDidChangeFocus,this._onTriggerEmptySelectionOrFocus.event),(e=>e.elements.filter((e=>e instanceof kP)).map((e=>e.item))))}get onDidChangeSelection(){return oi.map(oi.any(this._tree.onDidChangeSelection,this._onTriggerEmptySelectionOrFocus.event),(e=>({items:e.elements.filter((e=>e instanceof kP)).map((e=>e.item)),event:e.browserEvent})))}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get matchOnMeta(){return this._matchOnMeta}set matchOnMeta(e){this._matchOnMeta=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown((e=>{const t=new xa(e);switch(t.keyCode){case 10:this.toggleCheckbox();break;case 31:(M?e.metaKey:e.ctrlKey)&&this._tree.setFocus(this._itemElements);break;case 16:{const e=this._tree.getFocus();1===e.length&&e[0]===this._itemElements[0]&&this._onLeave.fire();break}case 18:{const e=this._tree.getFocus();1===e.length&&e[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}}this._onKeyDown.fire(t)})))}_registerOnContainerClick(){this._register(_h(this._container,rc.CLICK,(e=>{(e.x||e.y)&&this._onLeave.fire()})))}_registerOnMouseMiddleClick(){this._register(_h(this._container,rc.AUXCLICK,(e=>{1===e.button&&this._onLeave.fire()})))}_registerOnElementChecked(){this._register(this._elementChecked.event((e=>this._fireCheckedEvents())))}_registerOnContextMenu(){this._register(this._tree.onContextMenu((e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))})))}_registerHoverListeners(){const e=this._register(new Pa(this.hoverDelegate.delay));this._register(this._tree.onMouseOver((async t=>{if(t.browserEvent.target instanceof HTMLAnchorElement)e.cancel();else if(t.browserEvent.relatedTarget instanceof HTMLAnchorElement||!Bh(t.browserEvent.relatedTarget,t.element?.element))try{await e.trigger((async()=>{t.element instanceof kP&&this.showHover(t.element)}))}catch(t){if(!Qe(t))throw t}}))),this._register(this._tree.onMouseOut((t=>{Bh(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()})))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus((e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const e of this._separatorRenderer.visibleSeparators){const i=e===t;!!(e.focusInsideSeparator&CP.ACTIVE_ITEM)!==i&&(i?e.focusInsideSeparator|=CP.ACTIVE_ITEM:e.focusInsideSeparator&=~CP.ACTIVE_ITEM,this._tree.rerender(e))}}))),this._register(this._tree.onMouseOver((e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const e of this._separatorRenderer.visibleSeparators){if(e!==t)continue;!!(e.focusInsideSeparator&CP.MOUSE_HOVER)||(e.focusInsideSeparator|=CP.MOUSE_HOVER,this._tree.rerender(e))}}))),this._register(this._tree.onMouseOut((e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const e of this._separatorRenderer.visibleSeparators){if(e!==t)continue;!!(e.focusInsideSeparator&CP.MOUSE_HOVER)&&(e.focusInsideSeparator&=~CP.MOUSE_HOVER,this._tree.rerender(e))}})))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection((e=>{const t=e.elements.filter((e=>e instanceof kP));t.length!==e.elements.length&&(1===e.elements.length&&e.elements[0]instanceof xP&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))})))}getAllVisibleChecked(){return this._allVisibleChecked(this._itemElements,!1)}getCheckedCount(){return this._itemElements.filter((e=>e.checked)).length}getVisibleCount(){return this._itemElements.filter((e=>!e.hidden)).length}setAllVisibleChecked(e){try{this._shouldFireCheckedEvents=!1,this._itemElements.forEach((t=>{t.hidden||t.checkboxDisabled||(t.checked=e)}))}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}setElements(e){this._elementDisposable.clear(),this._inputElements=e;const t=this.parent.classList.contains("show-checkboxes");let i;this._itemElements=new Array,this._elementTree=e.reduce(((n,s,o)=>{let r;if("separator"===s.type){if(!s.buttons)return n;i=new xP(o,(e=>this.fireSeparatorButtonTriggered(e)),s),r=i}else{const a=o>0?e[o-1]:void 0;let l;a&&"separator"===a.type&&!a.buttons&&(i=void 0,l=a);const h=new kP(o,t,(e=>this.fireButtonTriggered(e)),this._elementChecked,s,l);if(this._itemElements.push(h),i)return i.children.push(h),n;r=h}return n.push(r),n}),new Array);const n=new Array;let s=0;for(const e of this._elementTree)e instanceof xP?(n.push({element:e,collapsible:!1,collapsed:!1,children:e.children.map((e=>({element:e,collapsible:!1,collapsed:!1})))}),s+=e.children.length+1):(n.push({element:e,collapsible:!1,collapsed:!1}),s++);this._tree.setChildren(null,n),this._onChangedVisibleCount.fire(s)}getElementsCount(){return this._inputElements.length}getFocusedElements(){return this._tree.getFocus().filter((e=>!!e)).map((e=>e.item)).filter((e=>!!e))}setFocusedElements(e){const t=e.map((e=>this._itemElements.find((t=>t.item===e)))).filter((e=>!!e));if(this._tree.setFocus(t),e.length>0){const e=this._tree.getFocus()[0];e&&this._tree.reveal(e)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}getSelectedElements(){return this._tree.getSelection().filter((e=>!!e&&!!e.item)).map((e=>e.item))}setSelectedElements(e){const t=e.map((e=>this._itemElements.find((t=>t.item===e)))).filter((e=>!!e));this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter((e=>e.checked)).map((e=>e.item))}setCheckedElements(e){try{this._shouldFireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const e of this._itemElements)e.checked=t.has(e.item)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}focus(e){if(this._itemElements.length)switch(e===yP.Second&&this._itemElements.length<2&&(e=yP.First),e){case yP.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,(e=>e.element instanceof kP));break;case yP.Second:this._tree.scrollTop=0,this._tree.setFocus([this._itemElements[1]]);break;case yP.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]);break;case yP.Next:this._tree.focusNext(void 0,!0,void 0,(e=>e.element instanceof kP&&(this._tree.reveal(e.element),!0)));break;case yP.Previous:this._tree.focusPrevious(void 0,!0,void 0,(e=>{if(!(e.element instanceof kP))return!1;const t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0}));break;case yP.NextPage:this._tree.focusNextPage(void 0,(e=>e.element instanceof kP&&(this._tree.reveal(e.element),!0)));break;case yP.PreviousPage:this._tree.focusPreviousPage(void 0,(e=>{if(!(e.element instanceof kP))return!1;const t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0}));break;case yP.NextSeparator:{let e=!1;const t=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,(t=>{if(e)return!0;if(t.element instanceof xP)e=!0,this._separatorRenderer.isSeparatorVisible(t.element)?this._tree.reveal(t.element.children[0]):this._tree.reveal(t.element,0);else if(t.element instanceof kP){if(t.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),!0;if(t.element===this._elementTree[0])return this._tree.reveal(t.element,0),!0}return!1}));t===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]));break}case yP.PreviousSeparator:{let e,t=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,(i=>{if(i.element instanceof xP)t?e||(this._separatorRenderer.isSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),e=i.element.children[0]):t=!0;else if(i.element instanceof kP&&!e)if(i.element.separator)this._itemRenderer.isItemWithSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),e=i.element;else if(i.element===this._elementTree[0])return this._tree.reveal(i.element,0),!0;return!1})),e&&this._tree.setFocus([e]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?44*Math.floor(e/44)+6+"px":"",this._tree.layout()}filter(e){if(!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let i;this._elementTree.forEach((n=>{let s;s="fuzzy"===this.matchOnLabelMode?this.matchOnLabel?jv(e,$v(n.saneLabel))??void 0:void 0:this.matchOnLabel?function(e,t){const{text:i,iconOffsets:n}=t;if(!n||0===n.length)return AP(e,i);const s=Mi(i," "),o=i.length-s.length,r=AP(e,s);if(r)for(const e of r){const t=n[e.start+o]+o;e.start+=t,e.end+=t}return r}(t,$v(n.saneLabel))??void 0:void 0;const o=this.matchOnDescription?jv(e,$v(n.saneDescription||""))??void 0:void 0,r=this.matchOnDetail?jv(e,$v(n.saneDetail||""))??void 0:void 0;if(s||o||r?(n.labelHighlights=s,n.descriptionHighlights=o,n.detailHighlights=r,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!n.item||!n.item.alwaysShow),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){const e=n.index&&this._inputElements[n.index-1];i=e&&"separator"===e.type?e:i,i&&!n.hidden&&(n.separator=i,i=void 0)}}))}else this._itemElements.forEach((e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;const t=e.index&&this._inputElements[e.index-1];e.item&&(e.separator=t&&"separator"===t.type&&!t.buttons?t:void 0)}));const i=this._elementTree.filter((e=>!e.hidden));if(this.sortByLabel&&e){const t=e.toLowerCase();i.sort(((e,i)=>function(e,t,i){const n=e.labelHighlights||[],s=t.labelHighlights||[];if(n.length&&!s.length)return-1;if(!n.length&&s.length)return 1;if(0===n.length&&0===s.length)return 0;return function(e,t,i){const n=e.toLowerCase(),s=t.toLowerCase(),o=function(e,t,i){const n=e.toLowerCase(),s=t.toLowerCase(),o=n.startsWith(i),r=s.startsWith(i);if(o!==r)return o?-1:1;if(o&&r){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}(e,t,i);if(o)return o;const r=n.endsWith(i);if(r!==s.endsWith(i))return r?-1:1;const a=vP(n,s);return 0!==a?a:n.localeCompare(s)}(e.saneSortLabel,t.saneSortLabel,i)}(e,i,t)))}let n;const s=i.reduce(((e,t,i)=>(t instanceof kP?n?n.children.push(t):e.push(t):t instanceof xP&&(t.children=[],n=t,e.push(t)),e)),new Array),o=new Array;for(const e of s)e instanceof xP?o.push({element:e,collapsible:!1,collapsed:!1,children:e.children.map((e=>({element:e,collapsible:!1,collapsed:!1})))}):o.push({element:e,collapsible:!1,collapsed:!1});const r=this._tree.getFocus().length;return this._tree.setChildren(null,o),r>0&&0===o.length&&this._onTriggerEmptySelectionOrFocus.fire({elements:[]}),this._tree.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(i.length),!0}toggleCheckbox(){try{this._shouldFireCheckedEvents=!1;const e=this._tree.getFocus().filter((e=>e instanceof kP)),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}display(e){this._container.style.display=e?"":"none"}isDisplayed(){return"none"!==this._container.style.display}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e?.saneTooltip&&e instanceof kP))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();this.showHover(e);const t=new Xt;t.add(this._tree.onDidChangeFocus((e=>{e.elements[0]instanceof kP&&this.showHover(e.elements[0])}))),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n.hidden){if(!n.checked)return!1;t=!0}}return t}_fireCheckedEvents(){this._shouldFireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),e.element&&e.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};function AP(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return-1!==i?[{start:i,end:i+e.length}]:null}NP.__decorator=Bs([YS],NP.prototype,"onDidChangeFocus",null),NP.__decorator=Bs([YS],NP.prototype,"onDidChangeSelection",null),NP=Bs([zs(4,s)],NP);const MP="vs/platform/quickinput/browser/quickInput",RP={iconClass:Eb.asClassName(wg.quickInputBack),tooltip:u(MP,0,"Back"),handle:-1};class OP extends Qt{static{this.noPromptMessage=u(MP,1,"Press 'Enter' to confirm your input or 'Escape' to cancel")}constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=OP.noPromptMessage,this._severity=nd.Ignore,this.onDidTriggerButtonEmitter=this._register(new ui),this.onDidHideEmitter=this._register(new ui),this.onWillHideEmitter=this._register(new ui),this.onDisposeEmitter=this._register(new ui),this.visibleDisposables=this._register(new Xt),this.onDidTriggerButton=this.onDidTriggerButtonEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onWillHide=this.onWillHideEmitter.event,this.onDispose=this.onDisposeEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get widget(){return this._widget}set widget(e){e instanceof HTMLElement&&this._widget!==e&&(this._widget=e,this._widgetUpdated=!0,this.update())}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!B;this._ignoreFocusOut=e&&!B,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=KM.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=KM.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:e||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?gc(this.ui.widget,this._widget):gc(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new Ka,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const e=this.buttons.filter((e=>e===RP)).map(((e,t)=>eR(e,`id-${t}`,(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.leftActionBar.push(e,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const t=this.buttons.filter((e=>e!==RP)).map(((e,t)=>eR(e,`id-${t}`,(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.rightActionBar.push(t,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const e=this.toggles?.filter((e=>e instanceof YM))??[];this.ui.inputBox.toggles=e}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,gc(this.ui.message),tR(i,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?u(MP,2,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==nd.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}class FP extends OP{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ui),this.onWillAcceptEmitter=this._register(new ui),this.onDidAcceptEmitter=this._register(new ui),this.onDidCustomEmitter=this._register(new ui),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=qM.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ui),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ui),this.onDidTriggerItemButtonEmitter=this._register(new ui),this.onDidTriggerSeparatorButtonEmitter=this._register(new ui),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidCustom=this.onDidCustomEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}static{this.DEFAULT_ARIA_LABEL=u(MP,3,"Type to narrow down results.")}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){if(this._value!==e){if(this._value=e,t||this.update(),this.visible){this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?UM:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}inputHasFocus(){return!!this.visible&&this.ui.inputBox.hasFocus()}focusOnInput(){this.ui.inputBox.setFocus()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}get hideCountBadge(){return!!this._hideCountBadge}set hideCountBadge(e){this._hideCountBadge=e,this.update()}get hideCheckAll(){return!!this._hideCheckAll}set hideCheckAll(e){this._hideCheckAll=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(yP.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{this.doSetValue(e,!0)}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((e=>{switch(e.keyCode){case 18:void 0===this.quickNavigate&&(M?e.metaKey:e.altKey)?this.ui.list.focus(yP.NextSeparator):this.ui.list.focus(yP.Next),this.canSelectMany&&this.ui.list.domFocus(),lc(e,!0);break;case 16:void 0===this.quickNavigate&&(M?e.metaKey:e.altKey)?this.ui.list.focus(yP.PreviousSeparator):this.ui.list.focus(yP.Previous),this.canSelectMany&&this.ui.list.domFocus(),lc(e,!0);break;case 12:this.ui.list.focus(yP.NextPage),this.canSelectMany&&this.ui.list.domFocus(),lc(e,!0);break;case 11:this.ui.list.focus(yP.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),lc(e,!0);break;case 17:if(!this._canAcceptInBackground)return;if(!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(yP.First),lc(e,!0));break;case 13:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(yP.Last),lc(e,!0))}}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&at(e,this._activeItems,((e,t)=>e===t))||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((({items:e,event:t})=>{this.canSelectMany?e.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&at(e,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(sc(t)&&1===t.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&at(e,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((e=>this.onDidTriggerItemButtonEmitter.fire(e)))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((e=>this.onDidTriggerSeparatorButtonEmitter.fire(e)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return _h(this.ui.container,rc.KEY_UP,(e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new xa(e),i=t.keyCode;this._quickNavigate.keybindings.some((e=>{const n=e.getChords();return!(n.length>1)&&(n[0].shiftKey&&4===i?!(t.ctrlKey||t.altKey||t.metaKey):!(!n[0].altKey||6!==i)||(!(!n[0].ctrlKey||5!==i)||!(!n[0].metaKey||57!==i)))}))&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;if(!n&&i.inputBox&&(n=this.placeholder||FP.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated){this.itemsUpdated=!1;const e=this._activeItems;switch(this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case qM.NONE:e.length>0&&(this._activeItems=[],this.onDidChangeActiveEmitter.fire(this._activeItems)),this._itemActivation=qM.FIRST;break;case qM.SECOND:this.ui.list.focus(yP.Second),this._itemActivation=qM.FIRST;break;case qM.LAST:this.ui.list.focus(yP.Last),this._itemActivation=qM.FIRST;break;default:this.trySelectFirst()}}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(yP.First)),this.keepScrollPosition&&(this.scrollTop=e)}}class PP extends OP{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new ui),this.onDidAcceptEmitter=this._register(new ui),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.noValidationMessage=e?u(MP,4,"{0} (Press 'Enter' to confirm or 'Escape' to cancel)",e):OP.noPromptMessage,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>this.onDidAcceptEmitter.fire()))),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}class BP extends OP{update(){if(!this.visible)return;const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step};this.ui.setVisibilities(e),super.update()}}let zP=class extends iR{constructor(e,t){super("element",!1,(e=>this.getOverrideOptions(e)),e,t)}getOverrideOptions(e){return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(e.content instanceof HTMLElement?e.content.textContent??"":"string"==typeof e.content?e.content:e.content.value).includes("\n"),skipFadeInAnimation:!0}}}};zP=Bs([zs(0,Uo),zs(1,Am)],zP);Pm(".monaco-text-button{align-items:center;border:1px solid var(--vscode-button-border,transparent);border-radius:2px;box-sizing:border-box;cursor:pointer;display:flex;justify-content:center;line-height:18px;padding:4px;text-align:center;width:100%}.monaco-text-button:focus{outline-offset:2px!important}.monaco-text-button:hover{text-decoration:none!important}.monaco-button.disabled,.monaco-button.disabled:focus{cursor:default;opacity:.4!important}.monaco-text-button .codicon{color:inherit!important;margin:0 .2em}.monaco-text-button.monaco-text-button-with-short-label{flex-direction:row;flex-wrap:wrap;height:28px;overflow:hidden;padding:0 4px}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label{flex-basis:100%}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{flex-grow:1;overflow:hidden;width:0}.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label,.monaco-text-button.monaco-text-button-with-short-label>.monaco-button-label-short{align-items:center;display:flex;font-style:inherit;font-weight:400;justify-content:center;padding:4px 0}.monaco-button-dropdown{cursor:pointer;display:flex}.monaco-button-dropdown.disabled{cursor:default}.monaco-button-dropdown>.monaco-button:focus{outline-offset:-1px!important}.monaco-button-dropdown.disabled>.monaco-button-dropdown-separator,.monaco-button-dropdown.disabled>.monaco-button.disabled,.monaco-button-dropdown.disabled>.monaco-button.disabled:focus{opacity:.4!important}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-right-width:0!important}.monaco-button-dropdown .monaco-button-dropdown-separator{cursor:default;padding:4px 0}.monaco-button-dropdown .monaco-button-dropdown-separator>div{height:100%;width:1px}.monaco-button-dropdown>.monaco-button.monaco-dropdown-button{align-items:center;border:1px solid var(--vscode-button-border,transparent);border-left-width:0!important;border-radius:0 2px 2px 0;display:flex}.monaco-button-dropdown>.monaco-button.monaco-text-button{border-radius:2px 0 0 2px}.monaco-description-button{align-items:center;display:flex;flex-direction:column;margin:4px 5px}.monaco-description-button .monaco-button-description{font-size:11px;font-style:italic;padding:4px 20px}.monaco-description-button .monaco-button-description,.monaco-description-button .monaco-button-label{align-items:center;display:flex;justify-content:center}.monaco-description-button .monaco-button-description>.codicon,.monaco-description-button .monaco-button-label>.codicon{color:inherit!important;margin:0 .2em}.monaco-button-dropdown.default-colors>.monaco-button,.monaco-button.default-colors{background-color:var(--vscode-button-background);color:var(--vscode-button-foreground)}.monaco-button-dropdown.default-colors>.monaco-button:hover,.monaco-button.default-colors:hover{background-color:var(--vscode-button-hoverBackground)}.monaco-button-dropdown.default-colors>.monaco-button.secondary,.monaco-button.default-colors.secondary{background-color:var(--vscode-button-secondaryBackground);color:var(--vscode-button-secondaryForeground)}.monaco-button-dropdown.default-colors>.monaco-button.secondary:hover,.monaco-button.default-colors.secondary:hover{background-color:var(--vscode-button-secondaryHoverBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator{background-color:var(--vscode-button-background);border-bottom:1px solid var(--vscode-button-border);border-top:1px solid var(--vscode-button-border)}.monaco-button-dropdown.default-colors .monaco-button.secondary+.monaco-button-dropdown-separator{background-color:var(--vscode-button-secondaryBackground)}.monaco-button-dropdown.default-colors .monaco-button-dropdown-separator>div{background-color:var(--vscode-button-separator)}",{});class WP extends Qt{get onDidClick(){return this._onDidClick.event}get onDidEscape(){return this._onDidEscape.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new ui),this._onDidEscape=this._register(new ui),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),"string"==typeof t.title&&this.setTitle(t.title),"string"==typeof t.ariaLabel&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Db.addTarget(this._element)),[rc.CLICK,kb.Tap].forEach((e=>{this._register(_h(this._element,e,(e=>{this.enabled?this._onDidClick.fire(e):lc(e)})))})),this._register(_h(this._element,rc.KEY_DOWN,(e=>{const t=new xa(e);let i=!1;this.enabled&&(t.equals(3)||t.equals(10))?(this._onDidClick.fire(e),i=!0):t.equals(9)&&(this._onDidEscape.fire(e),this._element.blur(),i=!0),i&&lc(t,!0)}))),this._register(_h(this._element,rc.MOUSE_OVER,(e=>{this._element.classList.contains("disabled")||this.updateBackground(!0)}))),this._register(_h(this._element,rc.MOUSE_OUT,(e=>{this.updateBackground(!1)}))),this.focusTracker=this._register(cc(this._element)),this._register(this.focusTracker.onDidFocus((()=>{this.enabled&&this.updateBackground(!0)}))),this._register(this.focusTracker.onDidBlur((()=>{this.enabled&&this.updateBackground(!1)})))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of sv(e))if("string"==typeof i){if(i=i.trim(),""===i)continue;const e=document.createElement("span");e.textContent=i,t.push(e)}else t.push(i);return t}updateBackground(e){let t;t=this.options.secondary?e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e)return;if(Yv(this._label)&&Yv(e)&&((t=this._label)===(i=e)||t&&i&&t.value===i.value&&t.isTrusted===i.isTrusted&&t.supportThemeIcons===i.supportThemeIcons&&t.supportHtml===i.supportHtml&&(t.baseUri===i.baseUri||t.baseUri&&i.baseUri&&ds(Fe.from(t.baseUri),Fe.from(i.baseUri)))))return;var t,i;this._element.classList.add("monaco-text-button");const n=this.options.supportShortLabel?this._labelElement:this._element;if(Yv(e)){const t=f_(e,{inline:!0});t.dispose();const i=t.element.querySelector("p")?.innerHTML;if(i){const e=Xl(i,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});n.innerHTML=e}else gc(n)}else this.options.supportIcons?gc(n,...this.getContentElements(e)):n.textContent=e;let s="";"string"==typeof this.options.title?s=this.options.title:this.options.title&&(s=__(e)),this.setTitle(s),"string"==typeof this.options.ariaLabel?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",s),this._label=e}get label(){return this._label}set labelShort(e){this.options.supportShortLabel&&this._labelShortElement&&(this.options.supportIcons?gc(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}set icon(e){this._element.classList.add(...Eb.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){this._hover||""===e?this._hover&&this._hover.update(e):this._hover=this._register(rx().setupUpdatableHover(this.options.hoverDelegate??$S("mouse"),this._element,e))}focus(){this._element.focus()}hasFocus(){return Kh(this._element)}}Pm(".monaco-count-badge{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:11px;font-weight:400;line-height:11px;min-height:18px;min-width:18px;padding:3px 6px;text-align:center}.monaco-count-badge.long{border-radius:2px;line-height:normal;min-height:auto;padding:2px 3px}",{});class HP{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=dc(e,bc(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setCountFormat(e){this.countFormat=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=Ti(this.countFormat,this.count),this.element.title=Ti(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}let VP=()=>({msLoopTime:-1,msDelayTime:-1,dispose:()=>{}});Pm(".monaco-progress-container{height:2px;overflow:hidden;width:100%}.monaco-progress-container .progress-bit{display:none;height:2px;left:0;position:absolute;width:2%}.monaco-progress-container.active .progress-bit{display:inherit}.monaco-progress-container.discrete .progress-bit{left:0;transition:width .1s linear}.monaco-progress-container.discrete.done .progress-bit{width:100%}.monaco-progress-container.infinite .progress-bit{animation-duration:4s;animation-iteration-count:infinite;animation-name:progress;animation-timing-function:linear;transform:translateZ(0)}.monaco-progress-container.infinite.infinite-long-running .progress-bit{animation-timing-function:steps(100)}@keyframes progress{0%{transform:translateX(0) scaleX(1)}50%{transform:translateX(2500%) scaleX(3)}to{transform:translateX(4900%) scaleX(1)}}",{});const UP="done",KP="active",qP="infinite",$P="infinite-long-running",jP="discrete";class GP extends Qt{static{this.LONG_RUNNING_INFINITE_THRESHOLD=1e4}static{this.PROGRESS_SIGNAL_DEFAULT_DELAY=3e3}constructor(e,t){super(),this.progressSignal=this._register(new Zt),this.workedVal=0,this.showDelayedScheduler=this._register(new $a((()=>vc(this.element)),0)),this.longRunningScheduler=this._register(new $a((()=>this.infiniteLongRunning()),GP.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(KP,qP,$P,jP),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(UP),this.element.classList.contains(qP)?(this.bit.style.opacity="0",e?setTimeout((()=>this.off()),200):this.off()):(this.bit.style.width="inherit",e?setTimeout((()=>this.off()),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(jP,UP,$P),this.element.classList.add(KP,qP),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add($P)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return Nn(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){const t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(qP,$P,UP),this.element.classList.add(KP,jP),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=this.workedVal/t*100+"%",this}getContainer(){return this.element}show(e){var t;this.showDelayedScheduler.cancel(),this.progressSignal.value=VP(GP.PROGRESS_SIGNAL_DEFAULT_DELAY,t),"number"==typeof e?this.showDelayedScheduler.schedule(e):vc(this.element)}hide(){wc(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}}const YP=bc;class XP extends Qt{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=e=>Ch(this.findInput.inputBox.inputElement,rc.KEY_DOWN,e),this.onMouseDown=e=>Ch(this.findInput.inputBox.inputElement,rc.MOUSE_DOWN,e),this.onDidChange=e=>this.findInput.onDidChange(e),this.container=dc(this.parent,YP(".quick-input-box")),this.findInput=this._register(new HR(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const n=this.findInput.inputBox.inputElement;n.role="combobox",n.ariaHasPopup="menu",n.ariaAutoComplete="list",n.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}setPlaceholder(e){this.findInput.inputBox.setPlaceHolder(e)}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return"password"===this.findInput.inputBox.inputElement.type}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}hasFocus(){return this.findInput.inputBox.hasFocus()}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.findInput.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===nd.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===nd.Info?1:e===nd.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===nd.Info?1:e===nd.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}var QP;const ZP="vs/platform/quickinput/browser/quickInputController",JP=bc;let eB=class extends Qt{static{QP=this}static{this.MAX_WIDTH=600}get container(){return this._container}constructor(e,t,i){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ui),this.onDidCustomEmitter=this._register(new ui),this.onDidTriggerButtonEmitter=this._register(new ui),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ui),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ui),this.onHide=this.onHideEmitter.event,this.backButton=RP,this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(oi.runAndSubscribe(fh,(({window:e,disposables:t})=>this.registerKeyModsListeners(e,t)),{window:Gr,disposables:this._store})),this._register(mh((e=>{this.ui&&lh(this.ui.container)===e&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})))}registerKeyModsListeners(e,t){const i=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(const n of[rc.KEY_DOWN,rc.KEY_UP,rc.MOUSE_DOWN])t.add(_h(e,n,i,!0))}getUI(e){if(this.ui)return e&&lh(this._container)!==lh(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=dc(this._container,JP(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=Yh(t),n=dc(t,JP(".quick-input-titlebar")),s=this._register(new Gx(n,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const o=dc(n,JP(".quick-input-title")),r=this._register(new Gx(n,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-right-action-bar");const a=dc(t,JP(".quick-input-header")),l=dc(a,JP("input.quick-input-check-all"));l.type="checkbox",l.setAttribute("aria-label",u(ZP,0,"Toggle all checkboxes")),this._register(Ch(l,rc.CHANGE,(e=>{const t=l.checked;D.setAllVisibleChecked(t)}))),this._register(_h(l,rc.CLICK,(e=>{(e.x||e.y)&&g.setFocus()})));const h=dc(a,JP(".quick-input-description")),c=dc(a,JP(".quick-input-and-message")),d=dc(c,JP(".quick-input-filter")),g=this._register(new XP(d,this.styles.inputBox,this.styles.toggle));g.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=dc(d,JP(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const f=new HP(p,{countFormat:u(ZP,1,"{0} Results")},this.styles.countBadge),m=dc(d,JP(".quick-input-count"));m.setAttribute("aria-live","polite");const b=new HP(m,{countFormat:u(ZP,2,"{0} Selected")},this.styles.countBadge),v=dc(a,JP(".quick-input-action")),w=this._register(new WP(v,this.styles.button));w.label=u(ZP,3,"OK"),this._register(w.onDidClick((e=>{this.onDidAcceptEmitter.fire()})));const _=dc(a,JP(".quick-input-action")),y=this._register(new WP(_,{...this.styles.button,supportIcons:!0}));y.label=u(ZP,4,"Custom"),this._register(y.onDidClick((e=>{this.onDidCustomEmitter.fire()})));const C=dc(c,JP(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new GP(t,this.styles.progressBar));S.getContainer().classList.add("quick-input-progress");const k=dc(t,JP(".quick-input-html-widget"));k.tabIndex=-1;const x=dc(t,JP(".quick-input-description")),E=this.idPrefix+"list",D=this._register(this.instantiationService.createInstance(NP,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,E));g.setAttribute("aria-controls",E),this._register(D.onDidChangeFocus((()=>{g.setAttribute("aria-activedescendant",D.getActiveDescendant()??"")}))),this._register(D.onChangedAllVisibleChecked((e=>{l.checked=e}))),this._register(D.onChangedVisibleCount((e=>{f.setCount(e)}))),this._register(D.onChangedCheckedCount((e=>{b.setCount(e)}))),this._register(D.onLeave((()=>{setTimeout((()=>{this.controller&&(g.setFocus(),this.controller instanceof FP&&this.controller.canSelectMany&&D.clearFocus())}),0)})));const L=cc(t);return this._register(L),this._register(_h(t,rc.FOCUS,(e=>{Bh(e.relatedTarget,t)||(this.previousFocusElement=e.relatedTarget instanceof HTMLElement?e.relatedTarget:void 0)}),!0)),this._register(L.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(KM.Blur),this.previousFocusElement=void 0}))),this._register(_h(t,rc.FOCUS,(e=>{g.setFocus()}))),this._register(Ch(t,rc.KEY_DOWN,(e=>{if(!Bh(e.target,k))switch(e.keyCode){case 3:lc(e,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:lc(e,!0),this.hide(KM.Gesture);break;case 2:if(!e.altKey&&!e.ctrlKey&&!e.metaKey){const i=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?i.push("input"):i.push("input[type=text]"),this.getUI().list.isDisplayed()&&i.push(".monaco-list"),this.getUI().message&&i.push(".quick-input-message a"),this.getUI().widget){if(Bh(e.target,this.getUI().widget))break;i.push(".quick-input-html-widget")}const n=t.querySelectorAll(i.join(", "));e.shiftKey&&e.target===n[0]?(lc(e,!0),D.clearFocus()):!e.shiftKey&&Bh(e.target,n[n.length-1])&&(lc(e,!0),n[0].focus())}break;case 10:e.ctrlKey&&(lc(e,!0),this.getUI().list.toggleHover())}}))),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:n,title:o,description1:x,description2:h,widget:k,rightActionBar:r,checkAll:l,inputContainer:c,filterContainer:d,inputBox:g,visibleCountContainer:p,visibleCount:f,countContainer:m,count:b,okContainer:v,ok:w,message:C,customButtonContainer:_,customButton:y,list:D,progressBar:S,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,dc(this._container,this.ui.container))}pick(e,t={},i=Ci.None){return new Promise(((n,s)=>{let o=e=>{o=n,t.onKeyMods?.(r.keyMods),n(e)};if(i.isCancellationRequested)return void o(void 0);const r=this.createQuickPick();let a;const l=[r,r.onDidAccept((()=>{if(r.canSelectMany)o(r.selectedItems.slice()),r.hide();else{const e=r.activeItems[0];e&&(o(e),r.hide())}})),r.onDidChangeActive((e=>{const i=e[0];i&&t.onDidFocus&&t.onDidFocus(i)})),r.onDidChangeSelection((e=>{if(!r.canSelectMany){const t=e[0];t&&(o(t),r.hide())}})),r.onDidTriggerItemButton((e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...e,removeItem:()=>{const t=r.items.indexOf(e.item);if(-1!==t){const e=r.items.slice(),i=e.splice(t,1),n=r.activeItems.filter((e=>e!==i[0])),s=r.keepScrollPosition;r.keepScrollPosition=!0,r.items=e,n&&(r.activeItems=n),r.keepScrollPosition=s}}}))),r.onDidTriggerSeparatorButton((e=>t.onDidTriggerSeparatorButton?.(e))),r.onDidChangeValue((e=>{!a||e||1===r.activeItems.length&&r.activeItems[0]===a||(r.activeItems=[a])})),i.onCancellationRequested((()=>{r.hide()})),r.onDidHide((()=>{jt(l),o(void 0)}))];r.title=t.title,r.canSelectMany=!!t.canPickMany,r.placeholder=t.placeHolder,r.ignoreFocusOut=!!t.ignoreFocusLost,r.matchOnDescription=!!t.matchOnDescription,r.matchOnDetail=!!t.matchOnDetail,r.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,r.quickNavigate=t.quickNavigate,r.hideInput=!!t.hideInput,r.contextKey=t.contextKey,r.busy=!0,Promise.all([e,t.activeItem]).then((([e,t])=>{a=t,r.busy=!1,r.items=e,r.canSelectMany&&(r.selectedItems=e.filter((e=>"separator"!==e.type&&e.picked))),a&&(r.activeItems=[a])})),r.show(),Promise.resolve(e).then(void 0,(e=>{s(e),r.hide()}))}))}setValidationOnInput(e,t){t&&Ln(t)?(e.severity=nd.Error,e.validationMessage=t):t&&!Ln(t)?(e.severity=t.severity,e.validationMessage=t.content):(e.severity=nd.Ignore,e.validationMessage=void 0)}input(e={},t=Ci.None){return new Promise((i=>{if(t.isCancellationRequested)return void i(void 0);const n=this.createInputBox(),s=e.validateInput||(()=>Promise.resolve(void 0)),o=oi.debounce(n.onDidChangeValue,((e,t)=>t),100);let r=e.value||"",a=Promise.resolve(s(r));const l=[n,o((e=>{e!==r&&(a=Promise.resolve(s(e)),r=e),a.then((t=>{e===r&&this.setValidationOnInput(n,t)}))})),n.onDidAccept((()=>{const e=n.value;e!==r&&(a=Promise.resolve(s(e)),r=e),a.then((t=>{!t||!Ln(t)&&t.severity!==nd.Error?(i(e),n.hide()):e===r&&this.setValidationOnInput(n,t)}))})),t.onCancellationRequested((()=>{n.hide()})),n.onDidHide((()=>{jt(l),i(void 0)}))];n.title=e.title,n.value=e.value||"",n.valueSelection=e.valueSelection,n.prompt=e.prompt,n.placeholder=e.placeHolder,n.password=!!e.password,n.ignoreFocusOut=!!e.ignoreFocusLost,n.show()}))}createQuickPick(){const e=this.getUI(!0);return new FP(e)}createInputBox(){const e=this.getUI(!0);return new PP(e)}createQuickWidget(){const e=this.getUI(!0);return new BP(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",gc(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(nd.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),gc(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const n=this.options.backKeybindingLabel();RP.tooltip=n?u(ZP,5,"Back ({0})",n):u(ZP,6,"Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}isVisible(){return!!this.ui&&"none"!==this.ui.container.style.display}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const i=this.ui?.container,n=i&&!qh(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!n){let e=this.previousFocusElement;for(;e&&!e.offsetParent;)e=e.parentElement??void 0;e?.offsetParent?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}focus(){if(this.isVisible()){const e=this.getUI();e.inputBox.enabled?e.inputBox.setFocus():e.list.domFocus()}}toggle(){this.isVisible()&&this.controller instanceof FP&&this.controller.canSelectMany&&this.getUI().list.toggleCheckbox()}navigate(e,t){this.isVisible()&&this.getUI().list.isDisplayed()&&(this.getUI().list.focus(e?yP.Next:yP.Previous),t&&this.controller instanceof FP&&(this.controller.quickNavigate=t))}async accept(e={alt:!1,ctrlCmd:!1}){this.keyMods.alt=e.alt,this.keyMods.ctrlCmd=e.ctrlCmd,this.onDidAcceptEmitter.fire()}async back(){this.onDidTriggerButtonEmitter.fire(this.backButton)}async cancel(){this.hide()}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(.62*this.dimension.width,QP.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const r=o.join("\n");r!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=r)}}};eB=QP=Bs([zs(1,Jc),zs(2,s)],eB);let tB=class extends Eg{get backButton(){return this.controller.backButton}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(jM))),this._quickAccess}constructor(e,t,i,n,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=s,this._onShow=this._register(new ui),this.onShow=this._onShow.event,this._onHide=this._register(new ui),this.onHide=this._onHide.event,this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction((t=>{t.get(Yb).open(e,{allowCommands:!0,fromUserGesture:!0})}))},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(zP))},n=this._register(this.instantiationService.createInstance(eB,{...i,...t}));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer((t=>{lh(e.activeContainer)===lh(n.container)&&n.layout(t,e.activeContainerOffset.quickPickTop)}))),this._register(e.onDidChangeActiveContainer((()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)}))),this._register(n.onShow((()=>{this.resetContextKeys(),this._onShow.fire()}))),this._register(n.onHide((()=>{this.resetContextKeys(),this._onHide.fire()}))),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Cu(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),t&&t.get()||(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach((e=>{e.get()&&e.reset()}))}pick(e,t={},i=Ci.None){return this.controller.pick(e,t,i)}input(e={},t=Ci.None){return this.controller.input(e,t)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}createQuickWidget(){return this.controller.createQuickWidget()}focus(){this.controller.focus()}toggle(){this.controller.toggle()}navigate(e,t){this.controller.navigate(e,t)}accept(e){return this.controller.accept(e)}back(){return this.controller.back()}cancel(){return this.controller.cancel()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Mg(Cm),quickInputForeground:Mg(Sm),quickInputTitleBackground:Mg(km),widgetBorder:Mg(Ap),widgetShadow:Mg(Np)},inputBox:Mx,toggle:Ax,countBadge:Ox,button:Tx,progressBar:Nx,keybindingLabel:Ix,list:Px({listBackground:Cm,listFocusBackground:Tm,listFocusForeground:Lm,listInactiveFocusForeground:Lm,listInactiveSelectionIconForeground:Im,listInactiveFocusBackground:Tm,listFocusOutline:Qg,listInactiveFocusOutline:Qg}),pickerGroup:{pickerGroupBorder:Mg(Em),pickerGroupForeground:Mg(xm)}}}};tB=Bs([zs(0,s),zs(1,Qc),zs(2,Wc),zs(3,Jc),zs(4,Uo)],tB);let iB=class extends tB{constructor(e,t,i,n,s,o){super(t,i,n,new td(e.getContainerDomNode(),s),o),this.host=void 0;const r=sB.get(e);if(r){const t=r.widget;this.host={_serviceBrand:void 0,get mainContainer(){return t.getDomNode()},getContainer(){return t.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[t.getDomNode()]},get activeContainer(){return t.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return oi.map(e.onDidLayoutChange,(e=>({container:t.getDomNode(),dimension:e})))},get onDidChangeActiveContainer(){return oi.None},get onDidAddContainer(){return oi.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};iB=Bs([zs(1,s),zs(2,Qc),zs(3,Wc),zs(4,Xc),zs(5,Uo)],iB);let nB=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(iB,e);this.mapEditorToService.set(e,t),zt(e.onDidDispose)((()=>{i.dispose(),this.mapEditorToService.delete(e)}))}return t}get quickAccess(){return this.activeService.quickAccess}get backButton(){return this.activeService.backButton}get onShow(){return this.activeService.onShow}get onHide(){return this.activeService.onHide}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},i=Ci.None){return this.activeService.pick(e,t,i)}input(e,t){return this.activeService.input(e,t)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}createQuickWidget(){return this.activeService.createQuickWidget()}focus(){return this.activeService.focus()}toggle(){return this.activeService.toggle()}navigate(e,t){return this.activeService.navigate(e,t)}accept(){return this.activeService.accept()}back(){return this.activeService.back()}cancel(){return this.activeService.cancel()}};nB=Bs([zs(0,s),zs(1,Xc)],nB);class sB{static{this.ID="editor.controller.quickInput"}static get(e){return e.getContribution(sB.ID)}constructor(e){this.editor=e,this.widget=new oB(this.editor)}dispose(){this.widget.dispose()}}class oB{static{this.ID="editor.contrib.quickInputWidget"}constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return oB.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}!function(e,t,i){PM.INSTANCE.registerEditorContribution(e,t,i)}(sB.ID,sB,4);class rB{constructor(e,t,i,n,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=s}}const aB=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class lB{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;const t=e.match(aB);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=Ng.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class hB{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(function(e){if(!e||!Array.isArray(e))return[];const t=[];let i=0;for(let n=0,s=e.length;n<s;n++){const s=e[n];let o=-1;if("string"==typeof s.fontStyle){o=0;const e=s.fontStyle.split(" ");for(let t=0,i=e.length;t<i;t++)switch(e[t]){case"italic":o|=1;break;case"bold":o|=2;break;case"underline":o|=4;break;case"strikethrough":o|=8}}let r=null;"string"==typeof s.foreground&&(r=s.foreground);let a=null;"string"==typeof s.background&&(a=s.background),t[i++]=new rB(s.token||"",n,o,r,a)}return t}(e),t)}static createFromParsedTokenTheme(e,t){return function(e,t){e.sort(((e,t)=>{const i=function(e,t){return e<t?-1:e>t?1:0}(e.token,t.token);return 0!==i?i:e.index-t.index}));let i=0,n="000000",s="ffffff";for(;e.length>=1&&""===e[0].token;){const t=e.shift();-1!==t.fontStyle&&(i=t.fontStyle),null!==t.foreground&&(n=t.foreground),null!==t.background&&(s=t.background)}const o=new lB;for(const e of t)o.getId(e);const r=o.getId(n),a=o.getId(s),l=new dB(i,r,a),h=new gB(l);for(let t=0,i=e.length;t<i;t++){const i=e[t];h.insert(i.token,i.fontStyle,o.getId(i.foreground),o.getId(i.background))}return new hB(o,h)}(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}getThemeTrieElement(){return this._root.toExternalThemeTrieElement()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(void 0===i){const e=this._match(t),n=function(e){const t=e.match(cB);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(t);i=(e.metadata|n<<8)>>>0,this._cache.set(t,i)}return(i|e)>>>0}}const cB=/\b(comment|string|regex|regexp)\b/;class dB{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new dB(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){-1!==e&&(this._fontStyle=e),0!==t&&(this._foreground=t),0!==i&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class uB{constructor(e,t=new Map){if(this.mainRule=e,t instanceof Map)this.children=t;else{this.children=new Map;for(const e in t)this.children.set(e,t[e])}}}class gB{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}toExternalThemeTrieElement(){const e=new Map;return this._children.forEach(((t,i)=>{e.set(i,t.toExternalThemeTrieElement())})),new uB(this._mainRule,e)}match(e){if(""===e)return this._mainRule;const t=e.indexOf(".");let i,n;-1===t?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const s=this._children.get(i);return void 0!==s?s.match(n):this._mainRule}insert(e,t,i,n){if(""===e)return void this._mainRule.acceptOverwrite(t,i,n);const s=e.indexOf(".");let o,r;-1===s?(o=e,r=""):(o=e.substring(0,s),r=e.substring(s+1));let a=this._children.get(o);void 0===a&&(a=new gB(this._mainRule.clone()),this._children.set(o,a)),a.insert(r,t,i,n)}}const pB={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[lp]:"#FFFFFE",[hp]:"#000000",[_p]:"#E5EBF1",[MI]:"#D3D3D3",[RI]:"#939393",[yp]:"#ADD6FF4D"}},fB={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[lp]:"#1E1E1E",[hp]:"#D4D4D4",[_p]:"#3A3D41",[MI]:"#404040",[RI]:"#707070",[yp]:"#ADD6FF26"}},mB={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[lp]:"#000000",[hp]:"#FFFFFF",[MI]:"#FFFFFF",[RI]:"#FFFFFF"}},bB={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[lp]:"#FFFFFF",[hp]:"#292929",[MI]:"#292929",[RI]:"#292929"}},vB="vs/platform/theme/common/iconRegistry";var wB;!function(e){e.toJSONObject=function(e){return{weight:e.weight,style:e.style,src:e.src.map((e=>({format:e.format,location:e.location.toString()})))}},e.fromJSONObject=function(e){const t=e=>Ln(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every((e=>Ln(e.format)&&Ln(e.location))))return{weight:t(e.weight),style:t(e.style),src:e.src.map((e=>({format:e.format,location:Fe.parse(e.location)})))}}}(wB||(wB={}));const _B=new class{constructor(){this._onDidChange=new ui,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:u(vB,0,"The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:u(vB,1,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Eb.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=i),this._onDidChange.fire()}return s}const o={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=o;const r={$ref:"#/definitions/icons"};return n&&(r.deprecationMessage=n),i&&(r.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=r,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map((e=>this.iconsById[e]))}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){const i=this.iconFontsById[e];return i||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;Eb.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map((e=>this.iconsById[e]));for(const s of n.filter((e=>!!e.description)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${Eb.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of n.filter((e=>!Eb.isThemeIcon(e.defaults))).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join("\n")}};function yB(e,t,i,n){return _B.registerIcon(e,t,i,n)}function CB(){return _B}Jo.add("base.contributions.icons",_B),function(){const e=vg();for(const t in e){const i="\\"+e[t].toString(16);_B.registerIcon(t,{fontCharacter:i})}}();const SB="vscode://schemas/icons",kB=Jo.as(lr);kB.registerSchema(SB,_B.getIconSchema());const xB=new $a((()=>kB.notifySchemaChanged(SB)),200);_B.onDidChange((()=>{xB.isScheduled()||xB.schedule()}));yB("widget-close",wg.close,u(vB,2,"Icon for the close action in widgets.")),yB("goto-previous-location",wg.arrowUp,u(vB,3,"Icon for goto previous editor location.")),yB("goto-next-location",wg.arrowDown,u(vB,4,"Icon for goto next editor location.")),Eb.modify(wg.sync,"spin"),Eb.modify(wg.loading,"spin");class EB{getIcon(e){const t=CB();let i=e.defaults;for(;Eb.isThemeIcon(i);){const e=t.getIcon(i.id);if(!e)return;i=e.defaults}return i}}const DB="vs",LB="vs-dark",IB="hc-black",TB="hc-light",NB=Jo.as(Rg),AB=Jo.as(Sg);class MB{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(RB(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get label(){return this.themeName}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,Ng.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=OB(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,Ng.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);return i||(!1!==t?this.getDefault(e):void 0)}getDefault(e){let t=this.defaultColors[e];return t||(t=NB.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case DB:return _g.LIGHT;case IB:return _g.HIGH_CONTRAST_DARK;case TB:return _g.HIGH_CONTRAST_LIGHT;default:return _g.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const i=OB(this.themeData.base);e=i.rules,i.encodedTokensColors&&(t=i.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const t={token:""};i&&(t.foreground=i),n&&(t.background=n),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=hB.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const n=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=Ad.getForeground(n),o=Ad.getFontStyle(n);return{foreground:s,italic:Boolean(1&o),bold:Boolean(2&o),underline:Boolean(4&o),strikethrough:Boolean(8&o)}}get tokenColorMap(){return[]}}function RB(e){return e===DB||e===LB||e===IB||e===TB}function OB(e){switch(e){case DB:return pB;case LB:return fB;case IB:return mB;case TB:return bB}}function FB(e){const t=OB(e);return new MB(e,t)}const PB=o("themeService"),BB=new Cu("accessibilityModeEnabled",!1);let zB=class extends Qt{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ui,this._onDidChangeReducedMotion=new ui,this._accessibilityModeEnabledContext=BB.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())}))),n(),this._register(this.onDidChangeScreenReaderOptimized((()=>n())));const s=Gr.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){this._register(_h(e,"change",(()=>{this._systemMotionReduced=e.matches,"auto"===this._configMotionReduced&&this._onDidChangeReducedMotion.fire()})));const t=()=>{const e=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",e),this._layoutService.mainContainer.classList.toggle("enable-motion",!e)};t(),this._register(this.onDidChangeReducedMotion((()=>t())))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return"on"===e||"auto"===e&&this._systemMotionReduced}alwaysUnderlineAccessKeys(){return Promise.resolve(!1)}getAccessibilitySupport(){return this._accessibilitySupport}setAccessibilitySupport(e){this._accessibilitySupport!==e&&(this._accessibilitySupport=e,this._onDidChangeScreenReaderOptimized.fire())}alert(e){Sy(e)}status(e){ky(e)}};var WB,HB;zB=Bs([zs(0,Qc),zs(1,Jc),zs(2,Uo)],zB);const VB="vs/platform/actions/common/menuService";let UB=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new KB(i)}createMenu(e,t,i){return new $B(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};UB=Bs([zs(0,fC),zs(1,Bm),zs(2,Dx)],UB);let KB=class{static{WB=this}static{this._key="menu.hiddenCommands"}constructor(e){this._storageService=e,this._disposables=new Xt,this._onDidChange=new ui,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(WB._key,0,"{}");this._data=JSON.parse(t)}catch(e){this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,WB._key,this._disposables)((()=>{if(!this._ignoreChangeEvent)try{const t=e.get(WB._key,0,"{}");this._data=JSON.parse(t)}catch(e){console.log("FAILED to read storage after UPDATE",e)}this._onDidChange.fire()})))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){const i=this._isHiddenByDefault(e,t),n=this._data[e.id]?.includes(t)??!1;return i?!n:n}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const n=this._data[e.id];if(i)if(n){n.indexOf(t)<0&&n.push(t)}else this._data[e.id]=[t];else if(n){const i=n.indexOf(t);i>=0&&function(e,t){const i=e.length-1;t<i&&(e[t]=e[i]),e.pop()}(n,i),0===n.length&&delete this._data[e.id]}this._persist()}reset(e){if(void 0===e)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(WB._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};KB=WB=Bs([zs(0,Dx)],KB);let qB=HB=class{constructor(e,t,i,n,s,o){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=i,this._commandService=n,this._keybindingService=s,this._contextKeyService=o,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=Sx.getMenuItems(this._id);let t;e.sort(HB._compareMenuItems);for(const i of e){const e=i.group||"";t&&t[0]===e||(t=[e,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(HB._fillInKbExprKeys(e.when,this._structureContextKeys),_x(e)){if(e.command.precondition&&HB._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;HB._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&Sx.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[n,s]=i,o=[];for(const t of s)if(this._contextKeyService.contextMatchesRules(t.when)){const i=_x(t);i&&this._hiddenStates.setDefaultState(this._id,t.command.id,!!t.isHiddenByDefault);const n=jB(this._id,i?t.command:t,this._hiddenStates);if(i){const i=GB(t.command.id,t.when,this._commandService,this._keybindingService);o.push(new xx(t.command,t.alt,e,n,i,this._contextKeyService,this._commandService))}else{const i=new HB(t.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),s=BS.join(...i.map((e=>e[1])));s.length>0&&o.push(new kx(t,n,s))}}o.length>0&&t.push([n,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(!i)return 1;if(!n)return-1;if("navigation"===i)return-1;if("navigation"===n)return 1;const e=i.localeCompare(n);if(0!==e)return e}const s=e.order||0,o=t.order||0;return s<o?-1:s>o?1:HB._compareTitles(_x(e)?e.command.title:e.title,_x(t)?t.command.title:t.title)}static _compareTitles(e,t){const i="string"==typeof e?e:e.original,n="string"==typeof t?t:t.original;return i.localeCompare(n)}};qB=HB=Bs([zs(3,fC),zs(4,Bm),zs(5,Qc)],qB);let $B=class{constructor(e,t,i,n,s,o){this._disposables=new Xt,this._menuInfo=new qB(e,t,i.emitEventsForSubmenuChanges,n,s,o);const r=new $a((()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})}),i.eventDebounceDelay);this._disposables.add(r),this._disposables.add(Sx.onDidChangeMenu((t=>{t.has(e)&&r.schedule()})));const a=this._disposables.add(new Xt);this._onDidChange=new fi({onWillAddFirstListener:()=>{a.add(o.onDidChangeContext((e=>{const t=e.affectsSome(this._menuInfo.structureContextKeys),i=e.affectsSome(this._menuInfo.preconditionContextKeys),n=e.affectsSome(this._menuInfo.toggledContextKeys);(t||i||n)&&this._onDidChange.fire({menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n})}))),a.add(t.onDidChange((e=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})})))},onDidRemoveLastListener:a.clear.bind(a),delay:i.eventDebounceDelay,merge:e=>{let t=!1,i=!1,n=!1;for(const s of e)if(t=t||s.isStructuralChange,i=i||s.isEnablementChange,n=n||s.isToggleChange,t&&i&&n)break;return{menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n}}}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function jB(e,t,i){const n=void 0!==t.submenu?t.submenu.id:t.id;const s="string"==typeof t.title?t.title:t.title.value,o=HS({id:`hide/${e.id}/${n}`,label:u(VB,0,"Hide '{0}'",s),run(){i.updateHidden(e,n,!0)}}),r=HS({id:`toggle/${e.id}/${n}`,label:s,get checked(){return!i.isHidden(e,n)},run(){i.updateHidden(e,n,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}function GB(e,t=void 0,i,n){return HS({id:`configureKeybinding/${e}`,label:u(VB,1,"Configure Keybinding"),run(){const s=!!!n.lookupKeybinding(e)&&t?t.serialize():void 0;i.executeCommand("workbench.action.openGlobalKeybindings",`@command:${e}`+(s?` +when:${s}`:""))}})}var YB;$B=Bs([zs(3,fC),zs(4,Bm),zs(5,Qc)],$B);let XB=class extends Qt{static{YB=this}constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(ta||ia)&&this.installWebKitWriteTextWorkaround(),this._register(oi.runAndSubscribe(fh,(({window:e,disposables:t})=>{t.add(_h(e.document,"copy",(()=>this.clearResources())))}),{window:Gr,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const e=new Za;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch((async t=>{t instanceof Error&&"NotAllowedError"===t.name&&e.isRejected||this.logService.error(t)}))};this._register(oi.runAndSubscribe(this.layoutService.onDidAddContainer,(({container:t,disposables:i})=>{i.add(_h(t,"click",e)),i.add(_h(t,"keydown",e))}),{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.writeResources([]),t)this.mapTextToType.set(t,e);else{if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await navigator.clipboard.writeText(e)}catch(e){console.error(e)}this.fallbackWriteText(e)}}fallbackWriteText(e){const t=$h(),i=t.activeElement,n=t.body.appendChild(bc("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),i instanceof HTMLElement&&i.focus(),t.body.removeChild(n)}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await navigator.clipboard.readText()}catch(e){console.error(e)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}static{this.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3}async writeResources(e){0===e.length?this.clearResources():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(0===this.resources.length)return;return Jl((await this.readText()).substring(0,YB.MAX_RESOURCE_STATE_SOURCE_LENGTH))}async hasResources(){return this.resources.length>0}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};XB=YB=Bs([zs(0,Jc),zs(1,Ed)],XB);const QB=o("clipboardService"),ZB="data-keybinding-context";class JB{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}updateParent(e){this._parent=e}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e={...e,...this._value},delete e._contextId,e}}class ez extends JB{static{this.INSTANCE=new ez}constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}}class tz extends JB{static{this._keyPrefix="config."}constructor(e,t,i){super(e,null),this._configurationService=t,this._values=hS.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((e=>{if(7===e.source){const e=Array.from(this._values,(([e])=>e));this._values.clear(),i.fire(new sz(e))}else{const t=[];for(const i of e.affectedKeys){const e=`config.${i}`,n=this._values.findSuperstr(e);void 0!==n&&(t.push(...It.map(n,(([e])=>e))),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}i.fire(new sz(t))}}))}dispose(){this._listener.dispose()}getValue(e){if(0!==e.indexOf(tz._keyPrefix))return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(tz._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:n=Array.isArray(i)?JSON.stringify(i):i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach(((t,i)=>e[i]=t)),{...e,...super.collectAllValues()}}}class iz{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class nz{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class sz{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every((t=>e.has(t)))}}class oz{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every((t=>t.allKeysContainedIn(e)))}}class rz extends Qt{constructor(e){super(),this._onDidChangeContext=this._register(new pi({merge:e=>new oz(e)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new iz(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new lz(this,e)}createOverlay(e=It.empty()){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new cz(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return!e||e.evaluate(t)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new nz(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new nz(e))}getContext(e){return this._isDisposed?ez.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute(ZB)){const t=e.getAttribute(ZB);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}dispose(){super.dispose(),this._isDisposed=!0}}let az=class extends rz{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new tz(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?ez.INSTANCE:this._contexts.get(e)||ez.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new JB(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw new Error("Cannot update parent of root ContextKeyService")}};az=Bs([zs(0,Uo)],az);class lz extends rz{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Zt),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(ZB)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(e?": "+e:""))}this._domNode.setAttribute(ZB,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext((e=>{const t=this._parent.getContextValuesContainer(this._myContextId).value;var i;i=t,e.allKeysContainedIn(new Set(Object.keys(i)))||this._onDidChangeContext.fire(e)}))}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(ZB),super.dispose())}getContextValuesContainer(e){return this._isDisposed?ez.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}updateParent(e){if(this._parent===e)return;const t=this._parent.getContextValuesContainer(this._myContextId),i=t.collectAllValues();this._parent=e,this._updateParentChangeListener();const n=this._parent.getContextValuesContainer(this._parent.contextId);t.updateParent(n);const s=t.collectAllValues(),o={...$n(i,s),...$n(s,i)},r=Object.keys(o);this._onDidChangeContext.fire(new sz(r))}}class hz{constructor(e,t){this.parent=e,this.overlay=t}getValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getValue(e)}}class cz{get contextId(){return this.parent.contextId}get onDidChangeContext(){return this.parent.onDidChangeContext}constructor(e,t){this.parent=e,this.overlay=new Map(t)}bufferChangeEvents(e){this.parent.bufferChangeEvents(e)}createKey(){throw new Error("Not supported.")}getContext(e){return new hz(this.parent.getContext(e),this.overlay)}getContextValuesContainer(e){const t=this.parent.getContextValuesContainer(e);return new hz(t,this.overlay)}contextMatchesRules(e){const t=this.getContextValuesContainer(this.contextId);return!e||e.evaluate(t)}getContextKeyValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getContextKeyValue(e)}createScoped(){throw new Error("Not supported.")}createOverlay(e=It.empty()){return new cz(this,e)}updateParent(){throw new Error("Not supported.")}}mC.registerCommand("_setContext",(function(e,t,i){e.get(Qc).createKey(String(t),function(e){return Un(e,(e=>"object"==typeof e&&1===e.$mid?Fe.revive(e).toString():e instanceof Fe?e.toString():void 0))}(i))})),mC.registerCommand({id:"getContextKeyInfo",handler(){return[...Cu.all()].sort(((e,t)=>e.key.localeCompare(t.key)))},metadata:{description:u("vs/platform/contextkey/browser/contextKeyService",0,"A command that returns information about context keys"),args:[]}}),mC.registerCommand("_generateContextKeyInfo",(function(){const e=[],t=new Set;for(const i of Cu.all())t.has(i.key)||(t.add(i.key),e.push(i));e.sort(((e,t)=>e.key.localeCompare(t.key))),console.log(JSON.stringify(e,void 0,2))}));class dz{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}}class uz{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const e of this._nodes.values())e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new dz(t,e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}\n\t(-> incoming)[${[...i.incoming.keys()].join(", ")}]\n\t(outgoing ->)[${[...i.outgoing.keys()].join(",")}]\n`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const e=this._findCycle(n,t);if(e)return e;t.delete(i)}}}class gz{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}class pz extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}class fz{constructor(e=new gz,t=!1,i,n=false){this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(s,this),this._globalGraph=n?i?._globalGraph??new uz((e=>e)):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,jt(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)$t(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e){this._throwIfDisposed();const t=new class extends fz{dispose(){this._children.delete(t),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(t),t}invokeFunction(e,...t){this._throwIfDisposed();const i=mz.traceInvocation(this._enableTracing,e);let n=!1;try{const s={get:e=>{if(n)throw tt("service accessor is only valid during the invocation of its target method");const t=this._getOrCreateServiceInstance(e,i);if(!t)throw new Error(`[invokeFunction] unknown service '${e}'`);return t}};return e(s,...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return this._throwIfDisposed(),e instanceof qo?(i=mz.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=mz.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const s=n.getServiceDependencies(e).sort(((e,t)=>e.index-t.index)),o=[];for(const t of s){const n=this._getOrCreateServiceInstance(t.id,i);n||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`,!1),o.push(n)}const r=s.length>0?s[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const i=r-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof qo)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setCreatedServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof qo?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const s=new uz((e=>e.id.toString()));let o=0;const r=[{id:e,desc:t,_trace:i}];for(;r.length;){const t=r.pop();if(s.lookupOrInsertNode(t),o++>1e3)throw new pz(s);for(const i of n.getServiceDependencies(t.desc.ctor)){const n=this._getServiceInstanceOrDescriptor(i.id);if(n||this._throwIfStrict(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(t.id),String(i.id)),n instanceof qo){const e={id:i.id,desc:n,_trace:t._trace.branch(i.id,!0)};s.lookup(e)||r.push(e),s.insertEdge(t,e)}}}for(;;){const e=s.roots();if(0===e.length){if(!s.isEmpty())throw new pz(s);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof qo){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setCreatedServiceInstance(t.id,e)}s.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,s){if(this._services.get(e)instanceof qo)return this._createServiceInstance(e,t,i,n,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,s,o){if(n){const n=new fz(void 0,this._strict,this,this._enableTracing);n._globalGraphImplicitDependency=String(e);const r=new Map,a=new Xa((()=>{const e=n._createInstance(t,i,s);for(const[t,i]of r){const n=e[t];if("function"==typeof n)for(const t of i)t.disposable=n.apply(e,t.listener)}return r.clear(),o.add(e),e}));return new Proxy(Object.create(null),{get(e,t){if(!a.isInitialized&&"string"==typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=r.get(t);e||(e=new ii,r.set(t,e));return(i,n,s)=>{if(a.isInitialized)return a.value[t](i,n,s);{const t={listener:[i,n,s],disposable:void 0},o=e.push(t);return Yt((()=>{o(),t.disposable?.dispose()}))}}}if(t in e)return e[t];const i=a.value;let n=i[t];return"function"!=typeof n||(n=n.bind(i),e[t]=n),n},set(e,t,i){return a.value[t]=i,!0},getPrototypeOf(e){return t.prototype}})}{const e=this._createInstance(t,i,s);return o.add(e),e}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class mz{static{this.all=new Set}static{this._None=new class extends mz{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,t){return e?new mz(2,t.name||(new Error).stack.split("\n").slice(3,4).join("\n")):mz._None}static traceCreation(e,t){return e?new mz(1,t.name):mz._None}static{this._totals=0}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new mz(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;mz._totals+=e;let t=!1;const i=[`${1===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(i,n){const s=[],o=new Array(i+1).join("\t");for(const[r,a,l]of n._dep)if(a&&l){t=!0,s.push(`${o}CREATES -> ${r}`);const n=e(i+1,l);n&&s.push(n)}else s.push(`${o}uses -> ${r}`);return s.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${mz._totals.toFixed(2)}ms)`];(e>2||t)&&mz.all.add(i.join("\n"))}}const bz=new Set([vn.inMemory,vn.vscodeSourceControl,vn.walkThrough,vn.walkThroughSnippet,vn.vscodeChatCodeBlock]);class vz{constructor(){this._byResource=new At,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let s=this._byOwner.get(t);s||(s=new At,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){const i=this._byResource.get(e);return i?.get(t)}delete(e,t){let i=!1,n=!1;const s=this._byResource.get(e);s&&(i=s.delete(t));const o=this._byOwner.get(t);if(o&&(n=o.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){return"string"==typeof e?this._byOwner.get(e)?.values()??It.empty():Fe.isUri(e)?this._byResource.get(e)?.values()??It.empty():It.map(It.concat(...this._byOwner.values()),(e=>e[1]))}}class wz{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new At,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const e=this._data.get(t);e&&this._substract(e);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(bz.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===SI.Error?t.errors+=1:i===SI.Warning?t.warnings+=1:i===SI.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class _z{constructor(){this._onMarkerChanged=new fi({delay:0,merge:_z._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new vz,this._stats=new wz(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}getStatistics(){return this._stats}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(n=i,Array.isArray(n)&&0!==n.length){const n=[];for(const s of i){const i=_z._toMarker(e,t,s);i&&n.push(i)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}else{this._data.delete(t,e)&&this._onMarkerChanged.fire([t])}var n}static _toMarker(e,t,i){let{code:n,severity:s,message:o,source:r,startLineNumber:a,startColumn:l,endLineNumber:h,endColumn:c,relatedInformation:d,tags:u}=i;if(o)return a=a>0?a:1,l=l>0?l:1,h=h>=a?h:a,c=c>0?c:l,{resource:t,owner:e,code:n,severity:s,message:o,source:r,startLineNumber:a,startColumn:l,endLineNumber:h,endColumn:c,relatedInformation:d,tags:u}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const t of n){const n=It.first(t);n&&(i.push(n.resource),this._data.delete(n.resource,e))}if(ht(t)){const n=new At;for(const{resource:s,marker:o}of t){const t=_z._toMarker(e,s,o);if(!t)continue;const r=n.get(s);r?r.push(t):(n.set(s,[t]),i.push(s))}for(const[t,i]of n)this._data.set(t,e,i)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:s}=e;if((!s||s<0)&&(s=-1),t&&i){const e=this._data.get(i,t);if(e){const t=[];for(const i of e)if(_z._accept(i,n)){const e=t.push(i);if(s>0&&e===s)break}return t}return[]}if(t||i){const e=this._data.values(i??t),o=[];for(const t of e)for(const e of t)if(_z._accept(e,n)){const t=o.push(e);if(s>0&&t===s)return o}return o}{const e=[];for(const t of this._data.values())for(const i of t)if(_z._accept(i,n)){const t=e.push(i);if(s>0&&t===s)return e}return e}}static _accept(e,t){return void 0===t||(t&e.severity)===e.severity}static _merge(e){const t=new At;for(const i of e)for(const e of i)t.set(e,!0);return Array.from(t.keys())}}const yz=e=>{performance.mark(e)};var Cz,Sz;!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"}(Cz||(Cz={})),function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(Sz||(Sz={}));class kz extends Qt{static{this.DEFAULT_FLUSH_DELAY=100}constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new pi),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Sz.None,this.cache=new Map,this.flushDelayer=this._register(new Pa(kz.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((e=>this.onDidChangeItemsExternal(e))))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach(((e,t)=>this.acceptExternal(t,e))),e.deleted?.forEach((e=>this.acceptExternal(e,void 0)))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Sz.Closed)return;let i=!1;if(Rn(t))i=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0)}i&&this._onDidChangeStorage.fire({key:e,external:!0})}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===Sz.None&&(this.state=Sz.Initialized,this.options.hint!==Cz.STORAGE_DOES_NOT_EXIST&&(this.cache=await this.database.getItems()))}get(e,t){const i=this.cache.get(e);return Rn(i)?t:i}getBoolean(e,t){const i=this.get(e);return Rn(i)?t:"true"===i}getNumber(e,t){const i=this.get(e);return Rn(i)?t:parseInt(i,10)}getObject(e,t){const i=this.get(e);return Rn(i)?t:d_(i)}async set(e,t,i=!1){if(this.state===Sz.Closed)return;if(Rn(t))return this.delete(e,i);const n=In(t)||Array.isArray(t)?(s=t,JSON.stringify(s,u_)):String(t);var s;return this.cache.get(e)!==n?(this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()):void 0}async delete(e,t=!1){if(this.state===Sz.Closed)return;return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()):void 0}async optimize(){if(this.state!==Sz.Closed)return await this.flush(0),this.database.optimize()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=Sz.Closed;try{await this.doFlush(0)}catch(e){}await this.database.close((()=>this.cache))}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally((()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()}))}async flush(e){if(this.hasPending)return this.doFlush(e)}async doFlush(e){return this.options.hint===Cz.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger((()=>this.flushPending()),e)}async whenFlushed(){if(this.hasPending)return new Promise((e=>this.whenFlushedCallbacks.push(e)))}isInMemory(){return this.options.hint===Cz.STORAGE_IN_MEMORY}}class xz{constructor(){this.onDidChangeItemsExternal=oi.None,this.items=new Map}async getItems(){return this.items}async updateItems(e){e.insert?.forEach(((e,t)=>this.items.set(t,e))),e.delete?.forEach((e=>this.items.delete(e)))}async optimize(){}async close(){}}const Ez="vs/platform/files/common/files";var Dz,Lz,Iz,Tz,Nz;function Az(e){return!!(2&e.capabilities)}function Mz(e){return!!(8&e.capabilities)}function Rz(e){return!!(4&e.capabilities)}function Oz(e){return!!(16&e.capabilities)}function Fz(e){return!!Az(e)&&!!(16384&e.capabilities)}function Pz(e){return!!Az(e)&&!!(32768&e.capabilities)}!function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(Dz||(Dz={})),function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"}(Lz||(Lz={})),function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"}(Iz||(Iz={})),function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"}(Tz||(Tz={}));class Bz extends Error{static create(e,t){const i=new Bz(e.toString(),t);return Hz(i,t),i}constructor(e,t){super(e),this.code=t}}function zz(e,t){return Bz.create(e,t)}function Wz(e){return e||zz(u(Ez,0,"Unknown Error"),Tz.Unknown)}function Hz(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Vz(e){if(!e)return Tz.Unknown;if(e instanceof Bz)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return Tz.Unknown;switch(t[1]){case Tz.FileExists:return Tz.FileExists;case Tz.FileIsADirectory:return Tz.FileIsADirectory;case Tz.FileNotADirectory:return Tz.FileNotADirectory;case Tz.FileNotFound:return Tz.FileNotFound;case Tz.FileTooLarge:return Tz.FileTooLarge;case Tz.FileWriteLocked:return Tz.FileWriteLocked;case Tz.NoPermissions:return Tz.NoPermissions;case Tz.Unavailable:return Tz.Unavailable}return Tz.Unknown}function Uz(e){if(e instanceof $z)return e.fileOperationResult;switch(Vz(e)){case Tz.FileNotFound:return 1;case Tz.FileIsADirectory:return 0;case Tz.FileNotADirectory:return 9;case Tz.FileWriteLocked:return 5;case Tz.NoPermissions:return 6;case Tz.FileExists:return 4;case Tz.FileTooLarge:return 7;default:return 10}}class Kz{constructor(e,t,i){this.resource=e,this.operation=t,this.target=i}isOperation(e){return this.operation===e}}!function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(Nz||(Nz={}));class qz{static{this.MIXED_CORRELATION=null}constructor(e,t){this.ignorePathCasing=t,this.correlationId=void 0,this.added=new Li((()=>{const e=hS.forUris((()=>this.ignorePathCasing));return e.fill(this.rawAdded.map((e=>[e,!0]))),e})),this.updated=new Li((()=>{const e=hS.forUris((()=>this.ignorePathCasing));return e.fill(this.rawUpdated.map((e=>[e,!0]))),e})),this.deleted=new Li((()=>{const e=hS.forUris((()=>this.ignorePathCasing));return e.fill(this.rawDeleted.map((e=>[e,!0]))),e})),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const t of e){switch(t.type){case 1:this.rawAdded.push(t.resource);break;case 0:this.rawUpdated.push(t.resource);break;case 2:this.rawDeleted.push(t.resource)}this.correlationId!==qz.MIXED_CORRELATION&&("number"==typeof t.cId?void 0===this.correlationId?this.correlationId=t.cId:this.correlationId!==t.cId&&(this.correlationId=qz.MIXED_CORRELATION):void 0!==this.correlationId&&(this.correlationId=qz.MIXED_CORRELATION))}}contains(e,...t){return this.doContains(e,{includeChildren:!1},...t)}affects(e,...t){return this.doContains(e,{includeChildren:!0},...t)}doContains(e,t,...i){if(!e)return!1;const n=i.length>0;if(!n||i.includes(1)){if(this.added.value.get(e))return!0;if(t.includeChildren&&this.added.value.findSuperstr(e))return!0}if(!n||i.includes(0)){if(this.updated.value.get(e))return!0;if(t.includeChildren&&this.updated.value.findSuperstr(e))return!0}if(!n||i.includes(2)){if(this.deleted.value.findSubstr(e))return!0;if(t.includeChildren&&this.deleted.value.findSuperstr(e))return!0}return!1}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(e){return this.correlationId===e}hasCorrelation(){return"number"==typeof this.correlationId}}class $z extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}}class jz extends $z{constructor(e,t,i,n){super(e,t,n),this.fileOperationResult=t,this.size=i}}class Gz extends $z{constructor(e,t,i){super(e,2,i),this.stat=t}}const Yz={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},Xz="off",Qz="onExit",Zz="onExitAndWindowClose",Jz="files.associations",eW="files.exclude",tW="files.readonlyInclude",iW="files.readonlyExclude",nW="files.readonlyFromPermissions";var sW;!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(sW||(sW={}));const oW="";function rW(e){if("number"==typeof e.size&&"number"==typeof e.mtime)return e.mtime.toString(29)+e.size.toString(31)}class aW{static{this.KB=1024}static{this.MB=aW.KB*aW.KB}static{this.GB=aW.MB*aW.KB}static{this.TB=aW.GB*aW.KB}static formatSize(e){return Nn(e)||(e=0),e<aW.KB?u(Ez,1,"{0}B",e.toFixed(0)):e<aW.MB?u(Ez,2,"{0}KB",(e/aW.KB).toFixed(2)):e<aW.GB?u(Ez,3,"{0}MB",(e/aW.MB).toFixed(2)):e<aW.TB?u(Ez,4,"{0}GB",(e/aW.GB).toFixed(2)):u(Ez,5,"{0}TB",(e/aW.TB).toFixed(2))}}const lW=o("IUriIdentityService");const hW=function(){if("object"==typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID.bind(crypto);let e;e="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};const t=new Uint8Array(16),i=[];for(let e=0;e<256;e++)i.push(e.toString(16).padStart(2,"0"));return function(){e(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;let n=0,s="";return s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+="-",s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s+=i[t[n++]],s}}();function cW(e,t,i,n,s,o){return{id:e,name:t,location:i,isDefault:!1,shortName:s?.shortName,icon:s?.icon,globalStorageHome:o&&s?.useDefaultFlags?.globalState?o.globalStorageHome:ms(i,"globalStorage"),settingsResource:o&&s?.useDefaultFlags?.settings?o.settingsResource:ms(i,"settings.json"),keybindingsResource:o&&s?.useDefaultFlags?.keybindings?o.keybindingsResource:ms(i,"keybindings.json"),tasksResource:o&&s?.useDefaultFlags?.tasks?o.tasksResource:ms(i,"tasks.json"),snippetsHome:o&&s?.useDefaultFlags?.snippets?o.snippetsHome:ms(i,"snippets"),extensionsResource:o&&s?.useDefaultFlags?.extensions?o.extensionsResource:ms(i,"extensions.json"),cacheHome:ms(n,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient}}let dW=class extends Qt{static{this.PROFILES_KEY="userDataProfiles"}static{this.PROFILE_ASSOCIATIONS_KEY="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}constructor(e,t,i,n){super(),this.environmentService=e,this.fileService=t,this.uriIdentityService=i,this.logService=n,this.enabled=!0,this._onDidChangeProfiles=this._register(new ui),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new ui),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new ui),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this._onDidResetWorkspaces=this._register(new ui),this.onDidResetWorkspaces=this._onDidResetWorkspaces.event,this.profileCreationPromises=new Map,this.transientProfilesObject={profiles:[],workspaces:new At,emptyWindows:new Map},this.profilesHome=ms(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=ms(this.environmentService.cacheHome,"CachedProfilesData")}init(){this._profilesObject=void 0}setEnablement(e){this.enabled!==e&&(this._profilesObject=void 0,this.enabled=e)}isEnabled(){return this.enabled}get profilesObject(){if(!this._profilesObject){const e=this.createDefaultProfile(),t=[e];if(this.enabled)try{for(const i of this.getStoredProfiles())i.name&&Ln(i.name)&&i.location?t.push(cW(gs(i.location),i.name,i.location,this.profilesCacheHome,{shortName:i.shortName,icon:i.icon,useDefaultFlags:i.useDefaultFlags},e)):this.logService.warn("Skipping the invalid stored profile",i.location||i.name)}catch(e){this.logService.error(e)}const i=new At,n=new Map;if(t.length)try{const e=this.getStoredProfileAssociations();if(e.workspaces)for(const[n,s]of Object.entries(e.workspaces)){const e=Fe.parse(n),o=t.find((e=>e.id===s));o&&i.set(e,o)}if(e.emptyWindows)for(const[i,s]of Object.entries(e.emptyWindows)){const e=t.find((e=>e.id===s));e&&n.set(i,e)}}catch(e){this.logService.error(e)}this._profilesObject={profiles:t,workspaces:i,emptyWindows:n}}return this._profilesObject}createDefaultProfile(){const e=cW("__default__profile__",u("vs/platform/userDataProfile/common/userDataProfile",0,"Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...e,extensionsResource:this.getDefaultProfileExtensionsLocation()??e.extensionsResource,isDefault:!0}}async createTransientProfile(e){const t="Temp",i=new RegExp(`${Ai(t)}\\s(\\d+)`);let n=0;for(const e of this.profiles){const t=i.exec(e.name),s=t?parseInt(t[1]):0;n=s>n?s:n}const s=`${t} ${n+1}`;return this.createProfile(Jl(hW()).toString(16),s,{transient:!0},e)}async createNamedProfile(e,t,i){return this.createProfile(Jl(hW()).toString(16),e,t,i)}async createProfile(e,t,i,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");const s=await this.doCreateProfile(e,t,i);return n&&await this.setProfileForWorkspace(n,s),s}async doCreateProfile(e,t,i){if(!Ln(t)||!t)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.profileCreationPromises.get(t);return n||(n=(async()=>{try{if(this.profiles.find((i=>i.name===t||i.id===e)))throw new Error(`Profile with ${t} name already exists`);const n=cW(e,t,ms(this.profilesHome,e),this.profilesCacheHome,i,this.defaultProfile);await this.fileService.createFolder(n.location);const s=[];return this._onWillCreateProfile.fire({profile:n,join(e){s.push(e)}}),await Ja.settled(s),this.updateProfiles([n],[],[]),n}finally{this.profileCreationPromises.delete(t)}})(),this.profileCreationPromises.set(t,n)),n}async updateProfile(e,t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find((t=>t.id===e.id));if(!i)throw new Error(`Profile '${e.name}' does not exist`);return i=cW(i.id,t.name??i.name,i.location,this.profilesCacheHome,{shortName:t.shortName??i.shortName,icon:null===t.icon?void 0:t.icon??i.icon,transient:t.transient??i.isTransient,useDefaultFlags:t.useDefaultFlags??i.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[i]),i}async removeProfile(e){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(e.isDefault)throw new Error("Cannot remove default profile");const t=this.profiles.find((t=>t.id===e.id));if(!t)throw new Error(`Profile '${e.name}' does not exist`);const i=[];this._onWillRemoveProfile.fire({profile:t,join(e){i.push(e)}});try{await Promise.allSettled(i)}catch(e){this.logService.error(e)}for(const e of[...this.profilesObject.emptyWindows.keys()])t.id===this.profilesObject.emptyWindows.get(e)?.id&&this.profilesObject.emptyWindows.delete(e);for(const e of[...this.profilesObject.workspaces.keys()])t.id===this.profilesObject.workspaces.get(e)?.id&&this.profilesObject.workspaces.delete(e);this.updateStoredProfileAssociations(),this.updateProfiles([],[t],[]);try{await this.fileService.del(t.cacheHome,{recursive:!0})}catch(e){1!==Uz(e)&&this.logService.error(e)}}async setProfileForWorkspace(e,t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");const i=this.profiles.find((e=>e.id===t.id));if(!i)throw new Error(`Profile '${t.name}' does not exist`);this.updateWorkspaceAssociation(e,i)}unsetWorkspace(e,t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(e,void 0,t)}async resetWorkspaces(){this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){const e=await this.fileService.resolve(this.profilesHome);await Promise.all((e.children||[]).filter((e=>e.isDirectory&&this.profiles.every((t=>!this.uriIdentityService.extUri.isEqual(t.location,e.resource))))).map((e=>this.fileService.del(e.resource,{recursive:!0}))))}}async cleanUpTransientProfiles(){if(!this.enabled)return;const e=this.transientProfilesObject.profiles.filter((e=>!this.isProfileAssociatedToWorkspace(e)));await Promise.allSettled(e.map((e=>this.removeProfile(e))))}getProfileForWorkspace(e){const t=this.getWorkspace(e);return Fe.isUri(t)?this.transientProfilesObject.workspaces.get(t)??this.profilesObject.workspaces.get(t):this.transientProfilesObject.emptyWindows.get(t)??this.profilesObject.emptyWindows.get(t)}getWorkspace(e){return cS(e)?e.uri:dS(e)?e.configPath:e.id}isProfileAssociatedToWorkspace(e){return!![...this.transientProfilesObject.emptyWindows.values()].some((t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))||(!![...this.transientProfilesObject.workspaces.values()].some((t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))||(!![...this.profilesObject.emptyWindows.values()].some((t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))||!![...this.profilesObject.workspaces.values()].some((t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))))}updateProfiles(e,t,i){const n=[...this.profiles,...e],s=[];this.transientProfilesObject.profiles=[];for(let e of n)e.isDefault||t.some((t=>e.id===t.id))||(e=i.find((t=>e.id===t.id))??e,e.isTransient?this.transientProfilesObject.profiles.push(e):s.push({location:e.location,name:e.name,shortName:e.shortName,icon:e.icon,useDefaultFlags:e.useDefaultFlags}));this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(e,t,i)}triggerProfilesChanges(e,t,i){this._onDidChangeProfiles.fire({added:e,removed:t,updated:i,all:this.profiles})}updateWorkspaceAssociation(e,t,i){(i=!!t?.isTransient||i)||this.updateWorkspaceAssociation(e,void 0,!0);const n=this.getWorkspace(e),s=i?this.transientProfilesObject:this.profilesObject;Fe.isUri(n)?(s.workspaces.delete(n),t&&s.workspaces.set(n,t)):(s.emptyWindows.delete(n),t&&s.emptyWindows.set(n,t)),i||this.updateStoredProfileAssociations()}updateStoredProfileAssociations(){const e={};for(const[t,i]of this.profilesObject.workspaces.entries())e[t.toString()]=i.id;const t={};for(const[e,i]of this.profilesObject.emptyWindows.entries())t[e.toString()]=i.id;this.saveStoredProfileAssociations({workspaces:e,emptyWindows:t}),this._profilesObject=void 0}migrateStoredProfileAssociations(e){const t={},i=this.createDefaultProfile();if(e.workspaces)for(const[n,s]of Object.entries(e.workspaces)){const e=Fe.parse(s);t[n]=this.uriIdentityService.extUri.isEqual(e,i.location)?i.id:this.uriIdentityService.extUri.basename(e)}const n={};if(e.emptyWindows)for(const[t,s]of Object.entries(e.emptyWindows)){const e=Fe.parse(s);n[t]=this.uriIdentityService.extUri.isEqual(e,i.location)?i.id:this.uriIdentityService.extUri.basename(e)}return{workspaces:t,emptyWindows:n}}getStoredProfiles(){return[]}saveStoredProfiles(e){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(e){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};dW=Bs([zs(0,Es),zs(1,Fs),zs(2,lW),zs(3,Ed)],dW);const uW="__$__targetStorageMarker";var gW,pW,fW;!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(gW||(gW={})),function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"}(pW||(pW={})),function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"}(fW||(fW={}));class mW extends Qt{static{this.DEFAULT_FLUSH_INTERVAL=6e4}constructor(e={flushInterval:mW.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new pi),this._onDidChangeTarget=this._register(new pi),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new ui),this.onWillSaveState=this._onWillSaveState.event,this.flushWhenIdleScheduler=this._register(new $a((()=>this.doFlushWhenIdle()),this.options.flushInterval)),this.runFlushWhenIdle=this._register(new Zt),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return oi.filter(this._onDidChangeValue.event,(i=>i.scope===e&&(void 0===t||i.key===t)),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=ja((()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()}))}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){jt([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{yz("code/willInitStorage");try{await this.doInitialize()}finally{yz("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(e,t){const{key:i,external:n}=t;if(i===uW){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,i){return this.getStorage(t)?.get(e,i)}getBoolean(e,t,i){return this.getStorage(t)?.getBoolean(e,i)}getNumber(e,t,i){return this.getStorage(t)?.getNumber(e,i)}getObject(e,t,i){return this.getStorage(t)?.getObject(e,i)}storeAll(e,t){this.withPausedEmitters((()=>{for(const i of e)this.store(i.key,i.value,i.scope,i.target,t)}))}store(e,t,i,n,s=!1){Rn(t)?this.remove(e,i,s):this.withPausedEmitters((()=>{this.updateKeyTarget(e,i,n),this.getStorage(i)?.set(e,t,s)}))}remove(e,t,i=!1){this.withPausedEmitters((()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,i)}))}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){const i=[],n=this.getKeyTargets(e);for(const e of Object.keys(n)){n[e]===t&&i.push(e)}return i}updateKeyTarget(e,t,i,n=!1){const s=this.getKeyTargets(t);"number"==typeof i?s[e]!==i&&(s[e]=i,this.getStorage(t)?.set(uW,JSON.stringify(s),n)):"number"==typeof s[e]&&(delete s[e],this.getStorage(t)?.set(uW,JSON.stringify(s),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?function(e){const t=e.get(uW);if(t)try{return JSON.parse(t)}catch(e){}return Object.create(null)}(t):Object.create(null)}isNew(e){return!0===this.getBoolean("__$__isNewStorageMarker",e)}async flush(e=gW.NONE){this._onWillSaveState.fire({reason:e});const t=this.getStorage(-1),i=this.getStorage(0),n=this.getStorage(1);switch(e){case gW.NONE:await Ja.settled([t?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve()]);break;case gW.SHUTDOWN:await Ja.settled([t?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve()])}}async log(){return async function(e,t,i,n,s,o){const r=e=>{try{return JSON.parse(e)}catch(t){return e}},a=new Map,l=new Map;e.forEach(((e,t)=>{a.set(t,e),l.set(t,r(e))}));const h=new Map,c=new Map;t.forEach(((e,t)=>{h.set(t,e),c.set(t,r(e))}));const d=new Map,u=new Map;i.forEach(((e,t)=>{d.set(t,e),u.set(t,r(e))})),n!==s?console.group(`Storage: Application (path: ${n})`):console.group(`Storage: Application & Profile (path: ${n}, default profile)`);const g=[];if(a.forEach(((e,t)=>{g.push({key:t,value:e})})),console.table(g),console.groupEnd(),console.log(l),n!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const e=[];h.forEach(((t,i)=>{e.push({key:i,value:t})})),console.table(e),console.groupEnd(),console.log(c)}console.group(`Storage: Workspace (path: ${o})`);const p=[];d.forEach(((e,t)=>{p.push({key:t,value:e})})),console.table(p),console.groupEnd(),console.log(u)}(this.getStorage(-1)?.items??new Map,this.getStorage(0)?.items??new Map,this.getStorage(1)?.items??new Map,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(e){return await this.flush(),this.getStorage(e)?.optimize()}async switch(e,t){return this.emitWillSaveState(gW.NONE),function(e){const t=e;return!!(t&&"object"==typeof t&&"string"==typeof t.id&&"boolean"==typeof t.isDefault&&"string"==typeof t.name&&Fe.isUri(t.location)&&Fe.isUri(t.globalStorageHome)&&Fe.isUri(t.settingsResource)&&Fe.isUri(t.keybindingsResource)&&Fe.isUri(t.tasksResource)&&Fe.isUri(t.snippetsHome)&&Fe.isUri(t.extensionsResource))}(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return e.id!==t.id&&(!bW(t)||!bW(e))}switchData(e,t,i){this.withPausedEmitters((()=>{const n=new Set;for(const[s,o]of e){n.add(s);t.get(s)!==o&&this.emitDidChangeValue(i,{key:s,external:!0})}for(const[e]of t.items)n.has(e)||this.emitDidChangeValue(i,{key:e,external:!0})}))}}function bW(e){return e.isDefault||!!e.useDefaultFlags?.globalState}const vW=o("policy");let wW=class extends Qt{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._onDidChangeConfiguration=this._register(new ui),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=vC.createEmptyModel(this.logService)}async initialize(){return this.resetConfigurationModel(),this._register(Jo.as(ur).onDidUpdateConfiguration((({properties:e,defaultsOverrides:t})=>this.onDidUpdateConfiguration(Array.from(e),t)))),this.configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}onDidUpdateConfiguration(e,t){this.updateConfigurationModel(e,Jo.as(ur).getConfigurationProperties()),this._onDidChangeConfiguration.fire({defaults:this.configurationModel,properties:e})}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=vC.createEmptyModel(this.logService);const e=Jo.as(ur).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const n of e){const e=i[n],s=t[n];void 0!==e?this._configurationModel.addValue(n,e):s?this._configurationModel.addValue(n,s.default):this._configurationModel.removeValue(n)}}};let _W=class extends Qt{get configurationModel(){return this._configurationModel}constructor(e,t,i){super(),this.defaultConfiguration=e,this.policyService=t,this.logService=i,this._onDidChangeConfiguration=this._register(new ui),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=vC.createEmptyModel(this.logService)}async initialize(){return this.logService.trace("PolicyConfiguration#initialize"),this.update(await this.updatePolicyDefinitions(this.defaultConfiguration.configurationModel.keys),!1),this._register(this.policyService.onDidChange((e=>this.onDidChangePolicies(e)))),this._register(this.defaultConfiguration.onDidChangeConfiguration((async({properties:e})=>this.update(await this.updatePolicyDefinitions(e),!0)))),this._configurationModel}async updatePolicyDefinitions(e){this.logService.trace("PolicyConfiguration#updatePolicyDefinitions",e);const t={},i=[],n=Jo.as(ur).getConfigurationProperties();for(const s of e){const e=n[s];if(e){if(e.policy){if("string"!==e.type&&"number"!==e.type){this.logService.warn(`Policy ${e.policy.name} has unsupported type ${e.type}`);continue}i.push(s),t[e.policy.name]={type:e.type}}}else i.push(s)}return Bn(t)||await this.policyService.updatePolicyDefinitions(t),i}onDidChangePolicies(e){this.logService.trace("PolicyConfiguration#onDidChangePolicies",e);const t=Jo.as(ur).getPolicyConfigurations(),i=lt(e.map((e=>t.get(e))));this.update(i,!0)}update(e,t){this.logService.trace("PolicyConfiguration#update",e);const i=Jo.as(ur).getConfigurationProperties(),n=[],s=this._configurationModel.isEmpty();for(const t of e){const e=i[t]?.policy?.name;if(e){const i=this.policyService.getPolicyValue(e);(s?void 0===i:qn(this._configurationModel.getValue(t),i))||n.push([t,i])}else void 0!==this._configurationModel.getValue(t)&&n.push([t,void 0])}if(n.length){this.logService.trace("PolicyConfiguration#changed",n);const e=this._configurationModel;this._configurationModel=vC.createEmptyModel(this.logService);for(const t of e.keys)this._configurationModel.setValue(t,e.getValue(t));for(const[e,t]of n)void 0===t?this._configurationModel.removeValue(e):this._configurationModel.setValue(e,t);t&&this._onDidChangeConfiguration.fire(this._configurationModel)}}};_W=Bs([zs(1,vW),zs(2,Ed)],_W);const yW=o("accessibilitySignalService");class CW extends Qt{constructor(e,t=[]){super(),this.logger=new Ou([e,...t]),this._register(e.onDidChangeLogLevel((e=>this.setLevel(e))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}flush(){this.logger.flush()}}class SW{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new ui}get onWillDispose(){return this._onWillDispose.event}resolve(){return Promise.resolve()}get textEditorModel(){return this.model}createSnapshot(){return this.model.createSnapshot()}isReadonly(){return!1}dispose(){this.disposed=!0,this._onWillDispose.fire()}isDisposed(){return this.disposed}isResolved(){return!0}getLanguageId(){return this.model.getLanguageId()}}let kW=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Jt(new SW(t))):Promise.reject(new Error("Model not found"))}registerTextModelContentProvider(e,t){return{dispose:function(){}}}canHandleResource(e){return!1}};kW=Bs([zs(0,dC)],kW);class xW{static{this.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}}}show(){return xW.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}}class EW{constructor(){this.onDidAddNotification=oi.None,this.onDidRemoveNotification=oi.None,this.onDidChangeFilter=oi.None}static{this.NO_OP=new JC}info(e){return this.notify({severity:nd.Info,message:e})}warn(e){return this.notify({severity:nd.Warning,message:e})}error(e){return this.notify({severity:nd.Error,message:e})}notify(e){switch(e.severity){case nd.Error:console.error(e.message);break;case nd.Warning:console.warn(e.message);break;default:console.log(e.message)}return EW.NO_OP}prompt(e,t,i,n){return EW.NO_OP}status(e,t){return Qt.None}setFilter(e){}getFilter(e){return ZC.OFF}getFilters(){return[]}removeFilter(e){}}let DW=class{constructor(e){this._onWillExecuteCommand=new ui,this._onDidExecuteCommand=new ui,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=mC.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(e){return Promise.reject(e)}}};DW=Bs([zs(0,s)],DW);let LW=class extends MC{constructor(e,t,i,n,s,o){super(e,t,i,n,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const r=e=>{const t=new Xt;t.add(_h(e,rc.KEY_DOWN,(e=>{const t=new xa(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())}))),t.add(_h(e,rc.KEY_UP,(e=>{const t=new xa(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()}))),this._domNodeListeners.push(new IW(e,t))},a=e=>{for(let t=0;t<this._domNodeListeners.length;t++){const i=this._domNodeListeners[t];i.domNode===e&&(this._domNodeListeners.splice(t,1),i.dispose())}},l=e=>{e.getOption(61)||r(e.getContainerDomNode())};this._register(o.onCodeEditorAdd(l)),this._register(o.onCodeEditorRemove((e=>{e.getOption(61)||a(e.getContainerDomNode())}))),o.listCodeEditors().forEach(l);const h=e=>{r(e.getContainerDomNode())};this._register(o.onDiffEditorAdd(h)),this._register(o.onDiffEditorRemove((e=>{a(e.getContainerDomNode())}))),o.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,i,n){return Gt(mC.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map((e=>({keybinding:ba(e.keybinding,$),command:e.command??null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1})));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Yt((()=>{for(let e=0;e<this._dynamicKeybindings.length;e++)if(this._dynamicKeybindings[e]===t[0])return this._dynamicKeybindings.splice(e,t.length),void this.updateResolver()}))}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}getUserKeybindingItems(){return this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(FC.getDefaultKeybindings(),!0),t=this.getUserKeybindingItems();this._cachedResolver=new LC(e,t,(e=>this._log(e)))}return this._cachedResolver}_documentHasFocus(){return Gr.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const s of e){const e=s.when||void 0,o=s.keybinding;if(o){const r=this.resolveKeybinding(o);for(const o of r)i[n++]=new BC(o,s.command,s.commandArgs,e,t,null,!1)}else i[n++]=new BC(void 0,s.command,s.commandArgs,e,t,null,!1)}return i}resolveKeybinding(e){return GC.resolveKeybinding(e,$)}resolveKeyboardEvent(e){const t=new wa(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new GC([t],$)}resolveUserBinding(e){return[]}_dumpDebugInfo(){return""}_dumpDebugInfoJSON(){return""}registerSchemaContribution(e){}enableKeybindingHoldMode(e){}};LW=Bs([zs(0,Qc),zs(1,fC),zs(2,nS),zs(3,rd),zs(4,Ed),zs(5,Xc)],LW);class IW extends Qt{constructor(e,t){super(),this.domNode=e,this._register(t)}}function TW(e){return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof Fe)}let NW=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new ui,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new wW(e);this._configuration=new yC(t.reload(),vC.createEmptyModel(e),vC.createEmptyModel(e),vC.createEmptyModel(e),vC.createEmptyModel(e),vC.createEmptyModel(e),new At,vC.createEmptyModel(e),new At,e),t.dispose()}getValue(e,t){const i="string"==typeof e?e:void 0,n=TW(e)?e:TW(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const t of e){const[e,n]=t;this.getValue(e)!==n&&(this._configuration.updateValue(e,n),i.push(e))}if(i.length>0){const e=new CC({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);e.source=8,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){const e={contents:{},keys:[],overrides:[]};return{defaults:e,policy:e,application:e,user:e,workspace:e,folders:[]}}};NW=Bs([zs(0,Ed)],NW);let AW=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new ui,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.configurationService.onDidChangeConfiguration((e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,i)=>e.affectsConfiguration(i)})}))}getValue(e,t,i){const n=Lo.isIPosition(t)?t:null,s=n?"string"==typeof i?i:void 0:"string"==typeof t?t:void 0,o=e?this.getLanguage(e,n):void 0;return void 0===s?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:o})}inspect(e,t,i){const n=e?this.getLanguage(e,t):void 0;return this.configurationService.inspect(i,{resource:e,overrideIdentifier:n})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}updateValue(e,t,i,n){return this.configurationService.updateValue(t,i,{resource:e},n)}};AW=Bs([zs(0,Uo),zs(1,dC),zs(2,Ko)],AW);let MW=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&"string"==typeof i&&"auto"!==i?i:R||M?"\n":"\r\n"}};MW=Bs([zs(0,Uo)],MW);class RW{static{this.SCHEME="inmemory"}constructor(){this._onDidChangeWorkspaceName=new ui,this.onDidChangeWorkspaceName=this._onDidChangeWorkspaceName.event,this._onWillChangeWorkspaceFolders=new ui,this.onWillChangeWorkspaceFolders=this._onWillChangeWorkspaceFolders.event,this._onDidChangeWorkspaceFolders=new ui,this.onDidChangeWorkspaceFolders=this._onDidChangeWorkspaceFolders.event,this._onDidChangeWorkbenchState=new ui,this.onDidChangeWorkbenchState=this._onDidChangeWorkbenchState.event;const e=Fe.from({scheme:RW.SCHEME,authority:"model",path:"/"});this.workspace={id:pS,folders:[new uS({uri:e,name:"",index:0})]}}getCompleteWorkspace(){return Promise.resolve(this.getWorkspace())}getWorkspace(){return this.workspace}getWorkbenchState(){return this.workspace?this.workspace.configuration?3:2:1}getWorkspaceFolder(e){return e&&e.scheme===RW.SCHEME?this.workspace.folders[0]:null}isInsideWorkspace(e){return e&&e.scheme===RW.SCHEME}isCurrentWorkspace(e){return!0}}let OW=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}setPreviewHandler(){return Qt.None}async apply(e,t){const i=Array.isArray(e)?e:Uy.convert(e),n=new Map;for(const e of i){if(!(e instanceof Ky))throw new Error("bad edit - only text edits are supported");const t=this._modelService.getModel(e.resource);if(!t)throw new Error("bad edit - model not found");if("number"==typeof e.versionId&&t.getVersionId()!==e.versionId)throw new Error("bad state - model changed in the meantime");let i=n.get(t);i||(i=[],n.set(t,i)),i.push(cC.replaceMove(Io.lift(e.textEdit.range),e.textEdit.text))}let s=0,o=0;for(const[e,t]of n)e.pushStackElement(),e.pushEditOperations([],t,(()=>[])),e.pushStackElement(),o+=1,s+=t.length;return{ariaSummary:Ti(yS.bulkEditServiceSummary,s,o),isApplied:s>0}}};OW=Bs([zs(0,dC)],OW);let FW=class extends Fy{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(t=e.getContainerDomNode())}return super.showContextView(e,t,i)}};FW=Bs([zs(0,Jc),zs(1,Xc)],FW);let PW=class extends oE{constructor(e,t,i,n,s,o){super(e,t,i,n,s,o),this.configure({blockMouse:!1})}};PW=Bs([zs(0,nS),zs(1,rd),zs(2,Mm),zs(3,Bm),zs(4,Ex),zs(5,Qc)],PW);var BW;jo(Ed,class extends CW{constructor(){super(new Ru)}},0),jo(Uo,NW,0),jo(gC,AW,0),jo(pC,MW,0),jo(fS,RW,0),jo(YC,class{constructor(){this.onDidChangeFormatters=oi.None}getUriLabel(e,t){return"file"===e.scheme?e.fsPath:e.path}getUriBasenameLabel(e){return gs(e)}getWorkspaceLabel(e,t){return""}getSeparator(e,t){return"/"}registerFormatter(e){throw new Error("Not implemented")}registerCachedFormatter(e){return this.registerFormatter(e)}getHostLabel(){return""}getHostTooltip(){}},0),jo(nS,class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}setEnabled(){}setExperimentProperty(){}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}},0),jo(sd,class{constructor(){this.onWillShowDialog=oi.None,this.onDidShowDialog=oi.None}async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+"\n\n"+t),Gr.confirm(i)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){const i=[...e.buttons??[]];e.cancelButton&&"string"!=typeof e.cancelButton&&"boolean"!=typeof e.cancelButton&&i.push(e.cancelButton),t=await(i[0]?.run({checkboxChecked:!1}))}return{result:t}}async info(e,t){await this.prompt({type:nd.Info,message:e,detail:t})}async warn(e,t){await this.prompt({type:nd.Warning,message:e,detail:t})}async error(e,t){await this.prompt({type:nd.Error,message:e,detail:t})}input(){return Promise.resolve({confirmed:!1})}about(){return Promise.resolve(void 0)}},0),jo(Es,class{constructor(){this.stateResource=Fe.from({scheme:"monaco",authority:"stateResource"}),this.userRoamingDataHome=Fe.from({scheme:"monaco",authority:"userRoamingDataHome"}),this.keyboardLayoutResource=Fe.from({scheme:"monaco",authority:"keyboardLayoutResource"}),this.argvResource=Fe.from({scheme:"monaco",authority:"argvResource"}),this.untitledWorkspacesHome=Fe.from({scheme:"monaco",authority:"untitledWorkspacesHome"}),this.workspaceStorageHome=Fe.from({scheme:"monaco",authority:"workspaceStorageHome"}),this.localHistoryHome=Fe.from({scheme:"monaco",authority:"localHistoryHome"}),this.cacheHome=Fe.from({scheme:"monaco",authority:"cacheHome"}),this.userDataSyncHome=Fe.from({scheme:"monaco",authority:"userDataSyncHome"}),this.sync=void 0,this.continueOn=void 0,this.editSessionId=void 0,this.debugExtensionHost={port:null,break:!1},this.isExtensionDevelopment=!1,this.disableExtensions=!1,this.enableExtensions=void 0,this.extensionDevelopmentLocationURI=void 0,this.extensionDevelopmentKind=void 0,this.extensionTestsLocationURI=void 0,this.logsHome=Fe.from({scheme:"monaco",authority:"logsHome"}),this.logLevel=void 0,this.extensionLogLevel=void 0,this.verbose=!1,this.isBuilt=!1,this.disableTelemetry=!1,this.serviceMachineIdResource=Fe.from({scheme:"monaco",authority:"serviceMachineIdResource"}),this.policyFile=void 0}},0),jo(rd,EW,0),jo(xI,_z,0),jo(Ko,class extends RS{constructor(){super()}},0),jo(PB,class extends Qt{constructor(){super(),this._onColorThemeChange=this._register(new ui),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onFileIconThemeChange=this._register(new ui),this.onDidFileIconThemeChange=this._onFileIconThemeChange.event,this._onProductIconThemeChange=this._register(new ui),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new EB,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(DB,FB(DB)),this._knownThemes.set(LB,FB(LB)),this._knownThemes.set(IB,FB(IB)),this._knownThemes.set(TB,FB(TB));const e=this._register(function(e){const t=new Xt,i=t.add(new ui),n=CB();return t.add(n.onDidChange((()=>i.fire()))),e&&t.add(e.onDidProductIconThemeChange((()=>i.fire()))),{dispose:()=>t.dispose(),onDidChange:i.event,getCSS(){const t=e?e.getProductIconTheme():new EB,i={},s=[],o=[];for(const e of n.getIcons()){const n=t.getIcon(e);if(!n)continue;const r=n.font,a=`--vscode-icon-${e.id}-font-family`,l=`--vscode-icon-${e.id}-content`;r?(i[r.id]=r.definition,o.push(`${a}: ${Cc(r.id)};`,`${l}: '${n.fontCharacter}';`),s.push(`.codicon-${e.id}:before { content: '${n.fontCharacter}'; font-family: ${Cc(r.id)}; }`)):(o.push(`${l}: '${n.fontCharacter}'; ${a}: 'codicon';`),s.push(`.codicon-${e.id}:before { content: '${n.fontCharacter}'; }`))}for(const e in i){const t=i[e],n=t.weight?`font-weight: ${t.weight};`:"",o=t.style?`font-style: ${t.style};`:"",r=t.src.map((e=>`${yc(e.location)} format('${e.format}')`)).join(", ");s.push(`@font-face { src: ${r}; font-family: ${Cc(e)};${n}${o} font-display: block; }`)}return s.push(`:root { ${o.join(" ")} }`),s.join("\n")}}}(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(DB),this._onOSSchemeChanged(),this._register(e.onDidChange((()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}))),Xr(Gr,"(forced-colors: active)",(()=>{this._onOSSchemeChanged()}))}registerEditorContainer(e){return Hh(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Yh(void 0,(e=>{e.className="monaco-colors",e.textContent=this._allCSS})),this._styleElements.push(this._globalStyleElement)),Qt.None}_registerShadowDomContainer(e){const t=Yh(e,(e=>{e.className="monaco-colors",e.textContent=this._allCSS}));return this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t)return void this._styleElements.splice(e,1)}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!RB(t.base)&&!RB(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new MB(e,t)),RB(e)&&this._knownThemes.forEach((t=>{t.base===e&&t.notifyBaseUpdated()})),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(DB),this._updateActualTheme(t)}_updateActualTheme(e){e&&this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const t=Gr.matchMedia("(forced-colors: active)").matches;if(t!==((e=this._theme.type)===_g.HIGH_CONTRAST_DARK||e===_g.HIGH_CONTRAST_LIGHT)){let e;e=yg(this._theme.type)?t?IB:LB:t?TB:DB,this._updateActualTheme(this._knownThemes.get(e))}}var e}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:i=>{t[i]||(e.push(i),t[i]=!0)}};AB.getThemingParticipants().forEach((e=>e(this._theme,i,this._environment)));const n=[];for(const e of NB.getColors()){const t=this._theme.getColor(e.id,!0);t&&n.push(`${Ag(e.id)}: ${t.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join("\n")} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(function(e){const t=[];for(let i=1,n=e.length;i<n;i++){const n=e[i];t[i]=`.mtk${i} { color: ${n}; }`}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.push(".mtks { text-decoration: line-through; }"),t.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),t.join("\n")}(s)),this._themeCSS=e.join("\n"),this._updateCSS(),oy.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach((e=>e.textContent=this._allCSS))}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}},0),jo(dC,TM,0),jo(YI,jI,0),jo(Qc,az,0),jo(tS,class{withProgress(e,t,i){return t({report:()=>{}})}},0),jo(iS,xW,0),jo(Dx,class extends mW{constructor(){super(),this.applicationStorage=this._register(new kz(new xz,{hint:Cz.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new kz(new xz,{hint:Cz.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new kz(new xz,{hint:Cz.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage((e=>this.emitDidChangeValue(1,e)))),this._register(this.profileStorage.onDidChangeStorage((e=>this.emitDidChangeValue(0,e)))),this._register(this.applicationStorage.onDidChangeStorage((e=>this.emitDidChangeValue(-1,e))))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(e){switch(e){case-1:return"inMemory (application)";case 0:return"inMemory (profile)";default:return"inMemory (workspace)"}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}shouldFlushWhenIdle(){return!1}hasScope(e){return!1}},0),jo(gE,fI,0),jo(Vy,OW,0),jo(CS,class{constructor(){this._neverEmitter=new ui,this.onDidChangeTrust=this._neverEmitter.event,this.onDidChangeTrustedFolders=this._neverEmitter.event,this.workspaceResolved=Promise.resolve(),this.workspaceTrustInitialized=Promise.resolve(),this.acceptsOutOfWorkspaceFiles=!0}isWorkspaceTrusted(){return!0}isWorkspaceTrustForced(){return!1}canSetParentFolderTrust(){return!1}async setParentFolderTrust(e){}canSetWorkspaceTrust(){return!1}async setWorkspaceTrust(e){}getUriTrustInfo(e){throw new Error("Method not supported.")}async setUrisTrust(e,t){}getTrustedUris(){return[]}async setTrustedUris(e){}addWorkspaceTrustTransitionParticipant(e){throw new Error("Method not supported.")}},0),jo(uC,kW,0),jo(my,zB,0),jo(lF,class{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Xt,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;new Xk(Yh(),"").style(Fx)}if(this.lists.some((t=>t.widget===e)))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),Kh(e.getHTMLElement())&&this.setLastFocusedList(e),Gt(e.onDidFocus((()=>this.setLastFocusedList(e))),Yt((()=>this.lists.splice(this.lists.indexOf(i),1))),e.onDidDispose((()=>{this.lists=this.lists.filter((e=>e!==i)),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)})))}dispose(){this.disposables.dispose()}},0),jo(fC,DW,0),jo(Bm,LW,0),jo($M,nB,0),jo(Mm,FW,0),jo(Yb,uE,0),jo(QB,XB,0),jo(Rm,PW,0),jo(Ex,UB,0),jo(yW,class{async playSignal(e,t){}async playSignals(e){}getEnabledState(e,t,i){return wi.const(!1)}isSoundEnabled(e){return!1}isAnnouncementEnabled(e){return!1}onSoundEnabledChanged(e){return oi.None}async playSound(e,t){}playSignalLoop(e){return Yt((()=>{}))}},0),function(e){const t=new gz;for(const[e,i]of Go())t.set(e,i);const i=new fz(t,!0);t.set(s,i),e.get=function(e){n||a({});const s=t.get(e);if(!s)throw new Error("Missing service "+e);return s instanceof qo?i.invokeFunction((t=>t.get(e))):s};let n=!1;const r=new ui;function a(e){if(n)return i;n=!0;for(const[e,i]of Go())t.get(e)||t.set(e,i);for(const i in e)if(e.hasOwnProperty(i)){const n=o(i);t.get(n)instanceof qo&&t.set(n,e[i])}return r.fire(),i}e.initialize=a,e.withServices=function(e){if(n)return e();const t=new Xt,i=t.add(r.event((()=>{i.dispose(),t.add(e())})));return t}}(BW||(BW={}));const zW="vs/base/common/jsonErrorMessages";function WW(e){switch(e){case 1:return u(zW,0,"Invalid symbol");case 2:return u(zW,1,"Invalid number format");case 3:return u(zW,2,"Property name expected");case 4:return u(zW,3,"Value expected");case 5:return u(zW,4,"Colon expected");case 6:return u(zW,5,"Comma expected");case 7:return u(zW,6,"Closing brace expected");case 8:return u(zW,7,"Closing bracket expected");case 9:return u(zW,8,"End of file expected");default:return""}}var HW={exports:{}},VW=i(554);!function(e,t){var i;t=e.exports=j,i="object"==typeof VW&&VW.env&&VW.env.NODE_DEBUG&&/\bsemver\b/i.test(VW.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],r=t.src=[],a=0,l=a++;r[l]="0|[1-9]\\d*";var h=a++;r[h]="[0-9]+";var c=a++;r[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;r[d]="("+r[l]+")\\.("+r[l]+")\\.("+r[l]+")";var u=a++;r[u]="("+r[h]+")\\.("+r[h]+")\\.("+r[h]+")";var g=a++;r[g]="(?:"+r[l]+"|"+r[c]+")";var p=a++;r[p]="(?:"+r[h]+"|"+r[c]+")";var f=a++;r[f]="(?:-("+r[g]+"(?:\\."+r[g]+")*))";var m=a++;r[m]="(?:-?("+r[p]+"(?:\\."+r[p]+")*))";var b=a++;r[b]="[0-9A-Za-z-]+";var v=a++;r[v]="(?:\\+("+r[b]+"(?:\\."+r[b]+")*))";var w=a++,_="v?"+r[d]+r[f]+"?"+r[v]+"?";r[w]="^"+_+"$";var y="[v=\\s]*"+r[u]+r[m]+"?"+r[v]+"?",C=a++;r[C]="^"+y+"$";var S=a++;r[S]="((?:<|>)?=?)";var k=a++;r[k]=r[h]+"|x|X|\\*";var x=a++;r[x]=r[l]+"|x|X|\\*";var E=a++;r[E]="[v=\\s]*("+r[x]+")(?:\\.("+r[x]+")(?:\\.("+r[x]+")(?:"+r[f]+")?"+r[v]+"?)?)?";var D=a++;r[D]="[v=\\s]*("+r[k]+")(?:\\.("+r[k]+")(?:\\.("+r[k]+")(?:"+r[m]+")?"+r[v]+"?)?)?";var L=a++;r[L]="^"+r[S]+"\\s*"+r[E]+"$";var I=a++;r[I]="^"+r[S]+"\\s*"+r[D]+"$";var T=a++;r[T]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var N=a++;r[N]="(?:~>?)";var A=a++;r[A]="(\\s*)"+r[N]+"\\s+",o[A]=new RegExp(r[A],"g");var M=a++;r[M]="^"+r[N]+r[E]+"$";var R=a++;r[R]="^"+r[N]+r[D]+"$";var O=a++;r[O]="(?:\\^)";var F=a++;r[F]="(\\s*)"+r[O]+"\\s+",o[F]=new RegExp(r[F],"g");var P=a++;r[P]="^"+r[O]+r[E]+"$";var B=a++;r[B]="^"+r[O]+r[D]+"$";var z=a++;r[z]="^"+r[S]+"\\s*("+y+")$|^$";var W=a++;r[W]="^"+r[S]+"\\s*("+_+")$|^$";var H=a++;r[H]="(\\s*)"+r[S]+"\\s*("+y+"|"+r[E]+")",o[H]=new RegExp(r[H],"g");var V=a++;r[V]="^\\s*("+r[E]+")\\s+-\\s+("+r[E]+")\\s*$";var U=a++;r[U]="^\\s*("+r[D]+")\\s+-\\s+("+r[D]+")\\s*$";var K=a++;r[K]="(<|>)?=?\\s*\\*";for(var q=0;q<35;q++)i(q,r[q]),o[q]||(o[q]=new RegExp(r[q]));function $(e,t){if(e instanceof j)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t?o[C]:o[w]).test(e))return null;try{return new j(e,t)}catch(e){return null}}function j(e,t){if(e instanceof j){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof j))return new j(e,t);i("SemVer",e,t),this.loose=t;var r=e.trim().match(t?o[C]:o[w]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}t.parse=$,t.valid=function(e,t){var i=$(e,t);return i?i.version:null},t.clean=function(e,t){var i=$(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null},t.SemVer=j,j.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},j.prototype.toString=function(){return this.version},j.prototype.compare=function(e){return i("SemVer.compare",this.version,this.loose,e),e instanceof j||(e=new j(e,this.loose)),this.compareMain(e)||this.comparePre(e)},j.prototype.compareMain=function(e){return e instanceof j||(e=new j(e,this.loose)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},j.prototype.comparePre=function(e){if(e instanceof j||(e=new j(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],s=e.prerelease[t];if(i("prerelease compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return Y(n,s)}while(++t)},j.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,i,n){"string"==typeof i&&(n=i,i=void 0);try{return new j(e,i).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var i=$(e),n=$(t);if(i.prerelease.length||n.prerelease.length){for(var s in i)if(("major"===s||"minor"===s||"patch"===s)&&i[s]!==n[s])return"pre"+s;return"prerelease"}for(var s in i)if(("major"===s||"minor"===s||"patch"===s)&&i[s]!==n[s])return s},t.compareIdentifiers=Y;var G=/^[0-9]+$/;function Y(e,t){var i=G.test(e),n=G.test(t);return i&&n&&(e=+e,t=+t),i&&!n?-1:n&&!i?1:e<t?-1:e>t?1:0}function X(e,t,i){return new j(e,i).compare(new j(t,i))}function Q(e,t,i){return X(e,t,i)>0}function Z(e,t,i){return X(e,t,i)<0}function J(e,t,i){return 0===X(e,t,i)}function ee(e,t,i){return 0!==X(e,t,i)}function te(e,t,i){return X(e,t,i)>=0}function ie(e,t,i){return X(e,t,i)<=0}function ne(e,t,i,n){var s;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),s=e===i;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),s=e!==i;break;case"":case"=":case"==":s=J(e,i,n);break;case"!=":s=ee(e,i,n);break;case">":s=Q(e,i,n);break;case">=":s=te(e,i,n);break;case"<":s=Z(e,i,n);break;case"<=":s=ie(e,i,n);break;default:throw new TypeError("Invalid operator: "+t)}return s}function se(e,t){if(e instanceof se){if(e.loose===t)return e;e=e.value}if(!(this instanceof se))return new se(e,t);i("comparator",e,t),this.loose=t,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}t.rcompareIdentifiers=function(e,t){return Y(t,e)},t.major=function(e,t){return new j(e,t).major},t.minor=function(e,t){return new j(e,t).minor},t.patch=function(e,t){return new j(e,t).patch},t.compare=X,t.compareLoose=function(e,t){return X(e,t,!0)},t.rcompare=function(e,t,i){return X(t,e,i)},t.sort=function(e,i){return e.sort((function(e,n){return t.compare(e,n,i)}))},t.rsort=function(e,i){return e.sort((function(e,n){return t.rcompare(e,n,i)}))},t.gt=Q,t.lt=Z,t.eq=J,t.neq=ee,t.gte=te,t.lte=ie,t.cmp=ne,t.Comparator=se;var oe={};function re(e,t){if(e instanceof re)return e.loose===t?e:new re(e.raw,t);if(e instanceof se)return new re(e.value,t);if(!(this instanceof re))return new re(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,i,n,s,o,r,a,l,h,c,d,u){return((t=ae(i)?"":ae(n)?">="+i+".0.0":ae(s)?">="+i+"."+n+".0":">="+t)+" "+(a=ae(l)?"":ae(h)?"<"+(+l+1)+".0.0":ae(c)?"<"+l+"."+(+h+1)+".0":d?"<="+l+"."+h+"."+c+"-"+d:"<="+a)).trim()}function he(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(n=0;n<e.length;n++)if(i(e[n].semver),e[n].semver!==oe&&e[n].semver.prerelease.length>0){var s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}function ce(e,t,i){try{t=new re(t,i)}catch(e){return!1}return t.test(e)}function de(e,t,i,n){var s,o,r,a,l;switch(e=new j(e,n),t=new re(t,n),i){case">":s=Q,o=ie,r=Z,a=">",l=">=";break;case"<":s=Z,o=te,r=Q,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var h=0;h<t.set.length;++h){var c=t.set[h],d=null,u=null;if(c.forEach((function(e){e.semver===oe&&(e=new se(">=0.0.0")),d=d||e,u=u||e,s(e.semver,d.semver,n)?d=e:r(e.semver,u.semver,n)&&(u=e)})),d.operator===a||d.operator===l)return!1;if((!u.operator||u.operator===a)&&o(e,u.semver))return!1;if(u.operator===l&&r(e,u.semver))return!1}return!0}se.prototype.parse=function(e){var t=this.loose?o[z]:o[W],i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new j(i[2],this.loose):this.semver=oe},se.prototype.toString=function(){return this.value},se.prototype.test=function(e){return i("Comparator.test",e,this.loose),this.semver===oe||("string"==typeof e&&(e=new j(e,this.loose)),ne(e,this.operator,this.semver,this.loose))},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Comparator is required");var i;if(""===this.operator)return i=new re(e.value,t),ce(this.value,i,t);if(""===e.operator)return i=new re(this.value,t),ce(e.semver,i,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,r=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||s||o&&r||a||l},t.Range=re,re.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},re.prototype.toString=function(){return this.range},re.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),i("range",e,t);var n=t?o[U]:o[V];e=e.replace(n,le),i("hyphen replace",e),e=e.replace(o[H],"$1$2$3"),i("comparator trim",e,o[H]),e=(e=(e=e.replace(o[A],"$1~")).replace(o[F],"$1^")).split(/\s+/).join(" ");var s=t?o[z]:o[W],r=e.split(" ").map((function(e){return function(e,t){return i("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){i("caret",e,t);var n=t?o[B]:o[P];return e.replace(n,(function(t,n,s,o,r){var a;return i("caret",e,t,n,s,o,r),ae(n)?a="":ae(s)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a="0"===n?">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":">="+n+"."+s+".0 <"+(+n+1)+".0.0":r?(i("replaceCaret pr",r),"-"!==r.charAt(0)&&(r="-"+r),a="0"===n?"0"===s?">="+n+"."+s+"."+o+r+" <"+n+"."+s+"."+(+o+1):">="+n+"."+s+"."+o+r+" <"+n+"."+(+s+1)+".0":">="+n+"."+s+"."+o+r+" <"+(+n+1)+".0.0"):(i("no pr"),a="0"===n?"0"===s?">="+n+"."+s+"."+o+" <"+n+"."+s+"."+(+o+1):">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0":">="+n+"."+s+"."+o+" <"+(+n+1)+".0.0"),i("caret return",a),a}))}(e,t)})).join(" ")}(e,t),i("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t?o[R]:o[M];return e.replace(n,(function(t,n,s,o,r){var a;return i("tilde",e,t,n,s,o,r),ae(n)?a="":ae(s)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?a=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":r?(i("replaceTilde pr",r),"-"!==r.charAt(0)&&(r="-"+r),a=">="+n+"."+s+"."+o+r+" <"+n+"."+(+s+1)+".0"):a=">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0",i("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),i("tildes",e),e=function(e,t){return i("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t?o[I]:o[L];return e.replace(n,(function(t,n,s,o,r,a){i("xRange",e,t,n,s,o,r,a);var l=ae(s),h=l||ae(o),c=h||ae(r);return"="===n&&c&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&c?(h&&(o=0),c&&(r=0),">"===n?(n=">=",h?(s=+s+1,o=0,r=0):c&&(o=+o+1,r=0)):"<="===n&&(n="<",h?s=+s+1:o=+o+1),t=n+s+"."+o+"."+r):h?t=">="+s+".0.0 <"+(+s+1)+".0.0":c&&(t=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),i("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),i("xrange",e),e=function(e,t){return i("replaceStars",e,t),e.trim().replace(o[K],"")}(e,t),i("stars",e),e}(e,t)})).join(" ").split(/\s+/);return this.loose&&(r=r.filter((function(e){return!!e.match(s)}))),r=r.map((function(e){return new se(e,t)}))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Range is required");return this.set.some((function(i){return i.every((function(i){return e.set.some((function(e){return e.every((function(e){return i.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new re(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},re.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new j(e,this.loose));for(var t=0;t<this.set.length;t++)if(he(this.set[t],e))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,i){var n=null,s=null;try{var o=new re(t,i)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==s.compare(e)||(s=new j(n=e,i)))})),n},t.minSatisfying=function(e,t,i){var n=null,s=null;try{var o=new re(t,i)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==s.compare(e)||(s=new j(n=e,i)))})),n},t.validRange=function(e,t){try{return new re(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,i){return de(e,t,"<",i)},t.gtr=function(e,t,i){return de(e,t,">",i)},t.outside=de,t.prerelease=function(e,t){var i=$(e,t);return i&&i.prerelease.length?i.prerelease:null},t.intersects=function(e,t,i){return e=new re(e,i),t=new re(t,i),e.intersects(t)},t.coerce=function(e){if(e instanceof j)return e;if("string"!=typeof e)return null;var t=e.match(o[T]);return null==t?null:$((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}}(HW,HW.exports);var UW=HW.exports;const KW="vs/platform/extensions/common/extensionValidator",qW=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,$W=/^-(\d{4})(\d{2})(\d{2})$/;function jW(e){if(!function(e){return"*"===(e=e.trim())||qW.test(e)}(e))return null;if("*"===(e=e.trim()))return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(qW);return t?{hasCaret:"^"===t[1],hasGreaterEquals:">="===t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}:null}function GW(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,n=e.minorBase;let s=e.minorMustEqual;const o=e.patchBase;let r=e.patchMustEqual;e.hasCaret&&(0===t||(s=!1),r=!1);let a=0;if(e.preRelease){const t=$W.exec(e.preRelease);if(t){const[,e,i,n]=t;a=Date.UTC(Number(e),Number(i)-1,Number(n))}}return{majorBase:t,majorMustEqual:i,minorBase:n,minorMustEqual:s,patchBase:o,patchMustEqual:r,isMinimum:e.hasGreaterEquals,notBefore:a}}function YW(e,t,i,n,s){const o=[];if(void 0!==n.publisher&&"string"!=typeof n.publisher)return o.push([nd.Error,u(KW,0,"property publisher must be of type `string`.")]),o;if("string"!=typeof n.name)return o.push([nd.Error,u(KW,1,"property `{0}` is mandatory and must be of type `string`","name")]),o;if("string"!=typeof n.version)return o.push([nd.Error,u(KW,2,"property `{0}` is mandatory and must be of type `string`","version")]),o;if(!n.engines)return o.push([nd.Error,u(KW,3,"property `{0}` is mandatory and must be of type `object`","engines")]),o;if("string"!=typeof n.engines.vscode)return o.push([nd.Error,u(KW,4,"property `{0}` is mandatory and must be of type `string`","engines.vscode")]),o;if(void 0!==n.extensionDependencies&&!QW(n.extensionDependencies))return o.push([nd.Error,u(KW,5,"property `{0}` can be omitted or must be of type `string[]`","extensionDependencies")]),o;if(void 0!==n.activationEvents){if(!QW(n.activationEvents))return o.push([nd.Error,u(KW,6,"property `{0}` can be omitted or must be of type `string[]`","activationEvents")]),o;if(void 0===n.main&&void 0===n.browser)return o.push([nd.Error,u(KW,7,"property `{0}` should be omitted if the extension doesn't have a `{1}` or `{2}` property.","activationEvents","main","browser")]),o}if(void 0!==n.extensionKind&&void 0===n.main&&o.push([nd.Warning,u(KW,8,"property `{0}` can be defined only if property `main` is also defined.","extensionKind")]),void 0!==n.main){if("string"!=typeof n.main)return o.push([nd.Error,u(KW,9,"property `{0}` can be omitted or must be of type `string`","main")]),o;{const e=ms(i,n.main);us(e,i)||o.push([nd.Warning,u(KW,10,"Expected `main` ({0}) to be included inside extension's folder ({1}). This might make the extension non-portable.",e.path,i.path)])}}if(void 0!==n.browser){if("string"!=typeof n.browser)return o.push([nd.Error,u(KW,11,"property `{0}` can be omitted or must be of type `string`","browser")]),o;{const e=ms(i,n.browser);us(e,i)||o.push([nd.Warning,u(KW,12,"Expected `browser` ({0}) to be included inside extension's folder ({1}). This might make the extension non-portable.",e.path,i.path)])}}if(!UW.valid(n.version))return o.push([nd.Error,u(KW,13,"Extension version is not semver compatible.")]),o;const r=[],a=function(e,t,i,n,s){if(n||void 0===i.main&&void 0===i.browser)return!0;return XW(e,t,i.engines.vscode,s)}(e,t,n,s,r);if(!a)for(const e of r)o.push([nd.Error,e]);return o}function XW(e,t,i,n=[]){const s=GW(jW(i));if(!s)return n.push(u(KW,14,"Could not parse `engines.vscode` value {0}. Please use, for example: ^1.22.0, ^1.22.x, etc.",i)),!1;if(0===s.majorBase){if(!s.majorMustEqual||!s.minorMustEqual)return n.push(u(KW,15,"Version specified in `engines.vscode` ({0}) is not specific enough. For vscode versions before 1.0.0, please define at a minimum the major and minor desired version. E.g. ^0.10.0, 0.10.x, 0.11.0, etc.",i)),!1}else if(!s.majorMustEqual)return n.push(u(KW,16,"Version specified in `engines.vscode` ({0}) is not specific enough. For vscode versions after 1.0.0, please define at a minimum the major desired version. E.g. ^1.10.0, 1.10.x, 1.x.x, 2.x.x, etc.",i)),!1;return!!function(e,t,i){let n,s,o;if(n="string"==typeof e?GW(jW(e)):e,t instanceof Date?s=t.getTime():"string"==typeof t&&(s=new Date(t).getTime()),o="string"==typeof i?GW(jW(i)):i,!n||!o)return!1;const r=n.majorBase,a=n.minorBase,l=n.patchBase;let h=o.majorBase,c=o.minorBase,d=o.patchBase;const u=o.notBefore;let g=o.majorMustEqual,p=o.minorMustEqual,f=o.patchMustEqual;return o.isMinimum?r>h||!(r<h)&&(a>c||!(a<c)&&!(s&&s<u)&&l>=d):(1!==r||0!==h||g&&p&&f||(h=1,c=0,d=0,g=!0,p=!1,f=!1),!(r<h||(r>h?g:a<c||(a>c?p:l<d||(l>d?f:s&&s<u)))))}(e,t,s)||(n.push(u(KW,17,"Extension is not compatible with Code {0}. Extension requires: {1}.",e,i)),!1)}function QW(e){if(!Array.isArray(e))return!1;for(let t=0,i=e.length;t<i;t++)if("string"!=typeof e[t])return!1;return!0}const ZW=o("productService"),JW=o("IUserDataProfilesService");class eH extends Error{constructor(e,t){super(e),this.code=t}}let tH=class extends Qt{constructor(e,t,i,n,s,o){super(),this.extensionsLocation=e,this.fileService=t,this.userDataProfilesService=i,this.uriIdentityService=n,this.telemetryService=s,this.logService=o,this._onAddExtensions=this._register(new ui),this.onAddExtensions=this._onAddExtensions.event,this._onDidAddExtensions=this._register(new ui),this.onDidAddExtensions=this._onDidAddExtensions.event,this._onRemoveExtensions=this._register(new ui),this.onRemoveExtensions=this._onRemoveExtensions.event,this._onDidRemoveExtensions=this._register(new ui),this.onDidRemoveExtensions=this._onDidRemoveExtensions.event,this.resourcesAccessQueueMap=new At}scanProfileExtensions(e,t){return this.withProfileExtensions(e,void 0,t)}async addExtensionsToProfile(e,t,i){const n=[],s=[];try{return await this.withProfileExtensions(t,(o=>{const r=[];if(i)r.push(...o);else for(const t of o)e.some((([e])=>Yn(e.identifier,t.identifier)&&e.manifest.version!==t.version))?n.push(t):r.push(t);for(const[t,i]of e){const e=r.findIndex((e=>Yn(e.identifier,t.identifier)&&e.version===t.manifest.version)),n={identifier:t.identifier,version:t.manifest.version,location:t.location,metadata:i};-1===e?(s.push(n),r.push(n)):r.splice(e,1,n)}return s.length&&this._onAddExtensions.fire({extensions:s,profileLocation:t}),n.length&&this._onRemoveExtensions.fire({extensions:n,profileLocation:t}),r})),s.length&&this._onDidAddExtensions.fire({extensions:s,profileLocation:t}),n.length&&this._onDidRemoveExtensions.fire({extensions:n,profileLocation:t}),s}catch(e){throw s.length&&this._onDidAddExtensions.fire({extensions:s,error:e,profileLocation:t}),n.length&&this._onDidRemoveExtensions.fire({extensions:n,error:e,profileLocation:t}),e}}async updateMetadata(e,t){const i=[];return await this.withProfileExtensions(t,(t=>{const n=[];for(const s of t){const t=e.find((([e])=>Yn(e.identifier,s.identifier)&&e.manifest.version===s.version));t?(s.metadata={...s.metadata,...t[1]},i.push(s),n.push(s)):n.push(s)}return n})),i}async removeExtensionFromProfile(e,t){const i=[];try{await this.withProfileExtensions(t,(n=>{const s=[];for(const t of n)Yn(t.identifier,e.identifier)?i.push(t):s.push(t);return i.length&&this._onRemoveExtensions.fire({extensions:i,profileLocation:t}),s})),i.length&&this._onDidRemoveExtensions.fire({extensions:i,profileLocation:t})}catch(e){throw i.length&&this._onDidRemoveExtensions.fire({extensions:i,error:e,profileLocation:t}),e}}async withProfileExtensions(e,t,i){return this.getResourceAccessQueue(e).queue((async()=>{let n,s=[];try{const t=await this.fileService.readFile(e);n=JSON.parse(t.value.toString().trim()||"[]")}catch(t){if(1!==Uz(t))throw t;if(this.uriIdentityService.extUri.isEqual(e,this.userDataProfilesService.defaultProfile.extensionsResource)&&(n=await this.migrateFromOldDefaultProfileExtensionsLocation()),!n&&i?.bailOutWhenFileNotFound)throw new eH(it(t),"ERROR_PROFILE_NOT_FOUND")}if(n){Array.isArray(n)||this.reportAndThrowInvalidConentError(e);let t=!1;for(const i of n){let n;if(iH(i)||this.reportAndThrowInvalidConentError(e),Ln(i.relativeLocation)&&i.relativeLocation)n=this.resolveExtensionLocation(i.relativeLocation);else{if(Ln(i.location)){this.logService.warn(`Extensions profile: Ignoring extension with invalid location: ${i.location}`);continue}{n=Fe.revive(i.location);const e=this.toRelativePath(n);e&&(t=!0,i.relativeLocation=e)}}Mn(i.metadata?.hasPreReleaseVersion)&&i.metadata?.preRelease&&(t=!0,i.metadata.hasPreReleaseVersion=!0),s.push({identifier:i.identifier,location:n,version:i.version,metadata:i.metadata})}t&&await this.fileService.writeFile(e,ho.fromString(JSON.stringify(n)))}if(t){s=t(s);const i=s.map((e=>({identifier:e.identifier,version:e.version,location:e.location.toJSON(),relativeLocation:this.toRelativePath(e.location),metadata:e.metadata})));await this.fileService.writeFile(e,ho.fromString(JSON.stringify(i)))}return s}))}reportAndThrowInvalidConentError(e){const t=new eH(`Invalid extensions content in ${e.toString()}`,"ERROR_INVALID_CONTENT");throw this.telemetryService.publicLogError2("extensionsProfileScanningError",{code:t.code}),t}toRelativePath(e){return this.uriIdentityService.extUri.isEqual(this.uriIdentityService.extUri.dirname(e),this.extensionsLocation)?this.uriIdentityService.extUri.basename(e):void 0}resolveExtensionLocation(e){return this.uriIdentityService.extUri.joinPath(this.extensionsLocation,e)}async migrateFromOldDefaultProfileExtensionsLocation(){return this._migrationPromise||(this._migrationPromise=(async()=>{const e=this.uriIdentityService.extUri.joinPath(this.userDataProfilesService.defaultProfile.location,"extensions.json"),t=this.uriIdentityService.extUri.joinPath(this.extensionsLocation,".init-default-profile-extensions");let i,n;try{i=(await this.fileService.readFile(e)).value.toString()}catch(e){if(1===Uz(e))return;throw e}this.logService.info("Migrating extensions from old default profile location",e.toString());try{const e=JSON.parse(i);Array.isArray(e)&&e.every((e=>iH(e)))?n=e:this.logService.warn("Skipping migrating from old default profile locaiton: Found invalid data",e)}catch(e){this.logService.error(e)}if(n)try{await this.fileService.createFile(this.userDataProfilesService.defaultProfile.extensionsResource,ho.fromString(JSON.stringify(n)),{overwrite:!1}),this.logService.info("Migrated extensions from old default profile location to new location",e.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString())}catch(t){if(3!==Uz(t))throw t;this.logService.info("Migration from old default profile location to new location is done by another window",e.toString(),this.userDataProfilesService.defaultProfile.extensionsResource.toString())}try{await this.fileService.del(e)}catch(e){1!==Uz(e)&&this.logService.error(e)}try{await this.fileService.del(t)}catch(e){1!==Uz(e)&&this.logService.error(e)}return n})()),this._migrationPromise}getResourceAccessQueue(e){let t=this.resourcesAccessQueueMap.get(e);return t||(t=new Va,this.resourcesAccessQueueMap.set(e,t)),t}};function iH(e){return In(e)&&((t=e.identifier)&&"object"==typeof t&&"string"==typeof t.id&&(!t.uuid||"string"==typeof t.uuid))&&(function(e){if(!e)return!1;return Ln(e.path)&&Ln(e.scheme)}(e.location)||Ln(e.location)&&e.location)&&(Mn(e.relativeLocation)||Ln(e.relativeLocation))&&e.version&&Ln(e.version);var t}tH=Bs([zs(1,Fs),zs(2,JW),zs(3,lW),zs(4,nS),zs(5,Ed)],tH);const nH=o("IExtensionsProfileScannerService"),sH="vs/platform/extensionManagement/common/extensionNls";function oH(e,t,i,n){try{!function(e,t,i,n){const s=(o,r,a)=>{const l=o[r];if(Ln(l)){const s=l,h=s.length;if(h>1&&"%"===s[0]&&"%"===s[h-1]){const l=s.substr(1,h-2);let c=i[l];void 0===c&&n&&(c=n[l]);const d="string"==typeof c?c:c?.message,g=n?.[l],p="string"==typeof g?g:g?.message;if(!d)return void(p||e.warn(`[${t.name}]: ${u(sH,0,"Couldn't find message for key {0}.",l)}`));if(a&&("title"===r||"category"===r)&&p&&p!==d){const e={value:d,original:p};o[r]=e}else o[r]=d}}else if(In(l))for(const e in l)l.hasOwnProperty(e)&&s(l,e,"commands"===e||a);else if(Array.isArray(l))for(let e=0;e<l.length;e++)s(l,e,a)};for(const e in t)t.hasOwnProperty(e)&&s(t,e)}(e,t,i,n)}catch(t){e.error(t?.message??t)}return t}const rH="vs/platform/extensionManagement/common/extensionsScannerService";var aH;!function(e){e.equals=function(e,t){if(e===t)return!0;const i=Object.keys(e),n=new Set;for(const e of Object.keys(t))n.add(e);if(i.length!==n.size)return!1;for(const s of i){if(e[s]!==t[s])return!1;n.delete(s)}return 0===n.size}}(aH||(aH={}));let lH=class extends Qt{constructor(e,t,i,n,s,o,r,a,l,h,c,d){super(),this.systemExtensionsLocation=e,this.userExtensionsLocation=t,this.extensionsControlLocation=i,this.currentProfile=n,this.userDataProfilesService=s,this.extensionsProfileScannerService=o,this.fileService=r,this.logService=a,this.environmentService=l,this.productService=h,this.uriIdentityService=c,this.instantiationService=d,this._onDidChangeCache=this._register(new ui),this.onDidChangeCache=this._onDidChangeCache.event,this.obsoleteFile=ms(this.userExtensionsLocation,".obsolete"),this.systemExtensionsCachedScanner=this._register(this.instantiationService.createInstance(uH,this.currentProfile,this.obsoleteFile)),this.userExtensionsCachedScanner=this._register(this.instantiationService.createInstance(uH,this.currentProfile,this.obsoleteFile)),this.extensionsScanner=this._register(this.instantiationService.createInstance(dH,this.obsoleteFile)),this.initializeDefaultProfileExtensionsPromise=void 0,this._register(this.systemExtensionsCachedScanner.onDidChangeCache((()=>this._onDidChangeCache.fire(0)))),this._register(this.userExtensionsCachedScanner.onDidChangeCache((()=>this._onDidChangeCache.fire(1))))}getTargetPlatform(){return this._targetPlatformPromise||(this._targetPlatformPromise=es(this.fileService,this.logService)),this._targetPlatformPromise}async scanAllExtensions(e,t,i){const[n,s]=await Promise.all([this.scanSystemExtensions(e),this.scanUserExtensions(t)]),o=i?await this.scanExtensionsUnderDevelopment(e,[...n,...s]):[];return this.dedupExtensions(n,s,o,await this.getTargetPlatform(),!0)}async scanSystemExtensions(e){const t=[];t.push(this.scanDefaultSystemExtensions(!!e.useCache,e.language)),t.push(this.scanDevSystemExtensions(e.language,!!e.checkControlFile));const[i,n]=await Promise.all(t);return this.applyScanOptions([...i,...n],0,e,!1)}async scanUserExtensions(e){const t=e.profileLocation??this.userExtensionsLocation;this.logService.trace("Started scanning user extensions",t);const i=this.uriIdentityService.extUri.isEqual(e.profileLocation,this.userDataProfilesService.defaultProfile.extensionsResource)?{bailOutWhenFileNotFound:!0}:void 0,n=await this.createExtensionScannerInput(t,!!e.profileLocation,1,!e.includeUninstalled,e.language,!0,i,e.productVersion??this.getProductVersion()),s=e.useCache&&!n.devMode&&n.excludeObsolete?this.userExtensionsCachedScanner:this.extensionsScanner;let o;try{o=await s.scanExtensions(n)}catch(e){if(!(e instanceof eH&&"ERROR_PROFILE_NOT_FOUND"===e.code))throw e;await this.doInitializeDefaultProfileExtensions(),o=await s.scanExtensions(n)}return o=await this.applyScanOptions(o,1,e,!0),this.logService.trace("Scanned user extensions:",o.length),o}async scanExtensionsUnderDevelopment(e,t){if(this.environmentService.isExtensionDevelopment&&this.environmentService.extensionDevelopmentLocationURI){const i=(await Promise.all(this.environmentService.extensionDevelopmentLocationURI.filter((e=>e.scheme===vn.file)).map((async i=>{const n=await this.createExtensionScannerInput(i,!1,1,!0,e.language,!1,void 0,e.productVersion??this.getProductVersion());return(await this.extensionsScanner.scanOneOrMultipleExtensions(n)).map((e=>(e.type=t.find((t=>Yn(t.identifier,e.identifier)))?.type??e.type,this.extensionsScanner.validate(e,n))))})))).flat();return this.applyScanOptions(i,"development",e,!0)}return[]}async scanExistingExtension(e,t,i){const n=await this.createExtensionScannerInput(e,!1,t,!0,i.language,!0,void 0,i.productVersion??this.getProductVersion()),s=await this.extensionsScanner.scanExtension(n);return s&&(i.includeInvalid||s.isValid)?s:null}async scanOneOrMultipleExtensions(e,t,i){const n=await this.createExtensionScannerInput(e,!1,t,!0,i.language,!0,void 0,i.productVersion??this.getProductVersion()),s=await this.extensionsScanner.scanOneOrMultipleExtensions(n);return this.applyScanOptions(s,t,i,!0)}async scanMultipleExtensions(e,t,i){const n=[];return await Promise.all(e.map((async e=>{const s=await this.scanOneOrMultipleExtensions(e,t,i);n.push(...s)}))),this.applyScanOptions(n,t,i,!0)}async scanMetadata(e){const t=ms(e,"package.json"),i=(await this.fileService.readFile(t)).value.toString();return JSON.parse(i).__metadata}async updateMetadata(e,t){const i=ms(e,"package.json"),n=(await this.fileService.readFile(i)).value.toString(),s=JSON.parse(n);!1===t.isMachineScoped&&delete t.isMachineScoped,!1===t.isBuiltin&&delete t.isBuiltin,s.__metadata={...s.__metadata,...t},await this.fileService.writeFile(ms(e,"package.json"),ho.fromString(JSON.stringify(s,null,"\t")))}async initializeDefaultProfileExtensions(){try{await this.extensionsProfileScannerService.scanProfileExtensions(this.userDataProfilesService.defaultProfile.extensionsResource,{bailOutWhenFileNotFound:!0})}catch(e){if(!(e instanceof eH&&"ERROR_PROFILE_NOT_FOUND"===e.code))throw e;await this.doInitializeDefaultProfileExtensions()}}async doInitializeDefaultProfileExtensions(){return this.initializeDefaultProfileExtensionsPromise||(this.initializeDefaultProfileExtensionsPromise=(async()=>{try{this.logService.info("Started initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString());const e=await this.scanUserExtensions({includeInvalid:!0});if(e.length)await this.extensionsProfileScannerService.addExtensionsToProfile(e.map((e=>[e,e.metadata])),this.userDataProfilesService.defaultProfile.extensionsResource);else try{await this.fileService.createFile(this.userDataProfilesService.defaultProfile.extensionsResource,ho.fromString(JSON.stringify([])))}catch(e){1!==Uz(e)&&this.logService.warn("Failed to create default profile extensions manifest in extensions installation folder.",this.userExtensionsLocation.toString(),it(e))}this.logService.info("Completed initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString())}catch(e){this.logService.error(e)}finally{this.initializeDefaultProfileExtensionsPromise=void 0}})()),this.initializeDefaultProfileExtensionsPromise}async applyScanOptions(e,t,i,n){return i.includeAllVersions||(e=this.dedupExtensions(0===t?e:void 0,1===t?e:void 0,"development"===t?e:void 0,await this.getTargetPlatform(),n)),i.includeInvalid||(e=e.filter((e=>e.isValid))),e.sort(((e,t)=>{const i=De(e.location.fsPath),n=De(t.location.fsPath);return i<n?-1:i>n?1:0}))}dedupExtensions(e,t,i,n,s){const o=(e,t,i)=>{if(e.isValid&&!t.isValid)return!1;if(e.isValid===t.isValid){if(s&&UW.gt(e.manifest.version,t.manifest.version))return this.logService.debug(`Skipping extension ${t.location.path} with lower version ${t.manifest.version} in favour of ${e.location.path} with version ${e.manifest.version}`),!1;if(UW.eq(e.manifest.version,t.manifest.version)){if(0===e.type)return this.logService.debug(`Skipping extension ${t.location.path} in favour of system extension ${e.location.path} with same version`),!1;if(e.targetPlatform===n)return this.logService.debug(`Skipping extension ${t.location.path} from different target platform ${t.targetPlatform}`),!1}}return i?this.logService.warn(`Overwriting user extension ${e.location.path} with ${t.location.path}.`):this.logService.debug(`Overwriting user extension ${e.location.path} with ${t.location.path}.`),!0},r=new Dn;return e?.forEach((e=>{const t=r.get(e.identifier.id);t&&!o(t,e,!1)||r.set(e.identifier.id,e)})),t?.forEach((t=>{const i=r.get(t.identifier.id);i||!e||0!==t.type?i&&!o(i,t,!1)||r.set(t.identifier.id,t):this.logService.debug(`Skipping obsolete system extension ${t.location.path}.`)})),i?.forEach((e=>{const t=r.get(e.identifier.id);t&&!o(t,e,!0)||r.set(e.identifier.id,e),r.set(e.identifier.id,e)})),[...r.values()]}async scanDefaultSystemExtensions(e,t){this.logService.trace("Started scanning system extensions");const i=await this.createExtensionScannerInput(this.systemExtensionsLocation,!1,0,!0,t,!0,void 0,this.getProductVersion()),n=e&&!i.devMode?this.systemExtensionsCachedScanner:this.extensionsScanner,s=await n.scanExtensions(i);return this.logService.trace("Scanned system extensions:",s.length),s}async scanDevSystemExtensions(e,t){const i=this.environmentService.isBuilt?[]:this.productService.builtInExtensions;if(!i?.length)return[];this.logService.trace("Started scanning dev system extensions");const n=t?await this.getBuiltInExtensionControl():{},s=[],o=Fe.file(ye(Se(Sn.asFileUri("").fsPath,"..",".build","builtInExtensions")));for(const e of i){const t=n[e.name]||"marketplace";switch(t){case"disabled":break;case"marketplace":s.push(ms(o,e.name));break;default:s.push(Fe.file(t))}}const r=await Promise.all(s.map((async t=>this.extensionsScanner.scanExtension(await this.createExtensionScannerInput(t,!1,0,!0,e,!0,void 0,this.getProductVersion())))));return this.logService.trace("Scanned dev system extensions:",r.length),lt(r)}async getBuiltInExtensionControl(){try{const e=await this.fileService.readFile(this.extensionsControlLocation);return JSON.parse(e.value.toString())}catch(e){return{}}}async createExtensionScannerInput(e,t,i,n,s,o,r,a){const l=await this.getTranslations(s??V),h=await this.getMtime(e),c=t&&!this.uriIdentityService.extUri.isEqual(e,this.userDataProfilesService.defaultProfile.extensionsResource)?this.userDataProfilesService.defaultProfile.extensionsResource:void 0,d=c?await this.getMtime(c):void 0;return new hH(e,h,c,d,t,r,i,n,o,a.version,a.date,this.productService.commit,!this.environmentService.isBuilt,s,l)}async getMtime(e){try{const t=await this.fileService.stat(e);if("number"==typeof t.mtime)return t.mtime}catch(e){}}getProductVersion(){return{version:this.productService.version,date:this.productService.date}}};lH=Bs([zs(4,JW),zs(5,nH),zs(6,Fs),zs(7,Ed),zs(8,Es),zs(9,ZW),zs(10,lW),zs(11,s)],lH);class hH{constructor(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p){this.location=e,this.mtime=t,this.applicationExtensionslocation=i,this.applicationExtensionslocationMtime=n,this.profile=s,this.profileScanOptions=o,this.type=r,this.excludeObsolete=a,this.validate=l,this.productVersion=h,this.productDate=c,this.productCommit=d,this.devMode=u,this.language=g,this.translations=p}static createNlsConfiguration(e){return{language:e.language,pseudo:"pseudo"===e.language,devMode:e.devMode,translations:e.translations}}static equals(e,t){return ds(e.location,t.location)&&e.mtime===t.mtime&&ds(e.applicationExtensionslocation,t.applicationExtensionslocation)&&e.applicationExtensionslocationMtime===t.applicationExtensionslocationMtime&&e.profile===t.profile&&qn(e.profileScanOptions,t.profileScanOptions)&&e.type===t.type&&e.excludeObsolete===t.excludeObsolete&&e.validate===t.validate&&e.productVersion===t.productVersion&&e.productDate===t.productDate&&e.productCommit===t.productCommit&&e.devMode===t.devMode&&e.language===t.language&&aH.equals(e.translations,t.translations)}}let cH=class extends Qt{constructor(e,t){super(),this.fileService=e,this.logService=t}async getLocalizedMessages(e,t,i){const n=ms(e,"package.nls.json"),s=(t,i)=>{i.forEach((i=>{this.logService.error(this.formatMessage(e,u(rH,0,"Failed to parse {0}: {1}.",t?.path,WW(i.error))))}))},o=t=>{this.logService.error(this.formatMessage(e,u(rH,1,"Invalid format {0}: JSON object expected.",t?.path)))},r=`${t.publisher}.${t.name}`,a=i.translations[r];if(a)try{const e=Fe.parse(a),t=(await this.fileService.readFile(e)).value.toString(),i=[],r=Ms(t,i);if(i.length>0)return s(e,i),{values:void 0,default:n};if("object"!==Os(r))return o(e),{values:void 0,default:n};return{values:r.contents?r.contents.package:void 0,default:n}}catch(e){return{values:void 0,default:n}}else{if(!await this.fileService.exists(n))return;let t;try{t=await this.findMessageBundles(e,i)}catch(e){return}if(!t.localized)return{values:void 0,default:t.original};try{const e=(await this.fileService.readFile(t.localized)).value.toString(),i=[],n=Ms(e,i);return i.length>0?(s(t.localized,i),{values:void 0,default:t.original}):"object"!==Os(n)?(o(t.localized),{values:void 0,default:t.original}):{values:n,default:t.original}}catch(e){return{values:void 0,default:t.original}}}}async translateManifest(e,t,i){const n=await this.getLocalizedMessages(e,t,i);if(n)try{const i=[],s=await this.resolveOriginalMessageBundle(n.default,i);if(i.length>0)return i.forEach((t=>{this.logService.error(this.formatMessage(e,u(rH,0,"Failed to parse {0}: {1}.",n.default?.path,WW(t.error))))})),t;if("object"!==Os(n))return this.logService.error(this.formatMessage(e,u(rH,1,"Invalid format {0}: JSON object expected.",n.default?.path))),t;const o=n.values||Object.create(null);return oH(this.logService,t,o,s)}catch(e){}return t}async resolveOriginalMessageBundle(e,t){if(e)try{return Ms((await this.fileService.readFile(e)).value.toString(),t)}catch(e){}}findMessageBundles(e,t){return new Promise(((i,n)=>{const s=t=>{const n=ms(e,`package.nls.${t}.json`);this.fileService.exists(n).then((o=>{o&&i({localized:n,original:ms(e,"package.nls.json")});const r=t.lastIndexOf("-");-1===r?i({localized:ms(e,"package.nls.json"),original:null}):(t=t.substring(0,r),s(t))}))};if(t.devMode||t.pseudo||!t.language)return i({localized:ms(e,"package.nls.json"),original:null});s(t.language)}))}formatMessage(e,t){return`[${e.path}]: ${t}`}};cH=Bs([zs(0,Fs),zs(1,Ed)],cH);let dH=class extends cH{constructor(e,t,i,n,s){super(n,s),this.obsoleteFile=e,this.extensionsProfileScannerService=t,this.uriIdentityService=i}async scanExtensions(e){const t=e.profile?await this.scanExtensionsFromProfile(e):await this.scanExtensionsFromLocation(e);let i={};if(e.excludeObsolete&&1===e.type)try{const e=(await this.fileService.readFile(this.obsoleteFile)).value.toString();i=JSON.parse(e)}catch(e){}return Bn(i)?t:t.filter((e=>!i[Qn.create(e).toString()]))}async scanExtensionsFromLocation(e){const t=await this.fileService.resolve(e.location);if(!t.children?.length)return[];return lt(await Promise.all(t.children.map((async t=>{if(!t.isDirectory)return null;if(1===e.type&&0===gs(t.resource).indexOf("."))return null;const i=new hH(t.resource,e.mtime,e.applicationExtensionslocation,e.applicationExtensionslocationMtime,e.profile,e.profileScanOptions,e.type,e.excludeObsolete,e.validate,e.productVersion,e.productDate,e.productCommit,e.devMode,e.language,e.translations);return this.scanExtension(i)})))).sort(((e,t)=>e.location.path<t.location.path?-1:1))}async scanExtensionsFromProfile(e){let t=await this.scanExtensionsFromProfileResource(e.location,(()=>!0),e);if(e.applicationExtensionslocation&&!this.uriIdentityService.extUri.isEqual(e.location,e.applicationExtensionslocation)){t=t.filter((e=>!e.metadata?.isApplicationScoped));const i=await this.scanExtensionsFromProfileResource(e.applicationExtensionslocation,(e=>!!e.metadata?.isBuiltin||!!e.metadata?.isApplicationScoped),e);t.push(...i)}return t}async scanExtensionsFromProfileResource(e,t,i){const n=await this.extensionsProfileScannerService.scanProfileExtensions(e,i.profileScanOptions);if(!n.length)return[];return lt(await Promise.all(n.map((async e=>{if(t(e)){const t=new hH(e.location,i.mtime,i.applicationExtensionslocation,i.applicationExtensionslocationMtime,i.profile,i.profileScanOptions,i.type,i.excludeObsolete,i.validate,i.productVersion,i.productDate,i.productCommit,i.devMode,i.language,i.translations);return this.scanExtension(t,e.metadata)}return null}))))}async scanOneOrMultipleExtensions(e){try{if(await this.fileService.exists(ms(e.location,"package.json"))){const t=await this.scanExtension(e);return t?[t]:[]}return await this.scanExtensions(e)}catch(t){return this.logService.error(`Error scanning extensions at ${e.location.path}:`,it(t)),[]}}async scanExtension(e,t){try{let s=await this.scanExtensionManifest(e.location);if(s){s.publisher||(s.publisher=xn),t=t??s.__metadata,delete s.__metadata;const o=(i=s.publisher,n=s.name,Jn(Zn(i??xn,n))),r=t?.id?{id:o,uuid:t.id}:{id:o},a=t?.isSystem?0:e.type,l=0===a||!!t?.isBuiltin;s=await this.translateManifest(e.location,s,hH.createNlsConfiguration(e));const h={type:a,identifier:r,manifest:s,location:e.location,isBuiltin:l,targetPlatform:t?.targetPlatform??"undefined",publisherDisplayName:t?.publisherDisplayName,metadata:t,isValid:!0,validations:[]};return e.validate?this.validate(h,e):h}}catch(t){0!==e.type&&this.logService.error(t)}var i,n;return null}validate(e,t){let i=!0;const n=YW(t.productVersion,t.productDate,t.location,e.manifest,e.isBuiltin);for(const[e,s]of n)e===nd.Error&&(i=!1,this.logService.error(this.formatMessage(t.location,s)));return e.isValid=i,e.validations=n,e}async scanExtensionManifest(e){const t=ms(e,"package.json");let i,n;try{i=(await this.fileService.readFile(t)).value.toString()}catch(i){return 1!==Uz(i)&&this.logService.error(this.formatMessage(e,u(rH,2,"Cannot read file {0}: {1}.",t.path,i.message))),null}try{n=JSON.parse(i)}catch(n){const s=[];Ms(i,s);for(const i of s)this.logService.error(this.formatMessage(e,u(rH,3,"Failed to parse {0}: [{1}, {2}] {3}.",t.path,i.offset,i.length,WW(i.error))));return null}return"object"!==Os(n)?(this.logService.error(this.formatMessage(e,u(rH,4,"Invalid manifest file {0}: Not an JSON object.",t.path))),null):n}};dH=Bs([zs(1,nH),zs(2,lW),zs(3,Fs),zs(4,Ed)],dH);let uH=class extends dH{constructor(e,t,i,n,s,o,r){super(t,n,s,o,r),this.currentProfile=e,this.userDataProfilesService=i,this.cacheValidatorThrottler=this._register(new Pa(3e3)),this._onDidChangeCache=this._register(new ui),this.onDidChangeCache=this._onDidChangeCache.event}async scanExtensions(e){const t=this.getCacheFile(e),i=await this.readExtensionCache(t);if(this.input=e,i&&i.input&&hH.equals(i.input,this.input))return this.logService.debug("Using cached extensions scan result",e.location.toString()),this.cacheValidatorThrottler.trigger((()=>this.validateCache())),i.result.map((e=>(e.location=Fe.revive(e.location),e)));const n=await super.scanExtensions(e);return await this.writeExtensionCache(t,{input:e,result:n}),n}async readExtensionCache(e){try{const t=await this.fileService.readFile(e),i=JSON.parse(t.value.toString());return{result:i.result,input:g_(i.input)}}catch(t){this.logService.debug("Error while reading the extension cache file:",e.path,it(t))}return null}async writeExtensionCache(e,t){try{await this.fileService.writeFile(e,ho.fromString(JSON.stringify(t)))}catch(t){this.logService.debug("Error while writing the extension cache file:",e.path,it(t))}}async validateCache(){if(!this.input)return;const e=this.getCacheFile(this.input),t=await this.readExtensionCache(e);if(!t)return;const i=t.result,n=JSON.parse(JSON.stringify(await super.scanExtensions(this.input)));if(!qn(n,i))try{this.logService.info("Invalidating Cache",i,n),await this.fileService.del(e),this._onDidChangeCache.fire()}catch(e){this.logService.error(e)}}getCacheFile(e){const t=this.getProfile(e);return this.uriIdentityService.extUri.joinPath(t.cacheHome,0===e.type?"extensions.builtin.cache":"extensions.user.cache")}getProfile(e){return 0===e.type?this.userDataProfilesService.defaultProfile:e.profile?this.uriIdentityService.extUri.isEqual(e.location,this.currentProfile.extensionsResource)?this.currentProfile:this.userDataProfilesService.profiles.find((t=>this.uriIdentityService.extUri.isEqual(e.location,t.extensionsResource)))??this.currentProfile:this.userDataProfilesService.defaultProfile}};uH=Bs([zs(2,JW),zs(3,nH),zs(4,lW),zs(5,Fs),zs(6,Ed)],uH);const gH="vs/platform/files/common/io";async function pH(e,t,i,n,s,o){let r;try{await async function(e,t,i,n,s,o){fH(o);const r=await e.open(t,{create:!1});try{fH(o);let t=0,a=0,l=s&&"number"==typeof s.length?s.length:void 0,h=ho.alloc(Math.min(s.bufferSize,"number"==typeof l?l:s.bufferSize)),c=s&&"number"==typeof s.position?s.position:0,d=0;do{a=await e.read(r,c,h.buffer,d,h.byteLength-d),c+=a,d+=a,t+=a,"number"==typeof l&&(l-=a),d===h.byteLength&&(await i.write(n(h)),h=ho.alloc(Math.min(s.bufferSize,"number"==typeof l?l:s.bufferSize)),d=0)}while(a>0&&("number"!=typeof l||l>0)&&fH(o)&&mH(t,s));if(d>0){let e=d;"number"==typeof l&&(e=Math.min(d,l)),i.write(n(h.slice(0,e)))}}catch(e){throw Wz(e)}finally{await e.close(r)}}(e,t,i,n,s,o)}catch(e){r=e}finally{r&&s.errorTransformer&&(r=s.errorTransformer(r)),void 0!==r&&i.error(r),i.end()}}function fH(e){if(e.isCancellationRequested)throw Je();return!0}function mH(e,t){if("number"==typeof t?.limits?.size&&e>t.limits.size)throw zz(u(gH,0,"File is too large to open"),Tz.FileTooLarge);return!0}var bH;const vH="vs/platform/files/common/fileService";function wH(e){return e.scheme===vn.file?e.fsPath:e.toString(!0)}async function _H(e,t,i){const n=[];for(;!e.isEqual(i,e.dirname(i));)try{if(!((await t.stat(i)).type&Dz.Directory))throw new Error(u(vH,0,"Unable to create folder '{0}' that already exists but is not a directory",wH(i)));break}catch(t){if(Vz(t)!==Tz.FileNotFound)throw t;n.push(e.basename(i)),i=e.dirname(i)}for(let s=n.length-1;s>=0;s--){i=e.joinPath(i,n[s]);try{await t.mkdir(i)}catch(e){if(Vz(e)!==Tz.FileExists)throw e}}}let yH=class extends Qt{static{bH=this}constructor(e){super(),this.logService=e,this.BUFFER_SIZE=262144,this._onDidChangeFileSystemProviderRegistrations=this._register(new ui),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new ui),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,this._onDidChangeFileSystemProviderCapabilities=this._register(new ui),this.onDidChangeFileSystemProviderCapabilities=this._onDidChangeFileSystemProviderCapabilities.event,this.provider=new Map,this._onDidRunOperation=this._register(new ui),this.onDidRunOperation=this._onDidRunOperation.event,this.internalOnDidFilesChange=this._register(new ui),this._onDidUncorrelatedFilesChange=this._register(new ui),this.onDidFilesChange=this._onDidUncorrelatedFilesChange.event,this._onDidWatchError=this._register(new ui),this.onDidWatchError=this._onDidWatchError.event,this.activeWatchers=new Map,this.writeQueue=this._register(new Ua)}registerProvider(e,t){if(this.provider.has(e))throw new Error(`A filesystem provider for the scheme '${e}' is already registered.`);yz(`code/registerFilesystem/${e}`);const i=new Xt;return this.provider.set(e,t),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:e,provider:t}),i.add(t.onDidChangeFile((e=>{const i=new qz(e,!this.isPathCaseSensitive(t));this.internalOnDidFilesChange.fire(i),i.hasCorrelation()||this._onDidUncorrelatedFilesChange.fire(i)}))),"function"==typeof t.onDidWatchError&&i.add(t.onDidWatchError((e=>this._onDidWatchError.fire(new Error(e))))),i.add(t.onDidChangeCapabilities((()=>this._onDidChangeFileSystemProviderCapabilities.fire({provider:t,scheme:e})))),Yt((()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:e,provider:t}),this.provider.delete(e),jt(i)}))}getProvider(e){return this.provider.get(e)}async activateProvider(e){const t=[];this._onWillActivateFileSystemProvider.fire({scheme:e,join(e){t.push(e)}}),this.provider.has(e)||await Ja.settled(t)}async canHandleResource(e){return await this.activateProvider(e.scheme),this.hasProvider(e)}hasProvider(e){return this.provider.has(e.scheme)}hasCapability(e,t){const i=this.provider.get(e.scheme);return!!(i&&i.capabilities&t)}listCapabilities(){return It.map(this.provider,(([e,t])=>({scheme:e,capabilities:t.capabilities})))}async withProvider(e){if(!_s(e))throw new $z(u(vH,1,"Unable to resolve filesystem provider with relative file path '{0}'",this.resourceForError(e)),8);await this.activateProvider(e.scheme);const t=this.provider.get(e.scheme);if(!t){const t=new st;throw t.message=u(vH,2,"ENOPRO: No file system provider found for resource '{0}'",e.toString()),t}return t}async withReadProvider(e){const t=await this.withProvider(e);if(Rz(t)||Az(t)||Oz(t))return t;throw new Error(`Filesystem provider for scheme '${e.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async withWriteProvider(e){const t=await this.withProvider(e);if(Rz(t)||Az(t))return t;throw new Error(`Filesystem provider for scheme '${e.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(e,t){try{return await this.doResolveFile(e,t)}catch(t){if(Vz(t)===Tz.FileNotFound)throw new $z(u(vH,3,"Unable to resolve nonexistent file '{0}'",this.resourceForError(e)),1);throw Wz(t)}}async doResolveFile(e,t){const i=await this.withProvider(e),n=this.isPathCaseSensitive(i),s=t?.resolveTo,o=t?.resolveSingleChildDescendants,r=t?.resolveMetadata,a=await i.stat(e);let l;return this.toFileStat(i,e,a,void 0,!!r,((t,i)=>(l||(l=hS.forUris((()=>!n)),l.set(e,!0),s&&l.fill(!0,s)),!(!l.get(t.resource)&&!l.findSuperstr(t.resource.with({query:null,fragment:null})))||!(!t.isDirectory||!o)&&1===i)))}async toFileStat(e,t,i,n,s,o){const{providerExtUri:r}=this.getExtUri(e),a={resource:t,name:r.basename(t),isFile:!!(i.type&Dz.File),isDirectory:!!(i.type&Dz.Directory),isSymbolicLink:!!(i.type&Dz.SymbolicLink),mtime:i.mtime,ctime:i.ctime,size:i.size,readonly:Boolean((i.permissions??0)&Lz.Readonly)||Boolean(2048&e.capabilities),locked:Boolean((i.permissions??0)&Lz.Locked),etag:rW({mtime:i.mtime,size:i.size}),children:void 0};if(a.isDirectory&&o(a,n)){try{const i=await e.readdir(t),n=await Ja.settled(i.map((async([n,a])=>{try{const l=r.joinPath(t,n),h=s?await e.stat(l):{type:a};return await this.toFileStat(e,l,h,i.length,s,o)}catch(e){return this.logService.trace(e),null}})));a.children=lt(n)}catch(e){this.logService.trace(e),a.children=[]}return a}return a}async resolveAll(e){return Ja.settled(e.map((async e=>{try{return{stat:await this.doResolveFile(e.resource,e.options),success:!0}}catch(e){return this.logService.trace(e),{stat:void 0,success:!1}}})))}async stat(e){const t=await this.withProvider(e),i=await t.stat(e);return this.toFileStat(t,e,i,void 0,!0,(()=>!1))}async exists(e){const t=await this.withProvider(e);try{return!!await t.stat(e)}catch(e){return!1}}async canCreateFile(e,t){try{await this.doValidateCreateFile(e,t)}catch(e){return e}return!0}async doValidateCreateFile(e,t){if(!t?.overwrite&&await this.exists(e))throw new $z(u(vH,4,"Unable to create file '{0}' that already exists when overwrite flag is not set",this.resourceForError(e)),3,t)}async createFile(e,t=ho.fromString(""),i){await this.doValidateCreateFile(e,i);const n=await this.writeFile(e,t);return this._onDidRunOperation.fire(new Kz(e,0,n)),n}async writeFile(e,t,i){const n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),{providerExtUri:s}=this.getExtUri(n);let o=i;if(Pz(n)&&!o?.atomic){const t=n.enforceAtomicWriteFile?.(e);t&&(o={...i,atomic:t})}try{let i;if(await this.validateWriteFile(n,e,o)||await this.mkdirp(n,s.dirname(e)),!Az(n)||t instanceof ho)i=t;else if(Zs(t)){const e=await(r=t,a=3,new Promise(((e,t)=>{const i=new Xt,n=[],s=t=>{if(n.push(t),n.length>a)return i.dispose(),r.pause(),e({stream:r,buffer:n,ended:!1})},o=e=>(i.dispose(),t(e)),l=()=>(i.dispose(),e({stream:r,buffer:n,ended:!0}));i.add(Yt((()=>r.removeListener("error",o)))),r.on("error",o),i.add(Yt((()=>r.removeListener("end",l)))),r.on("end",l),i.add(Yt((()=>r.removeListener("data",s)))),r.on("data",s)})));i=e.ended?ho.concat(e.buffer):e}else i=function(e,t,i){const n=[];let s;for(;null!==(s=e.read())&&n.length<i;)n.push(s);return null===s&&n.length>0?t(n):{read:()=>{if(n.length>0)return n.shift();if(void 0!==s){const e=s;return s=void 0,e}return e.read()}}}(t,(e=>ho.concat(e)),3);!Rz(n)||Az(n)&&i instanceof ho||Az(n)&&Pz(n)&&o?.atomic?await this.doWriteUnbuffered(n,e,o,i):await this.doWriteBuffered(n,e,o,i instanceof ho?bo(i):i),this._onDidRunOperation.fire(new Kz(e,4))}catch(t){throw new $z(u(vH,5,"Unable to write file '{0}' ({1})",this.resourceForError(e),Wz(t).toString()),Uz(t),o)}var r,a;return this.resolve(e,{resolveMetadata:!0})}async validateWriteFile(e,t,i){const n=!!i?.unlock;if(n&&!(8192&e.capabilities))throw new Error(u(vH,6,"Unable to unlock file '{0}' because provider does not support it.",this.resourceForError(t)));if(!!i?.atomic){if(!(32768&e.capabilities))throw new Error(u(vH,7,"Unable to atomically write file '{0}' because provider does not support it.",this.resourceForError(t)));if(!(2&e.capabilities))throw new Error(u(vH,8,"Unable to atomically write file '{0}' because provider does not support unbuffered writes.",this.resourceForError(t)));if(n)throw new Error(u(vH,9,"Unable to unlock file '{0}' because atomic write is enabled.",this.resourceForError(t)))}let s;try{s=await e.stat(t)}catch(e){return}if(s.type&Dz.Directory)throw new $z(u(vH,10,"Unable to write file '{0}' that is actually a directory",this.resourceForError(t)),0,i);if(this.throwIfFileIsReadonly(t,s),"number"==typeof i?.mtime&&"string"==typeof i.etag&&i.etag!==oW&&"number"==typeof s.mtime&&"number"==typeof s.size&&i.mtime<s.mtime&&i.etag!==rW({mtime:i.mtime,size:s.size}))throw new $z(u(vH,11,"File Modified Since"),3,i);return s}async readFile(e,t,i){const n=await this.withReadProvider(e);return t?.atomic?this.doReadFileAtomic(n,e,t,i):this.doReadFile(n,e,t,i)}async doReadFileAtomic(e,t,i,n){return new Promise(((s,o)=>{this.writeQueue.queueFor(t,(async()=>{try{const o=await this.doReadFile(e,t,i,n);s(o)}catch(e){o(e)}}),this.getExtUri(e).providerExtUri)}))}async doReadFile(e,t,i,n){const s=await this.doReadFileStream(e,t,{...i,preferUnbuffered:!0},n);return{...s,value:await vo(s.value)}}async readFileStream(e,t,i){const n=await this.withReadProvider(e);return this.doReadFileStream(n,e,t,i)}async doReadFileStream(e,t,i,n){const s=new ki(n);let o=i;Fz(e)&&e.enforceAtomicReadFile?.(t)&&(o={...i,atomic:!0});const r=this.validateReadFile(t,o).then((e=>e),(e=>{throw s.dispose(!0),e}));let a;try{"string"==typeof o?.etag&&o.etag!==oW&&await r,a=o?.atomic&&Fz(e)||!Rz(e)&&!Oz(e)||Az(e)&&o?.preferUnbuffered?this.readFileUnbuffered(e,t,o):Oz(e)?this.readFileStreamed(e,t,s.token,o):this.readFileBuffered(e,t,s.token,o),a.on("end",(()=>s.dispose())),a.on("error",(()=>s.dispose()));return{...await r,value:a}}catch(e){throw a&&await io(a),this.restoreReadError(e,t,o)}}restoreReadError(e,t,i){const n=u(vH,12,"Unable to read file '{0}' ({1})",this.resourceForError(t),Wz(e).toString());return e instanceof Gz?new Gz(n,e.stat,i):e instanceof jz?new jz(n,e.fileOperationResult,e.size,e.options):new $z(n,Uz(e),i)}readFileStreamed(e,t,i,n=Object.create(null)){return function(e,t,i){const n=eo(i);return no(e,{onData:e=>n.write(t.data(e)),onError:e=>n.error(t.error?t.error(e):e),onEnd:()=>n.end()}),n}(e.readFileStream(t,n,i),{data:e=>e instanceof ho?e:ho.wrap(e),error:e=>this.restoreReadError(e,t,n)},(e=>ho.concat(e)))}readFileBuffered(e,t,i,n=Object.create(null)){const s=function(e){return eo((e=>ho.concat(e)),e)}();return pH(e,t,s,(e=>e),{...n,bufferSize:this.BUFFER_SIZE,errorTransformer:e=>this.restoreReadError(e,t,n)},i),s}readFileUnbuffered(e,t,i){const n=eo((e=>ho.concat(e)));return(async()=>{try{let s;s=i?.atomic&&Fz(e)?await e.readFile(t,{atomic:!0}):await e.readFile(t),"number"==typeof i?.position&&(s=s.slice(i.position)),"number"==typeof i?.length&&(s=s.slice(0,i.length)),this.validateReadFileLimits(t,s.byteLength,i),n.end(ho.wrap(s))}catch(e){n.error(e),n.end()}})(),n}async validateReadFile(e,t){const i=await this.resolve(e,{resolveMetadata:!0});if(i.isDirectory)throw new $z(u(vH,13,"Unable to read file '{0}' that is actually a directory",this.resourceForError(e)),0,t);if("string"==typeof t?.etag&&t.etag!==oW&&t.etag===i.etag)throw new Gz(u(vH,14,"File not modified since"),i,t);return this.validateReadFileLimits(e,i.size,t),i}validateReadFileLimits(e,t,i){if("number"==typeof i?.limits?.size&&t>i.limits.size)throw new jz(u(vH,15,"Unable to read file '{0}' that is too large to open",this.resourceForError(e)),7,t,i)}async canMove(e,t,i){return this.doCanMoveCopy(e,t,"move",i)}async canCopy(e,t,i){return this.doCanMoveCopy(e,t,"copy",i)}async doCanMoveCopy(e,t,i,n){if(e.toString()!==t.toString())try{const s="move"===i?this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e):await this.withReadProvider(e),o=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t);await this.doValidateMoveCopy(s,e,o,t,i,n)}catch(e){return e}return!0}async move(e,t,i){const n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),o=await this.doMoveCopy(n,e,s,t,"move",!!i),r=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new Kz(e,"move"===o?2:3,r)),r}async copy(e,t,i){const n=await this.withReadProvider(e),s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),o=await this.doMoveCopy(n,e,s,t,"copy",!!i),r=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new Kz(e,"copy"===o?3:2,r)),r}async doMoveCopy(e,t,i,n,s,o){if(t.toString()===n.toString())return s;const{exists:r,isSameResourceWithDifferentPathCase:a}=await this.doValidateMoveCopy(e,t,i,n,s,o);if(r&&!a&&o&&await this.del(n,{recursive:!0}),await this.mkdirp(i,this.getExtUri(i).providerExtUri.dirname(n)),"copy"===s){if(e===i&&Mz(e))await e.copy(t,n,{overwrite:o});else{const s=await this.resolve(t);s.isDirectory?await this.doCopyFolder(e,s,i,n):await this.doCopyFile(e,t,i,n)}return s}return e===i?(await e.rename(t,n,{overwrite:o}),s):(await this.doMoveCopy(e,t,i,n,"copy",o),await this.del(t,{recursive:!0}),"copy")}async doCopyFile(e,t,i,n){return Rz(e)&&Rz(i)?this.doPipeBuffered(e,t,i,n):Rz(e)&&Az(i)?this.doPipeBufferedToUnbuffered(e,t,i,n):Az(e)&&Rz(i)?this.doPipeUnbufferedToBuffered(e,t,i,n):Az(e)&&Az(i)?this.doPipeUnbuffered(e,t,i,n):void 0}async doCopyFolder(e,t,i,n){await i.mkdir(n),Array.isArray(t.children)&&await Ja.settled(t.children.map((async t=>{const s=this.getExtUri(i).providerExtUri.joinPath(n,t.name);return t.isDirectory?this.doCopyFolder(e,await this.resolve(t.resource),i,s):this.doCopyFile(e,t.resource,i,s)})))}async doValidateMoveCopy(e,t,i,n,s,o){let r=!1;if(e===i){const{providerExtUri:i,isPathCaseSensitive:o}=this.getExtUri(e);if(o||(r=i.isEqual(t,n)),r&&"copy"===s)throw new Error(u(vH,16,"Unable to copy when source '{0}' is same as target '{1}' with different path case on a case insensitive file system",this.resourceForError(t),this.resourceForError(n)));if(!r&&i.isEqualOrParent(n,t))throw new Error(u(vH,17,"Unable to move/copy when source '{0}' is parent of target '{1}'.",this.resourceForError(t),this.resourceForError(n)))}const a=await this.exists(n);if(a&&!r){if(!o)throw new $z(u(vH,18,"Unable to move/copy '{0}' because target '{1}' already exists at destination.",this.resourceForError(t),this.resourceForError(n)),4);if(e===i){const{providerExtUri:i}=this.getExtUri(e);if(i.isEqualOrParent(t,n))throw new Error(u(vH,19,"Unable to move/copy '{0}' into '{1}' since a file would replace the folder it is contained in.",this.resourceForError(t),this.resourceForError(n)))}}return{exists:a,isSameResourceWithDifferentPathCase:r}}getExtUri(e){const t=this.isPathCaseSensitive(e);return{providerExtUri:t?hs:cs,isPathCaseSensitive:t}}isPathCaseSensitive(e){return!!(1024&e.capabilities)}async createFolder(e){const t=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e);await this.mkdirp(t,e);const i=await this.resolve(e,{resolveMetadata:!0});return this._onDidRunOperation.fire(new Kz(e,0,i)),i}async mkdirp(e,t){const{providerExtUri:i}=this.getExtUri(e);return _H(i,e,t)}async canDelete(e,t){try{await this.doValidateDelete(e,t)}catch(e){return e}return!0}async doValidateDelete(e,t){const i=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e),n=!!t?.useTrash;if(n&&!(4096&i.capabilities))throw new Error(u(vH,20,"Unable to delete file '{0}' via trash because provider does not support it.",this.resourceForError(e)));const s=t?.atomic;if(s&&!(65536&i.capabilities))throw new Error(u(vH,21,"Unable to delete file '{0}' atomically because provider does not support it.",this.resourceForError(e)));if(n&&s)throw new Error(u(vH,22,"Unable to atomically delete file '{0}' because using trash is enabled.",this.resourceForError(e)));let o;try{o=await i.stat(e)}catch(e){}if(!o)throw new $z(u(vH,23,"Unable to delete nonexistent file '{0}'",this.resourceForError(e)),1);this.throwIfFileIsReadonly(e,o);if(!!!t?.recursive){const t=await this.resolve(e);if(t.isDirectory&&Array.isArray(t.children)&&t.children.length>0)throw new Error(u(vH,24,"Unable to delete non-empty folder '{0}'.",this.resourceForError(e)))}return i}async del(e,t){const i=await this.doValidateDelete(e,t);let n=t;if(function(e){return!!(65536&e.capabilities)}(i)&&!n?.atomic){const s=i.enforceAtomicDelete?.(e);s&&(n={...t,atomic:s})}const s=!!n?.useTrash,o=!!n?.recursive,r=n?.atomic??!1;await i.delete(e,{recursive:o,useTrash:s,atomic:r}),this._onDidRunOperation.fire(new Kz(e,1))}async cloneFile(e,t){const i=await this.withProvider(e),n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t);if(i!==n||!this.getExtUri(i).providerExtUri.isEqual(e,t))return i===n&&131072&i.capabilities?i.cloneFile(e,t):(await this.mkdirp(n,this.getExtUri(n).providerExtUri.dirname(t)),i===n&&Mz(i)?this.writeQueue.queueFor(e,(()=>i.copy(e,t,{overwrite:!0})),this.getExtUri(i).providerExtUri):this.writeQueue.queueFor(e,(()=>this.doCopyFile(i,e,n,t)),this.getExtUri(i).providerExtUri))}static{this.WATCHER_CORRELATION_IDS=0}createWatcher(e,t){return this.watch(e,{...t,correlationId:bH.WATCHER_CORRELATION_IDS++})}watch(e,t={recursive:!1,excludes:[]}){const i=new Xt;let n=!1,s=()=>{n=!0};i.add(Yt((()=>s()))),(async()=>{try{const i=await this.doWatch(e,t);n?jt(i):s=()=>jt(i)}catch(e){this.logService.error(e)}})();const o=t.correlationId;if("number"==typeof o){const e=i.add(new ui);i.add(this.internalOnDidFilesChange.event((t=>{t.correlates(o)&&e.fire(t)})));return{onDidChange:e.event,dispose:()=>i.dispose()}}return i}async doWatch(e,t){const i=await this.withProvider(e),n=Jl([this.getExtUri(i).providerExtUri.getComparisonKey(e),t]);let s=this.activeWatchers.get(n);return s||(s={count:0,disposable:i.watch(e,t)},this.activeWatchers.set(n,s)),s.count+=1,Yt((()=>{s&&(s.count--,0===s.count&&(jt(s.disposable),this.activeWatchers.delete(n)))}))}dispose(){super.dispose();for(const[,e]of this.activeWatchers)jt(e.disposable);this.activeWatchers.clear()}async doWriteBuffered(e,t,i,n){return this.writeQueue.queueFor(t,(async()=>{const s=await e.open(t,{create:!0,unlock:i?.unlock??!1});try{Zs(n)||Js(n)?await this.doWriteStreamBufferedQueued(e,s,n):await this.doWriteReadableBufferedQueued(e,s,n)}catch(e){throw Wz(e)}finally{await e.close(s)}}),this.getExtUri(e).providerExtUri)}async doWriteStreamBufferedQueued(e,t,i){let n,s=0;if(Js(i)){if(i.buffer.length>0){const n=ho.concat(i.buffer);await this.doWriteBuffer(e,t,n,n.byteLength,s,0),s+=n.byteLength}if(i.ended)return;n=i.stream}else n=i;return new Promise(((i,o)=>{no(n,{onData:async i=>{n.pause();try{await this.doWriteBuffer(e,t,i,i.byteLength,s,0)}catch(e){return o(e)}s+=i.byteLength,setTimeout((()=>n.resume()))},onError:e=>o(e),onEnd:()=>i()})}))}async doWriteReadableBufferedQueued(e,t,i){let n,s=0;for(;null!==(n=i.read());)await this.doWriteBuffer(e,t,n,n.byteLength,s,0),s+=n.byteLength}async doWriteBuffer(e,t,i,n,s,o){let r=0;for(;r<n;){r+=await e.write(t,s+r,i.buffer,o+r,n-r)}}async doWriteUnbuffered(e,t,i,n){return this.writeQueue.queueFor(t,(()=>this.doWriteUnbufferedQueued(e,t,i,n)),this.getExtUri(e).providerExtUri)}async doWriteUnbufferedQueued(e,t,i,n){let s;s=n instanceof ho?n:Zs(n)?await vo(n):Js(n)?await async function(e){return e.ended?ho.concat(e.buffer):ho.concat([...e.buffer,await vo(e.stream)])}(n):function(e,t){const i=[];let n;for(;null!==(n=e.read());)i.push(n);return t(i)}(n,(e=>ho.concat(e))),await e.writeFile(t,s.buffer,{create:!0,overwrite:!0,unlock:i?.unlock??!1,atomic:i?.atomic??!1})}async doPipeBuffered(e,t,i,n){return this.writeQueue.queueFor(n,(()=>this.doPipeBufferedQueued(e,t,i,n)),this.getExtUri(i).providerExtUri)}async doPipeBufferedQueued(e,t,i,n){let s,o;try{s=await e.open(t,{create:!1}),o=await i.open(n,{create:!0,unlock:!1});const r=ho.alloc(this.BUFFER_SIZE);let a=0,l=0,h=0;do{h=await e.read(s,a,r.buffer,l,r.byteLength-l),await this.doWriteBuffer(i,o,r,h,a,l),a+=h,l+=h,l===r.byteLength&&(l=0)}while(h>0)}catch(e){throw Wz(e)}finally{await Ja.settled(["number"==typeof s?e.close(s):Promise.resolve(),"number"==typeof o?i.close(o):Promise.resolve()])}}async doPipeUnbuffered(e,t,i,n){return this.writeQueue.queueFor(n,(()=>this.doPipeUnbufferedQueued(e,t,i,n)),this.getExtUri(i).providerExtUri)}async doPipeUnbufferedQueued(e,t,i,n){return i.writeFile(n,await e.readFile(t),{create:!0,overwrite:!0,unlock:!1,atomic:!1})}async doPipeUnbufferedToBuffered(e,t,i,n){return this.writeQueue.queueFor(n,(()=>this.doPipeUnbufferedToBufferedQueued(e,t,i,n)),this.getExtUri(i).providerExtUri)}async doPipeUnbufferedToBufferedQueued(e,t,i,n){const s=await i.open(n,{create:!0,unlock:!1});try{const n=await e.readFile(t);await this.doWriteBuffer(i,s,ho.wrap(n),n.byteLength,0,0)}catch(e){throw Wz(e)}finally{await i.close(s)}}async doPipeBufferedToUnbuffered(e,t,i,n){const s=await vo(this.readFileBuffered(e,t,Ci.None));await this.doWriteUnbuffered(i,n,void 0,s)}throwIfFileSystemIsReadonly(e,t){if(2048&e.capabilities)throw new $z(u(vH,25,"Unable to modify read-only file '{0}'",this.resourceForError(t)),6);return e}throwIfFileIsReadonly(e,t){if((t.permissions??0)&Lz.Readonly)throw new $z(u(vH,25,"Unable to modify read-only file '{0}'",this.resourceForError(e)),6)}resourceForError(e){return wH(e)}};yH=bH=Bs([zs(0,Ed)],yH);class CH{constructor(e){this.type=Dz.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}}class SH{constructor(e){this.type=Dz.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}}class kH extends Qt{constructor(){super(...arguments),this.memoryFdCounter=0,this.fdMemory=new Map,this._onDidChangeCapabilities=this._register(new ui),this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this._capabilities=1026,this.root=new SH(""),this._onDidChangeFile=this._register(new ui),this.onDidChangeFile=this._onDidChangeFile.event,this._bufferedChanges=[]}get capabilities(){return this._capabilities}setReadOnly(e){e!==!!(2048&this._capabilities)&&(this._capabilities=e?3074:1026,this._onDidChangeCapabilities.fire())}async stat(e){return this._lookup(e,!1)}async readdir(e){const t=this._lookupAsDirectory(e,!1),i=[];return t.entries.forEach(((e,t)=>i.push([t,e.type]))),i}async readFile(e){const t=this._lookupAsFile(e,!1).data;if(t)return t;throw zz("file not found",Tz.FileNotFound)}readFileStream(e){const t=this._lookupAsFile(e,!1).data,i=eo((e=>ho.concat(e.map((e=>ho.wrap(e)))).buffer));return i.end(t),i}async writeFile(e,t,i){const n=gs(e),s=this._lookupParentDirectory(e);let o=s.entries.get(n);if(o instanceof SH)throw zz("file is directory",Tz.FileIsADirectory);if(!o&&!i.create)throw zz("file not found",Tz.FileNotFound);if(o&&i.create&&!i.overwrite)throw zz("file exists already",Tz.FileExists);o||(o=new CH(n),s.entries.set(n,o),this._fireSoon({type:1,resource:e})),o.mtime=Date.now(),o.size=t.byteLength,o.data=t,this._fireSoon({type:0,resource:e})}open(e,t){const i=this._lookupAsFile(e,!1).data;if(i){const e=this.memoryFdCounter++;return this.fdMemory.set(e,i),Promise.resolve(e)}throw zz("file not found",Tz.FileNotFound)}close(e){return this.fdMemory.delete(e),Promise.resolve()}read(e,t,i,n,s){const o=this.fdMemory.get(e);if(!o)throw zz("No file with that descriptor open",Tz.Unavailable);const r=ho.wrap(o).slice(t,t+s);return i.set(r.buffer,n),Promise.resolve(r.byteLength)}write(e,t,i,n,s){const o=this.fdMemory.get(e);if(!o)throw zz("No file with that descriptor open",Tz.Unavailable);const r=ho.wrap(i).slice(n,n+s);return o.set(r.buffer,t),Promise.resolve(r.byteLength)}async rename(e,t,i){if(!i.overwrite&&this._lookup(t,!0))throw zz("file exists already",Tz.FileExists);const n=this._lookup(e,!1),s=this._lookupParentDirectory(e),o=this._lookupParentDirectory(t),r=gs(t);s.entries.delete(n.name),n.name=r,o.entries.set(r,n),this._fireSoon({type:2,resource:e},{type:1,resource:t})}async delete(e,t){const i=fs(e),n=gs(e),s=this._lookupAsDirectory(i,!1);s.entries.has(n)&&(s.entries.delete(n),s.mtime=Date.now(),s.size-=1,this._fireSoon({type:0,resource:i},{resource:e,type:2}))}async mkdir(e){if(this._lookup(e,!0))throw zz("file exists already",Tz.FileExists);const t=gs(e),i=fs(e),n=this._lookupAsDirectory(i,!1),s=new SH(t);n.entries.set(s.name,s),n.mtime=Date.now(),n.size+=1,this._fireSoon({type:0,resource:i},{type:1,resource:e})}_lookup(e,t){const i=e.path.split("/");let n=this.root;for(const e of i){if(!e)continue;let i;if(n instanceof SH&&(i=n.entries.get(e)),!i){if(t)return;throw zz("file not found",Tz.FileNotFound)}n=i}return n}_lookupAsDirectory(e,t){const i=this._lookup(e,t);if(i instanceof SH)return i;throw zz("file not a directory",Tz.FileNotADirectory)}_lookupAsFile(e,t){const i=this._lookup(e,t);if(i instanceof CH)return i;throw zz("file is a directory",Tz.FileIsADirectory)}_lookupParentDirectory(e){const t=fs(e);return this._lookupAsDirectory(t,!1)}watch(e,t){return Qt.None}_fireSoon(...e){this._bufferedChanges.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout((()=>{this._onDidChangeFile.fire(this._bufferedChanges),this._bufferedChanges.length=0}),5)}dispose(){super.dispose(),this.fdMemory.clear()}}var xH;!function(e){e.supported=function(e){return"function"==typeof e?.showDirectoryPicker},e.isFileSystemHandle=function(e){const t=e;return!!t&&("string"==typeof t.kind&&"function"==typeof t.queryPermission&&"function"==typeof t.requestPermission)},e.isFileSystemFileHandle=function(e){return"file"===e.kind},e.isFileSystemDirectoryHandle=function(e){return"directory"===e.kind}}(xH||(xH={}));Error;class EH extends Error{constructor(e){super(`IndexedDB database '${e}' is closed.`),this.code="DBClosed"}}class DH extends Qt{constructor(e){if(super(),this.channelName=e,this._onDidReceiveData=this._register(new ui),this.onDidReceiveData=this._onDidReceiveData.event,"BroadcastChannel"in Gr)try{this.broadcastChannel=new BroadcastChannel(e);const t=e=>{this._onDidReceiveData.fire(e.data)};this.broadcastChannel.addEventListener("message",t),this._register(Yt((()=>{this.broadcastChannel&&(this.broadcastChannel.removeEventListener("message",t),this.broadcastChannel.close())})))}catch(e){console.warn("Error while creating broadcast channel. Falling back to localStorage.",it(e))}this.broadcastChannel||(this.channelName=`BroadcastDataChannel.${e}`,this.createBroadcastChannel())}createBroadcastChannel(){const e=e=>{e.key===this.channelName&&e.newValue&&this._onDidReceiveData.fire(JSON.parse(e.newValue))};Gr.addEventListener("storage",e),this._register(Yt((()=>Gr.removeEventListener("storage",e))))}postData(e){this.broadcastChannel?this.broadcastChannel.postMessage(e):(localStorage.removeItem(this.channelName),localStorage.setItem(this.channelName,JSON.stringify(e)))}}const LH="vs/platform/files/browser/indexedDBFileSystemProvider",IH=zz(u(LH,0,"File does not exist"),Tz.FileNotFound),TH=zz(u(LH,1,"File is Directory"),Tz.FileIsADirectory),NH=zz(u(LH,2,"File is not a directory"),Tz.FileNotADirectory),AH=zz(u(LH,3,"Directory is not empty"),Tz.Unknown),MH=zz(u(LH,4,"File exceeds available storage quota"),Tz.FileExceedsStorageQuota),RH=e=>zz(u(LH,5,"Internal error occurred in IndexedDB File System Provider. ({0})",e),Tz.Unknown);class OH{constructor(e){this.entry=e,this.type=e.type}read(e){return this.doRead(e.split("/").filter((e=>e.length)))}doRead(e){if(0===e.length)return this.entry;if(this.entry.type!==Dz.Directory)throw RH("Internal error reading from IndexedDBFSNode -- expected directory at "+this.entry.path);const t=this.entry.children.get(e[0]);return t?t.doRead(e.slice(1)):void 0}delete(e){const t=e.split("/").filter((e=>e.length));if(0!==t.length)return this.doDelete(t,e);if(this.entry.type!==Dz.Directory)throw RH("Internal error deleting from IndexedDBFSNode. Expected root entry to be directory");this.entry.children.clear()}doDelete(e,t){if(0===e.length)throw RH(`Internal error deleting from IndexedDBFSNode -- got no deletion path parts (encountered while deleting ${t})`);if(this.entry.type!==Dz.Directory)throw RH("Internal error deleting from IndexedDBFSNode -- expected directory at "+this.entry.path);if(1===e.length)this.entry.children.delete(e[0]);else{const i=this.entry.children.get(e[0]);if(!i)throw RH("Internal error deleting from IndexedDBFSNode -- expected entry at "+this.entry.path+"/"+i);i.doDelete(e.slice(1),t)}}add(e,t){this.doAdd(e.split("/").filter((e=>e.length)),t,e)}doAdd(e,t,i){if(0===e.length)throw RH(`Internal error creating IndexedDBFSNode -- adding empty path (encountered while adding ${i})`);if(this.entry.type!==Dz.Directory)throw RH(`Internal error creating IndexedDBFSNode -- parent is not a directory (encountered while adding ${i})`);if(1===e.length){const n=e[0],s=this.entry.children.get(n);if("dir"===t.type){if(s?.entry.type===Dz.File)throw RH(`Internal error creating IndexedDBFSNode -- overwriting file with directory: ${this.entry.path}/${n} (encountered while adding ${i})`);this.entry.children.set(n,s??new OH({type:Dz.Directory,path:this.entry.path+"/"+n,children:new Map}))}else{if(s?.entry.type===Dz.Directory)throw RH(`Internal error creating IndexedDBFSNode -- overwriting directory with file: ${this.entry.path}/${n} (encountered while adding ${i})`);this.entry.children.set(n,new OH({type:Dz.File,path:this.entry.path+"/"+n,size:t.size}))}}else if(e.length>1){const n=e[0];let s=this.entry.children.get(n);if(s){if(s.type===Dz.File)throw RH(`Internal error creating IndexedDBFSNode -- overwriting file entry with directory: ${this.entry.path}/${n} (encountered while adding ${i})`)}else s=new OH({children:new Map,path:this.entry.path+"/"+n,type:Dz.Directory}),this.entry.children.set(n,s);s.doAdd(e.slice(1),t,i)}}print(e=""){console.log(e+this.entry.path),this.entry.type===Dz.Directory&&this.entry.children.forEach((t=>t.print(e+" ")))}}class FH extends Qt{constructor(e,t,i,n){super(),this.scheme=e,this.indexedDB=t,this.store=i,this.capabilities=1026,this.onDidChangeCapabilities=oi.None,this.extUri=new ls((()=>!1)),this._onDidChangeFile=this._register(new ui),this.onDidChangeFile=this._onDidChangeFile.event,this._onReportError=this._register(new ui),this.onReportError=this._onReportError.event,this.mtimes=new Map,this.fileWriteBatch=[],this.writeManyThrottler=new Oa,n&&(this.changesBroadcastChannel=this._register(new DH(`vscode.indexedDB.${e}.changes`)),this._register(this.changesBroadcastChannel.onDidReceiveData((e=>{this._onDidChangeFile.fire(e.map((e=>({type:e.type,resource:Fe.revive(e.resource)}))))}))))}watch(e,t){return Qt.None}async mkdir(e){try{if((await this.stat(e)).type===Dz.File)throw NH}catch(e){}(await this.getFiletree()).add(e.path,{type:"dir"})}async stat(e){const t=(await this.getFiletree()).read(e.path);if(t?.type===Dz.File)return{type:Dz.File,ctime:0,mtime:this.mtimes.get(e.toString())||0,size:t.size??(await this.readFile(e)).byteLength};if(t?.type===Dz.Directory)return{type:Dz.Directory,ctime:0,mtime:0,size:0};throw IH}async readdir(e){try{const t=(await this.getFiletree()).read(e.path);if(!t)return[];if(t.type!==Dz.Directory)throw NH;return[...t.children.entries()].map((([e,t])=>[e,t.type]))}catch(e){throw this.reportError("readDir",e),e}}async readFile(e){try{const t=await this.indexedDB.runInTransaction(this.store,"readonly",(t=>t.get(e.path)));if(void 0===t)throw IH;const i=t instanceof Uint8Array?t:Ln(t)?ho.fromString(t).buffer:void 0;if(void 0===i)throw RH(`IndexedDB entry at "${e.path}" in unexpected format`);return(await this.getFiletree()).add(e.path,{type:"file",size:i.byteLength}),i}catch(e){throw this.reportError("readFile",e),e}}async writeFile(e,t,i){try{const i=await this.stat(e).catch((()=>{}));if(i?.type===Dz.Directory)throw TH;await this.bulkWrite([[e,t]])}catch(e){throw this.reportError("writeFile",e),e}}async rename(e,t,i){const n=await this.getFiletree(),s=n.read(e.path);if(!s)throw IH;const o=n.read(t.path);if(o){if(!i.overwrite)throw zz("file exists already",Tz.FileExists);if(o.type!==s.type)throw zz("Cannot rename files with different types",Tz.Unknown);await this.delete(t,{recursive:!0,useTrash:!1,atomic:!1})}const r=i=>this.extUri.joinPath(t,this.extUri.relativePath(e,e.with({path:i}))||""),a=await this.tree(e),l=[];for(const e of a)e[1]===Dz.File?l.push(e):e[1]===Dz.Directory&&n.add(r(e[0]).path,{type:"dir"});if(l.length){const e=[],t=await this.indexedDB.runInTransaction(this.store,"readonly",(e=>l.map((([t])=>e.get(t)))));for(let i=0;i<l.length;i++){const n=t[i]instanceof Uint8Array?t[i]:Ln(t[i])?ho.fromString(t[i]).buffer:void 0;n&&e.push([r(l[i][0]),n])}await this.bulkWrite(e)}await this.delete(e,{recursive:!0,useTrash:!1,atomic:!1})}async delete(e,t){let i,n;try{i=await this.stat(e)}catch(e){if(e.code===Tz.FileNotFound)return;throw e}if(t.recursive){n=(await this.tree(e)).map((([e])=>e))}else{if(i.type===Dz.Directory&&(await this.readdir(e)).length)throw AH;n=[e.path]}await this.deleteKeys(n),(await this.getFiletree()).delete(e.path),n.forEach((e=>this.mtimes.delete(e))),this.triggerChanges(n.map((t=>({resource:e.with({path:t}),type:2}))))}async tree(e){const t=await this.stat(e),i=[[e.path,t.type]];if(t.type===Dz.Directory){const t=await this.readdir(e);for(const[n,s]of t){const t=this.extUri.joinPath(e,n);if(i.push([t.path,s]),s===Dz.Directory){const e=await this.tree(t);i.push(...e)}}}return i}triggerChanges(e){e.length&&(this._onDidChangeFile.fire(e),this.changesBroadcastChannel?.postData(e))}getFiletree(){return this.cachedFiletree||(this.cachedFiletree=(async()=>{const e=new OH({children:new Map,path:"",type:Dz.Directory});return(await this.indexedDB.runInTransaction(this.store,"readonly",(e=>e.getAllKeys()))).map((e=>e.toString())).forEach((t=>e.add(t,{type:"file"}))),e})()),this.cachedFiletree}async bulkWrite(e){e.forEach((([e,t])=>this.fileWriteBatch.push({content:t,resource:e}))),await this.writeManyThrottler.queue((()=>this.writeMany()));const t=await this.getFiletree();for(const[i,n]of e)t.add(i.path,{type:"file",size:n.byteLength}),this.mtimes.set(i.toString(),Date.now());this.triggerChanges(e.map((([e])=>({resource:e,type:0}))))}async writeMany(){if(this.fileWriteBatch.length){const e=this.fileWriteBatch.splice(0,this.fileWriteBatch.length);try{await this.indexedDB.runInTransaction(this.store,"readwrite",(t=>e.map((e=>t.put(e.content,e.resource.path)))))}catch(e){if(e instanceof DOMException&&"QuotaExceededError"===e.name)throw MH;throw e}}}async deleteKeys(e){e.length&&await this.indexedDB.runInTransaction(this.store,"readwrite",(t=>e.map((e=>t.delete(e)))))}async reset(){await this.indexedDB.runInTransaction(this.store,"readwrite",(e=>e.clear()))}reportError(e,t){this._onReportError.fire({scheme:this.scheme,operation:e,code:t instanceof Bz||t instanceof EH?t.code:"unknown"})}}const PH=o("textFileService");class BH extends $z{static isTextFileOperationError(e){return e instanceof Error&&!Rn(e.textFileOperationResult)}constructor(e,t,i){super(e,10),this.textFileOperationResult=t,this.options=i}}const zH="vs/workbench/common/editor";u(zH,0,"Text Editor"),u(zH,1,"Built-in");function WH(e){if(XH(e))return!1;const t=e;return void 0!==t?.original&&void 0!==t.modified}function HH(e){if(XH(e))return!1;const t=e;return!!t&&(!(t.resources&&!Array.isArray(t.resources))&&(!!t.resources||!!t.multiDiffSource))}function VH(e){if(XH(e))return!1;if(WH(e))return!1;const t=e;return void 0!==t?.primary&&void 0!==t.secondary}function UH(e){if(XH(e))return!1;const t=e;return Fe.isUri(t?.base?.resource)&&Fe.isUri(t?.input1?.resource)&&Fe.isUri(t?.input2?.resource)&&Fe.isUri(t?.result?.resource)}const KH=new class{constructor(){this.mapIdToSaveSource=new Map}registerSource(e,t){let i=this.mapIdToSaveSource.get(e);return i||(i={source:e,label:t},this.mapIdToSaveSource.set(e,i)),i.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}};var qH,$H,jH,GH;!function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"}(qH||(qH={}));class YH extends Qt{}function XH(e){return e instanceof YH}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"}($H||($H={})),function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"}(jH||(jH={}));!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"}(GH||(GH={}));const QH=new class{getOriginalUri(e,t){if(!e)return;if(UH(e))return QH.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:n}=this.getSideEditors(e);if(i&&n){if(t?.supportSideBySide===jH.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(n,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===jH.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(n,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===jH.PRIMARY?i:n}}if(WH(e)||HH(e)||VH(e)||UH(e))return;const i=function(e){const t=e;return Fe.isUri(t?.preferredResource)}(e)?e.preferredResource:e.resource;return i&&t&&t.filterByScheme?this.filterUri(i,t.filterByScheme):i}getSideEditors(e){return function(e){const t=e;return XH(t?.primary)&&XH(t?.secondary)}(e)||VH(e)?{primary:e.primary,secondary:e.secondary}:function(e){const t=e;return XH(t?.modified)&&XH(t?.original)}(e)||WH(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(UH(e))return QH.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:n}=this.getSideEditors(e);if(i&&n){if(t?.supportSideBySide===jH.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(n,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===jH.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(n,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===jH.PRIMARY?i:n}}if(WH(e)||HH(e)||VH(e)||UH(e))return;const i=e.resource;return i&&t&&t.filterByScheme?this.filterUri(i,t.filterByScheme):i}filterUri(e,t){if(Array.isArray(t)){if(t.some((t=>e.scheme===t)))return e}else if(t===e.scheme)return e}};var ZH,JH;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(ZH||(ZH={}));Jo.add("workbench.contributions.editor.inputFactories",new class{constructor(){this.editorSerializerConstructors=new Map,this.editorSerializerInstances=new Map}start(e){const t=this.instantiationService=e.get(s);for(const[e,i]of this.editorSerializerConstructors)this.createEditorSerializer(e,i,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,i){const n=i.createInstance(t);this.editorSerializerInstances.set(e,n)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return Fn(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),Yt((()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)}))}getEditorSerializer(e){return this.editorSerializerInstances.get("string"==typeof e?e:e.typeId)}}),function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"}(JH||(JH={}));const eV=o("lifecycleService"),tV=o("untitledTextEditorService");class iV extends Qt{constructor(){super(...arguments),this._onWillDispose=this._register(new ui),this.onWillDispose=this._onWillDispose.event,this.resolved=!1}async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}}const nV="languageDetection",sV=o("ILanguageDetectionService");var oV;let rV=class extends iV{static{oV=this}static{this.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600}constructor(e,t,i,n,s){super(),this.modelService=e,this.languageService=t,this.languageDetectionService=i,this.accessibilityService=n,this.textEditorModelHandle=void 0,this.modelDisposeListener=this._register(new Zt),this.autoDetectLanguageThrottler=this._register(new Pa(oV.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY)),this._hasLanguageSetExplicitly=!1,s&&this.handleExistingModel(s)}handleExistingModel(e){const t=this.modelService.getModel(e);if(!t)throw new Error(`Document with resource ${e.toString(!0)} does not exist`);this.textEditorModelHandle=e,this.registerModelDisposeListener(t)}registerModelDisposeListener(e){this.modelDisposeListener.value=e.onWillDispose((()=>{this.textEditorModelHandle=void 0,this.dispose()}))}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(e,t){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(e,t)}setLanguageIdInternal(e,t){this.isResolved()&&e&&e!==this.textEditorModel.getLanguageId()&&this.textEditorModel.setLanguage(this.languageService.createById(e),t)}installModelListeners(e){const t=this._register(e.onDidChangeLanguage((e=>{e.source!==nV&&(this._hasLanguageSetExplicitly=!0,t.dispose())})))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger((()=>this.doAutoDetectLanguage()))}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??Tr))return;const e=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),t=this.getLanguageId();if(e&&e!==t&&!this.isDisposed()){this.setLanguageIdInternal(e,nV);const t=this.languageService.getLanguageName(e);this.accessibilityService.alert(u("vs/workbench/common/editor/textEditorModel",0,"Language {0} was automatically detected and set as the language mode.",t??e))}}createTextEditorModel(e,t,i){const n=this.getFirstLineText(e),s=this.getOrCreateLanguage(t,this.languageService,i,n);return this.doCreateTextEditorModel(e,s,t)}doCreateTextEditorModel(e,t,i){let n=i&&this.modelService.getModel(i);return n?this.updateTextEditorModel(e,t.languageId):(n=this.modelService.createModel(e,t,i),this.createdEditorModel=!0,this.registerModelDisposeListener(n)),this.textEditorModelHandle=n.uri,n}getFirstLineText(e){const t=e;if("function"==typeof t.getFirstLineText)return t.getFirstLineText(1e3);return e.getLineContent(1).substr(0,1e3)}getOrCreateLanguage(e,t,i,n){return i&&i!==Tr?t.createById(i):t.createByFilepathOrFirstLine(e??null,n)}updateTextEditorModel(e,t){this.isResolved()&&(e&&this.modelService.updateModel(this.textEditorModel,e),t&&t!==Tr&&this.textEditorModel.getLanguageId()!==t&&this.textEditorModel.setLanguage(this.languageService.createById(t)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};rV=oV=Bs([zs(0,dC),zs(1,Ko),zs(2,sV),zs(3,my)],rV);const aV=o("workingCopyBackupService"),lV=o("workingCopyService"),hV=o("editorService"),cV="utf8",dV="utf8bom",uV="utf16be",gV="utf16le",pV=[254,255],fV=[255,254],mV=[239,187,191],bV=512,vV=65536;class wV extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}}class _V{static async create(e){let t;if(e!==cV){t=(await i.e(5725).then(i.t.bind(i,83585,19)).then((e=>e.default??e))).getDecoder(CV(e))}else{const e=new TextDecoder;t={write(t){return e.decode(t,{stream:!0})},end(){return e.decode()}}}return new _V(t)}constructor(e){this.iconvLiteDecoder=e}write(e){return this.iconvLiteDecoder.write(e)}end(){return this.iconvLiteDecoder.end()}}function yV(e,t){const n=t.minBytesRequiredForDetection??t.guessEncoding?4096:512;return new Promise(((s,o)=>{const r=eo((e=>e.join(""))),a=[];let l,h=0;const c=new ki,d=async()=>{try{const e=await function({buffer:e,bytesRead:t},n){let s=function(e,t){if(!e||t<pV.length)return null;const i=e.readUInt8(0),n=e.readUInt8(1);if(i===pV[0]&&n===pV[1])return uV;if(i===fV[0]&&n===fV[1])return gV;if(t<mV.length)return null;const s=e.readUInt8(2);if(i===mV[0]&&n===mV[1]&&s===mV[2])return dV;return null}(e,t),o=!1;if(s!==uV&&s!==gV&&e){let i=!0,n=!0,r=!1;for(let s=0;s<t&&s<bV;s++){const t=s%2==1,o=0===e.readUInt8(s);if(o&&(r=!0),i&&(t&&!o||!t&&o)&&(i=!1),n&&(t&&o||!t&&!o)&&(n=!1),o&&!i&&!n)break}r&&(i?s=gV:n?s=uV:o=!0)}if(n&&!o&&!s&&e)return async function(e){const t=await i.e(9893).then(i.t.bind(i,39893,19)).then((e=>e.default??e)),n=e.slice(0,vV),s=function(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}(n.buffer),o=t.detect(s);if(!o||!o.encoding)return null;const r=o.encoding.toLowerCase();if(0<=SV.indexOf(r))return null;return function(e){const t=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return kV[t]||t}(o.encoding)}(e.slice(0,t)).then((e=>({seemsBinary:!1,encoding:e})));return{seemsBinary:o,encoding:s}}({buffer:ho.concat(a),bytesRead:h},t.guessEncoding);if(e.seemsBinary&&t.acceptTextOnly)throw new wV("Stream is binary but only text is accepted for decoding",1);e.encoding=await t.overwriteEncoding(e.encoding),l=await _V.create(e.encoding);const n=l.write(ho.concat(a).buffer);r.write(n),a.length=0,h=0,s({stream:r,detected:e})}catch(e){c.cancel(),r.destroy(),o(e)}};no(e,{onData:async t=>{l?r.write(l.write(t.buffer)):(a.push(t),h+=t.byteLength,h>=n&&(e.pause(),await d(),setTimeout((()=>e.resume()))))},onError:e=>r.error(e),onEnd:async()=>{l||await d(),r.end(l?.end())}},c.token)}))}function CV(e){return e===dV||null===e?cV:e}const SV=["ascii","utf-16","utf-32"];const kV={ibm866:"cp866",big5:"cp950"};const xV={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}};var EV;let DV=class extends rV{static{EV=this}static{this.FIRST_LINE_NAME_MAX_LENGTH=40}static{this.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=10*EV.FIRST_LINE_NAME_MAX_LENGTH}static{this.ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}"}get name(){return"content"===this.configuredLabelFormat&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}constructor(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p){super(r,o,g,p),this.resource=e,this.hasAssociatedFilePath=t,this.initialValue=i,this.preferredLanguageId=n,this.preferredEncoding=s,this.workingCopyBackupService=a,this.textResourceConfigurationService=l,this.workingCopyService=h,this.textFileService=c,this.labelService=d,this.editorService=u,this._onDidChangeContent=this._register(new ui),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeName=this._register(new ui),this.onDidChangeName=this._onDidChangeName.event,this._onDidChangeDirty=this._register(new ui),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeEncoding=this._register(new ui),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidSave=this._register(new ui),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new ui),this.onDidRevert=this._onDidRevert.event,this.typeId="",this.capabilities=2,this.configuredLabelFormat="content",this.cachedModelFirstLineWords=void 0,this.dirty=this.hasAssociatedFilePath||!!this.initialValue,this.ignoreDirtyOnModelContentChange=!1,this._register(this.workingCopyService.registerWorkingCopy(this)),n&&this.setLanguageId(n),this.onConfigurationChange(void 0,!1),this.registerListeners()}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration((e=>this.onConfigurationChange(e,!0))))}onConfigurationChange(e,t){if(!e||e.affectsConfiguration(this.resource,"files.encoding")){const e=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==e&&"string"==typeof e&&(this.configuredEncoding=e,t&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!e||e.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){const e=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat===e||"content"!==e&&"name"!==e||(this.configuredLabelFormat=e,t&&this._onDidChangeName.fire())}}setLanguageId(e,t){const i=e===EV.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:e;this.preferredLanguageId=i,i&&super.setLanguageId(i,t)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(e){const t=this.getEncoding();this.preferredEncoding=e,t!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(e){this.dirty!==e&&(this.dirty=e,this._onDidChangeDirty.fire())}async save(e){const t=await this.textFileService.save(this.resource,e);return t&&this._onDidSave.fire({reason:e?.reason,source:e?.source}),!!t}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(tM(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(e){let t;return this.isResolved()?t=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:cV}):"string"==typeof this.initialValue&&(t=bo(ho.fromString(this.initialValue))),{content:t}}async resolve(){let e=!1,t=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let i;const n=await this.workingCopyBackupService.resolve(this);n?(i=n.value,t=!0):i=wo(ho.fromString(this.initialValue||""));const s=await iM(await this.textFileService.getDecodedStream(this.resource,i,{encoding:cV}));this.createTextEditorModel(s,this.resource,this.preferredLanguageId),e=!0}const i=Fn(this.textEditorModel);return this.installModelListeners(i),e&&((t||this.initialValue)&&this.updateNameFromFirstLine(i),this.setDirty(this.hasAssociatedFilePath||!!t||!!this.initialValue),(t||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(e){this._register(e.onDidChangeContent((t=>this.onModelContentChanged(e,t)))),this._register(e.onDidChangeLanguage((()=>this.onConfigurationChange(void 0,!0)))),super.installModelListeners(e)}onModelContentChanged(e,t){this.ignoreDirtyOnModelContentChange||(this.hasAssociatedFilePath||1!==e.getLineCount()||0!==e.getLineLength(1)?this.setDirty(!0):this.setDirty(!1)),t.changes.some((e=>(1===e.range.startLineNumber||1===e.range.endLineNumber)&&e.range.startColumn<=EV.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH))&&this.updateNameFromFirstLine(e),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(e){if(this.hasAssociatedFilePath)return;let t,i=e.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:EV.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");i=i.substr(0,en(i,EV.FIRST_LINE_NAME_MAX_LENGTH)[0]),i&&Vs().exec(i)&&(t=i),t!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=t,this._onDidChangeName.fire())}isReadonly(){return!1}};DV=EV=Bs([zs(5,Ko),zs(6,dC),zs(7,aV),zs(8,gC),zs(9,lV),zs(10,PH),zs(11,YC),zs(12,hV),zs(13,sV),zs(14,my)],DV);const LV=o("filesConfigurationService"),IV=o("pathService");var TV;let NV=class extends rV{static{TV=this}static{this.TEXTFILE_SAVE_ENCODING_SOURCE=KH.registerSource("textFileEncoding.source",u("vs/workbench/services/textfile/common/textFileEditorModel",0,"File Encoding Changed"))}static{this.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500}constructor(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p,f){super(s,n,u,g),this.resource=e,this.preferredEncoding=t,this.preferredLanguageId=i,this.fileService=o,this.textFileService=r,this.workingCopyBackupService=a,this.logService=l,this.workingCopyService=h,this.filesConfigurationService=c,this.labelService=d,this.pathService=p,this.extensionService=f,this._onDidChangeContent=this._register(new ui),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidResolve=this._register(new ui),this.onDidResolve=this._onDidResolve.event,this._onDidChangeDirty=this._register(new ui),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidSaveError=this._register(new ui),this.onDidSaveError=this._onDidSaveError.event,this._onDidSave=this._register(new ui),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new ui),this.onDidRevert=this._onDidRevert.event,this._onDidChangeEncoding=this._register(new ui),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidChangeOrphaned=this._register(new ui),this.onDidChangeOrphaned=this._onDidChangeOrphaned.event,this._onDidChangeReadonly=this._register(new ui),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this.typeId="",this.capabilities=0,this.name=De(this.labelService.getUriLabel(this.resource)),this.resourceHasExtension=!!hs.extname(this.resource),this.versionId=0,this.ignoreDirtyOnModelContentChange=!1,this.ignoreSaveFromSaveParticipants=!1,this.lastModelContentChangeFromUndoRedo=void 0,this.saveSequentializer=new Qa,this.dirty=!1,this.inConflictMode=!1,this.inOrphanMode=!1,this.inErrorMode=!1,this.hasEncodingSetExplicitly=!1,this._register(this.workingCopyService.registerWorkingCopy(this)),this.registerListeners()}registerListeners(){this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.filesConfigurationService.onDidChangeFilesAssociation((()=>this.onDidChangeFilesAssociation()))),this._register(this.filesConfigurationService.onDidChangeReadonly((()=>this._onDidChangeReadonly.fire())))}async onDidFilesChange(e){let t,i=!1;if(this.inOrphanMode){e.contains(this.resource,1)&&(t=!1,i=!0)}else{e.contains(this.resource,2)&&(t=!0,i=!0)}if(i&&this.inOrphanMode!==t){let e=!1;if(t)if(await za(100,Ci.None),this.isDisposed())e=!0;else{e=!await this.fileService.exists(this.resource)}this.inOrphanMode===e||this.isDisposed()||this.setOrphaned(e)}}setOrphaned(e){this.inOrphanMode!==e&&(this.inOrphanMode=e,this._onDidChangeOrphaned.fire())}onDidChangeFilesAssociation(){if(!this.isResolved())return;const e=this.getFirstLineText(this.textEditorModel),t=this.getOrCreateLanguage(this.resource,this.languageService,this.preferredLanguageId,e);this.textEditorModel.setLanguage(t)}setLanguageId(e,t){super.setLanguageId(e,t),this.preferredLanguageId=e}async backup(e){let t;this.lastResolvedFileStat&&(t={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.inOrphanMode});return{meta:t,content:await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:cV})}}async revert(e){if(!this.isResolved())return;const t=this.dirty,i=this.doSetDirty(!1),n=e?.soft;if(!n)try{await this.forceResolveFromFile()}catch(e){if(1!==e.fileOperationResult)throw i(),e}this._onDidRevert.fire(),t&&this._onDidChangeDirty.fire()}async resolve(e){this.trace("resolve() - enter"),yz("code/willResolveTextFileEditorModel"),this.isDisposed()?this.trace("resolve() - exit - without resolving because model is disposed"):e?.contents||!this.dirty&&!this.saveSequentializer.isRunning()?(await this.doResolve(e),yz("code/didResolveTextFileEditorModel")):this.trace("resolve() - exit - without resolving because model is dirty or being saved")}async doResolve(e){if(e?.contents)return this.resolveFromBuffer(e.contents,e);if(!this.isResolved()){if(await this.resolveFromBackup(e))return}return this.resolveFromFile(e)}async resolveFromBuffer(e,t){let i,n,s,o;this.trace("resolveFromBuffer()");try{const e=await this.fileService.stat(this.resource);i=e.mtime,n=e.ctime,s=e.size,o=e.etag,this.setOrphaned(!1)}catch(e){i=Date.now(),n=Date.now(),s=0,o=oW,this.setOrphaned(1===e.fileOperationResult)}const r=await this.textFileService.encoding.getPreferredWriteEncoding(this.resource,this.preferredEncoding);this.resolveFromContent({resource:this.resource,name:this.name,mtime:i,ctime:n,size:s,etag:o,value:e,encoding:r.encoding,readonly:!1,locked:!1},!0,t)}async resolveFromBackup(e){const t=await this.workingCopyBackupService.resolve(this);let i=cV;t&&(i=(await this.textFileService.encoding.getPreferredWriteEncoding(this.resource,this.preferredEncoding)).encoding);return!this.isResolved()?!!t&&(await this.doResolveFromBackup(t,i,e),!0):(this.trace("resolveFromBackup() - exit - without resolving because previously new model got created meanwhile"),!0)}async doResolveFromBackup(e,t,i){this.trace("doResolveFromBackup()"),this.resolveFromContent({resource:this.resource,name:this.name,mtime:e.meta?e.meta.mtime:Date.now(),ctime:e.meta?e.meta.ctime:Date.now(),size:e.meta?e.meta.size:0,etag:e.meta?e.meta.etag:oW,value:await iM(await this.textFileService.getDecodedStream(this.resource,e.value,{encoding:cV})),encoding:t,readonly:!1,locked:!1},!0,i),e.meta?.orphaned&&this.setOrphaned(!0)}async resolveFromFile(e){this.trace("resolveFromFile()");const t=e?.forceReadFromFile,i=this.isResolved()||e?.allowBinary;let n;t?n=oW:this.lastResolvedFileStat&&(n=this.lastResolvedFileStat.etag);const s=this.versionId;try{const t=await this.textFileService.readStream(this.resource,{acceptTextOnly:!i,etag:n,encoding:this.preferredEncoding,limits:e?.limits});return this.setOrphaned(!1),s!==this.versionId?void this.trace("resolveFromFile() - exit - without resolving because model content changed"):this.resolveFromContent(t,!1,e)}catch(e){const i=e.fileOperationResult;if(this.setOrphaned(1===i),this.isResolved()&&2===i)return void(e instanceof Gz&&this.updateLastResolvedFileStat(e.stat));if(this.isResolved()&&1===i&&!t)return;throw e}}resolveFromContent(e,t,i){if(this.trace("resolveFromContent() - enter"),this.isDisposed())return void this.trace("resolveFromContent() - exit - because model is disposed");this.updateLastResolvedFileStat({resource:this.resource,name:e.name,mtime:e.mtime,ctime:e.ctime,size:e.size,etag:e.etag,readonly:e.readonly,locked:e.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0});const n=this.contentEncoding;this.contentEncoding=e.encoding,this.preferredEncoding?this.updatePreferredEncoding(this.contentEncoding):n!==this.contentEncoding&&this._onDidChangeEncoding.fire(),this.textEditorModel?this.doUpdateTextModel(e.value):this.doCreateTextModel(e.resource,e.value),this.setDirty(!!t),this._onDidResolve.fire(i?.reason??3)}doCreateTextModel(e,t){this.trace("doCreateTextModel()");const i=this.createTextEditorModel(t,e,this.preferredLanguageId);this.installModelListeners(i),this.autoDetectLanguage()}doUpdateTextModel(e){this.trace("doUpdateTextModel()"),this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(e,this.preferredLanguageId)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(e){this._register(e.onDidChangeContent((t=>this.onModelContentChanged(e,t.isUndoing||t.isRedoing)))),this._register(e.onDidChangeLanguage((()=>this.onMaybeShouldChangeEncoding()))),super.installModelListeners(e)}onModelContentChanged(e,t){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),t&&(this.lastModelContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(e.getAlternativeVersionId()===this.bufferSavedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");const e=this.dirty;this.setDirty(!1),e&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire(),this.autoDetectLanguage()}async autoDetectLanguage(){await(this.extensionService?.whenInstalledExtensionsRegistered());const e=this.getLanguageId();if(!(this.resource.scheme!==this.pathService.defaultUriScheme||e&&e!==Tr||this.resourceHasExtension))return super.autoDetectLanguage()}async forceResolveFromFile(){this.isDisposed()||await this.textFileService.files.resolve(this.resource,{reload:{async:!1},forceReadFromFile:!0})}isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(e){if(!this.isResolved())return;const t=this.dirty;this.doSetDirty(e),e!==t&&this._onDidChangeDirty.fire()}doSetDirty(e){const t=this.dirty,i=this.inConflictMode,n=this.inErrorMode,s=this.bufferSavedVersionId;return e?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.updateSavedVersionId()),()=>{this.dirty=t,this.inConflictMode=i,this.inErrorMode=n,this.bufferSavedVersionId=s}}async save(e=Object.create(null)){return!!this.isResolved()&&(this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):!this.hasState(3)&&!this.hasState(5)||2!==e.reason&&3!==e.reason&&4!==e.reason?(this.trace("save() - enter"),await this.doSave(e),this.trace("save() - exit"),this.hasState(0)):(this.trace("save() - ignoring auto save request for model that is in conflict or error"),!1))}async doSave(e){"number"!=typeof e.reason&&(e.reason=1);let t=this.versionId;if(this.trace(`doSave(${t}) - enter with versionId ${t}`),this.ignoreSaveFromSaveParticipants)return void this.trace(`doSave(${t}) - exit - refusing to save() recursively from save participant`);if(this.saveSequentializer.isRunning(t))return this.trace(`doSave(${t}) - exit - found a running save for versionId ${t}`),this.saveSequentializer.running;if(!e.force&&!this.dirty)return void this.trace(`doSave(${t}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);if(this.saveSequentializer.isRunning())return this.trace(`doSave(${t}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue((()=>this.doSave(e)));this.isResolved()&&this.textEditorModel.pushStackElement();const i=new ki;return this.saveSequentializer.run(t,(async()=>{if(this.isResolved()&&!e.skipSaveParticipants)try{if(2===e.reason&&"number"==typeof this.lastModelContentChangeFromUndoRedo){const e=Date.now()-this.lastModelContentChangeFromUndoRedo;e<TV.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await za(TV.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-e)}if(!i.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.textFileService.files.runSaveParticipants(this,{reason:e.reason??1,savedFrom:e.from},i.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(e){this.logService.error(`[text file model] runSaveParticipants(${t}) - resulted in an error: ${e.toString()}`,this.resource.toString())}if(i.token.isCancellationRequested)return;if(i.dispose(),this.isDisposed())return;if(!this.isResolved())return;t=this.versionId,this.inErrorMode=!1,this.trace(`doSave(${t}) - before write()`);const n=Fn(this.lastResolvedFileStat),s=this;return this.saveSequentializer.run(t,(async()=>{try{const i=await this.textFileService.write(n.resource,s.createSnapshot(),{mtime:n.mtime,encoding:this.getEncoding(),etag:e.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(n.resource,s.getLanguageId())?oW:n.etag,unlock:e.writeUnlock,writeElevated:e.writeElevated});this.handleSaveSuccess(i,t,e)}catch(i){this.handleSaveError(i,t,e)}})())})(),(()=>i.cancel()))}handleSaveSuccess(e,t,i){this.updateLastResolvedFileStat(e),t===this.versionId?(this.trace(`handleSaveSuccess(${t}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${t}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:i.reason,stat:e,source:i.source})}handleSaveError(e,t,i){if((i.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[text file model] handleSaveError(${t}) - exit - resulted in a save error: ${e.toString()}`,this.resource.toString()]),i.ignoreErrorHandler)throw e;this.setDirty(!0),this.inErrorMode=!0,3===e.fileOperationResult&&(this.inConflictMode=!0),this.textFileService.files.saveErrorHandler.onSaveError(e,this,i),this._onDidSaveError.fire()}updateSavedVersionId(){this.isResolved()&&(this.bufferSavedVersionId=this.textEditorModel.getAlternativeVersionId())}updateLastResolvedFileStat(e){const t=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=e.mtime&&(this.lastResolvedFileStat=e):this.lastResolvedFileStat=e,this.isReadonly()!==t&&this._onDidChangeReadonly.fire()}hasState(e){switch(e){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.inOrphanMode;case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(e){return this.saveSequentializer.running}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}async onMaybeShouldChangeEncoding(){if(this.hasEncodingSetExplicitly)return void this.trace("onMaybeShouldChangeEncoding() - ignoring because encoding was set explicitly");if(this.contentEncoding===dV||this.contentEncoding===uV||this.contentEncoding===gV)return void this.trace("onMaybeShouldChangeEncoding() - ignoring because content encoding has a BOM");const{encoding:e}=await this.textFileService.encoding.getPreferredReadEncoding(this.resource);if("string"==typeof e&&this.isNewEncoding(e)){if(!this.isDirty())return this.logService.info(`Adjusting encoding based on configured language override to '${e}' for ${this.resource.toString(!0)}.`),this.setEncodingInternal(e,1);this.trace("onMaybeShouldChangeEncoding() - ignoring because model is dirty")}else this.trace(`onMaybeShouldChangeEncoding() - ignoring because preferred encoding ${e} is not new`)}setEncoding(e,t){return this.hasEncodingSetExplicitly=!0,this.setEncodingInternal(e,t)}async setEncodingInternal(e,t){if(0===t)this.updatePreferredEncoding(e),this.isDirty()||(this.versionId++,this.setDirty(!0)),this.inConflictMode||await this.save({source:TV.TEXTFILE_SAVE_ENCODING_SOURCE});else{if(!this.isNewEncoding(e))return;this.isDirty()&&!this.inConflictMode&&await this.save(),this.updatePreferredEncoding(e),await this.forceResolveFromFile()}}updatePreferredEncoding(e){this.isNewEncoding(e)&&(this.preferredEncoding=e,this._onDidChangeEncoding.fire())}isNewEncoding(e){return this.preferredEncoding!==e&&!(!this.preferredEncoding&&this.contentEncoding===e)}getEncoding(){return this.preferredEncoding||this.contentEncoding}trace(e){this.logService.trace(`[text file model] ${e}`,this.resource.toString())}isResolved(){return!!this.textEditorModel}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inOrphanMode=!1,this.inErrorMode=!1,super.dispose()}};NV=TV=Bs([zs(3,Ko),zs(4,dC),zs(5,Fs),zs(6,PH),zs(7,aV),zs(8,Ed),zs(9,lV),zs(10,LV),zs(11,YC),zs(12,sV),zs(13,my),zs(14,IV),zs(15,r)],NV);let AV=class extends Qt{constructor(e,t){super(),this.progressService=e,this.logService=t,this.saveParticipants=[]}addSaveParticipant(e){const t=gt(this.saveParticipants,e);return Yt((()=>t()))}participate(e,t,i){const n=new ki(i);return this.progressService.withProgress({title:u("vs/workbench/services/textfile/common/textFileSaveParticipant",0,"Saving '{0}'",e.name),location:15,cancellable:!0,delay:e.isDirty()?3e3:5e3},(async i=>{e.textEditorModel?.pushStackElement();for(const s of this.saveParticipants){if(n.token.isCancellationRequested||!e.textEditorModel)break;try{const o=s.participate(e,t,i,n.token);await Ra(o,n.token)}catch(e){this.logService.error(e)}}e.textEditorModel?.pushStackElement()}),(()=>{n.cancel()})).finally((()=>{n.dispose()}))}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};AV=Bs([zs(0,tS),zs(1,Ed)],AV);const MV=o("workingCopyFileService");let RV=class extends Qt{get models(){return[...this.mapResourceToModel.values()]}constructor(e,t,i,n,s){super(),this.instantiationService=e,this.fileService=t,this.notificationService=i,this.workingCopyFileService=n,this.uriIdentityService=s,this._onDidCreate=this._register(new ui),this.onDidCreate=this._onDidCreate.event,this._onDidResolve=this._register(new ui),this.onDidResolve=this._onDidResolve.event,this._onDidRemove=this._register(new ui),this.onDidRemove=this._onDidRemove.event,this._onDidChangeDirty=this._register(new ui),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeReadonly=this._register(new ui),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this._onDidChangeOrphaned=this._register(new ui),this.onDidChangeOrphaned=this._onDidChangeOrphaned.event,this._onDidSaveError=this._register(new ui),this.onDidSaveError=this._onDidSaveError.event,this._onDidSave=this._register(new ui),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new ui),this.onDidRevert=this._onDidRevert.event,this._onDidChangeEncoding=this._register(new ui),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this.mapResourceToModel=new At,this.mapResourceToModelListeners=new At,this.mapResourceToDisposeListener=new At,this.mapResourceToPendingModelResolvers=new At,this.modelResolveQueue=this._register(new Ua),this.saveErrorHandler=(()=>{const e=this.notificationService;return{onSaveError(t,i){e.error(u("vs/workbench/services/textfile/common/textFileEditorModelManager",0,"Failed to save '{0}': {1}",i.name,Pd(t,!1)))}}})(),this.mapCorrelationIdToModelsToRestore=new Map,this.saveParticipants=this._register(this.instantiationService.createInstance(AV)),this.registerListeners()}registerListeners(){this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities((e=>this.onDidChangeFileSystemProviderCapabilities(e)))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations((e=>this.onDidChangeFileSystemProviderRegistrations(e)))),this._register(this.workingCopyFileService.onWillRunWorkingCopyFileOperation((e=>this.onWillRunWorkingCopyFileOperation(e)))),this._register(this.workingCopyFileService.onDidFailWorkingCopyFileOperation((e=>this.onDidFailWorkingCopyFileOperation(e)))),this._register(this.workingCopyFileService.onDidRunWorkingCopyFileOperation((e=>this.onDidRunWorkingCopyFileOperation(e))))}onDidFilesChange(e){for(const t of this.models)t.isDirty()||e.contains(t.resource,0,1)&&this.queueModelReload(t)}onDidChangeFileSystemProviderCapabilities(e){this.queueModelReloads(e.scheme)}onDidChangeFileSystemProviderRegistrations(e){e.added&&this.queueModelReloads(e.scheme)}queueModelReloads(e){for(const t of this.models)t.isDirty()||e===t.resource.scheme&&this.queueModelReload(t)}queueModelReload(e){this.modelResolveQueue.queueSize(e.resource)<=1&&this.modelResolveQueue.queueFor(e.resource,(async()=>{try{await this.reload(e)}catch(e){Ge(e)}}))}onWillRunWorkingCopyFileOperation(e){if(2===e.operation||3===e.operation){const t=[];for(const{source:i,target:n}of e.files)if(i){if(this.uriIdentityService.extUri.isEqual(i,n))continue;const e=[];for(const t of this.models)this.uriIdentityService.extUri.isEqualOrParent(t.resource,i)&&e.push(t);for(const s of e){const e=s.resource;let o;o=this.uriIdentityService.extUri.isEqual(e,i)?n:ms(n,e.path.substr(i.path.length+1)),t.push({source:e,target:o,languageId:s.getLanguageId(),encoding:s.getEncoding(),snapshot:s.isDirty()?s.createSnapshot():void 0})}}this.mapCorrelationIdToModelsToRestore.set(e.correlationId,t)}}onDidFailWorkingCopyFileOperation(e){if(2===e.operation||3===e.operation){const t=this.mapCorrelationIdToModelsToRestore.get(e.correlationId);t&&(this.mapCorrelationIdToModelsToRestore.delete(e.correlationId),t.forEach((e=>{e.snapshot&&this.get(e.source)?.setDirty(!0)})))}}onDidRunWorkingCopyFileOperation(e){switch(e.operation){case 0:e.waitUntil((async()=>{for(const{target:t}of e.files){const e=this.get(t);e&&!e.isDisposed()&&await e.revert()}})());break;case 2:case 3:e.waitUntil((async()=>{const t=this.mapCorrelationIdToModelsToRestore.get(e.correlationId);t&&(this.mapCorrelationIdToModelsToRestore.delete(e.correlationId),await Ja.settled(t.map((async e=>{const t=await this.resolve(e.target,{reload:{async:!1},contents:e.snapshot?nM(e.snapshot):void 0,encoding:e.encoding});e.languageId&&e.languageId!==Tr&&t.getLanguageId()===Tr&&ps(e.target)!==Nr&&t.updateTextEditorModel(void 0,e.languageId)}))))})())}}get(e){return this.mapResourceToModel.get(e)}has(e){return this.mapResourceToModel.has(e)}async reload(e){await this.joinPendingResolves(e.resource),e.isDirty()||e.isDisposed()||!this.has(e.resource)||await this.doResolve(e,{reload:{async:!1}})}async resolve(e,t){const i=this.joinPendingResolves(e);return i&&await i,this.doResolve(e,t)}async doResolve(e,t){let i,n,s;Fe.isUri(e)?(n=e,i=this.get(n)):(n=e.resource,i=e);let o=!1;if(i)t?.contents?s=i.resolve(t):t?.reload?t.reload.async?(s=Promise.resolve(),(async()=>{try{await i.resolve(t)}catch(e){Ge(e)}})()):s=i.resolve(t):s=Promise.resolve();else{o=!0;const e=i=this.instantiationService.createInstance(NV,n,t?t.encoding:void 0,t?t.languageId:void 0);s=i.resolve(t),this.registerModel(e)}this.mapResourceToPendingModelResolvers.set(n,s),this.add(n,i),o&&(this._onDidCreate.fire(i),i.isDirty()&&this._onDidChangeDirty.fire(i));try{await s}catch(e){throw o&&i.dispose(),e}finally{this.mapResourceToPendingModelResolvers.delete(n)}return t?.languageId&&i.setLanguageId(t.languageId),o&&i.isDirty()&&this._onDidChangeDirty.fire(i),i}joinPendingResolves(e){if(this.mapResourceToPendingModelResolvers.get(e))return this.doJoinPendingResolves(e)}async doJoinPendingResolves(e){let t;for(;this.mapResourceToPendingModelResolvers.has(e);){const i=this.mapResourceToPendingModelResolvers.get(e);if(i===t)return;t=i;try{await i}catch(e){}}}registerModel(e){const t=new Xt;t.add(e.onDidResolve((t=>this._onDidResolve.fire({model:e,reason:t})))),t.add(e.onDidChangeDirty((()=>this._onDidChangeDirty.fire(e)))),t.add(e.onDidChangeReadonly((()=>this._onDidChangeReadonly.fire(e)))),t.add(e.onDidChangeOrphaned((()=>this._onDidChangeOrphaned.fire(e)))),t.add(e.onDidSaveError((()=>this._onDidSaveError.fire(e)))),t.add(e.onDidSave((t=>this._onDidSave.fire({model:e,...t})))),t.add(e.onDidRevert((()=>this._onDidRevert.fire(e)))),t.add(e.onDidChangeEncoding((()=>this._onDidChangeEncoding.fire(e)))),this.mapResourceToModelListeners.set(e.resource,t)}add(e,t){if(this.mapResourceToModel.get(e)===t)return;const i=this.mapResourceToDisposeListener.get(e);i?.dispose(),this.mapResourceToModel.set(e,t),this.mapResourceToDisposeListener.set(e,t.onWillDispose((()=>this.remove(e))))}remove(e){const t=this.mapResourceToModel.delete(e),i=this.mapResourceToDisposeListener.get(e);i&&(jt(i),this.mapResourceToDisposeListener.delete(e));const n=this.mapResourceToModelListeners.get(e);n&&(jt(n),this.mapResourceToModelListeners.delete(e)),t&&this._onDidRemove.fire(e)}addSaveParticipant(e){return this.saveParticipants.addSaveParticipant(e)}runSaveParticipants(e,t,i){return this.saveParticipants.participate(e,t,i)}canDispose(e){return!(!e.isDisposed()&&(this.mapResourceToPendingModelResolvers.has(e.resource)||e.isDirty()))||this.doCanDispose(e)}async doCanDispose(e){const t=this.joinPendingResolves(e.resource);return t?(await t,this.canDispose(e)):!e.isDirty()||(await oi.toPromise(e.onDidChangeDirty),this.canDispose(e))}dispose(){super.dispose(),this.mapResourceToModel.clear(),this.mapResourceToPendingModelResolvers.clear(),jt(this.mapResourceToDisposeListener.values()),this.mapResourceToDisposeListener.clear(),jt(this.mapResourceToModelListeners.values()),this.mapResourceToModelListeners.clear()}};RV=Bs([zs(0,s),zs(1,Fs),zs(2,rd),zs(3,MV),zs(4,lW)],RV);const OV=o("elevatedFileService"),FV=o("IFileDecorationsService");var PV;const BV="vs/workbench/services/textfile/browser/textFileService";let zV=class extends Qt{static{PV=this}static{this.TEXTFILE_SAVE_CREATE_SOURCE=KH.registerSource("textFileCreate.source",u(BV,0,"File Created"))}static{this.TEXTFILE_SAVE_REPLACE_SOURCE=KH.registerSource("textFileOverwrite.source",u(BV,1,"File Replaced"))}constructor(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p,f,m,b){super(),this.fileService=e,this.untitledTextEditorService=t,this.lifecycleService=i,this.instantiationService=n,this.modelService=s,this.environmentService=o,this.dialogService=r,this.fileDialogService=a,this.textResourceConfigurationService=l,this.filesConfigurationService=h,this.codeEditorService=c,this.pathService=d,this.workingCopyFileService=u,this.uriIdentityService=g,this.languageService=p,this.logService=f,this.elevatedFileService=m,this.decorationsService=b,this.files=this._register(this.instantiationService.createInstance(RV)),this.untitled=this.untitledTextEditorService,this.provideDecorations()}provideDecorations(){const e=this._register(new class extends Qt{constructor(e){super(),this.files=e,this.label=u(BV,2,"Text File Model Decorations"),this._onDidChange=this._register(new ui),this.onDidChange=this._onDidChange.event,this.registerListeners()}registerListeners(){this._register(this.files.onDidResolve((({model:e})=>{(e.isReadonly()||e.hasState(4))&&this._onDidChange.fire([e.resource])}))),this._register(this.files.onDidRemove((e=>this._onDidChange.fire([e])))),this._register(this.files.onDidChangeReadonly((e=>this._onDidChange.fire([e.resource])))),this._register(this.files.onDidChangeOrphaned((e=>this._onDidChange.fire([e.resource]))))}provideDecorations(e){const t=this.files.get(e);if(!t||t.isDisposed())return;const i=t.isReadonly(),n=t.hasState(4);return i&&n?{color:sm,letter:wg.lockSmall,strikethrough:!0,tooltip:u(BV,3,"Deleted, Read-only")}:i?{letter:wg.lockSmall,tooltip:u(BV,4,"Read-only")}:n?{color:sm,strikethrough:!0,tooltip:u(BV,5,"Deleted")}:void 0}}(this.files));this._register(this.decorationsService.registerDecorationsProvider(e))}get encoding(){return this._encoding||(this._encoding=this._register(this.instantiationService.createInstance(WV))),this._encoding}async read(e,t){const[i,n]=await this.doRead(e,{...t,preferUnbuffered:!0});return{...i,encoding:n.detected.encoding||cV,value:await io(n.stream,(e=>e.join("")))}}async readStream(e,t){const[i,n]=await this.doRead(e,t);return{...i,encoding:n.detected.encoding||cV,value:await iM(n.stream)}}async doRead(e,t){const i=new ki;let n;if(t?.preferUnbuffered){const s=await this.fileService.readFile(e,t,i.token);n={...s,value:wo(s.value)}}else n=await this.fileService.readFileStream(e,t,i.token);try{return[n,await this.doGetDecodedStream(e,n.value,t)]}catch(e){throw i.dispose(!0),1===e.decodeStreamErrorKind?new BH(u(BV,6,"File seems to be binary and cannot be opened as text"),0,t):e}}async create(e,t){const i=await Promise.all(e.map((async e=>{const t=await this.getEncodedReadable(e.resource,e.value);return{resource:e.resource,contents:t,overwrite:e.options?.overwrite}})));return this.workingCopyFileService.create(i,Ci.None,t)}async write(e,t,i){const n=await this.getEncodedReadable(e,t,i);return i?.writeElevated&&this.elevatedFileService.isSupported(e)?this.elevatedFileService.writeFileElevated(e,n,i):this.fileService.writeFile(e,n,i)}async getEncodedReadable(e,t,n){const{encoding:s,addBOM:o}=await this.encoding.getWriteEncoding(e,n);if(s===cV&&!o)return void 0===t?void 0:function(e){if(void 0!==e)return"string"==typeof e?ho.fromString(e):{read:()=>{const t=e.read();return"string"==typeof t?ho.fromString(t):null}}}(t);return async function(e,t,n){const s=(await i.e(5725).then(i.t.bind(i,83585,19)).then((e=>e.default??e))).getEncoder(CV(t),n);let o=!1,r=!1;return{read(){if(r)return null;const i=e.read();if("string"!=typeof i){if(r=!0,!o&&n?.addBOM)switch(t){case cV:case dV:return ho.wrap(Uint8Array.from(mV));case uV:return ho.wrap(Uint8Array.from(pV));case gV:return ho.wrap(Uint8Array.from(fV))}const e=s.end();return e&&e.length>0?(o=!0,ho.wrap(e)):null}return o=!0,ho.wrap(s.write(i))}}}("string"==typeof(t=t||"")?function(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}(t):t,s,{addBOM:o})}async getDecodedStream(e,t,i){return(await this.doGetDecodedStream(e,t,i)).stream}doGetDecodedStream(e,t,i){return yV(t,{acceptTextOnly:i?.acceptTextOnly??!1,guessEncoding:i?.autoGuessEncoding||this.textResourceConfigurationService.getValue(e,"files.autoGuessEncoding"),overwriteEncoding:async t=>{const{encoding:n}=await this.encoding.getPreferredReadEncoding(e,i,t??void 0);return n}})}async save(e,t){if(e.scheme===vn.untitled){const i=this.untitled.get(e);if(i){let n;if(n=i.hasAssociatedFilePath?await this.suggestSavePath(e):await this.fileDialogService.pickFileToSave(await this.suggestSavePath(e),t?.availableFileSystems),n)return this.saveAs(e,n,t)}}else{const i=this.files.get(e);if(i)return await i.save(t)?e:void 0}}async saveAs(e,t,i){if(t||(t=await this.fileDialogService.pickFileToSave(await this.suggestSavePath(i?.suggestedTarget??e),i?.availableFileSystems)),t){if(this.filesConfigurationService.isReadonly(t)){if(!await this.confirmMakeWriteable(t))return;this.filesConfigurationService.updateReadonly(t,!1)}if(ds(e,t))return this.save(e,{...i,force:!0});if(this.fileService.hasProvider(e)&&this.uriIdentityService.extUri.isEqual(e,t)&&await this.fileService.exists(e)){await this.workingCopyFileService.move([{file:{source:e,target:t}}],Ci.None);return await this.save(e,i)||await this.save(t,i),t}return this.doSaveAs(e,t,i)}}async doSaveAs(e,t,i){let n=!1;const s=this.files.get(e);if(s?.isResolved())n=await this.doSaveAsTextFile(s,e,t,i);else if(this.fileService.hasProvider(e))await this.fileService.copy(e,t,!0),n=!0;else{const s=this.modelService.getModel(e);s&&(n=await this.doSaveAsTextFile(s,e,t,i))}if(n){try{await this.revert(e)}catch(e){this.logService.error(e)}return t}}async doSaveAsTextFile(e,t,i,n){let s;const o=e;"function"==typeof o.getEncoding&&(s=o.getEncoding());let r,a,l,h=!1,c=this.files.get(i);if(c?.isResolved())h=!0;else{h=await this.fileService.exists(i),h||await this.create([{resource:i,value:""}]);try{c=await this.files.resolve(i,{encoding:s})}catch(s){if(h&&(0===s.textFileOperationResult||7===s.fileOperationResult))return await this.fileService.del(i),this.doSaveAsTextFile(e,t,i,n);throw s}}if(r=!(e instanceof DV&&e.hasAssociatedFilePath&&h&&this.uriIdentityService.extUri.isEqual(i,xs(e.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme)))||await this.confirmOverwrite(i),!r)return!1;if(e instanceof rV?e.isResolved()&&(a=e.textEditorModel??void 0):a=e,c.isResolved()&&(l=c.textEditorModel),a&&l){c.updatePreferredEncoding(s),this.modelService.updateModel(l,nM(a.createSnapshot()));const e=a.getLanguageId(),t=l.getLanguageId();e!==Tr&&t===Tr&&l.setLanguage(e);const i=this.codeEditorService.getTransientModelProperties(a);if(i)for(const[e,t]of i)this.codeEditorService.setTransientModelProperty(l,e,t)}return n?.source||(n={...n,source:h?PV.TEXTFILE_SAVE_REPLACE_SOURCE:PV.TEXTFILE_SAVE_CREATE_SOURCE}),c.save({...n,from:t})}async confirmOverwrite(e){const{confirmed:t}=await this.dialogService.confirm({type:"warning",message:u(BV,7,"'{0}' already exists. Do you want to replace it?",gs(e)),detail:u(BV,8,"A file or folder with the name '{0}' already exists in the folder '{1}'. Replacing it will overwrite its current contents.",gs(e),gs(fs(e))),primaryButton:u(BV,9,"&&Replace")});return t}async confirmMakeWriteable(e){const{confirmed:t}=await this.dialogService.confirm({type:"warning",message:u(BV,10,"'{0}' is marked as read-only. Do you want to save anyway?",gs(e)),detail:u(BV,11,"Paths can be configured as read-only via settings."),primaryButton:u(BV,12,"&&Save Anyway")});return t}async suggestSavePath(e){if(this.fileService.hasProvider(e))return e;const t=this.environmentService.remoteAuthority,i=await this.fileDialogService.defaultFilePath();let n;if(e.scheme===vn.untitled){const s=this.untitled.get(e);if(s){if(s.hasAssociatedFilePath)return xs(e,t,this.pathService.defaultUriScheme);let o;o=await this.pathService.hasValidBasename(ms(i,s.name),s.name)?s.name:gs(e);const r=s.getLanguageId();n=r&&r!==Tr?this.suggestFilename(r,o):o}}return n||(n=gs(e)),ms(i,n)}suggestFilename(e,t){if(!this.languageService.getLanguageName(e))return t;const i=Le(t),n=this.languageService.getExtensions(e);if(n.includes(i))return t;const s=dt(n);if(s)return i?`${t.substring(0,t.indexOf(i))}${s}`:`${t}${s}`;const o=this.languageService.getFilenames(e);return o.includes(t)?t:dt(o)??t}async revert(e,t){if(e.scheme===vn.untitled){const i=this.untitled.get(e);if(i)return i.revert(t)}else{const i=this.files.get(e);if(i&&(i.isDirty()||t?.force))return i.revert(t)}}isDirty(e){const t=e.scheme===vn.untitled?this.untitled.get(e):this.files.get(e);return!!t&&t.isDirty()}};zV=PV=Bs([zs(0,Fs),zs(1,tV),zs(2,eV),zs(3,s),zs(4,dC),zs(5,Ds),zs(6,sd),zs(7,od),zs(8,gC),zs(9,LV),zs(10,Xc),zs(11,IV),zs(12,MV),zs(13,lW),zs(14,Ko),zs(15,Ed),zs(16,OV),zs(17,FV)],zV);let WV=class extends Qt{get encodingOverrides(){return this._encodingOverrides}set encodingOverrides(e){this._encodingOverrides=e}constructor(e,t,i,n){super(),this.textResourceConfigurationService=e,this.environmentService=t,this.contextService=i,this.uriIdentityService=n,this._encodingOverrides=this.getDefaultEncodingOverrides(),this.registerListeners()}registerListeners(){this._register(this.contextService.onDidChangeWorkspaceFolders((()=>this.encodingOverrides=this.getDefaultEncodingOverrides())))}getDefaultEncodingOverrides(){const e=[];return e.push({parent:this.environmentService.userRoamingDataHome,encoding:cV}),e.push({extension:gS,encoding:cV}),e.push({parent:this.environmentService.untitledWorkspacesHome,encoding:cV}),this.contextService.getWorkspace().folders.forEach((t=>{e.push({parent:ms(t.uri,".vscode"),encoding:cV})})),e}async getWriteEncoding(e,t){const{encoding:i,hasBOM:n}=await this.getPreferredWriteEncoding(e,t?t.encoding:void 0);return{encoding:i,addBOM:n}}async getPreferredWriteEncoding(e,t){const i=await this.getEncodingForResource(e,t);return{encoding:i,hasBOM:i===uV||i===gV||i===dV}}async getPreferredReadEncoding(e,t,i){let n;t?.encoding?n=i===dV&&t.encoding===cV?dV:t.encoding:"string"==typeof i?n=i:this.textResourceConfigurationService.getValue(e,"files.encoding")===dV&&(n=cV);const s=await this.getEncodingForResource(e,n);return{encoding:s,hasBOM:s===uV||s===gV||s===dV}}async getEncodingForResource(e,t){let n;const s=this.getEncodingOverride(e);return n=s||(t||this.textResourceConfigurationService.getValue(e,"files.encoding")),n!==cV&&(n&&await async function(e){return(await i.e(5725).then(i.t.bind(i,83585,19)).then((e=>e.default??e))).encodingExists(CV(e))}(n)||(n=cV)),n}getEncodingOverride(e){if(this.encodingOverrides?.length)for(const t of this.encodingOverrides){if(t.parent&&this.uriIdentityService.extUri.isEqualOrParent(e,t.parent))return t.encoding;if(t.extension&&ps(e)===`.${t.extension}`)return t.encoding}}};WV=Bs([zs(0,gC),zs(1,Ds),zs(2,fS),zs(3,lW)],WV);let HV=class extends zV{constructor(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p,f,m,b){super(e,t,i,n,s,o,r,a,l,h,c,d,u,g,p,m,f,b),this.registerListeners()}registerListeners(){this._register(this.lifecycleService.onBeforeShutdown((e=>e.veto(this.onBeforeShutdown(),"veto.textFiles"))))}onBeforeShutdown(){return!!this.files.models.some((e=>e.hasState(2)))}};var VV;HV=Bs([zs(0,Fs),zs(1,tV),zs(2,eV),zs(3,s),zs(4,dC),zs(5,Ds),zs(6,sd),zs(7,od),zs(8,gC),zs(9,LV),zs(10,Xc),zs(11,IV),zs(12,MV),zs(13,lW),zs(14,Ko),zs(15,OV),zs(16,Ed),zs(17,FV)],HV);let UV=class extends Qt{static{VV=this}static{this.NO_FOLDER=null}constructor(e,t,i,n){super(),this.getExpression=e,this.shouldUpdate=t,this.contextService=i,this.configurationService=n,this._onExpressionChange=this._register(new ui),this.onExpressionChange=this._onExpressionChange.event,this.mapFolderToParsedExpression=new Map,this.mapFolderToConfiguredExpression=new Map,this.updateExpressions(!1),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{this.shouldUpdate(e)&&this.updateExpressions(!0)}))),this._register(this.contextService.onDidChangeWorkspaceFolders((()=>this.updateExpressions(!0))))}updateExpressions(e){let t=!1;for(const e of this.contextService.getWorkspace().folders){const i=e.uri.toString(),n=this.doGetExpression(e.uri),s=this.mapFolderToConfiguredExpression.get(i);n?s&&qn(s.expression,n.expression)||(t=!0,this.mapFolderToParsedExpression.set(i,lg(n.expression)),this.mapFolderToConfiguredExpression.set(i,n)):s&&(t=!0,this.mapFolderToParsedExpression.delete(i),this.mapFolderToConfiguredExpression.delete(i))}const i=new Mt(this.contextService.getWorkspace().folders.map((e=>e.uri)));for(const[e]of this.mapFolderToConfiguredExpression)e!==VV.NO_FOLDER&&(i.has(Fe.parse(e))||(this.mapFolderToParsedExpression.delete(e),this.mapFolderToConfiguredExpression.delete(e),t=!0));const n=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(VV.NO_FOLDER);n?s&&qn(s.expression,n.expression)||(t=!0,this.mapFolderToParsedExpression.set(VV.NO_FOLDER,lg(n.expression)),this.mapFolderToConfiguredExpression.set(VV.NO_FOLDER,n)):s&&(t=!0,this.mapFolderToParsedExpression.delete(VV.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(VV.NO_FOLDER)),e&&t&&this._onExpressionChange.fire()}doGetExpression(e){const t=this.getExpression(e);if(!t)return;const i=Object.keys(t);if(0===i.length)return;let n=!1;const s=Object.create(null);for(const e of i){n||(n=Ce(e));let i=e;const o=rs(i,!0);if(o){const e=o.toLowerCase();o!==o.toLowerCase()&&(i=`${e}${i.substring(1)}`)}s[i]=t[e]}return{expression:s,hasAbsolutePath:n}}matches(e,t){if(0===this.mapFolderToParsedExpression.size)return!1;const i=this.contextService.getWorkspaceFolder(e);let n,s,o;return i&&this.mapFolderToParsedExpression.has(i.uri.toString())?(n=this.mapFolderToParsedExpression.get(i.uri.toString()),s=this.mapFolderToConfiguredExpression.get(i.uri.toString())):(n=this.mapFolderToParsedExpression.get(VV.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(VV.NO_FOLDER)),!!n&&(o=i?vs(i.uri,e):this.uriToPath(e),!("string"!=typeof o||!n(o,void 0,t))||!(o===this.uriToPath(e)||!s?.hasAbsolutePath)&&!!n(this.uriToPath(e),void 0,t))}uriToPath(e){return e.scheme===vn.file?e.fsPath:e.path}};UV=VV=Bs([zs(2,fS),zs(3,Uo)],UV);class KV extends YH{constructor(){super(...arguments),this._onDidChangeDirty=this._register(new ui),this._onDidChangeLabel=this._register(new ui),this._onDidChangeCapabilities=this._register(new ui),this._onWillDispose=this._register(new ui),this.onDidChangeDirty=this._onDidChangeDirty.event,this.onDidChangeLabel=this._onDidChangeLabel.event,this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this.onWillDispose=this._onWillDispose.event}get editorId(){}get capabilities(){return 2}hasCapability(e){return 0===e?0===this.capabilities:!!(this.capabilities&e)}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(XH(e))return this===e;const t=e.options?.override;return(this.editorId===t||void 0===t||void 0===this.editorId)&&ds(this.resource,QH.getCanonicalUri(e))}prefersEditorPane(e){return dt(e)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}}var qV;const $V="vs/workbench/services/filesConfiguration/common/filesConfigurationService",jV=new Cu("autoSaveAfterShortDelayContext",!1,!0);let GV=class extends Qt{static{qV=this}static{this.DEFAULT_AUTO_SAVE_MODE=F?Yz.AFTER_DELAY:Yz.OFF}static{this.DEFAULT_AUTO_SAVE_DELAY=1e3}static{this.READONLY_MESSAGES={providerReadonly:{value:u($V,0,"Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:u($V,1,"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:u($V,2,"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure.",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`),isTrusted:!0},fileLocked:{value:u($V,3,"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:u($V,4,"Editor is read-only because the file is read-only."),isTrusted:!0}}}constructor(e,t,i,n,s,o,r,a){super(),this.contextKeyService=e,this.configurationService=t,this.contextService=i,this.environmentService=n,this.uriIdentityService=s,this.fileService=o,this.markerService=r,this.textResourceConfigurationService=a,this._onDidChangeAutoSaveConfiguration=this._register(new ui),this.onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event,this._onDidChangeAutoSaveDisabled=this._register(new ui),this.onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event,this._onDidChangeFilesAssociation=this._register(new ui),this.onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event,this._onDidChangeReadonly=this._register(new ui),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this.autoSaveConfigurationCache=new Ft(1e3),this.autoSaveDisabledOverrides=new At,this.autoSaveAfterShortDelayContext=jV.bindTo(this.contextKeyService),this.readonlyIncludeMatcher=this._register(new Xa((()=>this.createReadonlyMatcher(tW)))),this.readonlyExcludeMatcher=this._register(new Xa((()=>this.createReadonlyMatcher(iW)))),this.sessionReadonlyOverrides=new At((e=>this.uriIdentityService.extUri.getComparisonKey(e)));const l=t.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,l.files),this.currentFilesAssociationConfiguration=l?.files?.associations,this.currentHotExitConfiguration=l?.files?.hotExit||Qz,this.onFilesConfigurationChange(l,!1),this.registerListeners()}createReadonlyMatcher(e){const t=this._register(new UV((t=>this.configurationService.getValue(e,{resource:t})),(t=>t.affectsConfiguration(e)),this.contextService,this.configurationService));return this._register(t.onExpressionChange((()=>this._onDidChangeReadonly.fire()))),t}isReadonly(e,t){const i=this.fileService.getProvider(e.scheme);if(i&&function(e){return!!(2048&e.capabilities)}(i))return i.readOnlyMessage??qV.READONLY_MESSAGES.providerReadonly;const n=this.sessionReadonlyOverrides.get(e);return"boolean"==typeof n?!0===n&&qV.READONLY_MESSAGES.sessionReadonly:!this.uriIdentityService.extUri.isEqualOrParent(e,this.environmentService.userRoamingDataHome)&&!this.uriIdentityService.extUri.isEqual(e,this.contextService.getWorkspace().configuration??void 0)&&(this.readonlyIncludeMatcher.value.matches(e)?!this.readonlyExcludeMatcher.value.matches(e)&&qV.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&t?.locked?qV.READONLY_MESSAGES.fileLocked:!!t?.readonly&&qV.READONLY_MESSAGES.fileReadonly)}async updateReadonly(e,t){if("toggle"===t){let i;try{i=await this.fileService.resolve(e,{resolveMetadata:!0})}catch(e){}t=!this.isReadonly(e,i)}"reset"===t?this.sessionReadonlyOverrides.delete(e):this.sessionReadonlyOverrides.set(e,t),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)})))}onFilesConfigurationChange(e,t){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,e.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(1===this.getAutoSaveMode(void 0).mode),t&&this._onDidChangeAutoSaveConfiguration.fire();const i=e?.files?.associations;qn(this.currentFilesAssociationConfiguration,i)||(this.currentFilesAssociationConfiguration=i,t&&this._onDidChangeFilesAssociation.fire());const n=e?.files?.hotExit;this.currentHotExitConfiguration=n===Xz||n===Zz?n:Qz;const s=Boolean(e?.files?.readonlyFromPermissions);s!==Boolean(this.configuredReadonlyFromPermissions)&&(this.configuredReadonlyFromPermissions=s,t&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(e){const t=this.toResource(e);if(t){let e=this.autoSaveConfigurationCache.get(t);return e||(e=this.computeAutoSaveConfiguration(t,this.textResourceConfigurationService.getValue(t,"files")),this.autoSaveConfigurationCache.set(t,e)),e}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(e,t){let i,n,s,o,r,a;switch(t.autoSave??qV.DEFAULT_AUTO_SAVE_MODE){case Yz.AFTER_DELAY:i="afterDelay",n="number"==typeof t.autoSaveDelay&&t.autoSaveDelay>=0?t.autoSaveDelay:qV.DEFAULT_AUTO_SAVE_DELAY,a=n<=qV.DEFAULT_AUTO_SAVE_DELAY;break;case Yz.ON_FOCUS_CHANGE:i="onFocusChange";break;case Yz.ON_WINDOW_CHANGE:i="onWindowChange"}return!0===t.autoSaveWorkspaceFilesOnly&&(s=!0,e&&!this.contextService.isInsideWorkspace(e)&&(r=!0,a=void 0)),!0===t.autoSaveWhenNoErrors&&(o=!0,a=void 0),{autoSave:i,autoSaveDelay:n,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:o,isOutOfWorkspace:r,isShortAutoSaveDelay:a}}toResource(e){return e instanceof KV?QH.getOriginalUri(e,{supportSideBySide:jH.PRIMARY}):e}hasShortAutoSaveDelay(e){const t=this.toResource(e);return!!this.getAutoSaveConfiguration(t).isShortAutoSaveDelay&&(!t||!this.autoSaveDisabledOverrides.has(t))}getAutoSaveMode(e,t){const i=this.toResource(e);if(i&&this.autoSaveDisabledOverrides.has(i))return{mode:0,reason:4};const n=this.getAutoSaveConfiguration(i);if(void 0===n.autoSave)return{mode:0,reason:1};if("number"==typeof t&&("afterDelay"===n.autoSave&&2!==t||"onFocusChange"===n.autoSave&&3!==t&&4!==t||"onWindowChange"===n.autoSave&&4!==t))return{mode:0,reason:1};if(i){if(n.autoSaveWorkspaceFilesOnly&&n.isOutOfWorkspace)return{mode:0,reason:2};if(n.autoSaveWhenNoErrors&&this.markerService.read({resource:i,take:1,severities:SI.Error}).length>0)return{mode:0,reason:3}}switch(n.autoSave){case"afterDelay":return"number"==typeof n.autoSaveDelay&&n.autoSaveDelay<=qV.DEFAULT_AUTO_SAVE_DELAY?{mode:n.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){const e=this.configurationService.getValue("files.autoSave");let t;return t=[Yz.AFTER_DELAY,Yz.ON_FOCUS_CHANGE,Yz.ON_WINDOW_CHANGE].some((t=>t===e))?Yz.OFF:Yz.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",t)}disableAutoSave(e){const t=this.toResource(e);if(!t)return Qt.None;const i=this.autoSaveDisabledOverrides.get(t)??0;return this.autoSaveDisabledOverrides.set(t,i+1),0===i&&this._onDidChangeAutoSaveDisabled.fire(t),Yt((()=>{const e=this.autoSaveDisabledOverrides.get(t)??0;e<=1?(this.autoSaveDisabledOverrides.delete(t),this._onDidChangeAutoSaveDisabled.fire(t)):this.autoSaveDisabledOverrides.set(t,e-1)}))}get isHotExitEnabled(){return!this.contextService.getWorkspace().transient&&this.currentHotExitConfiguration!==Xz}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(e,t){return"overwriteFileOnDisk"!==this.configurationService.getValue("files.saveConflictResolution",{resource:e,overrideIdentifier:t})}};GV=qV=Bs([zs(0,Qc),zs(1,Uo),zs(2,fS),zs(3,Es),zs(4,lW),zs(5,Fs),zs(6,xI),zs(7,gC)],GV);const YV=o("editorPaneService");var XV,QV;function ZV(e){return!!e&&"string"==typeof e.editorTypeId}function JV(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4}}!function(e){e.Workbench="workbench.contributions.kind"}(XV||(XV={})),function(e){e[e.BlockStartup=1]="BlockStartup",e[e.BlockRestore=2]="BlockRestore",e[e.AfterRestored=3]="AfterRestored",e[e.Eventually=4]="Eventually"}(QV||(QV={}));class eU extends Qt{constructor(){super(...arguments),this.contributionsByPhase=new Map,this.contributionsByEditor=new Map,this.contributionsById=new Map,this.instancesById=new Map,this.timingsByPhase=new Map,this.pendingRestoredContributions=new Za,this.whenRestored=this.pendingRestoredContributions.p}static{this.INSTANCE=new eU}static{this.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20}static{this.BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100}get timings(){return this.timingsByPhase}registerWorkbenchContribution2(e,t,i){const n={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&("number"==typeof i&&this.lifecycleService.phase>=i||"string"==typeof e&&ZV(i)&&this.editorPaneService.didInstantiateEditorPane(i.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,n,"number"==typeof i?JV(i):this.lifecycleService.phase):("number"==typeof i&&Tt(this.contributionsByPhase,JV(i),[]).push(n),"string"==typeof e&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,n),ZV(i)&&Tt(this.contributionsByEditor,i.editorTypeId,[]).push(n)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,function(e){switch(e){case 3:return 3;case 4:return 4}}(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);const t=this.instantiationService,i=this.lifecycleService,n=this.logService,s=this.environmentService;if(!(t&&i&&n&&s))throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);const o=this.contributionsById.get(e);if(!o)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);i.phase<3&&n.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,n,s,o,i.phase);const r=this.instancesById.get(e);if(!r)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return r}start(e){const t=this.instantiationService=e.get(s),i=this.lifecycleService=e.get(eV),n=this.logService=e.get(Ed),o=this.environmentService=e.get(Es),r=this.editorPaneService=e.get(YV);for(const e of[1,2,3,4])this.instantiateByPhase(t,i,n,o,e);for(const e of this.contributionsByEditor.keys())r.didInstantiateEditorPane(e)&&this.onEditor(e,t,i,n,o);this._register(r.onWillInstantiateEditorPane((e=>this.onEditor(e.typeId,t,i,n,o))))}onEditor(e,t,i,n,s){const o=this.contributionsByEditor.get(e);if(o){this.contributionsByEditor.delete(e);for(const e of o)this.safeCreateContribution(t,n,s,e,i.phase)}}instantiateByPhase(e,t,i,n,s){t.phase>=s?this.doInstantiateByPhase(e,i,n,s):t.when(s).then((()=>this.doInstantiateByPhase(e,i,n,s)))}async doInstantiateByPhase(e,t,i,n){const s=this.contributionsByPhase.get(n);if(s)switch(this.contributionsByPhase.delete(n),n){case 1:case 2:yz(`code/willCreateWorkbenchContributions/${n}`);for(const o of s)this.safeCreateContribution(e,t,i,o,n);yz(`code/didCreateWorkbenchContributions/${n}`);break;case 3:case 4:4===n&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(s,e,t,i,n)}}doInstantiateWhenIdle(e,t,i,n,s){yz(`code/willCreateWorkbenchContributions/${s}`);let o=0;const r=4===s?3e3:500,a=l=>{for(;o<e.length;){const h=e[o++];if(this.safeCreateContribution(t,i,n,h,s),l.timeRemaining()<1){ja(a,r);break}}o===e.length&&(yz(`code/didCreateWorkbenchContributions/${s}`),3===s&&this.pendingRestoredContributions.complete())};ja(a,r)}safeCreateContribution(e,t,i,n,s){if("string"==typeof n.id&&this.instancesById.has(n.id))return;const o=Date.now();try{"string"==typeof n.id&&yz(`code/willCreateWorkbenchContribution/${s}/${n.id}`);const t=e.createInstance(n.ctor);"string"==typeof n.id&&(this.instancesById.set(n.id,t),this.contributionsById.delete(n.id))}catch(e){t.error(`Unable to create workbench contribution '${n.id??n.ctor.name}'.`,e)}finally{"string"==typeof n.id&&yz(`code/didCreateWorkbenchContribution/${s}/${n.id}`)}if("string"==typeof n.id||!i.isBuilt){const e=Date.now()-o;if(e>(s<3?eU.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:eU.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${n.id??n.ctor.name}' took ${e}ms.`),"string"==typeof n.id){let t=this.timingsByPhase.get(s);t||(t=[],this.timingsByPhase.set(s,t)),t.push([n.id,e])}}}}eU.INSTANCE.registerWorkbenchContribution2.bind(eU.INSTANCE),eU.INSTANCE.getWorkbenchContribution.bind(eU.INSTANCE);Jo.add(XV.Workbench,eU.INSTANCE);const tU=new ui,iU=(tU.event,new ui),nU=(iU.event,new Ba),sU=(new ui,[]);let oU=!1;async function rU(){await nU.wait()}BW.withServices((()=>(oU=!0,Qt.None)));document.body;const aU=Fe.file((lU=new Date,lU.getFullYear()+"-"+String(lU.getMonth()+1).padStart(2,"0")+"-"+String(lU.getDate()).padStart(2,"0")+"T"+String(lU.getHours()).padStart(2,"0")+":"+String(lU.getMinutes()).padStart(2,"0")+":"+String(lU.getSeconds()).padStart(2,"0")+"."+(lU.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z").replace(/-|:|\.\d+Z$/g,"")).with({scheme:"vscode-log"});var lU;const hU="vs/workbench/contrib/files/browser/files.contribution",cU=Jo.as(ur),dU=O?{type:"string",scope:1,enum:[Xz,Qz,Zz],default:Qz,markdownEnumDescriptions:[u(hU,0,"Disable hot exit. A prompt will show when attempting to close a window with editors that have unsaved changes."),u(hU,1,"Hot exit will be triggered when the last window is closed on Windows/Linux or when the `workbench.action.quit` command is triggered (command palette, keybinding, menu). All windows without folders opened will be restored upon next launch. A list of previously opened windows with unsaved files can be accessed via `File > Open Recent > More...`"),u(hU,2,"Hot exit will be triggered when the last window is closed on Windows/Linux or when the `workbench.action.quit` command is triggered (command palette, keybinding, menu), and also for any window with a folder opened regardless of whether it's the last window. All windows without folders opened will be restored upon next launch. A list of previously opened windows with unsaved files can be accessed via `File > Open Recent > More...`")],markdownDescription:u(hU,3,"[Hot Exit](https://aka.ms/vscode-hot-exit) controls whether unsaved files are remembered between sessions, allowing the save prompt when exiting the editor to be skipped.",Qz,Zz)}:{type:"string",scope:1,enum:[Xz,Zz],default:Zz,markdownEnumDescriptions:[u(hU,0,"Disable hot exit. A prompt will show when attempting to close a window with editors that have unsaved changes."),u(hU,4,"Hot exit will be triggered when the browser quits or the window or tab is closed.")],markdownDescription:u(hU,3,"[Hot Exit](https://aka.ms/vscode-hot-exit) controls whether unsaved files are remembered between sessions, allowing the save prompt when exiting the editor to be skipped.",Qz,Zz)};cU.registerConfiguration({id:"files",order:9,title:u(hU,5,"Files"),type:"object",properties:{[eW]:{type:"object",markdownDescription:u(hU,6,"Configure [glob patterns](https://aka.ms/vscode-glob-patterns) for excluding files and folders. For example, the File Explorer decides which files and folders to show or hide based on this setting. Refer to the `#search.exclude#` setting to define search-specific excludes. Refer to the `#explorer.excludeGitIgnore#` setting for ignoring files based on your `.gitignore`."),default:{"**/.git":!0,"**/.svn":!0,"**/.hg":!0,"**/CVS":!0,"**/.DS_Store":!0,"**/Thumbs.db":!0,...F?{"**/*.crswap":!0}:void 0},scope:4,additionalProperties:{anyOf:[{type:"boolean",enum:[!0,!1],enumDescriptions:[u(hU,7,"Enable the pattern."),u(hU,8,"Disable the pattern.")],description:u(hU,9,"The glob pattern to match file paths against. Set to true or false to enable or disable the pattern.")},{type:"object",properties:{when:{type:"string",pattern:"\\w*\\$\\(basename\\)\\w*",default:"$(basename).ext",markdownDescription:u(hU,10,"Additional check on the siblings of a matching file. Use \\$(basename) as variable for the matching file name.")}}}]}},[Jz]:{type:"object",markdownDescription:u(hU,11,'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) of file associations to languages (for example `"*.extension": "html"`). Patterns will match on the absolute path of a file if they contain a path separator and will match on the name of the file otherwise. These have precedence over the default associations of the languages installed.'),additionalProperties:{type:"string"}},"files.encoding":{type:"string",enum:Object.keys(xV),default:"utf8",description:u(hU,12,"The default character set encoding to use when reading and writing files. This setting can also be configured per language."),scope:5,enumDescriptions:Object.keys(xV).map((e=>xV[e].labelLong)),enumItemLabels:Object.keys(xV).map((e=>xV[e].labelLong))},"files.autoGuessEncoding":{type:"boolean",default:!1,markdownDescription:u(hU,13,"When enabled, the editor will attempt to guess the character set encoding when opening files. This setting can also be configured per language. Note, this setting is not respected by text search. Only {0} is respected.","`#files.encoding#`"),scope:5},"files.eol":{type:"string",enum:["\n","\r\n","auto"],enumDescriptions:[u(hU,14,"LF"),u(hU,15,"CRLF"),u(hU,16,"Uses operating system specific end of line character.")],default:"auto",description:u(hU,17,"The default end of line character."),scope:5},"files.enableTrash":{type:"boolean",default:!0,description:u(hU,18,"Moves files/folders to the OS trash (recycle bin on Windows) when deleting. Disabling this will delete files/folders permanently.")},"files.trimTrailingWhitespace":{type:"boolean",default:!1,description:u(hU,19,"When enabled, will trim trailing whitespace when saving a file."),scope:5},"files.trimTrailingWhitespaceInRegexAndStrings":{type:"boolean",default:!0,description:u(hU,20,"When enabled, trailing whitespace will be removed from multiline strings and regexes will be removed on save or when executing 'editor.action.trimTrailingWhitespace'. This can cause whitespace to not be trimmed from lines when there isn't up-to-date token information."),scope:5},"files.insertFinalNewline":{type:"boolean",default:!1,description:u(hU,21,"When enabled, insert a final new line at the end of the file when saving it."),scope:5},"files.trimFinalNewlines":{type:"boolean",default:!1,description:u(hU,22,"When enabled, will trim all new lines after the final new line at the end of the file when saving it."),scope:5},"files.autoSave":{type:"string",enum:[Yz.OFF,Yz.AFTER_DELAY,Yz.ON_FOCUS_CHANGE,Yz.ON_WINDOW_CHANGE],markdownEnumDescriptions:[u(hU,23,"An editor with changes is never automatically saved."),u(hU,24,"An editor with changes is automatically saved after the configured `#files.autoSaveDelay#`."),u(hU,25,"An editor with changes is automatically saved when the editor loses focus."),u(hU,26,"An editor with changes is automatically saved when the window loses focus.")],default:F?Yz.AFTER_DELAY:Yz.OFF,markdownDescription:u(hU,27,"Controls [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors that have unsaved changes.",Yz.OFF,Yz.AFTER_DELAY,Yz.ON_FOCUS_CHANGE,Yz.ON_WINDOW_CHANGE,Yz.AFTER_DELAY),scope:5},"files.autoSaveDelay":{type:"number",default:1e3,minimum:0,markdownDescription:u(hU,28,"Controls the delay in milliseconds after which an editor with unsaved changes is saved automatically. Only applies when `#files.autoSave#` is set to `{0}`.",Yz.AFTER_DELAY),scope:5},"files.autoSaveWorkspaceFilesOnly":{type:"boolean",default:!1,markdownDescription:u(hU,29,"When enabled, will limit [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors to files that are inside the opened workspace. Only applies when `#files.autoSave#` is enabled."),scope:5},"files.autoSaveWhenNoErrors":{type:"boolean",default:!1,markdownDescription:u(hU,30,"When enabled, will limit [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors to files that have no errors reported in them at the time the auto save is triggered. Only applies when `#files.autoSave#` is enabled."),scope:5},"files.watcherExclude":{type:"object",patternProperties:{".*":{type:"boolean"}},default:{"**/.git/objects/**":!0,"**/.git/subtree-cache/**":!0,"**/node_modules/*/**":!0,"**/.hg/store/**":!0},markdownDescription:u(hU,31,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from file watching. Paths can either be relative to the watched folder or absolute. Glob patterns are matched relative from the watched folder. When you experience the file watcher process consuming a lot of CPU, make sure to exclude large folders that are of less interest (such as build output folders)."),scope:4},"files.watcherInclude":{type:"array",items:{type:"string"},default:[],description:u(hU,32,"Configure extra paths to watch for changes inside the workspace. By default, all workspace folders will be watched recursively, except for folders that are symbolic links. You can explicitly add absolute or relative paths to support watching folders that are symbolic links. Relative paths will be resolved to an absolute path using the currently opened workspace."),scope:4},"files.hotExit":dU,"files.defaultLanguage":{type:"string",markdownDescription:u(hU,33,"The default language identifier that is assigned to new files. If configured to `${activeEditorLanguage}`, will use the language identifier of the currently active text editor if any.")},[tW]:{type:"object",patternProperties:{".*":{type:"boolean"}},default:{},markdownDescription:u(hU,34,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to mark as read-only. Glob patterns are always evaluated relative to the path of the workspace folder unless they are absolute paths. You can exclude matching paths via the `#files.readonlyExclude#` setting. Files from readonly file system providers will always be read-only independent of this setting."),scope:4},[iW]:{type:"object",patternProperties:{".*":{type:"boolean"}},default:{},markdownDescription:u(hU,35,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from being marked as read-only if they match as a result of the `#files.readonlyInclude#` setting. Glob patterns are always evaluated relative to the path of the workspace folder unless they are absolute paths. Files from readonly file system providers will always be read-only independent of this setting."),scope:4},[nW]:{type:"boolean",markdownDescription:u(hU,36,"Marks files as read-only when their file permissions indicate as such. This can be overridden via `#files.readonlyInclude#` and `#files.readonlyExclude#` settings."),default:!1},"files.restoreUndoStack":{type:"boolean",description:u(hU,37,"Restore the undo stack when a file is reopened."),default:!0},"files.saveConflictResolution":{type:"string",enum:["askUser","overwriteFileOnDisk"],enumDescriptions:[u(hU,38,"Will refuse to save and ask for resolving the save conflict manually."),u(hU,39,"Will resolve the save conflict by overwriting the file on disk with the changes in the editor.")],description:u(hU,40,"A save conflict can occur when a file is saved to disk that was changed by another program in the meantime. To prevent data loss, the user is asked to compare the changes in the editor with the version on disk. This setting should only be changed if you frequently encounter save conflict errors and may result in data loss if used without caution."),default:"askUser",scope:5},"files.dialog.defaultPath":{type:"string",pattern:"^((\\/|\\\\\\\\|[a-zA-Z]:\\\\).*)?$",patternErrorMessage:u(hU,41,"Default path for file dialogs must be an absolute path (e.g. C:\\\\myFolder or /myFolder)."),description:u(hU,42,"Default path for file dialogs, overriding user's home path. Only used in the absence of a context-specific path, such as most recently opened file or folder."),scope:2},"files.simpleDialog.enable":{type:"boolean",description:u(hU,43,"Enables the simple file dialog for opening and saving files and folders. The simple file dialog replaces the system file dialog when enabled."),default:!1},"files.participants.timeout":{type:"number",default:6e4,markdownDescription:u(hU,44,"Timeout in milliseconds after which file participants for create, rename, and delete are cancelled. Use `0` to disable participants.")}}}),cU.registerConfiguration({...aC,properties:{"editor.formatOnSave":{type:"boolean",description:u(hU,45,"Format a file on save. A formatter must be available, the file must not be saved after delay, and the editor must not be shutting down."),scope:5},"editor.formatOnSaveMode":{type:"string",default:"file",enum:["file","modifications","modificationsIfAvailable"],enumDescriptions:[u(hU,46,"Format the whole file."),u(hU,47,"Format modifications (requires source control)."),u(hU,48,"Will attempt to format modifications only (requires source control). If source control can't be used, then the whole file will be formatted.")],markdownDescription:u(hU,49,"Controls if format on save formats the whole file or only modifications. Only applies when `#editor.formatOnSave#` is enabled."),scope:5}}}),cU.registerConfiguration({...aC,properties:{"editor.formatOnSave":{type:"boolean",description:u(hU,45,"Format a file on save. A formatter must be available, the file must not be saved after delay, and the editor must not be shutting down."),scope:5},"editor.formatOnSaveMode":{type:"string",default:"file",enum:["file","modifications","modificationsIfAvailable"],enumDescriptions:[u(hU,46,"Format the whole file."),u(hU,47,"Format modifications (requires source control)."),u(hU,48,"Will attempt to format modifications only (requires source control). If source control can't be used, then the whole file will be formatted.")],markdownDescription:u(hU,49,"Controls if format on save formats the whole file or only modifications. Only applies when `#editor.formatOnSave#` is enabled."),scope:5}}});class uU{constructor(){this.type=Dz.Directory,this._onDidChange=new ui,this.onDidChange=this._onDidChange.event,this._onDidDelete=new ui,this.onDidDelete=this._onDidDelete.event,this.ctime=Date.now(),this.mtime=Date.now(),this.type=Dz.Directory,this.entries=new Map}async stats(){return{ctime:this.ctime,mtime:this.mtime,size:0,type:Dz.Directory}}delete(){this._onDidDelete.fire()}addChild(e,t){this.entries.set(e,t),this._onDidChange.fire();const i={dispose:()=>{this.deleteChild(e)}};return t.onDidDelete((()=>{i.dispose()})),i}deleteChild(e){return!!this.entries.delete(e)&&(this.mtime=Date.now(),this._onDidChange.fire(),0===this.entries.size&&this.delete(),!0)}getChildren(e){return this.entries.get(e)}read(){return Array.from(this.entries.entries()).map((([e,t])=>[e,t.type]))}}class gU{constructor(e,t){this.uri=e,this.readonly=t,this.type=Dz.File,this._onDidChange=new ui,this.onDidChange=this._onDidChange.event,this._onDidDelete=new ui,this.onDidDelete=this._onDidDelete.event,this.ctime=Date.now(),this.mtime=Date.now(),this.onDidChange((()=>{this.mtime=Date.now()}))}async stats(){return{ctime:this.ctime,mtime:this.mtime,size:await this.getSize(),type:Dz.File,permissions:this.readonly?Lz.Readonly:void 0}}async delete(){if(this.readonly)throw zz("Not allowed",Tz.FileWriteLocked);this._onDidDelete.fire()}}class pU extends gU{constructor(e,t,i){super(e,!0),this.url=t,this.metadata=i}async fetch(){const e=await fetch(this.url,{headers:null!=this.metadata?.mimeType?{Accept:this.metadata.mimeType}:{}});if(200!==e.status)throw new Error(e.statusText);return e}async getSize(){return this.metadata?.size??0}async read(){const e=await this.fetch();return new Uint8Array(await e.arrayBuffer())}async readStream(){return(await this.fetch()).body}write(){throw zz("Not allowed",Tz.FileWriteLocked)}async delete(){throw zz("Not allowed",Tz.FileWriteLocked)}}new TextEncoder;function fU(e){return"fulfilled"===e.status}class mU{constructor(){this.providers=[],this.onDidChangeCapabilities=oi.None,this._onDidChangeFile=new ui,this.onDidChangeFile=this._onDidChangeFile.event,this._onDidChangeOverlays=new ui,this.onDidChangeOverlays=this._onDidChangeOverlays.event,this.capabilities=1042}register(e,t){const i={priority:e,provider:t};this.providers.push(i),this.providers.sort(((e,t)=>t.priority-e.priority));const n=new Xt;return n.add(t.onDidChangeFile((e=>{this._onDidChangeFile.fire(e)}))),n.add({dispose:()=>{const e=this.providers.indexOf(i);e>=0&&(this.providers.splice(e,1),this._onDidChangeOverlays.fire())}}),this._onDidChangeOverlays.fire(),n}get delegates(){return this.providers.map((({provider:e})=>e))}async readFromDelegates(e){if(0===this.delegates.length)throw zz("No delegate",Tz.Unavailable);let t;for(const i of this.delegates)try{return await e(i)}catch(e){if(t??(t=e),e instanceof Bz&&[Tz.NoPermissions,Tz.FileNotFound,Tz.Unavailable].includes(e.code))continue;throw e}throw t}readFromDelegatesSync(e){if(0===this.delegates.length)throw zz("No delegate",Tz.Unavailable);let t;for(const i of this.delegates)try{return e(i)}catch(e){if(t??(t=e),e instanceof Bz&&[Tz.NoPermissions,Tz.FileNotFound,Tz.Unavailable].includes(e.code))continue;throw e}throw t}async writeToDelegates(e){if(0===this.delegates.length)throw zz("No delegate",Tz.Unavailable);for(const t of this.delegates)if(!((2048&t.capabilities)>0))try{return await e(t)}catch(e){if(e instanceof Bz&&[Tz.NoPermissions,Tz.FileNotFound,Tz.Unavailable].includes(e.code))continue;throw e}throw zz("Not allowed",Tz.NoPermissions)}async stat(e){return this.readFromDelegates((async t=>{const i=await t.stat(e),n=(2048&t.capabilities)>0;return{...i,permissions:i.permissions??(n?Lz.Readonly:void 0)}}))}async readFile(e){return this.readFromDelegates((t=>t.readFile(e)))}readFileStream(e,t,i){return this.readFromDelegatesSync((n=>{if(Oz(n))return n.readFileStream(e,t,i);{const t=eo((e=>ho.concat(e.map((e=>ho.wrap(e)))).buffer));return n.readFile(e).then((e=>{t.end(e)}),(e=>{t.error(e)})),t}}))}async readdir(e){const t=await Promise.allSettled(this.delegates.map((async t=>t.readdir(e))));if(!t.some(fU))throw t[0].reason;return Object.entries(Object.fromEntries(t.filter(fU).map((e=>e.value)).flat()))}watch(e,t){const i=new Xt;for(const n of this.delegates)i.add(n.watch(e,t));return i}async writeFile(e,t,i){await this.writeToDelegates((async n=>{let s;try{s=await n.stat(e)}catch(e){}if(null!=s&&((s.permissions??0)&Lz.Readonly)>0)throw zz("Not allowed",Tz.NoPermissions);return n.writeFile(e,t,i)}))}async mkdir(e){await this.writeToDelegates((t=>t.mkdir(e)))}async delete(e,t){await this.writeToDelegates((i=>i.delete(e,t)))}async rename(e,t,i){await this.writeToDelegates((n=>n.rename(e,t,i)))}}const bU=new mU;bU.register(0,new class extends kH{async writeFile(e,t,i){return await _H(hs,this,hs.dirname(e)),super.writeFile(e,t,i)}});const vU=new class extends Qt{constructor(e){super(),this.memoryFdCounter=0,this.fdMemory=new Map,this.onDidChangeCapabilities=oi.None,this._onDidChangeFile=new ui,this.onDidChangeFile=this._onDidChangeFile.event,this._bufferedChanges=[],this.rootByAuthority=new Map,this.capabilities=1042,e&&(this.capabilities|=2048)}async open(e){const t=await this.readFile(e),i=this.memoryFdCounter++;return this.fdMemory.set(i,t),i}async close(e){this.fdMemory.delete(e)}async read(e,t,i,n,s){const o=this.fdMemory.get(e);if(null==o)throw zz("No file with that descriptor open",Tz.Unavailable);const r=ho.wrap(o).slice(t,t+s);return i.set(r.buffer,n),r.byteLength}write(e,t,i,n,s){const o=this.fdMemory.get(e);if(null==o)throw zz("No file with that descriptor open",Tz.Unavailable);const r=ho.wrap(i).slice(n,n+s);return o.set(r.buffer,t),Promise.resolve(r.byteLength)}_lookupRoot(e){let t=this.rootByAuthority.get(e);return null==t&&(t=new uU,this.rootByAuthority.set(e,t)),t}_lookup(e,t){const i=e.path.split("/");let n=this._lookupRoot(e.authority);for(const e of i){if(0===e.length)continue;let i;if(n instanceof uU&&(i=n.getChildren(e)),null==i){if(t)return;throw zz("file not found",Tz.FileNotFound)}n=i}return n}_lookupAsDirectory(e,t){const i=this._lookup(e,t);if(i instanceof uU)return i;throw zz("file not a directory",Tz.FileNotADirectory)}_lookupAsFile(e,t){const i=this._lookup(e,t);if(null!=i&&i.type===Dz.File)return i;throw zz("file is a directory",Tz.FileIsADirectory)}registerFile(e){const t=e.uri.path.split("/");let i=this._lookupRoot(e.uri.authority),n=e.uri.with({path:"/"});for(const e of t.slice(0,-1)){if(""===e)continue;n=hs.joinPath(n,e);let t=i.getChildren(e);if(null==t){t=this.mkdirSync(n)}if(!(t instanceof uU))throw new Error(`file '${n.toString()}' is not a directory`);i=t}const s=t[t.length-1];if(null!=i.getChildren(s))throw new Error(`file '${n.toString()}' already exists`);const o=new Xt;return o.add(Yt((()=>{this._fireSoon({resource:e.uri,type:2})}))),o.add(e.onDidDelete((()=>{o.dispose()}))),o.add(e.onDidChange((()=>{this._fireSoon({resource:e.uri,type:0})}))),o.add(i.addChild(s,e)),this._fireSoon({resource:e.uri,type:1}),o}async stat(e){return this._lookup(e,!1).stats()}readdirSync(e){return this._lookupAsDirectory(e,!1).read()}async readdir(e){return this.readdirSync(e)}async readFile(e){const t=this._lookupAsFile(e,!1);return await t.read()}readFileStream(e,t,i){const n=this._lookupAsFile(e,!1),s=eo((e=>ho.concat(e.map((e=>ho.wrap(e)))).buffer),{highWaterMark:10});return(async()=>{try{if(null==n.readStream||"number"==typeof t.length||"number"==typeof t.position){let e=await n.read();"number"==typeof t.position&&(e=e.slice(t.position)),"number"==typeof t.length&&(e=e.slice(0,t.length)),s.end(e)}else{const e=(await n.readStream()).getReader();let t=await e.read();for(;!t.done&&!i.isCancellationRequested&&(await s.write(t.value),!i.isCancellationRequested);)t=await e.read();s.end(void 0)}}catch(e){s.error(zz(e,Tz.Unknown)),s.end()}})(),s}watch(){return Qt.None}async writeFile(e,t,i){const n=this._lookup(e,!0);if(null!=n&&!(n instanceof gU))throw zz("file is directory",Tz.FileIsADirectory);if(null==n)throw zz("file not found",Tz.FileNotFound);if(!i.overwrite)throw zz("file exists already",Tz.FileExists);await n.write(t)}async rename(){throw zz("Not allowed",Tz.NoPermissions)}mkdirSync(e){if(null!=this._lookup(e,!0))throw zz("file exists already",Tz.FileExists);const t=gs(e),i=fs(e),n=this._lookupAsDirectory(i,!1),s=new uU,o=new Xt;return o.add(s.onDidDelete((()=>{o.dispose(),this._fireSoon({resource:e,type:2})}))),o.add(s.onDidChange((()=>{this._fireSoon({resource:e,type:0})}))),n.addChild(t,s),this._fireSoon({type:1,resource:e}),s}async mkdir(){throw zz("Can' create a directory",Tz.NoPermissions)}deleteSync(e){const t=this._lookup(e,!0);if(null==t)throw zz("Not found",Tz.FileNotFound);if(t.type===Dz.Directory)throw zz("Can't delete a directory",Tz.NoPermissions);t.delete()}async delete(e){this.deleteSync(e)}_fireSoon(...e){this._bufferedChanges.push(...e),null!=this._fireSoonHandle&&(clearTimeout(this._fireSoonHandle),this._fireSoonHandle=void 0),this._fireSoonHandle=window.setTimeout((()=>{this._onDidChangeFile.fire(this._bufferedChanges),this._bufferedChanges.length=0}),5)}}(!0),wU=new kH;var _U;wU.mkdir(Fe.from({scheme:vn.vscodeUserData,path:"/User/"})),function(e){e.extensionFile="extension-file"}(_U||(_U={}));const yU={[_U.extensionFile]:vU,[aU.scheme]:new kH,[vn.vscodeUserData]:wU,[vn.tmp]:new kH,[vn.file]:bU};let CU=class extends yH{constructor(e,t){super(e);for(const[e,i]of Object.entries(yU)){let n=this.registerProvider(e,i);i instanceof mU&&i.onDidChangeOverlays((()=>{n.dispose(),n=this.registerProvider(e,i)})),i instanceof FH&&this._register(i.onReportError((e=>t.publicLog2("indexedDBFileSystemProviderError",e))))}}};CU=Bs([zs(1,nS)],CU);const SU=new class extends Mu{constructor(e=Iu){super(),this.buffer=[],this._logger=void 0,this.setLevel(e),this._register(this.onDidChangeLogLevel((e=>{this._logger?.setLevel(e)})))}set logger(e){this._logger=e;for(const{level:t,message:i}of this.buffer)Tu(e,t,i);this.buffer=[]}log(e,t){this._logger?Tu(this._logger,e,t):this.getLevel()<=e&&this.buffer.push({level:e,message:t})}dispose(){this._logger?.dispose(),super.dispose()}flush(){this._logger?.flush()}};var kU;kU=async e=>{SU.logger=e.get(Ed)},sU.push(kU);var xU;!function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"}(xU||(xU={}));const EU=["W","X","Y","Z","a","b","c","d","e","f"],DU=new RegExp(`^[${EU.join("")}]+`);function LU(e){if(e.scheme!==vn.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(DU,""),7),n=function(e){let t=0,i=0,n=0;const s=new Uint8Array(Math.floor(e.length/4*3)),o=e=>{switch(i){case 3:s[n++]=t|e,i=0;break;case 2:s[n++]=t|e>>>2,t=e<<6,i=3;break;case 1:s[n++]=t|e>>>4,t=e<<4,i=2;break;default:t=e<<2,i=1}};for(let t=0;t<e.length;t++){const i=e.charCodeAt(t);if(i>=65&&i<=90)o(i-65);else if(i>=97&&i<=122)o(i-97+26);else if(i>=48&&i<=57)o(i-48+52);else if(43===i||45===i)o(62);else{if(47!==i&&95!==i){if(61===i)break;throw new SyntaxError(`Unexpected base64 character ${e[t]}`)}o(63)}}const r=n;for(;i>0;)o(0);return ho.wrap(s).slice(0,r)}(e.fragment.substring(t+1)).toString();return isNaN(i)?void 0:{handle:i,notebook:e.with({scheme:n,fragment:null})}}function IU(e,t){const i=t.toString(7),n=`${i.length<EU.length?EU[i.length-1]:"z"}${i}s${function({buffer:e},t=!0,i=!1){const n=i?yo:_o;let s="";const o=e.byteLength%3;let r=0;for(;r<e.byteLength-o;r+=3){const t=e[r+0],i=e[r+1],o=e[r+2];s+=n[t>>>2],s+=n[63&(t<<4|i>>>4)],s+=n[63&(i<<2|o>>>6)],s+=n[63&o]}if(1===o){const i=e[r+0];s+=n[i>>>2],s+=n[i<<4&63],t&&(s+="==")}else if(2===o){const i=e[r+0],o=e[r+1];s+=n[i>>>2],s+=n[63&(i<<4|o>>>4)],s+=n[o<<2&63],t&&(s+="=")}return s}(ho.fromString(e.scheme),!0,!0)}`;return e.with({scheme:vn.vscodeNotebookCell,fragment:n})}var TU;!function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"}(TU||(TU={}));er.latex,er.markdown,er.text,er.latex,er.markdown,er.text,new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]);var NU,AU,MU,RU,OU;!function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"}(NU||(NU={})),function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"}(AU||(AU={})),function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"}(MU||(MU={})),function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"}(RU||(RU={})),function(e){e.scheme=vn.vscodeNotebookCell,e.generate=function(e,t){return IU(e,t)},e.parse=function(e){return LU(e)},e.generateCellOutputUri=function(e,t){return e.with({scheme:vn.vscodeNotebookCellOutput,fragment:`op${t??""},${e.scheme!==vn.file?e.scheme:""}`})},e.parseCellOutputUri=function(e){if(e.scheme!==vn.vscodeNotebookCellOutput)return;const t=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(e.fragment);if(!t)return;const i=t[1]&&""!==t[1]?t[1]:void 0,n=t[2];return{outputId:i,notebook:e.with({scheme:n||vn.file,fragment:null})}},e.generateCellPropertyUri=function(t,i,n){return e.generate(t,i).with({scheme:n})},e.parseCellPropertyUri=function(t,i){if(t.scheme===i)return e.parse(t.with({scheme:e.scheme}))}}(OU||(OU={}));new Cu("notebookEditorCursorAtBoundary","none"),new Cu("notebookEditorCursorAtLineBoundary","none");var FU;!function(e){e.default="default",e.option="option"}(FU||(FU={}));class PU{static{this._prefix="notebook/"}static create(e){return`${PU._prefix}${e}`}static parse(e){if(e.startsWith(PU._prefix))return e.substring(PU._prefix.length)}}new TextDecoder;const BU=`${String.fromCharCode(27)}[A`;BU.split("").map((e=>e.charCodeAt(0)));"\b".charCodeAt(0),"\r".charCodeAt(0);var zU,WU,HU,VU,UU,KU,qU,$U,jU,GU,YU,XU,QU,ZU,JU,eK,tK,iK;function nK(e){const t={apply:function(...t){if(0===t.length)return Reflect.construct(e,[]);{const i=1===t.length?[]:t[1];return Reflect.construct(e,i,t[0].constructor)}},call:function(...t){if(0===t.length)return Reflect.construct(e,[]);{const[i,...n]=t;return Reflect.construct(e,n,i.constructor)}}};return Object.assign(e,t)}!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(iK||(iK={}));let sK=zU=class{static from(...e){let t=e;return new zU((function(){if(t){for(const e of t)e&&"function"==typeof e.dispose&&e.dispose();t=void 0}}))}#e;constructor(e){this.#e=e}dispose(){"function"==typeof this.#e&&(this.#e(),this.#e=void 0)}};sK=zU=Bs([nK],sK);let oK=WU=class{static Min(...e){if(0===e.length)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const n=e[i];n.isBefore(t)&&(t=n)}return t}static Max(...e){if(0===e.length)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const n=e[i];n.isAfter(t)&&(t=n)}return t}static isPosition(e){if(!e)return!1;if(e instanceof WU)return!0;const{line:t,character:i}=e;return"number"==typeof t&&"number"==typeof i}static of(e){if(e instanceof WU)return e;if(this.isPosition(e))return new WU(e.line,e.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}constructor(e,t){if(e<0)throw et("line must be non-negative");if(t<0)throw et("character must be non-negative");this._line=e,this._character=t}isBefore(e){return this._line<e._line||!(e._line<this._line)&&this._character<e._character}isBeforeOrEqual(e){return this._line<e._line||!(e._line<this._line)&&this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,t=0){if(null===e||null===t)throw et();let i;return void 0===e?i=0:"number"==typeof e?i=e:(i="number"==typeof e.lineDelta?e.lineDelta:0,t="number"==typeof e.characterDelta?e.characterDelta:0),0===i&&0===t?this:new WU(this.line+i,this.character+t)}with(e,t=this.character){if(null===e||null===t)throw et();let i;return void 0===e?i=this.line:"number"==typeof e?i=e:(i="number"==typeof e.line?e.line:this.line,t="number"==typeof e.character?e.character:this.character),i===this.line&&t===this.character?this:new WU(i,t)}toJSON(){return{line:this.line,character:this.character}}};oK=WU=Bs([nK],oK);let rK=HU=class{static isRange(e){return e instanceof HU||!!e&&(oK.isPosition(e.start)&&oK.isPosition(e.end))}static of(e){if(e instanceof HU)return e;if(this.isRange(e))return new HU(e.start,e.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}constructor(e,t,i,n){let s,o;if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof n?(s=new oK(e,t),o=new oK(i,n)):oK.isPosition(e)&&oK.isPosition(t)&&(s=oK.of(e),o=oK.of(t)),!s||!o)throw new Error("Invalid arguments");s.isBefore(o)?(this._start=s,this._end=o):(this._start=o,this._end=s)}contains(e){return HU.isRange(e)?this.contains(e.start)&&this.contains(e.end):!!oK.isPosition(e)&&(!oK.of(e).isBefore(this._start)&&!this._end.isBefore(e))}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){const t=oK.Max(e.start,this._start),i=oK.Min(e.end,this._end);if(!t.isAfter(i))return new HU(t,i)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;const t=oK.Min(e.start,this._start),i=oK.Max(e.end,this.end);return new HU(t,i)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,t=this.end){if(null===e||null===t)throw et();let i;return e?oK.isPosition(e)?i=e:(i=e.start||this.start,t=e.end||this.end):i=this.start,i.isEqual(this._start)&&t.isEqual(this.end)?this:new HU(i,t)}toJSON(){return[this.start,this.end]}};rK=HU=Bs([nK],rK);let aK=VU=class extends rK{static isSelection(e){return e instanceof VU||!!e&&(rK.isRange(e)&&oK.isPosition(e.anchor)&&oK.isPosition(e.active)&&"boolean"==typeof e.isReversed)}get anchor(){return this._anchor}get active(){return this._active}constructor(e,t,i,n){let s,o;if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof n?(s=new oK(e,t),o=new oK(i,n)):oK.isPosition(e)&&oK.isPosition(t)&&(s=oK.of(e),o=oK.of(t)),!s||!o)throw new Error("Invalid arguments");super(s,o),this._anchor=s,this._active=o}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}};aK=VU=Bs([nK],aK);const lK=e=>{if("string"!=typeof e||0===e.length||!/^[0-9A-Za-z_\-]+$/.test(e))throw et("connectionToken")};class hK extends Error{static NotAvailable(e,t){return new hK(e,xU.NotAvailable,t)}static TemporarilyNotAvailable(e){return new hK(e,xU.TemporarilyNotAvailable)}constructor(e,t=xU.Unknown,i){super(e),this._message=e,this._code=t,this._detail=i,Object.setPrototypeOf(this,hK.prototype)}}var cK,dK;!function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(cK||(cK={})),function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"}(dK||(dK={}));let uK=UU=class{static isTextEdit(e){return e instanceof UU||!!e&&(rK.isRange(e)&&"string"==typeof e.newText)}static replace(e,t){return new UU(e,t)}static insert(e,t){return UU.replace(new rK(e,e),t)}static delete(e){return UU.replace(e,"")}static setEndOfLine(e){const t=new UU(new rK(new oK(0,0),new oK(0,0)),"");return t.newEol=e,t}get range(){return this._range}set range(e){if(e&&!rK.isRange(e))throw et("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&"string"!=typeof e)throw et("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&"number"!=typeof e)throw et("newEol");this._newEol=e}constructor(e,t){this._range=e,this._newText=t}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};uK=UU=Bs([nK],uK);let gK=KU=class{static isNotebookCellEdit(e){return e instanceof KU||!!e&&(N$.isNotebookRange(e)&&Array.isArray(e.newCells))}static replaceCells(e,t){return new KU(e,t)}static insertCells(e,t){return new KU(new N$(e,e),t)}static deleteCells(e){return new KU(e,[])}static updateCellMetadata(e,t){const i=new KU(new N$(e,e),[]);return i.newCellMetadata=t,i}static updateNotebookMetadata(e){const t=new KU(new N$(0,0),[]);return t.newNotebookMetadata=e,t}constructor(e,t){this.range=e,this.newCells=t}};gK=KU=Bs([nK],gK);class pK{static isSnippetTextEdit(e){return e instanceof pK||!!e&&(rK.isRange(e.range)&&mK.isSnippetString(e.snippet))}static replace(e,t){return new pK(e,t)}static insert(e,t){return pK.replace(new rK(e,e),t)}constructor(e,t){this.range=e,this.snippet=t}}let fK=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(e,t,i,n){this._edits.push({_type:1,from:e,to:t,options:i,metadata:n})}createFile(e,t,i){this._edits.push({_type:1,from:void 0,to:e,options:t,metadata:i})}deleteFile(e,t,i){this._edits.push({_type:1,from:e,to:void 0,options:t,metadata:i})}replaceNotebookMetadata(e,t,i){this._edits.push({_type:3,metadata:i,uri:e,edit:{editType:5,metadata:t},notebookMetadata:t})}replaceNotebookCells(e,t,i,n){const s=t.start,o=t.end;(s!==o||i.length>0)&&this._edits.push({_type:5,uri:e,index:s,count:o-s,cells:i,metadata:n})}replaceNotebookCellMetadata(e,t,i,n){this._edits.push({_type:3,metadata:n,uri:e,edit:{editType:3,index:t,metadata:i}})}replace(e,t,i,n){this._edits.push({_type:2,uri:e,edit:new uK(t,i),metadata:n})}insert(e,t,i,n){this.replace(e,new rK(t,t),i,n)}delete(e,t,i){this.replace(e,t,"",i)}has(e){return this._edits.some((t=>2===t._type&&t.uri.toString()===e.toString()))}set(e,t){if(t)for(const i of t){if(!i)continue;let t,n;Array.isArray(i)?(t=i[0],n=i[1]):t=i,gK.isNotebookCellEdit(t)?t.newCellMetadata?this.replaceNotebookCellMetadata(e,t.range.start,t.newCellMetadata,n):t.newNotebookMetadata?this.replaceNotebookMetadata(e,t.newNotebookMetadata,n):this.replaceNotebookCells(e,t.range,t.newCells,n):pK.isSnippetTextEdit(t)?this._edits.push({_type:6,uri:e,range:t.range,edit:t.snippet,metadata:n}):this._edits.push({_type:2,uri:e,edit:t,metadata:n})}else{for(let t=0;t<this._edits.length;t++){const i=this._edits[t];switch(i._type){case 2:case 6:case 3:case 5:i.uri.toString()===e.toString()&&(this._edits[t]=void 0)}}!function(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}(this._edits)}}get(e){const t=[];for(const i of this._edits)2===i._type&&i.uri.toString()===e.toString()&&t.push(i.edit);return t}entries(){const e=new At;for(const t of this._edits)if(2===t._type){let i=e.get(t.uri);i||(i=[t.uri,[]],e.set(t.uri,i)),i[1].push(t.edit)}return[...e.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};fK=Bs([nK],fK);let mK=qU=class{static isSnippetString(e){return e instanceof qU||!!e&&"string"==typeof e.value}static _escape(e){return e.replace(/\$|}|\\/g,"\\$&")}constructor(e){this._tabstop=1,this.value=e||""}appendText(e){return this.value+=qU._escape(e),this}appendTabstop(e=this._tabstop++){return this.value+="$",this.value+=e,this}appendPlaceholder(e,t=this._tabstop++){if("function"==typeof e){const t=new qU;t._tabstop=this._tabstop,e(t),this._tabstop=t._tabstop,e=t.value}else e=qU._escape(e);return this.value+="${",this.value+=t,this.value+=":",this.value+=e,this.value+="}",this}appendChoice(e,t=this._tabstop++){const i=e.map((e=>e.replaceAll(/[|\\,]/g,"\\$&"))).join(",");return this.value+="${",this.value+=t,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(e,t){if("function"==typeof t){const e=new qU;e._tabstop=this._tabstop,t(e),this._tabstop=e._tabstop,t=e.value}else"string"==typeof t&&(t=t.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=e,t&&(this.value+=":",this.value+=t),this.value+="}",this}};var bK,vK;mK=qU=Bs([nK],mK),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(bK||(bK={})),function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"}(vK||(vK={}));let wK=$U=class{static isLocation(e){return e instanceof $U||!!e&&(rK.isRange(e.range)&&Fe.isUri(e.uri))}constructor(e,t){if(this.uri=e,t)if(rK.isRange(t))this.range=rK.of(t);else{if(!oK.isPosition(t))throw new Error("Illegal argument");this.range=new rK(t,t)}else;}toJSON(){return{uri:this.uri,range:this.range}}};wK=$U=Bs([nK],wK);let _K=class{static is(e){return!!e&&("string"==typeof e.message&&e.location&&rK.isRange(e.location.range)&&Fe.isUri(e.location.uri))}constructor(e,t){this.location=e,this.message=t}static isEqual(e,t){return e===t||!(!e||!t)&&(e.message===t.message&&e.location.range.isEqual(t.location.range)&&e.location.uri.toString()===t.location.uri.toString())}};_K=Bs([nK],_K);let yK=class{constructor(e,t,i=vK.Error){if(!rK.isRange(e))throw new TypeError("range must be set");if(!t)throw new TypeError("message must be set");this.range=e,this.message=t,this.severity=i}toJSON(){return{severity:vK[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(e,t){return e===t||!(!e||!t)&&(e.message===t.message&&e.severity===t.severity&&e.code===t.code&&e.severity===t.severity&&e.source===t.source&&e.range.isEqual(t.range)&&at(e.tags,t.tags)&&at(e.relatedInformation,t.relatedInformation,_K.isEqual))}};yK=Bs([nK],yK);let CK=class{constructor(e,t){if(!e)throw new Error("Illegal argument, contents must be defined");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}};CK=Bs([nK],CK);let SK=class extends CK{constructor(e,t,i,n){super(e,t),this.canIncreaseHover=i,this.canDecreaseHover=n}};var kK,xK;SK=Bs([nK],SK),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(kK||(kK={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(xK||(xK={}));let EK=class{constructor(e,t=xK.Text){this.range=e,this.kind=t}toJSON(){return{range:this.range,kind:xK[this.kind]}}};EK=Bs([nK],EK);let DK=class{constructor(e,t){this.uri=e,this.highlights=t}toJSON(){return{uri:this.uri,highlights:this.highlights.map((e=>e.toJSON()))}}};var LK,IK;DK=Bs([nK],DK),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(LK||(LK={})),function(e){e[e.Deprecated=1]="Deprecated"}(IK||(IK={}));let TK=jU=class{static validate(e){if(!e.name)throw new Error("name must not be falsy")}constructor(e,t,i,n,s){this.name=e,this.kind=t,this.containerName=s,"string"==typeof i&&(this.containerName=i),n instanceof wK?this.location=n:i instanceof rK&&(this.location=new wK(n,i)),jU.validate(this)}toJSON(){return{name:this.name,kind:LK[this.kind],location:this.location,containerName:this.containerName}}};TK=jU=Bs([nK],TK);let NK=GU=class{static validate(e){if(!e.name)throw new Error("name must not be falsy");if(!e.range.contains(e.selectionRange))throw new Error("selectionRange must be contained in fullRange");e.children?.forEach(GU.validate)}constructor(e,t,i,n,s){this.name=e,this.detail=t,this.kind=i,this.range=n,this.selectionRange=s,this.children=[],GU.validate(this)}};var AK;NK=GU=Bs([nK],NK),function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"}(AK||(AK={}));let MK=class{constructor(e,t){this.title=e,this.kind=t}};MK=Bs([nK],MK);let RK=class{static{YU=this}static{this.sep="."}constructor(e){this.value=e}append(e){return new YU(this.value?this.value+YU.sep+e:e)}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+YU.sep)}};RK=YU=Bs([nK],RK),RK.Empty=new RK(""),RK.QuickFix=RK.Empty.append("quickfix"),RK.Refactor=RK.Empty.append("refactor"),RK.RefactorExtract=RK.Refactor.append("extract"),RK.RefactorInline=RK.Refactor.append("inline"),RK.RefactorMove=RK.Refactor.append("move"),RK.RefactorRewrite=RK.Refactor.append("rewrite"),RK.Source=RK.Empty.append("source"),RK.SourceOrganizeImports=RK.Source.append("organizeImports"),RK.SourceFixAll=RK.Source.append("fixAll"),RK.Notebook=RK.Empty.append("notebook");let OK=class{constructor(e,t){if(this.range=e,this.parent=t,t&&!t.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};OK=Bs([nK],OK);var FK;!function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(FK||(FK={}));let PK=class{constructor(e,t){this.range=e,this.command=t}get isResolved(){return!!this.command}};PK=Bs([nK],PK);let BK=XU=class{#t;static isMarkdownString(e){return e instanceof XU||e&&e.appendCodeblock&&e.appendMarkdown&&e.appendText&&void 0!==e.value}constructor(e,t=!1){this.#t=new Gv(e,{supportThemeIcons:t})}get value(){return this.#t.value}set value(e){this.#t.value=e}get isTrusted(){return this.#t.isTrusted}set isTrusted(e){this.#t.isTrusted=e}get supportThemeIcons(){return this.#t.supportThemeIcons}set supportThemeIcons(e){this.#t.supportThemeIcons=e}get supportHtml(){return this.#t.supportHtml}set supportHtml(e){this.#t.supportHtml=e}get baseUri(){return this.#t.baseUri}set baseUri(e){this.#t.baseUri=e}appendText(e){return this.#t.appendText(e),this}appendMarkdown(e){return this.#t.appendMarkdown(e),this}appendCodeblock(e,t){return this.#t.appendCodeblock(t??"",e),this}};BK=XU=Bs([nK],BK);let zK=class{constructor(e,t){this.label=e,this.documentation=t}};zK=Bs([nK],zK);let WK=class{constructor(e,t){this.label=e,this.documentation=t,this.parameters=[]}};WK=Bs([nK],WK);let HK=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};var VK,UK;HK=Bs([nK],HK),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(VK||(VK={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(UK||(UK={}));let KK=class{constructor(e){this.value=e}};KK=Bs([nK],KK);let qK=class{constructor(e,t,i){this.position=e,this.label=t,this.kind=i}};var $K,jK,GK;qK=Bs([nK],qK),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}($K||($K={})),function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"}(jK||(jK={})),function(e){e[e.Deprecated=1]="Deprecated"}(GK||(GK={}));let YK=class{constructor(e,t){this.label=e,this.kind=t}toJSON(){return{label:this.label,kind:this.kind&&jK[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};YK=Bs([nK],YK);let XK=class{constructor(e=[],t=!1){this.items=e,this.isIncomplete=t}};XK=Bs([nK],XK);let QK=class{constructor(e,t,i){this.insertText=e,this.range=t,this.command=i}};QK=Bs([nK],QK);let ZK=class{constructor(e){this.commands=void 0,this.suppressSuggestions=void 0,this.items=e}};var JK,eq,tq,iq,nq,sq,oq,rq,aq,lq;ZK=Bs([nK],ZK),function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"}(JK||(JK={})),function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"}(eq||(eq={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(tq||(tq={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"}(iq||(iq={})),function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"}(nq||(nq={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(sq||(sq={})),function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"}(oq||(oq={})),function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"}(rq||(rq={})),function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"}(aq||(aq={})),function(e){e.fromValue=function(t){switch(t){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}}(oq||(oq={})),function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"}(lq||(lq={})),function(e){e.toString=function(t){switch(t){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}}(lq||(lq={}));let hq=class{constructor(e,t){if(t&&!Fe.isUri(t))throw et("target");if(!rK.isRange(e)||e.isEmpty)throw et("range");this.range=e,this.target=t}};hq=Bs([nK],hq);let cq=class{constructor(e,t,i,n){this.red=e,this.green=t,this.blue=i,this.alpha=n}};cq=Bs([nK],cq);let dq=class{constructor(e,t){if(t&&!(t instanceof cq))throw et("color");if(!rK.isRange(e)||e.isEmpty)throw et("range");this.range=e,this.color=t}};dq=Bs([nK],dq);let uq=class{constructor(e){if(!e||"string"!=typeof e)throw et("label");this.label=e}};var gq,pq,fq,mq,bq,vq;uq=Bs([nK],uq),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"}(gq||(gq={})),function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"}(pq||(pq={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(fq||(fq={}));!function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"}(mq||(mq={}));!function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"}(bq||(bq={})),function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"}(vq||(vq={}));let wq=class{static{QU=this}static{this.Clean=new QU("clean","Clean")}static{this.Build=new QU("build","Build")}static{this.Rebuild=new QU("rebuild","Rebuild")}static{this.Test=new QU("test","Test")}static from(e){switch(e){case"clean":return QU.Clean;case"build":return QU.Build;case"rebuild":return QU.Rebuild;case"test":return QU.Test;default:return}}constructor(e,t){if(this.label=t,"string"!=typeof e)throw et("name");if("string"!=typeof t)throw et("name");this._id=e}get id(){return this._id}};function _q(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}wq=QU=Bs([nK],wq);let yq=class{constructor(e,t,i){if("string"!=typeof e)throw et("process");this._args=[],this._process=e,void 0!==t&&(Array.isArray(t)?(this._args=t,this._options=i):this._options=t)}get process(){return this._process}set process(e){if("string"!=typeof e)throw et("process");this._process=e}get args(){return this._args}set args(e){Array.isArray(e)||(e=[]),this._args=e}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("process"),void 0!==this._process&&e.push(this._process),this._args&&this._args.length>0)for(const t of this._args)e.push(t);return _q(e)}};yq=Bs([nK],yq);let Cq=class{constructor(e,t,i){if(this._args=[],Array.isArray(t)){if(!e)throw et("command can't be undefined or null");if("string"!=typeof e&&"string"!=typeof e.value)throw et("command");this._command=e,this._args=t,this._options=i}else{if("string"!=typeof e)throw et("commandLine");this._commandLine=e,this._options=t}}get commandLine(){return this._commandLine}set commandLine(e){if("string"!=typeof e)throw et("commandLine");this._commandLine=e}get command(){return this._command?this._command:""}set command(e){if("string"!=typeof e&&"string"!=typeof e.value)throw et("command");this._command=e}get args(){return this._args}set args(e){this._args=e||[]}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("shell"),void 0!==this._commandLine&&e.push(this._commandLine),void 0!==this._command&&e.push("string"==typeof this._command?this._command:this._command.value),this._args&&this._args.length>0)for(const t of this._args)e.push("string"==typeof t?t:t.value);return _q(e)}};var Sq,kq;Cq=Bs([nK],Cq),function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"}(Sq||(Sq={})),function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"}(kq||(kq={}));class xq{constructor(e){this._callback=e}computeId(){return"customExecution"+hW()}set callback(e){this._callback=e}get callback(){return this._callback}}let Eq=class{static{ZU=this}static{this.ExtensionCallbackType="customExecution"}static{this.ProcessType="process"}static{this.ShellType="shell"}static{this.EmptyType="$empty"}constructor(e,t,i,n,s,o){let r;this.__deprecated=!1,this._definition=this.definition=e,"string"==typeof t?(this._name=this.name=t,this._source=this.source=i,this.execution=n,r=s,this.__deprecated=!0):(t===kq.Global||kq.Workspace,this.target=t,this._name=this.name=i,this._source=this.source=n,this.execution=s,r=o),"string"==typeof r?(this._problemMatchers=[r],this._hasDefinedMatchers=!0):Array.isArray(r)?(this._problemMatchers=r,this._hasDefinedMatchers=!0):(this._problemMatchers=[],this._hasDefinedMatchers=!1),this._isBackground=!1,this._presentationOptions=Object.create(null),this._runOptions=Object.create(null)}get _id(){return this.__id}set _id(e){this.__id=e}get _deprecated(){return this.__deprecated}clear(){void 0!==this.__id&&(this.__id=void 0,this._scope=void 0,this.computeDefinitionBasedOnExecution())}computeDefinitionBasedOnExecution(){this._execution instanceof yq?this._definition={type:ZU.ProcessType,id:this._execution.computeId()}:this._execution instanceof Cq?this._definition={type:ZU.ShellType,id:this._execution.computeId()}:this._execution instanceof xq?this._definition={type:ZU.ExtensionCallbackType,id:this._execution.computeId()}:this._definition={type:ZU.EmptyType,id:hW()}}get definition(){return this._definition}set definition(e){if(null==e)throw et("Kind can't be undefined or null");this.clear(),this._definition=e}get scope(){return this._scope}set target(e){this.clear(),this._scope=e}get name(){return this._name}set name(e){if("string"!=typeof e)throw et("name");this.clear(),this._name=e}get execution(){return this._execution}set execution(e){null===e&&(e=void 0),this.clear(),this._execution=e;const t=this._definition.type;ZU.EmptyType!==t&&ZU.ProcessType!==t&&ZU.ShellType!==t&&ZU.ExtensionCallbackType!==t||this.computeDefinitionBasedOnExecution()}get problemMatchers(){return this._problemMatchers}set problemMatchers(e){if(!Array.isArray(e))return this.clear(),this._problemMatchers=[],void(this._hasDefinedMatchers=!1);this.clear(),this._problemMatchers=e,this._hasDefinedMatchers=!0}get hasDefinedMatchers(){return this._hasDefinedMatchers}get isBackground(){return this._isBackground}set isBackground(e){!0!==e&&!1!==e&&(e=!1),this.clear(),this._isBackground=e}get source(){return this._source}set source(e){if("string"!=typeof e||0===e.length)throw et("source must be a string of length > 0");this.clear(),this._source=e}get group(){return this._group}set group(e){null===e&&(e=void 0),this.clear(),this._group=e}get detail(){return this._detail}set detail(e){null===e&&(e=void 0),this._detail=e}get presentationOptions(){return this._presentationOptions}set presentationOptions(e){null==e&&(e=Object.create(null)),this.clear(),this._presentationOptions=e}get runOptions(){return this._runOptions}set runOptions(e){null==e&&(e=Object.create(null)),this.clear(),this._runOptions=e}};var Dq,Lq;Eq=ZU=Bs([nK],Eq),function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"}(Dq||(Dq={})),function(e){e.isViewBadge=function(e){const t=e;return Nn(t.value)?!(t.tooltip&&!Ln(t.tooltip))||(console.log("INVALID view badge, invalid tooltip",t.tooltip),!1):(console.log("INVALID view badge, invalid value",t.value),!1)}}(Lq||(Lq={}));let Iq=JU=class{static isTreeItem(e,t){const i=e;if(void 0!==i.checkboxState){const e=Nn(i.checkboxState)?i.checkboxState:In(i.checkboxState)&&Nn(i.checkboxState.state)?i.checkboxState.state:void 0,t=!Nn(i.checkboxState)&&In(i.checkboxState)?i.checkboxState.tooltip:void 0;if(void 0===e||e!==Nq.Checked&&e!==Nq.Unchecked||void 0!==t&&!Ln(t))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(e instanceof JU)return!0;if(void 0!==i.label&&!Ln(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(void 0!==i.id&&!Ln(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(!(void 0===i.iconPath||Ln(i.iconPath)||Fe.isUri(i.iconPath)||i.iconPath&&Ln(i.iconPath.id))){const e=i.iconPath;if(!e||!Ln(e.light)&&!Fe.isUri(e.light)&&!Ln(e.dark)&&!Fe.isUri(e.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return void 0===i.description||Ln(i.description)||"boolean"==typeof i.description?void 0===i.resourceUri||Fe.isUri(i.resourceUri)?void 0===i.tooltip||Ln(i.tooltip)||i.tooltip instanceof BK?void 0===i.command||i.command.command?void 0!==i.collapsibleState&&i.collapsibleState<Tq.None&&i.collapsibleState>Tq.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):void 0===i.contextValue||Ln(i.contextValue)?!(void 0!==i.accessibilityInformation&&!i.accessibilityInformation?.label)||(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):(console.log("INVALID tree item, invalid command",i.command),!1):(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):(console.log("INVALID tree item, invalid description",i.description),!1)}constructor(e,t=Tq.None){this.collapsibleState=t,Fe.isUri(e)?this.resourceUri=e:this.label=e}};var Tq,Nq;Iq=JU=Bs([nK],Iq),function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"}(Tq||(Tq={})),function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"}(Nq||(Nq={}));let Aq=class{async asString(){return"string"==typeof this.value?this.value:JSON.stringify(this.value)}asFile(){}constructor(e){this.value=e}};Aq=Bs([nK],Aq);let Mq=class{#i=new Map;constructor(e){for(const[t,i]of e??[]){const e=this.#i.get(this.#n(t));e?e.push(i):this.#i.set(this.#n(t),[i])}}get(e){return this.#i.get(this.#n(e))?.[0]}set(e,t){this.#i.set(this.#n(e),[t])}forEach(e,t){for(const[i,n]of this.#i)for(const s of n)e.call(t,s,i,this)}*[Symbol.iterator](){for(const[e,t]of this.#i)for(const i of t)yield[e,i]}#n(e){return e.toLowerCase()}};Mq=Bs([nK],Mq);let Rq=class{constructor(e,t,i){this.insertText=e,this.title=t,this.kind=i}};var Oq;Rq=Bs([nK],Rq),function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"}(Oq||(Oq={}));class Fq{static{this.sep="."}constructor(e){this.value=e}append(...e){return new Fq((this.value?[this.value,...e]:e).join(Fq.sep))}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+Fq.sep)}}Fq.Empty=new Fq("");let Pq=class{constructor(e,t){this.id=e,this.color=t}static isThemeIcon(e){return"string"==typeof e.id||(console.log("INVALID ThemeIcon, invalid id",e.id),!1)}};Pq=Bs([nK],Pq),Pq.File=new Pq("file"),Pq.Folder=new Pq("folder");let Bq=class{constructor(e){this.id=e}};var zq;Bq=Bs([nK],Bq),function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"}(zq||(zq={}));let Wq=class{get base(){return this._base}set base(e){this._base=e,this._baseUri=Fe.file(e)}get baseUri(){return this._baseUri}set baseUri(e){this._baseUri=e,this._base=e.fsPath}constructor(e,t){if("string"!=typeof e&&(!e||!Fe.isUri(e)&&!Fe.isUri(e.uri)))throw et("base");if("string"!=typeof t)throw et("pattern");"string"==typeof e?this.baseUri=Fe.file(e):Fe.isUri(e)?this.baseUri=e:this.baseUri=e.uri,this.pattern=t}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Wq=Bs([nK],Wq);const Hq=new WeakMap;let Vq=class{constructor(e,t,i,n,s){this.enabled="boolean"!=typeof e||e,"string"==typeof t&&(this.condition=t),"string"==typeof i&&(this.hitCondition=i),"string"==typeof n&&(this.logMessage=n),"string"==typeof s&&(this.mode=s)}get id(){return this._id||(this._id=Hq.get(this)??hW()),this._id}};Vq=Bs([nK],Vq);let Uq=class extends Vq{constructor(e,t,i,n,s,o){if(super(t,i,n,s,o),null===e)throw et("location");this.location=e}};Uq=Bs([nK],Uq);let Kq=class extends Vq{constructor(e,t,i,n,s,o){super(t,i,n,s,o),this.functionName=e}};Kq=Bs([nK],Kq);let qq=class extends Vq{constructor(e,t,i,n,s,o,r,a){if(super(n,s,o,r,a),!t)throw et("dataId");this.label=e,this.dataId=t,this.canPersist=i}};qq=Bs([nK],qq);let $q=class{constructor(e,t,i){this.command=e,this.args=t||[],this.options=i}};$q=Bs([nK],$q);let jq=class{constructor(e,t){this.port=e,this.host=t}};jq=Bs([nK],jq);let Gq=class{constructor(e){this.path=e}};Gq=Bs([nK],Gq);let Yq=class{constructor(e){this.implementation=e}};Yq=Bs([nK],Yq);let Xq=class{constructor(e,t){this.range=e,this.expression=t}};var Qq;Xq=Bs([nK],Xq),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(Qq||(Qq={}));let Zq=class{constructor(e,t){this.range=e,this.text=t}};Zq=Bs([nK],Zq);let Jq=class{constructor(e,t,i=!0){this.range=e,this.variableName=t,this.caseSensitiveLookup=i}};Jq=Bs([nK],Jq);let e$=class{constructor(e,t){this.range=e,this.expression=t}};e$=Bs([nK],e$);let t$=class{constructor(e,t){this.frameId=e,this.stoppedLocation=t}};var i$,n$,s$;t$=Bs([nK],t$),function(e){e[e.AIGenerated=1]="AIGenerated"}(i$||(i$={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(n$||(n$={}));!function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"}(s$||(s$={}));let o$=eK=class extends Error{static FileExists(e){return new eK(e,Tz.FileExists,eK.FileExists)}static FileNotFound(e){return new eK(e,Tz.FileNotFound,eK.FileNotFound)}static FileNotADirectory(e){return new eK(e,Tz.FileNotADirectory,eK.FileNotADirectory)}static FileIsADirectory(e){return new eK(e,Tz.FileIsADirectory,eK.FileIsADirectory)}static NoPermissions(e){return new eK(e,Tz.NoPermissions,eK.NoPermissions)}static Unavailable(e){return new eK(e,Tz.Unavailable,eK.Unavailable)}constructor(e,t=Tz.Unknown,i){super(Fe.isUri(e)?e.toString(!0):e),this.code=i?.name??"Unknown",Hz(this,t),Object.setPrototypeOf(this,eK.prototype),"function"==typeof Error.captureStackTrace&&"function"==typeof i&&Error.captureStackTrace(this,i)}};o$=eK=Bs([nK],o$);let r$=class{constructor(e,t,i){this.start=e,this.end=t,this.kind=i}};var a$,l$,h$,c$,d$,u$,g$;r$=Bs([nK],r$),function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"}(a$||(a$={})),function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(l$||(l$={})),function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"}(h$||(h$={})),function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"}(c$||(c$={})),function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"}(d$||(d$={})),function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"}(u$||(u$={}));function p$(e){return void 0===e||(t=e,Array.isArray(t)&&t.every((e=>Ln(e))));var t}class f${constructor(e){if(this._prevLine=0,this._prevChar=0,this._dataIsSortedAndDeltaEncoded=!0,this._data=[],this._dataLen=0,this._tokenTypeStrToInt=new Map,this._tokenModifierStrToInt=new Map,this._hasLegend=!1,e){this._hasLegend=!0;for(let t=0,i=e.tokenTypes.length;t<i;t++)this._tokenTypeStrToInt.set(e.tokenTypes[t],t);for(let t=0,i=e.tokenModifiers.length;t<i;t++)this._tokenModifierStrToInt.set(e.tokenModifiers[t],t)}}push(e,t,i,n,s){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof n&&("number"==typeof s||void 0===s))return void 0===s&&(s=0),this._pushEncoded(e,t,i,n,s);if(rK.isRange(e)&&"string"==typeof t&&p$(i))return this._push(e,t,i);throw et()}_push(e,t,i){if(!this._hasLegend)throw new Error("Legend must be provided in constructor");if(e.start.line!==e.end.line)throw new Error("`range` cannot span multiple lines");if(!this._tokenTypeStrToInt.has(t))throw new Error("`tokenType` is not in the provided legend");const n=e.start.line,s=e.start.character,o=e.end.character-e.start.character,r=this._tokenTypeStrToInt.get(t);let a=0;if(i)for(const e of i){if(!this._tokenModifierStrToInt.has(e))throw new Error("`tokenModifier` is not in the provided legend");a|=1<<this._tokenModifierStrToInt.get(e)>>>0}this._pushEncoded(n,s,o,r,a)}_pushEncoded(e,t,i,n,s){if(this._dataIsSortedAndDeltaEncoded&&(e<this._prevLine||e===this._prevLine&&t<this._prevChar)){this._dataIsSortedAndDeltaEncoded=!1;const e=this._data.length/5|0;let t=0,i=0;for(let n=0;n<e;n++){let e=this._data[5*n],s=this._data[5*n+1];0===e?(e=t,s+=i):e+=t,this._data[5*n]=e,this._data[5*n+1]=s,t=e,i=s}}let o=e,r=t;this._dataIsSortedAndDeltaEncoded&&this._dataLen>0&&(o-=this._prevLine,0===o&&(r-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=n,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=t}static _sortAndDeltaEncode(e){const t=[],i=e.length/5|0;for(let e=0;e<i;e++)t[e]=e;t.sort(((t,i)=>{const n=e[5*t],s=e[5*i];if(n===s){return e[5*t+1]-e[5*i+1]}return n-s}));const n=new Uint32Array(e.length);let s=0,o=0;for(let r=0;r<i;r++){const i=5*t[r],a=e[i+0],l=e[i+1],h=e[i+2],c=e[i+3],d=e[i+4],u=a-s,g=0===u?l-o:l,p=5*r;n[p+0]=u,n[p+1]=g,n[p+2]=h,n[p+3]=c,n[p+4]=d,s=a,o=l}return n}build(e){return this._dataIsSortedAndDeltaEncoded?new m$(new Uint32Array(this._data),e):new m$(f$._sortAndDeltaEncode(this._data),e)}}class m${constructor(e,t){this.resultId=t,this.data=e}}!function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"}(g$||(g$={}));let b$=class{static{this.Back={iconPath:new Pq("arrow-left")}}constructor(){}};var v$,w$,_$;b$=Bs([nK],b$),function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"}(v$||(v$={})),function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(w$||(w$={})),function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"}(_$||(_$={}));class y${static validate(e){if("string"==typeof e.badge){let t=Ji(e.badge,0);if(t<e.badge.length&&(t+=Ji(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Pq.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}}let C$=class{constructor(e){this.kind=e}};var S$,k$,x$,E$,D$,L$,I$,T$;C$=Bs([nK],C$),function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"}(S$||(S$={}));class N${static isNotebookRange(e){return e instanceof N$||!!e&&("number"==typeof e.start&&"number"==typeof e.end)}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}constructor(e,t){if(e<0)throw et("start must be positive");if(t<0)throw et("end must be positive");e<=t?(this._start=e,this._end=t):(this._start=t,this._end=e)}with(e){let t=this._start,i=this._end;return void 0!==e.start&&(t=e.start),void 0!==e.end&&(i=e.end),t===this._start&&i===this._end?this:new N$(t,i)}}class A${static validate(e){if("number"!=typeof e.kind)throw new Error("NotebookCellData MUST have 'kind' property");if("string"!=typeof e.value)throw new Error("NotebookCellData MUST have 'value' property");if("string"!=typeof e.languageId)throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(e){return Array.isArray(e)&&e.every((e=>A$.isNotebookCellData(e)))}static isNotebookCellData(e){return!0}constructor(e,t,i,n,s,o,r){this.kind=e,this.value=t,this.languageId=i,this.mime=n,this.outputs=s??[],this.metadata=o,this.executionSummary=r,A$.validate(this)}}class M${static isNotebookCellOutputItem(e){return e instanceof M$||!!e&&("string"==typeof e.mime&&e.data instanceof Uint8Array)}static error(e){const t={name:e.name,message:e.message,stack:e.stack};return M$.json(t,"application/vnd.code.notebook.error")}static stdout(e){return M$.text(e,"application/vnd.code.notebook.stdout")}static stderr(e){return M$.text(e,"application/vnd.code.notebook.stderr")}static bytes(e,t="application/octet-stream"){return new M$(e,t)}static#s=new TextEncoder;static text(e,t=er.text){const i=M$.#s.encode(String(e));return new M$(i,t)}static json(e,t="text/x-json"){const i=JSON.stringify(e,void 0,"\t");return M$.text(i,t)}constructor(e,t){this.data=e,this.mime=t;const i=ir(t,!0);if(!i)throw new Error(`INVALID mime type: ${t}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}}class R${static isNotebookCellOutput(e){return e instanceof R$||!(!e||"object"!=typeof e)&&("string"==typeof e.id&&Array.isArray(e.items))}static ensureUniqueMimeTypes(e,t=!1){const i=new Set,n=new Set;for(let s=0;s<e.length;s++){const o=e[s],r=ir(o.mime);i.has(r)&&!["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(r)?(n.add(s),t&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)):i.add(r)}return 0===n.size?e:e.filter(((e,t)=>!n.has(t)))}constructor(e,t,i){this.items=R$.ensureUniqueMimeTypes(e,!0),"string"==typeof t?(this.id=t,this.metadata=i):(this.id=hW(),this.metadata=t??i)}}!function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"}(k$||(k$={})),function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"}(x$||(x$={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(E$||(E$={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(D$||(D$={}));!function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"}(L$||(L$={})),function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"}(I$||(I$={}));!function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"}(T$||(T$={}));let O$=class{constructor(e,t){this.label=e,this.timestamp=t}};var F$,P$,B$,z$,W$;O$=Bs([nK],O$),function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"}(F$||(F$={})),function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"}(P$||(P$={})),function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"}(B$||(B$={}));!function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"}(z$||(z$={})),function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"}(W$||(W$={}));let H$=class{constructor(e=void 0,t=void 0,i=void 0,n=!1,s=!0){this.include=e,this.exclude=t,this.profile=i,this.continuous=n,this.preserveFocus=s}};H$=Bs([nK],H$);let V$=tK=class{static diff(e,t,i){const n=new tK(e);return n.expectedOutput=t,n.actualOutput=i,n}constructor(e){this.message=e}};V$=tK=Bs([nK],V$);let U$=class{constructor(e){this.id=e}};U$=Bs([nK],U$);class K${constructor(e,t){this.covered=e,this.total=t,function(e){if(!e)return;if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}(this)}}class q${static fromDetails(e,t){const i=new K$(0,0),n=new K$(0,0),s=new K$(0,0);for(const e of t)if("branches"in e){i.total+=1,i.covered+=e.executed?1:0;for(const t of e.branches)n.total+=1,n.covered+=t.executed?1:0}else s.total+=1,s.covered+=e.executed?1:0;const o=new q$(e,i,n.total>0?n:void 0,s.total>0?s:void 0);return o.detailedCoverage=t,o}constructor(e,t,i,n){this.uri=e,this.statementCoverage=t,this.branchCoverage=i,this.declarationCoverage=n}}var $$,j$,G$,Y$,X$,Q$,Z$,J$,ej,tj,ij,nj,sj;!function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"}($$||($$={})),function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"}(j$||(j$={})),function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"}(G$||(G$={}));!function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"}(Y$||(Y$={})),function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"}(X$||(X$={})),function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"}(Q$||(Q$={}));!function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"}(Z$||(Z$={})),function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"}(J$||(J$={}));!function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"}(ej||(ej={}));Error;!function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"}(tj||(tj={})),function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"}(ij||(ij={})),function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"}(nj||(nj={}));!function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(sj||(sj={}));class oj{static{this.count=0}constructor(e){this._proxyIdentifierBrand=void 0,this.sid=e,this.nid=++oj.count}}const rj=[];function aj(e){const t=new oj(e);return rj[t.nid]=t,t}var lj,hj,cj;!function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(lj||(lj={})),function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"}(hj||(hj={})),function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output"}(cj||(cj={}));aj("MainThreadAuthentication"),aj("MainThreadBulkEdits"),aj("MainThreadLanguageModels"),aj("MainThreadChatAgents2"),aj("MainThreadChatVariables"),aj("MainThreadClipboard"),aj("MainThreadCommands"),aj("MainThreadComments"),aj("MainThreadConfiguration"),aj("MainThreadConsole"),aj("MainThreadDebugService"),aj("MainThreadDecorations"),aj("MainThreadDiagnostics"),aj("MainThreadDiaglogs"),aj("MainThreadDocuments"),aj("MainThreadDocumentContentProviders"),aj("MainThreadTextEditors"),aj("MainThreadEditorInsets"),aj("MainThreadEditorTabs"),aj("MainThreadErrors"),aj("MainThreadTreeViews"),aj("MainThreadDownloadService"),aj("MainThreadLanguageFeatures"),aj("MainThreadLanguages"),aj("MainThreadLogger"),aj("MainThreadMessageService"),aj("MainThreadOutputService"),aj("MainThreadProgress"),aj("MainThreadQuickDiff"),aj("MainThreadQuickOpen"),aj("MainThreadStatusBar"),aj("MainThreadSecretState"),aj("MainThreadStorage"),aj("MainThreadSpeechProvider"),aj("MainThreadTelemetry"),aj("MainThreadTerminalService"),aj("MainThreadTerminalShellIntegration"),aj("MainThreadWebviews"),aj("MainThreadWebviewPanels"),aj("MainThreadWebviewViews"),aj("MainThreadCustomEditors"),aj("MainThreadUrls"),aj("MainThreadUriOpeners"),aj("MainThreadProfileContentHandlers"),aj("MainThreadWorkspace"),aj("MainThreadFileSystem"),aj("MainThreadFileSystemEventService"),aj("MainThreadExtensionService"),aj("MainThreadSCM"),aj("MainThreadSearch"),aj("MainThreadShare"),aj("MainThreadTask"),aj("MainThreadWindow"),aj("MainThreadLabelService"),aj("MainThreadNotebook"),aj("MainThreadNotebookDocumentsShape"),aj("MainThreadNotebookEditorsShape"),aj("MainThreadNotebookKernels"),aj("MainThreadNotebookRenderers"),aj("MainThreadInteractive"),aj("MainThreadInlineChatShape"),aj("MainThreadTheming"),aj("MainThreadTunnelService"),aj("MainThreadManagedSockets"),aj("MainThreadTimeline"),aj("MainThreadTesting"),aj("MainThreadLocalizationShape"),aj("MainThreadAiRelatedInformation"),aj("MainThreadAiEmbeddingVector"),aj("ExtHostCommands"),aj("ExtHostConfiguration"),aj("ExtHostDiagnostics"),aj("ExtHostDebugService"),aj("ExtHostDecorations"),aj("ExtHostDocumentsAndEditors"),aj("ExtHostDocuments"),aj("ExtHostDocumentContentProviders"),aj("ExtHostDocumentSaveParticipant"),aj("ExtHostEditors"),aj("ExtHostTreeViews"),aj("ExtHostFileSystem"),aj("ExtHostFileSystemInfo"),aj("ExtHostFileSystemEventService"),aj("ExtHostLanguages"),aj("ExtHostLanguageFeatures"),aj("ExtHostQuickOpen"),aj("ExtHostQuickDiff"),aj("ExtHostStatusBar"),aj("ExtHostShare"),aj("ExtHostExtensionService"),aj("ExtHostLogLevelServiceShape"),aj("ExtHostTerminalService"),aj("ExtHostTerminalShellIntegration"),aj("ExtHostSCM"),aj("ExtHostSearch"),aj("ExtHostTask"),aj("ExtHostWorkspace"),aj("ExtHostWindow"),aj("ExtHostWebviews"),aj("ExtHostWebviewPanels"),aj("ExtHostCustomEditors"),aj("ExtHostWebviewViews"),aj("ExtHostEditorInsets"),aj("ExtHostEditorTabs"),aj("ExtHostProgress"),aj("ExtHostComments"),aj("ExtHostSecretState"),aj("ExtHostStorage"),aj("ExtHostUrls"),aj("ExtHostUriOpeners"),aj("ExtHostProfileContentHandlers"),aj("ExtHostOutputService"),aj("ExtHostLabelService"),aj("ExtHostNotebook"),aj("ExtHostNotebookDocuments"),aj("ExtHostNotebookEditors"),aj("ExtHostNotebookKernels"),aj("ExtHostNotebookRenderers"),aj("ExtHostNotebookDocumentSaveParticipant"),aj("ExtHostInteractive"),aj("ExtHostInlineChatShape"),aj("ExtHostChatAgents"),aj("ExtHostChatVariables"),aj("ExtHostChatProvider"),aj("ExtHostSpeech"),aj("ExtHostAiRelatedInformation"),aj("ExtHostAiEmbeddingVector"),aj("ExtHostTheming"),aj("ExtHostTunnelService"),aj("ExtHostManagedSockets"),aj("ExtHostAuthentication"),aj("ExtHostTimeline"),aj("ExtHostTesting"),aj("ExtHostTelemetry"),aj("ExtHostLocalization");const dj="vs/workbench/contrib/debug/common/debug";new Cu("debugType",void 0,{type:"string",description:u(dj,0,"Debug type of the active debug session. For example 'python'.")}),new Cu("debugConfigurationType",void 0,{type:"string",description:u(dj,1,"Debug type of the selected launch configuration. For example 'python'.")}),new Cu("debugState","inactive",{type:"string",description:u(dj,2,"State that the focused debug session is in. One of the following: 'inactive', 'initializing', 'stopped' or 'running'.")}),new Cu("debugUx","default",{type:"string",description:u(dj,3,"Debug UX state. When there are no debug configurations it is 'simple', otherwise 'default'. Used to decide when to show welcome views in the debug viewlet.")}),new Cu("hasDebugged",!1,{type:"boolean",description:u(dj,4,"True when a debug session has been started at least once, false otherwise.")}),new Cu("inDebugMode",!1,{type:"boolean",description:u(dj,5,"True when debugging, false otherwise.")}),new Cu("inDebugRepl",!1,{type:"boolean",description:u(dj,6,"True when focus is in the debug console, false otherwise.")}),new Cu("breakpointWidgetVisible",!1,{type:"boolean",description:u(dj,7,"True when breakpoint editor zone widget is visible, false otherwise.")}),new Cu("inBreakpointWidget",!1,{type:"boolean",description:u(dj,8,"True when focus is in the breakpoint editor zone widget, false otherwise.")}),new Cu("breakpointsFocused",!0,{type:"boolean",description:u(dj,9,"True when the BREAKPOINTS view is focused, false otherwise.")}),new Cu("watchExpressionsFocused",!0,{type:"boolean",description:u(dj,10,"True when the WATCH view is focused, false otherwsie.")}),new Cu("watchExpressionsExist",!1,{type:"boolean",description:u(dj,11,"True when at least one watch expression exists, false otherwise.")}),new Cu("variablesFocused",!0,{type:"boolean",description:u(dj,12,"True when the VARIABLES views is focused, false otherwsie")}),new Cu("expressionSelected",!1,{type:"boolean",description:u(dj,13,"True when an expression input box is open in either the WATCH or the VARIABLES view, false otherwise.")}),new Cu("breakpointInputFocused",!1,{type:"boolean",description:u(dj,14,"True when the input box has focus in the BREAKPOINTS view.")}),new Cu("callStackItemType",void 0,{type:"string",description:u(dj,15,"Represents the item type of the focused element in the CALL STACK view. For example: 'session', 'thread', 'stackFrame'")}),new Cu("callStackSessionIsAttach",!1,{type:"boolean",description:u(dj,16,"True when the session in the CALL STACK view is attach, false otherwise. Used internally for inline menus in the CALL STACK view.")}),new Cu("callStackItemStopped",!1,{type:"boolean",description:u(dj,17,"True when the focused item in the CALL STACK is stopped. Used internaly for inline menus in the CALL STACK view.")}),new Cu("callStackSessionHasOneThread",!1,{type:"boolean",description:u(dj,18,"True when the focused session in the CALL STACK view has exactly one thread. Used internally for inline menus in the CALL STACK view.")}),new Cu("watchItemType",void 0,{type:"string",description:u(dj,19,"Represents the item type of the focused element in the WATCH view. For example: 'expression', 'variable'")}),new Cu("canViewMemory",void 0,{type:"boolean",description:u(dj,20,"Indicates whether the item in the view has an associated memory refrence.")}),new Cu("breakpointItemType",void 0,{type:"string",description:u(dj,21,"Represents the item type of the focused element in the BREAKPOINTS view. For example: 'breakpoint', 'exceptionBreakppint', 'functionBreakpoint', 'dataBreakpoint'")}),new Cu("breakpointItemBytes",void 0,{type:"boolean",description:u(dj,22,"Whether the breakpoint item is a data breakpoint on a byte range.")}),new Cu("breakpointHasModes",!1,{type:"boolean",description:u(dj,23,"Whether the breakpoint has multiple modes it can switch to.")}),new Cu("breakpointSupportsCondition",!1,{type:"boolean",description:u(dj,24,"True when the focused breakpoint supports conditions.")}),new Cu("loadedScriptsSupported",!1,{type:"boolean",description:u(dj,25,"True when the focused sessions supports the LOADED SCRIPTS view")}),new Cu("loadedScriptsItemType",void 0,{type:"string",description:u(dj,26,"Represents the item type of the focused element in the LOADED SCRIPTS view.")}),new Cu("focusedSessionIsAttach",!1,{type:"boolean",description:u(dj,27,"True when the focused session is 'attach'.")}),new Cu("focusedSessionIsNoDebug",!1,{type:"boolean",description:u(dj,28,"True when the focused session is run without debugging.")}),new Cu("stepBackSupported",!1,{type:"boolean",description:u(dj,29,"True when the focused session supports 'stepBack' requests.")}),new Cu("restartFrameSupported",!1,{type:"boolean",description:u(dj,30,"True when the focused session supports 'restartFrame' requests.")}),new Cu("stackFrameSupportsRestart",!1,{type:"boolean",description:u(dj,31,"True when the focused stack frame suppots 'restartFrame'.")}),new Cu("jumpToCursorSupported",!1,{type:"boolean",description:u(dj,32,"True when the focused session supports 'jumpToCursor' request.")}),new Cu("stepIntoTargetsSupported",!1,{type:"boolean",description:u(dj,33,"True when the focused session supports 'stepIntoTargets' request.")}),new Cu("breakpointsExist",!1,{type:"boolean",description:u(dj,34,"True when at least one breakpoint exists.")}),new Cu("debuggersAvailable",!1,{type:"boolean",description:u(dj,35,"True when there is at least one debug extensions active.")}),new Cu("debugExtensionAvailable",!0,{type:"boolean",description:u(dj,36,"True when there is at least one debug extension installed and enabled.")}),new Cu("debugProtocolVariableMenuContext",void 0,{type:"string",description:u(dj,37,"Represents the context the debug adapter sets on the focused variable in the VARIABLES view.")}),new Cu("debugSetVariableSupported",!1,{type:"boolean",description:u(dj,38,"True when the focused session supports 'setVariable' request.")}),new Cu("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:u(dj,39,"True when the focused session supports 'getBreakpointInfo' request on an address.")}),new Cu("debugSetExpressionSupported",!1,{type:"boolean",description:u(dj,40,"True when the focused session supports 'setExpression' request.")}),new Cu("breakWhenValueChangesSupported",!1,{type:"boolean",description:u(dj,41,"True when the focused session supports to break when value changes.")}),new Cu("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:u(dj,42,"True when the focused breakpoint supports to break when value is accessed.")}),new Cu("breakWhenValueIsReadSupported",!1,{type:"boolean",description:u(dj,43,"True when the focused breakpoint supports to break when value is read.")}),new Cu("terminateDebuggeeSupported",!1,{type:"boolean",description:u(dj,44,"True when the focused session supports the terminate debuggee capability.")}),new Cu("suspendDebuggeeSupported",!1,{type:"boolean",description:u(dj,45,"True when the focused session supports the suspend debuggee capability.")}),new Cu("variableEvaluateNamePresent",!1,{type:"boolean",description:u(dj,46,"True when the focused variable has an 'evalauteName' field set.")}),new Cu("variableIsReadonly",!1,{type:"boolean",description:u(dj,47,"True when the focused variable is read-only.")}),new Cu("variableValue",!1,{type:"string",description:u(dj,48,"Value of the variable, present for debug visualization clauses.")}),new Cu("variableType",!1,{type:"string",description:u(dj,49,"Type of the variable, present for debug visualization clauses.")}),new Cu("variableInterfaces",!1,{type:"array",description:u(dj,50,"Any interfaces or contracts that the variable satisfies, present for debug visualization clauses.")}),new Cu("variableName",!1,{type:"string",description:u(dj,51,"Name of the variable, present for debug visualization clauses.")}),new Cu("variableLanguage",!1,{type:"string",description:u(dj,52,"Language of the variable source, present for debug visualization clauses.")}),new Cu("variableExtensionId",!1,{type:"string",description:u(dj,53,"Extension ID of the variable source, present for debug visualization clauses.")}),new Cu("exceptionWidgetVisible",!1,{type:"boolean",description:u(dj,54,"True when the exception widget is visible.")}),new Cu("multiSessionRepl",!1,{type:"boolean",description:u(dj,55,"True when there is more than 1 debug console.")}),new Cu("multiSessionDebug",!1,{type:"boolean",description:u(dj,56,"True when there is more than 1 active debug session.")}),new Cu("disassembleRequestSupported",!1,{type:"boolean",description:u(dj,57,"True when the focused sessions supports disassemble request.")}),new Cu("disassemblyViewFocus",!1,{type:"boolean",description:u(dj,58,"True when the Disassembly View is focused.")}),new Cu("languageSupportsDisassembleRequest",!1,{type:"boolean",description:u(dj,59,"True when the language in the current editor supports disassemble request.")}),new Cu("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:u(dj,60,"True when the focused stack frame has instruction pointer reference.")}),u(dj,62,"Controls when the internal Debug Console should open.");var uj,gj,pj,fj,mj,bj;let vj;function wj(e){return new Proxy({},{get(t,i){if(null==vj)throw new Error("Default api is not ready yet, do not forget to import 'vscode/localExtensionHost' and wait for services initialization");return vj[e][i]}})}!function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"}(uj||(uj={})),function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"}(gj||(gj={})),function(e){e.deserialize=e=>({id:e.id,name:e.name,iconPath:e.iconPath&&{light:Fe.revive(e.iconPath.light),dark:Fe.revive(e.iconPath.dark)},iconClass:e.iconClass,visualization:e.visualization}),e.serialize=e=>e}(pj||(pj={})),function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"}(fj||(fj={})),function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"}(mj||(mj={})),function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"}(bj||(bj={}));const _j={version:"1.89.1",tasks:wj("tasks"),notebooks:wj("notebooks"),scm:wj("scm"),comments:wj("comments"),authentication:wj("authentication"),tests:wj("tests"),extensions:wj("extensions"),debug:wj("debug"),env:wj("env"),commands:wj("commands"),window:wj("window"),workspace:wj("workspace"),languages:wj("languages"),l10n:wj("l10n"),interactive:wj("interactive"),ai:wj("ai"),chat:wj("chat"),speech:wj("speech"),Breakpoint:Vq,TerminalOutputAnchor:iK,ChatResultFeedbackKind:J$,ChatVariableLevel:Q$,ChatCompletionItem:class{constructor(e,t){this.label=e,this.values=t}},CallHierarchyIncomingCall:class{constructor(e,t){this.fromRanges=t,this.from=e}},CallHierarchyItem:class{constructor(e,t,i,n,s,o){this.kind=e,this.name=t,this.detail=i,this.uri=n,this.range=s,this.selectionRange=o}},CallHierarchyOutgoingCall:class{constructor(e,t){this.fromRanges=t,this.to=e}},CancellationError:Ze,CancellationTokenSource:ki,CandidatePortSource:cj,CodeAction:MK,CodeActionKind:RK,CodeActionTriggerKind:AK,CodeLens:PK,Color:cq,ColorInformation:dq,ColorPresentation:uq,ColorThemeKind:S$,CommentMode:h$,CommentState:c$,CommentThreadCollapsibleState:l$,CommentThreadState:d$,CompletionItem:YK,CompletionItemKind:jK,CompletionItemTag:GK,CompletionList:XK,CompletionTriggerKind:$K,ConfigurationTarget:zq,CustomExecution:xq,DebugAdapterExecutable:$q,DebugAdapterInlineImplementation:Yq,DebugAdapterNamedPipeServer:Gq,DebugAdapterServer:jq,DebugConfigurationProviderTriggerKind:uj,DebugConsoleMode:g$,DebugVisualization:class{constructor(e){this.name=e}},DecorationRangeBehavior:aq,Diagnostic:yK,DiagnosticRelatedInformation:_K,DiagnosticSeverity:vK,DiagnosticTag:bK,Disposable:sK,DocumentHighlight:EK,DocumentHighlightKind:xK,MultiDocumentHighlight:DK,DocumentLink:hq,DocumentSymbol:NK,EndOfLine:cK,EnvironmentVariableMutatorType:dK,EvaluatableExpression:Xq,InlineValueText:Zq,InlineValueVariableLookup:Jq,InlineValueEvaluatableExpression:e$,InlineCompletionTriggerKind:Qq,EventEmitter:ui,ExtensionKind:_$,ExtensionMode:F$,ExternalUriOpenerPriority:$$,FileChangeType:s$,FileDecoration:y$,FileDecoration2:y$,FileSystemError:o$,FileType:Dz,FilePermission:Lz,FoldingRange:r$,FoldingRangeKind:a$,FunctionBreakpoint:Kq,InlineCompletionItem:QK,InlineCompletionList:ZK,Hover:CK,IndentAction:$s,Location:wK,MarkdownString:BK,OverviewRulerLane:Nc,ParameterInformation:zK,PortAutoForwardAction:G$,Position:oK,ProcessExecution:yq,ProgressLocation:Dq,QuickInputButtons:b$,Range:rK,RelativePattern:Wq,Selection:aK,SelectionRange:OK,SemanticTokens:m$,SemanticTokensBuilder:f$,SemanticTokensEdit:class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},SemanticTokensEdits:class{constructor(e,t){this.resultId=t,this.edits=e}},SemanticTokensLegend:class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}},ShellExecution:Cq,ShellQuoting:Sq,SignatureHelp:HK,SignatureHelpTriggerKind:VK,SignatureInformation:WK,SnippetString:mK,SourceBreakpoint:Uq,StandardTokenType:B$,StatusBarAlignment:tq,SymbolInformation:TK,SymbolKind:LK,SymbolTag:IK,Task:Eq,TaskGroup:wq,TaskPanelKind:vq,TaskRevealKind:bq,TaskScope:kq,TerminalLink:class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,"number"!=typeof e||e<0)throw et("startIndex");if("number"!=typeof t||t<1)throw et("length");if(void 0!==i&&"string"!=typeof i)throw et("tooltip")}},TerminalQuickFixTerminalCommand:class{constructor(e){this.terminalCommand=e}},TerminalQuickFixOpener:class{constructor(e){this.uri=e}},TerminalLocation:mq,TerminalProfile:class{constructor(e){if(this.options=e,"object"!=typeof e)throw et("options")}},TerminalExitReason:pq,TextDocumentSaveReason:nq,TextEdit:uK,SnippetTextEdit:pK,TextEditorCursorStyle:tb,TextEditorLineNumbersStyle:iq,TextEditorRevealType:sq,TextEditorSelectionChangeKind:oq,SyntaxTokenType:lq,TextDocumentChangeReason:rq,ThemeColor:Bq,ThemeIcon:Pq,TreeItem:Iq,TreeItemCheckboxState:Nq,TreeItemCollapsibleState:Tq,TypeHierarchyItem:class{constructor(e,t,i,n,s,o){this.kind=e,this.name=t,this.detail=i,this.uri=n,this.range=s,this.selectionRange=o}},UIKind:fj,Uri:Fe,ViewColumn:eq,WorkspaceEdit:fK,DocumentDropEdit:Rq,DocumentPasteEdit:class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},InlayHint:qK,InlayHintLabelPart:KK,InlayHintKind:UK,RemoteAuthorityResolverError:hK,ResolvedAuthority:class{static isResolvedAuthority(e){return e&&"object"==typeof e&&"string"==typeof e.host&&"number"==typeof e.port&&(void 0===e.connectionToken||"string"==typeof e.connectionToken)}constructor(e,t,i){if("string"!=typeof e||0===e.length)throw et("host");if("number"!=typeof t||0===t||Math.round(t)!==t)throw et("port");void 0!==i&&lK(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},ManagedResolvedAuthority:class{static isManagedResolvedAuthority(e){return e&&"object"==typeof e&&"function"==typeof e.makeConnection&&(void 0===e.connectionToken||"string"==typeof e.connectionToken)}constructor(e,t){this.makeConnection=e,this.connectionToken=t,void 0!==t&&lK(t)}},SourceControlInputBoxValidationType:gq,ExtensionRuntime:P$,TimelineItem:O$,NotebookRange:N$,NotebookCellKind:k$,NotebookCellExecutionState:x$,NotebookCellData:A$,NotebookData:class{constructor(e){this.cells=e}},NotebookRendererScript:class{constructor(e,t=[]){this.uri=e,this.provides=function(e){return Array.isArray(e)?e:[e]}(t)}},NotebookCellStatusBarAlignment:E$,NotebookEditorRevealType:D$,NotebookCellOutput:R$,NotebookCellOutputItem:M$,NotebookCellStatusBarItem:class{constructor(e,t){this.text=e,this.alignment=t}},NotebookControllerAffinity:L$,NotebookControllerAffinity2:I$,NotebookEdit:gK,NotebookKernelSourceAction:class{constructor(e){this.label=e}},PortAttributes:class{constructor(e){this._autoForwardAction=e}get autoForwardAction(){return this._autoForwardAction}},LinkedEditingRanges:class{constructor(e,t){this.ranges=e,this.wordPattern=t}},TestResultState:z$,TestRunRequest:H$,TestMessage:V$,TestMessage2:V$,TestTag:U$,TestRunProfileKind:W$,TextSearchCompleteMessageType:mj,DataTransfer:Mq,DataTransferItem:Aq,FileCoverage:q$,StatementCoverage:class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},BranchCoverage:class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},FunctionCoverage:class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},WorkspaceTrustState:j$,LanguageStatusSeverity:FK,QuickPickItemKind:v$,InputBoxValidationSeverity:w$,TabInputText:class{constructor(e){this.uri=e}},TabInputTextDiff:class{constructor(e,t){this.original=e,this.modified=t}},TabInputTextMerge:class{constructor(e,t,i,n){this.base=e,this.input1=t,this.input2=i,this.result=n}},TabInputCustom:class{constructor(e,t){this.uri=e,this.viewType=t}},TabInputNotebook:class{constructor(e,t){this.uri=e,this.notebookType=t}},TabInputNotebookDiff:class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},TabInputWebview:class{constructor(e){this.viewType=e}},TabInputTerminal:class{constructor(){}},TabInputInteractiveWindow:class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},TabInputChat:class{constructor(){}},TelemetryTrustedValue:Gn,LogLevel:Lu,EditSessionIdentityMatch:bj,InteractiveSessionVoteDirection:Y$,ChatCopyKind:X$,InteractiveEditorResponseFeedbackKind:Z$,RelatedInformationType:tj,SpeechToTextStatus:ij,KeywordRecognitionStatus:nj},{version:yj,tasks:Cj,notebooks:Sj,scm:kj,comments:xj,authentication:Ej,tests:Dj,extensions:Lj,debug:Ij,env:Tj,commands:Nj,window:Aj,workspace:Mj,languages:Rj,l10n:Oj,interactive:Fj,ai:Pj,chat:Bj,speech:zj,Breakpoint:Wj,TerminalOutputAnchor:Hj,ChatResultFeedbackKind:Vj,ChatVariableLevel:Uj,ChatCompletionItem:Kj,CallHierarchyIncomingCall:qj,CallHierarchyItem:$j,CallHierarchyOutgoingCall:jj,CancellationError:Gj,CancellationTokenSource:Yj,CandidatePortSource:Xj,CodeAction:Qj,CodeActionKind:Zj,CodeActionTriggerKind:Jj,CodeLens:eG,Color:tG,ColorInformation:iG,ColorPresentation:nG,ColorThemeKind:sG,CommentMode:oG,CommentState:rG,CommentThreadCollapsibleState:aG,CommentThreadState:lG,CompletionItem:hG,CompletionItemKind:cG,CompletionItemTag:dG,CompletionList:uG,CompletionTriggerKind:gG,ConfigurationTarget:pG,CustomExecution:fG,DebugAdapterExecutable:mG,DebugAdapterInlineImplementation:bG,DebugAdapterNamedPipeServer:vG,DebugAdapterServer:wG,DebugConfigurationProviderTriggerKind:_G,DebugConsoleMode:yG,DebugVisualization:CG,DecorationRangeBehavior:SG,Diagnostic:kG,DiagnosticRelatedInformation:xG,DiagnosticSeverity:EG,DiagnosticTag:DG,Disposable:LG,DocumentHighlight:IG,DocumentHighlightKind:TG,MultiDocumentHighlight:NG,DocumentLink:AG,DocumentSymbol:MG,EndOfLine:RG,EnvironmentVariableMutatorType:OG,EvaluatableExpression:FG,InlineValueText:PG,InlineValueVariableLookup:BG,InlineValueEvaluatableExpression:zG,InlineCompletionTriggerKind:WG,EventEmitter:HG,ExtensionKind:VG,ExtensionMode:UG,ExternalUriOpenerPriority:KG,FileChangeType:qG,FileDecoration:$G,FileDecoration2:jG,FileSystemError:GG,FileType:YG,FilePermission:XG,FoldingRange:QG,FoldingRangeKind:ZG,FunctionBreakpoint:JG,InlineCompletionItem:eY,InlineCompletionList:tY,Hover:iY,IndentAction:nY,Location:sY,MarkdownString:oY,OverviewRulerLane:rY,ParameterInformation:aY,PortAutoForwardAction:lY,Position:hY,ProcessExecution:cY,ProgressLocation:dY,QuickInputButtons:uY,Range:gY,RelativePattern:pY,Selection:fY,SelectionRange:mY,SemanticTokens:bY,SemanticTokensBuilder:vY,SemanticTokensEdit:wY,SemanticTokensEdits:_Y,SemanticTokensLegend:yY,ShellExecution:CY,ShellQuoting:SY,SignatureHelp:kY,SignatureHelpTriggerKind:xY,SignatureInformation:EY,SnippetString:DY,SourceBreakpoint:LY,StandardTokenType:IY,StatusBarAlignment:TY,SymbolInformation:NY,SymbolKind:AY,SymbolTag:MY,Task:RY,TaskGroup:OY,TaskPanelKind:FY,TaskRevealKind:PY,TaskScope:BY,TerminalLink:zY,TerminalQuickFixTerminalCommand:WY,TerminalQuickFixOpener:HY,TerminalLocation:VY,TerminalProfile:UY,TerminalExitReason:KY,TextDocumentSaveReason:qY,TextEdit:$Y,SnippetTextEdit:jY,TextEditorCursorStyle:GY,TextEditorLineNumbersStyle:YY,TextEditorRevealType:XY,TextEditorSelectionChangeKind:QY,SyntaxTokenType:ZY,TextDocumentChangeReason:JY,ThemeColor:eX,ThemeIcon:tX,TreeItem:iX,TreeItemCheckboxState:nX,TreeItemCollapsibleState:sX,TypeHierarchyItem:oX,UIKind:rX,Uri:aX,ViewColumn:lX,WorkspaceEdit:hX,DocumentDropEdit:cX,DocumentPasteEdit:dX,InlayHint:uX,InlayHintLabelPart:gX,InlayHintKind:pX,RemoteAuthorityResolverError:fX,ResolvedAuthority:mX,ManagedResolvedAuthority:bX,SourceControlInputBoxValidationType:vX,ExtensionRuntime:wX,TimelineItem:_X,NotebookRange:yX,NotebookCellKind:CX,NotebookCellExecutionState:SX,NotebookCellData:kX,NotebookData:xX,NotebookRendererScript:EX,NotebookCellStatusBarAlignment:DX,NotebookEditorRevealType:LX,NotebookCellOutput:IX,NotebookCellOutputItem:TX,NotebookCellStatusBarItem:NX,NotebookControllerAffinity:AX,NotebookControllerAffinity2:MX,NotebookEdit:RX,NotebookKernelSourceAction:OX,PortAttributes:FX,LinkedEditingRanges:PX,TestResultState:BX,TestRunRequest:zX,TestMessage:WX,TestMessage2:HX,TestTag:VX,TestRunProfileKind:UX,TextSearchCompleteMessageType:KX,DataTransfer:qX,DataTransferItem:$X,FileCoverage:jX,StatementCoverage:GX,BranchCoverage:YX,FunctionCoverage:XX,WorkspaceTrustState:QX,LanguageStatusSeverity:ZX,QuickPickItemKind:JX,InputBoxValidationSeverity:eQ,TabInputText:tQ,TabInputTextDiff:iQ,TabInputTextMerge:nQ,TabInputCustom:sQ,TabInputNotebook:oQ,TabInputNotebookDiff:rQ,TabInputWebview:aQ,TabInputTerminal:lQ,TabInputInteractiveWindow:hQ,TabInputChat:cQ,TelemetryTrustedValue:dQ,LogLevel:uQ,EditSessionIdentityMatch:gQ,InteractiveSessionVoteDirection:pQ,ChatCopyKind:fQ,InteractiveEditorResponseFeedbackKind:mQ,RelatedInformationType:bQ,SpeechToTextStatus:vQ,KeywordRecognitionStatus:wQ}=_j,_Q={};let yQ;new Set;function CQ(e){return _Q[e]}function SQ(e,t,i,n){const s=new Xt;s.add(Sn.registerStaticBrowserUri(ms(e,t),Fe.parse(i)));const o="string"==typeof n?{mimeType:n}:n;var r;return s.add((r=new pU(ms(e,t),i,o),vU.registerFile(r))),s}const kQ=function(e,t,i){let n=Promise.resolve(),s=null;return async o=>{null==s?(s=o,n=n.then((async()=>async function(e){await new Promise((t=>setTimeout(t,e)))}(i))).then((async()=>{const t=s;s=null,await e(t)}))):s=t(s,o),await n}}((async({toAdd:e,toRemove:t})=>{await rU();const i=BW.get(r);await i.deltaExtensions(e,t)}),((e,t)=>({toAdd:[...e.toAdd,...t.toAdd],toRemove:[...e.toRemove,...t.toRemove]})),0);const xQ=new Map,EQ=[];function DQ(e,t,{path:i="/",system:n=!1,readmePath:o,changelogPath:r}={}){const a=Zn(e.publisher,e.name),l=Fe.from({scheme:_U.extensionFile,authority:a,path:i}),h=(async()=>{await rU();const h=BW.get(Ds).remoteAuthority;let c=l;3===t&&(c=Fe.from({scheme:vn.vscodeRemote,authority:h,path:i}));const d=BW.get(s).createInstance(cH),u={devMode:!1,language:V,pseudo:"pseudo"===V,translations:CQ(V)??{}},g={manifest:await d.translateManifest(c,e,u),type:n?0:1,isBuiltin:!0,identifier:{id:a},location:c,targetPlatform:"web",isValid:!0,validations:[],extHostKind:t,readmeUrl:null!=o?Fe.joinPath(c,o):void 0,changelogUrl:null!=r?Fe.joinPath(c,r):void 0};null!=t&&xQ.set(a,t),3!==t&&EQ.push(g);return BW.get(Ps).isEnabled(g)&&await kQ({toAdd:[g],toRemove:[]}),g})();let c={id:a,async whenReady(){await h},async isEnabled(){await rU();const e=BW.get(Ps),t=await h;return e.isEnabled(t)},async dispose(){const e=await h;EQ.indexOf(e)>=0&&EQ.splice(EQ.indexOf(e),1),xQ.delete(a),await kQ({toAdd:[],toRemove:[e]})}};if(3!==t){function d(e,t,i){return SQ(l,e,t,i)}c={...c,registerFileUrl:d}}if(1===t){async function u(){if(await h,null==yQ)throw new Error("The local api can't be used without registering the local extension host by importing `vscode/localExtensionHost`");return yQ(a)}c={...c,getApi:u,async setAsDefaultApi(){!function(e){vj=e}(await u())}}}return c}var LQ={name:"python",displayName:"%displayName%",description:"%description%",version:"1.0.0",publisher:"vscode",license:"MIT",engines:{vscode:"*"},categories:["Programming Languages"],contributes:{languages:[{id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],aliases:["Python","py"],filenames:["SConstruct","SConscript"],firstLine:"^#!\\s*/?.*\\bpython[0-9.-]*\\b",configuration:"./language-configuration.json"}],grammars:[{language:"python",scopeName:"source.python",path:"./syntaxes/MagicPython.tmLanguage.json"},{scopeName:"source.regexp.python",path:"./syntaxes/MagicRegExp.tmLanguage.json"}],configurationDefaults:{"[python]":{"diffEditor.ignoreTrimWhitespace":!1}}},scripts:{"update-grammar":"node ../node_modules/vscode-grammar-updater/bin MagicStack/MagicPython grammars/MagicPython.tmLanguage ./syntaxes/MagicPython.tmLanguage.json grammars/MagicRegExp.tmLanguage ./syntaxes/MagicRegExp.tmLanguage.json"},repository:{type:"git",url:"https://github.com/microsoft/vscode.git"},main:void 0};const{registerFileUrl:IQ,whenReady:TQ}=DQ(LQ,void 0,{system:!0});IQ("./syntaxes/MagicPython.tmLanguage.json",new i.U(i(52097)).toString(),{mimeType:"application/json",size:78248}),IQ("./syntaxes/MagicRegExp.tmLanguage.json",new i.U(i(66547)).toString(),{mimeType:"application/json",size:8371}),IQ("./language-configuration.json",new i.U(i(36959)).toString(),{mimeType:"application/json",size:1573}),IQ("package.json",new i.U(i(63651)).toString(),{mimeType:"application/json",size:1075}),IQ("package.nls.json",new i.U(i(19136)).toString(),{mimeType:"application/json",size:132})}}]);