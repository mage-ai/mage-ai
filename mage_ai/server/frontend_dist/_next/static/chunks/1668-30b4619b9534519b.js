"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1668],{48421:function(e,n,t){t.d(n,{Z:function(){return ke}});var o=t(21831),i=t(82394),r=t(75582),l=t(82684),u=t(65701),c=t(1254),a=t(69864),d=t(35686),s=t(72619),v=t(31882),f=t(55485),h=t(10305),p=t(44085),m=t(69650),x=t(38276),g=t(30160),b=t(17488),j=t(35058),y=t(85108),Z=t(81728),_=t(86735),k=t(35576),C=t(65956),P=t(70515),w=t(42122),I=t(28598);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=function(e){var n=e.block,t=e.updateConfiguration,o=n||{},u=o.data,c=o.configuration,a=(c||{}).chart_type,d=(u||{}).columns,s=y.G8[a],O=(0,l.useMemo)((function(){return Object.entries(s||{}).reduce((function(e,n){var o=(0,r.Z)(n,2),l=o[0],u=o[1];return S(S({},e),{},(0,i.Z)({},l,u.map((function(e){var n,o=e.autoRun,r=e.description,l=e.label,u=e.monospace,a=e.options,s=e.settings,O=void 0===s?{}:s,M=e.type,E=e.uuid,L=function(e,n){var t=(n||{inline:!1}).inline,o=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(g.ZP,{bold:!0,children:null===D||void 0===D?void 0:D.label}),r&&(0,I.jsx)(x.Z,{mb:1,children:(Array.isArray(r)?r:[r]).map((function(e,n){return(0,I.jsx)(g.ZP,{monospace:u,muted:!0,xsmall:!0,children:(0,I.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})},"".concat(e,"-").concat(n))}))}),e&&(0,I.jsx)(x.Z,{mt:2,children:e})]});return t?o:(0,I.jsx)(C.Z,{children:o})},D={fullWidth:!0,key:E,label:(0,Z.kC)(l()),monospace:u,onChange:function(e){return t(S({},(0,w.mv)(c,E,e.target.value)),{autoRun:o})},value:c?(0,w.t2)(c||{},E):""};if(y.VR.COLUMNS===M){var R=c[E]||[];n=(0,I.jsxs)(I.Fragment,{children:[(!O.maxValues||R.length<O.maxValues)&&(0,I.jsx)(p.Z,S(S({},D),{},{onChange:function(e){var n=c[E]||[],r=e.target.value;n.includes(r)?n=(0,_.Od)(n,(function(e){return e===r})):n.push(r),t((0,i.Z)({},E,n),{autoRun:o})},value:null,children:(0,_.YC)((d||[]).filter((function(e){return!R.includes(e)})),(function(e){return e})).map((function(e){return(0,I.jsx)("option",{value:e,children:e},e)}))})),R.length>0&&(0,I.jsx)("div",{style:{marginTop:4}}),R.map((function(e){return(0,I.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:2},children:(0,I.jsx)(v.Z,{label:e,onClick:function(){t((0,i.Z)({},E,(0,_.Od)(R,(function(n){return n===e}))),{autoRun:o})}})},e)}))]})}else if(y.VR.METRICS===M){var N=c[E]||[];n=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Metrics"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Select a column and an aggregation function."}),(0,I.jsxs)(h.Z,{onChange:function(e,n){var r=n.resetValues,l=n.setValues;2===e.filter((function(e){return!!e})).length&&(N.find((function(n){var t=n.aggregation;return n.column===e[1]&&t===e[0]}))||(t((0,i.Z)({},E,N.concat({aggregation:e[0],column:e[1]})),{autoRun:o}),l([null,null]),r()))},children:[(0,I.jsx)(p.Z,S(S({},D),{},{label:"aggregation",children:(0,_.YC)(j.bn,(function(e){return e})).map((function(e){return(0,I.jsx)("option",{value:e,children:e},e)}))})),(0,I.jsx)(p.Z,S(S({},D),{},{label:"column",children:(0,_.YC)(d||[],(function(e){return e})).map((function(e){return(0,I.jsx)("option",{value:e,children:e},e)}))}))]}),N.map((function(e){var n=e.aggregation,r=e.column;return(0,I.jsx)("div",{style:{display:"inline-block",marginRight:2,marginTop:4},children:(0,I.jsx)(v.Z,{label:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(g.ZP,{inline:!0,monospace:!0,children:[n,"("]}),r,(0,I.jsx)(g.ZP,{inline:!0,monospace:!0,children:")"})]}),onClick:function(){t((0,i.Z)({},E,(0,_.Od)(N,(function(e){var t=e.aggregation,o=e.column;return n===t&&r===o}))),{autoRun:o})}})},"".concat(n,"(").concat(r,")"))}))]})}else y.VR.CODE===M?n=L((0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(g.ZP,{monospace:!0,small:!0,children:[(0,I.jsx)(g.ZP,{color:"#00CC99",inline:!0,monospace:!0,small:!0,children:"function"})," ",(0,I.jsx)(g.ZP,{color:"#0080FF",inline:!0,monospace:!0,small:!0,children:"format"}),(0,I.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:"("}),(0,I.jsx)(g.ZP,{color:"#00FFFF",inline:!0,monospace:!0,small:!0,children:"value"}),","," ",(0,I.jsx)(g.ZP,{color:"#00FFFF",inline:!0,monospace:!0,small:!0,children:"index"}),","," ",(0,I.jsx)(g.ZP,{color:"#00FFFF",inline:!0,monospace:!0,small:!0,children:"values"}),(0,I.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:")"})," ",(0,I.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:"{"})]}),(0,I.jsx)(k.Z,S(S({},D),{},{autoGrow:!0,borderless:!0,label:null,monospace:!0,onChange:function(e){t((0,i.Z)({},E,e.target.value),{skip_render:!0})},paddingVertical:0,primary:!0,rows:1,small:!0})),(0,I.jsx)(g.ZP,{color:"#FF9933",inline:!0,monospace:!0,small:!0,children:"}"})]})):a?n=(0,I.jsx)(p.Z,S(S({},D),{},{children:a.map((function(e){return(0,I.jsx)("option",{value:e,children:e},e)}))})):y.VR.TOGGLE===M?n=(0,I.jsx)(x.Z,{mt:P.cd,children:(0,I.jsxs)(f.ZP,{alignItems:"center",children:[(0,I.jsx)(m.Z,{checked:!(null===D||void 0===D||!D.value),compact:!0,onCheck:function(e){return null===D||void 0===D?void 0:D.onChange({target:{value:e(null===D||void 0===D?void 0:D.value)}})}}),(0,I.jsx)(x.Z,{mr:P.cd}),L(null,{inline:!0})]})}):(n=(0,I.jsx)(b.Z,S(S({},D),{},{label:r||null===D||void 0===D?void 0:D.label,placeholder:r?null===D||void 0===D?void 0:D.label:void 0,type:M})),r&&(n=L(n)));return(0,I.jsx)(x.Z,{mb:1,children:n},E)}))))}),{noCode:[]})}),[d,c,s,t]),M=(O.code,O.noCode);return(0,I.jsx)(I.Fragment,{children:M})},E=t(54750),L=t(89083),D=t(62547),R=t(2842),N=t(23780),F=t(75399),B=t(44425),U=t(97618),T=t(65927),A=t(4190),H=t(71180),W=t(15338),q=t(85854),z=t(48670),Y=t(72473),V=t(47041),G=t(53808);var J=function(){var e=(0,l.useRef)(null),n=(0,l.useCallback)((function(n,t){for(var o=arguments.length,i=new Array(o>2?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];e.current&&clearTimeout(e.current),e.current=setTimeout((function(){n.apply(void 0,i)}),t)}),[]);return[n,(0,l.useCallback)((function(){e.current&&(clearTimeout(e.current),e.current=null)}),[])]},K=t(19183),X=t(10975),Q=t(14567),$=3*P.iI;var ee=function(e){var n=e.buildChart,t=e.height,o=e.width,i=(0,l.useMemo)((function(){return t-(V.nn+$)}),[t]);return(0,I.jsx)(I.Fragment,{children:null===n||void 0===n?void 0:n({height:i,width:o})})},ne=t(24496),te=t(46732),oe=t(25976),ie=t(44897),re=t(42631),le=3*P.iI,ue=oe.default.div.withConfig({displayName:"indexstyle__DividerStyle",componentId:"sc-17acf36-0"})(["display:flex;position:relative;",";",";"],(function(e){return!e.horizontal&&"\n    height: 100%;\n    justify-content: center;\n    width: ".concat(le,"px;\n  ")}),(function(e){return e.horizontal&&"\n    align-items: center;\n    height: ".concat(le,"px;\n    margin-left: ").concat(le,"px;\n    margin-right: ").concat(le,"px;\n    width: calc(100% - ").concat(2*le,"px);\n  ")})),ce=oe.default.div.withConfig({displayName:"indexstyle__BarStyle",componentId:"sc-17acf36-1"})(["border-radius:","px;"," ",";",";"],re.Ro,(function(e){return"\n    background-color: ".concat((e.theme||ie.Z).accent.blueLight,";\n  ")}),(function(e){return!e.horizontal&&"\n    height: 100%;\n    width: ".concat(.5*P.iI,"px;\n  ")}),(function(e){return e.horizontal&&"\n    height: ".concat(.5*P.iI,"px;\n    width: 100%;\n  ")})),ae=oe.default.a.withConfig({displayName:"indexstyle__ButtonStyle",componentId:"sc-17acf36-2"})(["align-items:center;border-radius:50%;display:flex;height:","px;justify-content:center;position:absolute;width:","px;"," ",";",";"],3*P.iI,3*P.iI,(function(e){return"\n    background-color: ".concat((e.theme||ie.Z).background.page,";\n    border: ").concat(re.mP,"px solid ").concat((e.theme||ie.Z).accent.blueLight,";\n    box-shadow:\n      0 0 0 ").concat(re.mP,"px ").concat((e.theme||ie.Z).background.page,";\n\n    &:hover {\n      background-color: ").concat((e.theme||ie.Z).interactive.linkPrimary,";\n      border: ").concat(re.mP,"px solid ").concat((e.theme||ie.Z).interactive.linkPrimary,";\n      cursor: pointer;\n    }\n  ")}),(function(e){return!e.horizontal&&"\n    top: ".concat(3*P.iI,"px;\n  ")}),(function(e){return e.horizontal&&"\n    left: ".concat(3*P.iI,"px;\n  ")}));var de=function(e){var n=e.horizontal,t=e.onClickAdd,o=(0,l.useState)(!1),i=o[0],r=o[1];return(0,I.jsx)(ue,{horizontal:n,onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:i&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ae,{horizontal:n,href:"#",onClick:function(e){e.preventDefault(),null===t||void 0===t||t()},children:(0,I.jsx)(Y.Add,{size:2*P.iI})}),(0,I.jsx)(ce,{horizontal:n})]})})},se=2*(re.YF+P.cd*P.iI)+le,ve=oe.default.div.withConfig({displayName:"indexstyle__ItemStyle",componentId:"sc-rcft6g-0"})(["border-radius:","px;padding:","px;",""],re.Ro,P.cd*P.iI,(function(e){return"\n    border: ".concat(re.YF,"px ").concat(re.M8," ").concat((e.theme||ie.Z).interactive.defaultBorder,";\n    background-color: ").concat((e.theme||ie.Z).background.chartBlock,";\n  ")})),fe=t(77837),he=t(38860),pe=t.n(he);function me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?me(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ge=function(e){var n=(0,l.useState)(null),t=n[0],o=n[1],i=(0,l.useState)(!1),r=i[0],u=i[1],c=(0,l.useState)(null),a=c[0],d=c[1],s=(0,l.useRef)(null),v=(0,l.useCallback)((0,fe.Z)(pe().mark((function n(){var t,i,r,l,c,a,v,f=arguments;return pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(u(!0),d(null),s.current&&s.current.abort(),s.current=new AbortController,t=s.current.signal,n.prev=5,i=f.length,r=new Array(i),l=0;l<i;l++)r[l]=f[l];return r.length>0&&"object"===typeof r[r.length-1]?(c=r[r.length-1],r[r.length-1]=xe(xe({},c),{},{signal:t})):r.push({signal:t}),n.next=10,e.apply(void 0,r);case 10:a=n.sent,o(a),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(5),"AbortError"!==(v=n.t0).name&&d(v);case 18:return n.prev=18,u(!1),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[5,14,18,21]])}))),[e]);return(0,l.useEffect)((function(){return function(){s.current&&s.current.abort()}}),[]),{doFetch:v,data:t,isLoading:r,error:a}};function be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?be(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ye=function(e){var n,t,o=e.block,u=e.blockLayoutItem,c=void 0===u?null:u,v=e.blockUUID,h=e.columnIndex,p=e.columnLayoutSettings,m=e.columnsInRow,y=e.createNewBlockItem,Z=e.detail,_=e.disableDrag,k=e.first,C=e.height,w=e.isLoading,O=e.onDrop,S=e.onFetchBlockLayoutItem,M=e.onSave,E=e.pageBlockLayoutUUID,L=e.removeBlockLayoutItem,D=e.rowIndex,R=e.setSelectedBlockItem,B=e.updateLayout,T=e.width,W=(0,l.useRef)(null),q=(0,l.useState)(!1),z=q[0],V=q[1],G=(0,l.useState)(!1),J=G[0],K=G[1],$=(0,l.useState)(!1),oe=$[0],ie=$[1],re=(0,l.useState)(p)[0],ue=(0,l.useState)(o),ce=ue[0],ae=(ue[1],(0,l.useMemo)((function(){return c||ce}),[c,ce])),fe=(0,N.VI)(null,{},[],{uuid:"BlockLayoutItem/".concat(E,"/").concat(v)}),he=(0,r.Z)(fe,1)[0],pe=(0,l.useState)({block_layout_item:ae}),me=pe[0],xe=(pe[1],(0,a.Db)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.ZP.block_layout_items.page_block_layouts.detailAsync(encodeURIComponent(E),encodeURIComponent(v),{skip_render:!(null===e||void 0===e||!e.skip_render)})}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){if(null!==e&&void 0!==e&&e.error)he({response:e});else{var n=null===e||void 0===e?void 0:e.block_layout_item;S&&(null===S||void 0===S||S(n))}}})}})),be=(0,r.Z)(xe,2),ye=be[0],Ze=be[1].isLoading,_e=ge((function(){return!Z&&ye()})),ke=_e.doFetch;_e.data,_e.isLoading,_e.error,(0,l.useEffect)((function(){ke()}),[]);var Ce=(0,l.useMemo)((function(){var e,n=null===ae||void 0===ae||null===(e=ae.data_source)||void 0===e?void 0:e.refresh_interval;return n||6e4}),[null===ae||void 0===ae||null===(n=ae.data_source)||void 0===n?void 0:n.refresh_interval]),Pe=(0,l.useRef)(null);(0,l.useEffect)((function(){return c&&(Pe.current=setInterval(ke,Ce)),function(){Pe.current&&clearInterval(Pe.current)}}),[c,Ce]);var we=(0,l.useMemo)((function(){return w&&Ze}),[w,Ze]),Ie=(0,l.useMemo)((function(){var e;return(null===ae||void 0===ae?void 0:ae.data)||(null===me||void 0===me||null===(e=me.block_layout_item)||void 0===e?void 0:e.data)}),[ae,me]),Oe=(0,l.useCallback)((function(e){var n,t=e.height,o=e.width;if(!Ie)return null;var r=null===Ie||void 0===Ie?void 0:Ie.render;if(r){var l=null===Ie||void 0===Ie?void 0:Ie.render_type;if(F.hN.JPEG===l||F.hN.JPG===l)return(0,I.jsx)("img",{height:t,src:"data:image/jpeg;base64,".concat(r),width:o});if(F.hN.PNG===l)return(0,I.jsx)("img",{height:t,src:"data:image/png;base64,".concat(r),width:o});if(F.hN.HTML===l)return(0,I.jsx)("iframe",{srcDoc:r,style:{height:t,width:o}})}return(0,I.jsx)(ne.Z,{block:je(je({},ae),{},{configuration:je(je({},null===ae||void 0===ae?void 0:ae.configuration),{},(0,i.Z)({},j.JJ,t))}),data:Ie,width:o,xAxisLabel:null===ae||void 0===ae||null===(n=ae.configuration)||void 0===n?void 0:n.x_axis_label})}),[ae,Ie]),Se=(0,X.c)((function(){return{collect:function(e){return{isDragging:!!e.isDragging()}},item:{blockLayoutItem:ae,columnIndex:h,rowIndex:D},type:"BlockLayoutItem"}}),[ae,h,D]),Me=(0,r.Z)(Se,2),Ee=Me[0],Le=Me[1],De=(0,Q.L)((function(){return{accept:"BlockLayoutItem",drop:function(e){return null===O||void 0===O?void 0:O(e)}}}),[O]),Re=(0,r.Z)(De,2)[1];return Z?(0,I.jsx)(ee,{buildChart:Oe,height:C,width:T}):(0,I.jsxs)(I.Fragment,{children:[k&&(0,I.jsx)(de,{onClickAdd:function(){return y({columnIndex:h,rowIndex:D})}}),(0,I.jsx)(U.Z,{flex:1,flexDirection:"column",children:(0,I.jsx)("div",{onMouseEnter:function(){return ie(!0)},onMouseLeave:function(){return ie(!1)},ref:Re,children:(0,I.jsxs)(ve,je(je({},Ee),{},{ref:_?null:Le,children:[(0,I.jsx)(x.Z,{mb:1,children:(0,I.jsxs)(f.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,I.jsx)(x.Z,{py:1,children:(0,I.jsx)(g.ZP,{bold:!0,default:!0,children:(null===ae||void 0===ae?void 0:ae.name)||v})}),(0,I.jsx)("div",{children:(0,I.jsx)(te.Z,{items:[{label:function(){return"Edit content"},onClick:function(){return null===R||void 0===R?void 0:R(ae)},uuid:"Edit content"},{label:function(){return"Change height and/or width"},onClick:function(){return K(!0)},uuid:"Change"},{label:function(){return"Remove chart"},onClick:function(){return null===L||void 0===L?void 0:L()},uuid:"Remove chart"}],onClickCallback:function(){return V(!1)},onClickOutside:function(){return V(!1)},open:z,parentRef:W,rightOffset:0,uuid:"BlockLayoutItem/".concat(v),children:(oe||z)&&(0,I.jsx)(H.ZP,{disabled:we,iconOnly:!0,loading:we,noBackground:!0,onClick:function(){V(!0)},children:(0,I.jsx)(Y.Ellipsis,{default:!0,size:2*P.iI})})})})]})}),J&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(f.ZP,{alignItems:"center",fullWidth:!0,children:[(0,I.jsxs)(U.Z,{flex:1,flexDirection:"column",children:[(0,I.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Width (flex box)"}),(0,I.jsx)(b.Z,{compact:!0,fullWidth:!0,onChange:function(e){return null===B||void 0===B?void 0:B(je(je({},p),{},{width:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===p||void 0===p?void 0:p.width)||""})]}),(0,I.jsx)(x.Z,{mr:1}),(0,I.jsxs)(U.Z,{flex:1,flexDirection:"column",children:[(0,I.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Max width (%)"}),(0,I.jsx)(b.Z,{compact:!0,fullWidth:!0,label:"Max width percentage",onChange:function(e){return null===B||void 0===B?void 0:B(je(je({},p),{},{max_width_percentage:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===p||void 0===p?void 0:p.max_width_percentage)||""})]}),(0,I.jsx)(x.Z,{mr:1}),(0,I.jsxs)(U.Z,{flex:1,flexDirection:"column",children:[(0,I.jsx)(g.ZP,{bold:!0,muted:!0,small:!0,children:"Height (pixels)"}),(0,I.jsx)(b.Z,{compact:!0,fullWidth:!0,onChange:function(e){return null===B||void 0===B?void 0:B(je(je({},p),{},{height:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value}))},primary:!0,setContentOnMount:!0,small:!0,type:"number",value:(null===p||void 0===p?void 0:p.height)||""})]})]}),(0,I.jsx)(x.Z,{mt:P.cd,children:(0,I.jsxs)(f.ZP,{alignItems:"center",justifyContent:"flex-end",children:[(0,I.jsx)(H.ZP,{compact:!0,onClick:function(){null===M||void 0===M||M(),K(!1)},primary:!0,small:!0,children:"Save"}),(0,I.jsx)(x.Z,{mr:1}),(0,I.jsx)(H.ZP,{compact:!0,onClick:function(){K(!1),null===B||void 0===B||B(re)},small:!0,children:"Cancel"})]})})]}),!me&&(0,I.jsx)(x.Z,{p:P.cd,children:(0,I.jsx)(A.Z,{})}),me&&!Ie&&(0,I.jsx)(g.ZP,{muted:!0,children:"Chart hasn\u2019t been configured or no data was retrieved."}),Ie&&Oe({height:C||(null===ae||void 0===ae||null===(t=ae.configuration)||void 0===t?void 0:t[j.JJ]),width:T-(se+1)-(m?le/m:0)})]}))})}),(0,I.jsx)(de,{onClickAdd:function(){return y({columnIndex:h+1,rowIndex:D})}})]})};function Ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ze(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ke=function(e){var n,t=e.leftOffset,v=e.pageBlockLayoutTemplate,h=e.topOffset,m=e.uuid,y=(0,N.VI)(null,{},[],{uuid:"BlockLayout/".concat(m)}),k=(0,r.Z)(y,1)[0],C=J(),O=(0,r.Z)(C,1)[0],S=(0,l.useState)({}),X=(S[0],S[1],(0,l.useState)(null)),Q=X[0],$=X[1],ee=(0,l.useState)({}),ne=ee[0],te=ee[1],oe=(0,l.useState)(!1),ie=(oe[0],oe[1],"block_layout_after_width_".concat(m)),re="block_layout_before_width_".concat(m),le=(0,l.useRef)(null),ue=(0,l.useState)((0,G.U2)(ie,40*P.iI)),ce=ue[0],ae=ue[1],se=(0,l.useState)(!1),ve=se[0],fe=se[1],he=(0,l.useState)(Math.max((0,G.U2)(re),50*P.iI)),pe=he[0],me=he[1],xe=(0,l.useState)(!1),ge=xe[0],be=xe[1],je=(0,l.useRef)(null),Ze=(0,K.i)(),ke=(0,l.useState)(null),Ce=ke[0],Pe=ke[1],we=(0,l.useState)(null),Ie=we[0],Oe=we[1],Se=(0,l.useMemo)((function(){var e;return null===Ce||void 0===Ce||null===(e=Ce.data_source)||void 0===e?void 0:e.refresh_interval}),[Ce]),Me=(0,l.useMemo)((function(){return null===ne||void 0===ne?void 0:ne[null===Ce||void 0===Ce?void 0:Ce.uuid]}),[ne,Ce]),Ee=(0,l.useState)(null),Le=Ee[0],De=Ee[1],Re=(0,a.Db)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.ZP.block_layout_items.page_block_layouts.detailAsync(Ce&&encodeURIComponent(m),Ce&&encodeURIComponent(null===Ce||void 0===Ce?void 0:Ce.uuid),{configuration_override:encodeURIComponent(JSON.stringify((null===Q||void 0===Q?void 0:Q.configuration)||"")),content_override:encodeURIComponent((null===Q||void 0===Q?void 0:Q.content)||(null===Me||void 0===Me?void 0:Me.content)||""),data_source_override:encodeURIComponent(JSON.stringify((null===Q||void 0===Q?void 0:Q.data_source)||"")),skip_render:!(null===e||void 0===e||!e.skip_render)},{refreshInterval:Se,revalidateOnFocus:!Se})}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){return De((function(n){var t,o=null===e||void 0===e?void 0:e.block_layout_item;return(null===n||void 0===n||null===(t=n.block_layout_item)||void 0===t?void 0:t.uuid)!==(null===o||void 0===o?void 0:o.uuid)&&$((function(e){return _e(_e({},e),o)})),te((function(e){return _e(_e({},e),{},(0,i.Z)({},null===o||void 0===o?void 0:o.uuid,o))})),e}))}})}}),Ne=(0,r.Z)(Re,2),Fe=Ne[0],Be=Ne[1].isLoading,Ue=(0,l.useMemo)((function(){return null===Le||void 0===Le?void 0:Le.block_layout_item}),[Le]);(0,l.useEffect)((function(){var e;null!==Ue&&void 0!==Ue&&null!==(e=Ue.data)&&void 0!==e&&e.error&&k({response:null===Ue||void 0===Ue?void 0:Ue.data})}),[Ue,k]);var Te=(0,l.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O((function(){return Fe({skip_render:!1})}),null!==n&&void 0!==n&&n.skip_render?3e3:1e3),$("function"===typeof e?e:function(n){return _e(_e({},n),e)})}),[Fe,O,$]),Ae=(0,l.useCallback)((function(e){Te(_e(_e({},e),{},{name_new:(null===e||void 0===e?void 0:e.name_new)||(null===e||void 0===e?void 0:e.name)||(0,Z.Y6)()})),Pe(e)}),[Te,Pe]),He=(0,l.useState)(null),We=He[0],qe=He[1],ze=(0,l.useMemo)((function(){return null===We||void 0===We?void 0:We.page_block_layout}),[We]),Ye=(0,a.Db)((function(){return d.ZP.page_block_layouts.detailAsync(encodeURIComponent(m))}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){qe(e)}})}}),Ve=(0,r.Z)(Ye,1)[0];(0,l.useEffect)((function(){Ve()}),[Ve]);var Ge=(0,l.useMemo)((function(){return null===ze||void 0===ze?void 0:ze.layout}),[ze]),Je=(0,a.Db)((function(e){return d.ZP.page_block_layouts.useUpdate(encodeURIComponent(m))(e)}),{onSuccess:function(e){return(0,s.wD)(e,{callback:function(e){var n=(null===e||void 0===e?void 0:e.page_block_layout).blocks;qe(e);var t=Object.values(n).find((function(e){return e.name===(null===Q||void 0===Q?void 0:Q.name_new)}));t&&Ae(t),Oe(null)},onErrorCallback:function(e,n){return k({errors:n,response:e})}})}}),Ke=(0,r.Z)(Je,2),Xe=Ke[0],Qe=Ke[1].isLoading,$e=(0,l.useCallback)((function(e){return Xe({page_block_layout:{blocks:_e(_e({},null===ze||void 0===ze?void 0:ze.blocks),{},(0,i.Z)({},null===e||void 0===e?void 0:e.uuid,(0,w.gR)(e,["data"]))),layout:null===ze||void 0===ze?void 0:ze.layout}})}),[ze,Xe]),en=(0,l.useCallback)((function(){return Xe({page_block_layout:{blocks:null===ze||void 0===ze?void 0:ze.blocks,layout:null===ze||void 0===ze?void 0:ze.layout}})}),[ze,Xe]),nn=(0,l.useMemo)((function(){return null===ze||void 0===ze?void 0:ze.blocks}),[ze]),tn=(0,l.useCallback)((function(e,n,t){var i,r=(0,o.Z)(Ge);r[e][n]=t,i=r,qe((function(e){return _e(_e({},e),{},{page_block_layout:_e(_e({},null===e||void 0===e?void 0:e.page_block_layout),{},{layout:i})})}))}),[Ge]),on=(0,l.useState)(null),rn=on[0],ln=on[1],un=(0,l.useState)(null),cn=un[0],an=un[1];(0,l.useEffect)((function(){var e;null===le||void 0===le||!le.current||ve||ge||ln(null===le||void 0===le||null===(e=le.current)||void 0===e?void 0:e.getBoundingClientRect())}),[ve,ge,le,Ce,Ze]),(0,l.useEffect)((function(){var e;null!==je&&void 0!==je&&je.current&&an(null===je||void 0===je||null===(e=je.current)||void 0===e?void 0:e.getBoundingClientRect())}),[je,Ce,Ze]),(0,l.useEffect)((function(){ve||(0,G.t8)(ie,ce)}),[ve,ce,ie]),(0,l.useEffect)((function(){ge||(0,G.t8)(re,pe)}),[ge,pe,re]);var dn=(0,l.useCallback)((function(e,n,t){var i=_e({},null===ze||void 0===ze?void 0:ze.blocks);null===i||void 0===i||delete i[e];var r=(0,o.Z)(null===ze||void 0===ze?void 0:ze.layout),l=r[n]||[],u=(0,_.oM)(l,t);0===(null===u||void 0===u?void 0:u.length)?r=(0,_.oM)(r,n):r[n]=u,Oe(e),Xe({page_block_layout:{blocks:i,layout:r}})}),[ze,Xe]),sn=(0,l.useCallback)((function(e,n,t,i){var r=(0,o.Z)(Ge||[]),l=r[e]||[],u=l[n];if(e===t&&n!==i){var c=(0,_.oM)(l,n);r[e]=(0,_.Hk)(u,i>n?i:i-1,c)}else{var a=(0,_.oM)(l,n);r[e]=a;var d=(0,_.Hk)(u,i,r[t]);r[t]=d,0===(null===a||void 0===a?void 0:a.length)&&(r=(0,_.oM)(r,e))}e===t&&n===i||Xe({page_block_layout:{blocks:null===ze||void 0===ze?void 0:ze.blocks,layout:r}})}),[Ge,ze,Xe]),vn=(0,l.useCallback)((function(e){var n=(0,Z.Y6)(),t={name:n,type:B.tf.CHART,uuid:(0,Z.kE)(n)},r=(0,o.Z)(Ge||[]),l={block_uuid:t.uuid,width:1};if(e){var u=e||{},c=u.columnIndex,a=void 0===c?0:c,d=u.rowIndex,s=u.rowIndexInsert;"undefined"!==typeof s?r=(0,_.Hk)([l],s,r):r[d]=(0,_.Hk)(l,a,r[d])}else r.push([l]);Xe({page_block_layout:{blocks:_e(_e({},null===ze||void 0===ze?void 0:ze.blocks),{},(0,i.Z)({},t.uuid,t)),layout:r}}),Ae(t),Te((function(){return{}}))}),[Ge,ze,Ae,Te,Xe]),fn=(0,l.useMemo)((function(){var e=[];return null===Ge||void 0===Ge||Ge.forEach((function(n,t){var o=[],r=(0,_.Sm)(null===n||void 0===n?void 0:n.map((function(e){return e.width||0})));n.forEach((function(e,l){var u=e.block_uuid,c=e.height,a=e.max_width_percentage,d=e.width,s=null===nn||void 0===nn?void 0:nn[u],v="undefined"!==typeof a&&null!==a?a>=0?a/100:a:null,f=d/r,h=v&&f>v?v:f,p=(null===rn||void 0===rn?void 0:rn.width)-V.nn;o.push((0,I.jsx)(U.Z,{flexBasis:"".concat(Math.floor(100*h),"%"),children:(0,I.jsx)(ye,{block:s,blockLayoutItem:null===ne||void 0===ne?void 0:ne[u],blockUUID:u,columnIndex:l,columnLayoutSettings:e,columnsInRow:null===n||void 0===n?void 0:n.length,createNewBlockItem:vn,first:0===l,height:c,isLoading:Ie===u&&Qe,onDrop:function(e){var n=e.columnIndex,o=e.rowIndex;sn(o,n,t,l)},onFetchBlockLayoutItem:function(e){return te((function(n){return _e(_e({},n),{},(0,i.Z)({},null===e||void 0===e?void 0:e.uuid,e))}))},onSave:en,pageBlockLayoutUUID:m,removeBlockLayoutItem:function(){return dn(u,t,l)},rowIndex:t,setSelectedBlockItem:Ae,updateLayout:function(e){return tn(t,l,e)},width:Math.floor(h*p)})},"row-".concat(t,"-column-").concat(l,"-").concat(u)))})),0===t&&e.push((0,I.jsx)(de,{horizontal:!0,onClickAdd:function(){return vn({rowIndexInsert:t})}},"layout-divider-".concat(t,"-top"))),e.push((0,I.jsx)(f.ZP,{children:o},"row-".concat(t))),e.push((0,I.jsx)(de,{horizontal:!0,onClickAdd:function(){return vn({rowIndexInsert:t+1})}},"layout-divider-".concat(t,"-bottom")))})),e}),[nn,rn,vn,Ie,Qe,ne,Ge,sn,dn,en,Ae,tn,m]),hn=(0,l.useMemo)((function(){return We&&0===(null===Ge||void 0===Ge?void 0:Ge.length)}),[We,Ge]),pn=(0,l.useMemo)((function(){return(0,I.jsx)(f.ZP,{justifyContent:"center",children:(0,I.jsxs)(x.Z,{my:3*P.HN,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:P.Mq,children:[(0,I.jsx)(x.Z,{mb:1,children:(0,I.jsx)(q.Z,{center:!0,children:"Create a custom dashboard"})}),(0,I.jsx)(g.ZP,{center:!0,default:!0,children:"Add customizable charts with the exact insights you need."}),v&&(0,I.jsx)(g.ZP,{center:!0,default:!0,children:"Start with a recommended set or freely define your own."})]}),(0,I.jsxs)(f.ZP,{alignContent:"center",justifyContent:"center",children:[v&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(H.ZP,{onClick:function(){return Xe({page_block_layout:v})},primary:!0,children:"Add recommended charts"}),(0,I.jsx)(x.Z,{mr:1})]}),(0,I.jsx)(H.ZP,{onClick:function(){return vn()},primary:!v,secondary:!!v,children:"Create new chart"})]})]})})}),[vn,v,Xe]),mn=(0,l.useMemo)((function(){return(null===rn||void 0===rn?void 0:rn.height)-(null===cn||void 0===cn?void 0:cn.height)}),[rn,cn]),xn=(0,l.useMemo)((function(){return!Ce}),[Ce]),gn=d.ZP.pipelines.detail(null===Q||void 0===Q||null===(n=Q.data_source)||void 0===n?void 0:n.pipeline_uuid).data,bn=(0,l.useMemo)((function(){return null===gn||void 0===gn?void 0:gn.pipeline}),[gn]),jn=(0,l.useMemo)((function(){return(0,_.YC)((null===bn||void 0===bn?void 0:bn.blocks)||[],"uuid")}),[bn]),yn=d.ZP.pipelines.list().data,Zn=(0,l.useMemo)((function(){return(0,_.YC)((null===yn||void 0===yn?void 0:yn.pipelines)||[],"uuid")}),[yn]),_n=d.ZP.pipeline_schedules.pipelines.list(null===bn||void 0===bn?void 0:bn.uuid).data,kn=(0,l.useMemo)((function(){return null===_n||void 0===_n?void 0:_n.pipeline_schedules}),[_n]),Cn=(0,l.useMemo)((function(){return _e(_e(_e({},Ce),Q),{},{data:_e(_e(_e({},null===Ce||void 0===Ce?void 0:Ce.data),null===Q||void 0===Q?void 0:Q.data),null===Ue||void 0===Ue?void 0:Ue.data)})}),[Ue,Q,Ce]),Pn=(0,l.useMemo)((function(){var e,n,t,o,i,r,l,u,c,a,d,s,v;return xn?null:(0,I.jsxs)("div",{style:{paddingBottom:P.Mq*P.iI,paddingTop:"undefined"===typeof h?R.Wi:0},children:[(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Chart name"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Human readable name for your chart."})]}),(0,I.jsx)(b.Z,{onChange:function(e){return Te((function(n){return _e(_e({},n),{},{name_new:e.target.value})}),{skip_render:!0})},placeholder:"Type name for chart...",primary:!0,setContentOnMount:!0,value:(null===Q||void 0===Q?void 0:Q.name_new)||""})]}),(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Chart type"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Choose how you want to display your data."})]}),(0,I.jsx)(p.Z,{onChange:function(e){return Te((function(n){return _e(_e({},n),{},{configuration:{chart_type:e.target.value}})}),{skip_render:!0})},placeholder:"Select chart type",primary:!0,value:(null===Q||void 0===Q||null===(e=Q.configuration)||void 0===e?void 0:e.chart_type)||"",children:j.CK.concat(j.oV.CUSTOM).map((function(e){return(0,I.jsx)("option",{value:e,children:(0,Z.kC)(e)},e)}))})]}),(0,I.jsx)(x.Z,{mt:P.Mq,children:(0,I.jsx)(W.Z,{light:!0})}),(0,I.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:(0,I.jsx)(q.Z,{children:"Data source"})}),(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Data source type"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Configure where the data for this chart comes from."})]}),(0,I.jsx)(p.Z,{onChange:function(e){return Te((function(n){return _e(_e({},n),{},{data_source:_e(_e({},null===n||void 0===n?void 0:n.data_source),{},{type:e.target.value})})}),{skip_render:!0})},placeholder:"Select data source type",primary:!0,value:(null===Q||void 0===Q||null===(n=Q.data_source)||void 0===n?void 0:n.type)||"",children:F.tW.map((function(e){return(0,I.jsx)("option",{value:e,children:(0,Z.kC)(F.Qj[e])},e)}))})]}),[F.XO.BLOCK,F.XO.BLOCK_RUNS,F.XO.PIPELINE_RUNS,F.XO.PIPELINE_SCHEDULES,F.XO.SYSTEM_METRICS].includes(null===Q||void 0===Q||null===(t=Q.data_source)||void 0===t?void 0:t.type)&&(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Pipeline UUID"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Select the pipeline the data source comes from."})]}),(0,I.jsxs)(p.Z,{monospace:!0,onChange:function(e){return Te((function(n){return _e(_e({},n),{},{data_source:_e(_e({},null===n||void 0===n?void 0:n.data_source),{},{block_uuid:null,pipeline_schedule_id:null,pipeline_uuid:e.target.value})})}),{skip_render:!0})},primary:!0,value:(null===Q||void 0===Q||null===(o=Q.data_source)||void 0===o?void 0:o.pipeline_uuid)||"",children:[(0,I.jsx)("option",{value:null}),null===Zn||void 0===Zn?void 0:Zn.map((function(e){var n=e.uuid;return(0,I.jsx)("option",{value:n,children:n},n)}))]})]})}),[F.XO.PIPELINE_RUNS].includes(null===Q||void 0===Q||null===(i=Q.data_source)||void 0===i?void 0:i.type)&&(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Trigger"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Select the trigger that the pipeline runs should belong to."})]}),(0,I.jsxs)(p.Z,{monospace:!0,onChange:function(e){return Te((function(n){return _e(_e({},n),{},{data_source:_e(_e({},null===n||void 0===n?void 0:n.data_source),{},{pipeline_schedule_id:e.target.value})})}),{skip_render:!0})},primary:!0,value:(null===Q||void 0===Q||null===(r=Q.data_source)||void 0===r?void 0:r.pipeline_schedule_id)||"",children:[(0,I.jsx)("option",{value:null}),null===kn||void 0===kn?void 0:kn.map((function(e){var n=e.id,t=e.name;return(0,I.jsx)("option",{value:n,children:t},n)}))]})]})}),[F.XO.BLOCK,F.XO.SYSTEM_METRICS].includes(null===Q||void 0===Q||null===(l=Q.data_source)||void 0===l?void 0:l.type)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Block UUID"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Select the block the data source comes from."})]}),(0,I.jsxs)(p.Z,{monospace:!0,onChange:function(e){return Te((function(n){return _e(_e({},n),{},{data_source:_e(_e({},null===n||void 0===n?void 0:n.data_source),{},{block_uuid:e.target.value})})}),{skip_render:!0})},primary:!0,value:(null===Q||void 0===Q||null===(u=Q.data_source)||void 0===u?void 0:u.block_uuid)||"",children:[(0,I.jsx)("option",{value:null}),null===jn||void 0===jn?void 0:jn.map((function(e){var n=e.uuid;return(0,I.jsx)("option",{value:n,children:n},n)}))]})]}),(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Partitions"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Enter a positive or a negative number. If positive, then data from the block will be the most recent N partitions. If negative, then data from the block will be the oldest N partitions."}),(0,I.jsx)(x.Z,{mt:1,children:(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"Leave blank if you want the chart to execute the block and display the data produced from that ad hoc block execution."})})]}),(0,I.jsx)(b.Z,{monospace:!0,onChange:function(e){return Te((function(n){return _e(_e({},n),{},{data_source:_e(_e({},null===n||void 0===n?void 0:n.data_source),{},{partitions:"undefined"!==typeof e.target.value?Number(e.target.value):e.target.value})})}),{skip_render:!0})},placeholder:"Enter number of partitions",primary:!0,setContentOnMount:!0,type:"number",value:(null===Q||void 0===Q||null===(c=Q.data_source)||void 0===c?void 0:c.partitions)||""})]})]}),(0,I.jsxs)(x.Z,{mt:P.Mq,px:P.cd,children:[(0,I.jsxs)(x.Z,{mb:1,children:[(0,I.jsx)(g.ZP,{bold:!0,children:"Refresh interval"}),(0,I.jsx)(g.ZP,{muted:!0,small:!0,children:"How frequent do you want this chart to automatically fetch new data from its data source? Enter a number in milliseconds (e.g. 1000ms is 1 second)."})]}),(0,I.jsx)(b.Z,{monospace:!0,onChange:function(e){return Te((function(n){return _e(_e({},n),{},{data_source:_e(_e({},null===n||void 0===n?void 0:n.data_source),{},{refresh_interval:e.target.value})})}),{skip_render:!0})},placeholder:"Enter number for refresh interval",primary:!0,setContentOnMount:!0,type:"number",value:(null===Q||void 0===Q||null===(a=Q.data_source)||void 0===a?void 0:a.refresh_interval)||6e4})]}),(0,I.jsx)(x.Z,{mt:P.Mq,children:(0,I.jsx)(W.Z,{light:!0})}),(0,I.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:(0,I.jsx)(q.Z,{children:"Chart display settings"})}),(0,I.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:null!==Cn&&void 0!==Cn&&Cn.data_source?(0,I.jsxs)(g.ZP,{default:!0,children:["Number of columns from data source:"," ","undefined"!==typeof(null===Cn||void 0===Cn||null===(d=Cn.data)||void 0===d?void 0:d.columns)?(0,I.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:null===Cn||void 0===Cn||null===(s=Cn.data)||void 0===s||null===(v=s.columns)||void 0===v?void 0:v.length}):(0,I.jsx)(x.Z,{mt:1,children:(0,I.jsx)(A.Z,{inverted:!0,small:!0})})]}):(0,I.jsx)(g.ZP,{default:!0,children:"Please select a data source type above."})}),(0,I.jsx)(x.Z,{mt:P.Mq,px:P.cd,children:(0,I.jsx)(M,{block:Cn,updateConfiguration:function(e,n){Te((function(n){return _e(_e({},n),{},{configuration:_e(_e({},null===n||void 0===n?void 0:n.configuration),e)})}),n)}})})]})}),[xn,Cn,jn,Q,kn,Zn,Te,h]),wn=(0,l.useMemo)((function(){return Ce&&(0,I.jsxs)(x.Z,{py:P.cd,children:[(0,I.jsxs)(x.Z,{mb:P.Mq,px:P.cd,children:[(0,I.jsx)(x.Z,{mb:1,children:(0,I.jsx)(q.Z,{children:"Custom code"})}),(0,I.jsxs)(g.ZP,{default:!0,children:["Write code for custom data sources, parsing, etc. For more information on what is possible, please check out the"," ",(0,I.jsx)(z.Z,{href:"https://docs.mage.ai/visualizations/dashboards#custom-code-for-chart",openNewWindow:!0,children:"chart documentation"}),"."]})]}),(0,I.jsx)(L.Z,{autoHeight:!0,block:_e(_e({},Me),Ce),onChange:function(e){Te((function(n){return _e(_e({},n),{},{content:e})}),{skip_render:!0})},value:(null===Q||void 0===Q?void 0:Q.content)||(null===Me||void 0===Me?void 0:Me.content)||"",width:"100%"})]})}),[Me,Q,Ce,Te]),In=(0,l.useMemo)((function(){return(0,I.jsx)(x.Z,{p:P.cd,children:(0,I.jsxs)(f.ZP,{children:[(0,I.jsx)(H.ZP,{fullWidth:!0,loading:Qe,onClick:function(){return $e(Q)},primary:!0,children:"Save changes"}),(0,I.jsx)(x.Z,{mr:1}),(0,I.jsx)(H.ZP,{fullWidth:!0,onClick:function(){return Ae(null)},secondary:!0,children:"Back to dashboard"})]})})}),[Qe,Q,Ae,$e]);return(0,I.jsxs)(D.Z,{after:wn,afterHeightOffset:h||0,afterHidden:xn,afterMousedownActive:ve,afterWidth:ce,before:Pn,beforeDraggableTopOffset:h?h-R.Wi:0,beforeFooter:!xn&&In,beforeHeader:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(E.Z,{breadcrumbs:[{label:function(){return"Back to dashboard"},onClick:function(){return Ae(null)}},{bold:!0,label:function(){return(null===Ce||void 0===Ce?void 0:Ce.name)||(null===Ce||void 0===Ce?void 0:Ce.uuid)}}]})}),beforeHeaderOffset:6*P.iI,beforeHeightOffset:h||0,beforeHidden:xn,beforeMousedownActive:ge,beforeWidth:pe,contained:!0,excludeOffsetFromBeforeDraggableLeft:!0,headerOffset:h||0,hideAfterCompletely:!0,hideBeforeCompletely:!0,leftOffset:t||0,mainContainerRef:le,setAfterMousedownActive:fe,setAfterWidth:ae,setBeforeMousedownActive:be,setBeforeWidth:me,children:[(0,I.jsxs)("div",{ref:je,style:{position:"relative"},children:[Ce&&Be&&(0,I.jsx)("div",{style:{position:"absolute",width:"100%"},children:(0,I.jsx)(T.Z,{})}),(0,I.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,I.jsx)(U.Z,{flex:1}),xn&&!hn&&(0,I.jsx)(x.Z,{p:P.cd,children:(0,I.jsx)(H.ZP,{beforeIcon:(0,I.jsx)(Y.Add,{size:2*P.iI}),onClick:function(){return vn()},primary:!0,children:"Create new chart"})})]})]}),(0,I.jsxs)(u.W,{backend:c.PD,children:[Ce&&(0,I.jsx)(ye,{block:_e(_e({},Me),Ce),blockLayoutItem:_e(_e(_e({},Me),Ue),{},{configuration:_e(_e(_e({},null===Me||void 0===Me?void 0:Me.configuration),null===Ue||void 0===Ue?void 0:Ue.configuration),null===Q||void 0===Q?void 0:Q.configuration),data:Ue?null===Ue||void 0===Ue?void 0:Ue.data:null===Me||void 0===Me?void 0:Me.data,data_source:_e(_e(_e({},null===Me||void 0===Me?void 0:Me.data_source),null===Ue||void 0===Ue?void 0:Ue.data_source),null===Q||void 0===Q?void 0:Q.data_source)}),blockUUID:null===Ce||void 0===Ce?void 0:Ce.uuid,detail:!0,disableDrag:!0,height:mn,pageBlockLayoutUUID:m,setSelectedBlockItem:Ae,width:null===rn||void 0===rn?void 0:rn.width}),(0,I.jsx)("div",{style:{display:Ce||hn?"none":null},children:fn}),!Ce&&hn&&pn]}),(0,I.jsx)(x.Z,{mb:2})]})}},75399:function(e,n,t){t.d(n,{Qj:function(){return c},XO:function(){return i},hN:function(){return r},tW:function(){return u}});var o,i,r,l=t(82394);!function(e){e.BLOCK="block",e.BLOCK_RUNS="block_runs",e.CHART_CODE="chart_code",e.PIPELINES="pipelines",e.PIPELINE_RUNS="pipeline_runs",e.PIPELINE_SCHEDULES="pipeline_schedules",e.SYSTEM_METRICS="system_metrics"}(i||(i={})),function(e){e.HTML="html",e.JPEG="jpeg",e.JPG="jpg",e.PNG="png"}(r||(r={}));var u=[i.BLOCK,i.BLOCK_RUNS,i.CHART_CODE,i.PIPELINES,i.PIPELINE_RUNS,i.PIPELINE_SCHEDULES,i.SYSTEM_METRICS],c=(o={},(0,l.Z)(o,i.BLOCK,"Block data output"),(0,l.Z)(o,i.BLOCK_RUNS,"Block runs"),(0,l.Z)(o,i.CHART_CODE,"Custom code"),(0,l.Z)(o,i.PIPELINES,"Pipelines"),(0,l.Z)(o,i.PIPELINE_RUNS,"Pipeline runs"),(0,l.Z)(o,i.PIPELINE_SCHEDULES,"Triggers"),(0,l.Z)(o,i.SYSTEM_METRICS,"System metrics"),o)}}]);