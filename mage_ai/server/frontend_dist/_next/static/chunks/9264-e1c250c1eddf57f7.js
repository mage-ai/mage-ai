"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9264],{27277:function(e,n,t){var o=t(82394),i=t(21831),r=t(82684),c=t(39643),l=t(44688),u=t(28598);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.highlightedItemIndexInitial,t=void 0===n?null:n,o=e.itemGroups,a=e.noResultGroups,s=e.onHighlightItemIndexChange,f=e.onMouseEnterItem,p=e.onMouseLeaveItem,m=e.onSelectItem,h=e.renderEmptyState,v=e.searchQuery,g=e.selectedItem,b=e.setItemRefs,x=e.uuid,j=(0,r.useState)(!0),C=j[0],k=j[1],O=(0,r.useMemo)((function(){var e=[],n=o.reduce((function(n,t){var o=t.items.filter((function(e){return!v||function(e,n){return e.searchQueries.filter((function(e){return String(e).toLowerCase().includes(n.toLowerCase())})).length>=1}(e,v)}));return 0===o.length?n:(e.push.apply(e,(0,i.Z)(o)),n.concat(d(d({},t),{},{items:o})))}),[]);return{itemGroups:n,itemsFlattened:e}}),[o,v]),Z=O.itemGroups,y=O.itemsFlattened;a&&0===y.length&&(Z.push.apply(Z,(0,i.Z)(a)),y.push.apply(y,(0,i.Z)(a.reduce((function(e,n){var t=n.items;return e.concat(t)}),[]))));var _=(0,r.useRef)(null);_.current=y.map((function(){return(0,r.createRef)()}));var T=(0,r.useState)(t),P=T[0],E=T[1],S=(0,r.useCallback)((function(e){null===s||void 0===s||s(e),E(e)}),[s,E]),I=y[P],w=(0,l.y)(),A=w.registerOnKeyDown,R=w.unregisterOnKeyDown;(0,r.useEffect)((function(){return function(){return R(x)}}),[R,x]),null===A||void 0===A||A(x,(function(e,n,t){var o,i=!0,r=y.length,l=y.findIndex((function(e,o){var i=e.keyboardShortcutValidation;return null===i||void 0===i?void 0:i({keyHistory:t,keyMapping:n},o)})),u=n[c.Gs]&&!n[c.XR]&&!g;return-1!==l?(e.preventDefault(),m(y[l]),k(i),S(l)):(n[c.Uq]||u)&&y[P]?(u&&e.preventDefault(),m(y[P]),k(i),S(P)):(n[c.Bu]?(i=!1,o=null===P?r-1:P-1):n[c.kD]?(i=!1,o=null===P?0:P+1):n[c.vP]&&S(null),"undefined"!==typeof o&&(o>=r?o=0:o<=-1&&(o=r-1),o>=0&&o<=r-1?(S(o),e.preventDefault()):S(null)),void k(i))}),[P,y,g,S,k]),(0,r.useEffect)((function(){null===b||void 0===b||b(_)}),[_,y,b]),(0,r.useEffect)((function(){var e=null===P||"undefined"===typeof P||P>=y.length;(null===v||void 0===v?void 0:v.length)>=1&&e&&S(0)}),[P,y,v,S]);var D=(0,r.useCallback)((function(){return k(!0)}),[k]);return(0,r.useEffect)((function(){return window.addEventListener("mousemove",D),function(){window.removeEventListener("mousemove",D)}}),[D]),0===Z.length&&h?h():(0,u.jsx)(u.Fragment,{children:Z.map((function(e,n){var t=e.items,o=e.renderItem,i=e.renderGroupHeader,r=e.uuid,c=n>=1?Z.slice(0,n).reduce((function(e,n){return e+n.items.length}),0):0,l=t.map((function(e,n){var t=e.itemObject,i=e.value,r=i===(null===I||void 0===I?void 0:I.value),l=n+c,a=(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t.uuid);return(0,u.jsx)("div",{id:"item-".concat(i,"-").concat(a),onMouseMove:function(){return C&&S(l)},ref:_.current[l],children:o(e,{highlighted:r,onClick:function(){return m(e)},onMouseEnter:function(){return null===f||void 0===f?void 0:f(e)},onMouseLeave:function(){return null===p||void 0===p?void 0:p(e)}},n,l)},"item-".concat(i,"-").concat(a))}));return l.length>=1&&(0,u.jsxs)("div",{children:[null===i||void 0===i?void 0:i(),l]},r||"group-uuid-".concat(n))}))})}},88494:function(e,n,t){t.d(n,{MB:function(){return m},Nk:function(){return a},T5:function(){return d},_A:function(){return f},a3:function(){return p},wx:function(){return s}});var o=t(38626),i=t(44897),r=t(55283),c=t(42631),l=t(70515),u=t(30160),a=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-n38rkq-0"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;overflow:hidden;"," "," ",""],r.Kf,(function(e){return e.addBottomPadding&&"\n    padding-bottom: ".concat(2*l.tr,"px;\n  ")}),(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).table,";\n  ")}),(function(e){return!e.executedAndIdle&&"\n    border-bottom-left-radius: ".concat(c.n_,"px;\n    border-bottom-right-radius: ").concat(c.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")})),d=o.default.div.withConfig({displayName:"indexstyle__OutputRowStyle",componentId:"sc-n38rkq-1"})([""," "," ",""],(function(e){return e.first&&"\n    padding-top: ".concat(l.iI*l.cd,"px;\n  ")}),(function(e){return e.last&&"\n    padding-bottom: ".concat(l.iI*l.cd,"px;\n  ")}),(function(e){return e.contained&&"\n    padding-left: ".concat(r.oh,"px;\n    padding-right: ").concat(l.iI*l.cd,"px;\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__HTMLOutputStyle",componentId:"sc-n38rkq-2"})([""," table{"," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;}td,th{padding:0 8px;}a{","}"],u.IH,r.Kf,(function(e){return"\n      color: ".concat((e.theme.interactive||i.Z.interactive).linkPrimary,";\n    ")})),f=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoStyle",componentId:"sc-n38rkq-3"})([""," border-bottom-style:solid;border-bottom-width:2px;border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;",""],r.Kf,(function(e){return"\n    background-color: ".concat((e.theme.borders||i.Z.borders).light,";\n    border-bottom-left-radius: ").concat(c.n_,"px;\n    border-bottom-right-radius: ").concat(c.n_,"px;\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoContentStyle",componentId:"sc-n38rkq-4"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],l.iI,r.oh,l.iI*l.cd,l.iI),m=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoBorderStyle",componentId:"sc-n38rkq-5"})(["height:1px;width:100%;",""],(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||i.Z.borders).medium,";\n  ")}))},12869:function(e,n,t){var o=t(21831),i=t(82394),r=t(75582),c=t(82684),l=t(89565),u=t.n(l),a=t(62302),d=t(69864),s=t(40761),f=t(44425),p=t(71180),m=t(39867),h=t(75810),v=t(93859),g=t(17586),b=t(15338),x=t(97618),j=t(55485),C=t(48339),k=t(57653),O=t(35185),Z=t(38276),y=t(30160),_=t(12468),T=t(35686),P=t(98464),E=t(72473),S=t(88494),I=t(15135),w=t(65044),A=t(70515),R=t(11498),D=t(47041),M=t(41429),N=t(85385),B=t(74052),L=t(81728),U=t(72619),F=t(28598);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z={appearAbove:!0,appearBefore:!0,block:!0,size:null,widthFitContent:!0},Q={basic:!0,iconOnly:!0,noPadding:!0,transparent:!0};n.Z=function(e){var n=e.block,t=e.blockMetadata,i=e.buttonTabs,l=e.collapsed,G=e.contained,W=void 0===G||G,K=e.dynamicBlock,q=e.dynamicChildBlock,Y=e.hasError,V=e.hasOutput,X=e.hideExtraInfo,J=e.isInProgress,$=e.mainContainerWidth,ee=e.messages,ne=e.openSidekickView,te=e.pipeline,oe=e.runCount,ie=e.runEndTime,re=e.runStartTime,ce=e.selected,le=e.selectedTab,ue=e.setCollapsed,ae=e.setErrors,de=e.setOutputBlocks,se=e.setSelectedOutputBlock,fe=e.setSelectedTab,pe=n||{},me=pe.color,he=pe.status,ve=pe.type,ge=pe.uuid,be=(0,c.useMemo)((function(){return{blockColor:me,blockType:ve,dynamicBlock:K,dynamicChildBlock:q,hasError:Y,selected:ce}}),[me,ve,K,q,Y,ce]),xe=(0,c.useMemo)((function(){return(null===ee||void 0===ee?void 0:ee.length)||0}),[ee]),je=f.DA.EXECUTED===he||!J&&0===oe&&xe>=1||!J&&oe>=1&&ie>=re,Ce=(0,c.useState)(),ke=Ce[0],Oe=Ce[1],Ze=(0,c.useState)(),ye=Ze[0],_e=Ze[1],Te=(0,c.useState)(null),Pe=Te[0],Ee=Te[1],Se=(0,c.useMemo)((function(){var e,n;return null===(e=new s.Z)||void 0===e||null===(n=e.decodedToken)||void 0===n?void 0:n.token}),[]),Ie=(0,d.Db)((function(){return T.ZP.block_outputs.pipelines.downloads.detailAsync(null===te||void 0===te?void 0:te.uuid,ge,{token:Se},{onDownloadProgress:function(e){return Ee((Number((null===e||void 0===e?void 0:e.loaded)||0)/1e6).toFixed(3))},responseType:R.E.BLOB})}),{onSuccess:function(e){return(0,U.wD)(e,{callback:function(e){(0,B.uS)(e,"".concat(ge,".").concat(I.Lu.CSV))},onErrorCallback:function(e,n){return null===ae||void 0===ae?void 0:ae({errors:n,response:e})}})}}),we=(0,r.Z)(Ie,2),Ae=we[0],Re=we[1].isLoading;(0,c.useEffect)((function(){J||_e(100)}),[J]);var De=function(e){return Array.isArray(e)?e.join("\n"):e},Me=(0,c.useMemo)((function(){return ee.reduce((function(e,n){var t=e.at(-1);if(C.jU.includes(null===t||void 0===t?void 0:t.type)&&(null===t||void 0===t?void 0:t.type)===n.type&&!De(null===n||void 0===n?void 0:n.data).match(w.Lz)){if(Array.isArray(t.data))t.data.concat(n.data);else if("string"===typeof t.data){var o=De(n.data)||"";t.data=[t.data,o].join("\n")}}else C.jU.includes(null===n||void 0===n?void 0:n.type)&&!De(null===n||void 0===n?void 0:n.data).match(w.Lz)?e.push(H(H({},n),{},{data:De(n.data)})):e.push(H({},n));return e}),[])}),[ee]),Ne=(0,c.useMemo)((function(){return(0,F.jsx)(O.Z,{progress:ye})}),[ye]),Be=f.tf.DBT===(null===n||void 0===n?void 0:n.type),Le=(0,P.Z)(Y);(0,c.useEffect)((function(){Be&&!Le&&Y&&fe(M.Rj)}),[Y,Le,Be,fe]);var Ue=(0,c.useMemo)((function(){var e=function(e,n){var t=e.columns,o=e.index,i=e.rows,r=e.shape,c=n.borderTop,l=n.selected;return r&&Oe(r),i.length>=1&&(0,F.jsx)(v.Z,{columns:t,disableScrolling:!l,index:o,maxHeight:60*A.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!c,rows:i,width:$-(2+A.cd*A.iI*2+2+D.nn)},"data-table-".concat(o))},n=[],t=[],i=[];return null===Me||void 0===Me||Me.forEach((function(r,c){var l=r.data,d=r.type;if(l&&0!==(null===l||void 0===l?void 0:l.length)){var s=[];s=(s=Array.isArray(l)?l:[l]).filter((function(e){return e}));var f=[];s.forEach((function(e){if(d===C.Gi.TEXT_HTML)f.push(e);else if(e&&"string"===typeof e){var n=e.split("\n");f.push.apply(f,(0,o.Z)(n))}else"object"===typeof f&&f.push(e)}));var p=f.length,m=[];f.forEach((function(n,o){var r,l={contained:W,first:0===c&&0===o,last:c===Me.length-1&&o===p-1},s=c>=1;if("string"===typeof n&&n.match(w.Gr)){var f=n.split("\n"),h=[];f.forEach((function(e){if(e.match(w.Gr)){var t=e.split(w.Vc),o=t[t.length-1];(0,L.Pb)(o)&&i.push(JSON.parse(o))}else h.push(e);n=h.length>=1?h.join("\n"):null}))}if(null!==n){if("string"===typeof n&&n.match(w.Lz)){var v=n.split(w.gr),g=v[v.length-1],b=g.split("FloatProgress");if(v.length>=2&&(g=b[0]),(0,L.Pb)(g)){var x=JSON.parse(g),j=x.data,k=x.type;if(C.Gi.TABLE===k){!0;var O=e(j,{borderTop:s,selected:ce});t.push(O),Be||(r=O)}}}else if(d===C.Gi.TABLE){!0;var Z=e((0,L.Pb)(n)?JSON.parse(n):n,{borderTop:s,selected:ce});t.push(Z),Be||(r=Z)}else if(C.jU.includes(d)){var _,T=null===(_=n)||void 0===_?void 0:_.split("\\n");r=(0,F.jsx)(S.T5,H(H({},l),{},{children:T.map((function(e){return(0,F.jsx)(y.ZP,{monospace:!0,preWrap:!0,children:(0,F.jsx)(u(),{children:e})},e)}))}))}else if(d===C.Gi.TEXT_HTML)n&&(r=(0,F.jsx)(S.T5,H(H({},l),{},{children:(0,F.jsx)(S.wx,{monospace:!0,children:(0,F.jsx)(a.Z,{html:n})})})));else if(d===C.Gi.IMAGE_PNG)r=(0,F.jsx)("div",{style:{backgroundColor:"white"},children:(0,F.jsx)("img",{alt:"Image ".concat(c," from code output"),src:"data:image/png;base64, ".concat(n)})});else if(d===C.Gi.PROGRESS){var P=parseInt(n);_e(P>90?90:P)}r&&m.push((0,F.jsx)("div",{children:r},"code-output-".concat(c,"-").concat(o)))}})),m.length>=1&&n.push(m)}})),J&&(null===te||void 0===te?void 0:te.type)===k.qL.PYSPARK&&n.unshift([(0,F.jsx)(S.T5,{contained:!0,children:(0,F.jsx)(Z.Z,{mt:1,children:Ne})},"progress_bar")]),{content:n,tableContent:t,testContent:i}}),[Me,W,Be,J,$,te,Ne,ce]),Fe=Ue.content,Ge=Ue.tableContent,He=Ue.testContent,ze=(null===ke||void 0===ke?void 0:ke[1])||0,Qe=ze>30?" (30 out of ".concat(ze," columns displayed)"):"",We=(0,c.useMemo)((function(){var e;if(Be&&le){var n=le.uuid;if(M.$m.uuid===n)(null===Ge||void 0===Ge?void 0:Ge.length)>=1?e=Ge:J||(e=(0,F.jsx)(Z.Z,{px:2,py:1,children:(0,F.jsx)(y.ZP,{muted:!0,children:Y?"Error, check logs.":"No preview to display yet, try running the block."})}));else if(M.Rj.uuid===n)(null===Fe||void 0===Fe?void 0:Fe.length)>=1?e=Fe:J||(e=(0,F.jsx)(Z.Z,{px:2,py:1,children:(0,F.jsx)(y.ZP,{muted:!0,children:Y?"Error, check logs.":"No logs to display yet, try running the block."})}));else if(M.Jt.uuid===n){var o,r=null===t||void 0===t||null===(o=t.dbt)||void 0===o?void 0:o.sql;e=r?(0,F.jsx)(h.Z,{autoHeight:!0,language:I.Lu.SQL,padding:!0,readOnly:!0,value:r,width:"100%"}):null}else if(M.gM.uuid===n){var c,l=null===t||void 0===t||null===(c=t.dbt)||void 0===c?void 0:c.lineage;e=l?(0,F.jsx)(g.Z,{disabled:!0,enablePorts:!1,height:55*A.iI,pannable:ce,pipeline:H(H({},te),{},{blocks:l}),zoomable:ce}):null}}else e=Fe;return(0,F.jsxs)(F.Fragment,{children:[i,e]})}),[t,i,Fe,Y,Be,J,te,ce,le,Ge]);return i||Y||V?(0,F.jsxs)(F.Fragment,{children:[W&&(0,F.jsxs)(S.Nk,H(H({},be),{},{addBottomPadding:J&&(null===te||void 0===te?void 0:te.type)===k.qL.PYSPARK,blockType:ve,dynamicBlock:K,dynamicChildBlock:q,executedAndIdle:je,hasError:Y,selected:ce,children:[!l&&(null===He||void 0===He?void 0:He.length)>=1&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Z.Z,{py:2,children:(0,F.jsx)(S.T5,{contained:!0,children:He.map((function(e,n){var t=e.error,o=e.message,i=e.stacktrace;return(0,F.jsxs)(Z.Z,{mt:n>=1?3:0,children:[(0,F.jsx)(y.ZP,{monospace:!0,preWrap:!0,children:(0,F.jsx)(u(),{children:"".concat(o).concat(t?" "+t:"")})}),null===i||void 0===i?void 0:i.map((function(e){return(0,F.jsx)(y.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:(0,F.jsx)(u(),{children:e})},e)}))]},o)}))})}),(0,F.jsx)(Z.Z,{mb:Y?2:0,children:(0,F.jsx)(b.Z,{medium:!0})})]}),!l&&We]})),!W&&We,je&&!X&&(0,F.jsxs)(S._A,H(H({},be),{},{blockType:ve,dynamicBlock:K,dynamicChildBlock:q,hasError:Y,selected:ce,children:[(0,F.jsx)(S.MB,{}),(0,F.jsxs)(j.ZP,{justifyContent:"space-between",children:[ue&&(0,F.jsx)(x.Z,{alignItems:"center",px:1,children:(0,F.jsx)(p.Z,H(H({},Q),{},{onClick:function(){return ue(!l)},children:l?(0,F.jsxs)(j.ZP,{alignItems:"center",children:[(0,F.jsx)(E._M,{muted:!0,size:2*A.iI}),"\xa0",(0,F.jsx)(y.ZP,{default:!0,children:"Expand output"})]}):(0,F.jsxs)(j.ZP,{alignItems:"center",children:[(0,F.jsx)(E.Kh,{muted:!0,size:2*A.iI}),ke&&(0,F.jsx)(Z.Z,{ml:2,children:(0,F.jsx)(y.ZP,{children:"".concat(ke[0]," rows x ").concat(ke[1]," columns").concat(Qe)})})]})}))}),(0,F.jsx)(S.a3,{children:(0,F.jsxs)(j.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,F.jsx)(_.Z,H(H({},z),{},{label:oe>=1&&re?"Last run at ".concat(new Date(re.valueOf()).toLocaleString()):Y?"Block executed with errors":"Block executed successfully",children:(0,F.jsxs)(j.ZP,{alignItems:"center",children:[oe>=1&&Number(ie)>Number(re)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(y.ZP,{small:!0,children:[(Number(ie)-Number(re))/1e3,"s"]}),(0,F.jsx)(Z.Z,{mr:1})]}),!Y&&(0,F.jsx)(E.Jr,{size:2*A.iI,success:!0}),Y&&(0,F.jsx)(m.Z,{danger:!0,size:2*A.iI,children:(0,F.jsx)(y.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})})),!Y&&!f.Qj.includes(ve)&&(0,F.jsx)(Z.Z,{pl:2,children:(0,F.jsxs)(j.ZP,{alignItems:"center",children:[(0,F.jsx)(_.Z,H(H({},z),{},{label:"Expand table",children:(0,F.jsx)(p.Z,H(H({},Q),{},{onClick:function(){(0,B.OF)(null===te||void 0===te?void 0:te.uuid,ge),null===ne||void 0===ne||ne(N.cH.DATA),null===de||void 0===de||de((function(e){return e.find((function(e){return e.uuid===ge}))?e:(null===se||void 0===se||se(n),e.concat(n))}))},children:(0,F.jsx)(E.M0,{muted:!0,size:1.75*A.iI})}))})),(0,F.jsx)(Z.Z,{pl:2}),(0,F.jsx)(_.Z,H(H({},z),{},{forceVisible:Re,label:Re?"".concat(Pe||0,"mb downloaded..."):"Save output as CSV file",children:(0,F.jsx)(p.Z,H(H({},Q),{},{compact:!0,loading:Re,onClick:function(){Ee(null),Ae()},children:(0,F.jsx)(E.vc,{muted:!0,size:1.75*A.iI})}))}))]})})]})})]})]}))]}):null}},41429:function(e,n,t){t.d(n,{$m:function(){return i},C:function(){return a},Jt:function(){return c},Rj:function(){return r},Xy:function(){return u},gM:function(){return l},vT:function(){return d}});var o=t(70515),i={uuid:"Preview results"},r={uuid:"Logs"},c={uuid:"SQL"},l={uuid:"Lineage"},u=function(e){var n,t,o=e.metadata,u=[r,c];return(null===o||void 0===o||null===(n=o.dbt)||void 0===n||null===(t=n.block)||void 0===t?void 0:t.snapshot)||(u.unshift(i),u.push(l)),u},a=2.5*o.iI,d="CodeBlock_HiddenBlock"},2501:function(e,n,t){t.d(n,{z:function(){return We},Z:function(){return qe}});var o=t(21831),i=t(75582),r=t(82394),c=t(12691),l=t.n(c),u=t(82684),a=t(38626),d=t(10975),s=t(14567),f=t(69864),p=t(57271),m=t(79757),h=t(71180),v=t(55485),g=t(38276),b=t(30160),x=t(55283),j=t(28598);var C=function(e){var n=e.blocks,t=e.onClick,o=(0,u.useContext)(a.ThemeContext);return(0,j.jsx)(v.ZP,{alignItems:"center",children:null===n||void 0===n?void 0:n.map((function(e){var n=e.color,i=e.type,r=e.uuid,c=(0,x.qn)(i,{blockColor:n,theme:o}).accentLight;return(0,j.jsx)(g.Z,{ml:1,mt:1,children:(0,j.jsx)(h.Z,{backgroundColor:c,compact:!0,onClick:function(){return t(e)},small:!0,children:(0,j.jsx)(b.ZP,{monospace:!0,small:!0,children:r})})},r)}))})},k=t(97618),O=t(26084),Z=t(85385),y=t(86735);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=function(e){var n=e.block,t=e.blocks,o=e.openSidekickView,r=e.pipeline,c=(0,u.useMemo)((function(){return(0,y.HK)(t,(function(e){return e.uuid}))}),[t]),l=(0,u.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.callback_blocks)||void 0===e?void 0:e.reduce((function(e,n){var t=null===c||void 0===c?void 0:c[n];return t?e.concat(t):e}),[])}),[n,c]),a=(0,u.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.conditional_blocks)||void 0===e?void 0:e.reduce((function(e,n){var t=null===c||void 0===c?void 0:c[n];return t?e.concat(t):e}),[])}),[n,c]),d=(0,u.useMemo)((function(){var e,t=[];return null===(e=Object.entries((null===r||void 0===r?void 0:r.extensions)||{}))||void 0===e||e.forEach((function(e){var o=(0,i.Z)(e,2),r=o[0],l=o[1].blocks;null===l||void 0===l||l.forEach((function(e){var o=e.upstream_blocks,i=e.uuid;if(null!==o&&void 0!==o&&o.includes(null===n||void 0===n?void 0:n.uuid)){var l=null===c||void 0===c?void 0:c[i];l&&t.push(T(T({},l),{},{extension_uuid:r}))}}))})),t}),[n,c,r]);return(0,j.jsxs)(j.Fragment,{children:[(null===a||void 0===a?void 0:a.length)>=1&&(0,j.jsx)(g.Z,{mt:1,children:(0,j.jsxs)(k.Z,{flexDirection:"column",children:[(0,j.jsx)(g.Z,{px:1,children:(0,j.jsx)(b.ZP,{bold:!0,muted:!0,children:"Conditionals"})}),(0,j.jsx)(C,{blocks:a,onClick:function(e){var n=e.uuid;return o(Z.cH.ADDON_BLOCKS,!0,{addon:O.Q.CONDITIONAL,blockUUID:n})}})]})}),(null===l||void 0===l?void 0:l.length)>=1&&(0,j.jsx)(g.Z,{mt:1,children:(0,j.jsxs)(k.Z,{flexDirection:"column",children:[(0,j.jsx)(g.Z,{px:1,children:(0,j.jsx)(b.ZP,{bold:!0,muted:!0,children:"Callbacks"})}),(0,j.jsx)(C,{blocks:l,onClick:function(e){var n=e.uuid;return o(Z.cH.ADDON_BLOCKS,!0,{addon:O.Q.CALLBACK,blockUUID:n})}})]})}),(null===d||void 0===d?void 0:d.length)>=1&&(0,j.jsx)(g.Z,{mt:1,children:(0,j.jsxs)(k.Z,{flexDirection:"column",children:[(0,j.jsx)(g.Z,{px:1,children:(0,j.jsx)(b.ZP,{bold:!0,muted:!0,children:"Extensions"})}),(0,j.jsx)(C,{blocks:d,onClick:function(e){var n=e.extension_uuid,t=e.uuid;return o(Z.cH.EXTENSIONS,!0,{blockUUID:t,extension:n})}})]})})]})},E=t(44425),S=t(90299),I=t(70652),w=t(39867),A=t(75810),R=t(12869),D=t(70374),M=t(35058),N=t(85108),B=t(70515),L=t(81728);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G=function(e){var n=e.addWidget,t=e.block,i=e.left,r=e.rightOffset,c=e.onClickCallback,l=e.open,a=e.parentRef,d=e.runBlock,s=e.topOffset,f=(0,u.useMemo)((function(){return M.CK.map((function(e){var o,i,r={configuration:{chart_type:e},language:t.language,type:E.tf.CHART,upstream_blocks:t?[t.uuid]:null},c=N.x8[e],l=(null===c||void 0===c||null===(o=c.configuration)||void 0===o?void 0:o.call(c,r))||{},u=E.t6.SQL===(null===t||void 0===t?void 0:t.language)?null:(null===c||void 0===c||null===(i=c.content)||void 0===i?void 0:i.call(c,r))||null,a=e;return t&&(a="".concat(a," for ").concat(t.uuid)),{label:function(){return(0,L.vg)(e)},onClick:function(){return n(F(F({},r),{},{name:"".concat(a," ").concat((0,L.Mp)()),configuration:F(F({},r.configuration),l),content:u}),{onCreateCallback:function(e){t&&E.t6.SQL!==t.language&&([E.DA.EXECUTED,E.DA.UPDATED].includes(t.status)?null===d||void 0===d||d({block:e,code:u,disableReset:!0}):null===d||void 0===d||d({block:t,runDownstream:!0}))}})},uuid:e}}))}),[M.CK,t,d]),p=(0,u.useMemo)((function(){return N._H.map((function(e){var o=e.label,i=F(F({},(0,e.widgetTemplate)({block:t})),{},{language:t.language,type:E.tf.CHART,upstream_blocks:t?[t.uuid]:null});return{label:o,onClick:function(){return n(i,{onCreateCallback:function(e){t&&E.t6.SQL!==t.language&&([E.DA.EXECUTED,E.DA.UPDATED].includes(t.status)?null===d||void 0===d||d({block:e,code:e.content,disableReset:!0}):null===d||void 0===d||d({block:t,runDownstream:!0}))}})},uuid:o()}}))}),[N._H,n,t,d]),m=[{isGroupingTitle:!0,label:function(){return"Custom charts"},uuid:"custom_charts"}].concat((0,o.Z)(f));return E.t6.SQL!==t.language&&m.push.apply(m,[{isGroupingTitle:!0,label:function(){return"Templates"},uuid:"chart_templates"}].concat((0,o.Z)(p))),(0,j.jsx)(D.Z,{items:m,left:i,onClickCallback:c,open:l,parentRef:a,rightOffset:r,topOffset:s,uuid:"CommandButtons/add_charts",width:25*B.iI})},H=t(50724),z=t(63403),Q=a.default.svg.withConfig({displayName:"Convert__SVGStyle",componentId:"sc-fmw0vr-0"})([""]),W=function(e){var n=e.fill,t=e.opacity,o=e.size,i=void 0===o?z.C:o,r=e.style,c=e.viewBox,l=void 0===c?"0 0 12 12":c;return(0,j.jsxs)(Q,{fill:n,height:i,opacity:t,style:r,viewBox:l,width:i,children:[(0,j.jsx)("path",{clipRule:"evenodd",d:"M2.5 1C1.67157 1 1 1.67157 1 2.5v.0625c0 .27614-.223858.5-.5.5s-.5-.22386-.5-.5V2.5C0 1.11929 1.11929 0 2.5 0h7C10.8807 0 12 1.11929 12 2.5v7c0 1.3807-1.1193 2.5-2.5 2.5h-7C1.11929 12 0 10.8807 0 9.5v-.0625c0-.27614.223858-.5.5-.5s.5.22386.5.5V9.5c0 .8284.67157 1.5 1.5 1.5h7c.8284 0 1.5-.6716 1.5-1.5v-7c0-.82843-.6716-1.5-1.5-1.5h-7z",fill:"url(#paint0_linear_1332_60037)",fillRule:"evenodd"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.05806 3.55806c.24408-.24408.6398-.24408.88388 0l2 2c.24408.24408.24408.6398 0 .88388l-2 2c-.24408.24408-.6398.24408-.88388 0-.24408-.24408-.24408-.6398 0-.88388l.93306-.93306H1C.654822 6.625.375 6.34518.375 6s.279822-.625.625-.625h5.99112l-.93306-.93306c-.24408-.24408-.24408-.6398 0-.88388z",fill:"#fff"}),(0,j.jsx)("defs",{children:(0,j.jsxs)("linearGradient",{id:"paint0_linear_1332_60037",x1:"-.618557",y1:"-.000001",x2:"10.5709",y2:".83113",gradientUnits:"userSpaceOnUse",children:[(0,j.jsx)("stop",{stopColor:"#FFCC19"}),(0,j.jsx)("stop",{offset:".585938",stopColor:"#2ECDF7"}),(0,j.jsx)("stop",{offset:"1",stopColor:"#9E7BFF"})]})})]})},K=t(46732),q=t(49130),Y=t(7267),V=t(48670),X=t(65956),J=t(4190),$=t(12468),ee=t(35686),ne=t(44897),te=t(48339),oe=t(72473),ie=t(41429),re=t(39643),ce=t(57653),le=t(61709),ue=t(58325),ae=t(72619),de=t(23780);function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pe=function(e){var n=e.addNewBlock,t=e.addWidget,o=e.block,r=e.blockContent,c=e.blocks,l=e.deleteBlock,d=e.executionState,s=e.fetchFileTree,p=e.fetchPipeline,m=e.hideExtraButtons,C=e.interruptKernel,k=e.isEditingBlock,O=e.openSidekickView,_=e.pipeline,T=e.project,P=e.runBlock,S=e.setBlockContent,I=e.setIsEditingBlock,A=e.savePipelineContent,R=e.setErrors,M=e.setOutputCollapsed,N=e.showConfigureProjectModal,L=(0,de.VI)(null,{},[],{uuid:"CommandButtons/".concat(null===o||void 0===o?void 0:o.uuid)}),U=(0,i.Z)(L,1)[0],F=o.all_upstream_blocks_executed,z=void 0===F||F,Q=o.color,se=o.language,pe=(o.metadata,o.type),me=o.uuid,he=(0,u.useRef)(null),ve=(0,u.useRef)(null),ge=(0,u.useRef)(null),be=(0,u.useRef)(null),xe=(0,u.useRef)(null),je=null===_||void 0===_?void 0:_.type,Ce=(0,u.useState)(!1),ke=Ce[0],Oe=Ce[1],Ze=(0,u.useState)(!1),ye=Ze[0],_e=Ze[1],Te=(0,u.useState)(!1),Pe=Te[0],Ee=Te[1],Se=(0,u.useState)(!1),Ie=Se[0],we=Se[1],Ae=(0,u.useState)(!1),Re=Ae[0],De=Ae[1],Me=(0,u.useContext)(a.ThemeContext),Ne=te.uF.IDLE!==d,Be=(0,x.qn)(pe,{blockColor:Q,theme:Me}).accent,Le=(0,u.useMemo)((function(){return je===ce.qL.STREAMING}),[je]),Ue=(0,u.useMemo)((function(){return je===ce.qL.INTEGRATION}),[je]),Fe=(0,u.useMemo)((function(){return(0,le.Ts)(o,c,"CommandButtons",n).map((function(e){return fe(fe({},e),{},{onClick:function(){return A().then((function(){return e.onClick()}))}})}))}),[n,o,c,A]),Ge=(0,u.useMemo)((function(){return(0,y.HK)(c,(function(e){return e.uuid}))}),[c]),He=(0,u.useMemo)((function(){return E.tf.DBT===(null===o||void 0===o?void 0:o.type)}),[o]),ze=(0,u.useMemo)((function(){return E.tf.MARKDOWN===(null===o||void 0===o?void 0:o.type)}),[o]),Qe=(0,f.Db)(ee.ZP.pipelines.useUpdate(null===_||void 0===_?void 0:_.uuid),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(){p()},onErrorCallback:function(e,n){return R({errors:n,response:e})}})}}),We=(0,i.Z)(Qe,2),Ke=We[0],qe=We[1].isLoading,Ye=(0,f.Db)(ee.ZP.llms.useCreate(),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(e){var n=e.llm;null!==n&&void 0!==n&&n.response&&S&&(null===S||void 0===S||S(null===n||void 0===n?void 0:n.response))},onErrorCallback:function(e,n){return U({errors:n,response:e})}})}}),Ve=(0,i.Z)(Ye,2),Xe=Ve[0],Je=(Ve[1].isLoading,(0,u.useMemo)((function(){var e=!(null!==T&&void 0!==T&&T.openai_api_key),n=function(e){null===N||void 0===N||N({header:(0,j.jsx)(g.Z,{mb:B.HN,children:(0,j.jsxs)(X.Z,{children:[(0,j.jsx)(b.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,j.jsx)(g.Z,{mt:1,children:(0,j.jsxs)(b.ZP,{warning:!0,children:["Read ",(0,j.jsx)(V.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onSaveSuccess:function(n){null!==n&&void 0!==n&&n.openai_api_key&&Ke({pipeline:{llm:e}})}})},t={request:{block_uuid:null===o||void 0===o?void 0:o.uuid,pipeline_uuid:null===_||void 0===_?void 0:_.uuid}};return[{label:function(){return"Document block (beta)"},onClick:function(){t.use_case=Y.z.GENERATE_DOC_FOR_BLOCK,e?n(t):Ke({pipeline:{llm:t}})},uuid:"Document block"},{label:function(){return"Document pipeline and all blocks (beta)"},onClick:function(){t.use_case=Y.z.GENERATE_DOC_FOR_PIPELINE,e?n(t):Ke({pipeline:{llm:t}})},uuid:"Document pipeline and all blocks"},{label:function(){return"Add comments in code (beta)"},onClick:function(){e?n(t):Xe({llm:{request:{block_code:r},use_case:Y.z.GENERATE_COMMENT_FOR_CODE}})},uuid:"Add comments in code"}]}),[o,r,Xe,_,T,N,Ke]));return(0,j.jsxs)(v.ZP,{alignItems:"center",children:[te.uF.QUEUED===d&&(0,j.jsx)(J.Z,{color:(Me||ne.Z).content.active,type:"cylon"}),te.uF.BUSY===d&&(0,j.jsx)(J.Z,{color:(Me||ne.Z).content.active}),P&&!Ne&&!Le&&(0,j.jsxs)(j.Fragment,{children:[!He&&(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:(0,j.jsxs)(b.ZP,{children:["Run block \xa0 \xa0",(0,j.jsx)(q.Z,{inline:!0,keyTextGroups:[[(0,ue.V5)()?re.RJ:re.hE,re.Lz]],monospace:!0,uuidForKey:me})]}),size:3*B.iI,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){z?P({block:o}):Ee(!0)},children:(0,j.jsx)(w.Z,{color:Be,size:3*B.iI,children:(0,j.jsx)(oe.Py,{black:!0,size:1.5*B.iI})})})}),He&&(0,j.jsx)(h.Z,{backgroundColor:Be,beforeIcon:(0,j.jsx)(oe.Py,{size:1.5*B.iI}),compact:!0,onClick:function(){z?P({block:o}):Ee(!0)},small:!0,children:se===E.t6.YAML?"Run command":"Compile & preview"}),(0,j.jsx)(H.Z,{disableEscape:!0,onClickOutside:function(){return Ee(!1)},open:Pe,children:(0,j.jsx)(D.Z,{items:[{label:function(){return"Execute block"},onClick:function(){return P({block:o})},uuid:"execute_block"},{label:function(){return"Execute with upstream blocks"},onClick:function(){return P({block:o,runUpstream:!0})},uuid:"execute_upstream"}],onClickCallback:function(){return Ee(!1)},open:Pe,parentRef:ge,rightOffset:13.25*B.iI,topOffset:4.5*B.iI,uuid:"execute_actions",width:25*B.iI})})]}),Ne&&(0,j.jsx)(g.Z,{ml:B.cd,children:(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:(0,j.jsxs)(b.ZP,{children:["Interrupt kernel \xa0 \xa0",(0,j.jsx)(q.Z,{inline:!0,keyTextGroups:[[re.kA],[re.kA]],monospace:!0,uuidForKey:me})]}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return C()},children:(0,j.jsx)(w.Z,{borderSize:1.5,size:ie.C,children:(0,j.jsx)(oe.x8,{size:1*B.iI})})})})}),!m&&E.tf.SCRATCHPAD===o.type&&!Le&&(0,j.jsx)(g.Z,{ml:B.cd,children:(0,j.jsx)(K.Z,{items:Fe,onClickCallback:function(){return _e(!1)},onClickOutside:function(){return _e(!1)},open:ye,parentRef:ve,rightOffset:0,topOffset:4,uuid:"CommandButtons/convert_block",children:(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(b.ZP,{children:"Convert block"}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return _e(!ye)},ref:ve,children:(0,j.jsx)(W,{size:ie.C})})})})}),!m&&[E.tf.DATA_LOADER,E.tf.TRANSFORMER].includes(o.type)&&!Le&&!Ue&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{ml:B.cd,ref:he,children:(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:"Add chart",size:2.25*B.iI,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return Oe((function(e){return!e}))},children:(0,j.jsx)(oe.GQ,{size:2.25*B.iI})})})}),t&&(0,j.jsx)(H.Z,{disableEscape:!0,onClickOutside:function(){return Oe(!1)},open:ke,children:(0,j.jsx)(G,{addWidget:t,block:o,onClickCallback:function(){return Oe(!1)},open:ke,parentRef:he,rightOffset:9*B.iI,runBlock:P,topOffset:2*B.iI})})]}),!m&&ze&&(0,j.jsx)(g.Z,{ml:B.cd,children:(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:k?"Close editor":"Edit",size:ie.C,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return I((function(e){return!e}))},children:k?(0,j.jsx)(oe.Jr,{size:ie.C,success:!0}):(0,j.jsx)(oe.I8,{size:ie.C})})})}),!m&&E.tf.GLOBAL_DATA_PRODUCT!==(null===o||void 0===o?void 0:o.type)&&(0,j.jsx)("div",{ref:xe,children:(0,j.jsxs)(g.Z,{ml:B.cd,children:[qe&&(0,j.jsx)(J.Z,{inverted:!0,small:!0}),!qe&&(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(b.ZP,{children:"AI actions"}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return De((function(e){return!e}))},children:(0,j.jsx)(oe.xq,{default:!0,size:ie.C})})})]})}),!m&&(0,j.jsx)(H.Z,{disableEscape:!0,onClickOutside:function(){return De(!1)},open:Re,children:(0,j.jsx)(D.Z,{items:Je,onClickCallback:function(){return De(!1)},open:Re,parentRef:xe,rightOffset:4.75*B.iI,topOffset:2*B.iI,uuid:"FileHeaderMenu/AI_actions"})}),!m&&(0,j.jsx)(g.Z,{ml:B.cd,children:(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:"View and edit settings for this block",size:ie.C,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return null===O||void 0===O?void 0:O(Z.cH.BLOCK_SETTINGS)},children:(0,j.jsx)(oe.JG,{default:!0,size:ie.C})})})}),!m&&(0,j.jsx)("div",{ref:be,children:(0,j.jsx)(g.Z,{ml:B.cd,children:(0,j.jsx)($.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(b.ZP,{children:"More actions"}),size:ie.C,widthFitContent:!0,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return we((function(e){return!e}))},children:(0,j.jsx)(w.Z,{borderSize:1.5,default:!0,size:ie.C,children:(0,j.jsx)(oe.mH,{default:!0,size:B.iI})})})})})}),!m&&(0,j.jsx)(H.Z,{disableEscape:!0,onClickOutside:function(){return we(!1)},open:Ie,children:(0,j.jsx)(D.Z,{items:(0,le.J8)(o,P,l,M,Le||Ue,{addNewBlock:n,blocksMapping:Ge,fetchFileTree:s,fetchPipeline:p,savePipelineContent:A,updatePipeline:Ke}),onClickCallback:function(){return we(!1)},open:Ie,parentRef:be,rightOffset:4.75*B.iI,topOffset:2*B.iI,uuid:"FileHeaderMenu/file_items"})})]})},me=t(15338),he=t(85854),ve=t(75499),ge=t(42631),be=(B.iI,a.default.div.withConfig({displayName:"indexstyle__HeaderSectionStyle",componentId:"sc-nlaveq-0"})(["",""],(function(e){return"\n    background-color: ".concat((e.theme.background||ne.Z.background).content,";\n  ")}))),xe=a.default.div.withConfig({displayName:"indexstyle__StreamSectionStyle",componentId:"sc-nlaveq-1"})(["border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow:hidden;",""],ge.n_,ge.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||ne.Z.background).content,";\n  ")})),je=t(53405);var Ce,ke=function(e){var n=e.block,t=e.codeEditor,o=e.callbackEl,i=(e.openSidekickView,n.catalog,n.language),r=n.metadata,c=n.type,l=(n.uuid,((null===r||void 0===r?void 0:r.data_integration)||{}).name),a=(0,u.useMemo)((function(){return(0,je.Uc)(n)}),[n]),d=E.tf.DATA_LOADER===c,s=d?"source":"destination",f=(0,u.useMemo)((function(){var e=[1,1,1,null],n=[{uuid:"Stream"},{uuid:"Columns"},{center:!0,uuid:"Sync method"},{uuid:"Parallel"}];return d||(e=(0,y.Hk)(1,1,e),n=(0,y.Hk)({uuid:"Table name"},1,n)),(0,j.jsx)(ve.Z,{columnFlex:e,columns:n,rows:null===a||void 0===a?void 0:a.map((function(e){var n=e.destination_table,t=e.metadata,o=e.replication_method,i=e.run_in_parallel,r=e.stream,c=e.tap_stream_id,l=r||c,u=0,a=0;null===t||void 0===t||t.forEach((function(e){var n=e.breadcrumb,t=e.metadata;(null===n||void 0===n?void 0:n.length)>=1&&(u+=1,null!==t&&void 0!==t&&t.selected&&(a+=1))}));var s=[(0,j.jsx)(V.Z,{monospace:!0,onClick:function(){return alert("OPEN MODAL")},preventDefault:!0,sameColorAsText:!0,children:l},"stream"),(0,j.jsxs)(b.ZP,{default:!0,monospace:!0,children:[a," ",(0,j.jsx)(b.ZP,{inline:!0,monospace:!0,muted:!0,children:"/"})," ",u]},"columns"),(0,j.jsx)(b.ZP,{center:!0,default:!0,children:o&&(0,L.vg)(o)},"replicationMethod"),(0,j.jsx)(v.ZP,{justifyContent:"flex-end",children:i?(0,j.jsx)(oe.Jr,{size:2*B.iI,success:!0}):(0,j.jsx)(oe.x8,{muted:!0,size:2*B.iI})},"runInParallel")];return d||(s=(0,y.Hk)((0,j.jsx)(b.ZP,{default:!0,monospace:!0,children:n||l},"tableName"),1,s)),s}))})}),[d,a]);return(0,j.jsxs)(j.Fragment,{children:[E.t6.YAML===i&&(0,j.jsxs)(be,{children:[(0,j.jsx)(me.Z,{light:!0}),(0,j.jsx)(g.Z,{p:B.cd,children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsxs)(k.Z,{flex:1,flexDirection:"column",children:[(0,j.jsx)(b.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:s}),(0,j.jsx)(he.Z,{default:!0,children:l})]}),(0,j.jsxs)(h.Z,{compact:!0,onClick:function(){return alert("OPEN MODAL")},secondary:!0,children:["Configure ",s]})]})}),(0,j.jsx)(me.Z,{light:!0})]}),E.t6.PYTHON===i&&(0,j.jsxs)(j.Fragment,{children:[t,o]}),(0,j.jsxs)(xe,{children:[(0,j.jsx)(g.Z,{p:B.cd,children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsx)(k.Z,{flex:1,flexDirection:"column",children:(0,j.jsx)(b.ZP,{bold:!0,default:!0,large:!0,children:(0,L._6)("stream",null===a||void 0===a?void 0:a.length)})}),(0,j.jsx)(h.Z,{compact:!0,onClick:function(){return alert("OPEN MODAL")},secondary:!0,children:"Edit streams"})]})}),f]})]})};!function(e){e.APPEND="append",e.FAIL="fail",e.REPLACE="replace"}(Ce||(Ce={}));var Oe,Ze=[Ce.APPEND,Ce.FAIL,Ce.REPLACE];!function(e){e.BIGQUERY="bigquery",e.CLICKHOUSE="clickhouse",e.DRUID="druid",e.MYSQL="mysql",e.POSTGRES="postgres",e.REDSHIFT="redshift",e.SNOWFLAKE="snowflake",e.TRINO="trino"}(Oe||(Oe={}));var ye=t(56747),_e=t(44085),Te=t(17488),Pe=t(3314);function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ie=function(e){var n=e.block,t=e.blockConfiguration,o=e.blockRefs,i=e.blocks,c=e.updateBlockConfiguration,l=(0,u.useContext)(a.ThemeContext),d=E.t6.R===(null===n||void 0===n?void 0:n.language),s=E.t6.SQL===(null===n||void 0===n?void 0:n.language),f=null===i||void 0===i?void 0:i.find((function(e){var n=e.language;return E.t6.PYTHON===n})),p=(0,u.useMemo)((function(){var e=[null];return s&&f?e.push.apply(e,[null,1]):e.push(1),e}),[f,s]),m=(0,u.useMemo)((function(){var e=[{tooltipMessage:null,uuid:"Variable"},{tooltipMessage:null,uuid:"Block"}];return s&&f&&e.push({tooltipMessage:"Customize the full table name that this block gets created in. Include database, schema, and table name where applicable.",uuid:"Table name"}),e}),[f,s]),h=(0,u.useMemo)((function(){return null===i||void 0===i?void 0:i.map((function(e,n){var i,u=e.color,a=e.language,p=e.type,m=e.uuid,h=(0,x.qn)(p,{blockColor:u,theme:l}).accent,v=E.t6.PYTHON===a;i=s?"{{ df_".concat(n+1," }}"):d?"df".concat(n+1):"data".concat(n>=1?"_".concat(n+1):null);var g=[(0,j.jsx)(b.ZP,{default:!0,monospace:!0,small:!0,children:i},"variable-".concat(m)),(0,j.jsx)(V.Z,{color:h,onClick:function(){var e,n,t=null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e["".concat(p,"s/").concat(m,".py")];null===t||void 0===t||null===(n=t.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(b.ZP,{color:h,monospace:!0,small:!0,children:m})},"block-".concat(m))];if(s){var C="table-name-input-".concat(m),k=(null===t||void 0===t?void 0:t[M.Yf])||{},O=(null===k||void 0===k?void 0:k[m])||{};v?g.push((0,j.jsx)(Te.Z,{borderless:!0,compact:!0,monospace:!0,onChange:function(e){var n=e.target.value;c((0,r.Z)({},M.Yf,Se(Se({},k),{},(0,r.Z)({},m,Se(Se({},O),{},(0,r.Z)({},M.aZ,n))))))},onClick:Pe.j,placeholder:"[database_optional].[schema_optional].[table]",small:!0,value:(null===O||void 0===O?void 0:O[M.aZ])||""},C)):f&&g.push((0,j.jsx)(b.ZP,{italic:!0,muted:!0,small:!0,children:"Table name is defined in upstream block."},C))}return g}))}),[f,t,o,i,d,s,l,c]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(ve.Z,{columnFlex:p,columns:m,compact:!0,noBorder:!0,rows:h,uuid:"CodeBlock/UpstreamBlockSettings/".concat(null===n||void 0===n?void 0:n.uuid)})})},we=t(84820),Ae=t(98464),Re=t(84438),De=t(89678),Me=t(38399),Ne=t(37529),Be=t(53808),Le=t(44375),Ue=t(74052),Fe=t(42041),Ge=t(42122),He=t(44688);function ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ze(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var We=1e3;function Ke(e,n){var t,c,C,O,_=e.addNewBlock,T=e.addNewBlockMenuOpenIdx,D=e.addWidget,N=e.allBlocks,U=e.allowCodeBlockShortcuts,F=e.autocompleteItems,G=e.block,H=e.blockIdx,z=e.blockRefs,Q=e.blockTemplates,W=e.blocks,q=void 0===W?[]:W,Y=e.dataProviders,X=e.defaultValue,J=void 0===X?"":X,ne=e.deleteBlock,ue=e.disableDrag,de=e.disableShortcuts,se=e.executionState,fe=e.extraContent,he=e.fetchFileTree,ve=e.fetchPipeline,ge=e.globalDataProducts,be=e.height,xe=e.hideExtraCommandButtons,Ee=e.hideExtraConfiguration,Se=e.hideHeaderInteractiveInformation,ze=e.hideRunButton,Ke=e.interruptKernel,qe=e.mainContainerRef,Ye=e.mainContainerWidth,Ve=e.messages,Xe=void 0===Ve?[]:Ve,Je=e.noDivider,$e=e.onCallbackChange,en=e.onChange,nn=e.onClickAddSingleDBTModel,tn=e.onDrop,on=e.openSidekickView,rn=e.pipeline,cn=e.project,ln=e.runBlock,un=e.runningBlocks,an=e.savePipelineContent,dn=e.selected,sn=e.setAddNewBlockMenuOpenIdx,fn=e.setAnyInputFocused,pn=e.setCreatingNewDBTModel,mn=e.setEditingBlock,hn=e.setErrors,vn=e.setOutputBlocks,gn=e.setSelected,bn=e.setSelectedBlock,xn=e.setSelectedOutputBlock,jn=e.setTextareaFocused,Cn=e.showBrowseTemplates,kn=e.showConfigureProjectModal,On=e.showGlobalDataProducts,Zn=e.showUpdateBlockModal,yn=e.textareaFocused,_n=e.widgets,Tn=(0,u.useContext)(a.ThemeContext),Pn=G||{},En=Pn.callback_content,Sn=Pn.configuration,In=void 0===Sn?{}:Sn,wn=Pn.color,An=Pn.error,Rn=Pn.has_callback,Dn=Pn.language,Mn=Pn.name,Nn=Pn.pipelines,Bn=Pn.replicated_block,Ln=Pn.type,Un=Pn.upstream_blocks,Fn=void 0===Un?[]:Un,Gn=Pn.uuid,Hn=(0,u.useMemo)((function(){return In}),[In]),zn=(0,u.useMemo)((function(){var e;return(null===(e=Object.values(Nn||{}))||void 0===e?void 0:e.length)||1}),[Nn]),Qn=(0,u.useMemo)((function(){return null===Hn||void 0===Hn?void 0:Hn.global_data_product}),[Hn]),Wn=(0,u.useMemo)((function(){return(0,y.HK)(ge||[],(function(e){return e.uuid}))}),[ge]),Kn=(0,u.useState)(!1),qn=Kn[0],Yn=Kn[1],Vn=(0,u.useState)(null),Xn=Vn[0],Jn=Vn[1],$n=(0,u.useState)(!1),et=$n[0],nt=$n[1],tt=(0,u.useState)(!1),ot=tt[0],it=tt[1],rt=(0,u.useState)(J),ct=rt[0],lt=rt[1],ut=(0,u.useState)(null),at=ut[0],dt=ut[1],st=rn||{},ft=st.type,pt=st.uuid,mt=(0,u.useMemo)((function(){return ce.qL.STREAMING===ft}),[ft]),ht=E.tf.DBT===Ln,vt=E.t6.SQL===Dn,gt=E.t6.R===Dn,bt=E.tf.MARKDOWN===Ln,xt=(0,u.useMemo)((function(){return(0,je.jO)(G,rn)}),[G,rn]),jt=Hn[M.mW];vt&&void 0===jt&&(jt=We);var Ct=(0,u.useState)(Qe(Qe({},Hn),{},(t={},(0,r.Z)(t,M.cH,Hn[M.cH]),(0,r.Z)(t,M.Sv,Hn[M.Sv]),(0,r.Z)(t,M.sc,Hn[M.sc]),(0,r.Z)(t,M.BD,Hn[M.BD]),(0,r.Z)(t,M.m$,Hn[M.m$]),(0,r.Z)(t,M.Pi,Hn[M.Pi]||{}),(0,r.Z)(t,M.Mv,Hn[M.Mv]),(0,r.Z)(t,M.eW,Hn[M.eW]),(0,r.Z)(t,M.nq,Hn[M.nq]||Ce.APPEND),(0,r.Z)(t,M.mW,jt),(0,r.Z)(t,M.bk,Hn[M.bk]),(0,r.Z)(t,M.Mi,!!Hn[M.Mi]),t))),kt=Ct[0],Ot=Ct[1],Zt=(0,u.useState)(null),yt=Zt[0],_t=Zt[1],Tt=(0,u.useState)(bt),Pt=Tt[0],Et=Tt[1],St=(0,u.useState)(!1),It=St[0],wt=St[1],At=(0,u.useState)(0),Rt=At[0],Dt=At[1],Mt=(0,u.useState)(null),Nt=Mt[0],Bt=Mt[1],Lt=(0,u.useState)(null),Ut=Lt[0],Ft=Lt[1],Gt=(0,u.useState)(Xe),Ht=Gt[0],zt=Gt[1],Qt=(0,u.useState)((0,ie.Xy)(G)[0]),Wt=Qt[0],Kt=Qt[1],qt=(0,d.c)((function(){return{collect:function(e){return{isDragging:!!e.isDragging()}},item:G,type:ie.vT}}),[G]),Yt=(0,i.Z)(qt,2),Vt=Yt[0],Xt=Yt[1],Jt=(0,s.L)((function(){return{accept:ie.vT,drop:function(e){return null===tn||void 0===tn?void 0:tn(G,e)}}}),[G]),$t=(0,i.Z)(Jt,2)[1],eo=(0,u.useMemo)((function(){var e;return(null===G||void 0===G||null===(e=G.metadata)||void 0===e?void 0:e.dbt)||{project:null,projects:{}}}),[G]),no=(0,u.useMemo)((function(){return eo.projects||{}}),[eo]),to=(0,u.useMemo)((function(){return eo.project||kt[M.eW]}),[kt,eo]),oo=(0,u.useMemo)((function(){return no[to]||{target:null,targets:[]}}),[to,no]),io=(0,u.useMemo)((function(){return oo.targets||[]}),[oo]),ro=(0,u.useMemo)((function(){return kt[M.Mv]}),[kt]),co=to?null!==oo&&void 0!==oo&&oo.target?(0,y.sE)(io,(function(e){return e===oo.target})):"Select target":"Select project first",lo=(0,u.useState)(ro&&!(null!==io&&void 0!==io&&io.includes(ro))),uo=lo[0],ao=lo[1],so=(0,u.useState)(null),fo=so[0],po=so[1];(0,u.useEffect)((function(){En!==fo&&po(En)}),[fo,En]);var mo=(0,Ae.Z)(G);(0,u.useEffect)((function(){if(JSON.stringify(G)!=JSON.stringify(mo)){var e,n=(0,Ue.Rt)([G]).messages,t=null===n||void 0===n||null===(e=n[Ln])||void 0===e?void 0:e[Gn];(null===t||void 0===t?void 0:t.length)>=1&&zt(t)}}),[G,Ln,Gn,mo,zt]);var ho=(0,Ae.Z)(Xe);(0,u.useEffect)((function(){"undefined"!==typeof Xe&&Xe.length!==(null===ho||void 0===ho?void 0:ho.length)&&zt(Xe)}),[Xe,ho,zt]);var vo=(0,u.useMemo)((function(){var e=new Set;return null===Y||void 0===Y||Y.forEach((function(n){var t=n.profiles;e=new Set([].concat((0,o.Z)(e),(0,o.Z)(t)))})),(0,o.Z)(e)}),[Y]),go=(0,u.useMemo)((function(){return"".concat(pt,"/").concat(Gn,"/codeCollapsed")}),[pt,Gn]),bo=(0,u.useMemo)((function(){return"".concat(pt,"/").concat(Gn,"/outputCollapsed")}),[pt,Gn]);(0,u.useEffect)((function(){it((0,Be.U2)(go,!1)),wt((0,Be.U2)(bo,!1))}),[go,bo]);var xo=(0,u.useRef)(null),jo=(0,u.useMemo)((function(){return(0,y.HK)(q,(function(e){return e.uuid}))}),[q]),Co=(0,u.useMemo)((function(){return!(null===_n||void 0===_n||!_n.find((function(e){return e.upstream_blocks.includes(Gn)})))}),[Gn,_n]),ko=(0,u.useCallback)((function(e){var n=e||{},t=n.block,o=n.code,i=n.disableReset,r=n.runDownstream,c=n.runIncompleteUpstream,l=n.runSettings,u=n.runUpstream,a=n.runTests;if(null===a||"undefined"===typeof a){var d=(t||{}).type;a=[E.tf.DATA_LOADER,E.tf.DATA_EXPORTER,E.tf.TRANSFORMER].includes(d)}ht&&ie.Rj!==Wt&&Kt(ie.Rj),null===ln||void 0===ln||ln({block:t,code:o||ct,runDownstream:r||Co,runIncompleteUpstream:c||!1,runSettings:l,runTests:a||!1,runUpstream:u||!1}),i||(Dt(1+Number(Rt)),Bt(null),wt(!1))}),[ct,Co,ht,ln,Rt,Wt,Dt,Bt,Kt]),Oo=!(null===un||void 0===un||!un.find((function(e){return e.uuid===Gn})))||(null===Ht||void 0===Ht?void 0:Ht.length)>=1&&se!==te.uF.IDLE;(0,u.useEffect)((function(){Oo&&Ft(Number(new Date))}),[Oo,Ft]);var Zo=(0,Ae.Z)(se);(0,u.useEffect)((function(){se===te.uF.IDLE&&se!==Zo&&Bt(Number(new Date))}),[se,Zo,Bt]);var yo=(0,u.useCallback)((function(e){var n=e.editorRect.top,t=e.position.lineNumberTop;if(null!==qe&&void 0!==qe&&qe.current){var o=qe.current.getBoundingClientRect().height;if(n+t>o){var i=qe.current.scrollTop+(t-o+n);qe.current.scrollTo(0,i)}else if(t+n<De.aU){var r=qe.current.scrollTop+(t+n-De.aU);qe.current.scrollTo(0,r)}}}),[qe]),_o=(0,u.useMemo)((function(){return(0,le.h5)(Ht,yt)}),[yt,Ht]),To=(0,le.oI)(_o),Po=To.hasError,Eo=To.hasOutput,So=(0,x.qn)(Ln,{blockColor:wn,theme:Tn}).accent,Io=(null===Fn||void 0===Fn?void 0:Fn.length)||0,wo=(0,je.cU)([G],q)[0],Ao=wo.dynamic,Ro=wo.dynamicUpstreamBlock,Do=wo.reduceOutput,Mo=wo.reduceOutputUpstreamBlock,No=(0,u.useMemo)((function(){return(0,le._o)({block:G,dynamic:Ao,dynamicUpstreamBlock:Ro,hasError:Po,reduceOutput:Do,reduceOutputUpstreamBlock:Mo,selected:dn})}),[G,Ao,Ro,Po,Do,Mo,dn]),Bo=No.borderColorShareProps,Lo=No.tags,Uo=(0,u.useCallback)((function(){dn||(null===fn||void 0===fn||fn(!1),null===gn||void 0===gn||gn(!0))}),[dn,fn,gn]),Fo=ee.ZP.blocks.pipelines.detail(pt,ie.gM.uuid===(null===Wt||void 0===Wt?void 0:Wt.uuid)||ie.Jt.uuid===(null===Wt||void 0===Wt?void 0:Wt.uuid)?encodeURIComponent(Gn):null,{_format:"dbt"},{revalidateOnFocus:!0}),Go=Fo.data,Ho=Fo.mutate,zo=(0,u.useMemo)((function(){var e;return(null===Go||void 0===Go||null===(e=Go.block)||void 0===e?void 0:e.metadata)||{}}),[Go]),Qo=(0,f.Db)(ee.ZP.blocks.pipelines.useUpdate(pt,Gn),{onError:function(e){var n=(0,ae.qQ)(e).messages;_t(n)},onSuccess:function(e){return(0,ae.wD)(e,{callback:function(e){ve(),he(),lt(ct),null!==e&&void 0!==e&&e.block&&bn(null===e||void 0===e?void 0:e.block)},onErrorCallback:function(e,n){return hn({errors:n,response:e})}})}}),Wo=(0,i.Z)(Qo,1)[0],Ko="CodeBlock/".concat(Gn),qo=(0,He.y)(),Yo=qo.registerOnKeyDown,Vo=qo.unregisterOnKeyDown;(0,u.useEffect)((function(){return function(){Vo(Ko)}}),[Vo,Ko]),Yo(Ko,(function(e,n){de&&!U||dn&&!ze&&((0,Fe.y)([re.zX,re.Uq],n)||(0,Fe.y)([re.PQ,re.Uq],n)?ko({block:G}):(0,Fe.y)([re.XR,re.Uq],n)&&_&&(e.preventDefault(),_({language:Dn,type:Ln,upstream_blocks:[Gn]}),ko({block:G})))}),[_,G,ze,ko,dn,Wo]),(0,u.useEffect)((function(){var e;return Ut&&(e=setInterval((function(){return dt(Number(new Date))}),1e3)),at&&!Oo&&clearInterval(e),function(){return clearInterval(e)}}),[at,Oo,Ut]);var Xo=(0,u.useCallback)((function(e){var n,t=(n={},(0,r.Z)(n,E.tf.CUSTOM,Object.values(E.Lq).reduce((function(n,t){return(null===e||void 0===e?void 0:e.color)!==t&&n.push({label:function(){return(0,j.jsx)(k.Z,{alignItems:"center",children:(0,j.jsxs)(b.ZP,{noWrapping:!0,children:["Change color to ",(0,j.jsx)(b.ZP,{color:(0,x.qn)(E.tf.CUSTOM,{blockColor:t}).accent,inline:!0,children:t})]})})},onClick:function(){Wo({block:Qe(Qe({},e),{},{color:t})})},uuid:t}),n}),[])),(0,r.Z)(n,E.tf.SCRATCHPAD,(0,o.Z)((0,le.Ts)(e,q,"block_menu/scratchpad",_)).map((function(e){return Qe(Qe({},e),{},{onClick:function(){return an().then((function(){return e.onClick()}))}})}))),n);return t[e.type]}),[_,q,an,Wo]),Jo=(0,u.useMemo)((function(){return Bn&&(null===jo||void 0===jo?void 0:jo[Bn])}),[jo,Bn]),$o=(0,u.useMemo)((function(){if(Bn)return null;if(E.tf.GLOBAL_DATA_PRODUCT===Ln){var e=null===Wn||void 0===Wn?void 0:Wn[null===Qn||void 0===Qn?void 0:Qn.uuid];return(0,j.jsxs)(x.y9,{children:[(0,j.jsxs)(g.Z,{mb:B.cd,mt:1,children:[(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:"UUID"}),(0,j.jsx)(b.ZP,{monospace:!0,children:null===e||void 0===e?void 0:e.uuid})]}),(0,j.jsxs)(g.Z,{mb:B.cd,children:[(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:(0,L.kC)((null===e||void 0===e?void 0:e.object_type)||"")}),(0,j.jsx)(l(),{as:"/pipelines/".concat(null===e||void 0===e?void 0:e.object_uuid,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,j.jsx)(V.Z,{monospace:!0,openNewWindow:!0,children:null===e||void 0===e?void 0:e.object_uuid})})]}),(0,j.jsxs)(g.Z,{mb:1,children:[(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:"Override global data product settings"}),(0,j.jsx)(V.Z,{monospace:!0,onClick:function(){return on(Z.cH.BLOCK_SETTINGS)},children:"Customize block settings"})]})]})}var n,t;return xt&&E.t6.PYTHON!==Dn||(n=(0,j.jsx)(A.Z,{autoHeight:!0,autocompleteProviders:Xn,block:G,height:be,language:Dn,onChange:function(e){lt(e),null===en||void 0===en||en(e)},onDidChangeCursorPosition:yo,placeholder:E.tf.DBT===Ln&&E.t6.YAML===Dn?"e.g. --select ".concat(to||"project","/models --exclude ").concat(to||"project","/models/some_dir"):"Start typing here...",selected:dn,setSelected:gn,setTextareaFocused:jn,shortcuts:ze?[]:[function(e,n){return(0,Ne.Q)(e,(function(){ze||ko({block:G,code:n.getValue()})}))}],textareaFocused:yn,value:ct,width:"100%"}),t=Rn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(me.Z,{}),(0,j.jsxs)(g.Z,{mt:1,children:[(0,j.jsxs)(x.y9,{normalPadding:!0,children:[(0,j.jsx)(b.ZP,{small:!0,children:"Callback block: define @on_success or @on_failure callbacks for this block."}),(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,small:!0,children:["kwargs",(0,j.jsx)(b.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:" \u2192 "}),"global variables"]})]}),(0,j.jsx)(A.Z,{autoHeight:!0,autocompleteProviders:Xn,language:"python",onChange:function(e){po(e),null===$e||void 0===$e||$e(e)},onDidChangeCursorPosition:yo,placeholder:"Start typing here...",selected:dn,setSelected:gn,setTextareaFocused:jn,textareaFocused:yn,value:fo,width:"100%"})]})]})),xt?(0,j.jsx)(ke,{block:G,codeEditor:n,callbackEl:t,openSidekickView:on}):(0,j.jsxs)(j.Fragment,{children:[n,t]})}),[Xn,G,Dn,Ln,fo,ct,to,Qn,Wn,Rn,be,ze,xt,$e,en,yo,on,Bn,ko,dn,lt,gn,jn,yn]);(0,u.useEffect)((function(){F&&Jn({python:(0,we.Z)({autocompleteItems:F,block:G,blocks:q,pipeline:rn})})}),[F,G,q,rn]);var ei=(0,u.useMemo)((function(){return ht?(0,j.jsx)(g.Z,{py:1,children:(0,j.jsx)(S.Z,{onClickTab:function(e){Kt(e),ie.gM.uuid!==e.uuid&&ie.Jt.uuid!==e.uuid||Ho()},selectedTabUUID:null===Wt||void 0===Wt?void 0:Wt.uuid,small:!0,tabs:(0,ie.Xy)(G)})}):null}),[G,Ho,ht,Wt]),ni=(0,u.useMemo)((function(){return(0,j.jsx)(R.Z,Qe(Qe({},Bo),{},{block:G,blockMetadata:zo,buttonTabs:ei,collapsed:It,hasOutput:Eo,isInProgress:Oo,mainContainerWidth:Ye,messages:_o,openSidekickView:on,pipeline:rn,runCount:Rt,runEndTime:Nt,runStartTime:Ut,selected:dn,selectedTab:Wt,setCollapsed:function(e){wt((function(){return(0,Be.t8)(bo,e),e}))},setErrors:hn,setOutputBlocks:vn,setSelectedOutputBlock:xn,setSelectedTab:Kt}))}),[G,zo,Bo,ei,Eo,Oo,Ye,_o,on,It,bo,rn,Rt,Nt,Ut,dn,Wt,hn,vn,wt,xn]),ti=(0,u.useCallback)((function(){return nt(!1)}),[]),oi=(0,u.useRef)(null),ii=(0,u.useCallback)((function(e){clearTimeout(oi.current),Ot((function(n){return Qe(Qe({},n),e)})),oi.current=setTimeout((function(){var n=Qe(Qe({},kt),e);("undefined"!==typeof n[M.cH]&&"undefined"!==n[M.sc]||"undefined"!==typeof n[M.Mv]||"undefined"!==typeof n[M.eW]||"undefined"!==typeof n[M.mW])&&an({block:{configuration:n,uuid:Gn}})}),1e3)}),[Gn,kt,an]),ri=Re.zJ.BIGQUERY===kt[M.cH]||Re.zJ.SNOWFLAKE===kt[M.cH],ci=(0,u.useMemo)((function(){return(null===q||void 0===q?void 0:q.length)||0}),[q]),li=(0,u.useMemo)((function(){return ct?(0,j.jsx)(ye.Z,{children:ct}):(0,j.jsx)(g.Z,{px:1,children:(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,children:"Double-click to edit"})})}),[ct]);(0,u.useEffect)((function(){bt&&Pt&&!dn&&Et(!1)}),[Pt,bt,dn]);var ui=(0,u.useMemo)((function(){return(0,j.jsx)(Te.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){fn(!0),ii((0,r.Z)({},M.mW,+e.target.value)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},small:!0,type:"number",value:kt[M.mW]||"",width:11*B.iI})}),[kt,fn,ii]);return(0,j.jsx)("div",{ref:$t,children:(0,j.jsxs)("div",{ref:n,style:{position:"relative",zIndex:H===T?ci+9:null},children:[(0,j.jsxs)("div",{style:{position:"relative"},children:[(0,j.jsx)(x.nz,Qe(Qe({},Qe(Qe({},Bo),Vt)),{},{bottomBorder:bt,onClick:function(){return Uo()},ref:ue?null:Xt,zIndex:ci+1-(H||0),children:(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsxs)(k.Z,{alignItems:"center",flex:1,children:[(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(m.Z,{monospace:!0,children:E.tf.GLOBAL_DATA_PRODUCT===(null===G||void 0===G?void 0:G.type)?"GDP":E.dO[Dn]}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(w.Z,{color:So,size:1.5*B.iI,square:!0}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(K.Z,{items:Xo(G),onClickCallback:ti,onClickOutside:ti,open:et,parentRef:xo,uuid:"CodeBlock/block_menu",children:(0,j.jsx)(b.ZP,{color:So,monospace:!0,noWrapping:!0,children:null===(c=ht?E.tf.DBT:E.V4[Ln])||void 0===c?void 0:c.toUpperCase()})}),!Se&&[E.tf.CUSTOM,E.tf.SCRATCHPAD].includes(Ln)&&(0,j.jsxs)(j.Fragment,{children:["\xa0",(0,j.jsx)(h.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return nt(!0)},transparent:!0,children:(0,j.jsx)(oe.K5,{muted:!0})})]})]}),!Se&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{mr:B.cd}),(0,j.jsx)(oe.iU,{size:1.5*B.iI}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsxs)(v.ZP,{alignItems:"center",children:[ht&&E.t6.YAML!==Dn&&(0,j.jsx)($.Z,{block:!0,label:(0,Le.$1)(G,{fullPath:!0}),size:null,children:(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,children:(0,Le.$1)(G)})}),(!ht||E.t6.YAML===Dn)&&(0,j.jsx)(V.Z,{default:!0,monospace:!0,noWrapping:!0,onClick:function(){return Zn(G,Mn)},preventDefault:!0,sameColorAsText:!0,children:Gn})]}),(0,j.jsx)(g.Z,{mr:2}),!E.iZ.includes(Ln)&&Ye>800&&(0,j.jsx)($.Z,{appearBefore:!0,block:!0,label:"\n                          ".concat((0,L._6)("parent block",Io),". ").concat(0===Io?"Click to select 1 or more blocks to depend on.":"Edit parent blocks.","\n                        "),size:null,widthFitContent:Io>=1,children:(0,j.jsx)(h.Z,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){gn(!0),mn({upstreamBlocks:{block:G,values:null===Fn||void 0===Fn?void 0:Fn.map((function(e){return{uuid:e}}))}})},children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[0===Io&&(0,j.jsx)(oe.Jj,{size:3*B.iI}),Io>=1&&(0,j.jsx)(oe.eV,{size:3*B.iI}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsxs)(b.ZP,{default:!0,monospace:Io>=1,noWrapping:!0,small:!0,underline:0===Io,children:[0===Io&&"Edit parents",Io>=1&&(0,L._6)("parent",Io)]})]})})}),zn>=2&&Ye>725&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{ml:2}),(0,j.jsx)($.Z,{block:!0,label:"This block is used in ".concat(zn," pipelines."),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(oe.BG,{size:14}),(0,j.jsx)(g.Z,{ml:1}),(0,j.jsxs)(V.Z,{default:!0,monospace:!0,noWrapping:!0,onClick:function(){return on(Z.cH.BLOCK_SETTINGS)},preventDefault:!0,small:!0,children:[zn," pipelines"]})]})})]})]})]}),ln&&(0,j.jsx)(pe,{addNewBlock:_,addWidget:D,block:G,blockContent:ct,blocks:q,deleteBlock:ne,executionState:se,fetchFileTree:he,fetchPipeline:ve,hideExtraButtons:xe,interruptKernel:Ke,isEditingBlock:Pt,openSidekickView:on,pipeline:rn,project:cn,runBlock:ze?null:ko,savePipelineContent:an,setBlockContent:function(e){lt(e),null===en||void 0===en||en(e)},setErrors:hn,setIsEditingBlock:Et,setOutputCollapsed:wt,showConfigureProjectModal:kn}),!xe&&(0,j.jsx)(g.Z,{px:1,children:(0,j.jsx)(h.Z,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){it((function(e){return(0,Be.t8)(go,!e),!e})),ot||wt((function(){return(0,Be.t8)(bo,!0),!0}))},transparent:!0,children:ot?(0,j.jsx)(oe._M,{muted:!0,size:2*B.iI}):(0,j.jsx)(oe.Kh,{muted:!0,size:2*B.iI})})})]})})),(0,j.jsxs)(x.Nk,{onClick:function(){return Uo()},children:[(0,j.jsxs)(x.jv,Qe(Qe({},Bo),{},{className:dn&&yn?"selected":null,hasOutput:!!ei||Eo,lightBackground:bt&&!Pt,noPadding:xt,onClick:Uo,onDoubleClick:function(){bt&&!Pt&&Et(!0)},children:[!Ee&&E.tf.DBT===Ln&&!ot&&(0,j.jsxs)(x.y9,{normalPadding:!0,children:[(0,j.jsxs)(v.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsxs)(k.Z,{alignItems:"center",children:[E.t6.YAML===Dn&&(0,j.jsx)(_e.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){var n;ii((n={},(0,r.Z)(n,M.Mv,""),(0,r.Z)(n,M.eW,e.target.value),n)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},placeholder:"Project",small:!0,value:kt[M.eW]||"",children:Object.keys(no||{}).map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))}),E.t6.YAML!==Dn&&(0,j.jsx)(b.ZP,{monospace:!0,small:!0,children:to}),(0,j.jsx)(g.Z,{mr:2}),(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:"Target"}),(0,j.jsx)("span",{children:"\xa0"}),!uo&&(0,j.jsx)(_e.Z,{compact:!0,disabled:!to,monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){ii((0,r.Z)({},M.Mv,e.target.value)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},placeholder:co,small:!0,value:ro||"",children:null===io||void 0===io?void 0:io.map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))}),uo&&(0,j.jsx)(Te.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){ii((0,r.Z)({},M.Mv,e.target.value)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},placeholder:to?(null===oo||void 0===oo?void 0:oo.target)||"Enter target":"Select project first",small:!0,value:ro||"",width:21*B.iI}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)($.Z,{block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["Manually type the name of the target you want to use in the profile.",(0,j.jsx)("br",{}),"Interpolate environment variables and global variables using the following syntax:",(0,j.jsx)("br",{}),(0,j.jsx)(b.ZP,{default:!0,inline:!0,monospace:!0,children:"{{ env_var('NAME') }}"})," or ",(0,j.jsx)(b.ZP,{default:!0,inline:!0,monospace:!0,children:"{{ variables('NAME') }}"})]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(I.Z,{checked:uo,label:(0,j.jsx)(b.ZP,{muted:!0,small:!0,children:"Manually enter target"}),onClick:function(e){(0,Pe.j)(e),ao(!uo),uo&&ii((0,r.Z)({},M.Mv,null))}}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(oe.kI,{muted:!0})]})})})]}),E.t6.YAML!==Dn&&!(null!==eo&&void 0!==eo&&null!==(C=eo.block)&&void 0!==C&&C.snapshot)&&(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)($.Z,{appearBefore:!0,block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["Limit the number of results that are returned",(0,j.jsx)("br",{}),"when running this block in the notebook.",(0,j.jsx)("br",{}),"This limit won\u2019t affect the number of results",(0,j.jsx)("br",{}),"returned when running the pipeline end-to-end."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(oe.kI,{muted:!0}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:"Sample limit"}),(0,j.jsx)("span",{children:"\xa0"})]})}),ui,(0,j.jsx)(g.Z,{mr:1})]})]}),E.t6.YAML===Dn&&(0,j.jsx)(g.Z,{mt:1,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsxs)(k.Z,{alignItems:"center",flex:1,children:[(0,j.jsx)(b.ZP,{default:!0,monospace:!0,small:!0,children:"dbt"}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(Te.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){ii((0,r.Z)({},M.Pi,Qe(Qe({},null===kt||void 0===kt?void 0:kt[M.Pi]),{},(0,r.Z)({},M.pA,e.target.value)))),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},placeholder:"command",small:!0,value:(null===kt||void 0===kt||null===(O=kt[M.Pi])||void 0===O?void 0:O[M.pA])||"",width:10*B.iI}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(b.ZP,{monospace:!0,small:!0,children:"[type your --select and --exclude syntax below]"}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,small:!0,children:["(paths start from ",(null===kt||void 0===kt?void 0:kt[M.eW])||"project"," folder)"]})]}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(b.ZP,{muted:!0,small:!0,children:(0,j.jsx)(V.Z,{href:"https://docs.getdbt.com/reference/node-selection/syntax#examples",openNewWindow:!0,small:!0,children:"Examples"})}),(0,j.jsx)(g.Z,{mr:1})]})})]}),!Ee&&vt&&!ot&&E.tf.DBT!==Ln&&(0,j.jsx)(x.y9,{normalPadding:!0,children:(0,j.jsxs)(v.ZP,{flexWrap:"wrap",style:{marginTop:"-8px"},children:[(0,j.jsxs)(v.ZP,{style:{marginTop:"8px"},children:[(0,j.jsx)(_e.Z,{compact:!0,label:"Connection",onChange:function(e){return ii((0,r.Z)({},M.cH,e.target.value))},onClick:Pe.j,small:!0,value:kt[M.cH],children:null===Y||void 0===Y?void 0:Y.map((function(e){var n=e.id,t=e.value;return(0,j.jsx)("option",{value:t,children:n},n)}))}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(_e.Z,{compact:!0,label:"Profile",onChange:function(e){return ii((0,r.Z)({},M.sc,e.target.value))},onClick:Pe.j,small:!0,value:kt[M.sc],children:null===vo||void 0===vo?void 0:vo.map((function(e){return(0,j.jsx)("option",{value:e,children:e},e)}))}),(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)($.Z,{block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["If checked, you\u2019ll have to write your own custom",(0,j.jsx)("br",{}),"CREATE TABLE commands and INSERT commands.",(0,j.jsx)("br",{}),"Separate your commands using a semi-colon: ",(0,j.jsx)(b.ZP,{default:!0,inline:!0,monospace:!0,children:";"})]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(I.Z,{checked:kt[M.Mi],label:(0,j.jsx)(b.ZP,{muted:!0,small:!0,children:"Use raw SQL"}),onClick:function(e){(0,Pe.j)(e),ii((0,r.Z)({},M.Mi,!kt[M.Mi]))}}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(oe.kI,{muted:!0})]})})}),!kt[M.Mi]&&(0,j.jsxs)(j.Fragment,{children:[ri&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(Te.Z,{compact:!0,label:"Database",monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){ii((0,r.Z)({},M.Sv,e.target.value)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},small:!0,value:kt[M.Sv],width:10*B.iI})})]}),(0,j.jsx)(g.Z,{mr:1}),![Oe.CLICKHOUSE,Oe.MYSQL].includes(kt[M.cH])&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)($.Z,{block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["Schema that is used when creating a table and inserting values.",(0,j.jsx)("br",{}),"This field is required."]}),size:null,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(Te.Z,{compact:!0,label:"Schema",monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){ii((0,r.Z)({},M.BD,e.target.value)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},small:!0,value:kt[M.BD],width:10*B.iI})})}),(0,j.jsx)(g.Z,{mr:1})]}),(0,j.jsx)($.Z,{block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["This value will be used as the table name.",(0,j.jsx)("br",{}),"If blank, the default table name will be:",(0,j.jsx)("br",{}),(0,j.jsxs)(b.ZP,{inline:!0,monospace:!0,children:[pt,"_",Gn]}),(0,j.jsx)("br",{}),"This field is optional."]}),size:null,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{alignItems:"center",children:(0,j.jsx)(Te.Z,{compact:!0,label:"Table (optional)",monospace:!0,onBlur:function(){return setTimeout((function(){fn(!1)}),300)},onChange:function(e){ii((0,r.Z)({},M.m$,e.target.value)),e.preventDefault()},onClick:Pe.j,onFocus:function(){fn(!0)},small:!0,value:kt[M.m$],width:20*B.iI})})})]}),(0,j.jsx)(g.Z,{mr:1})]}),!kt[M.Mi]&&(0,j.jsxs)(v.ZP,{alignItems:"center",style:{marginTop:"8px"},children:[(0,j.jsx)($.Z,{block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["Limit the number of results that are returned",(0,j.jsx)("br",{}),"when running this block in the notebook.",(0,j.jsx)("br",{}),"This limit won\u2019t affect the number of results",(0,j.jsx)("br",{}),"returned when running the pipeline end-to-end."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(oe.kI,{muted:!0}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:"Limit"}),(0,j.jsx)("span",{children:"\xa0"})]})}),ui,(0,j.jsx)(g.Z,{mr:1}),(0,j.jsx)($.Z,{autoWidth:!0,block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["How do you want to handle existing data with the same",ri?" database,":""," schema, and table name?",(0,j.jsx)("br",{}),(0,j.jsx)(b.ZP,{bold:!0,inline:!0,monospace:!0,children:"Append"}),": add rows to the existing table.",(0,j.jsx)("br",{}),(0,j.jsx)(b.ZP,{bold:!0,inline:!0,monospace:!0,children:"Replace"}),": delete the existing data.",(0,j.jsx)("br",{}),(0,j.jsx)(b.ZP,{bold:!0,inline:!0,monospace:!0,children:"Fail"}),": raise an error during execution."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(oe.kI,{muted:!0}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(b.ZP,{monospace:!0,muted:!0,small:!0,children:"Write policy:"}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(_e.Z,{compact:!0,label:"strategy",onChange:function(e){return ii((0,r.Z)({},M.nq,e.target.value))},onClick:Pe.j,small:!0,value:kt[M.nq],children:null===Ze||void 0===Ze?void 0:Ze.map((function(e){return(0,j.jsx)("option",{value:e,children:(0,L.kC)(e)},e)}))})]})}),(0,j.jsx)(g.Z,{mr:1})]}),(null===kt||void 0===kt?void 0:kt[M.cH])===Oe.TRINO&&Fn.length>=1&&(0,j.jsxs)(v.ZP,{alignItems:"center",style:{marginTop:"8px"},children:[(0,j.jsx)($.Z,{appearBefore:!0,block:!0,description:(0,j.jsxs)(b.ZP,{default:!0,inline:!0,children:["If checked, upstream blocks that aren\u2019t SQL blocks",(0,j.jsx)("br",{}),"will have their data exported into a table that is",(0,j.jsx)("br",{}),"uniquely named upon each block run. For example,",(0,j.jsx)("br",{}),(0,j.jsx)(b.ZP,{default:!0,inline:!0,monospace:!0,children:"[pipeline_uuid]_[block_uuid]_[unique_timestamp]"}),"."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(v.ZP,{alignItems:"center",children:[(0,j.jsx)(I.Z,{checked:kt[M.bk],label:(0,j.jsx)(b.ZP,{muted:!0,small:!0,children:"Unique upstream table names"}),onClick:function(e){(0,Pe.j)(e),ii((0,r.Z)({},M.bk,!kt[M.bk]))}}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(oe.kI,{muted:!0})]})}),(0,j.jsx)(g.Z,{mr:1})]})]})}),Lo.length>=1&&(0,j.jsx)(x.y9,{normalPadding:!0,children:(0,j.jsx)(v.ZP,{children:Lo.map((function(e,n){var t=e.description,o=e.title;return(0,j.jsx)(g.Z,{ml:n>=1?1:0,children:(0,j.jsx)($.Z,{block:!0,description:t,size:null,widthFitContent:!0,children:(0,j.jsx)(m.Z,{children:o})})},o)}))})}),Fn.length>=1&&!ot&&E.f2.includes(Ln)&&!mt&&!Bn&&(0,j.jsxs)(x.y9,{normalPadding:!0,children:[(0,j.jsx)(g.Z,{mr:1,children:(0,j.jsxs)(b.ZP,{muted:!0,small:!0,children:[!vt&&"Positional arguments for ".concat(gt?"":"decorated ","function:"),vt&&(0,j.jsxs)(j.Fragment,{children:["The interpolated tables below are available in queries from upstream blocks.",(0,j.jsx)("br",{}),"Example: ",(0,j.jsx)(b.ZP,{inline:!0,monospace:!0,small:!0,children:"SELECT * FROM {{ df_1 }}"})," to insert all rows from ",(0,j.jsx)(b.ZP,{inline:!0,monospace:!0,small:!0,children:null===Fn||void 0===Fn?void 0:Fn[0]})," into a table."]})]})}),(0,j.jsxs)(g.Z,{mt:1,children:[!vt&&!gt&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,small:!0,children:[E.tf.DATA_EXPORTER===Ln&&"@data_exporter",E.tf.DATA_LOADER===Ln&&"@data_loader",E.tf.TRANSFORMER===Ln&&"@transformer",E.tf.CUSTOM===Ln&&"@custom"]}),(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,small:!0,children:["def ",(E.tf.DATA_EXPORTER===Ln?"export_data":E.tf.DATA_LOADER===Ln&&"load_data")||E.tf.TRANSFORMER===Ln&&"transform"||E.tf.CUSTOM===Ln&&"transform_custom","(",Fn.map((function(e,n){return n>=1?"data_".concat(n+1):"data"})).join(", "),"):"]})]}),gt&&(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,small:!0,children:[E.tf.DATA_EXPORTER===Ln?"export_data":E.tf.TRANSFORMER===Ln&&"transform","\xa0\u2190 function(",Fn.map((function(e,n){return"df_".concat(n+1)})).join(", "),"):"]})}),vt&&(null===Fn||void 0===Fn?void 0:Fn.length)>=1&&(0,j.jsx)(Ie,{block:G,blockConfiguration:kt,blockRefs:z,blocks:null===Fn||void 0===Fn?void 0:Fn.map((function(e){return null===jo||void 0===jo?void 0:jo[e]})),updateBlockConfiguration:ii}),!vt&&Fn.map((function(e,n){var t=jo[e],o=(0,x.qn)(null===t||void 0===t?void 0:t.type,{blockColor:null===t||void 0===t?void 0:t.color,theme:Tn}).accent,i="{{ df_".concat(n+1," }}");return(0,j.jsxs)("div",{children:[!vt&&!gt&&(0,j.jsxs)(b.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0data",n>=1?"_".concat(n+1):null]}),vt&&(0,j.jsx)(b.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:i}),gt&&(0,j.jsxs)(b.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0","df".concat(n+1)]})," ",(0,j.jsx)(b.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"\u2192"})," ",(0,j.jsx)(V.Z,{color:o,onClick:function(){var e,n,o=null===z||void 0===z||null===(e=z.current)||void 0===e?void 0:e["".concat(null===t||void 0===t?void 0:t.type,"s/").concat(null===t||void 0===t?void 0:t.uuid,".py")];null===o||void 0===o||null===(n=o.current)||void 0===n||n.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(b.ZP,{color:o,inline:!0,monospace:!0,small:!0,children:e})})]},e)}))]})]}),!An&&(0,j.jsx)(j.Fragment,{children:ot?(0,j.jsx)(g.Z,{px:1,children:(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,children:["(",(0,L._6)("line",null===ct||void 0===ct?void 0:ct.split(/\r\n|\r|\n/).length)," collapsed)"]})}):!bt||Pt?Jo?(0,j.jsx)(g.Z,{px:1,children:(0,j.jsxs)(b.ZP,{monospace:!0,muted:!0,children:["Replicated from block ",(0,j.jsx)(V.Z,{color:(0,x.qn)(null===Jo||void 0===Jo?void 0:Jo.type,{blockColor:null===Jo||void 0===Jo?void 0:Jo.color,theme:Tn}).accent,onClick:function(e){var n,t;(0,Pe.j)(e);var o=null===z||void 0===z||null===(n=z.current)||void 0===n?void 0:n["".concat(null===Jo||void 0===Jo?void 0:Jo.type,"s/").concat(null===Jo||void 0===Jo?void 0:Jo.uuid,".py")];null===o||void 0===o||null===(t=o.current)||void 0===t||t.scrollIntoView()},preventDefault:!0,children:(0,j.jsx)(b.ZP,{color:(0,x.qn)(null===Jo||void 0===Jo?void 0:Jo.type,{blockColor:null===Jo||void 0===Jo?void 0:Jo.color,theme:Tn}).accent,inline:!0,monospace:!0,children:null===Jo||void 0===Jo?void 0:Jo.uuid})})]})}):$o:li}),fe&&u.cloneElement(fe,{runBlockAndTrack:ko}),An&&(0,j.jsxs)(g.Z,{p:B.cd,children:[(0,j.jsx)(b.ZP,{bold:!0,danger:!0,children:null===An||void 0===An?void 0:An.error}),(0,j.jsx)(b.ZP,{muted:!0,children:null===An||void 0===An?void 0:An.message})]}),Oo&&at&&at>Ut&&(0,j.jsx)(x.HC,{children:(0,j.jsxs)(b.ZP,{muted:!0,children:["".concat(Math.round((at-Ut)/1e3)),"s"]})}),!ot&&![E.tf.CALLBACK,E.tf.CONDITIONAL,E.tf.EXTENSION].includes(Ln)&&(0,j.jsx)(P,{block:G,blocks:N,openSidekickView:on,pipeline:rn})]})),ni]})]}),!Je&&(0,j.jsxs)(x.gE,{additionalZIndex:ci-H,onMouseEnter:function(){return Yn(!0)},onMouseLeave:function(){Yn(!1),null===sn||void 0===sn||sn(null)},children:[qn&&_&&(0,j.jsx)(g.Z,{mt:2,mx:2,style:{width:"100%"},children:(0,j.jsx)(p.Z,{addNewBlock:function(e){var n=e.content,t=e.configuration,o=(0,le.eY)(G,e),i=(0,le.fA)(rn,G,e).map((function(e){var n=Qe({},jo[e]||{}),t=n.upstream_blocks;return t&&(n.upstream_blocks=t.filter((function(e){return e!==Gn}))),n}));return[E.tf.DATA_LOADER,E.tf.TRANSFORMER].includes(Ln)&&E.tf.SCRATCHPAD===e.type&&(n="from mage_ai.data_preparation.variable_manager import get_variable\n\n\n  df = get_variable('".concat(pt,"', '").concat(Gn,"', 'output_0')")),n=(0,Me.X7)(e,n),E.t6.SQL===Dn&&(t=Qe(Qe({},(0,Ge.GL)(Hn,[M.cH,M.Sv,M.sc,M.BD,M.nq])),t)),E.t6.SQL===e.language&&(n=(0,Me.SF)(n)),_(Qe(Qe({},e),{},{configuration:t,content:n,upstream_blocks:o}),i)},blockIdx:H,blockTemplates:Q,compact:!0,hideCustom:mt,hideDbt:mt,onClickAddSingleDBTModel:nn,pipeline:rn,project:cn,setAddNewBlockMenuOpenIdx:sn,setCreatingNewDBTModel:pn,showBrowseTemplates:Cn,showConfigureProjectModal:kn,showGlobalDataProducts:On})}),(0,j.jsx)(x.t1,{className:"block-divider-inner"})]})]})})}var qe=u.forwardRef(Ke)},84820:function(e,n,t){t.d(n,{Z:function(){return v}});var o,i=t(21831),r=t(44425),c=t(82394),l=t(75582),u=t(17717);!function(e){e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.MAGE_LIBRARY="mage_library",e.TRANSFORMER="transformer",e.USER_LIBRARY="user_library"}(o||(o={}));var a=t(89209);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=t(86735);function p(e,n){var t=e;t.includes("__init__")||t.push("__init__");var o,i=t.length;return(0,f.w6)(i).forEach((function(e,r){if(o)return o;var c=t.slice(0,i-r).join(u.sep);o=n["".concat(c,".py")]})),o}function m(e,n,t){var o,i,r;return((null===(o=t.outputs)||void 0===o||null===(i=o[0])||void 0===i||null===(r=i.sample_data)||void 0===r?void 0:r.columns)||[]).map((function(t){return{label:"".concat(t," column"),kind:e.languages.CompletionItemKind.Variable,insertText:"'".concat(t,"'"),range:n}}))}function h(e,n){var t=e.word.split(""),o=new RegExp(t.reduce((function(e,n,o){var i=t[o+1],r=i?"^".concat(i):"";return e+"".concat(n,"[w ").concat(r,"]*")}),""));return n.reduce((function(e,n){return n.label.match(o)?e.concat(n):e}),[])}function v(e){var n=e.autocompleteItems,t=e.block,c=e.blocks,d=e.pipeline,v=t.type,g=t.upstream_blocks,b=(0,f.HK)(n,(function(e){return e.id}));return function(t){return function(x,j){var C=[],k=x.getValueInRange({endColumn:j.column,endLineNumber:j.lineNumber,startColumn:1,startLineNumber:1}),O=x.getWordUntilPosition(j),Z=O.endColumn,y=O.startColumn,_={endColumn:Z,endLineNumber:j.lineNumber,startColumn:y,startLineNumber:j.lineNumber},T=function(e,n,t){var o=(0,a.Yn)(e),i=(0,a.M4)(e,n),r=o.find((function(e){var n=e.variableName;return i.match(new RegExp(n))}));if(r){var c=r.assignmentValue,l=(0,a.S0)(e)[c];if(l){var u,d=p(l.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t),s=(0,a.rW)(l,c);return null===d||void 0===d||null===(u=d.methods_for_class)||void 0===u?void 0:u[s]}}return[]}(k,_,b);if((null===T||void 0===T?void 0:T.length)>=1){var P=h(O,T.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Method,label:e,range:_}})));if(P.length>=1)return{suggestions:P}}var E=function(e,n,t){var o=(0,a.M4)(e,n);if(o=o.match(/([\w_]+)./)){var i=(0,a.S0)(e)[o[1]];if(i){var r=p(i.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(e,n){return n.trim()?e.concat(n):e}),[]).join(".").split("."),t);if(null!==r&&void 0!==r&&r.functions)return null===r||void 0===r?void 0:r.functions}}return[]}(k,_,b);if((null===E||void 0===E?void 0:E.length)>=1){var S=h(O,E.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Function,label:e,range:_}})));if(S.length>=1)return{suggestions:S}}if((null===g||void 0===g?void 0:g.length)>=1){var I=new RegExp("\n@".concat(v));k.match(I)&&C.push.apply(C,(0,i.Z)(h(O,function(e,n,t){var o=t.block,i=t.blocks,r=o.upstream_blocks,c=(0,f.HK)(i,(function(e){return e.uuid}));return r.map((function(t,o){var i=c[t].type,r=0===o?"output_0":"args[".concat(o-1,"]");return{label:"df ".concat(t," ").concat(i," block"),kind:e.languages.CompletionItemKind.Variable,documentation:"Variable for ".concat(i," ").concat(t," data."),insertText:r,range:n}}))}(t,_,e))))}if(O.word.match(/i|f/)){var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=(arguments.length>2?arguments[2]:void 0).word,d=new Set,f={};e.forEach((function(e){var n=e.group,t=e.id,i=e.imports;if([o.MAGE_LIBRARY,o.USER_LIBRARY].includes(n)){var r=t;r.match(/__init__.py/)&&(r=r.replace(/\/__init__.py/,"")),r=r.split(".py")[0].replaceAll(u.sep,"."),f[r]=e}var c=t.replace(".py","").replace("/__init__","").split(u.sep);if(1===c.length)d.add("import ".concat(c[0]));else if(c.length>=2){var l=c.slice(0,c.length-1).join(".");d.add("from ".concat(l," import ").concat(c[c.length-1]))}i.forEach((function(e){return d.add(e)}))}));var p,m="i"===c,h="f"===c,v=m?"import":h?"from":"",g=(0,a.M4)(n,r);if(m&&g.match(/from/)&&(p=g.match(/from ([A-Za-z0-9_.]+) /)[1]),p&&f[p]){var b=f[p],x=b.classes,j=b.constants,C=b.files,k=b.functions,O=[];return[[j,t.languages.CompletionItemKind.Constant],[x,t.languages.CompletionItemKind.Class],[k,t.languages.CompletionItemKind.Function]].forEach((function(e){var n=(0,l.Z)(e,2),t=n[0],o=n[1];t.forEach((function(e){O.push({filterText:"import ".concat(e),insertText:"import ".concat(e),kind:o,label:e,range:r})}))})),C.forEach((function(e){var n=e.split(u.sep),o=n[n.length-1].split(".py")[0];O.push({filterText:"import ".concat(o),insertText:"import ".concat(o),kind:t.languages.CompletionItemKind.Variable,label:o,range:r})})),O}return(0,i.Z)(d).map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.File,label:e,range:r}})).concat(Object.entries(f).map((function(e){var n=(0,l.Z)(e,2),o=n[0];return n[1],{filterText:"".concat(v," ").concat(o),insertText:"".concat(v," ").concat(o," "),kind:t.languages.CompletionItemKind.File,label:"".concat(o),range:s({},r)}})))}(n,k,O,t,_,e);C.push.apply(C,(0,i.Z)(w))}if(r.tf.CHART===v||r.tf.SCRATCHPAD===v){var A=[];if(r.tf.CHART===v?g.forEach((function(e,n){A.push({block:c.find((function(n){var t=n.uuid;return e===t})),matchIndex:0,variableName:"df_".concat(n+1)})})):r.tf.SCRATCHPAD===v&&function(e,n){return e.map((function(e){return{block:e,regex:new RegExp("([\\w_]+)[ ]*=[ ]*get_variable\\('".concat(n.uuid,"', '").concat(e.uuid,"', 'output_0'\\)"),"g")}}))}(c,d).forEach((function(e){var n=e.block,t=e.regex,o=k.matchAll(t);(0,i.Z)(o).forEach((function(e){var t=null===e||void 0===e?void 0:e.index,o=null===e||void 0===e?void 0:e[1];o&&A.push({block:n,matchIndex:t,variableName:o})}))})),A.length>=1){var R,D=null===(R=k.split("\n")[j.lineNumber-1])||void 0===R?void 0:R.slice(0,O.startColumn-1);if(D){var M=[];if(A.forEach((function(e){var n=e.block,o=e.matchIndex,i=e.variableName,r=new RegExp("".concat(i,"\\["));D.match(r)&&M.push({items:m(t,_,n),matchIndex:o})})),M.length>=1)return{suggestions:h(O,(0,f.YC)(M,"matchIndex",{ascending:!1})[0].items)}}}1===y&&(r.tf.CHART===v?C.push.apply(C,(0,i.Z)(h(O,g.map((function(e,n){var o="df_".concat(n+1);return{label:"".concat(o," ").concat(e," block"),kind:t.languages.CompletionItemKind.Snippet,insertText:o,range:_}}))))):r.tf.SCRATCHPAD===v&&C.push.apply(C,(0,i.Z)(h(O,function(e,n,t){var o=t.block,i=t.blocks,c=t.pipeline;return i.reduce((function(t,i){var l=i.type,u=i.uuid;return o.uuid!==u&&[r.tf.DATA_LOADER,r.tf.TRANSFORMER].includes(l)?t.concat({label:"df ".concat(u," ").concat(l," block"),kind:e.languages.CompletionItemKind.Snippet,documentation:"Get the data from ".concat(l," block ").concat(u,"."),insertText:"from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(c.uuid,"', '").concat(u,"', 'output_0')\n"),range:n}):t}),[])}(t,_,e)))))}var N=new Set;c.concat({content:k}).forEach((function(e){var n=e.content;(0,i.Z)(n.matchAll("([A-Za-z_0-9]+)","g")).forEach((function(e){return N.add(e[1])}))}));var B=(0,i.Z)(N);if(B.length){var L=B.map((function(e){return{filterText:e,insertText:e,kind:t.languages.CompletionItemKind.Variable,label:e,range:_}}));C.push.apply(C,(0,i.Z)(h(O,L)))}return{suggestions:C}}}}},32929:function(e,n,t){t.d(n,{A2:function(){return v},dP:function(){return g},hS:function(){return j},iK:function(){return b},n9:function(){return h},qy:function(){return x}});var o,i=t(26304),r=t(82394),c=t(13507),l=t(44425),u=t(72473),a=t(57653),d=t(55283),s=["uuid"],f=["uuid"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var h={uuid:"Blocks"},v={uuid:"Pipelines"},g=[h,v],b=(o={},(0,r.Z)(o,l.tf.CALLBACK,u.AQ),(0,r.Z)(o,l.tf.CHART,u.GQ),(0,r.Z)(o,l.tf.CONDITIONAL,u.hW),(0,r.Z)(o,l.tf.CUSTOM,u.VS),(0,r.Z)(o,l.tf.DATA_EXPORTER,u.zS),(0,r.Z)(o,l.tf.DATA_LOADER,u.rH),(0,r.Z)(o,l.tf.DBT,u.xE),(0,r.Z)(o,l.tf.EXTENSION,u.Bf),(0,r.Z)(o,l.tf.MARKDOWN,u.$B),(0,r.Z)(o,l.tf.SENSOR,u.LM),(0,r.Z)(o,l.tf.TRANSFORMER,u.Sv),o),x=[{Icon:u.zQ,uuid:"All templates"}].concat([{uuid:l.tf.DATA_LOADER},{uuid:l.tf.TRANSFORMER},{selectedIconProps:{inverted:!0},uuid:l.tf.DATA_EXPORTER},{uuid:l.tf.SENSOR},{selectedIconProps:{inverted:!0},uuid:l.tf.CUSTOM},{uuid:l.tf.CHART},{selectedIconProps:{inverted:!0},uuid:l.tf.CALLBACK},{selectedIconProps:{inverted:!0},uuid:l.tf.CONDITIONAL},{uuid:l.tf.EXTENSION},{selectedBackgroundColor:null,uuid:l.tf.DBT},{selectedIconProps:{inverted:!0},uuid:l.tf.MARKDOWN}].map((function(e){var n=e.uuid,t=(0,i.Z)(e,s);return m({Icon:b[n],filterTemplates:function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.block_type===n}))},label:function(){return l.V4[n]},selectedBackgroundColor:function(e){return(0,d.qn)(n,{theme:e}).accent},uuid:n},t)}))),j=[{Icon:u.zQ,uuid:"All templates"}].concat([{Icon:u.X5,uuid:a.qL.PYTHON},{Icon:u.ZG,uuid:a.qL.INTEGRATION},{Icon:c.Z,uuid:a.qL.STREAMING}].map((function(e){var n=e.uuid,t=(0,i.Z)(e,f);return m({filterTemplates:function(e){return null===e||void 0===e?void 0:e.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.pipeline)||void 0===t?void 0:t.type)===n}))},label:function(){return a.G7[n]},uuid:n},t)})))},84649:function(e,n,t){t.d(n,{EN:function(){return _},FX:function(){return T},HS:function(){return C},Nk:function(){return m},Rd:function(){return p},SL:function(){return y},Tj:function(){return Z},UE:function(){return O},Yf:function(){return v},ZG:function(){return d},bC:function(){return h},n5:function(){return f},n8:function(){return k},w5:function(){return j},wj:function(){return b},wl:function(){return g},ze:function(){return x}});var o=t(38626),i=t(44897),r=t(42631),c=t(46684),l=t(70515),u=t(91437),a=t(47041),d=2.5*l.iI,s=40*l.iI,f=10*l.iI,p=o.default.div.withConfig({displayName:"indexstyle__ContainedStyle",componentId:"sc-8sk2qr-0"})([""," overflow:auto;"," "," ",""],a.w5,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).page,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-f,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width-f,"px;\n  ")})),m=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-8sk2qr-1"})(["height:100%;position:relative;"]),h=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-8sk2qr-2"})(["position:fixed;width:","px;z-index:1;"," "," ",""],s,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-f,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "})),v=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-8sk2qr-3"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;",""],1*l.iI,l.cd*l.iI,l.cd*l.iI,1*l.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),g=o.default.div.withConfig({displayName:"indexstyle__LinksContainerStyle",componentId:"sc-8sk2qr-4"})([""," overflow:auto;position:fixed;width:","px;",""],a.w5,s,(function(e){return"\n    height: calc(100% - ".concat(55+(null!==e&&void 0!==e&&e.contained?f:c.Mz)+((null===e||void 0===e?void 0:e.heightOffset)||0),"px);\n  ")})),b=o.default.div.withConfig({displayName:"indexstyle__NavLinkStyle",componentId:"sc-8sk2qr-5"})([""," padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;&:hover{cursor:pointer;}",""],(0,u.eR)(),1*l.iI,l.cd*l.iI,l.cd*l.iI,1*l.iI,(function(e){return e.selected&&"\n    background-color: ".concat((e.theme.background||i.Z.background).codeTextarea,";\n  ")})),x=o.default.div.withConfig({displayName:"indexstyle__IconStyle",componentId:"sc-8sk2qr-6"})([""," border-radius:","px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],(0,u.eR)(),r.n_,5*l.iI,1.25*l.iI,1.25*l.iI,5*l.iI,(function(e){return!e.backgroundColor&&"\n    background-color: ".concat((e.theme.background||i.Z.background).chartBlock,";\n  ")}),(function(e){return e.backgroundColor&&"\n    background-color: ".concat(e.backgroundColor,";\n  ")})),j=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-8sk2qr-7"})(["margin-left:","px;"],s),C=o.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-8sk2qr-8"})(["padding:","px;",""],l.cd*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")})),k=o.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-8sk2qr-9"})(["display:flex;flex-wrap:wrap;padding:","px;"],.75*l.iI),O=o.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-8sk2qr-10"})(["border-radius:","px;margin:","px;padding:","px;width:","px;&:hover{cursor:pointer;}",""],r.n_,.75*l.iI,2.5*l.iI,50*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((e.theme.background||i.Z.background).chartBlock,";\n    box-shadow: ").concat((e.theme.shadow||i.Z.shadow).frame,";\n  ")})),Z=o.default.div.withConfig({displayName:"indexstyle__CardTitleStyle",componentId:"sc-8sk2qr-11"})(["height:","px;"],2.5*l.iI),y=o.default.div.withConfig({displayName:"indexstyle__CardDescriptionStyle",componentId:"sc-8sk2qr-12"})(["height:","px;margin-top:","px;"],2.5*l.iI*2,1*l.iI),_=o.default.div.withConfig({displayName:"indexstyle__TagsStyle",componentId:"sc-8sk2qr-13"})(["height:","px;margin-top:","px;overflow:hidden;"],3.5*l.iI,.5*l.iI),T=o.default.div.withConfig({displayName:"indexstyle__BreadcrumbsStyle",componentId:"sc-8sk2qr-14"})(["padding-bottom:","px;padding-top:","px;",""],1*l.iI,1*l.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}))},88328:function(e,n,t){t.d(n,{Z:function(){return L}});var o=t(82394),i=t(75582),r=t(12691),c=t.n(r),l=t(21764),u=t(82684),a=t(69864),d=t(34376),s=t(71180),f=t(90299),p=t(44898),m=t(17586),h=t(97618),v=t(55485),g=t(48670),b=t(38276),x=t(30160),j=t(35576),C=t(17488),k=t(62547),O=t(35686),Z=t(94777),y=t(98464),_=t(46684),T={uuid:"Define"},P={uuid:"Document"},E=[T,P],S=t(70515),I=t(11302),w=t(68899),A=t(72619),R=t(23780),D=t(19183),M=t(28598);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=function(e){var n=e.defaultTab,t=e.onMutateSuccess,o=e.pipelineUUID,r=e.template,N=e.templateAttributes,L=e.templateUUID,U=(0,D.i)().height,F=(_.Mz,(0,d.useRouter)()),G=(0,R.VI)(null,{},[],{uuid:"CustomTemplates/PipelineTemplateDetail"}),H=(0,i.Z)(G,1)[0],z=(0,u.useState)(!1),Q=z[0],W=z[1],K=(0,u.useState)(!1),q=K[0],Y=K[1],V=(0,u.useState)(N),X=V[0],J=V[1],$=(0,u.useCallback)((function(e){Y(!0),J(e)}),[]),ee=(0,y.Z)(r);(0,u.useEffect)((function(){(null===ee||void 0===ee?void 0:ee.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)&&J(r)}),[r,ee]);var ne=O.ZP.pipelines.detail(o).data,te=(0,u.useMemo)((function(){return(null===r||void 0===r?void 0:r.pipeline)||(null===ne||void 0===ne?void 0:ne.pipeline)}),[ne,r]),oe=(0,u.useMemo)((function(){return(null===te||void 0===te?void 0:te.blocks)||[]}),[te]),ie=(0,u.useMemo)((function(){return!r&&!L}),[r,L]),re=(0,u.useState)(n?E.find((function(e){return e.uuid===(null===n||void 0===n?void 0:n.uuid)})):E[0]),ce=re[0],le=re[1],ue=(0,u.useMemo)((function(){return!!ie&&!(null!==X&&void 0!==X&&X.template_uuid)}),[ie,X]),ae=(0,u.useState)(!1),de=ae[0],se=ae[1],fe=(0,u.useState)(ie?400:300),pe=fe[0],me=fe[1],he=(0,a.Db)(O.ZP.custom_templates.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.custom_template;t&&(null===t||void 0===t||t()),W(!0),setTimeout((function(){F.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid),"?object_type=").concat(p.R))}),1)},onErrorCallback:function(e,n){return H({errors:n,response:e})}})}}),ve=(0,i.Z)(he,2),ge=ve[0],be=ve[1].isLoading,xe=(0,a.Db)(O.ZP.custom_templates.useUpdate(r?encodeURIComponent(null===r||void 0===r?void 0:r.template_uuid):L&&encodeURIComponent(L),{object_type:p.R}),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.custom_template;t&&(null===t||void 0===t||t()),null!==r&&void 0!==r&&r.template_uuid&&(null===n||void 0===n?void 0:n.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)||L&&(null===n||void 0===n?void 0:n.template_uuid)!==L?F.replace("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid),"?object_type=").concat(p.R)):(J(n),Y(!1),l.Am.success("Template successfully saved.",{position:l.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_pipeline_template"}))},onErrorCallback:function(e,n){return H({errors:n,response:e})}})}}),je=(0,i.Z)(xe,2),Ce=je[0],ke=je[1].isLoading,Oe=(0,u.useCallback)((function(){var e={custom_template:B(B({},X),{},{object_type:p.R})};ie?ge(B(B({},e),{},{custom_template:B(B({},null===e||void 0===e?void 0:e.custom_template),{},{pipeline_uuid:o})})):Ce(e)}),[ge,ie,o,X,Ce]),Ze=(0,u.useMemo)((function(){return(0,M.jsxs)(v.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,M.jsx)(I.Yf,{children:(0,M.jsx)(f.Z,{noPadding:!0,onClickTab:function(e){le(e)},selectedTabUUID:null===ce||void 0===ce?void 0:ce.uuid,tabs:E})}),(0,M.jsxs)(h.Z,{flexDirection:"column",children:[T.uuid===(null===ce||void 0===ce?void 0:ce.uuid)&&(0,M.jsxs)(M.Fragment,{children:[o&&(0,M.jsx)(b.Z,{mt:S.cd,px:S.cd,children:(0,M.jsxs)(x.ZP,{default:!0,children:["This pipeline template will be based off the pipeline ",(0,M.jsx)(c(),{as:"/pipelines/".concat(o),href:"/pipelines/[pipeline]",passHref:!0,children:(0,M.jsx)(g.Z,{bold:!0,default:!0,inline:!0,monospace:!0,openNewWindow:!0,children:o})}),"."]})}),(0,M.jsxs)(b.Z,{mt:S.cd,px:S.cd,children:[(0,M.jsxs)(b.Z,{mb:1,children:[(0,M.jsx)(x.ZP,{bold:!0,children:"Template UUID"}),(0,M.jsx)(x.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,M.jsx)(C.Z,{monospace:!0,onChange:function(e){return $((function(n){return B(B({},n),{},{template_uuid:e.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===X||void 0===X?void 0:X.template_uuid)||""})]})]}),P.uuid===(null===ce||void 0===ce?void 0:ce.uuid)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(b.Z,{mt:S.cd,px:S.cd,children:[(0,M.jsxs)(b.Z,{mb:1,children:[(0,M.jsx)(x.ZP,{bold:!0,children:"Name"}),(0,M.jsx)(x.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,M.jsx)(C.Z,{onChange:function(e){return $((function(n){return B(B({},n),{},{name:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===X||void 0===X?void 0:X.name)||""})]}),(0,M.jsx)(b.Z,{mt:S.cd,px:S.cd,children:(0,M.jsx)(j.Z,{label:"Description",onChange:function(e){return $((function(n){return B(B({},n),{},{description:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===X||void 0===X?void 0:X.description)||""})})]})]}),(0,M.jsx)(I.ig,{children:(0,M.jsx)(b.Z,{p:S.cd,children:(0,M.jsx)(v.ZP,{children:(0,M.jsxs)(s.Z,{disabled:ue,fullWidth:!0,loading:be||ke,onClick:function(){return Oe()},primary:!0,children:[!ie&&"Save template",ie&&"Create new template"]})})})})]})}),[ue,be,ke,ie,o,Oe,null===ce||void 0===ce?void 0:ce.uuid,$,X]),ye=(0,Z.Z)({shouldWarn:!Q&&q,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,M.jsxs)(k.Z,{before:Ze,beforeHidden:de,beforeWidth:pe,leftOffset:w.k1,setBeforeHidden:se,setBeforeWidth:me,children:[(0,M.jsx)(ye,{}),(0,M.jsx)(m.Z,{blocks:oe,height:U,heightOffset:_.Mz,noStatus:!0,pipeline:te})]})}},11302:function(e,n,t){t.d(n,{Nk:function(){return u},Yf:function(){return d},bC:function(){return a},ig:function(){return s},w5:function(){return f}});var o=t(38626),i=t(44897),r=t(70515),c=t(84649),l=(r.iI,40*r.iI),u=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-axgvn9-0"})(["height:100%;position:relative;"]),a=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-axgvn9-1"})(["overflow:auto;position:fixed;width:","px;z-index:1;"," "," ",""],l,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((e.theme.borders||i.Z.borders).light,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height-c.n5,"px;\n  ")}),(function(e){return!e.height&&"\n    height: 100%;\n  "})),d=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-axgvn9-2"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;width:100%;",""],1*r.iI,r.cd*r.iI,r.cd*r.iI,1*r.iI,(function(e){return"\n    border-bottom: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__ButtonsStyle",componentId:"sc-axgvn9-3"})(["margin-top:","px;width:100%;",""],r.cd*r.iI,(function(e){return"\n    border-top: 1px solid ".concat((e.theme.borders||i.Z.borders).light,";\n  ")})),f=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-axgvn9-4"})(["margin-left:","px;"],l)},5755:function(e,n,t){t.d(n,{Z:function(){return W}});var o=t(82394),i=t(75582),r=t(56085),c=t(82684),l=t(65701),u=t(1254),a=t(21764),d=t(69864),s=t(34376),f=t(40761),p=t(71180),m=t(90299),h=t(2501),v=t(44898),g=t(97618),b=t(55485),x=t(38276),j=t(44085),C=t(30160),k=t(35576),O=t(17488),Z=t(35686),y=t(94777),_=t(98464),T=t(44425),P=t(11302),E=t(48339),S=t(39643),I={uuid:"Define"},w={uuid:"Document"},A=[I,w],R=t(11498),D=t(70515),M=t(57653),N=t(4383),B=t(72619),L=t(42041),U=t(23780),F=t(44688),G=t(19183),H=t(28598);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var W=function(e){var n=e.contained,t=e.defaultTab,z=e.heightOffset,W=e.onCancel,K=e.onCreateCustomTemplate,q=e.onMutateSuccess,Y=e.template,V=e.templateAttributes,X=e.templateUUID,J=(0,G.i)().height,$=(0,s.useRouter)(),ee=(0,U.VI)(null,{},[],{uuid:"CustomTemplates/TemplateDetail"}),ne=(0,i.Z)(ee,1)[0],te=(0,c.useState)(Number(new Date)),oe=te[0],ie=te[1],re=(0,c.useState)(!1),ce=re[0],le=re[1],ue=(0,c.useState)(!1),ae=ue[0],de=ue[1],se=(0,c.useState)(t?A.find((function(e){return e.uuid===(null===t||void 0===t?void 0:t.uuid)})):A[0]),fe=se[0],pe=se[1],me=(0,c.useState)(!1),he=me[0],ve=me[1],ge=(0,c.useState)(V),be=ge[0],xe=ge[1],je=(0,c.useCallback)((function(e){ve(!0),xe(e)}),[]),Ce=Z.ZP.custom_templates.detail(!Y&&X&&encodeURIComponent(X),{object_type:v.Z}).data,ke=(0,c.useMemo)((function(){return Y||(null===Ce||void 0===Ce?void 0:Ce.custom_template)}),[Ce,Y]),Oe=(0,_.Z)(ke);(0,c.useEffect)((function(){(null===Oe||void 0===Oe?void 0:Oe.template_uuid)!==(null===ke||void 0===ke?void 0:ke.template_uuid)&&(ie(Number(new Date)),xe(ke),de(!0))}),[ke,Oe]);var Ze=(0,d.Db)(Z.ZP.custom_templates.useCreate(),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(e){var n=e.custom_template;q&&(null===q||void 0===q||q()),K?null===K||void 0===K||K(n):(le(!0),setTimeout((function(){$.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===n||void 0===n?void 0:n.template_uuid)))}),1))},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),ye=(0,i.Z)(Ze,2),_e=ye[0],Te=ye[1].isLoading,Pe=(0,d.Db)(Z.ZP.custom_templates.useUpdate(Y?encodeURIComponent(null===Y||void 0===Y?void 0:Y.template_uuid):X&&encodeURIComponent(X),{object_type:v.Z}),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(e){var n=e.custom_template;q&&(null===q||void 0===q||q()),xe(n),ve(!1),a.Am.success("Template successfully saved.",{position:a.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_block_template"})},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Ee=(0,i.Z)(Pe,2),Se=Ee[0],Ie=Ee[1].isLoading,we=(0,c.useMemo)((function(){return T.tf.MARKDOWN===(null===be||void 0===be?void 0:be.block_type)}),[null===be||void 0===be?void 0:be.block_type]),Ae=!Y&&!X,Re=(0,c.useMemo)((function(){return!!Ae&&(!(null!==be&&void 0!==be&&be.template_uuid)||!(null!==be&&void 0!==be&&be.block_type)||!we&&!(null!==be&&void 0!==be&&be.language))}),[we,Ae,be]),De=Z.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),Me=De.data,Ne=De.mutate,Be=null===Me||void 0===Me?void 0:Me.kernels,Le=(null===Be||void 0===Be?void 0:Be.find((function(e){return e.name===M.a_[M.qL.PYTHON]})))||(null===Be||void 0===Be?void 0:Be[0]),Ue=(0,d.Db)(Z.ZP.kernels.useUpdate(null===Le||void 0===Le?void 0:Le.id),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){return Ne()},onErrorCallback:function(e,n){return ne({errors:n,response:e})}})}}),Fe=(0,i.Z)(Ue,1)[0],Ge=(0,c.useCallback)((function(){Fe({kernel:{action_type:"interrupt"}}),qe([])}),[Fe]),He=(0,c.useState)({}),ze=He[0],Qe=He[1],We=(0,c.useState)([]),Ke=We[0],qe=We[1],Ye=(0,c.useMemo)((function(){return{language:null===be||void 0===be?void 0:be.language,name:null===be||void 0===be?void 0:be.name,type:null===be||void 0===be?void 0:be.block_type,uuid:null===be||void 0===be?void 0:be.template_uuid}}),[be]),Ve=(0,c.useMemo)((function(){return new f.Z}),[]),Xe=(0,c.useMemo)((function(){return{api_key:R.l,token:Ve.decodedToken.token}}),[Ve]),Je=(0,r.ZP)((0,N.Ib)(),{onClose:function(){return console.log("socketUrlPublish closed")},onMessage:function(e){if(e){var n=JSON.parse(e.data),t=n.execution_state,i=n.uuid;if(!i)return;Qe((function(e){var t=e[i]||[];return Q(Q({},e),{},(0,o.Z)({},i,t.concat(n)))})),E.uF.BUSY===t?qe((function(e){return e.find((function(e){var n=e.uuid;return i===n}))||!Ye?e:e.concat(Ye)})):E.uF.IDLE===t&&qe((function(e){return e.filter((function(e){var n=e.uuid;return i!==n}))}))}},onOpen:function(){return console.log("socketUrlPublish opened")},reconnectAttempts:10,reconnectInterval:3e3,shouldReconnect:function(){return console.log("Attempting to reconnect..."),!0}}).sendMessage,$e=(0,c.useCallback)((function(e){var n=e.block,t=e.code,o=e.ignoreAlreadyRunning,i=e.runDownstream,r=void 0!==i&&i,c=e.runIncompleteUpstream,l=void 0!==c&&c,u=e.runSettings,a=void 0===u?{}:u,d=e.runTests,s=void 0!==d&&d,f=e.runUpstream,p=n.extension_uuid,m=n.upstream_blocks,h=n.uuid;Ke.find((function(e){var n=e.uuid;return h===n}))&&!o||(Je(JSON.stringify(Q(Q({},Xe),{},{code:t,extension_uuid:p,run_downstream:r,run_incomplete_upstream:l,run_settings:a,run_tests:s,run_upstream:f,type:n.type,upstream_blocks:m,uuid:h}))),Qe((function(e){return delete e[h],e})),qe((function(e){return e.find((function(e){var n=e.uuid;return h===n}))?e:e.concat(n)})))}),[Ke,Je,Qe,qe,Xe]),en=(0,c.useMemo)((function(){return Ke.reduce((function(e,n,t){return Q(Q({},e),{},(0,o.Z)({},n.uuid,Q(Q({},n),{},{priority:t})))}),{})}),[Ke]),nn=(0,c.useMemo)((function(){if(!ae)return(0,H.jsx)("div",{});var e=en[null===Ye||void 0===Ye?void 0:Ye.uuid],n=e?0===e.priority?E.uF.BUSY:E.uF.QUEUED:E.uF.IDLE;return(0,H.jsx)(h.Z,{block:Ye,defaultValue:null===be||void 0===be?void 0:be.content,disableDrag:!0,executionState:n,hideExtraCommandButtons:!0,hideExtraConfiguration:!0,hideHeaderInteractiveInformation:!0,interruptKernel:Ge,messages:null===ze||void 0===ze?void 0:ze[null===Ye||void 0===Ye?void 0:Ye.uuid],noDivider:!0,onChange:function(e){return je((function(n){return Q(Q({},n),{},{content:e})}))},runBlock:$e,runningBlocks:Ke,selected:!0,setErrors:ne,textareaFocused:!0},String(oe))}),[Ye,oe,Ge,ze,ae,$e,Ke,en,je,ne,be]),tn=(0,c.useCallback)((function(){var e={custom_template:Q(Q({},be),{},{language:we?T.t6.MARKDOWN:null===be||void 0===be?void 0:be.language,object_type:v.Z})};Ae?_e(e):Se(e)}),[_e,we,Ae,be,Se]),on="CustomTemplates/TemplateDetail",rn=(0,F.y)(),cn=rn.registerOnKeyDown,ln=rn.unregisterOnKeyDown;(0,c.useEffect)((function(){return function(){ln(on)}}),[ln,on]),cn(on,(function(e,n){if(he&&(0,L.y)([S.zX,S.hS],n)){e.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else((0,L.y)([S.zX,S.Um],n)||(0,L.y)([S.PQ,S.Um],n))&&(e.preventDefault(),tn())}),[tn,he]);var un=(0,c.useMemo)((function(){return J-z}),[J,z]),an=(0,y.Z)({shouldWarn:!ce&&he,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,H.jsxs)(P.Nk,{children:[(0,H.jsx)(an,{}),(0,H.jsx)(P.bC,{height:n?un:null,children:(0,H.jsxs)(b.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,H.jsx)(P.Yf,{children:(0,H.jsx)(m.Z,{noPadding:!0,onClickTab:function(e){pe(e)},selectedTabUUID:null===fe||void 0===fe?void 0:fe.uuid,tabs:Ae?A.slice(0,1):A})}),(0,H.jsxs)(g.Z,{flexDirection:"column",children:[I.uuid===(null===fe||void 0===fe?void 0:fe.uuid)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(x.Z,{mt:D.cd,px:D.cd,children:[(0,H.jsxs)(x.Z,{mb:1,children:[(0,H.jsx)(C.ZP,{bold:!0,children:"Template UUID"}),(0,H.jsx)(C.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,H.jsx)(O.Z,{monospace:!0,onChange:function(e){return je((function(n){return Q(Q({},n),{},{template_uuid:e.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.template_uuid)||""})]}),(0,H.jsx)(x.Z,{mt:D.cd,px:D.cd,children:(0,H.jsx)(j.Z,{label:"Block type",onChange:function(e){return je((function(n){return Q(Q({},n),{},{block_type:e.target.value,language:T.tf.MARKDOWN===e.target.value?T.t6.MARKDOWN:null===n||void 0===n?void 0:n.language})}))},primary:!0,value:(null===be||void 0===be?void 0:be.block_type)||"",children:Object.values(T.tf).map((function(e){return(0,H.jsx)("option",{value:e,children:T.V4[e]},e)}))})}),!we&&(0,H.jsx)(x.Z,{mt:D.cd,px:D.cd,children:(0,H.jsx)(j.Z,{label:"Language",onChange:function(e){return je((function(n){return Q(Q({},n),{},{language:e.target.value})}))},primary:!0,value:(null===be||void 0===be?void 0:be.language)||"",children:Object.values(T.t6).map((function(e){return(0,H.jsx)("option",{value:e,children:T.LE[e]},e)}))})})]}),w.uuid===(null===fe||void 0===fe?void 0:fe.uuid)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(x.Z,{mt:D.cd,px:D.cd,children:[(0,H.jsxs)(x.Z,{mb:1,children:[(0,H.jsx)(C.ZP,{bold:!0,children:"Name"}),(0,H.jsx)(C.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,H.jsx)(O.Z,{onChange:function(e){return je((function(n){return Q(Q({},n),{},{name:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.name)||""})]}),(0,H.jsx)(x.Z,{mt:D.cd,px:D.cd,children:(0,H.jsx)(k.Z,{label:"Description",onChange:function(e){return je((function(n){return Q(Q({},n),{},{description:e.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===be||void 0===be?void 0:be.description)||""})})]})]}),(0,H.jsx)(P.ig,{children:(0,H.jsx)(x.Z,{p:D.cd,children:(0,H.jsxs)(b.ZP,{children:[(0,H.jsxs)(p.Z,{disabled:Re,fullWidth:!0,loading:Te||Ie,onClick:function(){return tn()},primary:!0,children:[!Ae&&"Save template",Ae&&"Create new template"]}),W&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(x.Z,{mr:1}),(0,H.jsx)(p.Z,{onClick:W,secondary:!0,children:"Cancel"})]})]})})})]})}),(0,H.jsx)(P.w5,{children:(0,H.jsx)(x.Z,{p:D.cd,children:(0,H.jsx)(l.W,{backend:u.PD,children:nn})})})]})}},75634:function(e,n,t){t.d(n,{W4:function(){return s},Wx:function(){return d},ZG:function(){return a}});var o=t(38626),i=t(44897),r=t(44425),c=t(42631),l=t(70515),u=t(55283),a=l.cd*l.iI,d=o.default.div.withConfig({displayName:"indexstyle__IconContainerStyle",componentId:"sc-oyfjzc-0"})(["align-items:center;border-radius:","px;border:1px solid transparent;display:flex;justify-content:center;"," "," "," "," "," "," "," "," "," ",""],c.BG,(function(e){return e.border&&"\n    border: 1px dotted ".concat((e.theme.content||i.Z.content).active,";\n  ")}),(function(e){return e.grey&&"\n    background-color: ".concat((0,u.qn)(r.tf.SCRATCHPAD,e).accent,";\n  ")}),(function(e){return e.blue&&"\n    background-color: ".concat((0,u.qn)(r.tf.DATA_LOADER,e).accent,";\n  ")}),(function(e){return e.purple&&"\n    background-color: ".concat((0,u.qn)(r.tf.TRANSFORMER,e).accent,";\n  ")}),(function(e){return e.sky&&"\n    background-color: ".concat((0,u.qn)(r.tf.MARKDOWN,e).accent,";\n  ")}),(function(e){return e.teal&&"\n    background-color: ".concat((0,u.qn)(r.tf.EXTENSION,e).accent,";\n  ")}),(function(e){return e.rose&&"\n    background-color: ".concat((0,u.qn)(r.tf.CALLBACK,e).accent,";\n  ")}),(function(e){return e.yellow&&"\n    background-color: ".concat((0,u.qn)(r.tf.DATA_EXPORTER,e).accent,";\n  ")}),(function(e){return!e.compact&&"\n    height: ".concat(a+l.iI/2,"px;\n    width: ").concat(a+l.iI/2,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(a/2+l.iI,"px;\n    width: ").concat(a/2+l.iI,"px;\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__ButtonWrapper",componentId:"sc-oyfjzc-1"})(["position:relative;margin-bottom:","px;margin-right:","px;",""],l.iI,l.iI,(function(e){return e.increasedZIndex&&"\n    z-index: 3;\n  "}))},57271:function(e,n,t){t.d(n,{Z:function(){return be}});var o=t(82394),i=t(21831),r=t(82684),c=t(75582),l=t(69864),u=t(27277),a=t(2548),d=t(71180),s=t(50724),f=t(97618),p=t(55485),m=t(46732),h=t(49130),v=t(48670),g=t(28598);var b=function(e){var n=e.fill,t=void 0===n?"white":n,o=e.size;return(0,g.jsxs)("svg",{fill:"none",height:o,viewBox:"0 0 20 21",width:o,xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("g",{clipPath:"url(#clip0_11802_82284)",children:(0,g.jsx)("path",{clipRule:"evenodd",d:"M10 20.0024C15.5228 20.0024 20 15.5253 20 10.0024C20 4.47959 15.5228 0.00244141 10 0.00244141C4.47715 0.00244141 0 4.47959 0 10.0024C0 15.5253 4.47715 20.0024 10 20.0024ZM10 18.5024C11.5782 18.5024 13.0559 18.0723 14.3224 17.323C14.3144 17.3061 14.307 17.2888 14.3002 17.2712L11.5045 10.0024H8.49587L5.70021 17.2712C5.69339 17.2889 5.68596 17.3062 5.67796 17.3231C6.94434 18.0724 8.42195 18.5024 10 18.5024ZM11.6336 6.15938L15.5784 16.416C17.3685 14.8577 18.5 12.5622 18.5 10.0024C18.5 5.30802 14.6944 1.50244 10 1.50244C5.30558 1.50244 1.5 5.30802 1.5 10.0024C1.5 12.5623 2.63162 14.8579 4.4219 16.4163L8.36685 6.15939C8.94212 4.66367 11.0583 4.66367 11.6336 6.15938Z",fill:t,fillRule:"evenodd"})}),(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"clip0_11802_82284",children:(0,g.jsx)("rect",{fill:t,height:"20",transform:"translate(0 0.00244141)",width:"20"})})})]})},x=t(65956),j=t(91835),C=t(45373),k=t(63403),O=t(72473);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _,T=function(e){var n=(0,j.Z)({},e),t=(null===n||void 0===n?void 0:n.size)||k.C,o=(0,O.J_)([{clipRule:"evenodd",d:"M15.4697 1.47202C16.3149 0.62684 17.6852 0.62684 18.5304 1.47202C19.3756 2.3172 19.3756 3.6875 18.5304 4.53268L10.7445 12.3186C10.5002 12.5629 10.1891 12.7294 9.85027 12.7972L9.11804 12.9436C7.89353 13.1885 6.81392 12.1089 7.05882 10.8844L7.20527 10.1522C7.27302 9.81337 7.43954 9.50222 7.68384 9.25792L15.4697 1.47202ZM17.4697 2.53268C17.2104 2.27329 16.7898 2.27329 16.5304 2.53268L14.7522 4.31085L15.6916 5.25019L17.4697 3.47202C17.7291 3.21263 17.7291 2.79207 17.4697 2.53268ZM14.6309 6.31085L13.6916 5.37151L8.7445 10.3186C8.7096 10.3535 8.68582 10.3979 8.67614 10.4463L8.52969 11.1786C8.4947 11.3535 8.64893 11.5077 8.82386 11.4727L9.5561 11.3263C9.60449 11.3166 9.64894 11.2928 9.68384 11.2579L14.6309 6.31085Z",fillRule:"evenodd"},{clipRule:"evenodd",d:"M2.12221 16.4212C1.89178 16.7635 1.42775 16.8555 1.08405 16.6264C0.739408 16.3966 0.646278 15.931 0.876042 15.5863L1.50008 16.0023C0.876042 15.5863 0.87632 15.5859 0.876609 15.5855L0.877248 15.5845L0.878742 15.5823L0.882593 15.5766L0.893746 15.5605C0.902714 15.5476 0.914758 15.5306 0.929868 15.51C0.96007 15.4687 1.00264 15.4126 1.05749 15.345C1.16699 15.2102 1.32669 15.0283 1.53609 14.8278C1.95274 14.4289 2.58034 13.9427 3.41428 13.6164C5.14688 12.9384 7.5533 13.0314 10.475 15.4219C13.0533 17.5314 14.8969 17.4384 16.0393 16.9914C16.6428 16.7552 17.109 16.3976 17.4267 16.0934C17.5845 15.9424 17.7021 15.8078 17.7782 15.7142C17.8161 15.6675 17.8434 15.6313 17.8598 15.6089C17.868 15.5977 17.8735 15.5899 17.8762 15.586C17.8769 15.585 17.8774 15.5843 17.8777 15.5838L17.877 15.5849C18.1069 15.2409 18.5717 15.1487 18.9161 15.3783C19.2608 15.6081 19.3539 16.0737 19.1241 16.4184L18.5001 16.0023C19.1241 16.4184 19.1238 16.4188 19.1236 16.4192L19.1229 16.4202L19.1214 16.4224L19.1176 16.4281L19.1064 16.4442C19.0974 16.4571 19.0854 16.4741 19.0703 16.4947C19.0401 16.536 18.9975 16.5921 18.9427 16.6597C18.8332 16.7945 18.6735 16.9764 18.4641 17.1769C18.0474 17.5758 17.4198 18.062 16.5859 18.3883C14.8533 19.0663 12.4469 18.9733 9.52515 16.5828C6.94686 14.4733 5.10328 14.5663 3.96088 15.0133C3.35732 15.2495 2.89117 15.6071 2.57345 15.9113C2.41566 16.0623 2.29802 16.1969 2.22197 16.2905C2.18405 16.3372 2.15679 16.3734 2.14036 16.3958C2.13215 16.407 2.12668 16.4148 2.12396 16.4187C2.12332 16.4196 2.12254 16.4207 2.12221 16.4212ZM2.12221 16.4212C2.1222 16.4212 2.12221 16.4212 2.12221 16.4212V16.4212Z",fillRule:"evenodd"}],{viewBox:"0 0 20 21"});return(0,g.jsxs)(C.ZP,y(y({},n),{},{size:t,viewBox:null,children:[(0,g.jsx)("g",{clipPath:"url(#clip0_11826_796)",id:"Type / Scratchpad",children:(0,g.jsx)("g",{id:"Vector",children:o(y(y({},n),{},{size:t}))})}),(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"clip0_11826_796",children:(0,g.jsx)("rect",{fill:"white",height:"20",transform:"translate(0 0.00244141)",width:"20"})})})]}))};!function(e){e.BLOCK_ACTION_OBJECTS="block_action_objects"}(_||(_={}));var P=t(38276),E=t(30160),S=t(17488),I=t(12468),w=t(35686),A=t(44425),R=t(32929),D=t(38626),M=t(44897),N=t(42631),B=t(70515),L=t(47041),U=t(91437),F=B.cd*B.iI,G=D.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1mqygp5-0"})([""," border-radius:","px;"," "," "," "," ",""],(0,U.eR)(),N.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||M.Z.background).dashboard,";\n    box-shadow: ").concat((e.theme.shadow||M.Z.shadow).frame,";\n  ")}),(function(e){return!e.focused&&"\n    border: 1px solid ".concat((e.theme.interactive||M.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.focused&&"\n    border: 1px solid ".concat((e.theme.interactive||M.Z.interactive).hoverBorder,";\n  ")}),(function(e){return!e.compact&&"\n    padding-left: ".concat(2.5*B.iI,"px;\n    padding-right: ").concat(2.5*B.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    padding-left: ".concat(1.5*B.iI,"px;\n    padding-right: ").concat(1.5*B.iI,"px;\n  ")})),H=D.default.div.withConfig({displayName:"indexstyle__DividerStyle",componentId:"sc-1mqygp5-1"})(["height:","px;width:1px;",""],F,(function(e){return"\n    background-color: ".concat((e.theme.interactive||M.Z.interactive).defaultBorder,";\n  ")})),z=D.default.div.withConfig({displayName:"indexstyle__ButtonWrapper",componentId:"sc-1mqygp5-2"})(["position:relative;"," "," ",""],(function(e){return e.increasedZIndex&&"\n    z-index: 3;\n  "}),(function(e){return!e.compact&&"\n    margin-bottom: ".concat(2.5*B.iI,"px;\n    margin-top: ").concat(2.5*B.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    margin-bottom: ".concat(1.5*B.iI,"px;\n    margin-top: ").concat(1.5*B.iI,"px;\n  ")})),Q=D.default.div.withConfig({displayName:"indexstyle__TextInputFocusAreaStyle",componentId:"sc-1mqygp5-3"})(["width:100%;&:hover{cursor:text;}"," ",""],(function(e){return!e.compact&&"\n    height: ".concat(2.5*B.iI,"px;\n  ")}),(function(e){return e.compact&&"\n    height: ".concat(1.5*B.iI,"px;\n  ")})),W=D.default.div.withConfig({displayName:"indexstyle__SearchStyle",componentId:"sc-1mqygp5-4"})(["position:relative;width:100%;"]),K=D.default.div.withConfig({displayName:"indexstyle__DropdownStyle",componentId:"sc-1mqygp5-5"})([""," border-radius:","px;max-height:","px;overflow:auto;position:absolute;width:100%;z-index:1;"," ",""],L.w5,N.BG,40*B.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||M.Z.background).popup,";\n    box-shadow: ").concat((e.theme.shadow||M.Z.shadow).popup,";\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")})),q=D.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-1mqygp5-6"})(["align-items:center;display:flex;justify-content:space-between;padding:","px ","px;position:relative;z-index:2;&:hover{cursor:pointer;}",""],1.5*B.iI,2.5*B.iI,(function(e){return e.highlighted&&"\n    background-color: ".concat((e.theme.interactive||M.Z.interactive).hoverBackground,";\n  ")})),Y=t(39643),V=t(78419),X=t(13803),J=t(81728),$=t(53808),ee=t(55283),ne=t(38399),te=t(72619),oe=t(3314),ie=t(23780),re=t(44688);function ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ue=function(e){var n,t=e.addNewBlock,o=e.blockIdx,i=e.blockTemplatesByBlockType,j=e.compact,C=e.focused,k=e.itemsDBT,Z=e.pipelineType,y=e.project,D=e.searchTextInputRef,M=e.setAddNewBlockMenuOpenIdx,N=e.setFocused,L=e.showBrowseTemplates,U=e.showConfigureProjectModal,ce=e.showGlobalDataProducts,ue=(0,r.useRef)(null),ae=(0,r.useRef)(null),de=(0,r.useRef)(null),se=(0,r.useRef)(null),fe="undefined"!==typeof D?D:se,pe=(0,r.useMemo)((function(){return"AddNewBlocksV2/".concat(o)}),[o]),me=(0,ie.VI)(null,{},[],{uuid:"AddNewBlocksV2/".concat(o)}),he=(0,c.Z)(me,1)[0],ve=(0,r.useState)(null),ge=ve[0],be=ve[1],xe=(0,r.useState)(!1),je=xe[0],Ce=xe[1],ke=(0,r.useState)(null),Oe=ke[0],Ze=ke[1],ye=(0,r.useState)(null),_e=ye[0],Te=ye[1],Pe=(0,r.useState)(null),Ee=Pe[0],Se=Pe[1],Ie=(0,r.useCallback)((function(e){Se(e),(0,$.t8)(V.Ch,e)}),[]);(0,r.useEffect)((function(){if(null===Ee){var e=(0,$.U2)(V.Ch,!1);Ie(e)}}),[Ie,Ee]);var we=(0,r.useMemo)((function(){return"undefined"!==typeof C?C:je}),[C,je]),Ae=(0,r.useCallback)((function(e){return"undefined"!==typeof N?N(e):Ce(e)}),[N,Ce]),Re=(0,re.y)(),De=Re.registerOnKeyDown,Me=Re.unregisterOnKeyDown;(0,r.useEffect)((function(){return function(){return Me(pe)}}),[Me,pe]),null===De||void 0===De||De(pe,(function(e,n){var t;we&&(n[Y.vP]&&(Ae(!1),null===fe||void 0===fe||null===(t=fe.current)||void 0===t||t.blur()))}),[we,fe]);var Ne=(0,r.useCallback)((function(){return be(null)}),[]),Be=(0,r.useCallback)((function(e){return null===M||void 0===M?void 0:M((function(n){return null===n||ge!==e?o:null}))}),[o,ge,M]),Le=(0,r.useMemo)((function(){var e,n;return null===(e=(0,ne.hr)(t,A.tf.DATA_LOADER,Z,{blockTemplatesByBlockType:i,v2:!0}))||void 0===e||null===(n=e.find((function(e){return e.uuid==="".concat(A.tf.DATA_LOADER,"/").concat(A.t6.PYTHON)})))||void 0===n?void 0:n.items}),[t,i,Z]),Ue=(0,r.useMemo)((function(){var e,n;return null===(e=(0,ne.hr)(t,A.tf.DATA_LOADER,Z,{blockTemplatesByBlockType:i,dataIntegrationType:X.O.SOURCES,v2:!0}))||void 0===e||null===(n=e.find((function(e){return e.uuid==="".concat(A.tf.DATA_LOADER,"/").concat(X.O.SOURCES)})))||void 0===n?void 0:n.items}),[t,i,Z]),Fe=(0,r.useMemo)((function(){var e,n;return null===(e=(0,ne.hr)(t,A.tf.DATA_EXPORTER,Z,{blockTemplatesByBlockType:i,v2:!0}))||void 0===e||null===(n=e.find((function(e){return e.uuid==="".concat(A.tf.DATA_EXPORTER,"/").concat(A.t6.PYTHON)})))||void 0===n?void 0:n.items}),[t,i,Z]),Ge=(0,r.useMemo)((function(){var e,n;return null===(e=(0,ne.hr)(t,A.tf.DATA_EXPORTER,Z,{blockTemplatesByBlockType:i,dataIntegrationType:X.O.DESTINATIONS,v2:!0}))||void 0===e||null===(n=e.find((function(e){return e.uuid==="".concat(A.tf.DATA_EXPORTER,"/").concat(X.O.DESTINATIONS)})))||void 0===n?void 0:n.items}),[t,i,Z]),He=(0,r.useMemo)((function(){var e,n;return null===(e=(0,ne.hr)(t,A.tf.TRANSFORMER,Z,{blockTemplatesByBlockType:i,v2:!0}))||void 0===e||null===(n=e.find((function(e){return e.uuid==="".concat(A.tf.TRANSFORMER,"/").concat(A.t6.PYTHON)})))||void 0===n?void 0:n.items}),[t,i,Z]),ze=(0,r.useMemo)((function(){var e,n;return null===(e=(0,ne.hr)(t,A.tf.SENSOR,Z,{blockTemplatesByBlockType:i,v2:!0}))||void 0===e||null===(n=e.find((function(e){return e.uuid==="".concat(A.tf.SENSOR,"/").concat(A.t6.PYTHON)})))||void 0===n?void 0:n.items}),[t,i,Z]),Qe=(0,r.useCallback)((function(e){return[{isGroupingTitle:!0,label:function(){return"SQL"},uuid:"".concat(A.t6.SQL,"/").concat(e,"/group")},{label:function(){return"Base template (generic)"},onClick:function(){t({language:A.t6.SQL,type:e})},uuid:"".concat(A.t6.SQL,"/").concat(e,"/Base template (generic)")},{isGroupingTitle:!0,label:function(){return"R"},uuid:"".concat(A.t6.R,"/").concat(e,"/group")},{label:function(){return"Base template (generic)"},onClick:function(){t({language:A.t6.R,type:e})},uuid:"".concat(A.t6.R,"/").concat(e,"/Base template (generic)")}]}),[t]),We=(0,r.useMemo)((function(){var e=[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(A.t6.PYTHON).concat(A.tf.DATA_LOADER,"/group")}].concat(Le).concat(Qe(A.tf.DATA_LOADER));Ue&&e.push.apply(e,[{isGroupingTitle:!0,label:function(){return"Data integrations"},uuid:"".concat(A.tf.DATA_LOADER,"/Data integrations/group")},{items:Ue,label:function(){return(0,J.kC)(X.O.SOURCES)},uuid:"".concat(A.tf.DATA_LOADER,"/Data integrations/").concat(X.O.SOURCES)}]);var n=[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(A.t6.PYTHON).concat(A.tf.DATA_EXPORTER,"/group")}].concat(Fe).concat(Qe(A.tf.DATA_EXPORTER));return Ge&&n.push.apply(n,[{isGroupingTitle:!0,label:function(){return"Data integrations"},uuid:"".concat(A.tf.DATA_EXPORTER,"/Data integrations/group")},{items:Ge,label:function(){return(0,J.kC)(X.O.DESTINATIONS)},uuid:"".concat(A.tf.DATA_EXPORTER,"/Data integrations/").concat(X.O.DESTINATIONS)}]),[{beforeIcon:(0,g.jsx)(O.rH,{fill:(0,ee.qn)(A.tf.DATA_LOADER).accent,size:F}),items:e,label:function(){return A.V4[A.tf.DATA_LOADER]},uuid:"".concat(A.tf.DATA_LOADER,"/").concat(A.t6.PYTHON)},{beforeIcon:(0,g.jsx)(O.Sv,{fill:(0,ee.qn)(A.tf.TRANSFORMER).accent,size:F}),items:[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(A.t6.PYTHON).concat(A.tf.TRANSFORMER,"/group")}].concat(He).concat(Qe(A.tf.TRANSFORMER)),label:function(){return A.V4[A.tf.TRANSFORMER]},uuid:"".concat(A.tf.TRANSFORMER,"/").concat(A.t6.PYTHON)},{beforeIcon:(0,g.jsx)(O.zS,{fill:(0,ee.qn)(A.tf.DATA_EXPORTER).accent,size:F}),items:n,label:function(){return A.V4[A.tf.DATA_EXPORTER]},uuid:"".concat(A.tf.DATA_EXPORTER,"/").concat(A.t6.PYTHON)},{beforeIcon:(0,g.jsx)(O.LM,{fill:(0,ee.qn)(A.tf.SENSOR).accent,size:F}),items:[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(A.t6.PYTHON).concat(A.tf.SENSOR,"/group")}].concat(ze),label:function(){return A.V4[A.tf.SENSOR]},uuid:"".concat(A.tf.SENSOR,"/").concat(A.t6.PYTHON)},{beforeIcon:(0,g.jsx)(O.xE,{fill:(0,ee.qn)(A.tf.DBT).accent,size:F}),items:k,label:function(){return A.V4[A.tf.DBT]},uuid:A.tf.DBT},{beforeIcon:(0,g.jsx)(O.ie,{size:F}),label:function(){return A.V4[A.tf.GLOBAL_DATA_PRODUCT]},onClick:function(){return ce({addNewBlock:t})},uuid:A.tf.GLOBAL_DATA_PRODUCT},{isGroupingTitle:!0,label:function(){return"Custom templates"},uuid:"custom_templates"},{beforeIcon:(0,g.jsx)(O.zQ,{default:!0,size:F}),label:function(){return"Browse templates"},onClick:function(){return L({addNewBlock:t})},uuid:"browse_templates"},{beforeIcon:(0,g.jsx)(O.o0,{default:!0,size:F}),label:function(){return"Create new template"},onClick:function(){return L({addNew:!0,addNewBlock:t})},uuid:"create_template"}]}),[t,Qe,Fe,Ge,Le,Ue,k,ze,He,L,ce]),Ke=(0,r.useMemo)((function(){return[{beforeIcon:(0,g.jsx)(O.VS,{default:!0,size:F}),label:function(){return"Python block"},onClick:function(){t({language:A.t6.PYTHON,type:A.tf.CUSTOM})},uuid:"Python"},{beforeIcon:(0,g.jsx)(O.VS,{default:!0,size:F}),label:function(){return"SQL block"},onClick:function(){t({language:A.t6.SQL,type:A.tf.CUSTOM})},uuid:"SQL"},{beforeIcon:(0,g.jsx)(O.VS,{default:!0,size:F}),label:function(){return"R block"},onClick:function(){t({language:A.t6.R,type:A.tf.CUSTOM})},uuid:"R"},{beforeIcon:(0,g.jsx)(T,{default:!0,size:F}),label:function(){return"Scratchpad"},onClick:function(){t({language:A.t6.PYTHON,type:A.tf.SCRATCHPAD})},uuid:"scratchpad"}]}),[t]),qe=(0,l.Db)(w.ZP.search_results.useCreate(),{onSuccess:function(e){return(0,te.wD)(e,{callback:function(e){var n=e.search_result;Te(n)},onErrorCallback:function(e,n){return he({errors:n,response:e})}})}}),Ye=(0,c.Z)(qe,1)[0],Ve=(0,r.useCallback)((function(e){clearTimeout(de.current);var n=e.target.value;Ze(n),n?de.current=setTimeout((function(){Ye({search_result:{pipeline_type:Z,query:n,ratio:70,type:_.BLOCK_ACTION_OBJECTS}})}),500):Te(null)}),[Ye,Z,de]),Xe=(0,r.useMemo)((function(){return(null===_e||void 0===_e?void 0:_e.results)||[]}),[_e]),Je=(0,r.useMemo)((function(){var e=null===_e||void 0===_e?void 0:_e.uuid,n=null===Xe||void 0===Xe?void 0:Xe.map((function(n){return{itemObject:n,searchQueries:[e],value:null===n||void 0===n?void 0:n.uuid}}));if(e){var t={itemObject:{description:e,object_type:a.L.GENERATE_BLOCK,title:"Generate block using AI (beta)"},searchQueries:[e],value:"generate_block"};Ee?n.push(t):n.unshift(t)}return n}),[Xe,_e,Ee]),$e=(0,r.useMemo)((function(){return(0,g.jsx)(Q,{compact:j,onClick:function(){var e;return null===fe||void 0===fe||null===(e=fe.current)||void 0===e?void 0:e.focus()}})}),[j,fe]),en=(0,r.useMemo)((function(){return!(null===y||void 0===y||!y.openai_api_key)}),[y]);return(0,g.jsx)(s.Z,{onClickOutside:Ne,open:!0,children:(0,g.jsx)(G,{compact:j,focused:we,children:(0,g.jsxs)(p.ZP,{alignItems:"center",children:[(0,g.jsx)(z,{compact:j,increasedZIndex:0===ge,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:We,onClickCallback:Ne,open:0===ge,parentRef:ue,uuid:"button_templates",children:(0,g.jsx)(I.Z,{block:!0,label:"Add a block from a template",size:null,widthFitContent:!0,children:(0,g.jsx)(d.Z,{beforeIcon:(0,g.jsx)(O.zQ,{secondary:0===ge,size:F}),noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(e){e.preventDefault(),be((function(e){return 0===e?null:0})),Be(0)},children:"Templates"})})})}),(0,g.jsx)(P.Z,{mr:3}),(0,g.jsx)(z,{compact:j,increasedZIndex:1===ge,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:Ke,onClickCallback:Ne,open:1===ge,parentRef:ae,uuid:"button_custom",children:(0,g.jsx)(I.Z,{block:!0,label:"Add a blank custom block or scratchpad block",size:null,widthFitContent:!0,children:(0,g.jsx)(d.Z,{beforeIcon:(0,g.jsx)(O.cW,{secondary:1===ge,size:F}),noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(e){e.preventDefault(),be((function(e){return 1===e?null:1})),Be(1)},children:"Custom"})})})}),(0,g.jsx)(P.Z,{mr:3}),(0,g.jsx)(z,{compact:j,increasedZIndex:0===ge,children:(0,g.jsx)(I.Z,{block:!0,label:"Add a markdown block for documentation",size:null,widthFitContent:!0,children:(0,g.jsx)(d.Z,{beforeIcon:(0,g.jsx)(b,{size:F}),noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(e){e.preventDefault(),t({language:A.t6.MARKDOWN,type:A.tf.MARKDOWN})},children:"Markdown"})})}),(0,g.jsx)(P.Z,{mr:3}),(0,g.jsx)(H,{}),(0,g.jsx)(P.Z,{mr:3}),(0,g.jsxs)(W,{children:[$e,(0,g.jsxs)(p.ZP,{alignItems:"center",fullWidth:!0,children:[(0,g.jsx)(S.Z,{fullWidth:!0,noBackground:!0,noBorder:!0,onBlur:function(){return setTimeout((function(){return Ae(!1)}),150)},onChange:Ve,onFocus:function(){return Ae(!0)},paddingHorizontal:0,paddingVertical:0,placeholder:"Search for a block...",ref:fe,value:Oe||""}),(0,g.jsx)(h.Z,{addPlusSignBetweenKeys:!0,disabled:!0,keyTextGroups:[[Y.RJ,Y.ZS]]})]}),$e,(0,g.jsx)(K,{topOffset:(null===fe||void 0===fe||null===(n=fe.current)||void 0===n?void 0:n.getBoundingClientRect().height)+(j?1.5*B.iI:2.5*B.iI),children:(0,g.jsx)(u.Z,{itemGroups:[{items:we?Je:[],renderItem:function(e,n){var t=e.itemObject,o=t.block_type,i=t.description,r=t.language,c=t.object_type,l=t.title,u={fill:(0,ee.qn)(o).accent,size:F},d=R.iK[o],s=a.L.GENERATE_BLOCK===c;s&&(d=O.xq,u.default=!1,u.fill=null,u.warning=!0);var p="".concat(l).concat(i?": "+i:"").slice(0,80);return(0,g.jsxs)(q,le(le({},n),{},{onClick:function(e){var t;(0,oe.j)(e),null===n||void 0===n||null===(t=n.onClick)||void 0===t||t.call(n,e)},children:[(0,g.jsxs)(f.Z,{alignItems:"center",flex:1,children:[d&&(0,g.jsx)(d,le({default:!(null!==u&&void 0!==u&&u.fill)},u)),(0,g.jsx)(P.Z,{mr:2}),(0,g.jsx)(E.ZP,{default:!0,overflowWrap:!0,textOverflow:!0,children:p})]}),(0,g.jsx)(P.Z,{mr:1}),(0,g.jsx)(E.ZP,{monospace:!0,muted:!0,uppercase:!0,children:s?"AI":A.dO[r]}),(0,g.jsx)(P.Z,{mr:1}),a.L.BLOCK_FILE===c&&(0,g.jsx)(O.$B,{muted:!0,size:F}),a.L.CUSTOM_BLOCK_TEMPLATE===c&&(0,g.jsx)(O.zQ,{muted:!0,size:F}),a.L.MAGE_TEMPLATE===c&&(0,g.jsx)(O.m1,{muted:!0,size:F}),s&&en&&(0,g.jsx)(O.xq,{muted:!0,size:F}),s&&!en&&(0,g.jsx)(O.uy,{muted:!0,size:F})]}))}}],onSelectItem:function(e){var n=e.itemObject,o=n.object_type;a.L.GENERATE_BLOCK!==o||en?(t({block_action_object:n,require_unique_name:!1}),Ze(null),Te(null)):null===U||void 0===U||U({cancelButtonText:"Set this up later",header:(0,g.jsx)(P.Z,{mb:B.HN,children:(0,g.jsxs)(x.Z,{children:[(0,g.jsx)(E.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,g.jsx)(P.Z,{mt:1,children:(0,g.jsxs)(E.ZP,{warning:!0,children:["Read ",(0,g.jsx)(v.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){Ie(!0)},onSaveSuccess:function(e){null!==e&&void 0!==e&&e.openai_api_key&&(t({block_action_object:n}),Ze(null),Te(null))}})},uuid:pe})})]})]})})})};var ae=function(e){var n=e.size;return(0,g.jsx)("svg",{fill:"none",height:n,preserveAspectRatio:"xMidYMid",viewBox:"0 0 256 256",width:n,xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("path",{d:"M245.121138,10.6473813 C251.139129,16.4340053 255.074133,24.0723342 256,32.4050489 C256,35.8769778 255.074133,38.1917867 252.990862,42.5895822 C250.907876,46.9873778 225.215147,91.4286933 217.57696,103.696213 C213.179164,110.871609 210.864356,119.435947 210.864356,127.768462 C210.864356,136.3328 213.179164,144.6656 217.57696,151.840996 C225.215147,164.108516 250.907876,208.781084 252.990862,213.179164 C255.074133,217.57696 256,219.659947 256,223.131876 C255.074133,231.464676 251.370667,239.103147 245.352676,244.658347 C239.565938,250.676338 231.927751,254.611342 223.826489,255.305671 C220.35456,255.305671 218.039751,254.379804 213.873493,252.296533 C209.706951,250.213262 164.340053,225.215147 152.072249,217.57696 C151.146382,217.113884 150.220516,216.419556 149.063396,215.95648 L88.4195556,180.079502 C89.8082133,191.652693 94.9006222,202.763093 103.233138,210.864356 C104.853618,212.484551 106.473813,213.873493 108.325547,215.262151 C106.936604,215.95648 105.316409,216.651093 103.927751,217.57696 C91.6599467,225.215147 46.9873778,250.907876 42.5895822,252.990862 C38.1917867,255.074133 36.1085156,256 32.4050489,256 C24.0723342,255.074133 16.4340053,251.370667 10.8788338,245.352676 C4.86075733,239.565938 0.925858133,231.927751 0,223.594951 C0.231464676,220.123022 1.1573248,216.651093 3.00905244,213.641956 C5.09223822,209.24416 30.7848533,164.571307 38.42304,152.303787 C42.82112,145.128391 45.1356444,136.795591 45.1356444,128.231538 C45.1356444,119.6672 42.82112,111.3344 38.42304,104.159004 C30.7848533,91.4286933 4.86075733,46.75584 3.00905244,42.3580444 C1.1573248,39.3489067 0.231464676,35.8769778 0,32.4050489 C0.925858133,24.0723342 4.62930489,16.4340053 10.6473813,10.6473813 C16.4340053,4.62930489 24.0723342,0.925858133 32.4050489,0 C35.8769778,0.231464676 39.3489067,1.1573248 42.5895822,3.00905244 C46.2930489,4.62930489 78.9293511,23.6094009 96.28928,33.7939911 L100.224284,36.1085156 C101.612942,37.0343822 102.770347,37.7287111 103.696213,38.1917867 L105.547947,39.3489067 L167.348907,75.9204978 C165.960249,62.0324978 158.784853,49.3019022 147.674453,40.7378489 C149.063396,40.04352 150.683591,39.3489067 152.072249,38.42304 C164.340053,30.7848533 209.012622,4.86075733 213.410418,3.00905244 C216.419556,1.1573248 219.891484,0.231464676 223.594951,0 C231.696213,0.925858133 239.334684,4.62930489 245.121138,10.6473813 Z M131.240391,144.434062 L144.434062,131.240391 C146.285796,129.388658 146.285796,126.611342 144.434062,124.759609 L131.240391,111.565938 C129.388658,109.714204 126.611342,109.714204 124.759609,111.565938 L111.565938,124.759609 C109.714204,126.611342 109.714204,129.388658 111.565938,131.240391 L124.759609,144.434062 C126.379804,146.054258 129.388658,146.054258 131.240391,144.434062 Z",fill:"#FF694A"})})},de=t(93369),se=t(57653),fe=t(82359),pe=t(8454),me=t(75634),he=t(5677);function ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function ge(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var be=function(e){var n=e.addNewBlock,t=e.blockIdx,o=e.blockTemplates,c=e.compact,l=e.focusedAddNewBlockSearch,u=e.hideCustom,a=e.hideDataExporter,d=(e.hideDataLoader,e.hideDbt),f=e.hideMarkdown,h=e.hideScratchpad,v=e.hideSensor,b=e.hideTransformer,x=e.hideTransformerDataSources,j=e.onClickAddSingleDBTModel,C=e.pipeline,k=e.project,Z=e.searchTextInputRef,y=e.setAddNewBlockMenuOpenIdx,_=e.setCreatingNewDBTModel,T=e.setFocusedAddNewBlockSearch,P=e.showBrowseTemplates,E=e.showConfigureProjectModal,S=e.showGlobalDataProducts,w=(0,r.useState)(null),R=w[0],D=w[1],M=(0,r.useRef)(null),N=(0,r.useRef)(null),L=(0,r.useRef)(null),U=(0,r.useRef)(null),F=(0,r.useRef)(null),G=(0,r.useRef)(null),H=(0,r.useRef)(null),z={compact:c,inline:!0},Q=null===C||void 0===C?void 0:C.type,W=Q===se.qL.STREAMING,K=c?me.ZG/2:me.ZG,q=25*B.iI,Y=(0,r.useMemo)((function(){return(0,ne.q_)(he.c1,pe.qs.COLUMN,n)}),[n]),V=(0,r.useMemo)((function(){return(0,ne.q_)(he.Wt,pe.qs.ROW,n)}),[n]),X=(0,r.useMemo)((function(){var e=[{label:function(){return"Generic (no template)"},onClick:function(){n({language:A.t6.PYTHON,type:A.tf.TRANSFORMER})},uuid:"generic_transformer_action"},{bold:!0,items:V,label:function(){return"Row actions"},uuid:"row_actions_grouping"},{isGroupingTitle:!0,label:function(){return"Column actions"},uuid:"column_actions_grouping"}].concat((0,i.Z)(Y));return x||e.splice(1,0,{bold:!0,items:(0,ne.hr)(n,A.tf.TRANSFORMER,Q),label:function(){return"Data sources"},uuid:"data_sources_grouping"}),e}),[n,Y,x,Q,V]),J=(0,r.useCallback)((function(){return D(null)}),[]),$=(0,r.useCallback)((function(e){return null===y||void 0===y?void 0:y((function(n){return null===n||R!==e?t:null}))}),[t,R,y]),ee=se.qL.PYSPARK===Q,te=(0,r.useMemo)((function(){return(0,ne.oM)(o,n)}),[n,o]),oe=(0,r.useMemo)((function(){return(0,ne.hr)(n,A.tf.DATA_LOADER,Q,{blockTemplatesByBlockType:te,showBrowseTemplates:P})}),[n,te,Q,P]),ie=(0,r.useMemo)((function(){return(0,ne.hr)(n,A.tf.DATA_EXPORTER,Q,{blockTemplatesByBlockType:te,showBrowseTemplates:P})}),[n,te,Q,P]),re=(0,r.useMemo)((function(){return ee||se.qL.INTEGRATION===Q?X:W?[{items:(0,ne.hr)(n,A.tf.TRANSFORMER,Q),label:function(){return"Python"},uuid:"transformers/python"}].concat((0,i.Z)((0,ne.hr)(n,A.tf.TRANSFORMER,Q,{blockTemplatesByBlockType:te,onlyCustomTemplate:!0,showBrowseTemplates:P}))):[{items:X,label:function(){return"Python"},uuid:"transformers/python_all"}].concat((0,i.Z)((0,ne.qs)(n,A.tf.TRANSFORMER)),(0,i.Z)((0,ne.hr)(n,A.tf.TRANSFORMER,Q,{blockTemplatesByBlockType:te,onlyCustomTemplate:!0,showBrowseTemplates:P})))}),[n,X,te,ee,W,Q,P]),ce=(0,r.useMemo)((function(){return[{label:function(){return"New model"},onClick:function(){null===_||void 0===_||_(!0),null===j||void 0===j||j(t)},uuid:"dbt/new_model"},{label:function(){return"Single model or snapshot (from file)"},onClick:function(){return null===j||void 0===j?void 0:j(t)},uuid:"dbt/single_model"},{label:function(){return"All models (w/ optional exclusion)"},onClick:function(){return n({configuration:{dbt:{command:"run"}},language:A.t6.YAML,type:A.tf.DBT})},uuid:"dbt/all_models"},{label:function(){return"Generic dbt command"},onClick:function(){return n({configuration:{dbt:{command:null}},language:A.t6.YAML,type:A.tf.DBT})},uuid:"dbt/generic_command"}]}),[n,t,j,_]);return(0,r.useMemo)((function(){var e;return se.qL.PYTHON===Q&&!ee&&(null===k||void 0===k||null===(e=k.features)||void 0===e?void 0:e[fe.d.ADD_NEW_BLOCK_V2])}),[ee,Q,k])?(0,g.jsx)(ue,{addNewBlock:n,blockIdx:t,blockTemplatesByBlockType:te,compact:c,focused:l,itemsDBT:ce,pipelineType:Q,project:k,searchTextInputRef:Z,setAddNewBlockMenuOpenIdx:y,setFocused:T,showBrowseTemplates:P,showConfigureProjectModal:E,showGlobalDataProducts:S}):(0,g.jsx)(p.ZP,{flexWrap:"wrap",inline:!0,children:(0,g.jsx)(s.Z,{onClickOutside:J,open:!0,children:(0,g.jsxs)(p.ZP,{flexWrap:"wrap",children:[!a&&(0,g.jsx)(me.W4,{increasedZIndex:0===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:oe,onClickCallback:J,open:0===R,parentRef:M,uuid:"data_loader_button",children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{blue:!0,compact:c,children:(0,g.jsx)(O.mm,{size:K})}),onClick:function(e){e.preventDefault(),D((function(e){return 0===e?null:0})),$(0)},uuid:"AddNewBlocks/Data_loader",children:"Data loader"}))})}),!b&&(0,g.jsx)(me.W4,{increasedZIndex:1===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:re,onClickCallback:J,open:1===R,parentRef:N,uuid:"transformer_button",children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{compact:c,purple:!0,children:(0,g.jsx)(O.mm,{size:K})}),onClick:function(e){e.preventDefault(),D((function(e){return 1===e?null:1})),$(1)},uuid:"AddNewBlocks/Transformer",children:"Transformer"}))})}),!a&&(0,g.jsx)(me.W4,{increasedZIndex:2===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:ie,onClickCallback:J,open:2===R,parentRef:L,uuid:"data_exporter_button",children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{compact:c,yellow:!0,children:(0,g.jsx)(O.mm,{inverted:!0,size:K})}),onClick:function(e){e.preventDefault(),D((function(e){return 2===e?null:2})),$(2)},uuid:"AddNewBlocks/Data_exporter",children:"Data exporter"}))})}),!d&&(0,g.jsx)(me.W4,{increasedZIndex:3===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:[].concat((0,i.Z)(ce),(0,i.Z)((0,ne.hr)(n,A.tf.DBT,Q,{blockTemplatesByBlockType:te,onlyCustomTemplate:!0,showBrowseTemplates:P}))),onClickCallback:J,open:3===R,parentRef:U,uuid:"dbt_button",children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(ae,{size:me.ZG*(c?.75:1.25)}),onClick:function(e){e.preventDefault(),D((function(e){return 3===e?null:3})),$(3)},uuid:"AddNewBlocks/DBT",children:"DBT model"}))})}),!u&&(0,g.jsx)(me.W4,{increasedZIndex:4===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:[{items:(0,ne.Bd)(n,A.tf.CUSTOM,A.t6.PYTHON),label:function(){return"Python"},uuid:"custom_block_python"},{items:(0,ne.Bd)(n,A.tf.CUSTOM,A.t6.SQL),label:function(){return"SQL"},uuid:"custom_block_sql"}].concat((0,i.Z)((0,ne.hr)(n,A.tf.CUSTOM,Q,{blockTemplatesByBlockType:te,onlyCustomTemplate:!0,showBrowseTemplates:P}))),onClickCallback:J,open:4===R,parentRef:F,uuid:"custom_block_button",children:(0,g.jsx)(I.Z,{block:!0,label:"Add a custom code block with a designated color.",maxWidth:q,size:null,children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{compact:c,grey:!0,children:(0,g.jsx)(O.mm,{inverted:!0,size:K})}),onClick:function(e){e.preventDefault(),D((function(e){return 4===e?null:4})),$(4)},uuid:"AddNewBlocks/Scratchpad",children:"Custom"}))})})}),!h&&(0,g.jsx)(me.W4,{children:(0,g.jsx)(I.Z,{block:!0,label:"Write experimental code that doesn\u2019t get executed when you run your pipeline.",maxWidth:q,size:null,children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{border:!0,compact:c,children:(0,g.jsx)(O.mm,{size:K})}),onClick:function(e){e.preventDefault(),n({type:A.tf.SCRATCHPAD})},uuid:"AddNewBlocks/Scratchpad",children:"Scratchpad"}))})}),!h&&(0,g.jsx)(me.W4,{children:(0,g.jsx)(I.Z,{block:!0,label:"Add a global data product block",maxWidth:q,size:null,children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{compact:c,children:(0,g.jsx)(O.ie,{size:K})}),onClick:function(e){e.preventDefault(),S({addNewBlock:n})},uuid:"AddNewBlocks/GlobalDataProducts",children:"Global data product"}))})}),!W&&!v&&(0,g.jsx)(me.W4,{increasedZIndex:6===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:[].concat((0,i.Z)((0,ne.hr)(n,A.tf.SENSOR,Q)),(0,i.Z)((0,ne.hr)(n,A.tf.SENSOR,Q,{blockTemplatesByBlockType:te,onlyCustomTemplate:!0,showBrowseTemplates:P}))),onClickCallback:J,open:6===R,parentRef:G,uuid:"sensor_button",children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{compact:c,children:(0,g.jsx)(O.LM,{pink:!0,size:me.ZG*(c?.75:1.25)})}),onClick:function(e){e.preventDefault(),D((function(e){return 6===e?null:6})),$(6)},uuid:"AddNewBlocks/Sensor",children:"Sensor"}))})}),!f&&(0,g.jsx)(me.W4,{increasedZIndex:7===R,children:(0,g.jsx)(m.Z,{disableKeyboardShortcuts:!0,items:[{label:function(){return"Generic (no template)"},onClick:function(){n({language:A.t6.MARKDOWN,type:A.tf.MARKDOWN})},uuid:"generic_markdown"}].concat((0,i.Z)((0,ne.hr)(n,A.tf.MARKDOWN,Q,{blockTemplatesByBlockType:te,onlyCustomTemplate:!0,showBrowseTemplates:P}))),onClickCallback:J,open:7===R,parentRef:H,uuid:"markdown_button",children:(0,g.jsx)(de.ZP,ge(ge({},z),{},{beforeElement:(0,g.jsx)(me.Wx,{compact:c,sky:!0,children:(0,g.jsx)(O.mm,{inverted:!0,size:K})}),onClick:function(e){e.preventDefault(),D((function(e){return 7===e?null:7})),$(7)},uuid:"AddNewBlocks/Markdown",children:"Markdown"}))})})]})})})}},38399:function(e,n,t){t.d(n,{Bd:function(){return y},SF:function(){return _},X7:function(){return T},hr:function(){return k},oM:function(){return C},q_:function(){return Z},qs:function(){return j}});var o=t(21831),i=t(82394),r=t(55485),c=t(30160),l=t(5677),u=t(72473),a=t(44425),d=t(84438),s=t(57653),f=t(81728),p=t(55283),m=t(86735),h=t(28598);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var g=function(e,n,t){var o=t===s.qL.STREAMING&&(e===a.tf.DATA_LOADER||e===a.tf.DATA_EXPORTER);return(function(e){var n;return e===s.qL.STREAMING?(n={},(0,i.Z)(n,a.tf.DATA_LOADER,[d.ZP.AMAZON_SQS,d.ZP.AZURE_EVENT_HUB,d.ZP.GOOGLE_CLOUD_PUBSUB,d.ZP.INFLUXDB,d.ZP.KAFKA,d.ZP.KINESIS,d.ZP.RABBITMQ]),(0,i.Z)(n,a.tf.DATA_EXPORTER,[d.ZP.AZURE_DATA_LAKE,d.ZP.DUMMY,d.ZP.INFLUXDB,d.ZP.S3,d.ZP.KAFKA,d.ZP.KINESIS,d.ZP.MONGODB,d.ZP.OPENSEARCH,d.ZP.POSTGRES,d.ZP.ELASTICSEARCH]),(0,i.Z)(n,a.tf.TRANSFORMER,[d.ZP.GENERIC]),n):d.cp}(t)[e]||[]).map((function(t){return{indent:e===a.tf.TRANSFORMER,label:function(){return d.MV[t]},onClick:function(){n({config:{data_source:t===d.ZP.GENERIC?null:t},language:o?a.t6.YAML:a.t6.PYTHON,type:e})},uuid:"".concat(e,"/").concat(t)}}))};function b(e,n){return{label:function(){return"SQL"},onClick:function(){return e({language:a.t6.SQL,type:n})},uuid:"".concat(n,"/sql")}}function x(e,n){return{label:function(){return"R"},onClick:function(){return e({language:a.t6.R,type:n})},uuid:"".concat(n,"/r")}}var j=function(e,n){return[b(e,n),x(e,n)]};function C(e,n){var t={};return null===e||void 0===e||e.forEach((function(e){var o=e.block_type,r=e.configuration,c=e.description,l=e.groups,u=e.language,a=e.name,d=e.path,s=e.template_type,f=e.template_variables;t[o]||(t[o]={}),t[o][u]||(t[o][u]={items:[],label:function(){return u},uuid:"".concat(o,"/").concat(u)});var p={label:function(){return a},onClick:function(){return n({config:{template_path:d,template_type:s,template_variables:f},configuration:r,language:u,type:o})},tooltip:function(){return c},uuid:d};if((null===l||void 0===l?void 0:l.length)>=1){var m=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},t[o][u]),h=[null],g=[m];l.forEach((function(e,n){var t="".concat(o,"/").concat(u,"/").concat(l.slice(0,n+1).join("/")),i=g[n],r=i.items.findIndex((function(e){var n=e.uuid;return t===n})),c=r>=0?i.items[r]:null;c||(c={items:[],label:function(){return e},uuid:t}),h.push(r),g.push(c)})),h.push(-1),g.push(p);var b=g.length;t[o][u]=g.reduce((function(e,n,t){var o=b-t,i=g[o-2],r=g[o-1],c=h[o-1];return i?(c>=0?i.items[c]=r:i.items.push(r),i):r}),{})}else t[o][u].items.push(p)})),t}var k=function(e,n,t,o){var i=o||{},r=i.blockTemplatesByBlockType,c=i.dataIntegrationType,l=i.languages,u=i.onlyCustomTemplate,d=i.showBrowseTemplates,f={};null!==o&&void 0!==o&&o.v2||(f=Object.fromEntries(a.Ut.map((function(n){return[n,g(n,e,t)]}))));var p={label:function(){return"Custom template"},onClick:function(){return d({addNewBlock:e,blockType:n,language:a.t6.SQL})},uuid:"".concat(n,"/custom_template")};if(u)return[p];if(t===s.qL.PYSPARK||t===s.qL.STREAMING)return f[n];if(c&&null!==o&&void 0!==o&&o.v2){var h,v,j=(null===r||void 0===r||null===(h=r[n])||void 0===h||null===(v=h[c])||void 0===v?void 0:v.items)||[];return[{items:(0,m.YC)(j,(function(e){return(0,e.label)()})),uuid:"".concat(n,"/").concat(c)}]}var C,k,O=(null===r||void 0===r||null===(C=r[n])||void 0===C||null===(k=C[a.t6.PYTHON])||void 0===k?void 0:k.items)||[],Z=[{items:(0,m.YC)((f[n]||[]).concat(O),(function(e){return(0,e.label)()})),label:function(){return"Python"},uuid:"".concat(n,"/").concat(a.t6.PYTHON)}];return(!l||null!==l&&void 0!==l&&l.includes(a.t6.SQL))&&Z.push(b(e,n)),(!l||null!==l&&void 0!==l&&l.includes(a.t6.R))&&Z.push(x(e,n)),![a.tf.MARKDOWN,a.tf.SCRATCHPAD].includes(n)&&d&&Z.push(p),Z};function O(e,n,t){return e.map((function(e){return{indent:!0,label:function(){return l.NX[n][e]},onClick:function(){t({config:{action_type:e,axis:n},language:a.t6.PYTHON,type:a.tf.TRANSFORMER})},uuid:"".concat(n,"_").concat(e)}})).sort((function(e,n){return e.label().localeCompare(n.label())}))}function Z(e,n,t){var i=[];return e.forEach((function(e){if(e!==l._G.MISC)i.push({indent:!0,items:O(l.d9[n][e],n,t),label:function(){return e},uuid:"".concat(n,"_grouping_").concat((0,f.RA)(e))});else{var r=O(l.d9[n][e],n,t);i.push.apply(i,(0,o.Z)(r))}})),i}var y=function(e,n,t){return Object.values(a.Lq).map((function(o){return{label:function(){return(0,h.jsxs)(r.ZP,{alignItems:"center",children:[(0,h.jsx)(u.mm,{fill:(0,p.qn)(a.tf.CUSTOM,{blockColor:o}).accent,size:16}),"\xa0",(0,h.jsx)(c.ZP,{children:(0,f.kC)(o)})]})},leftAligned:!0,onClick:function(){e({color:o,language:t,type:n})},uuid:"".concat(t,"_").concat(o)}}))},_=function(e){return"-- Docs: https://docs.mage.ai/guides/sql-blocks\n"+(e||"")};function T(e,n){var t=n;return a.tf.SCRATCHPAD===e.type&&(t='"""\nNOTE: Scratchpad blocks are used only for experimentation and testing out code.\nThe code written here will not be executed as part of the pipeline.\n"""\n'+(n||"")),t}},74052:function(e,n,t){t.d(n,{Dp:function(){return p},OF:function(){return m},Q9:function(){return v},Rt:function(){return d},h8:function(){return h},k1:function(){return s},uS:function(){return g}});var o=t(21831),i=t(82394),r=t(53808),c=t(86735),l=t(81728);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e){var n={},t={};return null===e||void 0===e||e.forEach((function(e){var o=e.content,i=e.outputs,r=e.type,c=e.uuid;(null===i||void 0===i?void 0:i.length)>=1&&(n[c]=i.map((function(e){var n=e||{},t=n.sample_data,o=n.shape,i=n.text_data,r=n.type;return t?{data:a({shape:o},t),type:r}:i&&(0,l.Pb)(i)?JSON.parse(i):i}))),t[r]||(t[r]={}),t[r][c]=o})),{content:t,messages:n}}function s(e,n,t){e.forEach((function(e){(0,r.t8)("".concat(t,"/").concat(e.uuid,"/codeCollapsed"),(0,r.Od)("".concat(n,"/").concat(e.uuid,"/codeCollapsed"))),(0,r.t8)("".concat(t,"/").concat(e.uuid,"/outputCollapsed"),(0,r.Od)("".concat(n,"/").concat(e.uuid,"/outputCollapsed")))}))}function f(e){return"".concat(e,"/").concat(r.kP)}function p(e){return(0,r.U2)(f(e),[])}function m(e,n){var t=p(e);t.includes(n)||(0,r.t8)(f(e),[].concat((0,o.Z)(t),[n]))}function h(e,n){var t=p(e).filter((function(e){return e!==n}));(0,r.t8)(f(e),t)}function v(e,n){var t=(0,c.HK)(n,(function(e){return e.uuid}));return e.map((function(e){return t[e]})).filter((function(e){return!!e}))}var g=function(e,n){var t=window.URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=n,document.body.appendChild(o),o.click(),o.remove()}},26084:function(e,n,t){var o;t.d(n,{Q:function(){return o}}),function(e){e.CALLBACK="callbacks",e.CONDITIONAL="conditionals"}(o||(o={}))},2548:function(e,n,t){var o;t.d(n,{L:function(){return o}}),function(e){e.BLOCK_FILE="block_file",e.CUSTOM_BLOCK_TEMPLATE="custom_block_template",e.GENERATE_BLOCK="generate_block",e.MAGE_TEMPLATE="mage_template"}(o||(o={}))},13803:function(e,n,t){var o,i;t.d(n,{I:function(){return i},O:function(){return o}}),function(e){e.DESTINATIONS="destinations",e.SOURCES="sources"}(o||(o={})),function(e){e.DATA_INTEGRATION="data_integration"}(i||(i={}))},44898:function(e,n,t){t.d(n,{R:function(){return i},Z:function(){return o}});var o="blocks",i="pipelines"},84438:function(e,n,t){t.d(n,{MV:function(){return u},cp:function(){return a},zJ:function(){return r}});var o,i,r,c=t(82394),l=t(44425);!function(e){e.AMAZON_SQS="amazon_sqs",e.API="api",e.AZURE_BLOB_STORAGE="azure_blob_storage",e.AZURE_DATA_LAKE="azure_data_lake",e.AZURE_EVENT_HUB="azure_event_hub",e.BIGQUERY="bigquery",e.DRUID="druid",e.DUMMY="dummy",e.FILE="file",e.GENERIC="generic",e.GOOGLE_CLOUD_PUBSUB="google_cloud_pubsub",e.GOOGLE_CLOUD_STORAGE="google_cloud_storage",e.INFLUXDB="influxdb",e.KAFKA="kafka",e.KINESIS="kinesis",e.MONGODB="mongodb",e.MYSQL="mysql",e.OPENSEARCH="opensearch",e.ORACLEDB="oracledb",e.POSTGRES="postgres",e.RABBITMQ="rabbitmq",e.REDSHIFT="redshift",e.S3="s3",e.SNOWFLAKE="snowflake",e.ELASTICSEARCH="elasticsearch"}(r||(r={}));var u=(o={},(0,c.Z)(o,r.AMAZON_SQS,"Amazon SQS"),(0,c.Z)(o,r.API,"API"),(0,c.Z)(o,r.AZURE_BLOB_STORAGE,"Azure Blob Storage"),(0,c.Z)(o,r.AZURE_DATA_LAKE,"Azure Data Lake"),(0,c.Z)(o,r.AZURE_EVENT_HUB,"Azure Event Hub"),(0,c.Z)(o,r.BIGQUERY,"Google BigQuery"),(0,c.Z)(o,r.DRUID,"Druid"),(0,c.Z)(o,r.DUMMY,"Dummy"),(0,c.Z)(o,r.FILE,"Local file"),(0,c.Z)(o,r.GENERIC,"Generic (no template)"),(0,c.Z)(o,r.GOOGLE_CLOUD_PUBSUB,"Google Cloud PubSub"),(0,c.Z)(o,r.GOOGLE_CLOUD_STORAGE,"Google Cloud Storage"),(0,c.Z)(o,r.INFLUXDB,"InfluxDB"),(0,c.Z)(o,r.KAFKA,"Kafka"),(0,c.Z)(o,r.KINESIS,"Kinesis"),(0,c.Z)(o,r.MONGODB,"MongoDB"),(0,c.Z)(o,r.MYSQL,"MySQL"),(0,c.Z)(o,r.OPENSEARCH,"OpenSearch"),(0,c.Z)(o,r.ORACLEDB,"OracleDB"),(0,c.Z)(o,r.POSTGRES,"PostgreSQL"),(0,c.Z)(o,r.RABBITMQ,"RabbitMQ"),(0,c.Z)(o,r.REDSHIFT,"Amazon Redshift"),(0,c.Z)(o,r.S3,"Amazon S3"),(0,c.Z)(o,r.SNOWFLAKE,"Snowflake"),(0,c.Z)(o,r.ELASTICSEARCH,"ElasticSearch"),o),a=(i={},(0,c.Z)(i,l.tf.DATA_LOADER,[r.GENERIC,r.FILE,r.API,r.AZURE_BLOB_STORAGE,r.BIGQUERY,r.DRUID,r.GOOGLE_CLOUD_STORAGE,r.MYSQL,r.ORACLEDB,r.POSTGRES,r.REDSHIFT,r.S3,r.SNOWFLAKE]),(0,c.Z)(i,l.tf.DATA_EXPORTER,[r.GENERIC,r.FILE,r.S3,r.AZURE_BLOB_STORAGE,r.GOOGLE_CLOUD_STORAGE,r.REDSHIFT,r.BIGQUERY,r.SNOWFLAKE,r.MYSQL,r.POSTGRES]),(0,c.Z)(i,l.tf.TRANSFORMER,[r.REDSHIFT,r.BIGQUERY,r.SNOWFLAKE,r.POSTGRES]),(0,c.Z)(i,l.tf.SENSOR,[r.GENERIC,r.S3,r.REDSHIFT,r.BIGQUERY,r.SNOWFLAKE,r.MYSQL,r.POSTGRES]),i);n.ZP=r},15135:function(e,n,t){t.d(n,{JD:function(){return h},Lu:function(){return r},PF:function(){return f},dT:function(){return c},n6:function(){return a},nB:function(){return m},oy:function(){return p},xF:function(){return s}});var o,i,r,c,l=t(82394),u=t(44425);!function(e){e.CSV="csv",e.JSON="json",e.MD="md",e.PY="py",e.R="r",e.SQL="sql",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(r||(r={})),function(e){e.INIT_PY="__init__.py",e.METADATA_YAML="metadata.yaml",e.REQS_TXT="requirements.txt"}(c||(c={}));var a=[r.PY,r.SQL],d=[r.JSON,r.MD,r.PY,r.R,r.SQL,r.TXT,r.YAML,r.YML],s=new RegExp(d.map((function(e){return".".concat(e,"$")})).join("|")),f=(new RegExp(d.map((function(e){return".".concat(e,"$")})).join("|")),"charts"),p="pipelines",m=(o={},(0,l.Z)(o,r.MD,u.t6.MARKDOWN),(0,l.Z)(o,r.JSON,r.JSON),(0,l.Z)(o,r.PY,u.t6.PYTHON),(0,l.Z)(o,r.R,u.t6.R),(0,l.Z)(o,r.SQL,u.t6.SQL),(0,l.Z)(o,r.TXT,"text"),(0,l.Z)(o,r.YAML,u.t6.YAML),(0,l.Z)(o,r.YML,u.t6.YAML),o),h=(i={},(0,l.Z)(i,u.t6.MARKDOWN,r.MD),(0,l.Z)(i,u.t6.PYTHON,r.PY),(0,l.Z)(i,u.t6.R,r.R),(0,l.Z)(i,u.t6.SQL,r.SQL),(0,l.Z)(i,u.t6.YAML,r.YAML),(0,l.Z)(i,"text",r.TXT),i)},7267:function(e,n,t){var o;t.d(n,{z:function(){return o}}),function(e){e.GENERATE_BLOCK_WITH_DESCRIPTION="generate_block_with_description",e.GENERATE_COMMENT_FOR_CODE="generate_comment_for_code",e.GENERATE_DOC_FOR_BLOCK="generate_doc_for_block",e.GENERATE_DOC_FOR_PIPELINE="generate_doc_for_pipeline",e.GENERATE_PIPELINE_WITH_DESCRIPTION="generate_pipeline_with_description"}(o||(o={}))},82359:function(e,n,t){var o,i;t.d(n,{d:function(){return o},k:function(){return i}}),function(e){e.ADD_NEW_BLOCK_V2="add_new_block_v2",e.LOCAL_TIMEZONE="display_local_timezone"}(o||(o={})),function(e){e.MAIN="main",e.STANDALONE="standalone",e.SUB="sub"}(i||(i={}))},5677:function(e,n,t){t.d(n,{NX:function(){return h},Wt:function(){return m},_G:function(){return u},c1:function(){return p},d9:function(){return f}});var o,i,r,c,l,u,a=t(82394),d=t(8454),s=(d.Q0.AVERAGE,d.Q0.CLEAN_COLUMN_NAME,d.Q0.COUNT,d.Q0.COUNT_DISTINCT,d.Q0.CUSTOM,d.Q0.DIFF,d.Q0.FIRST,d.Q0.FIX_SYNTAX_ERRORS,d.Q0.IMPUTE,d.Q0.LAST,d.Q0.MAX,d.Q0.MEDIAN,d.Q0.MIN,d.Q0.NORMALIZE,d.Q0.REFORMAT,d.Q0.REMOVE,d.Q0.REMOVE_OUTLIERS,d.Q0.SELECT,d.Q0.SHIFT_DOWN,d.Q0.SHIFT_UP,d.Q0.STANDARDIZE,d.Q0.SUM,[d.Q0.DROP_DUPLICATE,d.Q0.FILTER,d.Q0.SORT,d.Q0.REMOVE]);!function(e){e.AGGREGATE="Aggregate",e.FORMATTING="Formatting",e.COLUMN_REMOVAL="Column removal",e.SHIFT_ROWS="Shift rows in a column",e.MISC="Miscellaneous",e.FEATURE_SCALING="Feature Scaling"}(u||(u={}));var f=(i={},(0,a.Z)(i,d.qs.COLUMN,(o={},(0,a.Z)(o,u.AGGREGATE,[d.Q0.AVERAGE,d.Q0.COUNT,d.Q0.COUNT_DISTINCT,d.Q0.FIRST,d.Q0.LAST,d.Q0.MAX,d.Q0.MEDIAN,d.Q0.MIN,d.Q0.SUM]),(0,a.Z)(o,u.FORMATTING,[d.Q0.CLEAN_COLUMN_NAME,d.Q0.FIX_SYNTAX_ERRORS,d.Q0.REFORMAT]),(0,a.Z)(o,u.COLUMN_REMOVAL,[d.Q0.REMOVE,d.Q0.SELECT]),(0,a.Z)(o,u.SHIFT_ROWS,[d.Q0.SHIFT_DOWN,d.Q0.SHIFT_UP]),(0,a.Z)(o,u.MISC,[d.Q0.DIFF,d.Q0.IMPUTE,d.Q0.REMOVE_OUTLIERS]),(0,a.Z)(o,u.FEATURE_SCALING,[d.Q0.NORMALIZE,d.Q0.STANDARDIZE]),o)),(0,a.Z)(i,d.qs.ROW,(0,a.Z)({},u.MISC,[].concat(s))),i),p=Object.keys(f[d.qs.COLUMN]),m=[u.MISC],h=(l={},(0,a.Z)(l,d.qs.COLUMN,(r={},(0,a.Z)(r,d.Q0.ADD,"Add column"),(0,a.Z)(r,d.Q0.AVERAGE,"Aggregate by average value"),(0,a.Z)(r,d.Q0.CLEAN_COLUMN_NAME,"Clean column name"),(0,a.Z)(r,d.Q0.COUNT_DISTINCT,"Aggregate by distinct count"),(0,a.Z)(r,d.Q0.COUNT,"Aggregate by total count"),(0,a.Z)(r,d.Q0.DIFF,"Difference"),(0,a.Z)(r,d.Q0.FIRST,"Aggregate by first value"),(0,a.Z)(r,d.Q0.FIX_SYNTAX_ERRORS,"Fix syntax errors"),(0,a.Z)(r,d.Q0.IMPUTE,"Fill in missing values"),(0,a.Z)(r,d.Q0.NORMALIZE,"Normalize Data"),(0,a.Z)(r,d.Q0.STANDARDIZE,"Standardize Data"),(0,a.Z)(r,d.Q0.LAST,"Aggregate by last value"),(0,a.Z)(r,d.Q0.MAX,"Aggregate by maximum value"),(0,a.Z)(r,d.Q0.MEDIAN,"Aggregate by median value"),(0,a.Z)(r,d.Q0.MIN,"Aggregate by mininum value"),(0,a.Z)(r,d.Q0.REFORMAT,"Reformat"),(0,a.Z)(r,d.Q0.REMOVE_OUTLIERS,"Remove outliers"),(0,a.Z)(r,d.Q0.REMOVE,"Remove column(s)"),(0,a.Z)(r,d.Q0.SELECT,"Keep columns"),(0,a.Z)(r,d.Q0.SHIFT_DOWN,"Shift rows down in a column"),(0,a.Z)(r,d.Q0.SHIFT_UP,"Shift rows up in a column"),(0,a.Z)(r,d.Q0.SUM,"Aggregate by sum of values"),r)),(0,a.Z)(l,d.qs.ROW,(c={},(0,a.Z)(c,d.Q0.DROP_DUPLICATE,"Drop duplicates"),(0,a.Z)(c,d.Q0.FILTER,"Filter"),(0,a.Z)(c,d.Q0.SORT,"Sort"),(0,a.Z)(c,d.Q0.REMOVE,"Remove rows"),c)),l)},56747:function(e,n,t){t.d(n,{Z:function(){return b}});var o=t(62369),i=t(54596),r=t(85854),c=t(48670),l=t(30160),u=t(44897),a=t(38626),d=t(95363),s=t(70515),f=t(42631),p=t(61896),m=t(47041),h="0.75em",v=a.default.div.withConfig({displayName:"indexstyle__MarkdownContainer",componentId:"sc-j72mol-0"})(["font-family:",";margin:0 ","px;overflow:auto;"," "," p{margin:0.5em 0;}blockquote{margin:"," 0;padding:","px 0;","}blockquote:before{content:'';font-size:","px;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em;}blockquote p{display:inline;}pre{border-radius:","px;white-space:pre;margin:"," 0;padding:","px;overflow-x:auto;"," "," span{padding:0;}}ul,ol{margin-bottom:",";padding-left:","px;}li{","}li > input[type='checkbox']{pointer-events:none;}table{"," margin:",";thead{font-family:",";","}th,td{padding:","px ","px;","}}"],d.ry,s.iI,m.w5,(function(e){return"\n    color: ".concat((e.theme||u.Z).content.active,";\n  ")}),h,s.iI,(function(e){return"\n      border-left: ".concat(.5*s.iI,"px solid ").concat((e.theme||u.Z).content.active,";\n    ")}),3*s.l4,f.BG,h,s.iI,m.w5,(function(e){return"\n      background-color: ".concat((e.theme||u.Z).interactive.defaultBorder,";\n    ")}),h,3*s.iI,p.iD,p.iD,h,d.nF,(function(e){return"\n        border-bottom: ".concat(f.YF,"px solid ").concat((e.theme||u.Z).content.active,";\n      ")}),.5*s.iI,.75*s.iI,(function(e){return"\n        border: ".concat(f.YF,"px solid ").concat((e.theme||u.Z).content.muted,";\n      ")})),g=t(28598);var b=function(e){var n=e.children;return(0,g.jsx)(v,{children:(0,g.jsx)(o.D,{components:{a:function(e){var n=e.children,t=e.href;return(0,g.jsx)(c.Z,{href:t,inline:!0,openNewWindow:!0,primary:!0,children:n})},code:function(e){var n=e.children;return(0,g.jsx)(l.ZP,{backgroundColor:u.Z.interactive.defaultBorder,inline:!0,monospace:!0,pre:!0,style:{fontSize:"13px"},children:n})},em:function(e){var n=e.children;return(0,g.jsx)(l.ZP,{inline:!0,italic:!0,children:n})},h1:function(e){var n=e.children;return(0,g.jsx)(r.Z,{level:1,children:n})},h2:function(e){var n=e.children;return(0,g.jsx)(r.Z,{level:2,children:n})},h3:function(e){var n=e.children;return(0,g.jsx)(r.Z,{level:3,children:n})},h4:function(e){var n=e.children;return(0,g.jsx)(r.Z,{level:4,children:n})},h5:function(e){var n=e.children;return(0,g.jsx)(r.Z,{level:5,children:n})},p:function(e){var n=e.children;return(0,g.jsx)(l.ZP,{children:n})},strong:function(e){var n=e.children;return(0,g.jsx)(l.ZP,{bold:!0,inline:!0,children:n})}},remarkPlugins:[i.Z],children:n})})}},65956:function(e,n,t){var o=t(38626),i=t(55485),r=t(38276),c=t(30160),l=t(44897),u=t(42631),a=t(47041),d=t(70515),s=t(28598),f=(0,o.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*d.iI,1.5*d.iI,1.5*d.iI),p=o.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],u.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||l.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||l.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||l.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||l.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||l.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),m=o.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],u.n_,u.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||l.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||l.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),f,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),h=o.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*d.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*d.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),v=o.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],u.M8,u.YF,1.75*d.iI);n.Z=function(e){var n=e.borderless,t=e.children,o=e.containerRef,l=e.contentContainerRef,u=e.dark,a=e.footer,d=e.fullHeight,f=void 0===d||d,g=e.fullWidth,b=void 0===g||g,x=e.header,j=e.headerHeight,C=e.headerIcon,k=e.headerPaddingVertical,O=e.headerTitle,Z=e.maxHeight,y=e.maxWidth,_=e.minWidth,T=e.noPadding,P=e.overflowVisible,E=e.subtitle,S=e.success;return(0,s.jsxs)(p,{borderless:n,dark:u,fullHeight:f,fullWidth:b,maxHeight:Z,maxWidth:y,minWidth:_,overflowVisible:P,ref:o,success:S,children:[(x||O)&&(0,s.jsxs)(m,{headerPaddingVertical:k,height:j,children:[x&&x,O&&(0,s.jsx)(i.ZP,{alignItems:"center",justifyContent:"space-between",children:(0,s.jsxs)(i.ZP,{alignItems:"center",children:[C&&C,(0,s.jsx)(r.Z,{ml:C?1:0,children:(0,s.jsx)(c.ZP,{bold:!0,default:!0,children:O})})]})})]}),(0,s.jsxs)(h,{maxHeight:Z,noPadding:T,overflowVisible:P,ref:l,children:[E&&(0,s.jsx)(r.Z,{mb:2,children:(0,s.jsx)(c.ZP,{default:!0,children:E})}),t]}),a&&(0,s.jsx)(v,{children:a})]})}},35185:function(e,n,t){var o=t(82394),i=t(91835),r=(t(82684),t(38626)),c=t(44897),l=t(42631),u=t(70515),a=t(28598);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=r.default.div.withConfig({displayName:"ProgressBar__ProgressBarContainerStyle",componentId:"sc-10x9ojc-0"})(["border-radius:","px;height:","px;overflow:hidden;position:relative;width:100%;",""],l.BG,.75*u.iI,(function(e){return"\n    background-color: ".concat((e.theme.monotone||c.Z.monotone).grey200,";\n  ")})),p=r.default.div.withConfig({displayName:"ProgressBar__ProgressBarStyle",componentId:"sc-10x9ojc-1"})(["height:inherit;position:absolute;"," "," "," ",""],(function(e){return!e.danger&&"\n    background-color: ".concat((e.theme.progress||c.Z.progress).positive,";\n  ")}),(function(e){return e.progress&&"\n    width: ".concat(e.progress,"%;\n  ")}),(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.progress||c.Z.progress).negative,";\n  ")}),(function(e){return e.animateProgress&&"\n    animation: animate-progress ".concat(e.animateProgress.duration,"ms linear forwards;\n\n    @keyframes animate-progress {\n      0% {\n        width: ").concat(e.animateProgress.start,"%;\n      }\n\n      100% {\n        width: ").concat(e.animateProgress.end,"%;\n      }\n    }\n  ")}));n.Z=function(e){var n=(0,i.Z)({},e);return(0,a.jsx)(f,s(s({},n),{},{children:(0,a.jsx)(p,s({},n))}))}},90299:function(e,n,t){t.d(n,{Z:function(){return v}});var o=t(82684),i=t(71180),r=t(55485),c=t(64888),l=t(38276),u=t(30160),a=t(8059),d=t(38626),s=t(70515),f=t(47041),p=d.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],s.cd*s.iI,s.cd*s.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),f.w5),m=t(3314),h=t(28598);var v=function(e){var n=e.allowScroll,t=e.compact,d=e.contained,f=e.noPadding,v=e.onClickTab,g=e.regularSizeText,b=e.selectedTabUUID,x=e.small,j=e.tabs,C=(0,o.useMemo)((function(){var e=j.length,n=[];return j.forEach((function(o,d){var f=o.Icon,p=o.IconSelected,j=o.label,C=o.uuid,k=C===b,O=k&&p||f,Z=j?j():C,y=(0,h.jsxs)(r.ZP,{alignItems:"center",children:[O&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(O,{default:!k,size:2*s.iI}),(0,h.jsx)(l.Z,{mr:1})]}),(0,h.jsx)(u.ZP,{bold:!0,default:!k,noWrapping:!0,small:!g,children:Z})]});d>=1&&e>=2&&n.push((0,h.jsx)("div",{style:{marginLeft:1.5*s.iI}},"spacing-".concat(C))),k?n.push((0,h.jsx)(c.Z,{backgroundGradient:a.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:t||x,onClick:function(e){(0,m.j)(e),v(o)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:x,children:y},C)):n.push((0,h.jsx)("div",{style:{padding:2},children:(0,h.jsx)(i.Z,{borderLess:!0,compact:t||x,default:!0,onClick:function(e){(0,m.j)(e),v(o)},outline:!0,small:x,children:y})},"button-tab-".concat(C)))})),n}),[t,v,b,x,j]),k=(0,h.jsx)(r.ZP,{alignItems:"center",children:C});return d?k:(0,h.jsx)(p,{allowScroll:n,noPadding:f,children:k})}},13507:function(e,n,t){var o=t(28598);n.Z=function(e){var n=e.fill,t=void 0===n?"white":n,i=e.size;return(0,o.jsxs)("svg",{fill:"none",height:i,viewBox:"0 0 20 20",width:i,xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_11802_82850)",children:[(0,o.jsx)("path",{d:"M15.6276 1.73378C15.97 1.96689 16.022 2.44136 15.7638 2.76532C15.5057 3.08929 15.0355 3.13958 14.69 2.91102C13.3636 2.0334 11.8126 1.54269 10.2126 1.50266C8.36175 1.45636 6.54643 2.01561 5.04253 3.09541C3.53863 4.1752 2.4284 5.71649 1.8806 7.48498C1.40702 9.01387 1.37618 10.6403 1.7837 12.1777C1.88982 12.5781 1.69185 13.0076 1.30237 13.1486C0.912892 13.2896 0.479935 13.0887 0.368517 12.6897C-0.147093 10.8435 -0.122519 8.88224 0.447763 7.04116C1.09223 4.96057 2.39838 3.14729 4.16768 1.87695C5.93697 0.606601 8.07265 -0.0513415 10.2501 0.00312922C12.1769 0.0513296 14.0431 0.655033 15.6276 1.73378Z",fill:t}),(0,o.jsx)("path",{d:"M13.2714 5.89383C13.5295 5.56986 13.4781 5.09341 13.1245 4.87771C12.2306 4.33247 11.2055 4.02828 10.15 4.00188C8.84359 3.9692 7.56218 4.36396 6.50061 5.12617C5.43903 5.88838 4.65534 6.97634 4.26866 8.22469C3.95628 9.23316 3.91679 10.3017 4.14767 11.323C4.23901 11.727 4.67403 11.928 5.06351 11.787C5.45299 11.6461 5.64766 11.216 5.57323 10.8086C5.44361 10.0989 5.48588 9.36461 5.70149 8.66852C5.9915 7.73226 6.57927 6.91628 7.37545 6.34463C8.17164 5.77297 9.13269 5.4769 10.1125 5.50141C10.841 5.51963 11.5503 5.71432 12.1813 6.06401C12.5436 6.26478 13.0133 6.2178 13.2714 5.89383Z",fill:t}),(0,o.jsx)("path",{clipRule:"evenodd",d:"M10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5ZM9 10C9 10.5523 9.44772 11 10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10Z",fill:t,fillRule:"evenodd"}),(0,o.jsx)("path",{d:"M6.87554 15.1223C6.52192 14.9066 6.47052 14.4301 6.72863 14.1062C6.98673 13.7822 7.45642 13.7352 7.81872 13.936C8.44971 14.2857 9.15897 14.4804 9.88746 14.4986C10.8673 14.5231 11.8284 14.227 12.6245 13.6554C13.4207 13.0837 14.0085 12.2677 14.2985 11.3315C14.5141 10.6354 14.5564 9.90111 14.4268 9.19144C14.3523 8.78397 14.547 8.35395 14.9365 8.21295C15.326 8.07196 15.761 8.27297 15.8523 8.67699C16.0832 9.69826 16.0437 10.7668 15.7313 11.7753C15.3447 13.0237 14.561 14.1116 13.4994 14.8738C12.4378 15.636 11.1564 16.0308 9.84995 15.9981C8.79455 15.9717 7.76942 15.6675 6.87554 15.1223Z",fill:t}),(0,o.jsx)("path",{d:"M4.23615 17.2347C3.97805 17.5586 4.03001 18.0331 4.37241 18.2662C5.95691 19.345 7.82314 19.9487 9.74992 19.9969C11.9274 20.0513 14.063 19.3934 15.8323 18.1231C17.6016 16.8527 18.9078 15.0394 19.5522 12.9588C20.1225 11.1178 20.1471 9.15647 19.6315 7.31026C19.5201 6.91131 19.0871 6.7104 18.6976 6.85139C18.3082 6.99238 18.1102 7.42188 18.2163 7.82227C18.6238 9.35971 18.593 10.9861 18.1194 12.515C17.5716 14.2835 16.4614 15.8248 14.9575 16.9046C13.4536 17.9844 11.6382 18.5436 9.78743 18.4973C8.18738 18.4573 6.63645 17.9666 5.30996 17.089C4.96451 16.8604 4.49426 16.9107 4.23615 17.2347Z",fill:t})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_11802_82850",children:(0,o.jsx)("rect",{fill:t,height:"20",width:"20"})})})]})}},94777:function(e,n,t){var o=t(75582),i=t(82684),r=t(34376),c=t(71180),l=t(55485),u=t(65956),a=t(38276),d=t(30160),s=t(89538),f=t(28598);n.Z=function(e){var n=e.shouldWarn,t=e.warningMessage,p=(0,r.useRouter)(),m=(0,i.useState)(!1),h=m[0],v=m[1],g=(0,i.useState)({isModalOpen:!1,nextRoute:null}),b=g[0],x=g[1];(0,i.useEffect)((function(){var e=function(e){if(n)return e.preventDefault(),(e||window.event).returnValue="Are you sure you want to leave?"};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[n]),(0,i.useEffect)((function(){var e=function(e){if(n&&!h)throw x({isModalOpen:!0,nextRoute:e}),p.events.emit("routeChangeError"),"navigation aborted"};p.events.on("routeChangeStart",e);var t=function(){return p.events.off("routeChangeStart",e)};if(h){if(!b.nextRoute)return;return p.push(b.nextRoute),t}return t}),[b,h,p,n]);var j=(0,s.dd)((function(){return(0,f.jsxs)(u.Z,{children:[(0,f.jsx)(d.ZP,{children:t}),(0,f.jsx)(a.Z,{mt:2,children:(0,f.jsxs)(l.ZP,{alignItems:"center",children:[(0,f.jsx)(c.Z,{onClick:function(){return v(!0)},primary:!0,children:"Leave"}),(0,f.jsx)(a.Z,{mr:1}),(0,f.jsx)(c.Z,{onClick:function(){x({isModalOpen:!1,nextRoute:null})},secondary:!0,children:"Cancel"})]})})]})}),{},[t],{background:!0,hideCallback:function(){x({isModalOpen:!1,nextRoute:null})},uuid:"stale_pipeline_message"}),C=(0,o.Z)(j,2),k=C[0],O=C[1];(0,i.useEffect)((function(){b.isModalOpen?k():O()}),[O,b.isModalOpen,k]);return{ConfirmLeaveModal:function(){return(0,f.jsx)("div",{})}}}},53405:function(e,n,t){t.d(n,{Uc:function(){return d},cU:function(){return u},jO:function(){return a}});var o=t(82684),i=t(44425),r=t(57653),c=t(86735);function l(e,n){return function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeAllNodes:!1},i=(0,c.HK)(t,(function(e){return e.uuid})),r=(o||{}).includeAllNodes,l=[];function u(t){if(t){var o=(t[n]||[]).reduce((function(n,t){return e.uuid===t?n:n.concat(i[t])}),[]);(0===o.length||r&&e.uuid!==t.uuid)&&l.push(t),o.forEach((function(e){u(e)}))}}return u(e),l}(e,"upstream_blocks",n,{includeAllNodes:!0})}function u(e,n){return(0,o.useMemo)((function(){return e.map((function(t){var o=function(e,n){var t=l(e,n),o=t.filter((function(n){var t=n.configuration,o=n.uuid;return(null===t||void 0===t?void 0:t.dynamic)&&o!==(null===e||void 0===e?void 0:e.uuid)})),i=t.filter((function(n){var t=n.configuration,o=n.uuid;return(null===t||void 0===t?void 0:t.reduce_output)&&o!==(null===e||void 0===e?void 0:e.uuid)}));return{dynamicUpstreamBlock:o[0],dynamicUpstreamBlocks:o,reduceOutputUpstreamBlock:i[0],reduceOutputUpstreamBlocks:i}}(t,n),i=o.dynamicUpstreamBlock,r=o.dynamicUpstreamBlocks,c=o.reduceOutputUpstreamBlock,u=o.reduceOutputUpstreamBlocks,a=(t||{}).configuration||{},d=a.dynamic,s=a.reduce_output;return{block:t,blocksToUse:e,dynamic:!!d,dynamicUpstreamBlock:i,dynamicUpstreamBlocks:r,reduceOutput:!!s,reduceOutputUpstreamBlock:c,reduceOutputUpstreamBlocks:u}}))}),[n,null===n||void 0===n?void 0:n.map((function(e){var n=e.configuration;return null===n||void 0===n?void 0:n.dynamic})),null===n||void 0===n?void 0:n.map((function(e){var n=e.configuration;return null===n||void 0===n?void 0:n.reduce_output})),null===n||void 0===n?void 0:n.map((function(e){return e.upstream_blocks}))])}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e||{},o=t.configuration,c=t.language,l=t.type,u=o||{},a=u.data_integration,d=[i.tf.DATA_LOADER,i.tf.DATA_EXPORTER].includes(l);if(r.qL.PYTHON===(null===n||void 0===n?void 0:n.type)&&d){if(i.t6.YAML===c)return!0;if(i.t6.PYTHON===c&&a)return!0}return!1}function d(e){var n,t=null===e||void 0===e?void 0:e.catalog;return null===(n=(null===t||void 0===t?void 0:t.streams)||[])||void 0===n?void 0:n.filter((function(e){var n,t,o=e.metadata;return null===o||void 0===o||null===(n=o.find((function(e){var n=e.breadcrumb;return 0===(null===n||void 0===n?void 0:n.length)})))||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.selected}))}},65044:function(e,n,t){t.d(n,{Gr:function(){return i},Lz:function(){return o},Vc:function(){return c},gr:function(){return r}});var o=/\[__internal_output__\]/,i=/\[__internal_test__\]/,r="[__internal_output__]",c="[__internal_test__]"},58325:function(e,n,t){var o;t.d(n,{V5:function(){return r}}),function(e){e.ANDROID="Android",e.CHROME_OS="ChromeOS",e.IOS="iOS",e.LINUX="Linux",e.MAC="macOS",e.WINDOWS="Windows"}(o||(o={}));var i=o;function r(){return function(){var e,n,t,o,r,c,l,u=i.MAC,a=null===(e=window)||void 0===e||null===(n=e.navigator)||void 0===n?void 0:n.userAgent,d=(null===(t=window)||void 0===t||null===(o=t.navigator)||void 0===o||null===(r=o.userAgentData)||void 0===r?void 0:r.platform)||(null===(c=window)||void 0===c||null===(l=c.navigator)||void 0===l?void 0:l.platform);return d?["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].includes(d)?u=i.MAC:["Win32","Win64","Windows","WinCE"].includes(d)?u=i.WINDOWS:["iPhone","iPad","iPod"].includes(d)&&(u=i.IOS):a&&(a.includes("Macintosh")?u=i.MAC:a.includes("Windows")?u=i.WINDOWS:a.includes("Linux")&&a.includes("X11")?u=i.LINUX:/(iPhone|iPad)/.test(a)?u=i.IOS:a.includes("Android")&&a.includes("Mobi")?u=i.ANDROID:a.includes("CrOS")&&(u=i.CHROME_OS)),u}()===i.MAC}}}]);