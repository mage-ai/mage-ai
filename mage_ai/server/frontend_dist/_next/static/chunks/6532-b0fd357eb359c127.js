"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6532],{44162:function(n,e,t){t.d(e,{HC:function(){return E},Kf:function(){return s},Nk:function(){return f},PY:function(){return p},gE:function(){return h},jv:function(){return m},nz:function(){return v},oh:function(){return l},qn:function(){return a},t1:function(){return b},y9:function(){return k}});var o=t(9518),r=t(23831),i=t(86422),c=t(73942),u=t(49125),d=t(90880),l=68;function a(n,e){var t,o,c=((null===e||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.borders)||r.Z.borders).light,u=((null===e||void 0===e||null===(o=e.theme)||void 0===o?void 0:o.monotone)||r.Z.monotone).grey500,d=e||{},l=d.blockColor,a=d.isSelected,s=d.theme;return a?c=((null===s||void 0===s?void 0:s.content)||r.Z.content).active:i.tf.TRANSFORMER===n||l===i.Lq.PURPLE?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).purple,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).purpleLight):i.tf.DATA_EXPORTER===n||l===i.Lq.YELLOW?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).yellow,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).yellowLight):i.tf.DATA_LOADER===n||l===i.Lq.BLUE?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).blue,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).blueLight):i.tf.SENSOR===n||l===i.Lq.PINK?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).pink,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).pinkLight):i.tf.DBT===n?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).dbt,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).dbtLight):i.tf.EXTENSION===n||l===i.Lq.TEAL?(c=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).teal,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).tealLight):(i.tf.SCRATCHPAD===n||l===i.Lq.GREY||i.tf.CUSTOM===n&&!l)&&(c=((null===s||void 0===s?void 0:s.content)||r.Z.content).default,u=((null===s||void 0===s?void 0:s.accent)||r.Z.accent).contentDefaultTransparent),{accent:c,accentLight:u}}var s=(0,o.css)([""," "," "," "," "," "," ",""],(0,d.eR)(),(function(n){return!n.selected&&!n.hasError&&"\n    border-color: ".concat(a(n.blockType,n).accentLight,";\n  ")}),(function(n){return n.selected&&!n.hasError&&"\n    border-color: ".concat(a(n.blockType,n).accent,";\n  ")}),(function(n){return!n.selected&&n.hasError&&"\n    border-color: ".concat((n.theme.accent||r.Z.accent).negativeTransparent,";\n  ")}),(function(n){return n.selected&&n.hasError&&"\n    border-color: ".concat((n.theme.borders||r.Z.borders).danger,";\n  ")}),(function(n){return n.dynamicBlock&&"\n    border-style: dashed !important;\n  "}),(function(n){return n.dynamicChildBlock&&"\n    border-style: dotted !important;\n  "})),f=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-s5rj34-0"})(["border-radius:","px;position:relative;"],c.n_),p=o.default.div.withConfig({displayName:"indexstyle__HiddenBlockContainerStyle",componentId:"sc-s5rj34-1"})([""," border-radius:","px;border-style:",";border-width:","px;",""],s,c.n_,c.M8,c.mP,(function(n){return"\n    background-color: ".concat((n.theme||r.Z).background.content,";\n\n    &:hover {\n      border-color: ").concat(a(n.blockType,n).accent,";\n    }\n  ")})),v=o.default.div.withConfig({displayName:"indexstyle__BlockHeaderStyle",componentId:"sc-s5rj34-2"})([""," border-top-left-radius:","px;border-top-right-radius:","px;border-top-style:",";border-top-width:","px;border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding:","px;position:sticky;top:-5px;"," ",""],s,c.n_,c.n_,c.M8,c.mP,c.M8,c.mP,c.M8,c.mP,u.iI,(function(n){return"\n    background-color: ".concat((n.theme||r.Z).background.content,";\n  ")}),(function(n){return n.zIndex&&"\n    z-index: ".concat(6+(n.zIndex||0),";\n  ")})),m=o.default.div.withConfig({displayName:"indexstyle__CodeContainerStyle",componentId:"sc-s5rj34-3"})([""," border-left-style:",";border-left-width:","px;border-right-style:",";border-right-width:","px;padding-bottom:","px;padding-top:","px;position:relative;"," "," .line-numbers{opacity:0;}&.selected{.line-numbers{opacity:1 !important;}}"],s,c.M8,c.mP,c.M8,c.mP,u.iI,u.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||r.Z.background).codeTextarea,";\n  ")}),(function(n){return!n.hasOutput&&"\n    border-bottom-left-radius: ".concat(c.n_,"px;\n    border-bottom-right-radius: ").concat(c.n_,"px;\n    border-bottom-style: ").concat(c.M8,";\n    border-bottom-width: ").concat(c.mP,"px;\n  ")})),h=o.default.div.withConfig({displayName:"indexstyle__BlockDivider",componentId:"sc-s5rj34-4"})(["align-items:center;display:flex;height:","px;justify-content:center;position:relative;z-index:8;bottom:","px;&:hover{"," .block-divider-inner{","}}"],2*u.iI,.5*u.iI,(function(n){return n.additionalZIndex>0&&"\n      z-index: ".concat(8+n.additionalZIndex,";\n    ")}),(function(n){return"\n        background-color: ".concat((n.theme.text||r.Z.text).fileBrowser,";\n      ")})),b=o.default.div.withConfig({displayName:"indexstyle__BlockDividerInner",componentId:"sc-s5rj34-5"})(["height 1px;width:100%;position:absolute;z-index:-1;top:","px;"],1.5*u.iI),k=o.default.div.withConfig({displayName:"indexstyle__CodeHelperStyle",componentId:"sc-s5rj34-6"})(["margin-bottom:","px;padding-bottom:","px;",""],u.cd*u.iI,u.iI,(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||r.Z.borders).medium,";\n    padding-left: ").concat(n.normalPadding?u.iI:l,"px;\n  ")})),E=o.default.div.withConfig({displayName:"indexstyle__TimeTrackerStyle",componentId:"sc-s5rj34-7"})(["bottom:","px;left:","px;position:absolute;"],1*u.iI,l)},86532:function(n,e,t){t.d(e,{Z:function(){return J}});var o,r=t(21831),i=t(82394),c=t(75582),u=t(77837),d=t(38860),l=t.n(d),a=t(51774),s=t.n(a),f=t(9518),p=t(4804),v=t(82684),m=t(83455),h=t(86422),b=t(67971),k=t(16634),E=t(86673),g=t(54283),x=t(19711),y=t(23831),A=t(10503),T=t(49125),R=(T.iI,{height:10,width:10}),O=[h.tf.DATA_EXPORTER,h.tf.SENSOR],C=[h.Lq.GREY,h.Lq.PINK,h.Lq.TEAL,h.Lq.YELLOW];!function(n){n.NORTH="NORTH",n.SOUTH="SOUTH"}(o||(o={}));var D=t(73942),S=t(37391),Z=f.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div:only-child{","}",""],S.w5,(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),P=f.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border-radius:","px;border:1px solid transparent;min-width:fit-content;"," "," "," ",""],D.BG,(function(n){return n.selected&&"\n    border-color: ".concat((n.theme.content||y.Z.content).active,";\n  ")}),(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n  ")}),(function(n){return(n.isCancelled||n.disabled)&&"\n    // opacity doesn\u2019t work on Safari\n    border-color: ".concat((n.theme.content||y.Z.content).active,";\n    border-style: dashed;\n    cursor: not-allowed;\n  ")}),(function(n){return n.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "})),_=f.default.div.withConfig({displayName:"indexstyle__RuntimeStyle",componentId:"sc-bc2ei5-2"})(["margin-right:","px;padding:12px 4px;height:100%;width:50px;background:rgba(0,0,0,0.2);background-blend-mode:soft-light;"],2*T.iI),N=t(44162),L=t(90211),I=function(n){var e=n/1e3,t=4-Math.floor(e).toString().length,o=(0,L.QV)(e,t>=0?t:0),r="s";return o>1e3&&(o=(0,L.QV)(o/60,0),r="m"),"".concat(o).concat(r)},w=function(n,e){var t=n||{},r=t.id,i=t.side,c=null===e||void 0===e?void 0:e.id;return i===o.NORTH?null===r||void 0===r?void 0:r.endsWith("".concat(c,"-to")):i===o.SOUTH&&(null===r||void 0===r?void 0:r.startsWith(c))},j=t(28598);var B=function(n){var e=n.block,t=n.children,o=n.disabled,r=n.hasFailed,i=n.hideStatus,c=n.isCancelled,u=n.isInProgress,d=n.isQueued,l=n.isSuccessful,a=(n.onClick,n.runtime),s=n.selected,p=(0,v.useContext)(f.ThemeContext),m=e.color,h=e.type,R=e.uuid,D=!(u||d||r||l||c),S=l&&!(u||d),Z=r&&!(u||d),L="";return D?L="No status":S?L="Successful execution":Z?L="Failed execution":u?L="Currently executiing":c&&(L="Cancelled execution"),(0,j.jsx)(P,{backgroundColor:(0,N.qn)(h,{blockColor:m,theme:p}).accent,disabled:o,isCancelled:c,selected:s,children:(0,j.jsxs)(b.Z,{alignItems:"center",children:[a&&(0,j.jsx)(_,{backgroundColor:(0,N.qn)(h,{blockColor:m,theme:p}).accent,children:(0,j.jsx)(b.Z,{justifyContent:"center",children:(0,j.jsx)(x.ZP,{inverted:O.includes(h)||C.includes(m),xsmall:!0,children:I(a)})})}),!a&&(0,j.jsx)(E.Z,{ml:2}),!i&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(b.Z,{alignItems:"center",justifyContent:"center",style:{height:2*T.iI,width:2*T.iI},title:L,children:[u&&(0,j.jsx)(g.Z,{color:(p||y.Z).content.active,small:!0}),S&&(0,j.jsx)(A.Jr,{size:2*T.iI,success:!0}),Z&&(0,j.jsx)(A.x8,{danger:!0,size:1.5*T.iI}),D&&(0,j.jsx)(k.Z,{borderSize:1,size:1*T.iI})]}),(0,j.jsx)(E.Z,{ml:1})]}),(0,j.jsx)(b.Z,{alignItems:"center",justifyContent:"center",style:{padding:"8px 0",height:"100%"},children:(0,j.jsx)(x.ZP,{inverted:O.includes(h)||C.includes(m),monospace:!0,small:!0,children:t})})]})},R)},M=t(11135),U=t(98781),H=t(82531),F=t(66050),X=t(24224),q=t(25958),G=t(96510),Y=t(87323);function z(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function Q(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?z(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var V=s()((0,u.Z)(l().mark((function n(){var e;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Canvas);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),K=s()((0,u.Z)(l().mark((function n(){var e;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Node);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),W=s()((0,u.Z)(l().mark((function n(){var e;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Edge);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),$=(s()((0,u.Z)(l().mark((function n(){var e;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.MarkerArrow);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),s()((0,u.Z)(l().mark((function n(){var e;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Port);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}));var J=function(n){var e=n.blockRefs,t=n.blockStatus,i=n.disabled,u=n.editingBlock,d=n.enablePorts,l=void 0!==d&&d,a=n.fetchPipeline,s=n.height,k=n.heightOffset,g=void 0===k?10*T.iI:k,y=n.noStatus,A=n.onClickNode,O=n.pannable,C=void 0===O||O,D=n.pipeline,S=n.runningBlocks,P=void 0===S?[]:S,_=n.selectedBlock,L=n.setEditingBlock,I=n.setErrors,z=n.setSelectedBlock,J=n.showDynamicBlocks,nn=void 0!==J&&J,en=n.zoomable,tn=void 0===en||en,on=(0,v.useContext)(f.ThemeContext),rn=(0,v.useState)([]),cn=rn[0],un=rn[1],dn=(0,v.useState)(!1),ln=dn[0],an=dn[1],sn=(0,v.useState)(null),fn=sn[0],pn=sn[1],vn=l&&ln,mn=(null===u||void 0===u?void 0:u.upstreamBlocks)||{},hn=mn.block,bn=mn.values,kn=void 0===bn?[]:bn,En=(0,v.useMemo)((function(){return kn.length}),[kn]),gn=(0,v.useMemo)((function(){var n;return(null===D||void 0===D||null===(n=D.blocks)||void 0===n?void 0:n.filter((function(n){var e=n.type;return h.tf.SCRATCHPAD!==e})))||[]}),[null===D||void 0===D?void 0:D.blocks]),xn=(0,X.HK)((0,Y.cU)(gn,gn),(function(n){return n.block.uuid})),yn=(0,v.useMemo)((function(){return gn}),[gn,nn]),An=(0,v.useMemo)((function(){return(0,X.HK)(yn,(function(n){return n.uuid}))}),[yn]),Tn=(0,v.useMemo)((function(){return(0,X.HK)(P,(function(n){return n.uuid}))}),[P]),Rn=(0,m.Db)(H.ZP.blocks.pipelines.useUpdate(null===D||void 0===D?void 0:D.uuid,encodeURIComponent(null===hn||void 0===hn?void 0:hn.uuid)),{onSuccess:function(n){return(0,G.wD)(n,{callback:function(){L({upstreamBlocks:null}),null===a||void 0===a||a()},onErrorCallback:function(n,e){return null===I||void 0===I?void 0:I({errors:e,response:n})}})}}),On=(0,c.Z)(Rn,2),Cn=On[0],Dn=On[1].isLoading,Sn=(0,m.Db)((function(n){var e=n.fromBlock,t=n.toBlock,o=n.removeDependency;return H.ZP.blocks.pipelines.useUpdate(null===D||void 0===D?void 0:D.uuid,encodeURIComponent(t.uuid))({block:Q(Q({},t),{},{upstream_blocks:o?t.upstream_blocks.filter((function(n){return n!==e.uuid})):t.upstream_blocks.concat(e.uuid)})})}),{onSuccess:function(n){return(0,G.wD)(n,{callback:function(){null===a||void 0===a||a()},onErrorCallback:function(n,e){return null===I||void 0===I?void 0:I({errors:e,response:n})}})}}),Zn=(0,c.Z)(Sn,1)[0],Pn=(0,v.useCallback)((function(n){var t=n.type,o=n.uuid;if(null===z||void 0===z||z(n),un([]),null!==e&&void 0!==e&&e.current){var r,i=e.current["".concat(t,"s/").concat(o,".py")];null===i||void 0===i||null===(r=i.current)||void 0===r||r.scrollIntoView()}}),[e,z]),_n=(0,v.useCallback)((function(n){un([]),L((function(e){var t=e.upstreamBlocks.values||[],o=t.findIndex((function(e){var t=e.uuid;return n.uuid===t}));return Q(Q({},e),{},{upstreamBlocks:Q(Q({},e.upstreamBlocks),{},{values:o>=0?(0,X.oM)(t,o):t.concat(n)})})}))}),[L]),Nn=(0,v.useMemo)((function(){var n={};return yn.forEach((function(e){e.upstream_blocks.forEach((function(t){n[t]||(n[t]=[]),n[t].push(e)}))})),n}),[yn]),Ln=(0,v.useCallback)((function(n){var e;if(U.qL.INTEGRATION===(null===D||void 0===D?void 0:D.type)&&h.tf.TRANSFORMER!==n.type){var t,o={};if(h.t6.YAML===n.language&&(o=(0,p.Qc)(n.content)),h.tf.DATA_LOADER===n.type)e="".concat(n.uuid,": ").concat(null===(t=o)||void 0===t?void 0:t.source);else if(h.tf.DATA_EXPORTER===n.type){var r;e="".concat(n.uuid,": ").concat(null===(r=o)||void 0===r?void 0:r.destination)}}else h.tf.DBT===n.type&&h.t6.SQL===n.language&&(e=(0,q.$)(n,{fullPath:!0}));var i=(null===xn||void 0===xn?void 0:xn[n.uuid])||{},c=i.dynamic,u=i.dynamicUpstreamBlock,d=(i.reduceOutput,i.reduceOutputUpstreamBlock);return e||(e=n.uuid,c?e="[dynamic] ".concat(e):u&&!d&&(e="[dynamic child] ".concat(e))),e}),[xn,D]),In=(0,v.useMemo)((function(){var n=[],e=[];return yn.forEach((function(c){var u,d=Ln(c),l=c.type,a=c.upstream_blocks,s=void 0===a?[]:a,f=c.uuid,p=Nn[f],v=[];p?v.push.apply(v,(0,r.Z)(p.map((function(n){return Q(Q({},R),{},{id:"".concat(f,"-").concat(n.uuid,"-from"),side:o.SOUTH})})))):l!==h.tf.DATA_EXPORTER&&v.push(Q(Q({},R),{},{id:"".concat(f,"-from"),side:o.SOUTH})),0===s.length&&l!==h.tf.DATA_LOADER&&v.push(Q(Q({},R),{},{id:"".concat(f,"-to"),side:o.NORTH})),null===s||void 0===s||s.forEach((function(n){v.push(Q(Q({},R),{},{id:"".concat(n,"-").concat(f,"-to"),side:o.NORTH})),e.push({from:n,fromPort:"".concat(n,"-").concat(f,"-from"),id:"".concat(n,"-").concat(f),to:f,toPort:"".concat(n,"-").concat(f,"-to")})})),n.push({data:{block:c},height:37,id:f,ports:v,width:d.length*T.KF+(i?0:5*T.iI)+((null===hn||void 0===hn?void 0:hn.uuid)===c.uuid?19*T.KF:0)+(null!==t&&void 0!==t&&null!==(u=t[c.uuid])&&void 0!==u&&u.runtime?50:0)})})),{edges:e,nodes:n}}),[null===hn||void 0===hn?void 0:hn.uuid,t,yn,i,Ln,Nn]),wn=In.edges,jn=In.nodes,Bn=(0,v.useCallback)((function(n){if(y)return{};if(t){var e=t[n.uuid]||{},o=e.status,r=e.runtime;return{hasFailed:F.V.FAILED===o,isCancelled:F.V.CANCELLED===o,isInProgress:F.V.RUNNING===o,isQueued:F.V.INITIAL===o,isSuccessful:F.V.COMPLETED===o,runtime:r}}var i;return{hasFailed:h.DA.FAILED===n.status,isInProgress:Tn[n.uuid],isQueued:Tn[n.uuid]&&(null===(i=P[0])||void 0===i?void 0:i.uuid)!==n.uuid,isSuccessful:h.DA.EXECUTED===n.status}}),[t,y,P,Tn]),Mn=(0,v.useMemo)((function(){var n=0;return s&&(n+=s),g&&(n-=g),Math.max(0,n)}),[s,g]);return(0,j.jsxs)(j.Fragment,{children:[hn&&(0,j.jsxs)(E.Z,{my:3,px:T.cd,children:[(0,j.jsxs)(E.Z,{mb:T.cd,children:[(0,j.jsxs)(x.ZP,{children:["Select parent block(s) for ",(0,j.jsx)(x.ZP,{color:(0,N.qn)(hn.type,{blockColor:hn.color,theme:on}).accent,inline:!0,monospace:!0,children:hn.uuid}),":"]}),(0,j.jsx)(E.Z,{mt:1,children:kn.map((function(n,e){var t,o,r=n.uuid;return(0,j.jsxs)(x.ZP,{color:(0,N.qn)(null===(t=An[r])||void 0===t?void 0:t.type,{blockColor:null===(o=An[r])||void 0===o?void 0:o.type,theme:on}).accent,inline:!0,monospace:!0,children:[r,En>=2&&e<=En-2?(0,j.jsx)(x.ZP,{inline:!0,children:",\xa0"}):null]},r)}))})]}),(0,j.jsxs)(b.Z,{alignItems:"center",children:[(0,j.jsx)(M.ZP,{compact:!0,inline:!0,loading:Dn,onClick:function(){return Cn({block:Q(Q({},hn),{},{upstream_blocks:kn.map((function(n){return n.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,j.jsx)(E.Z,{ml:1}),(0,j.jsx)(M.ZP,{compact:!0,inline:!0,noBackground:!0,onClick:function(){un([]),L({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,j.jsx)(Z,{height:Mn,children:(0,j.jsx)(V,{arrow:null,disabled:i,edge:function(n){var e,t=An[n.source];return(0,j.jsx)(W,Q(Q({},n),{},{onClick:function(n,e){pn(null),un([e.id])},onRemove:function(n,e){var t=An[e.from],o=An[e.to];Zn({fromBlock:t,removeDependency:!0,toBlock:o}),un([])},removable:l&&!(null!==u&&void 0!==u&&u.upstreamBlocks),style:{stroke:null===(e=(0,N.qn)(null===t||void 0===t?void 0:t.type,{blockColor:null===t||void 0===t?void 0:t.color,theme:on}))||void 0===e?void 0:e.accent}}))},edges:wn,fit:!0,maxHeight:1e4,maxWidth:1e4,node:function(n){var e,t,o,r,c,d;return(0,j.jsx)(K,Q(Q({},n),{},{dragType:"port",linkable:!0,onClick:function(n,e){var t=e.data.block;pn(null),(null===hn||void 0===hn?void 0:hn.uuid)===t.uuid||(hn?_n(t):(null===A||void 0===A||A({block:t}),setTimeout((function(){Pn(t)}),1)))},onEnter:function(){null!==u&&void 0!==u&&u.upstreamBlocks||an(!0)},onLeave:function(){return an(!1)},port:vn&&(null===fn||w(fn,n))?(0,j.jsx)($,{onDrag:function(){return an(!0)},onDragEnd:function(){an(!1),pn(null)},onDragStart:function(n,e,t){pn({id:null===t||void 0===t?void 0:t.id,side:null===t||void 0===t?void 0:t.side})},onEnter:function(){return an(!0)},rx:10,ry:10,style:{fill:(0,N.qn)(null===n||void 0===n||null===(e=n.properties)||void 0===e||null===(t=e.data)||void 0===t||null===(o=t.block)||void 0===o?void 0:o.type,{blockColor:null===n||void 0===n||null===(r=n.properties)||void 0===r||null===(c=r.data)||void 0===c||null===(d=c.block)||void 0===d?void 0:d.color,theme:on}).accent,stroke:"white",strokeWidth:"1px"}}):null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(n){var e=n.node.data.block,t=Bn(e);return(0,j.jsx)("foreignObject",{height:n.height,style:{pointerEvents:"none"},width:n.width,x:0,y:0,children:(0,j.jsxs)(B,Q(Q({block:e,disabled:(null===hn||void 0===hn?void 0:hn.uuid)===e.uuid,hideStatus:i,selected:hn?!!(0,X.sE)(kn,(function(n){return n.uuid===e.uuid})):(null===_||void 0===_?void 0:_.uuid)===e.uuid},t),{},{children:[Ln(e),(null===hn||void 0===hn?void 0:hn.uuid)===e.uuid&&" (editing)"]}),e.uuid)})}}))},nodes:jn,onNodeLink:function(n,e,t,o){var r,i=An[e.id],c=An[t.id],u=(null===D||void 0===D?void 0:D.type)===U.qL.INTEGRATION&&((null===i||void 0===i?void 0:i.type)===h.tf.DATA_EXPORTER||(null===i||void 0===i?void 0:i.type)===h.tf.DATA_LOADER&&(null===c||void 0===c?void 0:c.type)===h.tf.DATA_EXPORTER);null!==i&&void 0!==i&&null!==(r=i.upstream_blocks)&&void 0!==r&&r.includes(c.uuid)||e.id===t.id||u||Zn({fromBlock:i,toBlock:c})},onNodeLinkCheck:function(n,e,t){return!wn.some((function(n){return n.from===e.id&&n.to===t.id}))},pannable:C,selections:cn,zoomable:tn})})]})}},66050:function(n,e,t){var o;t.d(e,{V:function(){return o}}),function(n){n.CANCELLED="cancelled",n.COMPLETED="completed",n.FAILED="failed",n.INITIAL="initial",n.RUNNING="running"}(o||(o={}))},86422:function(n,e,t){t.d(e,{$W:function(){return f},DA:function(){return s},HX:function(){return m},J8:function(){return v},Lq:function(){return l},Qj:function(){return h},Ut:function(){return g},V4:function(){return E},VZ:function(){return p},dO:function(){return a},f2:function(){return k},iZ:function(){return b},t6:function(){return c},tf:function(){return d}});var o,r,i,c,u=t(82394);!function(n){n.PYTHON="python",n.R="r",n.SQL="sql",n.YAML="yaml"}(c||(c={}));var d,l,a=(o={},(0,u.Z)(o,c.PYTHON,"PY"),(0,u.Z)(o,c.R,"R"),(0,u.Z)(o,c.SQL,"SQL"),(0,u.Z)(o,c.YAML,"YAML"),o);!function(n){n.CHART="chart",n.CUSTOM="custom",n.DATA_EXPORTER="data_exporter",n.DATA_LOADER="data_loader",n.DBT="dbt",n.EXTENSION="extension",n.SCRATCHPAD="scratchpad",n.SENSOR="sensor",n.TRANSFORMER="transformer"}(d||(d={})),function(n){n.BLUE="blue",n.GREY="grey",n.PINK="pink",n.PURPLE="purple",n.TEAL="teal",n.YELLOW="yellow"}(l||(l={}));var s,f=[d.CHART,d.CUSTOM,d.DATA_EXPORTER,d.DATA_LOADER,d.SCRATCHPAD,d.SENSOR,d.TRANSFORMER],p=[d.DATA_EXPORTER,d.DATA_LOADER],v=[d.DATA_EXPORTER,d.DATA_LOADER,d.TRANSFORMER],m=[d.DATA_EXPORTER,d.DATA_LOADER,d.DBT,d.TRANSFORMER],h=[d.CHART,d.SCRATCHPAD,d.SENSOR],b=[d.EXTENSION,d.SCRATCHPAD];!function(n){n.EXECUTED="executed",n.FAILED="failed",n.NOT_EXECUTED="not_executed",n.UPDATED="updated"}(s||(s={}));var k=[d.CUSTOM,d.DATA_EXPORTER,d.TRANSFORMER],E=(r={},(0,u.Z)(r,d.CUSTOM,"Custom"),(0,u.Z)(r,d.DATA_EXPORTER,"Data exporter"),(0,u.Z)(r,d.DATA_LOADER,"Data loader"),(0,u.Z)(r,d.EXTENSION,"Extension"),(0,u.Z)(r,d.SCRATCHPAD,"Scratchpad"),(0,u.Z)(r,d.SENSOR,"Sensor"),(0,u.Z)(r,d.TRANSFORMER,"Transformer"),r),g=[d.DATA_LOADER,d.TRANSFORMER,d.DATA_EXPORTER,d.SENSOR];i={},(0,u.Z)(i,d.DATA_EXPORTER,"DE"),(0,u.Z)(i,d.DATA_LOADER,"DL"),(0,u.Z)(i,d.SCRATCHPAD,"SP"),(0,u.Z)(i,d.SENSOR,"SR"),(0,u.Z)(i,d.TRANSFORMER,"TF")},87323:function(n,e,t){t.d(e,{cU:function(){return c}});var o=t(82684),r=t(24224);function i(n,e){return function(n,e,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeAllNodes:!1},i=(0,r.HK)(t,(function(n){return n.uuid})),c=(o||{}).includeAllNodes,u=[];function d(t){if(t){var o=(t[e]||[]).reduce((function(e,t){return n.uuid===t?e:e.concat(i[t])}),[]);(0===o.length||c&&n.uuid!==t.uuid)&&u.push(t),o.forEach((function(n){d(n)}))}}return d(n),u}(n,"upstream_blocks",e,{includeAllNodes:!0})}function c(n,e){return(0,o.useMemo)((function(){return n.map((function(n){var t=function(n,e){var t=i(n,e);return{dynamicUpstreamBlock:t.find((function(e){var t=e.configuration,o=e.uuid;return(null===t||void 0===t?void 0:t.dynamic)&&o!==(null===n||void 0===n?void 0:n.uuid)})),reduceOutputUpstreamBlock:t.find((function(e){var t=e.configuration,o=e.uuid;return(null===t||void 0===t?void 0:t.reduce_output)&&o!==(null===n||void 0===n?void 0:n.uuid)}))}}(n,e),o=t.dynamicUpstreamBlock,r=t.reduceOutputUpstreamBlock,c=(n||{}).configuration||{};return{block:n,dynamic:!!c.dynamic,dynamicUpstreamBlock:o,reduceOutput:!!c.reduce_output,reduceOutputUpstreamBlock:r}}))}),[e,null===e||void 0===e?void 0:e.map((function(n){var e=n.configuration;return null===e||void 0===e?void 0:e.dynamic})),null===e||void 0===e?void 0:e.map((function(n){var e=n.configuration;return null===e||void 0===e?void 0:e.reduce_output})),null===e||void 0===e?void 0:e.map((function(n){return n.upstream_blocks}))])}},25958:function(n,e,t){function o(n,e){var t,o=null===e||void 0===e?void 0:e.fullPath,r=null===n||void 0===n||null===(t=n.configuration)||void 0===t?void 0:t.file_path;if(o)return null===n||void 0===n?void 0:n.uuid;if(r){var i=r.split("/"),c=i[i.length-1].split(".");return c.pop(),c.join(".")}}t.d(e,{$:function(){return o}})}}]);