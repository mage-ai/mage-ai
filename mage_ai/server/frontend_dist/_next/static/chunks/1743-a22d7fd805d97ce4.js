"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1743],{48381:function(n,e,t){var i=t(82684),r=t(31882),u=t(55485),c=t(30160),l=t(86735),o=t(28598);e.Z=function(n){var e=n.onClickTag,t=n.tags,a=void 0===t?[]:t,s=(0,i.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)||0}),[a]),d=(0,i.useMemo)((function(){return(0,l.YC)(a||[],"uuid")}),[a]);return(0,o.jsx)(u.ZP,{alignItems:"center",flexWrap:"wrap",children:null===d||void 0===d?void 0:d.reduce((function(n,t){return n.push((0,o.jsx)("div",{style:{marginBottom:2,marginRight:s>=2?4:0,marginTop:2},children:(0,o.jsx)(r.Z,{onClick:e?function(){return e(t)}:null,small:!0,children:(0,o.jsx)(c.ZP,{children:t.uuid})})},"tag-".concat(t.uuid))),n}),[])})}},31743:function(n,e,t){var i=t(75582),r=t(12691),u=t.n(r),c=t(82684),l=t(83455),o=t(34376),a=t(71180),s=t(50724),d=t(55485),p=t(48670),f=t(30229),h=t(89515),g=t(38276),m=t(75499),v=t(48381),x=t(30160),_=t(69650),Z=t(12468),y=t(35686),j=t(72473),b=t(81655),k=t(72191),C=t(41143),D=t(70515),S=t(31608),P=t(3917),I=t(50178),E=t(72619),O=t(3314),T=t(28598),w=1.5*D.iI;e.Z=function(n){var e=n.disableActions,t=n.fetchPipelineSchedules,r=n.highlightRowOnHover,D=n.includeCreatedAtColumn,Y=n.includePipelineColumn,A=n.pipeline,M=n.pipelineSchedules,H=n.pipelineTriggersByName,N=n.selectedSchedule,F=n.setErrors,L=n.setSelectedSchedule,R=n.stickyHeader,z=null===A||void 0===A?void 0:A.uuid,V=(0,o.useRouter)(),B=(0,c.useRef)({}),K=(0,c.useState)(null),W=K[0],q=K[1],J=(0,c.useState)(0),U=J[0],X=J[1],$=(0,c.useState)(0),G=$[0],Q=$[1],nn=(0,l.Db)((function(n){return y.ZP.pipeline_schedules.useUpdate(n.id)({pipeline_schedule:n})}),{onSuccess:function(n){return(0,E.wD)(n,{callback:function(){null===t||void 0===t||t()},onErrorCallback:function(n,e){return F({errors:e,response:n})}})}}),en=(0,i.Z)(nn,1)[0],tn=(0,l.Db)((function(n){return y.ZP.pipeline_schedules.useDelete(n)()}),{onSuccess:function(n){return(0,E.wD)(n,{callback:function(){null===t||void 0===t||t(),z?V.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(z,"/triggers")):null===t||void 0===t||t()},onErrorCallback:function(n,e){return F({errors:e,response:n})}})}}),rn=(0,i.Z)(tn,1)[0],un=[],cn=[];return e||(un.push.apply(un,[null,null]),cn.push.apply(cn,[{uuid:"Active"},{uuid:"Type"}])),un.push.apply(un,[1,2]),cn.push.apply(cn,[{uuid:"Name"},{uuid:"Description"}]),e||(un.push.apply(un,[null]),cn.push({uuid:"Frequency"})),un.push.apply(un,[1,1,null]),cn.push.apply(cn,[{uuid:"Next run date"},{uuid:"Latest status"},{uuid:"Runs"}]),e||(un.push.apply(un,[1]),cn.push({uuid:"Tags"})),un.push.apply(un,[null]),cn.push({uuid:"Logs"}),e||(0,I.Ct)()||(un.push.apply(un,[null]),cn.push({label:function(){return""},uuid:"edit/delete"})),!e&&Y&&(cn.splice(2,0,{uuid:"Pipeline"}),un.splice(2,0,1)),!e&&D&&(cn.splice(5,0,{uuid:"Created at"}),un.splice(5,0,null)),(0,T.jsx)(S.cl,{overflowVisible:!0,children:0===M.length?(0,T.jsx)(g.Z,{px:3,py:1,children:(0,T.jsx)(x.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,T.jsx)(m.Z,{columnFlex:un,columns:cn,highlightRowOnHover:r,isSelectedRow:function(n){return M[n].id===(null===N||void 0===N?void 0:N.id)},onClickRow:L?function(n){return null===L||void 0===L?void 0:L(M[n])}:null,rowVerticalPadding:6,rows:M.map((function(n,t){var i=n.id,r=n.created_at,l=n.description,o=n.next_pipeline_run_date,m=n.pipeline_runs_count,y=n.pipeline_uuid,S=n.last_pipeline_run_status,E=n.name,A=n.schedule_interval,M=n.status,N=n.tags,F=f.fq.ACTIVE===M,L=z||y;B.current[i]=(0,c.createRef)();var R,K=null!==H&&void 0!==H&&H[E]?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(g.Z,{mr:1}),(0,T.jsx)(Z.Z,{block:!0,label:"This trigger is saved in code.",size:w,widthFitContent:!0,children:(0,T.jsx)(j.EK,{default:!0,size:w})})]}):null,J=[];e?J.push.apply(J,[(0,T.jsxs)(d.ZP,{alignItems:"center",children:[(0,T.jsx)(x.ZP,{bold:!0,children:E}),K]},"trigger_name_".concat(t))]):J.push.apply(J,[(0,T.jsx)(Z.Z,{block:!0,label:M,size:20,widthFitContent:!0,children:(0,T.jsx)(_.Z,{checked:F,compact:!0,onCheck:function(e){(0,O.j)(e),en({id:n.id,status:F?f.fq.INACTIVE:f.fq.ACTIVE})},purpleBackground:!0})},"trigger_enabled_".concat(t)),(0,T.jsx)(x.ZP,{default:!0,monospace:!0,children:null===(R=f.Z4[n.schedule_type])||void 0===R?void 0:R.call(f.Z4)},"trigger_type_".concat(t)),(0,T.jsxs)(d.ZP,{alignItems:"center",children:[(0,T.jsx)(u(),{as:"/pipelines/".concat(L,"/triggers/").concat(i),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,T.jsx)(p.Z,{bold:!0,onClick:function(n){(0,O.j)(n),V.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(L,"/triggers/").concat(i))},sky:!0,children:E})}),K]},"trigger_name_".concat(t))]);return J.push.apply(J,[(0,T.jsx)(x.ZP,{default:!0,children:l},"trigger_description_".concat(t))]),e||J.push((0,T.jsx)(x.ZP,{default:!0,monospace:!0,children:A},"trigger_frequency_".concat(t))),J.push.apply(J,[(0,T.jsx)(x.ZP,{monospace:!0,small:!0,children:o?(0,P.d$)(o,{includeSeconds:!0,utcFormat:!0}):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"trigger_next_run_date_".concat(t)),(0,T.jsx)(x.ZP,{danger:C.V.FAILED===S,default:!S,monospace:!0,success:C.V.COMPLETED===S,warning:C.V.CANCELLED===S,children:S||"N/A"},"latest_run_status_".concat(t)),(0,T.jsx)(x.ZP,{default:!0,monospace:!0,children:m},"trigger_run_count_".concat(t))]),e||J.push((0,T.jsx)("div",{children:(0,T.jsx)(v.Z,{tags:null===N||void 0===N?void 0:N.map((function(n){return{uuid:n}}))})},"pipeline_tags_".concat(t))),J.push((0,T.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return V.push("/pipelines/".concat(L,"/logs?pipeline_schedule_id[]=").concat(i))},children:(0,T.jsx)(j.UL,{default:!0,size:k.bL})},"logs_button_".concat(t))),e||(0,I.Ct)()||J.push((0,T.jsxs)(d.ZP,{children:[(0,T.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return V.push("/pipelines/".concat(L,"/triggers/").concat(i,"/edit"))},title:"Edit",children:(0,T.jsx)(j.I8,{default:!0,size:k.bL})}),(0,T.jsx)(g.Z,{mr:1}),(0,T.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var n,e,t,r;q(i),X((null===(n=B.current[i])||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0),Q((null===(t=B.current[i])||void 0===t||null===(r=t.current)||void 0===r?void 0:r.offsetLeft)||0)},ref:B.current[i],title:"Delete",children:(0,T.jsx)(j.rF,{default:!0,size:k.bL})}),(0,T.jsx)(s.Z,{onClickOutside:function(){return q(null)},open:W===i,children:(0,T.jsx)(h.Z,{danger:!0,left:(G||0)-b.nH,onCancel:function(){return q(null)},onClick:function(){q(null),rn(i)},title:"Are you sure you want to delete the trigger ".concat(E,"?"),top:(U||0)-(t<=1?b.oz:b.OK),width:b.Xx})})]},"edit_delete_buttons_".concat(t))),!e&&Y&&J.splice(2,0,(0,T.jsx)(x.ZP,{default:!0,monospace:!0,children:L},"pipeline_name_".concat(t))),!e&&D&&J.splice(5,0,(0,T.jsx)(x.ZP,{default:!0,monospace:!0,children:null===r||void 0===r?void 0:r.slice(0,19)},"created_at_".concat(t))),J})),stickyHeader:R,uuid:"pipeline-triggers"})})}},31882:function(n,e,t){var i=t(38626),r=t(71180),u=t(55485),c=t(38276),l=t(30160),o=t(44897),a=t(72473),s=t(70515),d=t(61896),p=t(28598),f=i.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," ",""],(function(n){return!n.primary&&"\n    background-color: ".concat((n.theme.background||o.Z.background).tag,";\n  ")}),(function(n){return n.primary&&"\n    background-color: ".concat((n.theme.chart||o.Z.chart).primary,";\n  ")}),(function(n){return!n.small&&"\n    border-radius: ".concat((s.iI+d.Al)/2,"px;\n    height: ").concat(1.5*s.iI+d.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(n){return n.small&&"\n    border-radius: ".concat((s.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(n){return n.border&&"\n    border: 1px solid ".concat((n.theme.content||o.Z.content).muted,";\n  ")}));e.Z=function(n){var e=n.border,t=n.children,i=n.disabled,o=n.label,d=n.onClick,h=n.primary,g=n.small;return(0,p.jsx)(f,{border:e,primary:h,small:g,children:(0,p.jsx)(r.Z,{basic:!0,disabled:i,noBackground:!0,noPadding:!0,onClick:d,transparent:!0,children:(0,p.jsxs)(u.ZP,{alignItems:"center",children:[t,o&&(0,p.jsx)(l.ZP,{small:g,children:o}),!i&&d&&(0,p.jsx)(c.Z,{ml:1,children:(0,p.jsx)(a.x8,{default:h,muted:!h,size:g?s.iI:1.25*s.iI})})]})})})}},3917:function(n,e,t){t.d(e,{A5:function(){return _},AY:function(){return Z},BP:function(){return x},JX:function(){return v},OC:function(){return d},Pc:function(){return y},Ro:function(){return j},Tz:function(){return m},Y_:function(){return k},d$:function(){return g},jV:function(){return b},lJ:function(){return C},n1:function(){return f},s8:function(){return a},vk:function(){return u},yD:function(){return s}});var i,r,u,c=t(82394),l=t(92083),o=t.n(l);!function(n){n.TODAY="today",n.WEEK="week",n.MONTH="month"}(u||(u={}));var a=(i={},(0,c.Z)(i,u.TODAY,"today"),(0,c.Z)(i,u.WEEK,"last 7 days"),(0,c.Z)(i,u.MONTH,"last 30 days"),i),s=(r={},(0,c.Z)(r,u.TODAY,0),(0,c.Z)(r,u.WEEK,6),(0,c.Z)(r,u.MONTH,29),r),d="YYYY-MM-DD HH:mm:ss",p="YYYY-MM-DD HH:mm",f="YYYY-MM-DD",h="MMMM D, YYYY";function g(n,e){var t=e||{},i=t.dayAgo,r=t.includeSeconds,u=t.utcFormat,c=o()(n),l=p;return u&&(c=c.utc()),i&&(c=c.subtract(1,"days")),r&&(l=d),c.format(l)}function m(n){var e=g((new Date).toISOString(),{includeSeconds:!0,utcFormat:!0});return null!==n&&void 0!==n&&n.dateObj?new Date(e):e}function v(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o().unix(n).format(null!==e&&void 0!==e&&e.withSeconds?d:p)}function x(n,e,t){return o()(n).utc().hours(+e).minutes(+t).format()}function _(n){return o()(n).unix()}function Z(n,e,t,i){var r="".concat(n.toISOString().split("T")[0]," ").concat(e,":").concat(t);return i?"".concat(r,":").concat(i):r}function y(n){var e=o().unix(+n).utc();return{date:e.toDate(),hour:String(e.hour()),minute:String(e.minute())}}function j(n,e){var t=o().utc(),i=o().utc();null!==e&&void 0!==e&&e.localTime&&(t=o()().local(),i=o()().local());var r=(t=t.subtract(n,"days")).format(h),u=i.format(h);return null!==e&&void 0!==e&&e.endDateOnly?u:"".concat(r," - ").concat(u)}function b(n,e){var t=null!==e&&void 0!==e&&e.localTime?o()().local():o().utc();if(n===u.WEEK){var i=s[u.WEEK];t=t.subtract(i,"days")}else if(n===u.MONTH){var r=s[u.MONTH];t=t.subtract(r,"days")}return null!==e&&void 0!==e&&e.isoString?t.startOf("day").toISOString():t.startOf("day").format(d)}function k(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90,e=new Date,t=[],i=0;i<n;i++)t.unshift(e.toISOString().split("T")[0]),e.setDate(e.getDate()-1);return t}function C(n){return n.padStart(2,"0")}}}]);