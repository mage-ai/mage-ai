(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7994],{88865:function(e){var t;t=()=>{return e={770:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultDebugCall=t.createOnigScanner=t.createOnigString=t.loadWASM=t.OnigScanner=t.OnigString=void 0;const i=r(n(418));let s=null,o=!1;class a{static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){const i=e.charCodeAt(n);let s=i,o=!1;if(i>=55296&&i<=56319&&n+1<r){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(s=65536+(i-55296<<10)|t-56320,o=!0)}t+=s<=127?1:s<=2047?2:s<=65535?3:4,o&&n++}return t}constructor(e){const t=e.length,n=a._utf8ByteLength(e),r=n!==t,i=r?new Uint32Array(t+1):null;r&&(i[t]=n);const s=r?new Uint32Array(n+1):null;r&&(s[n]=t);const o=new Uint8Array(n);let c=0;for(let n=0;n<t;n++){const a=e.charCodeAt(n);let l=a,u=!1;if(a>=55296&&a<=56319&&n+1<t){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(l=65536+(a-55296<<10)|t-56320,u=!0)}r&&(i[n]=c,u&&(i[n+1]=c),l<=127?s[c+0]=n:l<=2047?(s[c+0]=n,s[c+1]=n):l<=65535?(s[c+0]=n,s[c+1]=n,s[c+2]=n):(s[c+0]=n,s[c+1]=n,s[c+2]=n,s[c+3]=n)),l<=127?o[c++]=l:l<=2047?(o[c++]=192|(1984&l)>>>6,o[c++]=128|(63&l)>>>0):l<=65535?(o[c++]=224|(61440&l)>>>12,o[c++]=128|(4032&l)>>>6,o[c++]=128|(63&l)>>>0):(o[c++]=240|(1835008&l)>>>18,o[c++]=128|(258048&l)>>>12,o[c++]=128|(4032&l)>>>6,o[c++]=128|(63&l)>>>0),u&&n++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=o,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=s}createString(e){const t=e._omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}class c{constructor(e){if(this.id=++c.LAST_ID,!s)throw new Error("Must invoke loadWASM first.");this._onigBinding=s,this.content=e;const t=new a(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!c._sharedPtrInUse?(c._sharedPtr||(c._sharedPtr=s._omalloc(1e4)),c._sharedPtrInUse=!0,s.HEAPU8.set(t.utf8Value,c._sharedPtr),this.ptr=c._sharedPtr):this.ptr=t.createString(s)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===c._sharedPtr?c._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}t.OnigString=c,c.LAST_ID=0,c._sharedPtr=0,c._sharedPtrInUse=!1;class l{constructor(e){if(!s)throw new Error("Must invoke loadWASM first.");const t=[],n=[];for(let r=0,i=e.length;r<i;r++){const i=new a(e[r]);t[r]=i.createString(s),n[r]=i.utf8Length}const r=s._omalloc(4*e.length);s.HEAPU32.set(t,r/4);const i=s._omalloc(4*e.length);s.HEAPU32.set(n,i/4);const o=s._createOnigScanner(r,i,e.length);for(let n=0,r=e.length;n<r;n++)s._ofree(t[n]);s._ofree(i),s._ofree(r),0===o&&function(e){throw new Error(e.UTF8ToString(e._getLastOnigError()))}(s),this._onigBinding=s,this._ptr=o}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=o,i=0;if("number"==typeof n?(8&n&&(r=!0),i=n):"boolean"==typeof n&&(r=n),"string"==typeof e){e=new c(e);const n=this._findNextMatchSync(e,t,r,i);return e.dispose(),n}return this._findNextMatchSync(e,t,r,i)}_findNextMatchSync(e,t,n,r){const i=this._onigBinding;let s;if(s=n?i._findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r):i._findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r),0===s)return null;const o=i.HEAPU32;let a=s/4;const c=o[a++],l=o[a++];let u=[];for(let t=0;t<l;t++){const n=e.convertUtf8OffsetToUtf16(o[a++]),r=e.convertUtf8OffsetToUtf16(o[a++]);u[t]={start:n,end:r,length:r-n}}return{index:c,captureIndices:u}}}t.OnigScanner=l;let u=!1,h=null;t.loadWASM=function(e){if(u)return h;let t,n,r,o;if(u=!0,function(e){return"function"==typeof e.instantiator}(e))t=e.instantiator,n=e.print;else{let r;!function(e){return void 0!==e.data}(e)?r=e:(r=e.data,n=e.print),t=function(e){return"undefined"!=typeof Response&&e instanceof Response}(r)?"function"==typeof WebAssembly.instantiateStreaming?function(e){return t=>WebAssembly.instantiateStreaming(e,t)}(r):function(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}(r):function(e){return t=>WebAssembly.instantiate(e,t)}(r)}return h=new Promise(((e,t)=>{r=e,o=t})),function(e,t,n,r){(0,i.default)({print:t,instantiateWasm:(t,n)=>{if("undefined"==typeof performance){const e=()=>Date.now();t.env.emscripten_get_now=e,t.wasi_snapshot_preview1.emscripten_get_now=e}return e(t).then((e=>n(e.instance)),r),{}}}).then((e=>{s=e,n()}))}(t,n,r,o),h},t.createOnigString=function(e){return new c(e)},t.createOnigScanner=function(e){return new l(e)},t.setDefaultDebugCall=function(e){o=e}},418:e=>{var t=("undefined"!=typeof document&&document.currentScript&&document.currentScript.src,function(e){var t,n,r=void 0!==(e=e||{})?e:{};r.ready=new Promise((function(e,r){t=e,n=r}));var i,s=Object.assign({},r),o=[],a=!1,c=!1;i=function(e){let t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),function(e,t){e||A(t)}("object"==typeof t),t)},"undefined"!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),"undefined"!=typeof onig_print&&("undefined"==typeof console&&(console={}),console.log=onig_print,console.warn=console.error="undefined"!=typeof printErr?printErr:onig_print);var l,u,h=r.print||console.log.bind(console),d=r.printErr||console.warn.bind(console);Object.assign(r,s),s=null,r.arguments&&(o=r.arguments),r.thisProgram&&r.thisProgram,r.quit&&r.quit,r.wasmBinary&&(l=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&A("no native wasm support detected");var g,p,f,m=!1,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function y(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&_)return _.decode(e.subarray(t,i));for(var s="";t<i;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var c=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|c:(7&o)<<18|a<<12|c<<6|63&e[t++])<65536)s+=String.fromCharCode(o);else{var l=o-65536;s+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function k(e){g=e,r.HEAP8=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=new Int32Array(e),r.HEAPU8=p=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=f=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}r.INITIAL_MEMORY;var S=[],b=[],v=[];function w(e){S.unshift(e)}function T(e){v.unshift(e)}var C=0,R=null,I=null;function A(e){r.onAbort&&r.onAbort(e),d(e="Aborted("+e+")"),m=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}var L,P,x="data:application/octet-stream;base64,";function N(e){return e.startsWith(x)}function M(e){try{if(e==L&&l)return new Uint8Array(l);if(i)return i(e);throw"both async and sync fetching of the wasm failed"}catch(e){A(e)}}function E(e){for(;e.length>0;)e.shift()(r)}function O(e){try{return u.grow(e-g.byteLength+65535>>>16),k(u.buffer),1}catch(e){}}N(L="onig.wasm")||(L=function(e){return r.locateFile?r.locateFile(e,""):""+e}(L)),P="undefined"!=typeof dateNow?dateNow:()=>performance.now();var D=[null,[],[]];function G(e,t){var n=D[e];0===t||10===t?((1===e?h:d)(y(n,0)),n.length=0):n.push(t)}var $,j={emscripten_get_now:P,emscripten_memcpy_big:function(e,t,n){p.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t,n=p.length,r=2147483648;if((e>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var s=n*(1+.2/i);if(s=Math.min(s,e+100663296),O(Math.min(r,(t=Math.max(e,s))+(65536-t%65536)%65536)))return!0}return!1},fd_write:function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=f[t>>2],a=f[t+4>>2];t+=8;for(var c=0;c<a;c++)G(e,p[o+c]);i+=a}return f[r>>2]=i,0}};function F(e){function n(){$||($=!0,r.calledRun=!0,m||(E(b),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)T(r.postRun.shift());E(v)}()))}e=e||o,C>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)w(r.preRun.shift());E(S)}(),C>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),n()}),1)):n()))}if(function(){var e={env:j,wasi_snapshot_preview1:j};function t(e,t){var n=e.exports;r.asm=n,k((u=r.asm.memory).buffer),r.asm.__indirect_function_table,function(e){b.unshift(e)}(r.asm.__wasm_call_ctors),function(e){if(C--,r.monitorRunDependencies&&r.monitorRunDependencies(C),0==C&&(null!==R&&(clearInterval(R),R=null),I)){var t=I;I=null,t()}}()}function i(e){t(e.instance)}function s(t){return(l||!a&&!c||"function"!=typeof fetch?Promise.resolve().then((function(){return M(L)})):fetch(L,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+L+"'";return e.arrayBuffer()})).catch((function(){return M(L)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){d("failed to asynchronously prepare wasm: "+e),A(e)}))}if(C++,r.monitorRunDependencies&&r.monitorRunDependencies(C),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){d("Module.instantiateWasm callback failed with error: "+e),n(e)}(l||"function"!=typeof WebAssembly.instantiateStreaming||N(L)||"function"!=typeof fetch?s(i):fetch(L,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(i,(function(e){return d("wasm streaming compile failed: "+e),d("falling back to ArrayBuffer instantiation"),s(i)}))}))).catch(n)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._omalloc=function(){return(r._omalloc=r.asm.omalloc).apply(null,arguments)},r._ofree=function(){return(r._ofree=r.asm.ofree).apply(null,arguments)},r._getLastOnigError=function(){return(r._getLastOnigError=r.asm.getLastOnigError).apply(null,arguments)},r._createOnigScanner=function(){return(r._createOnigScanner=r.asm.createOnigScanner).apply(null,arguments)},r._freeOnigScanner=function(){return(r._freeOnigScanner=r.asm.freeOnigScanner).apply(null,arguments)},r._findNextOnigScannerMatch=function(){return(r._findNextOnigScannerMatch=r.asm.findNextOnigScannerMatch).apply(null,arguments)},r._findNextOnigScannerMatchDbg=function(){return(r._findNextOnigScannerMatchDbg=r.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},r.stackSave=function(){return(r.stackSave=r.asm.stackSave).apply(null,arguments)},r.stackRestore=function(){return(r.stackRestore=r.asm.stackRestore).apply(null,arguments)},r.stackAlloc=function(){return(r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.dynCall_jiji).apply(null,arguments)},r.UTF8ToString=function(e,t){return e?y(p,e,t):""},I=function e(){$||F(),$||(I=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return F(),e.ready});e.exports=t}},t={},function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}(770);var e,t},e.exports=t()},7301:function(e,t,n){var r=n(554);e.exports=(()=>{"use strict";var e={350:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UseOnigurumaFindOptions=t.DebugFlags=void 0,t.DebugFlags={InDebugMode:void 0!==r&&!!r.env.VSCODE_TEXTMATE_DEBUG},t.UseOnigurumaFindOptions=!1},442:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyStateStackDiff=t.diffStateStacksRefEq=void 0;const r=n(391);t.diffStateStacksRefEq=function(e,t){let n=0;const r=[];let i=e,s=t;for(;i!==s;)i&&(!s||i.depth>=s.depth)?(n++,i=i.parent):(r.push(s.toStateStackFrame()),s=s.parent);return{pops:n,newFrames:r.reverse()}},t.applyStateStackDiff=function(e,t){let n=e;for(let e=0;e<t.pops;e++)n=n.parent;for(const e of t.newFrames)n=r.StateStackImpl.pushFrame(n,e);return n}},36:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.toOptionalTokenType=t.EncodedTokenAttributes=void 0,(n=t.EncodedTokenAttributes||(t.EncodedTokenAttributes={})).toBinaryStr=function(e){let t=e.toString(2);for(;t.length<32;)t="0"+t;return t},n.print=function(e){const t=n.getLanguageId(e),r=n.getTokenType(e),i=n.getFontStyle(e),s=n.getForeground(e),o=n.getBackground(e);console.log({languageId:t,tokenType:r,fontStyle:i,foreground:s,background:o})},n.getLanguageId=function(e){return(255&e)>>>0},n.getTokenType=function(e){return(768&e)>>>8},n.containsBalancedBrackets=function(e){return!!(1024&e)},n.getFontStyle=function(e){return(30720&e)>>>11},n.getForeground=function(e){return(16744448&e)>>>15},n.getBackground=function(e){return(4278190080&e)>>>24},n.set=function(e,t,r,i,s,o,a){let c=n.getLanguageId(e),l=n.getTokenType(e),u=n.containsBalancedBrackets(e)?1:0,h=n.getFontStyle(e),d=n.getForeground(e),g=n.getBackground(e);return 0!==t&&(c=t),8!==r&&(l=r),null!==i&&(u=i?1:0),-1!==s&&(h=s),0!==o&&(d=o),0!==a&&(g=a),(c|l<<8|u<<10|h<<11|d<<15|g<<24)>>>0},t.toOptionalTokenType=function(e){return e}},996:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasicScopeAttributesProvider=t.BasicScopeAttributes=void 0;const r=n(878);class i{constructor(e,t){this.languageId=e,this.tokenType=t}}t.BasicScopeAttributes=i;class s{constructor(e,t){this._getBasicScopeAttributes=new r.CachedFn((e=>{const t=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new i(t,n)})),this._defaultAttributes=new i(e,8),this._embeddedLanguagesMatcher=new o(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return null===e?s._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(s.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}t.BasicScopeAttributesProvider=s,s._NULL_SCOPE_METADATA=new i(0,0),s.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class o{constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map((([e,t])=>r.escapeRegExpCharacters(e)));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}}},947:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineTokens=t.BalancedBracketSelectors=t.StateStackImpl=t.AttributedScopeStack=t.Grammar=t.createGrammar=void 0;const r=n(350),i=n(36),s=n(736),o=n(44),a=n(792),c=n(583),l=n(878),u=n(996),h=n(47);function d(e,t,n,r,i){const o=s.createMatchers(t,g),c=a.RuleFactory.getCompiledRuleId(n,r,i.repository);for(const n of o)e.push({debugSelector:t,matcher:n.matcher,ruleId:c,grammar:i,priority:n.priority})}function g(e,t){if(t.length<e.length)return!1;let n=0;return e.every((e=>{for(let r=n;r<t.length;r++)if(p(t[r],e))return n=r+1,!0;return!1}))}function p(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}t.createGrammar=function(e,t,n,r,i,s,o,a){return new f(e,t,n,r,i,s,o,a)};class f{constructor(e,t,n,r,i,o,a,c){if(this._rootScopeName=e,this.balancedBracketSelectors=o,this._onigLib=c,this._basicScopeAttributesProvider=new u.BasicScopeAttributesProvider(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=a,this._grammar=m(t,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const e of Object.keys(i)){const t=s.createMatchers(e,g);for(const n of t)this._tokenTypeMatchers.push({matcher:n.matcher,type:i[e]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e=[],t=this._rootScopeName,n=(e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e))(t);if(n){const r=n.injections;if(r)for(let t in r)d(e,t,r[t],this,n);const i=this._grammarRepository.injections(t);i&&i.forEach((t=>{const n=this.getExternalGrammar(t);if(n){const t=n.injectionSelector;t&&d(e,t,n,this,n)}}))}return e.sort(((e,t)=>e.priority-t.priority)),e}getInjections(){if(null===this._injections&&(this._injections=this._collectInjections(),r.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const e of this._injections)console.log(`  - ${e.debugSelector}`)}return this._injections}registerRule(e){const t=++this._lastRuleId,n=e(a.ruleIdFromNumber(t));return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[a.ruleIdToNumber(e)]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=m(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){let s;if(-1===this._rootId&&(this._rootId=a.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==y.NULL)s=!1,t.reset();else{s=!0;const e=this._basicScopeAttributesProvider.getDefaultAttributes(),n=this.themeProvider.getDefaults(),r=i.EncodedTokenAttributes.set(0,e.languageId,e.tokenType,null,n.fontStyle,n.foregroundId,n.backgroundId),o=this.getRule(this._rootId).getName(null,null);let a;a=o?_.createRootAndLookUpScopeName(o,r,this):_.createRoot("unknown",r),t=new y(null,this._rootId,-1,-1,!1,null,a,a)}e+="\n";const c=this.createOnigString(e),l=c.content.length,u=new k(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),d=h._tokenizeString(this,c,s,0,t,u,!0,r);return o.disposeOnigString(c),{lineLength:l,lineTokens:u,ruleStack:d.stack,stoppedEarly:d.stoppedEarly}}}function m(e,t){return(e=l.clone(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}t.Grammar=f;class _{constructor(e,t,n){this.parent=e,this.scopePath=t,this.tokenAttributes=n}static fromExtension(e,t){let n=e,r=e?.scopePath??null;for(const e of t)r=c.ScopeStack.push(r,e.scopeNames),n=new _(n,r,e.encodedTokenAttributes);return n}static createRoot(e,t){return new _(null,new c.ScopeStack(null,e),t)}static createRootAndLookUpScopeName(e,t,n){const r=n.getMetadataForScope(e),i=new c.ScopeStack(null,e),s=n.themeProvider.themeMatch(i),o=_.mergeAttributes(t,r,s);return new _(null,i,o)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return _.equals(this,e)}static equals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,n){let r=-1,s=0,o=0;return null!==n&&(r=n.fontStyle,s=n.foregroundId,o=n.backgroundId),i.EncodedTokenAttributes.set(e,t.languageId,t.tokenType,null,r,s,o)}pushAttributed(e,t){if(null===e)return this;if(-1===e.indexOf(" "))return _._pushAttributed(this,e,t);const n=e.split(/ /g);let r=this;for(const e of n)r=_._pushAttributed(r,e,t);return r}static _pushAttributed(e,t,n){const r=n.getMetadataForScope(t),i=e.scopePath.push(t),s=n.themeProvider.themeMatch(i),o=_.mergeAttributes(e.tokenAttributes,r,s);return new _(e,i,o)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let n=this;for(;n&&n!==e;)t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(n.parent?.scopePath??null)}),n=n.parent;return n===e?t.reverse():void 0}}t.AttributedScopeStack=_;class y{constructor(e,t,n,r,i,s,o,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=i,this.endRule=s,this.nameScopesList=o,this.contentNameScopesList=a,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=r}equals(e){return null!==e&&y._equals(this,e)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&_.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){y._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,n,r,i,s,o){return new y(this,e,t,n,r,i,s,o)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new y(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:a.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,t){const n=_.fromExtension(e?.nameScopesList??null,t.nameScopesList);return new y(e,a.ruleIdFromNumber(t.ruleId),t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,n,_.fromExtension(n,t.contentNameScopesList))}}t.StateStackImpl=y,y.NULL=new y(null,0,0,0,!1,null,null,null),t.BalancedBracketSelectors=class{constructor(e,t){this.allowAny=!1,this.balancedBracketScopes=e.flatMap((e=>"*"===e?(this.allowAny=!0,[]):s.createMatchers(e,g).map((e=>e.matcher)))),this.unbalancedBracketScopes=t.flatMap((e=>s.createMatchers(e,g).map((e=>e.matcher))))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}};class k{constructor(e,t,n,i){this.balancedBracketSelectors=i,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,r.DebugFlags.InDebugMode?this._lineText=t:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let n=e?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const t=e?.getScopeNames()??[];for(const e of this._tokenTypeOverrides)e.matcher(t)&&(n=i.EncodedTokenAttributes.set(n,0,i.toOptionalTokenType(e.type),null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(t))}if(s&&(n=i.EncodedTokenAttributes.set(n,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n)return void(this._lastTokenEndIndex=t);if(r.DebugFlags.InDebugMode){const n=e?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<n.length;e++)console.log("      * "+n[e])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n),void(this._lastTokenEndIndex=t)}const n=e?.getScopeNames()??[];if(r.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<n.length;e++)console.log("      * "+n[e])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let e=0,t=this._binaryTokens.length;e<t;e++)n[e]=this._binaryTokens[e];return n}}t.LineTokens=k},965:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInclude=t.TopLevelRepositoryReference=t.TopLevelReference=t.RelativeReference=t.SelfReference=t.BaseReference=t.ScopeDependencyProcessor=t.ExternalReferenceCollector=t.TopLevelRepositoryRuleReference=t.TopLevelRuleReference=void 0;const r=n(878);class i{constructor(e){this.scopeName=e}toKey(){return this.scopeName}}t.TopLevelRuleReference=i;class s{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}}t.TopLevelRepositoryRuleReference=s;class o{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}function a(e,t,n,r){const s=n.lookup(e.scopeName);if(!s){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const o=n.lookup(t);e instanceof i?l({baseGrammar:o,selfGrammar:s},r):c(e.ruleName,{baseGrammar:o,selfGrammar:s,repository:s.repository},r);const a=n.injections(e.scopeName);if(a)for(const e of a)r.add(new i(e))}function c(e,t,n){t.repository&&t.repository[e]&&u([t.repository[e]],t,n)}function l(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&u(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&u(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function u(e,t,n){for(const o of e){if(n.visitedRule.has(o))continue;n.visitedRule.add(o);const e=o.repository?r.mergeObjects({},t.repository,o.repository):t.repository;Array.isArray(o.patterns)&&u(o.patterns,{...t,repository:e},n);const a=o.include;if(!a)continue;const h=m(a);switch(h.kind){case 0:l({...t,selfGrammar:t.baseGrammar},n);break;case 1:l(t,n);break;case 2:c(h.ruleName,{...t,repository:e},n);break;case 3:case 4:const r=h.scopeName===t.selfGrammar.scopeName?t.selfGrammar:h.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(r){const i={baseGrammar:t.baseGrammar,selfGrammar:r,repository:e};4===h.kind?c(h.ruleName,i,n):l(i,n)}else 4===h.kind?n.add(new s(h.scopeName,h.ruleName)):n.add(new i(h.scopeName))}}}t.ExternalReferenceCollector=o,t.ScopeDependencyProcessor=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new i(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new o;for(const n of e)a(n,this.initialScopeName,this.repo,t);for(const e of t.references)if(e instanceof i){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName))continue;if(this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}};class h{constructor(){this.kind=0}}t.BaseReference=h;class d{constructor(){this.kind=1}}t.SelfReference=d;class g{constructor(e){this.ruleName=e,this.kind=2}}t.RelativeReference=g;class p{constructor(e){this.scopeName=e,this.kind=3}}t.TopLevelReference=p;class f{constructor(e,t){this.scopeName=e,this.ruleName=t,this.kind=4}}function m(e){if("$base"===e)return new h;if("$self"===e)return new d;const t=e.indexOf("#");if(-1===t)return new p(e);if(0===t)return new g(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new f(n,r)}}t.TopLevelRepositoryReference=f,t.parseInclude=m},391:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(947),t)},47:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStackElement=t._tokenizeString=void 0;const r=n(350),i=n(44),s=n(792),o=n(878);class a{constructor(e,t){this.stack=e,this.stoppedEarly=t}}function c(e,t,n,i,c,h,g,p){const f=t.content.length;let m=!1,_=-1;if(g){const o=function(e,t,n,i,o,a){let c=o.beginRuleCapturedEOL?0:-1;const l=[];for(let t=o;t;t=t.pop()){const n=t.getRule(e);n instanceof s.BeginWhileRule&&l.push({rule:n,stack:t})}for(let h=l.pop();h;h=l.pop()){const{ruleScanner:l,findOptions:g}=u(h.rule,e,h.stack.endRule,n,i===c),p=l.findNextMatchSync(t,i,g);if(r.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(l.toString())),!p){r.DebugFlags.InDebugMode&&console.log("  popping "+h.rule.debugName+" - "+h.rule.debugWhileRegExp),o=h.stack.pop();break}if(p.ruleId!==s.whileRuleId){o=h.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(a.produce(h.stack,p.captureIndices[0].start),d(e,t,n,h.stack,a,h.rule.whileCaptures,p.captureIndices),a.produce(h.stack,p.captureIndices[0].end),c=p.captureIndices[0].end,p.captureIndices[0].end>i&&(i=p.captureIndices[0].end,n=!1))}return{stack:o,linePos:i,anchorPosition:c,isFirstLine:n}}(e,t,n,i,c,h);c=o.stack,i=o.linePos,n=o.isFirstLine,_=o.anchorPosition}const y=Date.now();for(;!m;){if(0!==p&&Date.now()-y>p)return new a(c,!0);k()}return new a(c,!1);function k(){r.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${i}: |${t.content.substr(i).replace(/\n$/,"\\n")}|`));const a=function(e,t,n,i,s,a){const c=function(e,t,n,i,s,a){const c=s.getRule(e),{ruleScanner:u,findOptions:h}=l(c,e,s.endRule,n,i===a);let d=0;r.DebugFlags.InDebugMode&&(d=o.performanceNow());const g=u.findNextMatchSync(t,i,h);if(r.DebugFlags.InDebugMode){const e=o.performanceNow()-d;e>5&&console.warn(`Rule ${c.debugName} (${c.id}) matching took ${e} against '${t}'`),console.log(`  scanning for (linePos: ${i}, anchorPosition: ${a})`),console.log(u.toString()),g&&console.log(`matched rule id: ${g.ruleId} from ${g.captureIndices[0].start} to ${g.captureIndices[0].end}`)}return g?{captureIndices:g.captureIndices,matchedRuleId:g.ruleId}:null}(e,t,n,i,s,a),u=e.getInjections();if(0===u.length)return c;const h=function(e,t,n,i,s,o,a){let c,u=Number.MAX_VALUE,h=null,d=0;const g=o.contentNameScopesList.getScopeNames();for(let o=0,p=e.length;o<p;o++){const p=e[o];if(!p.matcher(g))continue;const f=t.getRule(p.ruleId),{ruleScanner:m,findOptions:_}=l(f,t,null,i,s===a),y=m.findNextMatchSync(n,s,_);if(!y)continue;r.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${p.debugSelector}`),console.log(m.toString()));const k=y.captureIndices[0].start;if(!(k>=u)&&(u=k,h=y.captureIndices,c=y.ruleId,d=p.priority,u===s))break}return h?{priorityMatch:-1===d,captureIndices:h,matchedRuleId:c}:null}(u,e,t,n,i,s,a);if(!h)return c;if(!c)return h;const d=c.captureIndices[0].start,g=h.captureIndices[0].start;return g<d||h.priorityMatch&&g===d?h:c}(e,t,n,i,c,_);if(!a)return r.DebugFlags.InDebugMode&&console.log("  no more matches."),h.produce(c,f),void(m=!0);const u=a.captureIndices,g=a.matchedRuleId,p=!!(u&&u.length>0)&&u[0].end>i;if(g===s.endRuleId){const s=c.getRule(e);r.DebugFlags.InDebugMode&&console.log("  popping "+s.debugName+" - "+s.debugEndRegExp),h.produce(c,u[0].start),c=c.withContentNameScopesList(c.nameScopesList),d(e,t,n,c,h,s.endCaptures,u),h.produce(c,u[0].end);const o=c;if(c=c.parent,_=o.getAnchorPos(),!p&&o.getEnterPos()===i)return r.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),c=o,h.produce(c,f),void(m=!0)}else{const o=e.getRule(g);h.produce(c,u[0].start);const a=c,l=o.getName(t.content,u),y=c.contentNameScopesList.pushAttributed(l,e);if(c=c.push(g,i,_,u[0].end===f,null,y,y),o instanceof s.BeginEndRule){const i=o;r.DebugFlags.InDebugMode&&console.log("  pushing "+i.debugName+" - "+i.debugBeginRegExp),d(e,t,n,c,h,i.beginCaptures,u),h.produce(c,u[0].end),_=u[0].end;const s=i.getContentName(t.content,u),l=y.pushAttributed(s,e);if(c=c.withContentNameScopesList(l),i.endHasBackReferences&&(c=c.withEndRule(i.getEndWithResolvedBackReferences(t.content,u))),!p&&a.hasSameRuleAs(c))return r.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),c=c.pop(),h.produce(c,f),void(m=!0)}else if(o instanceof s.BeginWhileRule){const i=o;r.DebugFlags.InDebugMode&&console.log("  pushing "+i.debugName),d(e,t,n,c,h,i.beginCaptures,u),h.produce(c,u[0].end),_=u[0].end;const s=i.getContentName(t.content,u),l=y.pushAttributed(s,e);if(c=c.withContentNameScopesList(l),i.whileHasBackReferences&&(c=c.withEndRule(i.getWhileWithResolvedBackReferences(t.content,u))),!p&&a.hasSameRuleAs(c))return r.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),c=c.pop(),h.produce(c,f),void(m=!0)}else{const i=o;if(r.DebugFlags.InDebugMode&&console.log("  matched "+i.debugName+" - "+i.debugMatchRegExp),d(e,t,n,c,h,i.captures,u),h.produce(c,u[0].end),c=c.pop(),!p)return r.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),c=c.safePop(),h.produce(c,f),void(m=!0)}}u[0].end>i&&(i=u[0].end,n=!1)}}function l(e,t,n,i,s){return r.UseOnigurumaFindOptions?{ruleScanner:e.compile(t,n),findOptions:h(i,s)}:{ruleScanner:e.compileAG(t,n,i,s),findOptions:0}}function u(e,t,n,i,s){return r.UseOnigurumaFindOptions?{ruleScanner:e.compileWhile(t,n),findOptions:h(i,s)}:{ruleScanner:e.compileWhileAG(t,n,i,s),findOptions:0}}function h(e,t){let n=0;return e||(n|=1),t||(n|=4),n}function d(e,t,n,r,s,o,a){if(0===o.length)return;const l=t.content,u=Math.min(o.length,a.length),h=[],d=a[0].end;for(let t=0;t<u;t++){const u=o[t];if(null===u)continue;const p=a[t];if(0===p.length)continue;if(p.start>d)break;for(;h.length>0&&h[h.length-1].endPos<=p.start;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?s.produceFromScopes(h[h.length-1].scopes,p.start):s.produce(r,p.start),u.retokenizeCapturedWithRuleId){const t=u.getName(l,a),o=r.contentNameScopesList.pushAttributed(t,e),h=u.getContentName(l,a),d=o.pushAttributed(h,e),g=r.push(u.retokenizeCapturedWithRuleId,p.start,-1,!1,null,o,d),f=e.createOnigString(l.substring(0,p.end));c(e,f,n&&0===p.start,p.start,g,s,!1,0),i.disposeOnigString(f);continue}const f=u.getName(l,a);if(null!==f){const t=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(f,e);h.push(new g(t,p.end))}}for(;h.length>0;)s.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}t._tokenizeString=c;class g{constructor(e,t){this.scopes=e,this.endPos=t}}t.LocalStackElement=g},974:(e,t)=>{function n(e,t){throw new Error("Near offset "+e.pos+": "+t+" ~~~"+e.source.substr(e.pos,50)+"~~~")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSON=void 0,t.parseJSON=function(e,t,o){let a=new r(e),c=new i,l=0,u=null,h=[],d=[];function g(){h.push(l),d.push(u)}function p(){l=h.pop(),u=d.pop()}function f(e){n(a,e)}for(;s(a,c);){if(0===l){if(null!==u&&f("too many constructs in root"),3===c.type){u={},o&&(u.$vscodeTextmateLocation=c.toLocation(t)),g(),l=1;continue}if(2===c.type){u=[],g(),l=4;continue}f("unexpected token in root")}if(2===l){if(5===c.type){p();continue}if(7===c.type){l=3;continue}f("expected , or }")}if(1===l||3===l){if(1===l&&5===c.type){p();continue}if(1===c.type){let e=c.value;if(s(a,c)&&6===c.type||f("expected colon"),s(a,c)||f("expected value"),l=2,1===c.type){u[e]=c.value;continue}if(8===c.type){u[e]=null;continue}if(9===c.type){u[e]=!0;continue}if(10===c.type){u[e]=!1;continue}if(11===c.type){u[e]=parseFloat(c.value);continue}if(2===c.type){let t=[];u[e]=t,g(),l=4,u=t;continue}if(3===c.type){let n={};o&&(n.$vscodeTextmateLocation=c.toLocation(t)),u[e]=n,g(),l=1,u=n;continue}}f("unexpected token in dict")}if(5===l){if(4===c.type){p();continue}if(7===c.type){l=6;continue}f("expected , or ]")}if(4===l||6===l){if(4===l&&4===c.type){p();continue}if(l=5,1===c.type){u.push(c.value);continue}if(8===c.type){u.push(null);continue}if(9===c.type){u.push(!0);continue}if(10===c.type){u.push(!1);continue}if(11===c.type){u.push(parseFloat(c.value));continue}if(2===c.type){let e=[];u.push(e),g(),l=4,u=e;continue}if(3===c.type){let e={};o&&(e.$vscodeTextmateLocation=c.toLocation(t)),u.push(e),g(),l=1,u=e;continue}f("unexpected token in array")}f("unknown state")}return 0!==d.length&&f("unclosed constructs"),u};class r{constructor(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0}}class i{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(e){return{filename:e,line:this.line,char:this.char}}}function s(e,t){t.value=null,t.type=0,t.offset=-1,t.len=-1,t.line=-1,t.char=-1;let r,i=e.source,s=e.pos,o=e.len,a=e.line,c=e.char;for(;;){if(s>=o)return!1;if(r=i.charCodeAt(s),32!==r&&9!==r&&13!==r){if(10!==r)break;s++,a++,c=0}else s++,c++}if(t.offset=s,t.line=a,t.char=c,34===r){for(t.type=1,s++,c++;;){if(s>=o)return!1;if(r=i.charCodeAt(s),s++,c++,92!==r){if(34===r)break}else s++,c++}t.value=i.substring(t.offset+1,s-1).replace(/\\u([0-9A-Fa-f]{4})/g,((e,t)=>String.fromCodePoint(parseInt(t,16)))).replace(/\\(.)/g,((t,r)=>{switch(r){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:n(e,"invalid escape sequence")}throw new Error("unreachable")}))}else if(91===r)t.type=2,s++,c++;else if(123===r)t.type=3,s++,c++;else if(93===r)t.type=4,s++,c++;else if(125===r)t.type=5,s++,c++;else if(58===r)t.type=6,s++,c++;else if(44===r)t.type=7,s++,c++;else if(110===r){if(t.type=8,s++,c++,r=i.charCodeAt(s),117!==r)return!1;if(s++,c++,r=i.charCodeAt(s),108!==r)return!1;if(s++,c++,r=i.charCodeAt(s),108!==r)return!1;s++,c++}else if(116===r){if(t.type=9,s++,c++,r=i.charCodeAt(s),114!==r)return!1;if(s++,c++,r=i.charCodeAt(s),117!==r)return!1;if(s++,c++,r=i.charCodeAt(s),101!==r)return!1;s++,c++}else if(102===r){if(t.type=10,s++,c++,r=i.charCodeAt(s),97!==r)return!1;if(s++,c++,r=i.charCodeAt(s),108!==r)return!1;if(s++,c++,r=i.charCodeAt(s),115!==r)return!1;if(s++,c++,r=i.charCodeAt(s),101!==r)return!1;s++,c++}else for(t.type=11;;){if(s>=o)return!1;if(r=i.charCodeAt(s),!(46===r||r>=48&&r<=57||101===r||69===r||45===r||43===r))break;s++,c++}return t.len=s-t.offset,null===t.value&&(t.value=i.substr(t.offset,t.len)),e.pos=s,e.line=a,e.char=c,!0}},787:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.applyStateStackDiff=t.diffStateStacksRefEq=t.parseRawGrammar=t.INITIAL=t.Registry=void 0;const s=n(391),o=n(50),a=n(652),c=n(583),l=n(965),u=n(442);Object.defineProperty(t,"applyStateStackDiff",{enumerable:!0,get:function(){return u.applyStateStackDiff}}),Object.defineProperty(t,"diffStateStacksRefEq",{enumerable:!0,get:function(){return u.diffStateStacksRefEq}}),i(n(44),t),t.Registry=class{constructor(e){this._options=e,this._syncRegistry=new a.SyncRegistry(c.Theme.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(c.Theme.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new s.BalancedBracketSelectors(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}async _loadGrammar(e,t,n,r,i){const s=new l.ScopeDependencyProcessor(this._syncRegistry,e);for(;s.Q.length>0;)await Promise.all(s.Q.map((e=>this._loadSingleGrammar(e.scopeName)))),s.processQueue();return this._grammarForScopeName(e,t,n,r,i)}async _loadSingleGrammar(e){return this._ensureGrammarCache.has(e)||this._ensureGrammarCache.set(e,this._doLoadSingleGrammar(e)),this._ensureGrammarCache.get(e)}async _doLoadSingleGrammar(e){const t=await this._options.loadGrammar(e);if(t){const n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}async addGrammar(e,t=[],n=0,r=null){return this._syncRegistry.addGrammar(e,t),await this._grammarForScopeName(e.scopeName,n,r)}_grammarForScopeName(e,t=0,n=null,r=null,i=null){return this._syncRegistry.grammarForScopeName(e,t,n,r,i)}},t.INITIAL=s.StateStackImpl.NULL,t.parseRawGrammar=o.parseRawGrammar},736:(e,t)=>{function n(e){return!!e&&!!e.match(/[\w\.:]+/)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMatchers=void 0,t.createMatchers=function(e,t){const r=[],i=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}(e);let s=i.next();for(;null!==s;){let e=0;if(2===s.length&&":"===s.charAt(1)){switch(s.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=i.next()}let t=a();if(r.push({matcher:t,priority:e}),","!==s)break;s=i.next()}return r;function o(){if("-"===s){s=i.next();const e=o();return t=>!!e&&!e(t)}if("("===s){s=i.next();const e=function(){const e=[];let t=a();for(;t&&(e.push(t),"|"===s||","===s);){do{s=i.next()}while("|"===s||","===s);t=a()}return t=>e.some((e=>e(t)))}();return")"===s&&(s=i.next()),e}if(n(s)){const e=[];do{e.push(s),s=i.next()}while(n(s));return n=>t(e,n)}return null}function a(){const e=[];let t=o();for(;t;)e.push(t),t=o();return t=>e.every((e=>e(t)))}}},44:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disposeOnigString=void 0,t.disposeOnigString=function(e){"function"==typeof e.dispose&&e.dispose()}},50:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRawGrammar=void 0;const r=n(69),i=n(350),s=n(974);t.parseRawGrammar=function(e,t=null){return null!==t&&/\.json$/.test(t)?(n=e,o=t,i.DebugFlags.InDebugMode?s.parseJSON(n,o,!0):JSON.parse(n)):function(e,t){return i.DebugFlags.InDebugMode?r.parseWithLocation(e,t,"$vscodeTextmateLocation"):r.parsePLIST(e)}(e,t);var n,o}},69:(e,t)=>{function n(e,t,n){const r=e.length;let i=0,s=1,o=0;function a(t){if(null===n)i+=t;else for(;t>0;)10===e.charCodeAt(i)?(i++,s++,o=0):(i++,o++),t--}function c(e){null===n?i=e:a(e-i)}function l(){for(;i<r;){let t=e.charCodeAt(i);if(32!==t&&9!==t&&13!==t&&10!==t)break;a(1)}}function u(t){return e.substr(i,t.length)===t&&(a(t.length),!0)}function h(t){let n=e.indexOf(t,i);c(-1!==n?n+t.length:r)}function d(t){let n=e.indexOf(t,i);if(-1!==n){let r=e.substring(i,n);return c(n+t.length),r}{let t=e.substr(i);return c(r),t}}r>0&&65279===e.charCodeAt(0)&&(i=1);let g=0,p=null,f=[],m=[],_=null;function y(e,t){f.push(g),m.push(p),g=e,p=t}function k(){if(0===f.length)return S("illegal state stack");g=f.pop(),p=m.pop()}function S(t){throw new Error("Near offset "+i+": "+t+" ~~~"+e.substr(i,50)+"~~~")}const b=function(){if(null===_)return S("missing <key>");let e={};null!==n&&(e[n]={filename:t,line:s,char:o}),p[_]=e,_=null,y(1,e)},v=function(){if(null===_)return S("missing <key>");let e=[];p[_]=e,_=null,y(2,e)},w=function(){let e={};null!==n&&(e[n]={filename:t,line:s,char:o}),p.push(e),y(1,e)},T=function(){let e=[];p.push(e),y(2,e)};function C(){if(1!==g)return S("unexpected </dict>");k()}function R(){return 1===g||2!==g?S("unexpected </array>"):void k()}function I(e){if(1===g){if(null===_)return S("missing <key>");p[_]=e,_=null}else 2===g?p.push(e):p=e}function A(e){if(isNaN(e))return S("cannot parse float");if(1===g){if(null===_)return S("missing <key>");p[_]=e,_=null}else 2===g?p.push(e):p=e}function L(e){if(isNaN(e))return S("cannot parse integer");if(1===g){if(null===_)return S("missing <key>");p[_]=e,_=null}else 2===g?p.push(e):p=e}function P(e){if(1===g){if(null===_)return S("missing <key>");p[_]=e,_=null}else 2===g?p.push(e):p=e}function x(e){if(1===g){if(null===_)return S("missing <key>");p[_]=e,_=null}else 2===g?p.push(e):p=e}function N(e){if(1===g){if(null===_)return S("missing <key>");p[_]=e,_=null}else 2===g?p.push(e):p=e}function M(){let e=d(">"),t=!1;return 47===e.charCodeAt(e.length-1)&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}function E(e){if(e.isClosed)return"";let t=d("</");return h(">"),t.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,10))})).replace(/&#x([0-9a-f]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,(function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e}))}for(;i<r&&(l(),!(i>=r));){const c=e.charCodeAt(i);if(a(1),60!==c)return S("expected <");if(i>=r)return S("unexpected end of input");const d=e.charCodeAt(i);if(63===d){a(1),h("?>");continue}if(33===d){if(a(1),u("--")){h("--\x3e");continue}h(">");continue}if(47===d){if(a(1),l(),u("plist")){h(">");continue}if(u("dict")){h(">"),C();continue}if(u("array")){h(">"),R();continue}return S("unexpected closed tag")}let f=M();switch(f.name){case"dict":1===g?b():2===g?w():(p={},null!==n&&(p[n]={filename:t,line:s,char:o}),y(1,p)),f.isClosed&&C();continue;case"array":1===g?v():2===g?T():(p=[],y(2,p)),f.isClosed&&R();continue;case"key":O=E(f),1!==g?S("unexpected <key>"):null!==_?S("too many <key>"):_=O;continue;case"string":I(E(f));continue;case"real":A(parseFloat(E(f)));continue;case"integer":L(parseInt(E(f),10));continue;case"date":P(new Date(E(f)));continue;case"data":x(E(f));continue;case"true":E(f),N(!0);continue;case"false":E(f),N(!1);continue}if(!/^plist/.test(f.name))return S("unexpected opened tag "+f.name)}var O;return p}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePLIST=t.parseWithLocation=void 0,t.parseWithLocation=function(e,t,r){return n(e,t,r)},t.parsePLIST=function(e){return n(e,null,null)}},652:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncRegistry=void 0;const r=n(391);t.SyncRegistry=class{constructor(e,t){this._onigLibPromise=t,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}async grammarForScopeName(e,t,n,i,s){if(!this._grammars.has(e)){let o=this._rawGrammars.get(e);if(!o)return null;this._grammars.set(e,r.createGrammar(e,o,t,n,i,s,this,await this._onigLibPromise))}return this._grammars.get(e)}}},792:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompiledRule=t.RegExpSourceList=t.RegExpSource=t.RuleFactory=t.BeginWhileRule=t.BeginEndRule=t.IncludeOnlyRule=t.MatchRule=t.CaptureRule=t.Rule=t.ruleIdToNumber=t.ruleIdFromNumber=t.whileRuleId=t.endRuleId=void 0;const r=n(878),i=n(965),s=/\\(\d+)/,o=/\\(\d+)/g;Symbol("RuleId"),t.endRuleId=-1,t.whileRuleId=-2,t.ruleIdFromNumber=function(e){return e},t.ruleIdToNumber=function(e){return e};class a{constructor(e,t,n,i){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=r.RegexSource.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=r.RegexSource.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${r.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?r.RegexSource.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?r.RegexSource.replaceCaptures(this._contentName,e,t):this._contentName}}t.Rule=a;class c extends a{constructor(e,t,n,r,i){super(e,t,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,n,r){throw new Error("Not supported!")}}t.CaptureRule=c;class l extends a{constructor(e,t,n,r,i){super(e,t,n,null),this._match=new p(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new f,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.MatchRule=l;class u extends a{constructor(e,t,n,r,i){super(e,t,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const n of this.patterns)e.getRule(n).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new f,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}t.IncludeOnlyRule=u;class h extends a{constructor(e,t,n,r,i,s,o,a,c,l){super(e,t,n,r),this._begin=new p(i,this.id),this.beginCaptures=s,this._end=new p(o||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=c||!1,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new f;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}t.BeginEndRule=h;class d extends a{constructor(e,n,r,i,s,o,a,c,l){super(e,n,r,i),this._begin=new p(s,this.id),this.beginCaptures=o,this.whileCaptures=c,this._while=new p(a,t.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new f;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new f,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}}t.BeginWhileRule=d;class g{static createCaptureRule(e,t,n,r,i){return e.registerRule((e=>new c(t,e,n,r,i)))}static getCompiledRuleId(e,t,n){return e.id||t.registerRule((i=>{if(e.id=i,e.match)return new l(e.$vscodeTextmateLocation,e.id,e.name,e.match,g._compileCaptures(e.captures,t,n));if(void 0===e.begin){e.repository&&(n=r.mergeObjects({},n,e.repository));let i=e.patterns;return void 0===i&&e.include&&(i=[{include:e.include}]),new u(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,g._compilePatterns(i,t,n))}return e.while?new d(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,g._compileCaptures(e.beginCaptures||e.captures,t,n),e.while,g._compileCaptures(e.whileCaptures||e.captures,t,n),g._compilePatterns(e.patterns,t,n)):new h(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,g._compileCaptures(e.beginCaptures||e.captures,t,n),e.end,g._compileCaptures(e.endCaptures||e.captures,t,n),e.applyEndPatternLast,g._compilePatterns(e.patterns,t,n))})),e.id}static _compileCaptures(e,t,n){let r=[];if(e){let i=0;for(const t in e){if("$vscodeTextmateLocation"===t)continue;const e=parseInt(t,10);e>i&&(i=e)}for(let e=0;e<=i;e++)r[e]=null;for(const i in e){if("$vscodeTextmateLocation"===i)continue;const s=parseInt(i,10);let o=0;e[i].patterns&&(o=g.getCompiledRuleId(e[i],t,n)),r[s]=g.createCaptureRule(t,e[i].$vscodeTextmateLocation,e[i].name,e[i].contentName,o)}}return r}static _compilePatterns(e,t,n){let r=[];if(e)for(let s=0,o=e.length;s<o;s++){const o=e[s];let a=-1;if(o.include){const e=i.parseInclude(o.include);switch(e.kind){case 0:case 1:a=g.getCompiledRuleId(n[o.include],t,n);break;case 2:let r=n[e.ruleName];r&&(a=g.getCompiledRuleId(r,t,n));break;case 3:case 4:const i=e.scopeName,s=4===e.kind?e.ruleName:null,c=t.getExternalGrammar(i,n);if(c)if(s){let e=c.repository[s];e&&(a=g.getCompiledRuleId(e,t,c.repository))}else a=g.getCompiledRuleId(c.repository.$self,t,c.repository)}}else a=g.getCompiledRuleId(o,t,n);if(-1!==a){const e=t.getRule(a);let n=!1;if((e instanceof u||e instanceof h||e instanceof d)&&e.hasMissingPatterns&&0===e.patterns.length&&(n=!0),n)continue;r.push(a)}}return{patterns:r,hasMissingPatterns:(e?e.length:0)!==r.length}}}t.RuleFactory=g;class p{constructor(e,t){if(e){const t=e.length;let n=0,r=[],i=!1;for(let s=0;s<t;s++)if("\\"===e.charAt(s)&&s+1<t){const t=e.charAt(s+1);"z"===t?(r.push(e.substring(n,s)),r.push("$(?!\\n)(?<!\\n)"),n=s+2):"A"!==t&&"G"!==t||(i=!0),s++}this.hasAnchor=i,0===n?this.source=e:(r.push(e.substring(n,t)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=s.test(this.source)}clone(){return new p(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){let n=t.map((t=>e.substring(t.start,t.end)));return o.lastIndex=0,this.source.replace(o,((e,t)=>r.escapeRegExpCharacters(n[parseInt(t,10)]||"")))}_buildAnchorCache(){let e,t,n,r,i=[],s=[],o=[],a=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),i[e]=n,s[e]=n,o[e]=n,a[e]=n,"\\"===n&&e+1<t&&(r=this.source.charAt(e+1),"A"===r?(i[e+1]="￿",s[e+1]="￿",o[e+1]="A",a[e+1]="A"):"G"===r?(i[e+1]="￿",s[e+1]="G",o[e+1]="￿",a[e+1]="G"):(i[e+1]=r,s[e+1]=r,o[e+1]=r,a[e+1]=r),e++);return{A0_G0:i.join(""),A0_G1:s.join(""),A1_G0:o.join(""),A1_G1:a.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}t.RegExpSource=p;class f{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map((e=>e.source));this._cached=new m(e,t,this._items.map((e=>e.ruleId)))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map((e=>e.resolveAnchors(t,n)));return new m(e,r,this._items.map((e=>e.ruleId)))}}t.RegExpSourceList=f;class m{constructor(e,t,n){this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}t.CompiledRule=m},583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeTrieElement=t.ThemeTrieElementRule=t.ColorMap=t.fontStyleToString=t.ParsedThemeRule=t.parseTheme=t.StyleAttributes=t.ScopeStack=t.Theme=void 0;const r=n(878);class i{constructor(e,t,n){this._colorMap=e,this._defaults=t,this._root=n,this._cachedMatchRoot=new r.CachedFn((e=>this._root.match(e)))}static createFromRawTheme(e,t){return this.createFromParsedTheme(c(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort(((e,t)=>{let n=r.strcmp(e.scope,t.scope);return 0!==n?n:(n=r.strArrCmp(e.parentScopes,t.parentScopes),0!==n?n:e.index-t.index)}));let n=0,s="#000000",o="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(n=t.fontStyle),null!==t.foreground&&(s=t.foreground),null!==t.background&&(o=t.background)}let c=new u(t),l=new a(n,c.getId(s),c.getId(o)),g=new d(new h(0,null,-1,0,0),[]);for(let t=0,n=e.length;t<n;t++){let n=e[t];g.insert(0,n.scope,n.parentScopes,n.fontStyle,c.getId(n.foreground),c.getId(n.background))}return new i(c,l,g)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;const t=e.scopeName,n=this._cachedMatchRoot.get(t).find((t=>function(e,t){if(null===t)return!0;let n=0,r=t[n];for(;e;){if(o(e.scopeName,r)){if(n++,n===t.length)return!0;r=t[n]}e=e.parent}return!1}(e.parent,t.parentScopes)));return n?new a(n.fontStyle,n.foreground,n.background):null}}t.Theme=i;class s{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const n of t)e=new s(e,n);return e}static from(...e){let t=null;for(let n=0;n<e.length;n++)t=new s(t,e[n]);return t}push(e){return new s(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let n=this;for(;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}}function o(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}t.ScopeStack=s;class a{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}}function c(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],i=0;for(let e=0,s=t.length;e<s;e++){let s,o=t[e];if(!o.settings)continue;if("string"==typeof o.scope){let e=o.scope;e=e.replace(/^[,]+/,""),e=e.replace(/[,]+$/,""),s=e.split(",")}else s=Array.isArray(o.scope)?o.scope:[""];let a=-1;if("string"==typeof o.settings.fontStyle){a=0;let e=o.settings.fontStyle.split(" ");for(let t=0,n=e.length;t<n;t++)switch(e[t]){case"italic":a|=1;break;case"bold":a|=2;break;case"underline":a|=4;break;case"strikethrough":a|=8}}let c=null;"string"==typeof o.settings.foreground&&r.isValidHexColor(o.settings.foreground)&&(c=o.settings.foreground);let u=null;"string"==typeof o.settings.background&&r.isValidHexColor(o.settings.background)&&(u=o.settings.background);for(let t=0,r=s.length;t<r;t++){let r=s[t].trim().split(" "),o=r[r.length-1],h=null;r.length>1&&(h=r.slice(0,r.length-1),h.reverse()),n[i++]=new l(o,h,e,a,c,u)}}return n}t.StyleAttributes=a,t.parseTheme=c;class l{constructor(e,t,n,r,i,s){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}}t.ParsedThemeRule=l,t.fontStyleToString=function(e){if(-1===e)return"not set";let t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),8&e&&(t+="strikethrough "),""===t&&(t="none"),t.trim()};class u{constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}}t.ColorMap=u;class h{constructor(e,t,n,r,i){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=n,this.foreground=r,this.background=i}clone(){return new h(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}acceptOverwrite(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}}t.ThemeTrieElementRule=h;class d{constructor(e,t=[],n={}){this._mainRule=e,this._children=n,this._rulesWithParentScopes=t}static _sortBySpecificity(e){return 1===e.length||e.sort(this._cmpBySpecificity),e}static _cmpBySpecificity(e,t){if(e.scopeDepth===t.scopeDepth){const n=e.parentScopes,r=t.parentScopes;let i=null===n?0:n.length,s=null===r?0:r.length;if(i===s)for(let e=0;e<i;e++){const t=n[e].length,i=r[e].length;if(t!==i)return i-t}return s-i}return t.scopeDepth-e.scopeDepth}match(e){if(""===e)return d._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let t,n,r=e.indexOf(".");return-1===r?(t=e,n=""):(t=e.substring(0,r),n=e.substring(r+1)),this._children.hasOwnProperty(t)?this._children[t].match(n):d._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(e,t,n,r,i,s){if(""===t)return void this._doInsertHere(e,n,r,i,s);let o,a,c,l=t.indexOf(".");-1===l?(o=t,a=""):(o=t.substring(0,l),a=t.substring(l+1)),this._children.hasOwnProperty(o)?c=this._children[o]:(c=new d(this._mainRule.clone(),h.cloneArr(this._rulesWithParentScopes)),this._children[o]=c),c.insert(e+1,a,n,r,i,s)}_doInsertHere(e,t,n,i,s){if(null!==t){for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let a=this._rulesWithParentScopes[o];if(0===r.strArrCmp(a.parentScopes,t))return void a.acceptOverwrite(e,n,i,s)}-1===n&&(n=this._mainRule.fontStyle),0===i&&(i=this._mainRule.foreground),0===s&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new h(e,t,n,i,s))}else this._mainRule.acceptOverwrite(e,n,i,s)}}t.ThemeTrieElement=d},878:(e,t)=>{function n(e){return Array.isArray(e)?function(e){let t=[];for(let r=0,i=e.length;r<i;r++)t[r]=n(e[r]);return t}(e):"object"==typeof e?function(e){let t={};for(let r in e)t[r]=n(e[r]);return t}(e):e}Object.defineProperty(t,"__esModule",{value:!0}),t.performanceNow=t.CachedFn=t.escapeRegExpCharacters=t.isValidHexColor=t.strArrCmp=t.strcmp=t.RegexSource=t.basename=t.mergeObjects=t.clone=void 0,t.clone=function(e){return n(e)},t.mergeObjects=function(e,...t){return t.forEach((t=>{for(let n in t)e[n]=t[n]})),e},t.basename=function e(t){const n=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return 0===n?t:~n==t.length-1?e(t.substring(0,t.length-1)):t.substr(1+~n)};let r=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function i(e,t){return e<t?-1:e>t?1:0}t.RegexSource=class{static hasCaptures(e){return null!==e&&(r.lastIndex=0,r.test(e))}static replaceCaptures(e,t,n){return e.replace(r,((e,r,i,s)=>{let o=n[parseInt(r||i,10)];if(!o)return e;{let e=t.substring(o.start,o.end);for(;"."===e[0];)e=e.substring(1);switch(s){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}}))}},t.strcmp=i,t.strArrCmp=function(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let r=0;r<n;r++){let n=i(e[r],t[r]);if(0!==n)return n}return 0}return n-r},t.isValidHexColor=function(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))},t.escapeRegExpCharacters=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},t.CachedFn=class{constructor(e){this.fn=e,this.cache=new Map}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},t.performanceNow="undefined"==typeof performance?function(){return Date.now()}:function(){return performance.now()}}},t={};return function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}(787)})()},10297:function(e,t,n){"use strict";e.exports=n.p+"static/media/onig.25dd2e6f.wasm"},7994:function(e,t,n){"use strict";n.r(t),n.d(t,{ITextMateTokenizationService:function(){return i.n},default:function(){return We}});var r=n(8802),i=n(89410),s=n(80165),o=n(45493),a=n(97309),c=n(78074),l=n(10707),u=n(54316),h=n(7428),d=n(59301),g=(n(29999),n(70532)),p=n(84712),f=n(17126),m=n(11547),_=n(81647),y=n(47635),k=n(27291),S=n(18712),b=n(97267),v=n(67525),w=n(16725),T=n(28286),C=n(28019),R=n(26713),I=n(32181),A=n(93560),L=n(25393),P=n(79507),x=n(81557),N=n(43064),M=n(73864);class E extends h.JT{constructor(e,t,n,r,i,s,o){super(),this._grammar=e,this._initialState=t,this._containsEmbeddedLanguages=n,this._createBackgroundTokenizer=r,this._backgroundTokenizerShouldOnlyVerifyTokens=i,this._reportTokenizationTime=s,this._reportSlowTokenization=o,this._seenLanguages=[],this._onDidEncounterLanguage=this._register(new x.Q5),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event}get backgroundTokenizerShouldOnlyVerifyTokens(){return this._backgroundTokenizerShouldOnlyVerifyTokens()}getInitialState(){return this._initialState}tokenize(e,t,n){throw new Error("Not supported!")}createBackgroundTokenizer(e,t){if(this._createBackgroundTokenizer)return this._createBackgroundTokenizer(e,t)}tokenizeEncoded(e,t,n){const r=1e4*Math.random()<1,i=this._reportSlowTokenization||r,s=i?new N.G(!0):void 0,o=this._grammar.tokenizeLine2(e,n,500);if(i){const t=s.elapsed();(r||t>32)&&this._reportTokenizationTime(t,e.length,r)}if(o.stoppedEarly)return console.warn(`Time limit reached when tokenizing line: ${e.substring(0,100)}`),new k.DI(o.tokens,n);if(this._containsEmbeddedLanguages){const e=this._seenLanguages,t=o.tokens;for(let n=0,r=t.length>>>1;n<r;n++){const r=t[1+(n<<1)],i=M.N.getLanguageId(r);e[i]||(e[i]=!0,this._onDidEncounterLanguage.fire(i))}}let a;return a=n.equals(o.ruleStack)?n:o.ruleStack,new k.DI(o.tokens,a)}}var O=n(46039);class D extends h.JT{get backgroundTokenizerShouldOnlyVerifyTokens(){return this._actual.backgroundTokenizerShouldOnlyVerifyTokens}constructor(e,t,n){super(),this._encodedLanguageId=e,this._actual=t,this._maxTokenizationLineLength=n,this._register((0,p.J3)(this._maxTokenizationLineLength))}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){throw new Error("Not supported!")}tokenizeEncoded(e,t,n){return e.length>=this._maxTokenizationLineLength.get()?(0,O.Dy)(this._encodedLanguageId,n):this._actual.tokenizeEncoded(e,t,n)}createBackgroundTokenizer(e,t){return this._actual.createBackgroundTokenizer?this._actual.createBackgroundTokenizer(e,t):void 0}}var G=n(42731),$=n(44335),j=n(20311),F=n(9102),B=n(57220),z=n(16184),W=n(29804),U=n(3918),q=n(19966),H=n(98500);class V{constructor(e){this.edits=e.slice().sort((0,c.tT)((e=>e.offset),c.fv))}applyToArray(e){for(let t=this.edits.length-1;t>=0;t--){const n=this.edits[t];e.splice(n.offset,n.length,...new Array(n.newLength))}}}class J{constructor(e,t,n){this.offset=e,this.length=t,this.newLength=n}toString(){return`[${this.offset}, +${this.length}) -> +${this.newLength}}`}}class K{static fromMany(e){const t=e.map((e=>new K(e)));return new Q(t)}constructor(e){this.transformation=e,this.idx=0,this.offset=0}transform(e){let t=this.transformation.edits[this.idx];for(;t&&t.offset+t.length<=e;)this.offset+=t.newLength-t.length,this.idx++,t=this.transformation.edits[this.idx];if(!(t&&t.offset<=e))return e+this.offset}}class Q{constructor(e){this.transformers=e}transform(e){for(const t of this.transformers){const n=t.transform(e);if(void 0===n)return;e=n}return e}}var Y,X=n(7301),Z=n.t(X,2);class ee extends h.JT{static{this._id=0}constructor(e,t,n,r,i,s){var o,a,c;super(),this._model=e,this._worker=t,this._languageIdCodec=n,this._backgroundTokenizationStore=r,this._configurationService=i,this._maxTokenizationLineLength=s,this.controllerId=ee._id++,this._pendingChanges=[],this._states=new q.fl,this._loggingEnabled=(o="editor.experimental.asyncTokenizationLogging",a=!1,c=this._configurationService,(0,p.rD)((e=>c.onDidChangeConfiguration((t=>{t.affectsConfiguration(o)&&e(t)}))),(()=>c.getValue(o)??a))),this._register((0,p.J3)(this._loggingEnabled)),this._register(this._model.onDidChangeContent((e=>{this._shouldLog&&console.log("model change",{fileName:this._model.uri.fsPath.split("\\").pop(),changes:ne(e.changes)}),this._worker.acceptModelChanged(this.controllerId,e),this._pendingChanges.push(e)}))),this._register(this._model.onDidChangeLanguage((e=>{const t=this._model.getLanguageId(),n=this._languageIdCodec.encodeLanguageId(t);this._worker.acceptModelLanguageChanged(this.controllerId,t,n)})));const l=this._model.getLanguageId(),u=this._languageIdCodec.encodeLanguageId(l);this._worker.acceptNewModel({uri:this._model.uri,versionId:this._model.getVersionId(),lines:this._model.getLinesContent(),EOL:this._model.getEOL(),languageId:l,encodedLanguageId:u,maxTokenizationLineLength:this._maxTokenizationLineLength.get(),controllerId:this.controllerId}),this._register((0,g.EH)((e=>{const t=this._maxTokenizationLineLength.read(e);this._worker.acceptMaxTokenizationLineLength(this.controllerId,t)})))}dispose(){super.dispose(),this._worker.acceptRemovedModel(this.controllerId)}requestTokens(e,t){this._worker.retokenize(this.controllerId,e,t)}async setTokensAndStates(e,t,n,r){if(this.controllerId!==e)return;let i=H.N.deserialize(new Uint8Array(n));if(this._shouldLog&&console.log("received background tokenization result",{fileName:this._model.uri.fsPath.split("\\").pop(),updatedTokenLines:i.map((e=>e.getLineRange())).join(" & "),updatedStateLines:r.map((e=>new W.z(e.startLineNumber,e.startLineNumber+e.stateDeltas.length).toString())).join(" & ")}),this._shouldLog){const e=this._pendingChanges.filter((e=>e.versionId<=t)).map((e=>e.changes)).map((e=>ne(e))).join(" then ");console.log("Applying changes to local states",e)}for(;this._pendingChanges.length>0&&this._pendingChanges[0].versionId<=t;){const e=this._pendingChanges.shift();this._states.acceptChanges(e.changes)}if(this._pendingChanges.length>0){if(this._shouldLog){const e=this._pendingChanges.map((e=>e.changes)).map((e=>ne(e))).join(" then ");console.log("Considering non-processed changes",e)}const e=K.fromMany(this._pendingChanges.map((e=>te(e.changes)))),t=new H.N;for(const n of i)for(let r=n.startLineNumber;r<=n.endLineNumber;r++){void 0!==e.transform(r-1)&&t.add(r,n.getLineTokens(r))}i=t.finalize();for(const e of this._pendingChanges)for(const t of e.changes)for(let e=0;e<i.length;e++)i[e].applyEdit(t.range,t.text)}const s=K.fromMany(this._pendingChanges.map((e=>te(e.changes))));this._applyStateStackDiffFn&&this._initialState||(this._applyStateStackDiffFn=X.applyStateStackDiff,this._initialState=X.INITIAL);for(const e of r){let t=e.startLineNumber<=1?this._initialState:this._states.getEndState(e.startLineNumber-1);for(let n=0;n<e.stateDeltas.length;n++){const r=e.stateDeltas[n];let i;r?(i=this._applyStateStackDiffFn(t,r),this._states.setEndState(e.startLineNumber+n,i)):i=this._states.getEndState(e.startLineNumber+n);const o=s.transform(e.startLineNumber+n-1);void 0!==o&&this._backgroundTokenizationStore.setEndState(o+1,i),e.startLineNumber+n>=this._model.getLineCount()-1&&this._backgroundTokenizationStore.backgroundTokenizationFinished(),t=i}}this._backgroundTokenizationStore.setTokens(i)}get _shouldLog(){return this._loggingEnabled.get()}}function te(e){return new V(e.map((e=>new J(e.range.startLineNumber-1,e.range.endLineNumber-e.range.startLineNumber+1,(0,z.Q)(e.text)[0]+1))))}function ne(e){return e.map((e=>U.e.lift(e.range).toString()+" => "+e.text)).join(" & ")}let re=class{static{Y=this}static{this._reportedMismatchingTokens=!1}constructor(e,t,n,r,i,s,o,a,c,l){this._reportTokenizationTime=e,this._shouldTokenizeAsync=t,this._extensionResourceLoaderService=n,this._modelService=r,this._languageConfigurationService=i,this._configurationService=s,this._languageService=o,this._environmentService=a,this._notificationService=c,this._telemetryService=l,this._workerProxyPromise=null,this._worker=null,this._workerProxy=null,this._workerTokenizerControllers=new Map,this._currentTheme=null,this._currentTokenColorMap=null,this._grammarDefinitions=[]}dispose(){this._disposeWorker()}createBackgroundTokenizer(e,t,n){if(!this._shouldTokenizeAsync()||e.isTooLargeForSyncing())return;const r=new h.SL,i=this._getWorkerProxy().then((i=>{if(r.isDisposed||!i)return;const s={controller:void 0,worker:this._worker};return r.add(function(e,t){const n=new h.SL,r=n.add(new h.SL);function i(){e.isAttachedToEditor()?r.add(t()):r.clear()}return i(),n.add(e.onDidChangeAttached((()=>{i()}))),n}(e,(()=>{const r=new ee(e,i,this._languageService.languageIdCodec,t,this._configurationService,n);return s.controller=r,this._workerTokenizerControllers.set(r.controllerId,r),(0,h.OF)((()=>{s.controller=void 0,this._workerTokenizerControllers.delete(r.controllerId),r.dispose()}))}))),s}));return{dispose(){r.dispose()},requestTokens:async(e,t)=>{const n=await i;n?.controller&&n.worker===this._worker&&n.controller.requestTokens(e,t)},reportMismatchingTokens:e=>{Y._reportedMismatchingTokens||(Y._reportedMismatchingTokens=!0,this._notificationService.error({message:"Async Tokenization Token Mismatch in line "+e,name:"Async Tokenization Token Mismatch"}),this._telemetryService.publicLog2("asyncTokenizationMismatchingTokens",{}))}}}setGrammarDefinitions(e){this._grammarDefinitions=e,this._disposeWorker()}acceptTheme(e,t){this._currentTheme=e,this._currentTokenColorMap=t,this._currentTheme&&this._currentTokenColorMap&&this._workerProxy&&this._workerProxy.acceptTheme(this._currentTheme,this._currentTokenColorMap)}_getWorkerProxy(){return this._workerProxyPromise||(this._workerProxyPromise=this._createWorkerProxy()),this._workerProxyPromise}async _createWorkerProxy(){const e=`${d.zI}/vscode-textmate`,t=`${d.SC}/vscode-textmate`,n=`${d.zI}/vscode-oniguruma`,r=`${d.SC}/vscode-oniguruma`,i=this._environmentService.isBuilt&&!m.$L,s=i?r:n,o=`${i?t:e}/release/main.js`,a=`${s}/release/main.js`,c=`${s}/release/onig.wasm`,l=d.Gi.asBrowserUri(o).toString(!0),u={grammarDefinitions:this._grammarDefinitions,textmateMainUri:l,onigurumaMainUri:d.Gi.asBrowserUri(a).toString(!0),onigurumaWASMUri:d.Gi.asBrowserUri(c).toString(!0)},h={readFile:async e=>{const t=G.ov.revive(e);return this._extensionResourceLoaderService.readExtensionResource(t)},setTokensAndStates:async(e,t,n,r)=>{const i=this._workerTokenizerControllers.get(e);i&&i.setTokensAndStates(e,t,n,r)},reportTokenizationTime:(e,t,n,r,i)=>{this._reportTokenizationTime(e,t,n,r,i)}},g=this._worker=(0,$.j)(this._modelService,this._languageConfigurationService,{createData:u,label:"textMateWorker",moduleId:"vs/workbench/services/textMate/browser/backgroundTokenization/worker/textMateTokenizationWorker.worker",host:h}),p=await g.getProxy();return this._worker!==g?null:(this._workerProxy=p,this._currentTheme&&this._currentTokenColorMap&&this._workerProxy.acceptTheme(this._currentTheme,this._currentTokenColorMap),p)}_disposeWorker(){for(const e of this._workerTokenizerControllers.values())e.dispose();this._workerTokenizerControllers.clear(),this._worker&&(this._worker.dispose(),this._worker=null),this._workerProxy=null,this._workerProxyPromise=null}};re=Y=(0,o.g)([(0,o.f)(2,T.S),(0,o.f)(3,F.q),(0,o.f)(4,j.c_),(0,o.f)(5,w.U),(0,o.f)(6,S.O),(0,o.f)(7,B.Y),(0,o.f)(8,I.l),(0,o.f)(9,L.b)],re);class ie{constructor(){this._scopeNameToLanguageRegistration=Object.create(null)}reset(){this._scopeNameToLanguageRegistration=Object.create(null)}register(e){this._scopeNameToLanguageRegistration[e.scopeName]=e}getGrammarDefinition(e){return this._scopeNameToLanguageRegistration[e]||null}}const se="No TM Grammar registered for this language.";class oe extends h.JT{constructor(e,t,n,r){super(),this._host=e,this._initialState=n.INITIAL,this._scopeRegistry=new ie,this._injections={},this._injectedEmbeddedLanguages={},this._languageToScope=new Map,this._grammarRegistry=this._register(new n.Registry({onigLib:r,loadGrammar:async e=>{const t=this._scopeRegistry.getGrammarDefinition(e);if(!t)return this._host.logTrace(`No grammar found for scope ${e}`),null;const r=t.location;try{const e=await this._host.readFile(r);return n.parseRawGrammar(e,r.path)}catch(t){return this._host.logError(`Unable to load and parse grammar for scope ${e} from ${r}`,t),null}},getInjections:e=>{const t=e.split(".");let n=[];for(let e=1;e<=t.length;e++){const r=t.slice(0,e).join(".");n=[...n,...this._injections[r]||[]]}return n}}));for(const e of t){if(this._scopeRegistry.register(e),e.injectTo){for(const t of e.injectTo){let n=this._injections[t];n||(this._injections[t]=n=[]),n.push(e.scopeName)}if(e.embeddedLanguages)for(const t of e.injectTo){let n=this._injectedEmbeddedLanguages[t];n||(this._injectedEmbeddedLanguages[t]=n=[]),n.push(e.embeddedLanguages)}}e.language&&this._languageToScope.set(e.language,e.scopeName)}}has(e){return this._languageToScope.has(e)}setTheme(e,t){this._grammarRegistry.setTheme(e,t)}getColorMap(){return this._grammarRegistry.getColorMap()}async createGrammar(e,t){const n=this._languageToScope.get(e);if("string"!=typeof n)throw new Error(se);const r=this._scopeRegistry.getGrammarDefinition(n);if(!r)throw new Error(se);const i=r.embeddedLanguages;if(this._injectedEmbeddedLanguages[n]){const e=this._injectedEmbeddedLanguages[n];for(const t of e)for(const e of Object.keys(t))i[e]=t[e]}const s=Object.keys(i).length>0;let o;try{o=await this._grammarRegistry.loadGrammarWithConfiguration(n,t,{embeddedLanguages:i,tokenTypes:r.tokenTypes,balancedBracketSelectors:r.balancedBracketSelectors,unbalancedBracketSelectors:r.unbalancedBracketSelectors})}catch(e){if(e.message&&e.message.startsWith("No grammar provided for"))throw new Error(se);throw e}return{languageId:e,grammar:o,initialState:this._initialState,containsEmbeddedLanguages:s,sourceExtensionId:r.sourceExtensionId}}}var ae=n(23783),ce=n(45273);const le="vs/workbench/services/textMate/common/TMGrammars",ue=ae.ut.registerExtensionPoint({extensionPoint:"grammars",deps:[ce.O],jsonSchema:{description:(0,v.C$)(le,0,"Contributes textmate tokenizers."),type:"array",defaultSnippets:[{body:[{language:"${1:id}",scopeName:"source.${2:id}",path:"./syntaxes/${3:id}.tmLanguage."}]}],items:{type:"object",defaultSnippets:[{body:{language:"${1:id}",scopeName:"source.${2:id}",path:"./syntaxes/${3:id}.tmLanguage."}}],properties:{language:{description:(0,v.C$)(le,1,"Language identifier for which this syntax is contributed to."),type:"string"},scopeName:{description:(0,v.C$)(le,2,"Textmate scope name used by the tmLanguage file."),type:"string"},path:{description:(0,v.C$)(le,3,"Path of the tmLanguage file. The path is relative to the extension folder and typically starts with './syntaxes/'."),type:"string"},embeddedLanguages:{description:(0,v.C$)(le,4,"A map of scope name to language id if this grammar contains embedded languages."),type:"object"},tokenTypes:{description:(0,v.C$)(le,5,"A map of scope name to token types."),type:"object",additionalProperties:{enum:["string","comment","other"]}},injectTo:{description:(0,v.C$)(le,6,"List of language scope names to which this grammar is injected to."),type:"array",items:{type:"string"}},balancedBracketScopes:{description:(0,v.C$)(le,7,"Defines which scope names contain balanced brackets."),type:"array",items:{type:"string"},default:["*"]},unbalancedBracketScopes:{description:(0,v.C$)(le,8,"Defines which scope names do not contain balanced brackets."),type:"array",items:{type:"string"},default:[]}},required:["scopeName","path"]}}});var he,de=n(58655),ge=n(88865),pe=n.t(ge,2);const fe="vs/workbench/services/textMate/browser/textMateTokenizationFeatureImpl";let me=class extends h.JT{static{he=this}static{this.reportTokenizationTimeCounter={sync:0,async:0}}constructor(e,t,n,r,i,s,o,c,l,u){super(),this._languageService=e,this._themeService=t,this._extensionResourceLoaderService=n,this._notificationService=r,this._logService=i,this._configurationService=s,this._progressService=o,this._environmentService=c,this._instantiationService=l,this._telemetryService=u,this._createdModes=[],this._encounteredLanguages=[],this._debugMode=!1,this._debugModePrintFunc=()=>{},this._grammarDefinitions=null,this._grammarFactory=null,this._tokenizersRegistrations=new h.SL,this._currentTheme=null,this._currentTokenColorMap=null,this._threadedBackgroundTokenizerFactory=this._instantiationService.createInstance(re,((e,t,n,r,i)=>this._reportTokenizationTime(e,t,n,r,!0,i)),(()=>this.getAsyncTokenizationEnabled())),this._vscodeOniguruma=null,this._styleElement=(0,a.dS)(),this._styleElement.className="vscode-tokens-styles",ue.setHandler((e=>this._handleGrammarsExtPoint(e))),this._updateTheme(this._themeService.getColorTheme(),!0),this._register(this._themeService.onDidColorThemeChange((()=>{this._updateTheme(this._themeService.getColorTheme(),!1)}))),this._languageService.onDidRequestRichLanguageFeatures((e=>{this._createdModes.push(e)}))}getAsyncTokenizationEnabled(){return!!this._configurationService.getValue("editor.experimental.asyncTokenization")}getAsyncTokenizationVerification(){return!!this._configurationService.getValue("editor.experimental.asyncTokenizationVerification")}_handleGrammarsExtPoint(e){this._grammarDefinitions=null,this._grammarFactory&&(this._grammarFactory.dispose(),this._grammarFactory=null),this._tokenizersRegistrations.clear(),this._grammarDefinitions=[];for(const t of e){const e=t.value;for(const n of e){const e=this._validateGrammarDefinition(t,n);if(e&&(this._grammarDefinitions.push(e),e.language)){const t=new k.MO((()=>this._createTokenizationSupport(e.language)));this._tokenizersRegistrations.add(t),this._tokenizersRegistrations.add(k.RW.registerFactory(e.language,t))}}}this._threadedBackgroundTokenizerFactory.setGrammarDefinitions(this._grammarDefinitions);for(const e of this._createdModes)k.RW.getOrCreate(e)}_validateGrammarDefinition(e,t){if(!function(e,t,n,r){if(t.language&&("string"!=typeof t.language||!r.isRegisteredLanguageId(t.language)))return n.error((0,v.C$)(fe,4,"Unknown language in `contributes.{0}.language`. Provided value: {1}",ue.name,String(t.language))),!1;if(!t.scopeName||"string"!=typeof t.scopeName)return n.error((0,v.C$)(fe,5,"Expected string in `contributes.{0}.scopeName`. Provided value: {1}",ue.name,String(t.scopeName))),!1;if(!t.path||"string"!=typeof t.path)return n.error((0,v.C$)(fe,6,"Expected string in `contributes.{0}.path`. Provided value: {1}",ue.name,String(t.path))),!1;if(t.injectTo&&(!Array.isArray(t.injectTo)||t.injectTo.some((e=>"string"!=typeof e))))return n.error((0,v.C$)(fe,7,"Invalid value in `contributes.{0}.injectTo`. Must be an array of language scope names. Provided value: {1}",ue.name,JSON.stringify(t.injectTo))),!1;if(t.embeddedLanguages&&!(0,y.Kn)(t.embeddedLanguages))return n.error((0,v.C$)(fe,8,"Invalid value in `contributes.{0}.embeddedLanguages`. Must be an object map from scope name to language. Provided value: {1}",ue.name,JSON.stringify(t.embeddedLanguages))),!1;if(t.tokenTypes&&!(0,y.Kn)(t.tokenTypes))return n.error((0,v.C$)(fe,9,"Invalid value in `contributes.{0}.tokenTypes`. Must be an object map from scope name to token type. Provided value: {1}",ue.name,JSON.stringify(t.tokenTypes))),!1;const i=(0,_.Vo)(e,t.path);(0,_.KM)(i,e)||n.warn((0,v.C$)(fe,10,"Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.",ue.name,i.path,e.path));return!0}(e.description.extensionLocation,t,e.collector,this._languageService))return null;const n=(0,_.Vo)(e.description.extensionLocation,t.path),r=Object.create(null);if(t.embeddedLanguages){const e=Object.keys(t.embeddedLanguages);for(let n=0,i=e.length;n<i;n++){const i=e[n],s=t.embeddedLanguages[i];"string"==typeof s&&(this._languageService.isRegisteredLanguageId(s)&&(r[i]=this._languageService.languageIdCodec.encodeLanguageId(s)))}}const i=Object.create(null);if(t.tokenTypes){const e=Object.keys(t.tokenTypes);for(const n of e){switch(t.tokenTypes[n]){case"string":i[n]=2;break;case"other":i[n]=0;break;case"comment":i[n]=1}}}function s(e,t){return Array.isArray(e)&&e.every((e=>"string"==typeof e))?e:t}return{location:n,language:(t.language&&this._languageService.isRegisteredLanguageId(t.language)?t.language:null)||void 0,scopeName:t.scopeName,embeddedLanguages:r,tokenTypes:i,injectTo:t.injectTo,balancedBracketSelectors:s(t.balancedBracketScopes,["*"]),unbalancedBracketSelectors:s(t.unbalancedBracketScopes,[]),sourceExtensionId:e.description.id}}startDebugMode(e,t){this._debugMode?this._notificationService.error((0,v.C$)(fe,0,"Already Logging.")):(this._debugModePrintFunc=e,this._debugMode=!0,this._debugMode&&this._progressService.withProgress({location:15,buttons:[(0,v.C$)(fe,1,"Stop")]},(e=>(e.report({message:(0,v.C$)(fe,2,"Preparing to log TM Grammar parsing. Press Stop when finished.")}),this._getVSCodeOniguruma().then((t=>(t.setDefaultDebugCall(!0),e.report({message:(0,v.C$)(fe,3,"Now logging TM Grammar parsing. Press Stop when finished.")}),new Promise(((e,t)=>{}))))))),(e=>{this._getVSCodeOniguruma().then((e=>{this._debugModePrintFunc=()=>{},this._debugMode=!1,e.setDefaultDebugCall(!1),t()}))})))}_canCreateGrammarFactory(){return!!this._grammarDefinitions}async _getOrCreateGrammarFactory(){if(this._grammarFactory)return this._grammarFactory;const e=await this._getVSCodeOniguruma(),t=Promise.resolve({createOnigScanner:t=>e.createOnigScanner(t),createOnigString:t=>e.createOnigString(t)});return this._grammarFactory||(this._grammarFactory=new oe({logTrace:e=>this._logService.trace(e),logError:(e,t)=>this._logService.error(e,t),readFile:e=>this._extensionResourceLoaderService.readExtensionResource(e)},this._grammarDefinitions||[],Z,t),this._updateTheme(this._themeService.getColorTheme(),!0)),this._grammarFactory}async _createTokenizationSupport(e){if(!this._languageService.isRegisteredLanguageId(e))return null;if(!this._canCreateGrammarFactory())return null;try{const t=await this._getOrCreateGrammarFactory();if(!t.has(e))return null;const n=this._languageService.languageIdCodec.encodeLanguageId(e),r=await t.createGrammar(e,n);if(!r.grammar)return null;const i=function(e,t,n,r){return(0,p.rD)((n=>r.onDidChangeConfiguration((r=>{r.affectsConfiguration(e,{overrideIdentifier:t})&&n(r)}))),(()=>r.getValue(e,{overrideIdentifier:t})??n))}("editor.maxTokenizationLineLength",e,-1,this._configurationService),s=new E(r.grammar,r.initialState,r.containsEmbeddedLanguages,((e,t)=>this._threadedBackgroundTokenizerFactory.createBackgroundTokenizer(e,t,i)),(()=>this.getAsyncTokenizationVerification()),((t,n,i)=>{this._reportTokenizationTime(t,e,r.sourceExtensionId,n,!1,i)}),!0);return s.onDidEncounterLanguage((e=>{if(!this._encounteredLanguages[e]){const t=this._languageService.languageIdCodec.decodeLanguageId(e);this._encounteredLanguages[e]=!0,this._languageService.requestBasicLanguageFeatures(t)}})),new D(n,s,i)}catch(e){return e.message&&e.message===se||(0,u.dL)(e),null}}_updateTheme(e,t){if(!t&&this._currentTheme&&this._currentTokenColorMap&&function(e,t){if(!t||!e||t.length!==e.length)return!1;for(let n=t.length-1;n>=0;n--){const r=t[n],i=e[n];if(r.scope!==i.scope)return!1;const s=r.settings,o=i.settings;if(s&&o){if(s.fontStyle!==o.fontStyle||s.foreground!==o.foreground||s.background!==o.background)return!1}else if(!s||!o)return!1}return!0}(this._currentTheme.settings,e.tokenColors)&&(0,c.fS)(this._currentTokenColorMap,e.tokenColorMap))return;this._currentTheme={name:e.label,settings:e.tokenColors},this._currentTokenColorMap=e.tokenColorMap,this._grammarFactory?.setTheme(this._currentTheme,this._currentTokenColorMap);const n=function(e){const t=[null];for(let n=1,r=e.length;n<r;n++)t[n]=l.Il.fromHex(e[n]);return t}(this._currentTokenColorMap),r=(0,b.yr)(n);this._styleElement.textContent=r,k.RW.setColorMap(n),this._currentTheme&&this._currentTokenColorMap&&this._threadedBackgroundTokenizerFactory.acceptTheme(this._currentTheme,this._currentTokenColorMap)}async createTokenizer(e){if(!this._languageService.isRegisteredLanguageId(e))return null;const t=await this._getOrCreateGrammarFactory();if(!t.has(e))return null;const n=this._languageService.languageIdCodec.encodeLanguageId(e),{grammar:r}=await t.createGrammar(e,n);return r}_getVSCodeOniguruma(){return this._vscodeOniguruma||(this._vscodeOniguruma=(async()=>{const e=await this._loadVSCodeOnigurumaWASM();return await ge.loadWASM({data:e,print:e=>{this._debugModePrintFunc(e)}}),pe})()),this._vscodeOniguruma}async _loadVSCodeOnigurumaWASM(){if(m.$L){const e=await fetch(d.Gi.asBrowserUri("vscode-oniguruma/../onig.wasm").toString(!0));return await e.arrayBuffer()}return await fetch(this._environmentService.isBuilt?d.Gi.asBrowserUri(`${d.No}/vscode-oniguruma/release/onig.wasm`).toString(!0):d.Gi.asBrowserUri(`${d.zI}/vscode-oniguruma/release/onig.wasm`).toString(!0))}_reportTokenizationTime(e,t,n,r,i,s){const o=i?"async":"sync";he.reportTokenizationTimeCounter[o]>50||(0===he.reportTokenizationTimeCounter[o]&&setTimeout((()=>{he.reportTokenizationTimeCounter[o]=0}),36e5),he.reportTokenizationTimeCounter[o]++,this._telemetryService.publicLog2("editor.tokenizedLine",{timeMs:e,languageId:t,lineLength:r,fromWorker:i,sourceExtensionId:n,isRandomSample:s,tokenizationSetting:this.getAsyncTokenizationEnabled()?this.getAsyncTokenizationVerification()?2:1:0}))}};me=he=(0,o.g)([(0,o.f)(0,S.O),(0,o.f)(1,de.D),(0,o.f)(2,T.S),(0,o.f)(3,I.l),(0,o.f)(4,R.V),(0,o.f)(5,w.U),(0,o.f)(6,A.R),(0,o.f)(7,P.n),(0,o.f)(8,C.TG),(0,o.f)(9,L.b)],me);var _e=n(35798),ye=n(42043),ke=n(42403),Se=n(95068),be=n(92417),ve=n(79898);const we="vs/workbench/services/themes/common/tokenClassificationExtensionPoint",Te=(0,be.Cg)(),Ce=ae.ut.registerExtensionPoint({extensionPoint:"semanticTokenTypes",jsonSchema:{description:(0,v.C$)(we,0,"Contributes semantic token types."),type:"array",items:{type:"object",properties:{id:{type:"string",description:(0,v.C$)(we,1,"The identifier of the semantic token type"),pattern:be.dY,patternErrorMessage:(0,v.C$)(we,2,"Identifiers should be in the form letterOrDigit[_-letterOrDigit]*")},superType:{type:"string",description:(0,v.C$)(we,3,"The super type of the semantic token type"),pattern:be.dY,patternErrorMessage:(0,v.C$)(we,4,"Super types should be in the form letterOrDigit[_-letterOrDigit]*")},description:{type:"string",description:(0,v.C$)(we,5,"The description of the semantic token type")}}}}}),Re=ae.ut.registerExtensionPoint({extensionPoint:"semanticTokenModifiers",jsonSchema:{description:(0,v.C$)(we,6,"Contributes semantic token modifiers."),type:"array",items:{type:"object",properties:{id:{type:"string",description:(0,v.C$)(we,7,"The identifier of the semantic token modifier"),pattern:be.dY,patternErrorMessage:(0,v.C$)(we,8,"Identifiers should be in the form letterOrDigit[_-letterOrDigit]*")},description:{type:"string",description:(0,v.C$)(we,9,"The description of the semantic token modifier")}}}}}),Ie=ae.ut.registerExtensionPoint({extensionPoint:"semanticTokenScopes",jsonSchema:{description:(0,v.C$)(we,10,"Contributes semantic token scope maps."),type:"array",items:{type:"object",properties:{language:{description:(0,v.C$)(we,11,"Lists the languge for which the defaults are."),type:"string"},scopes:{description:(0,v.C$)(we,12,"Maps a semantic token (described by semantic token selector) to one or more textMate scopes used to represent that token."),type:"object",additionalProperties:{type:"array",items:{type:"string"}}}}}}});class Ae{constructor(){function e(e,t,n){if("string"!=typeof e.id||0===e.id.length)return n.error((0,v.C$)(we,13,"'configuration.{0}.id' must be defined and can not be empty",t)),!1;if(!e.id.match(be.dY))return n.error((0,v.C$)(we,14,"'configuration.{0}.id' must follow the pattern letterOrDigit[-_letterOrDigit]*",t)),!1;const r=e.superType;return r&&!r.match(be.dY)?(n.error((0,v.C$)(we,15,"'configuration.{0}.superType' must follow the pattern letterOrDigit[-_letterOrDigit]*",t)),!1):"string"==typeof e.description&&0!==e.id.length||(n.error((0,v.C$)(we,16,"'configuration.{0}.description' must be defined and can not be empty",t)),!1)}Ce.setHandler(((t,n)=>{for(const t of n.added){const n=t.value,r=t.collector;if(!n||!Array.isArray(n))return void r.error((0,v.C$)(we,17,"'configuration.semanticTokenType' must be an array"));for(const t of n)e(t,"semanticTokenType",r)&&Te.registerTokenType(t.id,t.description,t.superType)}for(const e of n.removed){const t=e.value;for(const e of t)Te.deregisterTokenType(e.id)}})),Re.setHandler(((t,n)=>{for(const t of n.added){const n=t.value,r=t.collector;if(!n||!Array.isArray(n))return void r.error((0,v.C$)(we,18,"'configuration.semanticTokenModifier' must be an array"));for(const t of n)e(t,"semanticTokenModifier",r)&&Te.registerTokenModifier(t.id,t.description)}for(const e of n.removed){const t=e.value;for(const e of t)Te.deregisterTokenModifier(e.id)}})),Ie.setHandler(((e,t)=>{for(const e of t.added){const t=e.value,n=e.collector;if(!t||!Array.isArray(t))return void n.error((0,v.C$)(we,19,"'configuration.semanticTokenScopes' must be an array"));for(const e of t)if(e.language&&"string"!=typeof e.language)n.error((0,v.C$)(we,20,"'configuration.semanticTokenScopes.language' must be a string"));else if(e.scopes&&"object"==typeof e.scopes)for(const t in e.scopes){const r=e.scopes[t];if(Array.isArray(r)&&!r.some((e=>"string"!=typeof e)))try{const n=Te.parseTokenSelector(t,e.language);Te.registerTokenStyleDefault(n,{scopesToProbe:r.map((e=>e.split(" ")))})}catch(e){n.error((0,v.C$)(we,23,"configuration.semanticTokenScopes.scopes': Problems parsing selector {0}.",t))}else n.error((0,v.C$)(we,22,"'configuration.semanticTokenScopes.scopes' values must be an array of strings"))}else n.error((0,v.C$)(we,21,"'configuration.semanticTokenScopes.scopes' must be defined as an object"))}for(const e of t.removed){const t=e.value;for(const e of t)for(const t in e.scopes){const n=e.scopes[t];try{const r=Te.parseTokenSelector(t,e.language);Te.registerTokenStyleDefault(r,{scopesToProbe:n.map((e=>e.split(" ")))})}catch(e){}}}}))}}let Le=class{static{this.ID="workbench.contrib.tokenClassificationExtensionPoint"}constructor(e){this.instantiationService=e,this.instantiationService.createInstance(Ae)}};Le=(0,o.g)([(0,o.f)(0,C.TG)],Le),(0,ve.dz)(Le.ID,Le,1);(0,n(80676).Z)(".token-inspect-widget{border:1px solid var(--vscode-editorHoverWidget-border);padding:10px;user-select:text;-webkit-user-select:text;z-index:50}.hc-black .tokens-inspect-widget,.hc-light .tokens-inspect-widget{border-width:2px}.monaco-editor .token-inspect-widget{background-color:var(--vscode-editorHoverWidget-background)}.monaco-editor .token-inspect-widget .tiw-metadata-separator{background-color:var(--vscode-editorHoverWidget-border)}.tiw-token{font-family:var(--monaco-monospace-font)}.tiw-metadata-separator{border:0;height:1px}.tiw-token-length{float:right;font-size:60%;font-weight:400}.tiw-metadata-table{width:100%}.tiw-metadata-value{font-family:var(--monaco-monospace-font);word-break:break-word}.tiw-metadata-values{list-style:none;margin-right:-10px;max-height:300px;overflow-y:auto;padding-left:0}.tiw-metadata-values>.tiw-metadata-value{margin-right:10px}.tiw-metadata-key{min-width:150px;padding-right:10px;vertical-align:top;white-space:nowrap;width:1px}.tiw-metadata-semantic{font-style:italic}.tiw-metadata-scopes{line-height:normal}.tiw-theme-selector{font-family:var(--monaco-monospace-font)}",{});var Pe=n(20080);function xe(e,t,n,r){let i=null;for(let s=e.tokenColors.length-1;s>=0;s--){const o=e.tokenColors[s];if(r&&!o.settings.foreground)continue;let a;if("string"==typeof o.scope)a=o.scope.split(/,/).map((e=>e.trim()));else{if(!Array.isArray(o.scope))continue;a=o.scope}for(let e=0,r=a.length;e<r;e++){const r=a[e],s=new Ne(r,o.settings);s.matches(t,n)&&s.isMoreSpecific(i)&&(i=s)}}return i}class Ne{constructor(e,t){this.rawSelector=e,this.settings=t;const n=this.rawSelector.split(/ /);this.scope=n[n.length-1],this.parentScopes=n.slice(0,n.length-1)}matches(e,t){return Ne._matches(this.scope,this.parentScopes,e,t)}static _cmp(e,t){if(null===e&&null===t)return 0;if(null===e)return-1;if(null===t)return 1;if(e.scope.length!==t.scope.length)return e.scope.length-t.scope.length;const n=e.parentScopes.length,r=t.parentScopes.length;if(n!==r)return n-r;for(let r=0;r<n;r++){const n=e.parentScopes[r].length,i=t.parentScopes[r].length;if(n!==i)return n-i}return 0}isMoreSpecific(e){return Ne._cmp(this,e)>0}static _matchesOne(e,t){const n=e+".";return e===t||t.substring(0,n.length)===n}static _matches(e,t,n,r){if(!this._matchesOne(e,n))return!1;let i=t.length-1,s=r.length-1;for(;i>=0&&s>=0;)this._matchesOne(t[i],r[s])&&i--,s--;return-1===i}}var Me,Ee=n(44476),Oe=n(80084);const De="vs/workbench/contrib/codeEditor/browser/inspectEditorTokens/inspectEditorTokens",Ge=a.$;let $e=class extends h.JT{static{Me=this}static{this.ID="editor.contrib.inspectEditorTokens"}static get(e){return e.getContribution(Me.ID)}constructor(e,t,n,r,i,s,o){super(),this._editor=e,this._textMateService=t,this._themeService=r,this._languageService=n,this._notificationService=i,this._configurationService=s,this._languageFeaturesService=o,this._widget=null,this._register(this._editor.onDidChangeModel((e=>this.stop()))),this._register(this._editor.onDidChangeModelLanguage((e=>this.stop()))),this._register(this._editor.onKeyUp((e=>9===e.keyCode&&this.stop())))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&this._editor.getModel().uri.scheme!==d.lg.vscodeNotebookCell&&(this._widget=new Be(this._editor,this._textMateService,this._languageService,this._themeService,this._notificationService,this._configurationService,this._languageFeaturesService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}toggle(){this._widget?this.stop():this.launch()}};$e=Me=(0,o.g)([(0,o.f)(1,i.n),(0,o.f)(2,S.O),(0,o.f)(3,de.D),(0,o.f)(4,I.l),(0,o.f)(5,w.U),(0,o.f)(6,Oe.p)],$e);class je extends Pe.R6{constructor(){super({id:"editor.action.inspectTMScopes",label:(0,v.C$)(De,0,"Developer: Inspect Editor Tokens and Scopes"),alias:"Developer: Inspect Editor Tokens and Scopes",precondition:void 0})}run(e,t){const n=$e.get(t);n?.toggle()}}function Fe(e){e.length>40&&(e=e.substr(0,20)+"…"+e.substr(e.length-20));let t="";for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);switch(r){case 9:t+="→";break;case 32:t+="·";break;default:t+=String.fromCharCode(r)}}return t}class Be extends h.JT{static{this._ID="editor.contrib.inspectEditorTokensWidget"}constructor(e,t,n,r,i,s,o){super(),this.allowEditorOverflow=!0,this._isDisposed=!1,this._editor=e,this._languageService=n,this._themeService=r,this._textMateService=t,this._notificationService=i,this._configurationService=s,this._languageFeaturesService=o,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="token-inspect-widget",this._currentRequestCancellationTokenSource=new f.AU,this._beginCompute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition((e=>this._beginCompute(this._editor.getPosition())))),this._register(r.onDidColorThemeChange((e=>this._beginCompute(this._editor.getPosition())))),this._register(s.onDidChangeConfiguration((e=>e.affectsConfiguration("editor.semanticHighlighting.enabled")&&this._beginCompute(this._editor.getPosition())))),this._editor.addContentWidget(this)}dispose(){this._isDisposed=!0,this._editor.removeContentWidget(this),this._currentRequestCancellationTokenSource.cancel(),super.dispose()}getId(){return Be._ID}_beginCompute(e){const t=this._textMateService.createTokenizer(this._model.getLanguageId()),n=this._computeSemanticTokens(e);(0,a.PO)(this._domNode),this._domNode.appendChild(document.createTextNode((0,v.C$)(De,1,"Loading..."))),Promise.all([t,n]).then((([t,n])=>{this._isDisposed||(this._compute(t,n,e),this._domNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`,this._editor.layoutContentWidget(this))}),(e=>{this._notificationService.warn(e),setTimeout((()=>{$e.get(this._editor)?.stop()}))}))}_isSemanticColoringEnabled(){const e=this._configurationService.getValue(Ee.e,{overrideIdentifier:this._model.getLanguageId(),resource:this._model.uri})?.enabled;return"boolean"==typeof e?e:this._themeService.getColorTheme().semanticHighlighting}_compute(e,t,n){const r=e&&this._getTokensAtPosition(e,n),i=t&&this._getSemanticTokenAtPosition(t,n);if(!r&&!i)return void(0,a.mc)(this._domNode,"No grammar or semantic tokens available.");const s=r?.metadata,o=i?.metadata,c=i&&Fe(this._model.getValueInRange(i.range)),l=r&&Fe(this._model.getLineContent(n.lineNumber).substring(r.token.startIndex,r.token.endIndex)),u=c||l||"";if((0,a.mc)(this._domNode,Ge("h2.tiw-token",void 0,u,Ge("span.tiw-token-length",void 0,`${u.length} ${1===u.length?"char":"chars"}`))),(0,a.R3)(this._domNode,Ge("hr.tiw-metadata-separator",{style:"clear:both"})),(0,a.R3)(this._domNode,Ge("table.tiw-metadata-table",void 0,Ge("tbody",void 0,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"language"),Ge("td.tiw-metadata-value",void 0,s?.languageId||"")),Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"standard token type"),Ge("td.tiw-metadata-value",void 0,this._tokenTypeToString(s?.tokenType||0))),...this._formatMetadata(o,s)))),i){(0,a.R3)(this._domNode,Ge("hr.tiw-metadata-separator"));const e=(0,a.R3)(this._domNode,Ge("table.tiw-metadata-table",void 0)),t=(0,a.R3)(e,Ge("tbody",void 0,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"semantic token type"),Ge("td.tiw-metadata-value",void 0,i.type))));if(i.modifiers.length&&(0,a.R3)(t,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"modifiers"),Ge("td.tiw-metadata-value",void 0,i.modifiers.join(" ")))),i.metadata){const e=["foreground","bold","italic","underline","strikethrough"],n={},r=new Array;for(const t of e)if(void 0!==i.metadata[t]){const e=i.definitions[t],s=this._renderTokenStyleDefinition(e,t),o=s.map((e=>e instanceof HTMLElement?e.outerHTML:e)).join();let a=n[o];a||(n[o]=a=[],r.push([s,o])),a.push(t)}for(const[e,i]of r)(0,a.R3)(t,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,n[i].join(", ")),Ge("td.tiw-metadata-value",void 0,...e)))}}if(r){const e=this._themeService.getColorTheme();(0,a.R3)(this._domNode,Ge("hr.tiw-metadata-separator"));const t=(0,a.R3)(this._domNode,Ge("table.tiw-metadata-table")),n=(0,a.R3)(t,Ge("tbody"));l&&l!==u&&(0,a.R3)(n,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"textmate token"),Ge("td.tiw-metadata-value",void 0,`${l} (${l.length})`)));const s=new Array;for(let e=r.token.scopes.length-1;e>=0;e--)s.push(r.token.scopes[e]),e>0&&s.push(Ge("br"));(0,a.R3)(n,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"textmate scopes"),Ge("td.tiw-metadata-value.tiw-metadata-scopes",void 0,...s)));const o=function(e,t,n=!0){for(let r=t.length-1;r>=0;r--){const i=t.slice(0,r),s=xe(e,t[r],i,n);if(s)return s}return null}(e,r.token.scopes,!1),c=i?.metadata?.foreground;if(o){if(c!==r.metadata.foreground){let e=Ge("code.tiw-theme-selector",void 0,o.rawSelector,Ge("br"),JSON.stringify(o.settings,null,"\t"));c&&(e=Ge("s",void 0,e)),(0,a.R3)(n,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"foreground"),Ge("td.tiw-metadata-value",void 0,e)))}}else c||(0,a.R3)(n,Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"foreground"),Ge("td.tiw-metadata-value",void 0,"No theme selector")))}}_formatMetadata(e,t){const n=new Array;function r(r){const i=e?.[r]||t?.[r];if(void 0!==i){const t=e?.[r]?"tiw-metadata-semantic":"";n.push(Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,r),Ge(`td.tiw-metadata-value.${t}`,void 0,i)))}return i}const i=r("foreground"),s=r("background");if(i&&s){const e=l.Il.fromHex(s),t=l.Il.fromHex(i);e.isOpaque()?n.push(Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"contrast ratio"),Ge("td.tiw-metadata-value",void 0,e.getContrastRatio(t.makeOpaque(e)).toFixed(2)))):n.push(Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"Contrast ratio cannot be precise for background colors that use transparency"),Ge("td.tiw-metadata-value")))}const o=new Array;function a(n){let r;e&&e[n]?r=Ge("span.tiw-metadata-semantic",void 0,n):t&&t[n]&&(r=n),r&&(o.length&&o.push(" "),o.push(r))}return a("bold"),a("italic"),a("underline"),a("strikethrough"),o.length&&n.push(Ge("tr",void 0,Ge("td.tiw-metadata-key",void 0,"font style"),Ge("td.tiw-metadata-value",void 0,...o))),n}_decodeMetadata(e){const t=this._themeService.getColorTheme().tokenColorMap,n=M.N.getLanguageId(e),r=M.N.getTokenType(e),i=M.N.getFontStyle(e),s=M.N.getForeground(e),o=M.N.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:r,bold:!!(2&i)||void 0,italic:!!(1&i)||void 0,underline:!!(4&i)||void 0,strikethrough:!!(8&i)||void 0,foreground:t[s],background:t[o]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_getTokensAtPosition(e,t){const n=t.lineNumber,r=this._getStateBeforeLine(e,n),i=e.tokenizeLine(this._model.getLineContent(n),r),s=e.tokenizeLine2(this._model.getLineContent(n),r);let o=0;for(let e=i.tokens.length-1;e>=0;e--){const n=i.tokens[e];if(t.column-1>=n.startIndex){o=e;break}}let a=0;for(let e=s.tokens.length>>>1;e>=0;e--)if(t.column-1>=s.tokens[e<<1]){a=e;break}return{token:i.tokens[o],metadata:this._decodeMetadata(s.tokens[1+(a<<1)])}}_getStateBeforeLine(e,t){let n=null;for(let r=1;r<t;r++){n=e.tokenizeLine(this._model.getLineContent(r),n).ruleStack}return n}isSemanticTokens(e){return e&&e.data}async _computeSemanticTokens(e){if(!this._isSemanticColoringEnabled())return null;const t=this._languageFeaturesService.documentSemanticTokensProvider.ordered(this._model);if(t.length){const e=t[0],n=await Promise.resolve(e.provideDocumentSemanticTokens(this._model,null,this._currentRequestCancellationTokenSource.token));if(this.isSemanticTokens(n))return{tokens:n,legend:e.getLegend()}}const n=this._languageFeaturesService.documentRangeSemanticTokensProvider.ordered(this._model);if(n.length){const t=n[0],r=e.lineNumber,i=new U.e(r,1,r,this._model.getLineMaxColumn(r)),s=await Promise.resolve(t.provideDocumentRangeSemanticTokens(this._model,i,this._currentRequestCancellationTokenSource.token));if(this.isSemanticTokens(s))return{tokens:s,legend:t.getLegend()}}return null}_getSemanticTokenAtPosition(e,t){const n=e.tokens.data,r=this._model.getLanguageId();let i=0,s=0;const o=t.lineNumber-1,a=t.column-1;for(let t=0;t<n.length;t+=5){const c=n[t],l=n[t+1],u=n[t+2],h=n[t+3],d=n[t+4],g=i+c,p=0===c?s+l:l;if(o===g&&p<=a&&a<p+u){const t=e.legend.tokenTypes[h]||"not in legend (ignored)",n=[];let i=d;for(let t=0;i>0&&t<e.legend.tokenModifiers.length;t++)1&i&&n.push(e.legend.tokenModifiers[t]),i>>=1;i>0&&n.push("not in legend (ignored)");const s=new U.e(g+1,p+1,g+1,p+1+u),o={},a=this._themeService.getColorTheme().tokenColorMap,c=this._themeService.getColorTheme().getTokenStyleMetadata(t,n,r,!0,o);let l;return c&&(l={languageId:void 0,tokenType:0,bold:c?.bold,italic:c?.italic,underline:c?.underline,strikethrough:c?.strikethrough,foreground:a[c?.foreground||0],background:void 0}),{type:t,modifiers:n,range:s,metadata:l,definitions:o}}i=g,s=p}return null}_renderTokenStyleDefinition(e,t){const n=new Array;if(void 0===e)return n;const r=this._themeService.getColorTheme();if(Array.isArray(e)){const i={};r.resolveScopes(e,i);const s=i[t];if(s&&i.scope){const e=Ge("ul.tiw-metadata-values"),t=Array.isArray(s.scope)?s.scope:[String(s.scope)];for(const n of t)e.appendChild(Ge("li.tiw-metadata-value.tiw-metadata-scopes",void 0,n));return n.push(i.scope.join(" "),e,Ge("code.tiw-theme-selector",void 0,JSON.stringify(s.settings,null,"\t"))),n}return n}if(be.SE.is(e)){const i=r.getTokenStylingRuleScope(e);return"setting"===i?(n.push(`User settings: ${e.selector.id} - ${this._renderStyleProperty(e.style,t)}`),n):"theme"===i?(n.push(`Color theme: ${e.selector.id} - ${this._renderStyleProperty(e.style,t)}`),n):n}{const i=r.resolveTokenStyleValue(e);return n.push(`Default: ${i?this._renderStyleProperty(i,t):""}`),n}}_renderStyleProperty(e,t){return"foreground"===t?e.foreground?l.Il.Format.CSS.formatHexA(e.foreground,!0):"":void 0!==e[t]?String(e[t]):""}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}(0,Pe._K)($e.ID,$e,4),(0,Pe.Qr)(je);const ze=new n.U(n(10297)).href;function We(){return{...(0,ye.ZP)(),[i.n.toString()]:new s.M(me,[],!1)}}(0,Se.l)({"vscode-oniguruma/../onig.wasm":ze,"vs/../../node_modules/vscode-oniguruma/release/onig.wasm":ze}),(0,ke.Fg)((async e=>{e.get(_e.g).when(2).then((()=>{r.IO.get(i.n)}))}))}}]);